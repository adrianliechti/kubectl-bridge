(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{5413:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"ResourceYAMLEditor",(function(){return h})),i.d(t,"DroppableEditYAML",(function(){return f}));var r=i(0),o=i(22),n=i(1438),l=i(300),s=i(2261),a=i(703),d=i(973);const p={drop(e,t){e.onDrop&&t.isOver()&&e.onDrop(e,t)}},c=Object(l.d)(n.a.FILE,p,(e,t)=>({connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}))(s.EditYAML),h=({initialResource:e,header:t,onSave:i,readOnly:o,create:n,onChange:l,hideHeader:s})=>r.createElement(f,{initialResource:e,header:t,onSave:i,readOnly:o,create:n,onChange:l,hideHeader:s}),f=Object(a.a)(class extends r.Component{constructor(e){super(e),this.fileUploadContents="",this.state={fileUpload:"",errors:[]},this.handleFileDrop=this.handleFileDrop.bind(this),this.clearFileUpload=this.clearFileUpload.bind(this)}addDocument(e){this.fileUploadContents=o.a(this.fileUploadContents)?e:`${this.fileUploadContents}\n---\n${e}`}readFileContents(t,i){if(t)if(t.size<=4e6){const r=new FileReader;r.onload=()=>{const o=e.from(r.result);d.isBinary(null,o)?this.setState(e=>({errors:[...e.errors,`Ignoring ${t.name}: Binary file detected. Edit text based YAML files only.`]})):(this.addDocument(o.toString().trim()),i&&this.setState({fileUpload:this.fileUploadContents}))},r.readAsArrayBuffer(t)}else this.setState(e=>({errors:[...e.errors,`Ignoring ${t.name}: Maximum file size exceeded. File limit is 4MB.`]}))}handleFileDrop(e,t){const{allowMultiple:i}=this.props;if(t)if(this.clearFileUpload(),i)t.getItem().files.forEach((e,i)=>{this.readFileContents(e,i===t.getItem().files.length-1)});else{const[e]=t.getItem().files;this.readFileContents(e,!0)}}clearFileUpload(){this.setState({fileUpload:"",errors:[]}),this.fileUploadContents=""}render(){const{allowMultiple:e,initialResource:t,create:i=!1,onChange:o=(()=>null),hideHeader:n=!1,isCodeImportRedirect:l=!1}=this.props,{errors:s,fileUpload:a}=this.state;return r.createElement(c,Object.assign({},this.props,{allowMultiple:e,obj:t,fileUpload:a,error:s.join("\n"),onDrop:this.handleFileDrop,clearFileUpload:this.clearFileUpload,create:i,onChange:o,hideHeader:n,isCodeImportRedirect:l}))}})}.call(this,i(265).Buffer)}}]);
//# sourceMappingURL=48-chunk-4a00f1bdae622a32fe00.min.js.map
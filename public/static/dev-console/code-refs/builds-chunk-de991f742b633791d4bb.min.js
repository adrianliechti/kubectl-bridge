(window.webpackJsonp=window.webpackJsonp||[]).push([[142,20,35,44,57,126],{1407:function(e,t,n){"use strict";n.r(t),n.d(t,"getQuotaResourceTypes",(function(){return L})),n.d(t,"getACRQResourceUsage",(function(){return B})),n.d(t,"getResourceUsage",(function(){return F})),n.d(t,"UsageIcon",(function(){return $})),n.d(t,"ResourceUsageRow",(function(){return Y})),n.d(t,"QuotaScopesInline",(function(){return G})),n.d(t,"QuotaScopesList",(function(){return W})),n.d(t,"hasComputeResources",(function(){return H})),n.d(t,"ResourceQuotasList",(function(){return J})),n.d(t,"AppliedClusterResourceQuotasList",(function(){return Z})),n.d(t,"quotaType",(function(){return X})),n.d(t,"flatten",(function(){return ee})),n.d(t,"ResourceQuotasPage",(function(){return te})),n.d(t,"AppliedClusterResourceQuotasPage",(function(){return ne})),n.d(t,"ResourceQuotasDetailsPage",(function(){return ae})),n.d(t,"AppliedClusterResourceQuotasDetailsPage",(function(){return re}));var a=n(16),r=n(160),s=n(1120),o=n(460),i=n(839),c=n(0),l=n(18),u=n(14),d=n(54),p=n(5839),m=n(5840),h=n(2248),b=n(2247),f=n(1199),g=n(7),v=n(5747),E=n(5746),y=n(5868),O=n(15),_=n(40),k=n(5),T=n(243),R=n(207),j=n(139),S=n(8),N=n(10),P=n(5674);const{common:C}=k.F.factory,w=[...k.F.getExtensionsActionsForKind(N.ResourceQuotaModel),...C],I=[...k.F.getExtensionsActionsForKind(N.ClusterResourceQuotaModel),...C],x=e=>[...k.F.getExtensionsActionsForKind(N.ClusterResourceQuotaModel),k.F.factory.ModifyLabels,k.F.factory.ModifyAnnotations,(t,n)=>({labelKey:"public~Edit AppliedClusterResourceQuota",href:`/k8s/ns/${e}/${Object(S.Hb)(N.AppliedClusterResourceQuotaModel)}/${n.metadata.name}/yaml`,accessReview:{group:t.apiGroup,resource:t.plural,name:n.metadata.name,namespace:e,verb:"update"}}),k.F.factory.Delete],D=e=>!e.metadata.namespace,A=Object(S.Hb)(N.ClusterResourceQuotaModel),M=Object(S.Hb)(N.AppliedClusterResourceQuotaModel),U=(e,t)=>e.metadata.namespace?w:"ClusterResourceQuota"===e.kind?I:"AppliedClusterResourceQuota"===e.kind?x(t.namespace):void 0,L=e=>{const t=D(e)?a.a(e,"spec.quota.hard"):a.a(e,"spec.hard");return r.a(t).sort()},B=(e,t,n)=>{var a,r,s,o,i,c,l,u,d,p,m,h,b;let f;if(n){f={namespace:null===(s=null===(r=(null===(a=e.status)||void 0===a?void 0:a.namespaces).filter(e=>e.namespace===n)[0])||void 0===r?void 0:r.status)||void 0===s?void 0:s.used[t],cluster:null===(i=null===(o=e.status)||void 0===o?void 0:o.total)||void 0===i?void 0:i.used[t]}}else f={namespace:0,cluster:null===(l=null===(c=e.status)||void 0===c?void 0:c.total)||void 0===l?void 0:l.used[t]};const g=null===(d=null===(u=e.status)||void 0===u?void 0:u.total)||void 0===d?void 0:d.used[t],v=(null===(m=null===(p=e.status)||void 0===p?void 0:p.total)||void 0===m?void 0:m.hard[t])||(null===(b=null===(h=e.spec)||void 0===h?void 0:h.quota)||void 0===b?void 0:b.hard[t]),E=v&&f.namespace?Object(k.Ib)(f.namespace)/Object(k.Ib)(v)*100:0,y=(v&&f.cluster?Object(k.Ib)(f.cluster)/Object(k.Ib)(v)*100:0)-E;return{used:f,totalUsed:g,max:v,percent:{namespace:E,otherNamespaces:y,unused:100-(E+y)}}},F=(e,t)=>{const n=D(e),r=n?["status","total","hard"]:["status","hard"],s=n?["spec","quota","hard"]:["spec","hard"],o=n?["status","total","used"]:["status","used"],i=a.a(e,[...r,t])||a.a(e,[...s,t]),c=a.a(e,[...o,t]);return{used:c,max:i,percent:i&&c?Object(k.Ib)(c)/Object(k.Ib)(i)*100:0}},q=["","","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg",k.F.columnClass],K=["","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg",k.F.columnClass],$=({percent:e})=>{let t=c.createElement(f.a,null);return 0===e?t=c.createElement(p.a,{className:"co-resource-quota-empty"}):e>0&&e<50?t=c.createElement(m.a,{className:"co-resource-quota-almost-empty"}):e>=50&&e<100?t=c.createElement(h.a,{className:"co-resource-quota-almost-full"}):100===e?t=c.createElement(b.a,{className:"co-resource-quota-full"}):e>100&&(t=c.createElement(O.tc,{className:"co-resource-quota-exceeded"})),t},Y=({quota:e,resourceType:t,namespace:n})=>{if(Object(S.Db)(e)===M){const{used:a,totalUsed:r,max:s,percent:o}=B(e,t,n);return c.createElement("div",{className:"row co-m-row"},c.createElement("div",{className:"col-sm-4 col-xs-6 co-break-word"},t),c.createElement("div",{className:"col-sm-2 hidden-xs co-resource-quota-icon"},c.createElement($,{percent:o.namespace})),c.createElement("div",{className:"col-sm-2 col-xs-2"},a.namespace),c.createElement("div",{className:"col-sm-2 col-xs-2"},r),c.createElement("div",{className:"col-sm-2 col-xs-2"},s))}const{used:a,max:r,percent:s}=F(e,t);return c.createElement("div",{className:"row co-m-row"},c.createElement("div",{className:"col-sm-4 col-xs-6 co-break-word"},t),c.createElement("div",{className:"col-sm-2 hidden-xs co-resource-quota-icon"},c.createElement($,{percent:s})),c.createElement("div",{className:"col-sm-3 col-xs-3"},a),c.createElement("div",{className:"col-sm-3 col-xs-3"},r))},G=({scopes:e})=>c.createElement("span",null,"(",e.join(", "),")"),W=({scopes:e})=>{const{t:t}=Object(g.useTranslation)(),n={Terminating:{description:t("public~Affects pods that have an active deadline. These pods usually include builds, deployers, and jobs.")},NotTerminating:{description:t("public~Affects pods that do not have an active deadline. These pods usually include your applications.")},BestEffort:{description:t("public~Affects pods that do not have resource limits set. These pods have a best effort quality of service.")},NotBestEffort:{description:t("public~Affects pods that have at least one resource limit set. These pods do not have a best effort quality of service.")}};return e.map(e=>{const t=a.a(n,e);return t?c.createElement("dd",{key:e},c.createElement("div",{className:"co-resource-quota-scope__label"},e),c.createElement("div",{className:"co-resource-quota-scope__description"},t.description)):c.createElement("dd",{key:e,className:"co-resource-quota-scope__label"},e)})},H=e=>s.a(e,["requests.cpu","cpu","limits.cpu","requests.memory","memory","limits.memory"]).length>0,V=({obj:e})=>{var t,n,a,r,s,o,i,d,p;const{t:m}=Object(g.useTranslation)(),h=Object(u.useParams)(),b=L(e),f=null!==(n=null===(t=e.spec)||void 0===t?void 0:t.scopes)&&void 0!==n?n:null===(r=null===(a=e.spec)||void 0===a?void 0:a.quota)||void 0===r?void 0:r.scopes,O=Object(S.Db)(e),_=O===M,T=null==h?void 0:h.ns;let R,j;switch(O){case M:R=m("public~AppliedClusterResourceQuota details"),j=c.createElement(v.a,{appliedClusterResourceQuota:e,namespace:T});break;case A:R=m("public~ClusterResourceQuota details"),j=c.createElement(y.a,{clusterResourceQuota:e});break;default:R=m("public~ResourceQuota details"),j=c.createElement(E.a,{resourceQuota:e})}const P=Object(k.Dc)({group:N.ClusterResourceQuotaModel.apiGroup,resource:N.ClusterResourceQuotaModel.plural,verb:"list"});return c.createElement(c.Fragment,null,c.createElement("div",{className:"co-m-pane__body"},c.createElement(k.ob,{text:R}),j,c.createElement("div",{className:"row"},c.createElement("div",{className:"col-sm-6"},c.createElement(k.lb,{resource:e},P&&c.createElement(k.r,{label:m("public~ClusterResourceQuota"),obj:e,path:"rq.metadata.name"},c.createElement(k.hb,{kind:A,name:e.metadata.name})),c.createElement(k.r,{label:m("public~Label selector"),obj:e,path:"spec.selector.labels.matchLabels"},c.createElement(k.L,{kind:M,labels:null===(i=null===(o=null===(s=e.spec)||void 0===s?void 0:s.selector)||void 0===o?void 0:o.labels)||void 0===i?void 0:i.matchLabels})),c.createElement(k.r,{label:m("public~Project annotations"),obj:e,path:"spec.selector.annotations"},c.createElement(k.pb,{selector:null===(p=null===(d=e.spec)||void 0===d?void 0:d.selector)||void 0===p?void 0:p.annotations,namespace:T})))),f&&c.createElement("div",{className:"col-sm-6"},c.createElement("dl",{className:"co-m-pane__details"},c.createElement("dt",null,m("public~Scopes")),c.createElement(W,{scopes:f}))))),c.createElement("div",{className:"co-m-pane__body"},c.createElement(k.ob,{text:R,style:{display:"block",marginBottom:"20px"}},c.createElement(k.B,null,c.createElement("p",null,m("public~Requests are the amount of resources you expect to use. These are used when establishing if the cluster can fulfill your Request.")),c.createElement("p",null,m("public~Limits are a maximum amount of a resource you can consume. Applications consuming more than the Limit may be terminated.")),c.createElement("p",null,m("public~A cluster administrator can establish limits on both the amount you can request and your limits with a ResourceQuota.")))),c.createElement("div",{className:"co-m-table-grid co-m-table-grid--bordered"},c.createElement("div",{className:"row co-m-table-grid__head"},c.createElement("div",{className:"col-sm-4 col-xs-6"},m("public~Resource type")),c.createElement("div",{className:"col-sm-2 hidden-xs"},m("public~Capacity")),c.createElement("div",{className:l({"col-sm-2 col-xs-2":_},{"col-sm-3 col-xs-3":!_})},m("public~Used")),_&&c.createElement("div",{className:"col-sm-2 col-xs-2"},m("public~Total used")),c.createElement("div",{className:l({"col-sm-2 col-xs-2":_},{"col-sm-3 col-xs-3":!_})},m("public~Max"))),c.createElement("div",{className:"co-m-table-grid__body"},b.map(t=>c.createElement(Y,{key:t,quota:e,resourceType:t,namespace:T}))))))},z=({obj:e,customData:t})=>{var n,a,r,s,o,i,u,d;const{t:p}=Object(g.useTranslation)(),m=U(e,t);let h;return h=e.kind===N.ResourceQuotaModel.kind?Object.keys((null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.hard)||{}).reduce((t,n)=>{var a,r,s;return Object(P.b)(null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.hard[n],null===(s=null===(r=null==e?void 0:e.status)||void 0===r?void 0:r.used)||void 0===s?void 0:s[n])>=100?t+1:t},0):Object.keys((null===(r=null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.total)||void 0===r?void 0:r.hard)||{}).reduce((t,n)=>{var a,r,s,o,i;return Object(P.b)(null===(r=null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.total)||void 0===r?void 0:r.hard[n],null===(i=null===(o=null===(s=null==e?void 0:e.status)||void 0===s?void 0:s.total)||void 0===o?void 0:o.used)||void 0===i?void 0:i[n])>=100?t+1:t},0),c.createElement(c.Fragment,null,c.createElement(_.k,{className:q[0]},c.createElement(k.hb,{kind:Object(S.Db)(e),name:e.metadata.name,namespace:Object(S.Db)(e)===M?t.namespace:e.metadata.namespace,className:"co-resource-item__resource-name",dataTest:"resource-quota-link"})),c.createElement(_.k,{className:l(q[1],"co-break-word"),columnID:"namespace"},e.metadata.namespace?c.createElement(k.hb,{kind:"Namespace",name:e.metadata.namespace}):p("public~None")),c.createElement(_.k,{className:l(q[2],"co-break-word")},c.createElement(k.L,{kind:M,labels:null===(i=null===(o=null===(s=e.spec)||void 0===s?void 0:s.selector)||void 0===o?void 0:o.labels)||void 0===i?void 0:i.matchLabels})),c.createElement(_.k,{className:l(q[3],"co-break-word")},c.createElement(k.pb,{selector:null===(d=null===(u=e.spec)||void 0===u?void 0:u.selector)||void 0===d?void 0:d.annotations,namespace:t.namespace})),c.createElement(_.k,{className:l(q[4],"co-break-word")},h>0?c.createElement(c.Fragment,null,c.createElement(O.tc,null)," ",p("public~{{count}} resource reached quota",{count:h})):p("public~none are at quota")),c.createElement(_.k,{className:q[5]},c.createElement(k.xb,{timestamp:e.metadata.creationTimestamp})),c.createElement(_.k,{className:q[6]},c.createElement(k.gb,{customData:t,actions:m,kind:Object(S.Db)(e),resource:e})))},Q=({obj:e,customData:t})=>{var n,a,r,s,o,i,u;const{t:d}=Object(g.useTranslation)(),p=U(e,t),m=Object.keys((null===(a=null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.total)||void 0===a?void 0:a.hard)||{}).reduce((t,n)=>{var a,r,s,o,i;return Object(P.b)(null===(r=null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.total)||void 0===r?void 0:r.hard[n],null===(i=null===(o=null===(s=null==e?void 0:e.status)||void 0===s?void 0:s.total)||void 0===o?void 0:o.used)||void 0===i?void 0:i[n])>=100?t+1:t},0);return c.createElement(c.Fragment,null,c.createElement(_.k,{className:K[0]},c.createElement(k.hb,{kind:M,name:e.metadata.name,namespace:t.namespace,className:"co-resource-item__resource-name"})),c.createElement(_.k,{className:l(K[1],"co-break-word")},c.createElement(k.L,{kind:M,labels:null===(o=null===(s=null===(r=e.spec)||void 0===r?void 0:r.selector)||void 0===s?void 0:s.labels)||void 0===o?void 0:o.matchLabels})),c.createElement(_.k,{className:l(K[2],"co-break-word")},c.createElement(k.pb,{selector:null===(u=null===(i=e.spec)||void 0===i?void 0:i.selector)||void 0===u?void 0:u.annotations,namespace:t.namespace})),c.createElement(_.k,{className:l(K[3],"co-break-word")},m>0?c.createElement(c.Fragment,null,c.createElement(O.tc,null)," ",d("public~{{count}} resource reached quota",{count:m})):d("public~none are at quota")),c.createElement(_.k,{className:K[4]},c.createElement(k.xb,{timestamp:e.metadata.creationTimestamp})),c.createElement(_.k,{className:K[5]},c.createElement(k.gb,{customData:t,actions:p,kind:M,resource:e})))},J=e=>{const{t:t}=Object(g.useTranslation)();return c.createElement(_.j,Object.assign({},e,{"aria-label":t("public~ResourceQuotas"),Header:()=>[{title:t("public~Name"),sortField:"metadata.name",transforms:[d.a],props:{className:q[0]}},{title:t("public~Namespace"),sortField:"metadata.namespace",transforms:[d.a],props:{className:q[1]},id:"namespace"},{title:t("public~Label selector"),sortField:"spec.selector.labels.matchLabels",transforms:[d.a],props:{className:q[2]}},{title:t("public~Project annotations"),sortField:"spec.selector.annotations",transforms:[d.a],props:{className:q[3]}},{title:t("public~Status"),props:{className:q[4]},transforms:[d.a]},{title:t("public~Created"),sortField:"metadata.creationTimestamp",transforms:[d.a],props:{className:q[5]}},{title:"",props:{className:q[6]}}],Row:z,virtualize:!0,customData:{namespace:e.namespace}}))},Z=e=>{const{t:t}=Object(g.useTranslation)();return c.createElement(_.j,Object.assign({},e,{"aria-label":t("public~AppliedClusterResourceQuotas"),Header:()=>[{title:t("public~Name"),sortField:"metadata.name",transforms:[d.a],props:{className:K[0]}},{title:t("public~Label selector"),sortField:"spec.selector.labels.matchLabels",transforms:[d.a],props:{className:K[1]}},{title:t("public~Project annotations"),sortField:"spec.selector.annotations",transforms:[d.a],props:{className:K[2]}},{title:t("public~Status"),props:{className:K[3]},transforms:[d.a]},{title:t("public~Created"),sortField:"metadata.creationTimestamp",transforms:[d.a],props:{className:K[4]}},{title:"",props:{className:K[5]}}],Row:Q,virtualize:!0,customData:{namespace:e.namespace}}))},X=e=>{if(e)return e.metadata.namespace?"namespace":"cluster"},ee=e=>o.a(e,e=>i.a(e.data)),te=Object(T.a)(O.O.OPENSHIFT)(({namespace:e,flags:t,mock:n,showTitle:a})=>{const{t:r}=Object(g.useTranslation)(),s=[{kind:"ResourceQuota",namespaced:!0}];let o=null;if(Object(R.c)(t[O.O.OPENSHIFT]))return c.createElement(j.f,null);t[O.O.OPENSHIFT]&&(e?s.push({kind:Object(S.Hb)(N.AppliedClusterResourceQuotaModel),namespaced:!0,namespace:e,optional:!0}):s.push({kind:Object(S.Hb)(N.ClusterResourceQuotaModel),namespaced:!1,optional:!0}),o=[{filterGroupName:r("public~Role"),type:"role-kind",reducer:X,items:[{id:"cluster",title:r("public~Cluster-wide {{resource}}",{resource:r(N.ResourceQuotaModel.labelPluralKey)})},{id:"namespace",title:r("public~Namespace {{resource}}",{resource:r(N.ResourceQuotaModel.labelPluralKey)})}]}]);const i=e||"default",l={model:N.ResourceQuotaModel,namespace:i};return c.createElement(_.i,{canCreate:!0,createAccessReview:l,createButtonText:r("public~Create ResourceQuota"),createProps:{to:`/k8s/ns/${i}/resourcequotas/~new`},ListComponent:J,resources:s,label:r(N.ResourceQuotaModel.labelPluralKey),namespace:e,flatten:ee,title:r(N.ResourceQuotaModel.labelPluralKey),rowFilters:o,mock:n,showTitle:a})}),ne=({namespace:e,mock:t,showTitle:n})=>{const{t:a}=Object(g.useTranslation)(),r=[{kind:Object(S.Hb)(N.AppliedClusterResourceQuotaModel),namespaced:!0,namespace:e,optional:!0}];return c.createElement(_.i,{ListComponent:Z,resources:r,label:a(N.AppliedClusterResourceQuotaModel.labelPluralKey),namespace:e,flatten:ee,title:a(N.AppliedClusterResourceQuotaModel.labelPluralKey),mock:t,showTitle:n})},ae=e=>c.createElement(_.a,Object.assign({},e,{menuActions:w,pages:[k.mc.details(V),k.mc.editYaml()]})),re=e=>{const t=Object(u.useParams)(),n=x(null==t?void 0:t.ns);return c.createElement(_.a,Object.assign({},e,{menuActions:n,pages:[k.mc.details(V),k.mc.editYaml()]}))}},1945:function(e,t,n){"use strict";n.r(t),n.d(t,"deleteModal",(function(){return V})),n.d(t,"NamespacesList",(function(){return re})),n.d(t,"NamespacesPage",(function(){return se})),n.d(t,"projectMenuActions",(function(){return oe})),n.d(t,"ProjectsTable",(function(){return pe})),n.d(t,"ProjectList",(function(){return ge})),n.d(t,"ProjectsPage",(function(){return ve})),n.d(t,"PullSecret",(function(){return Ee})),n.d(t,"NamespaceLineCharts",(function(){return ye})),n.d(t,"TopPodsBarChart",(function(){return Oe})),n.d(t,"NamespaceSummary",(function(){return ke})),n.d(t,"NamespaceDetails",(function(){return Te})),n.d(t,"NamespacesDetailsPage",(function(){return je})),n.d(t,"ProjectsDetailsPage",(function(){return Se}));var a=n(16),r=n(667),s=n(1256),o=n(501),i=n(22),c=n(50),l=n(461),u=n(0),d=n(137),p=n(18),m=n(54),h=n(88),b=n(80),f=n(19),g=n(2244),v=n.n(g),E=n(31),y=n(7),O=n(29),_=n(615),k=n(764),T=n(15),R=n(762),j=n(121),S=n(13),N=n(10),P=n(109),C=n(8),w=n(53),I=n(40),x=n(5),D=n(131),A=n(767),M=n(199),U=n(207),L=n(978),B=n(5852),F=n(5838),q=n(108),K=n(1418),$=n(2249),Y=n(2250),G=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const W=e=>a.a(e,["metadata","annotations","openshift.io/display-name"]),H=()=>[{filterGroupName:O.a.t("public~Requester"),type:"requester",reducer:e=>{var t,n,a;const r=null===(t=e.metadata)||void 0===t?void 0:t.name,s=null===(a=null===(n=e.metadata)||void 0===n?void 0:n.annotations)||void 0===a?void 0:a["openshift.io/requester"];return Object(K.b)(s)?T.Hb.ME:Object(K.c)(s,r)?T.Hb.USER:Object(K.d)({title:r})?T.Hb.SYSTEM:void 0},items:[{id:T.Hb.ME,title:O.a.t("public~Me")},{id:T.Hb.USER,title:O.a.t("public~User")},{id:T.Hb.SYSTEM,title:O.a.t("public~System"),hideIfEmpty:!0}]}],V=(e,t)=>{var n;const{labelKey:a,labelKind:r,weight:s,accessReview:o}=x.F.factory.Delete(e,t);let i,c,l=void 0;return"default"===t.metadata.name?i=e.label+" default cannot be deleted":"Terminating"===(null===(n=t.status)||void 0===n?void 0:n.phase)?i=e.label+" is already terminating":l=()=>Object(D.r)({kind:e,resource:t}),i&&(c=u.createElement("div",{className:"dropdown__disabled"},u.createElement(h.a,{content:i},u.createElement("span",null,O.a.t(a,r))))),{label:c,labelKey:a,labelKind:r,weight:s,callback:l,accessReview:o}},z=[x.F.factory.ModifyLabels,x.F.factory.ModifyAnnotations,x.F.factory.Edit,V],Q=()=>{const e=[{key:"memory",query:'sum by(namespace) (container_memory_working_set_bytes{container="",pod!=""})'},{key:"cpu",query:"namespace:container_cpu_usage:sum"}].map(({key:e,query:t})=>{const n=`${M.g}/api/v1/query?&query=${t}`;return Object(P.c)(n).then(({data:{result:t}})=>t.reduce((t,n)=>{const a=Number(n.value[1]);return r.a(t,[e,n.metric.namespace],a)},{}))});return Promise.all(e).then(e=>s.a({},...e)).catch(console.error)},J=Object.freeze({name:{classes:"",id:"name"},displayName:{classes:"co-break-word",id:"displayName"},status:{classes:"",id:"status"},requester:{classes:"",id:"requester"},memory:{classes:"",id:"memory"},cpu:{classes:"",id:"cpu"},created:{classes:"",id:"created"},description:{classes:"",id:"description"},labels:{classes:"",id:"labels"}}),Z=()=>[{title:O.a.t("public~Name"),id:J.name.id,sortField:"metadata.name",transforms:[m.a],props:{className:J.name.classes}},{title:O.a.t("public~Display name"),id:J.displayName.id,sortField:'metadata.annotations["openshift.io/display-name"]',transforms:[m.a],props:{className:J.displayName.classes}},{title:O.a.t("public~Status"),id:J.status.id,sortField:"status.phase",transforms:[m.a],props:{className:J.status.classes}},{title:O.a.t("public~Requester"),id:J.requester.id,sortField:"metadata.annotations.['openshift.io/requester']",transforms:[m.a],props:{className:J.requester.classes}},{title:O.a.t("public~Memory"),id:J.memory.id,sortFunc:"namespaceMemory",transforms:[m.a],props:{className:J.memory.classes}},{title:O.a.t("public~CPU"),id:J.cpu.id,sortFunc:"namespaceCPU",transforms:[m.a],props:{className:J.cpu.classes}},{title:O.a.t("public~Created"),id:J.created.id,sortField:"metadata.creationTimestamp",transforms:[m.a],props:{className:J.created.classes}},{title:O.a.t("public~Description"),id:J.description.id,sortField:"metadata.annotations.['openshift.io/description']",transforms:[m.a],props:{className:J.description.classes},additional:!0},{title:O.a.t("public~Labels"),id:J.labels.id,sortField:"metadata.labels",transforms:[m.a],props:{className:J.labels.classes},additional:!0},{title:"",props:{className:x.F.columnClass}}];Z.displayName="NamespacesTableHeader";const X=Object(C.Hb)(N.NamespaceModel),ee=()=>new Set(Z().reduce((e,t)=>(t.id&&!t.additional&&e.push(t.id),e),[])),te=({obj:e,customData:{tableColumns:t}})=>{var n,a,r;const{t:s}=Object(y.useTranslation)(),o=Object(E.useSelector)(({UI:e})=>e.getIn(["metrics","namespace"])),i=Object(T.dd)(e),c=Object(T.Bd)(e),l=null===(n=null==o?void 0:o.memory)||void 0===n?void 0:n[i],d=null===(a=null==o?void 0:o.cpu)||void 0===a?void 0:a[i],m=Object(T.Jc)(e),h=e.metadata.labels,b=(null==t?void 0:t.length)>0?new Set(t):ee();return u.createElement(u.Fragment,null,u.createElement(I.k,{className:J.name.classes},u.createElement(x.hb,{kind:"Namespace",name:e.metadata.name})),u.createElement(I.k,{className:J.displayName.classes,columns:b,columnID:J.displayName.id},u.createElement("span",{className:"co-break-word co-line-clamp"},W(e)||u.createElement("span",{className:"text-muted"},s("public~No display name")))),u.createElement(I.k,{className:p(J.status.classes,"co-break-word"),columns:b,columnID:J.status.id},u.createElement(T.cc,{status:null===(r=e.status)||void 0===r?void 0:r.phase})),u.createElement(I.k,{className:p(J.requester.classes,"co-break-word"),columns:b,columnID:J.requester.id},c||u.createElement("span",{className:"text-muted"},s("public~No requester"))),u.createElement(I.k,{className:J.memory.classes,columns:b,columnID:J.memory.id},l?Object(x.Ob)(l)+" MiB":"-"),u.createElement(I.k,{className:J.cpu.classes,columns:b,columnID:J.cpu.id},d?s("public~{{cores}} cores",{cores:Object(x.Pb)(d)}):"-"),u.createElement(I.k,{className:J.created.classes,columns:b,columnID:J.created.id},u.createElement(x.xb,{timestamp:e.metadata.creationTimestamp})),u.createElement(I.k,{className:J.description.classes,columns:b,columnID:J.description.id},u.createElement("span",{className:"co-break-word co-line-clamp"},m||u.createElement("span",{className:"text-muted"},s("public~No description")))),u.createElement(I.k,{className:J.labels.classes,columns:b,columnID:J.labels.id},u.createElement(x.L,{kind:"Namespace",labels:h})),u.createElement(I.k,{className:x.F.columnClass},u.createElement(x.gb,{actions:z,kind:"Namespace",resource:e})))},ne=()=>{const{t:e}=Object(y.useTranslation)();return u.createElement(x.h,{title:e("public~No Namespaces found"),Icon:v.a},e("public~No results were found for the requested Namespaces."))},ae=()=>{const{t:e}=Object(y.useTranslation)();return u.createElement(x.h,{title:e("public~No matching Namespaces"),Icon:v.a},e("public~No results match the filter criteria."))},re=e=>{var t;const{t:n}=Object(y.useTranslation)(),a=Object(E.useDispatch)(),[r]=Object(T.ff)(T.q,T.r,void 0,!0);u.useEffect(()=>{const e=()=>Q().then(e=>a(w.q(e)));e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[a]);const s=(null===(t=null==r?void 0:r[X])||void 0===t?void 0:t.length)>0?new Set(r[X]):null,o=u.useMemo(()=>({tableColumns:null==r?void 0:r[X]}),[r]);return u.createElement(I.j,Object.assign({},e,{activeColumns:s,columnManagementID:X,"aria-label":n("public~Namespaces"),Header:Z,Row:te,customData:o,virtualize:!0,EmptyMsg:ae,NoDataEmptyMsg:ne}))},se=e=>{var t;const{t:n}=Object(y.useTranslation)(),a=Object($.a)(),[r]=Object(T.ff)(T.q,T.r,void 0,!0),s=(null===(t=null==r?void 0:r[X])||void 0===t?void 0:t.length)>0?new Set(r[X]):ee();return u.createElement(I.c,Object.assign({},e,{rowFilters:H(),ListComponent:re,canCreate:!0,createHandler:()=>a(),columnLayout:{columns:Z().map(e=>o.a(e,["title","additional","id"])),id:X,selectedColumns:s,type:n("public~Namespaces")}}))},oe=[x.F.factory.Edit,V],ie=Object(C.Hb)(N.ProjectModel),ce=({showMetrics:e,showActions:t})=>[{title:O.a.t("public~Name"),id:J.name.id,sortField:"metadata.name",transforms:[m.a],props:{className:J.name.classes}},{title:O.a.t("public~Display name"),id:J.displayName.id,sortField:'metadata.annotations["openshift.io/display-name"]',transforms:[m.a],props:{className:J.displayName.classes}},{title:O.a.t("public~Status"),id:J.status.id,sortField:"status.phase",transforms:[m.a],props:{className:J.status.classes}},{title:O.a.t("public~Requester"),id:J.requester.id,sortField:"metadata.annotations.['openshift.io/requester']",transforms:[m.a],props:{className:J.requester.classes}},...e?[{title:O.a.t("public~Memory"),id:J.memory.id,sortFunc:"namespaceMemory",transforms:[m.a],props:{className:J.memory.classes}},{title:O.a.t("public~CPU"),id:J.cpu.id,sortFunc:"namespaceCPU",transforms:[m.a],props:{className:J.cpu.classes}}]:[],{title:O.a.t("public~Created"),id:J.created.id,sortField:"metadata.creationTimestamp",transforms:[m.a],props:{className:J.created.classes}},{title:O.a.t("public~Description"),id:J.description.id,sortField:"metadata.annotations.['openshift.io/description']",transforms:[m.a],props:{className:J.description.classes},additional:!0},{title:O.a.t("public~Labels"),id:J.labels.id,sortField:"metadata.labels",transforms:[m.a],props:{className:J.labels.classes},additional:!0},...t?[{title:"",props:{className:x.F.columnClass}}]:[]],le=({project:e})=>{const t=Object(E.useDispatch)(),[,n]=Object(T.ff)(T.gb,T.fb),a=new URL(window.location.href),r=new URLSearchParams(a.search),s=a.pathname;r.has("project-name")&&r.delete("project-name");const o={search:"?"+r.toString(),hash:a.hash},i=w.b(e.metadata.name,s,o);return u.createElement("span",{className:"co-resource-item co-resource-item--truncate"},u.createElement(x.fb,{kind:"Project"}),u.createElement(k.Link,{to:i,className:"co-resource-item__resource-name",onClick:a=>{Object(T.Sd)(a)||(n(e.metadata.name),sessionStorage.setItem(T.fb,e.metadata.name),t(j.b(Object(C.Hb)(N.ProjectModel),"project-name","")))}},e.metadata.name))},ue=()=>ce({showMetrics:!1,showActions:!1}),de=({obj:e,customData:t={}})=>{var n,a,r;const{t:s}=Object(y.useTranslation)(),o=Object(E.useSelector)(({UI:e})=>e.getIn(["metrics","namespace"])),i=Object(T.dd)(e),c=Object(T.Bd)(e),{ProjectLinkComponent:l,actionsEnabled:d=!0,showMetrics:m,showActions:h,isColumnManagementEnabled:b=!0,tableColumns:f}=t,g=null===(n=null==o?void 0:o.memory)||void 0===n?void 0:n[i],v=null===(a=null==o?void 0:o.cpu)||void 0===a?void 0:a[i],O=Object(T.Jc)(e),_=e.metadata.labels,k=b?(null==f?void 0:f.length)>0?new Set(f):(({showMetrics:e,showActions:t})=>new Set(ce({showMetrics:e,showActions:t}).reduce((e,t)=>(t.id&&!t.additional&&e.push(t.id),e),[])))({showMetrics:m,showActions:h}):null;return u.createElement(u.Fragment,null,u.createElement(I.k,{className:J.name.classes},t&&l?u.createElement(l,{project:e}):u.createElement("span",{className:"co-resource-item"},u.createElement(x.hb,{kind:"Project",name:e.metadata.name}))),u.createElement(I.k,{className:J.displayName.classes,columns:k,columnID:J.displayName.id},u.createElement("span",{className:"co-break-word co-line-clamp"},W(e)||u.createElement("span",{className:"text-muted"},s("public~No display name")))),u.createElement(I.k,{className:J.status.classes,columns:k,columnID:J.status.id},u.createElement(T.cc,{status:null===(r=e.status)||void 0===r?void 0:r.phase})),u.createElement(I.k,{className:p(J.requester.classes,"co-break-word"),columns:k,columnID:J.requester.id},c||u.createElement("span",{className:"text-muted"},s("public~No requester"))),m&&u.createElement(u.Fragment,null,u.createElement(I.k,{className:J.memory.classes,columns:k,columnID:J.memory.id},g?Object(x.Ob)(g)+" MiB":"-"),u.createElement(I.k,{className:J.cpu.classes,columns:k,columnID:J.cpu.id},v?s("public~{{cores}} cores",{cores:Object(x.Pb)(v)}):"-")),u.createElement(I.k,{className:J.created.classes,columns:k,columnID:J.created.id},u.createElement(x.xb,{timestamp:e.metadata.creationTimestamp})),b&&u.createElement(u.Fragment,null,u.createElement(I.k,{className:J.description.classes,columns:k,columnID:J.description.id},u.createElement("span",{className:"co-break-word co-line-clamp"},O||u.createElement("span",{className:"text-muted"},s("public~No description")))),u.createElement(I.k,{className:J.labels.classes,columns:k,columnID:J.labels.id},u.createElement(x.L,{labels:_,kind:"Project"}))),d&&u.createElement(I.k,{className:x.F.columnClass},u.createElement(x.gb,{actions:oe,kind:"Project",resource:e})))};de.displayName="ProjectTableRow";const pe=e=>{const{t:t}=Object(y.useTranslation)(),n=u.useMemo(()=>({ProjectLinkComponent:le,actionsEnabled:!1,isColumnManagementEnabled:!1}),[]);return u.createElement(I.j,Object.assign({},e,{"aria-label":t("public~Projects"),Header:ue,Row:de,customData:n,virtualize:!0}))},me=()=>ce({showMetrics:!0,showActions:!0}),he=()=>ce({showMetrics:!1,showActions:!0}),be=()=>{const{t:e}=Object(y.useTranslation)(),t=Object(T.Fe)(T.O.CAN_CREATE_NS),n=Object(T.Fe)(T.O.CAN_CREATE_PROJECT),a=t||n;return u.createElement(x.h,{title:e("public~Welcome to OpenShift")},u.createElement(L.a,{canCreate:a}))},fe=()=>{const{t:e}=Object(y.useTranslation)();return u.createElement(x.h,{title:e("public~No matching Projects"),icon:v.a},e("public~No results match the filter criteria."))},ge=e=>{var t,{data:n}=e,a=G(e,["data"]);const{t:r}=Object(y.useTranslation)(),s=Object(E.useDispatch)(),o=Object(T.Fe)(T.O.CAN_GET_NS),[i]=Object(T.ff)(T.q,T.r,void 0,!0),c=Object(T.Ue)()&&o&&window.screen.width>=1200,l=u.useMemo(()=>({showMetrics:c,tableColumns:null==i?void 0:i[ie]}),[c,i]);u.useEffect(()=>{if(c){const e=()=>Q().then(e=>s(w.q(e)));e();const t=setInterval(e,3e4);return()=>clearInterval(t)}},[s,c]);const d=(null===(t=null==i?void 0:i[ie])||void 0===t?void 0:t.length)>0?new Set(i[ie]):null;return Object(U.c)(o)?null:u.createElement(I.j,Object.assign({},a,{activeColumns:d,columnManagementID:ie,"aria-label":r("public~Projects"),data:n,Header:c?me:he,Row:de,NoDataEmptyMsg:be,EmptyMsg:fe,customData:l,virtualize:!0}))},ve=e=>{var t;const{t:n}=Object(y.useTranslation)(),a=Object(Y.a)(),r=Object(T.Fe)(T.O.CAN_GET_NS),s=Object(T.Fe)(T.O.CAN_CREATE_PROJECT),[i]=Object(T.ff)(T.q,T.r,void 0,!0),c=Object(T.Ue)()&&r&&window.screen.width>=1200,l=c;return u.createElement(I.c,Object.assign({},e,{rowFilters:H(),ListComponent:ge,canCreate:s,createHandler:()=>a(),filterLabel:n("public~by name or display name"),skipAccessReview:!0,textFilter:"project-name",kind:"Project",columnLayout:{columns:ce({showMetrics:c,showActions:l}).map(e=>o.a(e,["title","additional","id"])),id:ie,selectedColumns:(null===(t=null==i?void 0:i[ie])||void 0===t?void 0:t.length)>0?new Set(i[ie]):null,type:n("public~Project")}}))},Ee=e=>{const[t,n]=u.useState(!0),[a,r]=u.useState([]),[s,o]=u.useState(!1),{t:i}=Object(y.useTranslation)(),{namespace:c,canViewSecrets:l}=e;u.useEffect(()=>{Object(C.kb)(N.ServiceAccountModel,"default",c.metadata.name,{}).then(e=>{var t;n(!1),r(null!==(t=e.imagePullSecrets)&&void 0!==t?t:[]),o(!1)}).catch(e=>{n(!1),r([]),o(!0),console.error("Error getting default ServiceAccount",e)})},[c.metadata.name]);const d=()=>Object(D.k)({namespace:c,pullSecret:void 0});return u.createElement(u.Fragment,null,u.createElement("dt",null,i("public~Default pull Secret",{count:a.length})),u.createElement("dd",null,t?u.createElement(x.T,null):s?u.createElement(b.a,{variant:"danger",isInline:!0,title:i("Error loading default pull Secrets")}):a.length>0?a.map(e=>u.createElement("div",{key:e.name},u.createElement(x.hb,{kind:"Secret",name:e.name,namespace:c.metadata.name,linkTo:l}))):u.createElement(f.a,{variant:"link",type:"button",isInline:!0,onClick:d},i("public~Not configured"),u.createElement(_.a,{className:"co-icon-space-l pf-v5-c-button-icon--plain"}))))},ye=({ns:e})=>{const{t:t}=Object(y.useTranslation)();return u.createElement("div",{className:"row"},u.createElement("div",{className:"col-md-6 col-sm-12"},u.createElement(M.b,{title:t("public~CPU usage"),humanize:x.Yb,namespace:e.metadata.name,query:`namespace:container_cpu_usage:sum{namespace='${e.metadata.name}'}`})),u.createElement("div",{className:"col-md-6 col-sm-12"},u.createElement(M.b,{title:t("public~Memory usage"),humanize:x.Wb,byteDataType:R.a.BinaryBytes,namespace:e.metadata.name,query:`sum by(namespace) (container_memory_working_set_bytes{namespace="${e.metadata.name}",container="",pod!=""})`})))},Oe=({ns:e})=>{const{t:t}=Object(y.useTranslation)();return u.createElement(M.c,{title:t("public~Memory usage by pod (top 10)"),namespace:e.metadata.name,query:`sort_desc(topk(10, sum by (pod)(container_memory_working_set_bytes{container="",pod!="",namespace="${e.metadata.name}"})))`,humanize:x.Wb,metric:"pod"})},_e=({ns:e})=>{const{t:t}=Object(y.useTranslation)();return Object(T.Ue)()?u.createElement("div",{className:"co-m-pane__body"},u.createElement(x.ob,{text:t("public~Resource usage")}),u.createElement(ye,{ns:e}),u.createElement(Oe,{ns:e})):null},ke=({ns:e})=>{var t,n,a;const{t:r}=Object(y.useTranslation)(),s=W(e),o=Object(T.Jc)(e),i=Object(T.Bd)(e),c=null===(n=null===(t=e.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n["maistra.io/member-of"],l=Object(x.Dc)({group:N.SecretModel.apiGroup,resource:N.SecretModel.plural,verb:"patch",namespace:e.metadata.name});return u.createElement("div",{className:"row"},u.createElement("div",{className:"col-sm-6 col-xs-12"},u.createElement(x.lb,{resource:e,showLabelEditor:"Namespace"===e.kind},u.createElement("dt",null,r("public~Display name")),u.createElement("dd",{className:p({"text-muted":!s})},s||r("public~No display name")),u.createElement("dt",null,r("public~Description")),u.createElement("dd",null,u.createElement("p",{className:p({"text-muted":!o,"co-pre-wrap":o,"co-namespace-summary__description":o})},o||r("public~No description"))),i&&u.createElement("dt",null,"Requester"),i&&u.createElement("dd",null,i))),u.createElement("div",{className:"col-sm-6 col-xs-12"},u.createElement("dl",{className:"co-m-pane__details"},u.createElement(x.r,{label:r("public~Status"),obj:e,path:"status.phase"},u.createElement(T.cc,{status:null===(a=e.status)||void 0===a?void 0:a.phase})),u.createElement(Ee,{namespace:e,canViewSecrets:l}),u.createElement("dt",null,r("public~NetworkPolicies")),u.createElement("dd",null,u.createElement(k.Link,{to:`/k8s/ns/${e.metadata.name}/networkpolicies`},r("public~NetworkPolicies"))),c&&u.createElement(u.Fragment,null,u.createElement("dt",null,r("public~Service mesh")),u.createElement("dd",null,u.createElement(T.X,null)," ",r("public~Service mesh enabled"))))))},Te=({obj:e,customData:t})=>{const{t:n}=Object(y.useTranslation)(),[a]=Object(S.jc)(),[r]=Object(q.a)({isList:!0,kind:Object(C.Hb)(N.ConsoleLinkModel),optional:!0}),s=Object(F.b)(e,r);return u.createElement("div",null,"dev"===a&&u.createElement(d.b,null,u.createElement("title",null,n("public~Project details"))),u.createElement("div",{className:"co-m-pane__body"},!(null==t?void 0:t.hideHeading)&&u.createElement(x.ob,{text:n("public~{{kind}} details",{kind:e.kind})}),u.createElement(ke,{ns:e})),"Namespace"===e.kind&&u.createElement(_e,{ns:e}),!i.a(s)&&u.createElement("div",{className:"co-m-pane__body"},u.createElement(x.ob,{text:n("public~Launcher")}),u.createElement("ul",{className:"pf-v5-c-list pf-m-plain"},c.a(l.a(s,"spec.text"),e=>u.createElement("li",{key:e.metadata.uid},u.createElement(x.z,{href:e.spec.href,text:e.spec.text}))))))},Re=({obj:{metadata:e}})=>u.createElement(A.RoleBindingsPage,{createPath:`/k8s/ns/${e.name}/rolebindings/~new`,namespace:e.name,showTitle:!1}),je=e=>u.createElement(I.a,Object.assign({},e,{menuActions:z,pages:[x.mc.details(Te),x.mc.editYaml(),x.mc.roles(Re)]})),Se=e=>u.createElement(I.a,Object.assign({},e,{menuActions:oe,pages:[{href:"",nameKey:"public~Overview",component:F.a},{href:"details",nameKey:"public~Details",component:Te},x.mc.editYaml(),x.mc.workloads(B.a),x.mc.roles(Re)]}))},2231:function(e,t,n){"use strict";n.r(t),n.d(t,"getStatusGroups",(function(){return p})),n.d(t,"getPodStatusGroups",(function(){return m})),n.d(t,"getNodeStatusGroups",(function(){return h})),n.d(t,"getPVCStatusGroups",(function(){return b})),n.d(t,"getPVStatusGroups",(function(){return f})),n.d(t,"getVSStatusGroups",(function(){return g}));var a=n(2233),r=n(2238),s=n(8),o=n(475);const i={[o.a.NOT_MAPPED]:["Running","Succeeded"],[o.a.ERROR]:["CrashLoopBackOff","Failed"],[o.a.PROGRESS]:["Terminating","Pending"],[o.a.WARN]:["Unknown"]},c={[o.a.NOT_MAPPED]:["Bound"],[o.a.ERROR]:["Lost"],[o.a.PROGRESS]:["Pending"]},l={[o.a.NOT_MAPPED]:["Available","Bound"],[o.a.PROGRESS]:["Released"],[o.a.ERROR]:["Failed"]},u={[o.a.NOT_MAPPED]:["Ready"],[o.a.PROGRESS]:["Not Ready"]},d={[o.a.NOT_MAPPED]:["Ready"],[o.a.PROGRESS]:["Pending"],[o.a.ERROR]:["Error"]},p=(e,t,n,a)=>{const r={[o.a.UNKNOWN]:{statusIDs:[],count:0}};return Object.keys(t).forEach(e=>{r[e]={statusIDs:[...t[e]],count:0,filterType:a}}),e.forEach(e=>{const a=n(e),s=Object.keys(t).find(e=>t[e].includes(a))||o.a.UNKNOWN;r[s].count++}),r},m=e=>p(e,i,s.Ab,"pod-status"),h=e=>p(e,u,a.a,"node-status"),b=e=>p(e,c,e=>e.status.phase,"pvc-status"),f=e=>p(e,l,e=>e.status.phase,"pv-status"),g=e=>p(e,d,r.b,"snapshot-status")},4359:function(e,t,n){"use strict";n.r(t);var a=n(5590);n.d(t,"toDefaultSecretType",(function(){return a.d})),n.d(t,"toTypeAbstraction",(function(){return a.e})),n.d(t,"generateSecret",(function(){return a.b})),n.d(t,"determineSecretType",(function(){return a.a})),n.d(t,"getImageSecretKey",(function(){return a.c})),n.d(t,"useSecretTitle",(function(){return a.g})),n.d(t,"useSecretDescription",(function(){return a.f}));var r=n(869);n.d(t,"SecretTypeAbstraction",(function(){return r.c})),n.d(t,"AUTHS_KEY",(function(){return r.a})),n.d(t,"SecretType",(function(){return r.b}));var s=n(5598);n.d(t,"SecretFormWrapper",(function(){return s.a}));var o=n(5604);n.d(t,"PullSecretForm",(function(){return o.a}));var i=n(5606);n.d(t,"PullSecretCredentialEntry",(function(){return i.a}));var c=n(5605);n.d(t,"CreateConfigSubform",(function(){return c.a}));var l=n(5607);n.d(t,"UploadConfigSubform",(function(){return l.a}));var u=n(5608);n.d(t,"WebHookSecretForm",(function(){return u.a}));var d=n(5601);n.d(t,"SourceSecretForm",(function(){return d.a}));var p=n(5602);n.d(t,"BasicAuthSubform",(function(){return p.a}));var m=n(5603);n.d(t,"SSHAuthSubform",(function(){return m.a}));var h=n(5609);n.d(t,"GenericSecretForm",(function(){return h.a}));var b=n(5610);n.d(t,"KeyValueEntryFormWithTranslation",(function(){return b.b})),n.d(t,"KeyValueEntryForm",(function(){return b.a}));var f=n(5636);n.d(t,"SecretLoadingWrapper",(function(){return f.b})),n.d(t,"EditSecret",(function(){return f.a}));var g=n(5637);n.d(t,"CreateSecret",(function(){return g.a}));var v=n(5593);n.d(t,"DroppableFileInput",(function(){return v.a}));var E=n(5600);n.d(t,"SecretSubForm",(function(){return E.a}));n(5638)},5441:function(e,t,n){"use strict";n.r(t);var a=n(7997);n.d(t,"BuildsTabListPage",(function(){return a.a}))},5586:function(e,t,n){"use strict";n.r(t);var a=n(5622);n.d(t,"PipelineModel",(function(){return a.f})),n.d(t,"PipelineModelV1Beta1",(function(){return a.g})),n.d(t,"PipelineRunModel",(function(){return a.i})),n.d(t,"PipelineRunModelV1Beta1",(function(){return a.j})),n.d(t,"TaskModel",(function(){return a.l})),n.d(t,"TaskModelV1Beta1",(function(){return a.m})),n.d(t,"TaskRunModel",(function(){return a.n})),n.d(t,"TaskRunModelV1Beta1",(function(){return a.o})),n.d(t,"CustomRunModelV1Beta1",(function(){return a.d})),n.d(t,"PipelineResourceModel",(function(){return a.h})),n.d(t,"ClusterTaskModel",(function(){return a.a})),n.d(t,"ConditionModel",(function(){return a.c})),n.d(t,"TriggerBindingModel",(function(){return a.s})),n.d(t,"ClusterTriggerBindingModel",(function(){return a.b})),n.d(t,"TriggerTemplateModel",(function(){return a.t})),n.d(t,"EventListenerModel",(function(){return a.e})),n.d(t,"RepositoryModel",(function(){return a.k})),n.d(t,"TektonConfigModel",(function(){return a.p})),n.d(t,"TektonHubModel",(function(){return a.q})),n.d(t,"TektonResultModel",(function(){return a.r}))},5587:function(e,t,n){"use strict";n(5639);var a=n(5640);n.d(t,"d",(function(){return a.a}));var r=n(5611);n.d(t,"b",(function(){return r.a})),n.d(t,"c",(function(){return r.b})),n.d(t,"e",(function(){return r.c}));var s=n(5641);n.d(t,"a",(function(){return s.a})),n.d(t,"f",(function(){return s.b}))},5588:function(e,t,n){"use strict";var a,r,s,o,i,c,l,u,d;n.d(t,"r",(function(){return a})),n.d(t,"q",(function(){return r})),n.d(t,"v",(function(){return s})),n.d(t,"t",(function(){return o})),n.d(t,"w",(function(){return i})),n.d(t,"u",(function(){return c})),n.d(t,"o",(function(){return l})),n.d(t,"x",(function(){return u})),n.d(t,"p",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"s",(function(){return m})),n.d(t,"m",(function(){return h})),n.d(t,"l",(function(){return b})),n.d(t,"k",(function(){return f})),n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return E})),n.d(t,"z",(function(){return y})),n.d(t,"y",(function(){return O})),n.d(t,"j",(function(){return _})),n.d(t,"g",(function(){return k})),n.d(t,"h",(function(){return T})),n.d(t,"n",(function(){return R})),n.d(t,"f",(function(){return j})),n.d(t,"d",(function(){return S})),n.d(t,"e",(function(){return N})),function(e){e.triggers="triggers.tekton.dev/eventlistener"}(a||(a={})),function(e){e.user="pipeline.openshift.io/started-by"}(r||(r={})),function(e){e.minVersion=" tekton.dev/pipelines.minVersion",e.tags="tekton.dev/tags",e.categories="tekton.dev/categories",e.installedFrom="openshift.io/installed-from",e.semVersion="openshift.io/sem-version"}(s||(s={})),function(e){e.redhat="Red Hat",e.community="Community",e.tektonHub="TektonHub",e.artifactHub="ArtifactHub"}(o||(o={})),function(e){e.providerType="operator.tekton.dev/provider-type",e.version="app.kubernetes.io/version"}(i||(i={})),function(e){e.pipeline="tekton.dev/pipeline",e.pipelinerun="tekton.dev/pipelineRun",e.taskrun="tekton.dev/taskRun",e.pipelineTask="tekton.dev/pipelineTask"}(c||(c={})),function(e){e.git="git",e.image="image",e.cluster="cluster",e.storage="storage"}(l||(l={})),function(e){e.NoWorkspace="noWorkspace",e.EmptyDirectory="emptyDirectory",e.ConfigMap="configMap",e.Secret="secret",e.PVC="pvc",e.VolumeClaimTemplate="volumeClaimTemplate"}(u||(u={})),function(e){e.Git="git",e.Image="docker"}(d||(d={}));d.Git,d.Image;const p="1.4.0",m="1.6.0",h="1.5.2",b="pipeline",f="bridge/pipeline-run-auto-start-failed",g=275,v=375,E=60,y="pipeline.openshift.io/preferredName",O="chains.tekton.dev/signed",_="openshift-pipelines",k="openshift",T="config";var R;!function(e){e.PIPELINE_TASK_LEVEL="pipeline/task",e.PIPELINERUN_TASKRUN_LEVEL="pipelinerun/taskrun",e.UNSUPPORTED_LEVEL="unsupported",e.UNSIMPLIFIED_METRICS_LEVEL="unsimplified"}(R||(R={}));const j="FLAG_TEKTON_V1_ENABLED",S="PIPELINES_OPERATOR_VERSION_1_16_OR_NEWER",N="PIPELINES_OPERATOR_VERSION_1_17_OR_NEWER"},5589:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"j",(function(){return v})),n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return y})),n.d(t,"f",(function(){return O})),n.d(t,"c",(function(){return _})),n.d(t,"i",(function(){return k})),n.d(t,"k",(function(){return T})),n.d(t,"g",(function(){return R})),n.d(t,"h",(function(){return j})),n.d(t,"m",(function(){return S})),n.d(t,"b",(function(){return N})),n.d(t,"l",(function(){return P}));var a=n(5596),r=n(29),s=n(117),o=n(16),i=n(22),c=n(279),l=n(57),u=n(2222),d=n(8),p=n(975),m=n(5652),h=n(5659),b=n(5625),f=n(1400);const g=["deployments","deploymentConfigs","daemonSets","statefulSets","jobs","cronJobs","pods"],v=({FLAGS:e})=>e.get(p.a),E=e=>{var t,n,a;const r=s.a(e,["metadata.name","che"]);return{cheURL:null===(t=null==r?void 0:r.spec)||void 0===t?void 0:t.href,cheIconURL:null===(a=null===(n=null==r?void 0:r.spec)||void 0===n?void 0:n.applicationMenu)||void 0===a?void 0:a.imageURL}},y=(e,t,n,r)=>{if(!e)return null;const s=((e,t,n)=>{const a=`https://${e.resource}/${e.owner}/${e.name}`;if(!t)return a;const r=n?"/"+n.replace(/^\//,""):"";return e.resource.includes("github")?`${a}/tree/${t}${r}`:e.resource.includes("gitlab")?`${a}/-/tree/${t}${r}`:e.resource.includes("gitea")?`${a}/src/branch/${t}${r}`:e.resource.includes("bitbucket")&&!t.includes("/")?`${a}/src/${t}${r}`:a})(a(e),t,r);return n?`${n}/f?url=${s}&policies.create=peruser`:s},O=(e,t)=>{var n,a;return(null===(a=null===(n=s.a(e,["metadata.name","kiali-namespace-"+t]))||void 0===n?void 0:n.spec)||void 0===a?void 0:a.href)||""},_=(e,t)=>t?e.filter(e=>o.a(e,["metadata","labels","app.kubernetes.io/part-of"])===t):e,k=(e,t)=>t.length>0&&!i.a(t[0].spec)?Object(u.c)(t[0]):null,T=e=>{var t;return e?e.resource||(null===(t=e.resources)||void 0===t?void 0:t.obj):null},R=e=>{var t;return(null===(t=e)||void 0===t?void 0:t.getResource())||T(null==e?void 0:e.getData())},j=e=>e instanceof m.a?e.getResourceKind():Object(d.Db)(T(null==e?void 0:e.getData())),S=(e,t)=>{const n=null==e?void 0:e.getData(),a=R(e);if(!e||!a||!c.a(n.resources))return Promise.reject();const s=[],o=[];s.push(a),e.getType()===h.d&&l.a(n.groupResources,e=>{s.push(e.resource)});for(const e of s){const n=Object(d.vb)(Object(d.Db)(e));if(!n)return Promise.reject(new Error(r.a.t("topology~Unable to update application, invalid resource type: {{kind}}",{kind:e.kind})));o.push(Object(b.c)(n,e,t))}return Promise.all(o)},N=(e,t,n=null)=>e&&t&&e!==t?Object(f.a)(e,t,n):Promise.reject(new Error(r.a.t("topology~Can not create a connection from a node to itself."))),P=e=>{const t=R(e.getSource()),n=R(e.getTarget());return t&&n?Object(f.f)(t,n):Promise.reject()}},5590:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"g",(function(){return h})),n.d(t,"f",(function(){return b}));var a=n(279),r=n(160),s=n(107),o=n(1404),i=n(7),c=n(869);const l=e=>{switch(e){case c.c.source:return c.b.basicAuth;case c.c.image:return c.b.dockerconfigjson;default:return c.b.opaque}},u=e=>{const{data:t,type:n}=e;switch(n){case c.b.basicAuth:case c.b.sshAuth:return c.c.source;case c.b.dockerconfigjson:case c.b.dockercfg:return c.c.image;default:return(null==t?void 0:t[o.WebHookSecretKey])&&1===a.a(t)?c.c.webhook:c.c.generic}},d=()=>{const e=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e()+e()+e()+e()},p=e=>{const t=r.a(e).sort();return s.a(t,["tls.crt","tls.key"])?c.b.tls:s.a(t,["ca.crt","namespace","service-ca.crt","token"])?c.b.serviceAccountToken:s.a(t,[".dockercfg"])?c.b.dockercfg:s.a(t,[".dockerconfigjson"])?c.b.dockerconfigjson:s.a(t,["password","username"])?c.b.basicAuth:s.a(t,["ssh-privatekey"])?c.b.sshAuth:c.b.opaque},m=e=>{switch(e){case c.b.dockercfg:return".dockercfg";case c.b.dockerconfigjson:return".dockerconfigjson";default:return e}},h=(e,t)=>{const{t:n}=Object(i.useTranslation)();switch(t){case c.c.generic:return n(e?"public~Create key/value secret":"public~Edit key/value secret");case c.c.image:return n(e?"public~Create image pull secret":"public~Edit image pull secret");default:return n(e?"public~Create {{secretType}} secret":"public~Edit {{secretType}} secret",{secretType:t})}},b=e=>{const{t:t}=Object(i.useTranslation)();switch(e){case c.c.generic:return t("public~Key/value secrets let you inject sensitive data into your application as files or environment variables.");case c.c.source:return t("public~Source secrets let you authenticate against a Git server.");case c.c.image:return t("public~Image pull secrets let you authenticate against a private image registry.");case c.c.webhook:return t("public~Webhook secrets let you authenticate a webhook trigger.");default:return null}}},5591:function(e,t,n){"use strict";var a=n(5587);n.d(t,"b",(function(){return a.b})),n.d(t,"c",(function(){return a.c})),n.d(t,"d",(function(){return a.d}));var r=n(5642);n.d(t,"e",(function(){return r.a}));var s=n(5645);n.d(t,"a",(function(){return s.a}))},5592:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(5643),r=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((a=a.apply(e,t||[])).next())}))};class s{constructor(e){this.gitsource=e}detectBuildTypes(){return r(this,void 0,void 0,(function*(){try{const e=yield this.getRepoFileList(),t=Object(a.a)(e.files);if(e.files.includes("package.json")){const e=yield this.getPackageJsonContent();if(Object(a.b)(e))return t.sort((e,t)=>"modern-webapp"===t.buildType?1:"modern-webapp"===e.buildType?-1:0)}return t}catch(e){return[]}}))}}},5593:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(0),r=n(282);const s=e=>a.createElement(r.a,Object.assign({loader:()=>Promise.resolve().then(n.bind(null,2223)).then(e=>e.DroppableFileInput)},e))},5595:function(e,t,n){"use strict";var a=n(5626);n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return a.b})),n.d(t,"d",(function(){return a.c}));n(5627);var r=n(5628);n.d(t,"e",(function(){return r.a}));n(5629),n(5630);var s=n(5631);n.d(t,"f",(function(){return s.a}));var o=n(5632);n.d(t,"a",(function(){return o.a}))},5597:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}));var a=n(380),r=n(83),s=n(437),o=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((a=a.apply(e,t||[])).next())}))};const i="/api/dev-console/proxy/internet",c=e=>Object.keys(e).reduce((t,n)=>(t[n]=[e[n]],t),{}),l=e=>o(void 0,void 0,void 0,(function*(){const t=yield r.consoleFetchJSON.post(i,e);if(!t.statusCode)throw new Error("Unexpected proxy response: Status code is missing!");if(t.statusCode<200||t.statusCode>=300)throw new s.a("Unexpected status code: "+t.statusCode,t.statusCode,null,t);return t})),u=e=>l(e).then(e=>(e=>{try{JSON.parse(e)}catch(e){return!1}return!0})(e.body)?JSON.parse(e.body):Object(a.safeLoad)(e.body))},5598:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var a=n(501),r=n(838),s=n(2324),o=n(16),i=n(640),c=n(1256),l=n(0),u=n(137),d=n(7),p=n(320),m=n(966),h=n(19),b=n(14),f=n(8),g=n(5),v=n(118),E=n(10),y=n(5590),O=n(5600);const _=e=>{const{isCreate:t,modal:n,onCancel:_}=e,{t:k}=Object(d.useTranslation)(),T=Object(b.useNavigate)(),R=Object(b.useParams)(),j=a.a(e.obj,["metadata","type"]),S=Object(y.d)(e.secretTypeAbstraction),N=r.a({},e.fixed,j,{apiVersion:"v1",data:{},kind:"Secret",metadata:{name:""},type:S}),[P]=l.useState(e.secretTypeAbstraction),[C,w]=l.useState(N),[I,x]=l.useState(!1),[D,A]=l.useState(),[M,U]=l.useState(s.a(o.a(e.obj,"data"),e=>e?p.Base64.decode(e):"")),[L,B]=l.useState({}),[F,q]=l.useState(!1),K=Object(y.g)(t,P),$=Object(y.f)(P),Y=()=>T(`/k8s/ns/${R.ns}/core~v1~Secret`),G=e=>{U(Object.assign({},null==e?void 0:e.stringData)),B(Object.assign({},null==e?void 0:e.base64StringData))},W=e=>{A(e),x(!1)},H=e=>{const t=e.target.value,n=i.a(C);n.metadata.name=t,w(n)},V=n=>{n.preventDefault();const{metadata:a}=C;x(!0);const r=Object.assign(Object.assign({},s.a(M,e=>p.Base64.encode(e))),L),o=c.a({},C,{data:r},t?{type:Object(y.a)(M)}:{});(t?Object(f.jb)(E.SecretModel,o):Object(f.rb)(E.SecretModel,o,a.namespace,o.metadata.name)).then(t=>{x(!1),e.onSave&&e.onSave(t.metadata.name),e.modal||T(Object(g.sc)(t,Object(f.Db)(t)))},e=>{A(e.message),x(!1)})},z=()=>{var n;return l.createElement(l.Fragment,null,l.createElement("fieldset",{disabled:!t},l.createElement("div",{className:"form-group"},l.createElement("label",{className:"control-label co-required",htmlFor:"secret-name"},k("public~Secret name")),l.createElement("div",null,l.createElement("input",{className:"pf-v5-c-form-control",type:"text",onChange:H,value:null===(n=null==C?void 0:C.metadata)||void 0===n?void 0:n.name,"aria-describedby":"secret-name-help",id:"secret-name","data-test":"secret-name",required:!0}),l.createElement("p",{className:"help-block",id:"secret-name-help"},k("public~Unique name of the new secret."))))),l.createElement(O.a,{typeAbstraction:e.secretTypeAbstraction,onChange:G,onError:W,onFormDisable:e=>q(e),stringData:M,secretType:C.type,isCreate:t}))};return n?l.createElement("form",{className:"co-create-secret-form modal-content",onSubmit:V},l.createElement(v.d,null,K),l.createElement(v.a,null,z()),l.createElement(v.c,{errorMessage:D||"",inProgress:I,submitText:k("public~Create"),cancel:_||Y})):l.createElement("div",{className:"co-m-pane__form"},l.createElement(u.a,null,l.createElement("title",null,K)),l.createElement(g.Z,{title:K,helpText:$}),l.createElement("div",{className:"co-m-pane__body"},l.createElement("form",{className:"co-m-pane__body-group co-create-secret-form",onSubmit:V},z(),l.createElement(g.g,{errorMessage:D,inProgress:I},l.createElement(m.a,{className:"pf-v5-c-form"},l.createElement(h.a,{type:"submit","data-test":"save-changes",isDisabled:F,variant:"primary",id:"save-changes"},e.saveButtonText||k("public~Create")),l.createElement(h.a,{type:"button",variant:"secondary",id:"cancel",onClick:_||Y},k("public~Cancel")))))))}},5599:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"k",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"m",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"l",(function(){return m})),n.d(t,"n",(function(){return h})),n.d(t,"f",(function(){return b})),n.d(t,"h",(function(){return f})),n.d(t,"b",(function(){return g})),n.d(t,"g",(function(){return v}));var a,r=n(5591),s=n(10);!function(e){e.setAccessLoading="setAccessLoading",e.setLoading="setLoading",e.setSelectedImageStream="setSelectedImageStream"}(a||(a={}));const o={[r.b.GITHUB]:"GitHub",[r.b.GITLAB]:"GitLab",[r.b.GITEA]:"Gitea",[r.b.BITBUCKET]:"Bitbucket",[r.b.UNSURE]:"Other"};var i,c,l,u;!function(e){e.git="git",e.devfile="devfile",e.docker="docker",e.s2i="s2i"}(i||(i={})),function(e){e.OpenShift="openshift",e.Kubernetes="kubernetes",e.KnativeService="knative"}(c||(c={})),function(e){e.BUILDS="BUILDS",e.SHIPWRIGHT_BUILD="SHIPWRIGHT_BUILD",e.PIPELINES="PIPELINES",e.DISABLED="DISABLED"}(l||(l={})),function(e){e["Node.js"]="nodejs",e.Quarkus="quarkus",e.dotnet="dotnet",e.Python="python",e.Go="golang",e.springboot="spring-boot"}(u||(u={}));const d={[c.OpenShift]:s.DeploymentConfigModel.labelKey,[c.Kubernetes]:s.DeploymentModel.labelKey,[c.KnativeService]:"devconsole~Serverless Deployment"},p={[l.BUILDS]:"devconsole~BuildConfig",[l.SHIPWRIGHT_BUILD]:"devconsole~Builds for OpenShift (Shipwright)",[l.PIPELINES]:"devconsole~Build using pipelines",[l.DISABLED]:"devconsole~Disabled"},m={[c.OpenShift]:s.DeploymentConfigModel.kind,[c.Kubernetes]:s.DeploymentModel.kind,[c.KnativeService]:"Service"};var h,b,f,g,v,E;!function(e){e.EDGE="edge",e.PASSTHROUGH="passthrough",e.REENCRYPT="reencrypt"}(h||(h={})),function(e){e.None="None",e.Allow="Allow",e.Redirect="Redirect"}(b||(b={})),function(e){e.None="None",e.Redirect="Redirect"}(f||(f={})),function(e){e.m="millicores",e[""]="cores"}(g||(g={})),function(e){e.Mi="Mi",e.Gi="Gi"}(v||(v={})),function(e){e.GIT="GIT",e.CONTAINER="CONTAINER",e.CATALOG="CATALOG",e.DOCKERFILE="DOCKERFILE",e.DEVFILE="DEVFILE",e.DATABASE="DATABASE",e.EVENTSOURCE="EVENTSOURCE",e.EVENTPUBSUB="EVENTPUBSUB",e.OPERATORBACKED="OPERATORBACKED",e.HELMCHARTS="HELMCHARTS",e.SAMPLES="SAMPLES",e.EVENTCHANNEL="EVENTCHANNEL",e.EVENTBROKER="EVENTBROKER",e.UPLOADJAR="UPLOADJAR"}(E||(E={}))},5600:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(0),r=n(869),s=n(5601),o=n(5604),i=n(5608),c=n(5609),l=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const u=e=>{var{typeAbstraction:t}=e,n=l(e,["typeAbstraction"]);switch(t){case r.c.source:return a.createElement(s.a,Object.assign({},n));case r.c.image:return a.createElement(o.a,Object.assign({},n));case r.c.webhook:return a.createElement(i.a,Object.assign({},n));default:return a.createElement(c.a,Object.assign({},n))}}},5601:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(0),r=n(7),s=n(5),o=n(869),i=n(5602),c=n(5603);class l extends a.Component{constructor(e){super(e),this.state={type:this.props.secretType,stringData:this.props.stringData||{},authType:o.b.basicAuth},this.changeAuthenticationType=this.changeAuthenticationType.bind(this),this.onDataChanged=this.onDataChanged.bind(this)}changeAuthenticationType(e){this.setState({type:e},()=>this.props.onChange(this.state))}onDataChanged(e){this.setState({stringData:Object.assign({},e)},()=>this.props.onChange(this.state))}render(){const{t:e}=this.props,t={[o.b.basicAuth]:e("public~Basic authentication"),[o.b.sshAuth]:e("public~SSH key")};return a.createElement(a.Fragment,null,this.props.isCreate?a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label",htmlFor:"secret-type"},e("public~Authentication type")),a.createElement("div",{className:"co-create-secret__dropdown"},a.createElement(s.t,{items:t,dropDownClassName:"dropdown--full-width",id:"dropdown-selectbox",selectedKey:this.state.authType,onChange:this.changeAuthenticationType}))):null,this.state.type===o.b.basicAuth?a.createElement(i.a,{onChange:this.onDataChanged,stringData:this.state.stringData}):a.createElement(c.a,{onChange:this.onDataChanged,stringData:this.state.stringData}))}}const u=Object(r.withTranslation)()(l)},5602:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n(7);class s extends a.Component{constructor(e){super(e),this.state={username:this.props.stringData.username||"",password:this.props.stringData.password||""},this.changeData=this.changeData.bind(this)}changeData(e){this.setState({[e.target.name]:e.target.value},()=>this.props.onChange(this.state))}render(){const{t:e}=this.props;return a.createElement(a.Fragment,null,a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label",htmlFor:"username"},e("public~Username")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:"username","data-test":"secret-username","aria-describedby":"username-help",type:"text",name:"username",onChange:this.changeData,value:this.state.username}),a.createElement("p",{className:"help-block",id:"username-help"},e("public~Optional username for Git authentication.")))),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label co-required",htmlFor:"password"},e("public~Password or token")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:"password","data-test":"secret-password","aria-describedby":"password-help",type:"password",name:"password",onChange:this.changeData,value:this.state.password,required:!0}),a.createElement("p",{className:"help-block",id:"password-help"},e("public~Password or token for Git authentication. Required if a ca.crt or .gitconfig file is not specified.")))))}}const o=Object(r.withTranslation)()(s)},5603:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n(7),s=n(5593);const o=({onChange:e,stringData:t})=>{const{t:n}=Object(r.useTranslation)();return a.createElement(s.a,{onChange:t=>{const n=t.endsWith("\n")?t:t+"\n";e({"ssh-privatekey":n})},inputFileData:t["ssh-privatekey"]||"",id:"ssh-privatekey",label:n("public~SSH private key"),inputFieldHelpText:n("public~Drag and drop file with your private SSH key here or browse to upload it."),textareaFieldHelpText:n("public~Private SSH key file for Git authentication."),isRequired:!0})}},5604:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(1240),r=n(0),s=n(7),o=n(5),i=n(5590),c=n(869),l=n(5605),u=n(5607);const d=({onChange:e,onError:t,onFormDisable:n,stringData:d,secretType:p,isCreate:m})=>{const[h,b]=r.useState("credentials"),{t:f}=Object(s.useTranslation)(),g=r.useMemo(()=>{var e;try{const t=Object(i.c)(p),n=null!==(e=d[t])&&void 0!==e?e:"{}";return JSON.parse(n)}catch(e){return t("Error parsing secret's data: "+e.message),{}}},[d,p]),v=r.useCallback(t=>{a.a(t)||n(!1);const r=t[c.a]?".dockerconfigjson":".dockercfg";e({stringData:{[r]:JSON.stringify(t)},base64StringData:{}})},[n,onchange]),E={credentials:f("public~Image registry credentials"),"config-file":f("public~Upload configuration file")};return r.createElement(r.Fragment,null,m&&r.createElement("div",{className:"form-group"},r.createElement("label",{className:"control-label",htmlFor:"secret-type"},f("public~Authentication type")),r.createElement("div",{className:"co-create-secret__dropdown"},r.createElement(o.t,{items:E,dropDownClassName:"dropdown--full-width",id:"dropdown-selectbox",selectedKey:h,onChange:b}))),"credentials"===h?r.createElement(l.a,{onChange:v,stringData:g}):r.createElement(u.a,{onChange:v,stringData:g,onDisable:n}))}},5605:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var a=n(22),r=n(840),s=n(4434),o=n(57),i=n(16),c=n(4437),l=n(4436),u=n(501),d=n(50),p=n(279),m=n(0),h=n(7),b=n(320),f=n(19),g=n(408),v=n(407),E=n(869),y=n(5606);class O extends m.Component{constructor(e){var t;super(e),this.state={isDockerconfigjson:a.a(this.props.stringData)||!!this.props.stringData[E.a],secretEntriesArray:this.imageSecretObjectToArray((null===(t=this.props.stringData)||void 0===t?void 0:t[E.a])||this.props.stringData),hasDuplicate:!1},this.onDataChanged=this.onDataChanged.bind(this)}newImageSecretEntry(){return{entry:{address:"",username:"",password:"",email:"",auth:""},uid:r.a()}}imageSecretObjectToArray(e){const t=[];return a.a(e)?s.a(t,this.newImageSecretEntry()):(o.a(e,(e,n)=>{const s=b.Base64.decode(i.a(e,"auth","")),o=a.a(s)?c.a(Array(2),""):l.a(s,":");t.push({entry:{address:n,username:i.a(e,"username",o[0]),password:i.a(e,"password",o[1]),email:i.a(e,"email",""),auth:i.a(e,"auth","")},uid:i.a(e,"uid",r.a())})}),t)}imageSecretArrayToObject(e){const t={};return o.a(e,e=>{t[e.entry.address]=u.a(e.entry,["username","password","auth","email"])}),t}propagateEntryChange(e){const t=this.imageSecretArrayToObject(e);this.props.onChange(this.state.isDockerconfigjson?{[E.a]:t}:t)}onDataChanged(e,t){this.setState(n=>{const a=[...n.secretEntriesArray],r={uid:a[t].uid,entry:e,auth:b.Base64.encode(`${e.username}:${e.password}`)};return a[t]=r,{secretEntriesArray:a}},()=>this.propagateEntryChange(this.state.secretEntriesArray))}removeEntry(e){this.setState(t=>{const n=[...t.secretEntriesArray];return n.splice(e,1),{secretEntriesArray:n}},()=>this.propagateEntryChange(this.state.secretEntriesArray))}addEntry(){this.setState({secretEntriesArray:s.a(this.state.secretEntriesArray,this.newImageSecretEntry())},()=>{this.propagateEntryChange(this.state.secretEntriesArray)})}render(){const{t:e}=this.props,t=d.a(this.state.secretEntriesArray,(t,n)=>{const{uid:a,entry:r}=null!=t?t:{},{address:s,email:o,password:i,username:c}=null!=r?r:{};return m.createElement("div",{className:"co-add-remove-form__entry",key:a},p.a(this.state.secretEntriesArray)>1&&m.createElement("div",{className:"co-add-remove-form__link--remove-entry"},m.createElement(f.a,{onClick:()=>this.removeEntry(n),type:"button",variant:"link","data-test":"remove-entry-button"},m.createElement(g.a,{className:"co-icon-space-r"}),e("public~Remove credentials"))),m.createElement(y.a,{id:n,address:s,email:o,password:i,username:c,onChange:this.onDataChanged}))});return m.createElement(m.Fragment,null,t,m.createElement(f.a,{className:"co-create-secret-form__link--add-entry pf-m-link--align-left",onClick:()=>this.addEntry(),type:"button",variant:"link","data-test":"add-credentials-button"},m.createElement(v.a,{className:"co-icon-space-r"}),e("public~Add credentials")))}}const _=Object(h.withTranslation)()(O)},5606:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n(7),s=n(320);const o=({id:e,address:t,email:n,password:o,username:i,onChange:c})=>{const{t:l}=Object(r.useTranslation)(),u=(a,r)=>{const l=i.trim(),u=o.trim(),d=i&&o?s.Base64.encode(`${l}:${u}`):"";c(Object.assign({address:t,username:i,password:o,email:n,[a]:r},d?{auth:d}:{}),e)},d=e=>u(e.currentTarget.name,e.currentTarget.value.trim()),p=e=>u(e.currentTarget.name,e.currentTarget.value);return a.createElement("div",{className:"co-m-pane__body-group","data-test-id":"create-image-secret-form"},a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label co-required",htmlFor:e+"-address"},l("public~Registry server address")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:e+"-address","aria-describedby":e+"-address-help",type:"text",name:"address",onChange:p,value:t,onBlur:d,"data-test":"image-secret-address",required:!0})),a.createElement("p",{className:"help-block",id:e+"-address-help"},l("public~For example quay.io or docker.io"))),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label co-required",htmlFor:e+"-username"},l("public~Username")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:e+"-username",type:"text",name:"username",onChange:p,value:i,onBlur:d,"data-test":"image-secret-username",required:!0}))),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label co-required",htmlFor:e+"-password"},l("public~Password")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:e+"-password",type:"password",name:"password",onChange:p,value:o,onBlur:d,"data-test":"image-secret-password",required:!0}))),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label",htmlFor:e+"-email"},l("public~Email")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:e+"-email",type:"text",name:"email",onChange:p,value:n,onBlur:d,"data-test":"image-secret-email"}))))}},5607:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(22),r=n(1973),s=n(1240),o=n(0),i=n(7),c=n(5593);class l extends o.Component{constructor(e){super(e),this.state={configFile:a.a(this.props.stringData)?"":JSON.stringify(this.props.stringData),parseError:!1},this.changeData=this.changeData.bind(this),this.onFileChange=this.onFileChange.bind(this)}changeData(e){this.updateState(r.a(JSON.parse,e.target.value),e.target.value)}onFileChange(e){this.updateState(r.a(JSON.parse,e),e)}updateState(e,t){this.setState({configFile:t,parseError:s.a(e)},()=>{this.props.onChange(e),this.props.onDisable(this.state.parseError)})}render(){const{t:e}=this.props;return o.createElement(o.Fragment,null,o.createElement(c.a,{onChange:this.onFileChange,inputFileData:this.state.configFile,id:"docker-config",label:e("public~Configuration file"),inputFieldHelpText:e("public~Upload a .dockercfg or .docker/config.json file."),textareaFieldHelpText:e("public~File with credentials and other configuration for connecting to a secured image registry."),isRequired:!0}),this.state.parseError&&o.createElement("div",{className:"co-create-secret-warning"},e("public~Configuration file should be in JSON format.")))}}const u=Object(i.withTranslation)()(l)},5608:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n(7),s=n(5590);class o extends a.Component{constructor(e){super(e),this.state={stringData:{WebHookSecretKey:this.props.stringData.WebHookSecretKey||""}},this.changeWebHookSecretkey=this.changeWebHookSecretkey.bind(this),this.generateWebHookSecret=this.generateWebHookSecret.bind(this)}changeWebHookSecretkey(e){this.setState({stringData:{WebHookSecretKey:e.target.value}},()=>this.props.onChange(this.state))}generateWebHookSecret(){this.setState({stringData:{WebHookSecretKey:Object(s.b)()}},()=>this.props.onChange(this.state))}render(){const{t:e}=this.props;return a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label co-required",htmlFor:"webhook-secret-key"},e("public~Webhook secret key")),a.createElement("div",{className:"pf-v5-c-input-group"},a.createElement("input",{className:"pf-v5-c-form-control",id:"webhook-secret-key","data-test":"secret-key",type:"text",name:"webhookSecretKey",onChange:this.changeWebHookSecretkey,value:this.state.stringData.WebHookSecretKey,"aria-describedby":"webhook-secret-help",required:!0}),a.createElement("button",{type:"button",onClick:this.generateWebHookSecret,className:"pf-v5-c-button pf-m-tertiary","data-test":"webhook-generate-button"},e("public~Generate"))),a.createElement("p",{className:"help-block",id:"webhook-secret-help"},e("public~Value of the secret will be supplied when invoking the webhook.")))}}const i=Object(r.withTranslation)()(o)},5609:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var a=n(840),r=n(22),s=n(50),o=n(255),i=n(1256),c=n(4434),l=n(279),u=n(0),d=n(7),p=n(320),m=n(19),h=n(408),b=n(407),f=n(973),g=n(5610);class v extends u.Component{constructor(e){super(e),this.state={secretEntriesArray:this.genericSecretObjectToArray(this.props.stringData)},this.onDataChanged=this.onDataChanged.bind(this)}newGenericSecretEntry(){return{entry:{key:"",value:""},uid:a.a()}}genericSecretObjectToArray(e){return r.a(e)?[this.newGenericSecretEntry()]:s.a(e,(e,t)=>{const n=f.isBinary(null,e);return{uid:a.a(),entry:{key:t,value:n?p.Base64.encode(e):e,isBase64:n,isBinary:n}}})}genericSecretArrayToObject(e){return o.a(e,(e,t)=>{var n,a;return i.a(e,{[t.entry.key]:(null===(n=t.entry)||void 0===n?void 0:n.isBase64)||(null===(a=t.entry)||void 0===a?void 0:a.isBinary)?t.entry.value:p.Base64.encode(t.entry.value)})},{})}onDataChanged(e,t){const n=[...this.state.secretEntriesArray],a={uid:n[t].uid,entry:e};n[t]=a,this.setState({secretEntriesArray:n},()=>this.props.onChange({base64StringData:this.genericSecretArrayToObject(this.state.secretEntriesArray)}))}removeEntry(e){const t=[...this.state.secretEntriesArray];t.splice(e,1),this.setState({secretEntriesArray:t},()=>this.props.onChange({base64StringData:this.genericSecretArrayToObject(this.state.secretEntriesArray)}))}addEntry(){this.setState({secretEntriesArray:c.a(this.state.secretEntriesArray,this.newGenericSecretEntry())},()=>this.props.onChange({base64StringData:this.genericSecretArrayToObject(this.state.secretEntriesArray)}))}render(){const{t:e}=this.props,t=s.a(this.state.secretEntriesArray,(t,n)=>u.createElement("div",{className:"co-add-remove-form__entry",key:t.uid},l.a(this.state.secretEntriesArray)>1&&u.createElement("div",{className:"co-add-remove-form__link--remove-entry"},u.createElement(m.a,{type:"button",onClick:()=>this.removeEntry(n),variant:"link","data-test":"remove-entry-button"},u.createElement(h.a,{className:"co-icon-space-r"}),e("public~Remove key/value"))),u.createElement(g.a,{id:n,entry:t.entry,onChange:this.onDataChanged})));return u.createElement(u.Fragment,null,t,u.createElement(m.a,{className:"co-create-secret-form__link--add-entry pf-m-link--align-left",onClick:()=>this.addEntry(),type:"button",variant:"link","data-test":"add-credentials-button"},u.createElement(b.a,{className:"co-icon-space-r"}),e("public~Add key/value")))}}const E=Object(d.withTranslation)()(v)},5610:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var a=n(0),r=n(7),s=n(5593);class o extends a.Component{constructor(e){super(e),this.state={key:e.entry.key,value:e.entry.value,isBinary:e.entry.isBinary},this.onValueChange=this.onValueChange.bind(this),this.onKeyChange=this.onKeyChange.bind(this)}onValueChange(e,t){this.setState({value:e,isBase64:t},()=>this.props.onChange(this.state,this.props.id))}onKeyChange(e){this.setState({key:e.target.value},()=>this.props.onChange(this.state,this.props.id))}render(){const{t:e}=this.props;return a.createElement("div",{className:"co-create-generic-secret__form"},a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label co-required",htmlFor:this.props.id+"-key"},e("public~Key")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:this.props.id+"-key",type:"text",name:"key",onChange:this.onKeyChange,value:this.state.key,"data-test":"secret-key",required:!0}))),a.createElement("div",{className:"form-group"},a.createElement("div",null,a.createElement(s.a,{onChange:this.onValueChange,inputFileData:this.state.value,id:this.props.id+"-value",label:e("public~Value"),inputFieldHelpText:e("public~Drag and drop file with your value here or browse to upload it."),inputFileIsBinary:this.state.isBinary}))))}}const i=Object(r.withTranslation)()(o)},5611:function(e,t,n){"use strict";var a,r,s;n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),function(e){e[e.NO_AUTH=0]="NO_AUTH",e[e.BASIC_AUTH=1]="BASIC_AUTH",e[e.SSH=2]="SSH",e[e.PERSONAL_ACCESS_TOKEN=3]="PERSONAL_ACCESS_TOKEN",e[e.OAUTH=4]="OAUTH"}(a||(a={})),function(e){e.GITHUB="github",e.BITBUCKET="bitbucket",e.GITLAB="gitlab",e.GITEA="gitea",e.UNSURE="other",e.INVALID=""}(r||(r={})),function(e){e[e.S2I=0]="S2I",e[e.DOCKERFILE=1]="DOCKERFILE",e[e.DEVFILE=2]="DEVFILE",e[e.SERVERLESS_FUNCTION=3]="SERVERLESS_FUNCTION"}(s||(s={}))},5612:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var a=n(5706),r=n(5596),s=n(320),o=n(83),i=n(5597),c=n(5587),l=n(5592),u=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((a=a.apply(e,t||[])).next())}))};class d extends l.a{constructor(t){super(t),this.getAuthProvider=()=>{switch(this.gitsource.secretType){case c.e.PERSONAL_ACCESS_TOKEN:case c.e.BASIC_AUTH:case c.e.OAUTH:return{auth:s.Base64.decode(this.gitsource.secretContent.password)};default:return null}},this.getRepoMetadata=()=>{var e;const{name:t,owner:n,source:a}=r(this.gitsource.url),s=(null===(e=this.gitsource.contextDir)||void 0===e?void 0:e.replace(/\/$/,""))||"";return{repoName:t,owner:n,host:a,defaultBranch:this.gitsource.ref,contextDir:s,devfilePath:this.gitsource.devfilePath,dockerfilePath:this.gitsource.dockerfilePath}},this.isRepoReachable=()=>u(this,void 0,void 0,(function*(){try{if(200===(yield this.client.repos.get({owner:this.metadata.owner,repo:this.metadata.repoName})).status)return c.d.Reachable}catch(e){switch(e.status){case 403:return c.d.RateLimitExceeded;case 404:return c.d.PrivateRepo;case 422:return c.d.InvalidGitTypeSelected;default:return c.d.Unreachable}}return c.d.Unreachable})),this.getRepoBranchList=()=>u(this,void 0,void 0,(function*(){try{const e=yield this.client.repos.listBranches({owner:this.metadata.owner,repo:this.metadata.repoName});return{branches:e.data.map(e=>e.name)}}catch(e){return{branches:[]}}})),this.getRepoFileList=e=>u(this,void 0,void 0,(function*(){try{const t=yield this.client.repos.getContents(Object.assign(Object.assign({owner:this.metadata.owner,repo:this.metadata.repoName},e&&(null==e?void 0:e.specificPath)?{path:`${this.metadata.contextDir}/${e.specificPath}`}:{path:this.metadata.contextDir}),this.metadata.defaultBranch?{ref:this.metadata.defaultBranch}:{}));let n=[];return 200===t.status&&Array.isArray(t.data)&&(n=t.data.map(e=>e.name)),{files:n}}catch(e){return{files:[]}}})),this.getRepoLanguageList=()=>u(this,void 0,void 0,(function*(){try{const e=yield this.client.repos.listLanguages({owner:this.metadata.owner,repo:this.metadata.repoName});return 200===e.status?{languages:Object.keys(e.data)}:{languages:[]}}catch(e){return{languages:[]}}})),this.createRepoWebhook=(e,t,n,a)=>u(this,void 0,void 0,(function*(){const r={Accept:["application/vnd.github+json"],Authorization:["Bearer "+e],"X-GitHub-Api-Version":["2022-11-28"]},s={name:"web",active:!0,config:{url:t,content_type:"json",insecure_ssl:n?"0":"1",secret:a},events:["push","pull_request"]},c="github.com"===this.metadata.host?"https://api.github.com":`https://${this.metadata.host}/api/v3`;return 201===(yield o.consoleFetchJSON.post(i.a,{url:`${c}/repos/${this.metadata.owner}/${this.metadata.repoName}/hooks`,method:"POST",headers:r,body:JSON.stringify(s)})).statusCode})),this.isFilePresent=e=>u(this,void 0,void 0,(function*(){try{return 200===(yield this.client.repos.getContents(Object.assign({owner:this.metadata.owner,repo:this.metadata.repoName,path:e},this.metadata.defaultBranch?{ref:this.metadata.defaultBranch}:{}))).status}catch(e){return!1}})),this.getFileContent=t=>u(this,void 0,void 0,(function*(){try{const n=yield this.client.repos.getContents(Object.assign({owner:this.metadata.owner,repo:this.metadata.repoName,path:t},this.metadata.defaultBranch?{ref:this.metadata.defaultBranch}:{}));return 200===n.status?e.from(n.data.content,"base64").toString():null}catch(e){return null}})),this.isDockerfilePresent=()=>this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`),this.isTektonFolderPresent=()=>this.isFilePresent(this.metadata.contextDir+"/.tekton"),this.getDockerfileContent=()=>this.getFileContent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`),this.isFuncYamlPresent=()=>this.isFilePresent(this.metadata.contextDir+"/func.yaml")||this.isFilePresent(this.metadata.contextDir+"/func.yml"),this.getFuncYamlContent=()=>this.getFileContent(this.metadata.contextDir+"/func.yaml")||this.getFileContent(this.metadata.contextDir+"/func.yml"),this.isDevfilePresent=()=>this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`),this.getDevfileContent=()=>this.getFileContent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`),this.getPackageJsonContent=()=>this.getFileContent(this.metadata.contextDir+"/package.json");const n=this.getAuthProvider();this.metadata=this.getRepoMetadata();const l="github.com"===this.metadata.host?null:`https://${this.metadata.host}/api/v3`;this.client=new a(Object.assign(Object.assign({},n),{baseUrl:l}))}}}).call(this,n(265).Buffer)},5613:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(320),r=n(5707),s=(n(4360),n(83)),o=n(5597),i=n(5587),c=n(5592),l=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((a=a.apply(e,t||[])).next())}))};class u extends c.a{constructor(e){super(e),this.baseURL="https://api.bitbucket.org/2.0",this.isServer=!1,this.getAuthProvider=()=>{switch(this.gitsource.secretType){case i.e.BASIC_AUTH:{const{username:e,password:t}=this.gitsource.secretContent;return{Authorization:"Basic "+a.Base64.encode(`${a.Base64.decode(e)}:${a.Base64.decode(t)}`)}}default:return null}},this.fetchJson=(e,t,n,a)=>l(this,void 0,void 0,(function*(){const r=this.getAuthProvider(),s=Object.assign(Object.assign({Accept:"application/json"},r),n);if(this.isServer)return Object(o.c)(Object.assign({url:e,method:t||"GET",headers:Object(o.d)(s)},a&&{body:JSON.stringify(a)}));const i=yield fetch(e,Object.assign({method:t||"GET",headers:s},a&&{body:JSON.stringify(a)}));if(!i.ok)throw i;return"text/plain"===i.headers.get("Content-Type")?i.text():i.json()})),this.getRepoMetadata=()=>{var e;const{name:t,owner:n,host:a}=r(this.gitsource.url),s=(null===(e=this.gitsource.contextDir)||void 0===e?void 0:e.replace(/\/$/,""))||"";return{repoName:t,owner:n,host:a,defaultBranch:this.gitsource.ref||"HEAD",contextDir:s,devfilePath:this.gitsource.devfilePath,dockerfilePath:this.gitsource.dockerfilePath}},this.isRepoReachable=()=>l(this,void 0,void 0,(function*(){const e=this.isServer?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}`;try{if((yield this.fetchJson(e)).slug===this.metadata.repoName)return i.d.Reachable}catch(e){switch(e.status){case 429:return i.d.RateLimitExceeded;case 403:return i.d.PrivateRepo;case 404:return i.d.ResourceNotFound;default:return i.d.InvalidGitTypeSelected}}return i.d.Unreachable})),this.getRepoBranchList=()=>l(this,void 0,void 0,(function*(){const e=this.isServer?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/branches`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/refs/branches`;try{const t=yield this.fetchJson(e);return{branches:t.values.map(e=>e.name)}}catch(e){return{branches:[]}}})),this.isServerURL=(e,t)=>{let n="";return n=t?e?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/files/${this.metadata.contextDir}/${t}?limit=50&at=${this.metadata.defaultBranch}`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/src/${this.metadata.defaultBranch}/${this.metadata.contextDir}/${t}?pagelen=50`:e?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/files/${this.metadata.contextDir}?limit=50&at=${this.metadata.defaultBranch}`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/src/${this.metadata.defaultBranch}/${this.metadata.contextDir}?pagelen=50`,n},this.getRepoFileList=e=>l(this,void 0,void 0,(function*(){var t;const n=(null==e?void 0:e.specificPath)?this.isServerURL(this.isServer,e.specificPath):this.isServerURL(this.isServer);try{const e=yield this.fetchJson(n);return{files:this.isServer?e.values:(null===(t=e.values)||void 0===t?void 0:t.map(e=>e.path))||[]}}catch(e){return{files:[]}}})),this.getRepoLanguageList=()=>l(this,void 0,void 0,(function*(){const e=this.isServer?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}`;try{return{languages:[(yield this.fetchJson(e)).language]}}catch(e){return{languages:[]}}})),this.createRepoWebhook=(e,t,n)=>l(this,void 0,void 0,(function*(){const a={"Content-Type":["application/json"],Authorization:["Basic "+e]},r={url:t,events:["repo:push","pullrequest:created","pullrequest:updated"],skip_cert_verification:!n,active:!0},i=this.isServer?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/hooks`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/hooks`;return 201===(yield s.consoleFetchJSON.post(o.a,{url:i,method:"POST",headers:a,body:JSON.stringify(r)})).statusCode})),this.isFilePresent=e=>l(this,void 0,void 0,(function*(){const t=e.replace(/^\//,""),n=this.isServer?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/raw/${t}?at=${this.metadata.defaultBranch}`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/src/${this.metadata.defaultBranch}/${t}`;try{return yield this.fetchJson(n),!0}catch(e){return!1}})),this.getFileContent=e=>l(this,void 0,void 0,(function*(){const t=e.replace(/^\//,""),n=this.isServer?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/raw/${t}?at=${this.metadata.defaultBranch}`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/src/${this.metadata.defaultBranch}/${t}`;try{return yield this.fetchJson(n)}catch(e){return null}})),this.isDockerfilePresent=()=>this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`),this.isTektonFolderPresent=()=>this.isFilePresent(this.metadata.contextDir+"/.tekton"),this.getDockerfileContent=()=>this.getFileContent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`),this.isFuncYamlPresent=()=>this.isFilePresent(this.metadata.contextDir+"/func.yaml")||this.isFilePresent(this.metadata.contextDir+"/func.yml"),this.getFuncYamlContent=()=>this.getFileContent(this.metadata.contextDir+"/func.yaml")||this.getFileContent(this.metadata.contextDir+"/func.yml"),this.isDevfilePresent=()=>this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`),this.getDevfileContent=()=>this.getFileContent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`),this.getPackageJsonContent=()=>this.getFileContent(this.metadata.contextDir+"/package.json"),this.metadata=this.getRepoMetadata(),"bitbucket.org"!==this.metadata.host&&(this.baseURL=`https://${this.metadata.host}/rest/api/1.0`,this.isServer=!0)}}},5614:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(5596),r=n(5708),s=n(29),o=n(320),i=n(83),c=n(5597),l=n(5587),u=n(5592),d=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((a=a.apply(e,t||[])).next())}))};class p extends u.a{constructor(e){super(e),this.getRepo=()=>d(this,void 0,void 0,(function*(){if(this.repo)return Promise.resolve(this.repo);const e=yield this.client.Projects.show(this.metadata.fullName);if(!e)throw new Error(s.a.t("git-service~Unable to find repository"));if(e.path_with_namespace!==this.metadata.fullName)throw new Error(s.a.t("git-service~Repository path {{path}} does not match expected name {{name}}",{path:e.path_with_namespace,name:this.metadata.fullName}));return this.repo=e,Promise.resolve(this.repo)})),this.getAuthProvider=()=>{switch(this.gitsource.secretType){case l.e.PERSONAL_ACCESS_TOKEN:case l.e.OAUTH:case l.e.BASIC_AUTH:return o.Base64.decode(this.gitsource.secretContent.password);default:return null}},this.getProjectId=()=>d(this,void 0,void 0,(function*(){try{return(yield this.getRepo()).id}catch(e){throw e}})),this.isRepoReachable=()=>d(this,void 0,void 0,(function*(){try{return yield this.getRepo(),l.d.Reachable}catch(e){switch(e.status){case 429:return l.d.RateLimitExceeded;case 403:return l.d.PrivateRepo;case 404:return l.d.ResourceNotFound;case 422:return l.d.InvalidGitTypeSelected;default:return l.d.Unreachable}}})),this.getRepoBranchList=()=>d(this,void 0,void 0,(function*(){try{const e=yield this.getProjectId(),t=yield this.client.Branches.all(e);return{branches:t.map(e=>e.name)}}catch(e){return{branches:[]}}})),this.getRepoFileList=e=>d(this,void 0,void 0,(function*(){try{const t=yield this.getProjectId(),n=yield this.client.Repositories.tree(t,Object.assign({},(null==e?void 0:e.specificPath)?{path:this.filePath(e.specificPath)}:{path:this.metadata.contextDir}));return{files:n.reduce((t,n)=>(("blob"===n.type||(null==e?void 0:e.includeFolder)&&"tree"===n.type)&&t.push(n.path),t),[])}}catch(e){return{files:[]}}})),this.getRepoLanguageList=()=>d(this,void 0,void 0,(function*(){try{const e=yield this.getProjectId(),t=yield this.client.Projects.languages(e);return{languages:Object.keys(t)}}catch(e){return{languages:[]}}})),this.createRepoWebhook=(e,t,n,a)=>d(this,void 0,void 0,(function*(){const r=yield this.getProjectId(),s={"Content-Type":["application/json"],"PRIVATE-TOKEN":[e]},o={url:t,push_events:!0,merge_requests_events:!0,enable_ssl_verification:n,token:a};return 201===(yield i.consoleFetchJSON.post(c.a,{url:`${this.metadata.host}/api/v4/projects/${r}/hooks`,method:"POST",headers:s,body:JSON.stringify(o)})).statusCode})),this.isFilePresent=e=>d(this,void 0,void 0,(function*(){var t;try{const n=yield this.getProjectId(),a=this.metadata.defaultBranch||(null===(t=this.repo)||void 0===t?void 0:t.default_branch);return yield this.client.RepositoryFiles.showRaw(n,e,a),!0}catch(e){return!1}})),this.getFileContent=e=>d(this,void 0,void 0,(function*(){var t;try{const n=yield this.getProjectId(),a=this.metadata.defaultBranch||(null===(t=this.repo)||void 0===t?void 0:t.default_branch),r=e.replace(/^\/+/,"");return yield this.client.RepositoryFiles.showRaw(n,r,a)}catch(e){return null}})),this.filePath=e=>this.metadata.contextDir?`${this.metadata.contextDir}/${e}`:e,this.isDockerfilePresent=()=>this.isFilePresent(this.filePath(""+this.metadata.dockerfilePath)),this.isTektonFolderPresent=()=>d(this,void 0,void 0,(function*(){try{const e=yield this.getProjectId(),t=yield this.client.Repositories.tree(e,{path:this.metadata.contextDir});return!!t.find(e=>"tree"===e.type&&".tekton"===e.name)}catch(e){return!1}})),this.getDockerfileContent=()=>this.getFileContent(this.filePath(""+this.metadata.dockerfilePath)),this.isFuncYamlPresent=()=>this.isFilePresent(this.filePath("func.yaml"))||this.isFilePresent(this.filePath("func.yml")),this.getFuncYamlContent=()=>this.getFileContent(this.filePath("func.yaml"))||this.getFileContent(this.filePath("func.yml")),this.isDevfilePresent=()=>this.isFilePresent(this.filePath(""+this.metadata.devfilePath)),this.getDevfileContent=()=>this.getFileContent(this.filePath(""+this.metadata.devfilePath)),this.getPackageJsonContent=()=>this.getFileContent(this.filePath("package.json")),this.metadata=this.getRepoMetadata();const t=this.getAuthProvider();this.client=new r.Gitlab({host:this.metadata.host,token:t}),this.repo=null}getRepoMetadata(){const{name:e,owner:t,resource:n,full_name:r}=a(this.gitsource.url),s=(null==(o=this.gitsource.contextDir)?void 0:o.replace(/^\//,""))||"";var o;return{repoName:e,owner:t,host:"https://"+n,defaultBranch:this.gitsource.ref,fullName:r,contextDir:s,devfilePath:this.gitsource.devfilePath,dockerfilePath:this.gitsource.dockerfilePath}}}},5615:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(5596),r=n(320),s=n(22),o=(n(4360),n(83)),i=n(5597),c=n(5587),l=n(5592),u=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((a=a.apply(e,t||[])).next())}))};class d extends l.a{constructor(e){super(e),this.isServer=!1,this.getAuthProvider=()=>{if(this.gitsource.secretType===c.e.BASIC_AUTH){const{username:e,password:t}=this.gitsource.secretContent;if(!s.a(e)){return{authorization:"Basic "+r.Base64.encode(`${r.Base64.decode(e)}:${r.Base64.decode(t)}`)}}return{Authorization:"token "+r.Base64.decode(t)}}return null},this.fetchJson=(e,t,n,a)=>u(this,void 0,void 0,(function*(){const r=this.getAuthProvider(),s=Object.assign(Object.assign({Accept:"application/json"},r),n);if(this.isServer)return Object(i.c)(Object.assign({allowInsecure:!0,url:e,method:t||"GET",headers:Object(i.d)(s)},a&&{body:JSON.stringify(a)}));const o=yield fetch(e,Object.assign({method:t||"GET",headers:s},a&&{body:JSON.stringify(a)}));if(!o.ok)throw o;return"text/plain"===o.headers.get("Content-Type")?o.text():o.json()})),this.getRepoMetadata=()=>{var e;const{name:t,owner:n,resource:r,full_name:s}=a(this.gitsource.url),o=(null===(e=this.gitsource.contextDir)||void 0===e?void 0:e.replace(/\/$/,""))||"";return{repoName:t,owner:n,host:"https://"+r,defaultBranch:this.gitsource.ref,fullName:s,contextDir:o,devfilePath:this.gitsource.devfilePath,dockerfilePath:this.gitsource.dockerfilePath}},this.isRepoReachable=()=>u(this,void 0,void 0,(function*(){const e=`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}`;try{const t=yield this.fetchJson(e);if((null==t?void 0:t.name)===this.metadata.repoName)return c.d.Reachable}catch(e){return c.d.GiteaRepoUnreachable}return c.d.GiteaRepoUnreachable})),this.getRepoBranchList=()=>u(this,void 0,void 0,(function*(){const e=`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/branches`;try{const t=yield this.fetchJson(e);return{branches:(null==t?void 0:t.map(e=>e.name))||[]}}catch(e){return{branches:[]}}})),this.getRepoFileList=e=>u(this,void 0,void 0,(function*(){const t=(null==e?void 0:e.specificPath)?`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/contents/${this.metadata.contextDir}/${e.specificPath}`:`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/contents/${this.metadata.contextDir}`;try{const e=yield this.fetchJson(t);return{files:(null==e?void 0:e.map(e=>e.name))||[]}}catch(e){return{files:[]}}})),this.getRepoLanguageList=()=>u(this,void 0,void 0,(function*(){const e=`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/languages`;try{const t=yield this.fetchJson(e);return{languages:(null==Object?void 0:Object.keys(t))||[]}}catch(e){return{languages:[]}}})),this.createRepoWebhook=(e,t)=>u(this,void 0,void 0,(function*(){const n={"Content-Type":["application/json"],Authorization:["token "+e]},a={active:!0,authorization_header:"",branch_filter:"*",config:{content_type:"json",url:t},events:["push","pull_request"],type:"gitea"},r=`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/hooks`;return 201===(yield o.consoleFetchJSON.post(i.a,{url:r,method:"POST",headers:n,body:JSON.stringify(a)})).statusCode})),this.isFilePresent=e=>u(this,void 0,void 0,(function*(){const t=e.replace(/^\//,""),n=`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/contents/${t}?ref=${this.metadata.defaultBranch}`;try{return yield this.fetchJson(n),!0}catch(e){return!1}})),this.getFileContent=e=>u(this,void 0,void 0,(function*(){const t=e.replace(/^\//,""),n=`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/raw/${t}?ref=${this.metadata.defaultBranch}`;try{return yield this.fetchJson(n)}catch(e){return console.warn("Error fetching file content",e),null}})),this.isDockerfilePresent=()=>this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`),this.isTektonFolderPresent=()=>this.isFilePresent(this.metadata.contextDir+"/.tekton"),this.getDockerfileContent=()=>this.getFileContent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`),this.isFuncYamlPresent=()=>this.isFilePresent(this.metadata.contextDir+"/func.yaml")||this.isFilePresent(this.metadata.contextDir+"/func.yml"),this.getFuncYamlContent=()=>this.getFileContent(this.metadata.contextDir+"/func.yaml")||this.getFileContent(this.metadata.contextDir+"/func.yml"),this.isDevfilePresent=()=>this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`),this.getDevfileContent=()=>this.getFileContent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`),this.getPackageJsonContent=()=>this.getFileContent(this.metadata.contextDir+"/package.json"),this.metadata=this.getRepoMetadata(),this.metadata.host.includes("gitea.com")||(this.isServer=!0)}}},5616:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(5643),r=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((a=a.apply(e,t||[])).next())}))};const s=[{name:"Maven",type:"java",language:"java",expectedRegexp:/pom.xml/,priority:0},{name:"Gradle",type:"java",language:"java",expectedRegexp:/.*gradle.*/,priority:0},{name:"Golang",type:"golang",language:"go",expectedRegexp:RegExp([".*.\\.go","Gopkg.toml","glide.yaml"].join("|")),priority:0},{name:"Ruby",type:"ruby",language:"ruby",expectedRegexp:RegExp(["Gemfile","Rakefile","config.ru"].join("|")),priority:0},{name:"NodeJS",type:"nodejs",language:"javascript",expectedRegexp:RegExp(["app.json","package.json","gulpfile.js","Gruntfile.js"].join("|")),priority:0},{name:"Modern Web App",type:"modern-webapp",language:"javascript",expectedRegexp:/package\.json/,priority:1,customDetection:e=>r(void 0,void 0,void 0,(function*(){const t=yield e.getPackageJsonContent();return Object(a.b)(t)?["package.json"]:[]}))},{name:"PHP",type:"php",language:"php",expectedRegexp:RegExp(["index.php","composer.json"].join("|")),priority:0},{name:"Python",type:"python",language:"python",expectedRegexp:RegExp(["requirements.txt","setup.py"].join("|")),priority:0},{name:"Perl",type:"perl",language:"perl",expectedRegexp:RegExp(["index.pl","cpanfile"].join("|")),priority:0},{name:"Dotnet",type:"dotnet",language:"C#",expectedRegexp:RegExp(["project.json",".*.csproj"].join("|")),priority:0}],o=e=>r(void 0,void 0,void 0,(function*(){const{files:t}=yield e.getRepoFileList();return(yield Promise.all(s.map(n=>r(void 0,void 0,void 0,(function*(){let a=t.filter(e=>n.expectedRegexp.test(e));return a.length>0&&n.customDetection&&(a=yield n.customDetection(e)),{name:n.name,type:n.type,language:n.language,priority:n.priority,detectedFiles:a}}))))).filter(e=>!!e.detectedFiles.length).sort((e,t)=>t.priority-e.priority)}))},5617:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"g",(function(){return h})),n.d(t,"e",(function(){return b})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return g}));var a,r=n(29),s=n(16),o=n(240),i=n(5595);!function(e){e.PipelineRunCancelled="StoppedRunFinally",e.PipelineRunStopped="CancelledRunFinally",e.TaskRunCancelled="TaskRunCancelled",e.Cancelled="Cancelled",e.PipelineRunStopping="PipelineRunStopping",e.PipelineRunPending="PipelineRunPending",e.TaskRunStopping="TaskRunStopping",e.CreateContainerConfigError="CreateContainerConfigError",e.ExceededNodeResources="ExceededNodeResources",e.ExceededResourceQuota="ExceededResourceQuota",e.ConditionCheckFailed="ConditionCheckFailed"}(a||(a={}));const c=e=>{var t;const n=s.a(e,["status","conditions"],[]);if(0===n.length)return null;const r=n.find(e=>"Succeeded"===e.type),o=n.find(e=>"Cancelled"===e.reason);if([a.PipelineRunStopped,a.PipelineRunCancelled].includes(null===(t=e.spec)||void 0===t?void 0:t.status)&&!o)return i.a.Cancelling;if(!r||!r.status)return null;const c="True"===r.status?i.a.Succeeded:"False"===r.status?i.a.Failed:i.a.Running;if(r.reason&&r.reason!==c)switch(r.reason){case a.PipelineRunCancelled:case a.TaskRunCancelled:case a.Cancelled:case a.PipelineRunStopped:return i.a.Cancelled;case a.PipelineRunStopping:case a.TaskRunStopping:return i.a.Failed;case a.CreateContainerConfigError:case a.ExceededNodeResources:case a.ExceededResourceQuota:case a.PipelineRunPending:return i.a.Pending;case a.ConditionCheckFailed:return i.a.Skipped;default:return c}return c},l=e=>{const t=c(e);if(!t)return"-";switch(t){case i.a.Cancelled:return r.a.t("pipelines-plugin~Cancelled");case i.a.Failed:return r.a.t("pipelines-plugin~Failed");case i.a.Succeeded:return r.a.t("pipelines-plugin~Succeeded");case i.a.Pending:return r.a.t("pipelines-plugin~Pending");case i.a.Running:return r.a.t("pipelines-plugin~Running");case i.a.Skipped:return r.a.t("pipelines-plugin~Skipped");case i.a.Cancelling:return r.a.t("pipelines-plugin~Cancelling");default:return t}},u=e=>e.latestRun&&c(e.latestRun)||i.a.Other,d=e=>e.latestRun&&l(e.latestRun)||"-",p=e=>l(e)||"-",m=e=>c(e)||i.a.Other,h=(e,t)=>{var n;if(!e||!e.selected||!e.selected.length)return!0;const a=u(t);return(null===(n=e.selected)||void 0===n?void 0:n.includes(a))||!o.a(e.all,a)},b=(e,t)=>{var n;if(!e||!e.selected||!e.selected.length)return!0;const a=m(t);return(null===(n=e.selected)||void 0===n?void 0:n.includes(a))||!o.a(e.all,a)},f=e=>c(e)||i.a.Other,g=e=>l(e)||"-"},5620:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.PAC="pac",e.PIPELINE="pipeline"}(a||(a={}))},5621:function(e,t,n){"use strict";n.d(t,"f",(function(){return m})),n.d(t,"l",(function(){return h})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return f})),n.d(t,"m",(function(){return g})),n.d(t,"o",(function(){return v})),n.d(t,"n",(function(){return E})),n.d(t,"k",(function(){return y})),n.d(t,"h",(function(){return O})),n.d(t,"g",(function(){return _})),n.d(t,"e",(function(){return k})),n.d(t,"d",(function(){return T})),n.d(t,"b",(function(){return R})),n.d(t,"j",(function(){return j})),n.d(t,"i",(function(){return S}));var a=n(4413),r=n(689),s=n(5),o=n(5620),i=n(2221),c=n(5624),l=n(5599),u=n(5651);const d=/^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$/,p=/^\/.*$/,m=/^((((ssh|git|https?:?):\/\/:?)(([^\s@]+@|[^@]:?)[-\w.]+(:\d\d+:?)?(\/[-\w.~/?[\]!$&'()*+,;=:@%]*:?)?:?))|([^\s@]+@[-\w.]+:[-\w.~/?[\]!$&'()*+,;=:@%]*?:?))$/,h=r.object().shape({name:r.string().matches(/^[a-z0-9]([-a-z0-9]*[a-z0-9])?$/,"Name must consist of lower case alphanumeric characters or '-' and must start and end with an alphanumeric character.").required("Required")}),b=r.object().shape({selectedKey:r.string(),name:r.string().max(63,"Cannot be longer than 63 characters.").when("selectedKey",{is:i.b,then:r.string().required("Required")})}),f=e=>r.object().shape({replicas:r.number().transform(e=>a.a(e)?void 0:e).test(Object(c.b)(e("devconsole~Replicas must be an integer."))).min(0,e("devconsole~Replicas must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Replicas must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})).test({name:"isEmpty",test:e=>void 0!==e,message:e("devconsole~This field cannot be empty.")})}),g=r.string().oneOf([l.k.OpenShift,l.k.Kubernetes,l.k.KnativeService]).required(),v=e=>r.object().when("resources",{is:l.k.KnativeService,then:r.object().shape({scaling:r.object({minpods:r.number().transform(e=>a.a(e)?void 0:e).test(Object(c.b)(e("devconsole~Min Pods must be an integer."))).min(0,e("devconsole~Min Pods must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Min Pods must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})),maxpods:r.number().transform(e=>a.a(e)?void 0:e).test(Object(c.b)(e("devconsole~Max Pods must be an integer."))).min(1,e("devconsole~Max Pods must be greater than or equal to 1.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Max Pods must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})).test({test(e){const{minpods:t}=this.parent;return!e||e>=t},message:e("devconsole~Max Pods must be greater than or equal to Min Pods.")}),concurrencytarget:r.number().transform(e=>a.a(e)?void 0:e).test(Object(c.b)(e("devconsole~Concurrency target must be an integer."))).min(0,e("devconsole~Concurrency target must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Concurrency target must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})),concurrencylimit:r.number().transform(e=>a.a(e)?void 0:e).test(Object(c.b)(e("devconsole~Concurrency limit must be an integer."))).min(0,e("devconsole~Concurrency limit must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Concurrency limit must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})),concurrencyutilization:r.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Concurrency utilization must be between 0 and 100.")).max(100,e("devconsole~Concurrency utilization must be between 0 and 100.")),autoscale:r.object().shape({autoscalewindow:r.number().transform(e=>a.a(e)?void 0:e).test({test(e){if(e){const{autoscalewindowUnit:t}=this.parent,n=((e,t)=>{switch(t){case"m":return 60*e;case"h":return 3600*e;default:return e}})(e,t);return n>=6&&n<=3600}return!0},message:e("devconsole~Autoscale window must be between 6s and 1h.")})})}),domainMapping:r.array().of(r.string().transform(u.f).matches(d,{message:e("devconsole~Domain name must consist of lower-case letters, numbers, periods, and hyphens. It must start and end with a letter or number."),excludeEmptyString:!0}).test("domainname-has-segements",e("devconsole~Domain name must consist of at least two segments separated by dots."),(function(e){return e.split(".").length>=2})))})}),E=e=>r.object().shape({secure:r.boolean(),tls:r.object().when("secure",{is:!0,then:r.object({termination:r.string().required(e("devconsole~Please select a termination type."))})}),hostname:r.string().matches(d,{message:e("devconsole~Hostname must consist of lower-case letters, numbers, periods, and hyphens. It must start and end with a letter or number."),excludeEmptyString:!0}).max(253,e("devconsole~Cannot be longer than 253 characters.")),path:r.string().matches(p,{message:e("devconsole~Path must start with /."),excludeEmptyString:!0}),unknownTargetPort:r.number().typeError(e("devconsole~Port must be an integer.")).integer(e("devconsole~Port must be an integer.")).min(1,e("devconsole~Port must be between 1 and 65535.")).max(65535,e("devconsole~Port must be between 1 and 65535."))}),y=e=>r.object().shape({cpu:r.object().shape({request:r.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Request must be greater than or equal to 0.")).test({test(e){const{requestUnit:t,limit:n,limitUnit:a}=this.parent;return void 0===n||Object(s.Ib)(`${e}${t}`)<=Object(s.Ib)(`${n}${a}`)},message:e("devconsole~CPU request must be less than or equal to limit.")}),requestUnit:r.string(e("devconsole~Unit must be millicores or cores.")).ensure(),limitUnit:r.string(e("devconsole~Unit must be millicores or cores.")).ensure(),limit:r.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Limit must be greater than or equal to 0.")).test({test(e){const{request:t,requestUnit:n,limitUnit:a}=this.parent;return void 0===e||Object(s.Ib)(`${e}${a}`)>=Object(s.Ib)(`${t}${n}`)},message:e("devconsole~CPU limit must be greater than or equal to request.")})}),memory:r.object().shape({request:r.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Request must be greater than or equal to 0.")).test({test(e){const{requestUnit:t,limit:n,limitUnit:a}=this.parent;return void 0===n||Object(s.Ib)(`${e}${t}`)<=Object(s.Ib)(`${n}${a}`)},message:e("devconsole~Memory request must be less than or equal to limit.")}),requestUnit:r.string(e("devconsole~Unit must be Mi or Gi.")),limit:r.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Limit must be greater than or equal to 0.")).test({test(e){const{request:t,requestUnit:n,limitUnit:a}=this.parent;return void 0===e||Object(s.Ib)(`${t}${n}`)<=Object(s.Ib)(`${e}${a}`)},message:e("devconsole~Memory limit must be greater than or equal to request.")}),limitUnit:r.string(e("devconsole~Unit must be Mi or Gi."))})}),O=e=>r.object().when("build",{is:e=>"Source"===e.strategy,then:r.object().shape({selected:r.string().required(e("devconsole~Required")),tag:r.string().required(e("devconsole~Required"))})}),_=e=>r.object().shape({url:r.string().max(2e3,e("devconsole~Please enter a URL that is less then 2000 characters.")).matches(m,e("devconsole~Invalid Git URL.")).required(e("devconsole~Required")),type:r.string().when("showGitType",{is:!0,then:r.string().required(e("devconsole~We failed to detect the Git type. Please choose a Git type."))}),showGitType:r.boolean()}),k=e=>r.object().when("build",{is:e=>"Docker"===e.strategy,then:r.object().shape({containerPort:r.number().test(Object(c.b)(e("devconsole~Container port should be an integer"))),dockerfilePath:r.string().required(e("devconsole~Required"))})}),T=e=>r.object().when("build",{is:e=>"Devfile"===e.strategy,then:r.object().shape({devfilePath:r.string().required(e("devconsole~Required")),devfileContent:r.string().min(1,e("devconsole~Required")).required(e("devconsole~Required")),devfileHasError:r.boolean().oneOf([!1]),devfileSuggestedResources:r.object().required(e("devconsole~Required"))})}),R=r.object().shape({strategy:r.string()}),j=e=>r.object().shape({name:r.string().required(e("devconsole~Required")),image:r.object().required(e("devconsole~Required")),tag:r.string(),status:r.string().required(e("devconsole~Required"))}),S=r.object().when(["enabled","build.option","type"],{is:(e,t,n)=>(e||t===l.a.PIPELINES)&&n!==o.a.PAC,then:r.object().shape({templateSelected:r.string().required()})})},5622:function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"i",(function(){return i})),n.d(t,"j",(function(){return c})),n.d(t,"l",(function(){return l})),n.d(t,"m",(function(){return u})),n.d(t,"n",(function(){return d})),n.d(t,"o",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"h",(function(){return h})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return f})),n.d(t,"s",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"t",(function(){return E})),n.d(t,"e",(function(){return y})),n.d(t,"k",(function(){return O})),n.d(t,"p",(function(){return _})),n.d(t,"q",(function(){return k})),n.d(t,"r",(function(){return T}));var a=n(5654);const r=a.chart_color_green_400.value,s={apiGroup:"tekton.dev",apiVersion:"v1",label:"Pipeline",labelKey:"pipelines-plugin~Pipeline",labelPluralKey:"pipelines-plugin~Pipelines",plural:"pipelines",abbr:"PL",namespaced:!0,kind:"Pipeline",id:"pipeline",labelPlural:"Pipelines",crd:!0,color:r},o={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"Pipeline",labelKey:"pipelines-plugin~Pipeline",labelPluralKey:"pipelines-plugin~Pipelines",plural:"pipelines",abbr:"PL",namespaced:!0,kind:"Pipeline",id:"pipeline",labelPlural:"Pipelines",crd:!0,color:r},i={apiGroup:"tekton.dev",apiVersion:"v1",label:"PipelineRun",labelKey:"pipelines-plugin~PipelineRun",labelPluralKey:"pipelines-plugin~PipelineRuns",plural:"pipelineruns",abbr:"PLR",namespaced:!0,kind:"PipelineRun",id:"pipelinerun",labelPlural:"PipelineRuns",crd:!0,color:r},c={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"PipelineRun",labelKey:"pipelines-plugin~PipelineRun",labelPluralKey:"pipelines-plugin~PipelineRuns",plural:"pipelineruns",abbr:"PLR",namespaced:!0,kind:"PipelineRun",id:"pipelinerun",labelPlural:"PipelineRuns",crd:!0,color:r},l={apiGroup:"tekton.dev",apiVersion:"v1",label:"Task",labelKey:"pipelines-plugin~Task",labelPluralKey:"pipelines-plugin~Tasks",plural:"tasks",abbr:"T",namespaced:!0,kind:"Task",id:"task",labelPlural:"Tasks",crd:!0,color:r},u={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"Task",labelKey:"pipelines-plugin~Task",labelPluralKey:"pipelines-plugin~Tasks",plural:"tasks",abbr:"T",namespaced:!0,kind:"Task",id:"task",labelPlural:"Tasks",crd:!0,color:r},d={apiGroup:"tekton.dev",apiVersion:"v1",label:"TaskRun",labelKey:"pipelines-plugin~TaskRun",labelPluralKey:"pipelines-plugin~TaskRuns",plural:"taskruns",abbr:"TR",namespaced:!0,kind:"TaskRun",id:"taskrun",labelPlural:"TaskRuns",crd:!0,color:r},p={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"TaskRun",labelKey:"pipelines-plugin~TaskRun",labelPluralKey:"pipelines-plugin~TaskRuns",plural:"taskruns",abbr:"TR",namespaced:!0,kind:"TaskRun",id:"taskrun",labelPlural:"TaskRuns",crd:!0,color:r},m={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"CustomRun",labelKey:"pipelines-plugin~CustomRun",labelPluralKey:"pipelines-plugin~CustomRuns",plural:"customruns",abbr:"CR",namespaced:!0,kind:"CustomRun",id:"customrun",labelPlural:"CustomRuns",crd:!0,color:r},h={apiGroup:"tekton.dev",apiVersion:"v1alpha1",label:"PipelineResource",labelKey:"pipelines-plugin~PipelineResource",labelPluralKey:"pipelines-plugin~PipelineResources",plural:"pipelineresources",abbr:"PR",namespaced:!0,kind:"PipelineResource",id:"pipelineresource",labelPlural:"PipelineResources",crd:!0,color:r},b={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"ClusterTask",labelKey:"pipelines-plugin~ClusterTask",labelPluralKey:"pipelines-plugin~ClusterTasks",plural:"clustertasks",abbr:"CT",namespaced:!1,kind:"ClusterTask",id:"clustertask",labelPlural:"ClusterTasks",crd:!0,color:r},f={apiGroup:"tekton.dev",apiVersion:"v1alpha1",label:"Condition",labelKey:"pipelines-plugin~Condition",labelPluralKey:"pipelines-plugin~Conditions",plural:"conditions",abbr:"C",namespaced:!0,kind:"Condition",id:"condition",labelPlural:"Conditions",crd:!0,color:r},g={apiGroup:"triggers.tekton.dev",apiVersion:"v1beta1",label:"TriggerBinding",labelKey:"pipelines-plugin~TriggerBinding",labelPluralKey:"pipelines-plugin~TriggerBindings",plural:"triggerbindings",abbr:"TB",namespaced:!0,kind:"TriggerBinding",id:"triggerbinding",labelPlural:"TriggerBindings",crd:!0,color:r},v={apiGroup:"triggers.tekton.dev",apiVersion:"v1beta1",label:"ClusterTriggerBinding",labelKey:"pipelines-plugin~ClusterTriggerBinding",labelPluralKey:"pipelines-plugin~ClusterTriggerBindings",plural:"clustertriggerbindings",abbr:"CTB",namespaced:!1,kind:"ClusterTriggerBinding",id:"clustertriggerbinding",labelPlural:"ClusterTriggerBindings",crd:!0,color:r},E={apiGroup:"triggers.tekton.dev",apiVersion:"v1beta1",label:"TriggerTemplate",labelKey:"pipelines-plugin~TriggerTemplate",labelPluralKey:"pipelines-plugin~TriggerTemplates",plural:"triggertemplates",abbr:"TT",namespaced:!0,kind:"TriggerTemplate",id:"triggertemplate",labelPlural:"TriggerTemplates",crd:!0,color:r},y={apiGroup:"triggers.tekton.dev",apiVersion:"v1beta1",label:"EventListener",labelKey:"pipelines-plugin~EventListener",labelPluralKey:"pipelines-plugin~EventListeners",plural:"eventlisteners",abbr:"EL",namespaced:!0,kind:"EventListener",id:"eventlistener",labelPlural:"EventListeners",crd:!0,color:r},O={apiGroup:"pipelinesascode.tekton.dev",apiVersion:"v1alpha1",label:"Repository",labelKey:"pipelines-plugin~Repository",labelPluralKey:"pipelines-plugin~Repositories",plural:"repositories",abbr:"R",namespaced:!0,kind:"Repository",id:"repository",labelPlural:"Repositories",crd:!0,color:r},_={apiGroup:"operator.tekton.dev",apiVersion:"v1alpha1",label:"TektonConfig",labelKey:"pipelines-plugin~TektonConfig",labelPluralKey:"pipelines-plugin~TektonConfigs",plural:"tektonconfigs",abbr:"TC",namespaced:!1,kind:"TektonConfig",id:"tektonconfig",labelPlural:"TektonConfigs",crd:!0},k={apiGroup:"operator.tekton.dev",apiVersion:"v1alpha1",label:"TektonHub",labelKey:"pipelines-plugin~TektonHub",labelPluralKey:"pipelines-plugin~TektonHubs",plural:"tektonhubs",abbr:"TH",namespaced:!1,kind:"TektonHub",id:"tektonhub",labelPlural:"TektonHubs",crd:!0},T={apiGroup:"operator.tekton.dev",apiVersion:"v1alpha1",label:"TektonResult",labelKey:"pipelines-plugin~TektonResult",labelPluralKey:"pipelines-plugin~TektonResults",plural:"tektonresults",abbr:"TR",namespaced:!1,kind:"TektonResult",id:"tektonresult",labelPlural:"TektonResults",crd:!0}},5623:function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return R})),n.d(t,"p",(function(){return j})),n.d(t,"h",(function(){return S})),n.d(t,"f",(function(){return N})),n.d(t,"j",(function(){return P})),n.d(t,"m",(function(){return C})),n.d(t,"o",(function(){return w})),n.d(t,"e",(function(){return I})),n.d(t,"v",(function(){return x})),n.d(t,"B",(function(){return D})),n.d(t,"d",(function(){return A})),n.d(t,"s",(function(){return U})),n.d(t,"w",(function(){return L})),n.d(t,"k",(function(){return B})),n.d(t,"l",(function(){return F})),n.d(t,"t",(function(){return q})),n.d(t,"g",(function(){return K})),n.d(t,"x",(function(){return $})),n.d(t,"y",(function(){return Y})),n.d(t,"z",(function(){return G})),n.d(t,"r",(function(){return z})),n.d(t,"u",(function(){return Q})),n.d(t,"q",(function(){return J})),n.d(t,"i",(function(){return Z})),n.d(t,"A",(function(){return X})),n.d(t,"n",(function(){return ee}));var a=n(321),r=n(29),s=n(1557),o=n(117),i=n(16),c=n(22),l=n(640),u=n(1942),d=n(5),p=n(10),m=n(8),h=n(5588),b=n(5650),f=n(5586),g=n(5595),v=n(5635),E=n(5617);const y=e=>e.resources&&e.resources.inputs&&e.resources.inputs.length>0&&!!e.resources.inputs[0].from,O=e=>e.runAfter&&e.runAfter.length>0;var _;!function(e){e.Running="Running",e.Failed="Failed",e.Succeeded="Succeeded",e.Cancelled="Cancelled",e.Other="-"}(_||(_={}));const k={[_.Running]:r.a.t("pipelines-plugin~Running"),[_.Failed]:r.a.t("pipelines-plugin~Failed"),[_.Succeeded]:r.a.t("pipelines-plugin~Succeeded"),[_.Cancelled]:r.a.t("pipelines-plugin~Cancelled"),[_.Other]:r.a.t("pipelines-plugin~Other")};var T;!function(e){e.Git="git",e.PullRequest="pullRequest",e.Image="image",e.Cluster="cluster",e.Storage="storage",e.CloudEvent="cloudEvent"}(T||(T={}));T.Git,T.PullRequest,T.Image,T.Cluster,T.Storage,T.CloudEvent;const R=(e,t,n,r=!1)=>((r?e.spec.finally:e.spec.tasks)||[]).map(e=>{var r;if(!t.status)return e;if(!n||0===n.length)return t.spec.status===E.a.PipelineRunCancelled?s.a(e,{status:{reason:g.a.Cancelled}}):t.spec.status===E.a.PipelineRunPending?s.a(e,{status:{reason:g.a.Idle}}):s.a(e,{status:{reason:g.a.Failed}});const c=o.a(n,t=>t.metadata.labels[h.u.pipelineTask]===e.name),l=null==c?void 0:c.status,u=s.a(e,{status:(null===(r=null==t?void 0:t.status)||void 0===r?void 0:r.taskRuns)?i.a(o.a(t.status.taskRuns,{pipelineTaskName:e.name}),"status"):l});if(u.status&&u.status.completionTime&&u.status.startTime){const e=new Date(u.status.completionTime).getTime()-new Date(u.status.startTime).getTime();u.status.duration=Object(a.a)(e)}return u.status?u.status&&u.status.conditions?u.status.reason=Object(E.d)(u)||g.a.Pending:u.status&&!u.status.reason&&(u.status.reason=g.a.Pending):u.status={reason:g.a.Pending},u}),j=(e,t={apiVersion:"",metadata:{},kind:"PipelineRun",spec:{}},n)=>{var a;const r=[];if(!(null===(a=e.spec)||void 0===a?void 0:a.tasks)||c.a(e.spec.tasks))return r;const s=R(e,t,n);return s.forEach(e=>{y(e)||O(e)||(0===r.length&&r.push([]),r[0].push(e))}),s.forEach(e=>{var t;if(!O(e)&&y(e)){let n=r.length-1;for(let a=0;a<r.length;a++)for(const s of r[a])(null===(t=s.taskRef)||void 0===t?void 0:t.name)!==e.resources.inputs[0].from[0]&&s.name!==e.resources.inputs[0].from[0]||(n=a);const a=r[n+1]?r[n+1]:null;a&&a[0]&&a[0].resources&&a[0].resources.inputs&&a[0].resources.inputs[0]&&a[0].resources.inputs[0].from&&a[0].resources.inputs[0].from[0]&&a[0].resources.inputs[0].from[0]===e.resources.inputs[0].from[0]?a.push(e):r.splice(n+1,0,[e])}}),s.forEach(e=>{var t;if(O(e)){let n=r.length-1;for(let a=0;a<r.length;a++)for(const s of r[a])(null===(t=s.taskRef)||void 0===t?void 0:t.name)!==e.runAfter[0]&&s.name!==e.runAfter[0]||(n=a);const a=r[n+1]?r[n+1]:null;a&&a[0].runAfter&&a[0].runAfter[0]&&a[0].runAfter[0]===e.runAfter[0]?a.push(e):r.splice(n+1,0,[e])}}),r},S=(e,t,n)=>R(e,t,n,!0),N=e=>{if(!e)return d.K;const{state:t,lastState:n}=e;return t.waiting&&!c.a(n)?d.H:t.waiting?d.K:t.terminated?d.J:d.I},P=e=>{if(!e||0===e.length)return{latestPipelineRun:null,status:g.a.PipelineNotStarted};const t=Object(v.b)(e,"creationTimestamp");if(!t)return{latestPipelineRun:null,status:g.a.PipelineNotStarted};let n=Object(E.c)(t);return"-"===n&&(n=g.a.Pending),{latestPipelineRun:t,status:n}},C=e=>e&&e.map(e=>({name:e.name,value:e.default})),w=e=>e&&e.map(e=>Object.assign({name:e.name},e.data)),I=(e,t,n)=>{const a=new Date(e).getTime(),r=((t?new Date(t).getTime():(new Date).getTime())-a)/1e3;return Object(b.g)(r,n)},x=e=>{var t,n,a,r;const s=null!==(n=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.startTime)&&void 0!==n?n:null,o=null!==(r=null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.completionTime)&&void 0!==r?r:null;return!s||!o&&"Running"!==Object(E.d)(e)?"-":I(s,o,!0)},D=(e,t,n)=>{const a=l.a(t);return a.secrets=[...a.secrets,{name:e}],n&&(a.imagePullSecrets=[...a.imagePullSecrets,{name:e}]),Object(m.rb)(p.ServiceAccountModel,a)},A=(e,t,n)=>{Object(m.kb)(p.ServiceAccountModel,h.l,t).then(t=>{void 0===o.a(t.secrets,t=>t.name===e.metadata.name)&&D(e.metadata.name,t,n)}).catch(e=>{Object(u.errorModal)({error:e.message})})},M=(e,t)=>e===h.p.Git?`tekton.dev/${h.p.Git}-${t}`:e===h.p.Image?`tekton.dev/${h.p.Image}-${t}`:null,U=(e,t={})=>{let n=0,a=M(null==e?void 0:e.key,n);if(!a)return t;for(;t[a]&&t[a]!==(null==e?void 0:e.value);)a=M(null==e?void 0:e.key,++n);return Object.assign(Object.assign({},t),{[a]:null==e?void 0:e.value})},L=e=>{switch(e.kind){case f.PipelineModel.kind:case f.TaskModel.kind:case f.EventListenerModel.kind:return"";case f.PipelineRunModel.kind:return"pipeline-runs";case f.PipelineResourceModel.kind:return"pipeline-resources";case f.ConditionModel.kind:return"conditions";case f.TaskRunModel.kind:return"task-runs";case f.ClusterTaskModel.kind:return"cluster-tasks";case f.TriggerTemplateModel.kind:return"trigger-templates";case f.TriggerBindingModel.kind:return"trigger-bindings";case f.ClusterTriggerBindingModel.kind:return"cluster-trigger-bindings";case f.RepositoryModel.kind:return"repositories";default:return null}},B=(e,t,n)=>e.filter(e=>{const{ownerReferences:a=[]}=e.metadata;return a.some(e=>e.name===t&&e.kind===n)}),F=(e,t)=>t.find(t=>t.metadata.name===e.metadata.name),q=(e,t)=>t.filter(t=>!!t.spec.resourcetemplates.find(t=>{var n;return(null===(n=t.spec.pipelineRef)||void 0===n?void 0:n.name)===e.metadata.name})),K=(e,t)=>t.reduce((t,n)=>(n.spec.triggers.filter(t=>e.find(e=>{var n;return(null==e?void 0:e.metadata.name)===(null===(n=null==t?void 0:t.template)||void 0===n?void 0:n.ref)})).length>0&&t.push(n),t),[]),$=e=>"tekton.dev/v1beta1"===e.apiVersion?f.PipelineModelV1Beta1:f.PipelineModel,Y=e=>"tekton.dev/v1beta1"===e.apiVersion?f.PipelineRunModelV1Beta1:f.PipelineRunModel,G=e=>"tekton.dev/v1beta1"===e.apiVersion?f.TaskModelV1Beta1:f.TaskModel;var W,H,V;!function(e){e.KEY="task.results.key",e.TYPE="task.results.type"}(W||(W={})),function(e){e.EXTERNAL_LINK="external-link"}(H||(H={})),function(e){e.IMAGE_REPOSITORY="IMAGE_URL",e.SBOM="LINK_TO_SBOM",e.SCAN_OUTPUT="SCAN_OUTPUT",e.TEST_OUTPUT="TEST_OUTPUT"}(V||(V={}));const z=e=>null==e?void 0:e.find(e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.annotations)||void 0===n?void 0:n[W.KEY])===V.SBOM}),Q=e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.annotations)||void 0===n?void 0:n[W.TYPE])===H.EXTERNAL_LINK},J=e=>{var t,n,a,r;return null===(r=null===(a=(null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.results)||(null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.taskResults))||void 0===a?void 0:a.find(e=>e.name===V.SBOM))||void 0===r?void 0:r.value},Z=e=>{var t,n,a,r;return null===(r=null===(a=(null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.results)||(null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.pipelineResults))||void 0===a?void 0:a.find(e=>e.name===V.IMAGE_REPOSITORY))||void 0===r?void 0:r.value},X=e=>{var t,n;if(!(null===(n=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.conditions)||void 0===n?void 0:n.length))return g.a.Pending;return Object(E.d)(e)},ee=e=>{var t,n,a;const r=null===(a=null===(n=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.conditions)||void 0===n?void 0:n.find(e=>"Succeeded"===(null==e?void 0:e.type)))||void 0===a?void 0:a.message,s=null==r?void 0:r.match(/(\w+)(?::\s*|\s+)(\d+)/g),o={};null==s||s.forEach(e=>{const[t,n]=e.split(/(?::\s*|\s+)/);o[t.trim()]=Number(n.trim())});const i=((null==o?void 0:o.Completed)||0)-((null==o?void 0:o.Failed)||0)-((null==o?void 0:o.Cancelled)||0);return{Running:(null==o?void 0:o.Incomplete)||0,Succeeded:i||0,Cancelled:(null==o?void 0:o.Cancelled)||0,Failed:(null==o?void 0:o.Failed)||0,Skipped:(null==o?void 0:o.Skipped)||0,Completed:(null==o?void 0:o.Completed)||0,Cancelling:(null==o?void 0:o.Cancelled)||0,PipelineNotStarted:0,Pending:0}}},5624:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));const a=e=>({test:e=>null==e||Number.isInteger(e),message:e}),r=/^[a-z]([a-z0-9_]-?)*[a-z0-9]$/},5625:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return _})),n.d(t,"a",(function(){return j}));var a=n(29),r=n(22),s=n(16),o=n(57),i=n(640),c=n(5649),l=n(5),u=n(10),d=n(8),p=n(76),m=n(870),h=n(5586),b=n(5623),f=n(15),g=n(2221),v=n(1400),E=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((a=a.apply(e,t||[])).next())}))};const y=(e,t=e)=>{switch(t){case g.z:case g.b:return"";default:return e}},O=(e,t,n)=>{const a=Object.assign(Object.assign({},t.metadata.labels),{"app.kubernetes.io/part-of":n||void 0});if(!e)return Promise.reject();const s=[{op:r.a(a)?"add":"replace",path:"/metadata/labels",value:a}];return Object(d.pb)(e,t,s)},_=(e,t,n)=>{if(!t)return Promise.reject(new Error(a.a.t("topology~Error: no resource provided to update application for.")));if(!e)return Promise.reject(new Error(a.a.t("topology~Error: invalid resource kind provided for updating application.")));const r=s.a(t,["metadata","labels","app.kubernetes.io/instance"]),i=s.a(t,["metadata","labels","app.kubernetes.io/part-of"]),c=[O(e,t,n)];if(!r)return Promise.all(c);return i&&({"app.kubernetes.io/instance":r}["app.kubernetes.io/part-of"]=i),Object(v.e)(t.metadata.namespace,r,{"app.kubernetes.io/part-of":i}).then(e=>(o.a(e,e=>{o.a(e,e=>{!i&&s.a(e,["metadata","labels","app.kubernetes.io/part-of"])||c.push(O(Object(d.vb)(e.kind),e,n))})}),Promise.all(c)))},k=(e,t={},n)=>E(void 0,void 0,void 0,(function*(){var a,r;try{if(n){const n=yield Object(l.Fb)({group:e.apiGroup,resource:e.plural,verb:"list",namespace:null==t?void 0:t.ns});if(!(null===(a=null==n?void 0:n.status)||void 0===a?void 0:a.allowed))return[]}return yield Object(d.nb)(e,t)}catch(t){if(404===(null===(r=null==t?void 0:t.response)||void 0===r?void 0:r.status))return console.warn(`Ignore that model ${e.plural} was not found:`,t),[];throw console.warn(`Error while loading model ${e.plural}:`,t),t}})),T=(e,t)=>E(void 0,void 0,void 0,(function*(){var n;if(!(yield Object(l.Fb)({group:e.apiGroup,resource:e.plural,verb:"delete",name:t.metadata.name,namespace:t.metadata.namespace})).status.allowed)return console.warn(`User is not allowed to delete resource ${e.plural} ${t.metadata.name}.`),null;try{return yield Object(d.lb)(e,t)}catch(a){if(404===(null===(n=null==a?void 0:a.response)||void 0===n?void 0:n.status))return console.warn(`Resource ${e.plural} ${t.metadata.name} was not found. Ignore this error.`,a),null;throw console.warn(`Error while deleting resource ${e.plural} ${t.metadata.name}:`,a),a}})),R=(e,t)=>E(void 0,void 0,void 0,(function*(){var n,a;const r=null!==(a=null===(n=e.metadata)||void 0===n?void 0:n.annotations)&&void 0!==a?a:{},s=Object(c.c)(r["app.openshift.io/vcs-uri"]),o=yield Object(d.nb)(u.SecretModel,{ns:e.metadata.namespace});let i;if((null==t?void 0:t.length)>0)i=null==t?void 0:t.reduce((t,n)=>{var a,r;return[...t,...(null!==(r=null===(a=n.spec)||void 0===a?void 0:a.triggers)&&void 0!==r?r:[]).reduce((t,n)=>{var a,r;let i;const c=n.generic?"generic":s,l=n.generic||n[s];if(l){const t=null!==(r=null===(a=l.secretReference)||void 0===a?void 0:a.name)&&void 0!==r?r:`${e.metadata.name}-${c}-webhook-secret`;i=o.find(e=>e.metadata.name===t)}return i?[...t,T(u.SecretModel,i)]:t},[])]},[]);else{const t=o.find(t=>t.metadata.name===e.metadata.name+"-generic-webhook-secret"),n=o.find(t=>t.metadata.name===`${e.metadata.name}-${s}-webhook-secret`);i=[T(u.SecretModel,t),T(u.SecretModel,n)]}return i})),j=e=>E(void 0,void 0,void 0,(function*(){const t=[],n=yield k(u.BuildConfigModel,{ns:e.metadata.namespace}),a=yield k(u.BuildModel,{ns:e.metadata.namespace}),s=yield k(h.PipelineModel,{ns:e.metadata.namespace},!0),o=yield k(h.TriggerTemplateModel,{ns:e.metadata.namespace},!0),c=yield k(h.EventListenerModel,{ns:e.metadata.namespace},!0),l=yield Object(m.fetchChannelsCrd)(),g=Object(d.vb)(Object(d.Db)(e)),v={buildConfigs:{data:n,loaded:!0,loadError:null},builds:{data:a,loaded:!0,loadError:null}},E=Object(f.Gc)(e,v),y=!r.a(E),O=Object(b.l)(e,s);let _=[],j=[];const S=[u.ServiceModel,u.RouteModel,u.ImageStreamModel],N=[p.p,u.ImageStreamModel];r.a(O)||(S.push(h.PipelineModel),N.push(h.PipelineModel),_=Object(b.t)(O,o),j=Object(b.g)(_,c));const P=i.a(e),C=(e,n)=>{const a=T(e,n);a&&t.push(a)};y&&E.forEach(e=>{C(u.BuildConfigModel,e)});const w=(e,t)=>{e.forEach(e=>C(e,t))};switch(Object(m.isDynamicEventResourceKind)(Object(d.Db)(e))&&C(Object(d.vb)(Object(d.Db)(e)),e),l.find(t=>t.kind===e.kind)&&C(g,e),_.length>0&&_.forEach(e=>C(h.TriggerTemplateModel,e)),j.length>0&&j.forEach(e=>C(h.EventListenerModel,e)),e.kind){case u.DaemonSetModel.kind:case u.StatefulSetModel.kind:case u.JobModel.kind:case u.CronJobModel.kind:case p.f.kind:C(g,e);break;case u.DeploymentModel.kind:case u.DeploymentConfigModel.kind:C(g,e),w(S,e);break;case p.p.kind:w(N,P);break;case p.b.kind:case p.k.kind:C(g,e)}return y&&t.push(...yield R(e,E)),O&&t.push(...yield R(e)),Promise.all(t)}))},5626:function(e,t,n){"use strict";var a,r,s;n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s})),function(e){e.METRICS_PIPELINERUN_DURATION_TYPE="metrics.pipelinerun.duration-type",e.METRICS_PIPELINERUN_LEVEL="metrics.pipelinerun.level",e.METRICS_TASKRUN_DURATION_TYPE="metrics.taskrun.duration-type",e.METRICS_TASKRUN_LEVEL="metrics.taskrun.level"}(a||(a={})),function(e){e.PIPELINE="pipeline",e.PIPELINERUN="pipelinerun",e.TASK="task",e.TASKRUN="taskrun"}(r||(r={})),function(e){e.HISTOGRAM="histogram",e.LASTVALUE="lastvalue",e.NAMESPACE="namespace"}(s||(s={}))},5627:function(e,t,n){},5628:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={group:"tekton.dev",version:"v1",kind:"PipelineRun"}},5629:function(e,t,n){},5630:function(e,t,n){},5631:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={group:"tekton.dev",version:"v1",kind:"TaskRun"}},5632:function(e,t,n){"use strict";var a,r;n.d(t,"a",(function(){return a})),function(e){e.Cancelling="Cancelling",e.Succeeded="Succeeded",e.Failed="Failed",e.Running="Running",e["In Progress"]="In Progress",e.FailedToStart="FailedToStart",e.PipelineNotStarted="PipelineNotStarted",e.Skipped="Skipped",e.Cancelled="Cancelled",e.Pending="Pending",e.Idle="Idle",e.Other="-"}(a||(a={})),function(e){e.RunCancelled="RunCancelled"}(r||(r={}))},5633:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(5587),r=n(5611),s=n(5616),o=n(5661),i=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((a=a.apply(e,t||[])).next())}))};const c=[{name:"Devfile",type:r.b.DEVFILE,expectedRegexp:/^\.?devfile\.yaml$/,priority:3},{name:"Dockerfile",type:r.b.DOCKERFILE,expectedRegexp:/^(Dockerfile|Containerfile).*/,priority:2},{name:"Serverless Function",type:r.b.SERVERLESS_FUNCTION,expectedRegexp:/^func\.(yaml|yml)$/,priority:1},{name:"Builder Image",type:r.b.S2I,expectedRegexp:/^/,priority:0,customDetection:s.a}],l=(e,t,n=!1)=>i(void 0,void 0,void 0,(function*(){let e,s=[],l=!1,u=null;const d=t?yield t.isRepoReachable():a.d.GitTypeNotDetected;let p,m=[];if(d===a.d.Reachable)try{const{files:a}=yield t.getRepoFileList({includeFolder:!0});e=yield Object(o.b)(n,t),s=yield Promise.all(c.map(e=>i(void 0,void 0,void 0,(function*(){return m=a.filter(t=>e.expectedRegexp.test(t)),m.length>0&&e.customDetection&&(p=yield e.customDetection(t)),{name:e.name,type:e.type,priority:e.priority,detectedFiles:m,detectedCustomData:p}})))),l=!0}catch(e){l=!0,u=e.message}else l=!0;return e||(s=s.filter(e=>e.type!==r.b.SERVERLESS_FUNCTION)),s=s.filter(e=>{var t;return!!e.detectedFiles.length||!!(null===(t=e.detectedCustomData)||void 0===t?void 0:t.length)}).sort((e,t)=>t.priority-e.priority),{loaded:l,loadError:u,repositoryStatus:d,strategies:s}}))},5634:function(e,t,n){"use strict";n.d(t,"i",(function(){return r})),n.d(t,"g",(function(){return s})),n.d(t,"m",(function(){return o})),n.d(t,"j",(function(){return i})),n.d(t,"k",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"l",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"o",(function(){return m})),n.d(t,"p",(function(){return h})),n.d(t,"n",(function(){return b})),n.d(t,"q",(function(){return f})),n.d(t,"d",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return E})),n.d(t,"a",(function(){return y})),n.d(t,"r",(function(){return O}));var a=n(2221);const r="event-source",s="event-sink",o="kafka-sink",i="event-source-kafka",c="event-source-link",l="event-sink-link",u="event-source-kafka-link",d="event-pubsub",p="event-pubsub-link",m="knative-service",h="revision-traffic",b="knative-revision",f="sink-uri",g=a.h,v=100,E=[a.c,a.c,a.c+10,a.c],y=6,O="URI"},5635:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return f})),n.d(t,"f",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"i",(function(){return E})),n.d(t,"h",(function(){return O})),n.d(t,"e",(function(){return _})),n.d(t,"g",(function(){return k})),n.d(t,"c",(function(){return T})),n.d(t,"l",(function(){return j})),n.d(t,"m",(function(){return S})),n.d(t,"j",(function(){return N})),n.d(t,"k",(function(){return P}));var a=n(5699),r=n(1403),s=n(5692),o=n(5691),i=n(5654),c=n(2225),l=n(29),u=n(8),d=n(5588),p=n(5586),m=n(5595),h=n(5617);const b=(e,t)=>{if(!(e&&e.length>0&&t))return null;let n=e[0];if("creationTimestamp"===t)for(let a=1;a<e.length;a++)n=e[a]&&e[a].metadata&&e[a].metadata[t]&&new Date(e[a].metadata[t])>new Date(n.metadata[t])?e[a]:n;else if("startTime"===t||"completionTime"===t)for(let a=1;a<e.length;a++)n=e[a]&&e[a].status&&e[a].status[t]&&new Date(e[a].status[t])>new Date(n.status[t])?e[a]:n;else n=e[e.length-1];return n.status||(n=Object.assign(Object.assign({},n),{status:{pipelineSpec:{tasks:[]}}})),n.status.succeededCondition||(n.status=Object.assign(Object.assign({},n.status),{succeededCondition:""})),n.status.succeededCondition=Object(h.c)(n),n},f=(e,t)=>e.map(e=>{const n=t.filter(t=>{var n;return(null===(n=t.metadata.labels)||void 0===n?void 0:n["tekton.dev/pipeline"])===e.metadata.name});return e.latestRun=b(n,"creationTimestamp"),e}),g=e=>{switch(e){case m.a.Succeeded:return{message:l.a.t("pipelines-plugin~Succeeded"),pftoken:i.chart_color_green_400};case m.a.Failed:return{message:l.a.t("pipelines-plugin~Failed"),pftoken:c.global_danger_color_100};case m.a.FailedToStart:return{message:l.a.t("pipelines-plugin~PipelineRun failed to start"),pftoken:c.global_danger_color_100};case m.a.Running:case m.a["In Progress"]:return{message:l.a.t("pipelines-plugin~Running"),pftoken:o.chart_color_blue_300};case m.a.Skipped:return{message:l.a.t("pipelines-plugin~Skipped"),pftoken:a.chart_color_black_400};case m.a.Cancelled:return{message:l.a.t("pipelines-plugin~Cancelled"),pftoken:r.chart_color_black_500};case m.a.Cancelling:return{message:l.a.t("pipelines-plugin~Cancelling"),pftoken:r.chart_color_black_500};case m.a.Idle:case m.a.Pending:return{message:l.a.t("pipelines-plugin~Pending"),pftoken:s.chart_color_blue_100};default:return{message:l.a.t("pipelines-plugin~PipelineRun not started yet"),pftoken:s.chart_color_blue_100}}},v=e=>{var t,n,a,r,s;const o=(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n[d.u.pipeline])||(null===(a=null==e?void 0:e.metadata)||void 0===a?void 0:a.name),i=(null===(r=null==e?void 0:e.status)||void 0===r?void 0:r.pipelineSpec)||(null===(s=null==e?void 0:e.spec)||void 0===s?void 0:s.pipelineSpec);return o&&i?{apiVersion:Object(u.n)(p.PipelineModel),kind:p.PipelineModel.kind,metadata:{name:o,namespace:e.metadata.namespace},spec:i}:null},E=(e,t,n)=>{var a,r,s,o,i;const c=(e=>{var t,n,a,r;if(!e)return 0;return(null!==(n=((null===(t=e.spec)||void 0===t?void 0:t.tasks)||[]).length)&&void 0!==n?n:0)+(null!==(r=((null===(a=e.spec)||void 0===a?void 0:a.finally)||[]).length)&&void 0!==r?r:0)})(t)-(e=>{var t,n,a,r;if(!e)return 0;return(null!==(n=((null===(t=e.spec)||void 0===t?void 0:t.tasks)||[]).filter(e=>{var t,n;return"Task"!==(null===(t=e.taskRef)||void 0===t?void 0:t.kind)&&"ClusterTask"!==(null===(n=e.taskRef)||void 0===n?void 0:n.kind)}).length)&&void 0!==n?n:0)+(null!==(r=((null===(a=e.spec)||void 0===a?void 0:a.finally)||[]).filter(e=>{var t,n;return"Task"!==(null===(t=e.taskRef)||void 0===t?void 0:t.kind)&&"ClusterTask"!==(null===(n=e.taskRef)||void 0===n?void 0:n.kind)}).length)&&void 0!==r?r:0)})(t),l=()=>{var t;return(null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.taskRuns)?Object.keys(e.status.taskRuns):n?null==n?void 0:n.map(e=>e.metadata.name):[]},u=l().length,d=((null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.skippedTasks)||[]).length,p={PipelineNotStarted:0,Pending:0,Running:0,Succeeded:0,Failed:0,Cancelled:0,Skipped:d};if((null===(r=null==e?void 0:e.status)||void 0===r?void 0:r.taskRuns)||n){l().forEach(t=>{const a=Object(h.c)((null==n?void 0:n.find(e=>e.metadata.name===t))||e.status.taskRuns[t]);"Succeeded"===a?p[m.a.Succeeded]++:"Running"===a?p[m.a.Running]++:"Failed"===a?p[m.a.Failed]++:"Cancelled"===a?p[m.a.Cancelled]++:p[m.a.Pending]++});const t=p[m.a.Failed]>0,a=Object(h.c)(e)===m.a.Cancelled,r=c>=u?c-u-d:c;t||a?p[m.a.Cancelled]+=r:p[m.a.Pending]+=r}else"False"===(null===(i=null===(o=null===(s=null==e?void 0:e.status)||void 0===s?void 0:s.conditions)||void 0===o?void 0:o[0])||void 0===i?void 0:i.status)||(null==e?void 0:e.spec.status)===h.a.PipelineRunCancelled?p[m.a.Cancelled]=c:(null==e?void 0:e.spec.status)===h.a.PipelineRunPending?p[m.a.Pending]+=c:p[m.a.PipelineNotStarted]++;return p},y=e=>e===p.ClusterTaskModel.kind?p.ClusterTaskModel:e===p.TaskModel.kind||void 0===e?p.TaskModel:null,O=e=>(y(e)||p.TaskModel).kind,_=e=>e===p.ClusterTriggerBindingModel.kind?p.ClusterTriggerBindingModel:e===p.TriggerBindingModel.kind||void 0===e?p.TriggerBindingModel:null,k=e=>(_(e)||p.TriggerBindingModel).kind,T=e=>{const t=y(e);return Object(u.Hb)(t)},R=(e,t)=>{const n=t&&E(e,void 0,t);return null==n?void 0:n.Running},j=(e,t)=>!(e&&(R(e,t)>0||Object(h.c)(e)===m.a.Running)),S=(e,t)=>!(e&&((null==t?void 0:t.Running)>0||Object(h.c)(e)===m.a.Running)),N=(e,t)=>!(e&&R(e,t)>0&&Object(h.c)(e)!==m.a.Cancelled),P=(e,t)=>!(e&&(null==t?void 0:t.Running)>0&&Object(h.c)(e)!==m.a.Cancelled)},5636:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var a=n(22),r=n(0),s=n(7),o=n(14),i=n(5),c=n(869),l=n(5590),u=n(5598);const d=Object(s.withTranslation)()(class extends r.Component{constructor(){super(...arguments),this.state={secretTypeAbstraction:c.c.generic}}componentDidUpdate(){if(!a.a(this.props.obj.data)){const e=Object(l.e)(this.props.obj.data);this.state.secretTypeAbstraction!==e&&this.setState({secretTypeAbstraction:e})}}render(){const{obj:e,fixedKeys:t}=this.props,{secretTypeAbstraction:n}=this.state;if(!n)return r.createElement(i.S,null);const a=null==t?void 0:t.reduce((t,n)=>{var a;return Object.assign(Object.assign({},t),{[n]:(null===(a=e.data)||void 0===a?void 0:a[n])||""})},{});return r.createElement(i.wb,Object.assign({},e),r.createElement(u.a,Object.assign({},this.props,{secretTypeAbstraction:n,obj:e.data,fixed:a})))}}),p=({kind:e})=>{const t=Object(o.useParams)(),{t:n}=Object(s.useTranslation)();return r.createElement(i.C,{resources:[{kind:e,name:t.name,namespace:t.ns,isList:!1,prop:"obj"}]},r.createElement(d,{fixedKeys:["kind","metadata"],saveButtonText:n("public~Save")}))}},5637:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n(14),s=n(5598);const o=()=>{const e=Object(r.useParams)(),t=e.type;return a.createElement(s.a,{fixed:{metadata:{namespace:e.ns}},secretTypeAbstraction:t,isCreate:!0})}},5638:function(e,t,n){},5639:function(e,t,n){},5640:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.Reachable=0]="Reachable",e[e.Unreachable=1]="Unreachable",e[e.RateLimitExceeded=2]="RateLimitExceeded",e[e.GitTypeNotDetected=3]="GitTypeNotDetected",e[e.InvalidGitTypeSelected=4]="InvalidGitTypeSelected",e[e.PrivateRepo=5]="PrivateRepo",e[e.ResourceNotFound=6]="ResourceNotFound",e[e.GiteaRepoUnreachable=7]="GiteaRepoUnreachable"}(a||(a={}))},5641:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));const a={name:"Maven",type:"java",language:"java",expectedRegexps:RegExp(["pom.xml"].join("|")),expectedFiles:["pom.xml"]},r={name:"Gradle",type:"java",language:"java",expectedRegexps:RegExp([".*gradle.*"].join("|")),expectedFiles:["build.gradle","gradlew","gradlew.bat"]},s={name:"Golang",type:"golang",language:"go",expectedRegexps:RegExp([".*.\\.go","Gopkg.toml","glide.yaml"].join("|")),expectedFiles:["main.go","Gopkg.toml","glide.yaml"]},o={name:"Ruby",type:"ruby",language:"ruby",expectedRegexps:RegExp(["Gemfile","Rakefile","config.ru"].join("|")),expectedFiles:["Gemfile","Rakefile","config.ru"]},i={name:"NodeJS",type:"nodejs",language:"javascript",expectedRegexps:RegExp(["app.json","package.json","gulpfile.js","Gruntfile.js"].join("|")),expectedFiles:["app.json","package.json","gulpfile.js","Gruntfile.js"]},c={name:"Modern Web App",type:"modern-webapp",language:"javascript",expectedRegexps:RegExp(["app.json","package.json","gulpfile.js","Gruntfile.js"].join("|")),expectedFiles:["app.json","package.json","gulpfile.js","Gruntfile.js"]},l={name:"PHP",type:"php",language:"php",expectedRegexps:RegExp(["index.php","composer.json"].join("|")),expectedFiles:["index.php","composer.json"]},u={name:"Python",type:"python",language:"python",expectedRegexps:RegExp(["requirements.txt","setup.py"].join("|")),expectedFiles:["requirements.txt","setup.py"]},d={name:"Perl",type:"perl",language:"perl",expectedRegexps:RegExp(["index.pl","cpanfile"].join("|")),expectedFiles:["index.pl","cpanfile"]},p=[{name:"Dotnet",type:"dotnet",language:"C#",expectedRegexps:RegExp(["project.json",".*.csproj"].join("|")),expectedFiles:["project.json","app.csproj"]},s,r,a,i,c,d,l,u,o],m=["react","angular","@angular/core","vue","knockout","knockback"]},5642:function(e,t,n){"use strict";n(5612),n(5613),n(5614),n(5615);var a=n(5644);n.d(t,"a",(function(){return a.a}));n(5592)},5643:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var a=n(5587);function r(e){return a.a.map(t=>{const n=e.filter(e=>t.expectedRegexps.test(e));return{buildType:t.type,language:t.language,files:n}}).filter(e=>e.files.length>0).sort((e,t)=>t.files.length-e.files.length)}function s(e){try{const t=JSON.parse(e);return a.f.some(e=>e in t.dependencies)}catch(e){return!1}}},5644:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(4359),r=n(5587),s=n(5613),o=n(5615),i=n(5612),c=n(5614);function l(e,t,n,l,u,d,p){let m,h;switch(null==u?void 0:u.type){case a.SecretType.basicAuth:m=r.e.BASIC_AUTH,h=u.data;break;case a.SecretType.sshAuth:m=r.e.SSH,h=u["ssh-privatekey"];break;default:m=r.e.NO_AUTH}const b={url:e,ref:n,contextDir:l,secretType:m,secretContent:h,devfilePath:d,dockerfilePath:p};switch(t){case r.b.GITHUB:return new i.a(b);case r.b.BITBUCKET:return new s.a(b);case r.b.GITLAB:return new c.a(b);case r.b.GITEA:return new o.a(b);default:return null}}},5645:function(e,t,n){"use strict";n(5616);var a=n(5646);n.d(t,"a",(function(){return a.a}));n(5633)},5646:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(5709);class r{constructor(e){this.content=e,this.parsedCommands=this.parse()}parse(){let e=[];try{e=Object(a.parse)(this.content)}catch(e){}return e}getContainerPort(){const e=this.parsedCommands.filter(e=>"EXPOSE"===e.name);if(e.length>0){const t=e[0];if(t.args.length>0)return Number(t.args[0])}return null}}},5647:function(e,t,n){"use strict";n.d(t,"e",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"h",(function(){return v})),n.d(t,"a",(function(){return E})),n.d(t,"f",(function(){return y})),n.d(t,"g",(function(){return O})),n.d(t,"j",(function(){return _})),n.d(t,"k",(function(){return k})),n.d(t,"b",(function(){return T})),n.d(t,"i",(function(){return R})),n.d(t,"d",(function(){return j}));var a=n(29),r=n(16),s=n(57),o=n(117),i=n(367),c=n(1401),l=n(10),u=n(8),d=n(5634),p=n(15),m=n(2221),h=n(1400),b=n(5589);const f=(e,t)=>{var n,a,r,s,o,i,c,l;if(!(null==e?void 0:e.builds)&&!(null==e?void 0:e.buildConfigs)&&!(null==e?void 0:e.pipelines))return null;const u=e=>{var t,n,a;return null!==(a=null===(n=null===(t=e.spec)||void 0===t?void 0:t.source)||void 0===n?void 0:n.contextDir)&&void 0!==a?a:null},d=null===(a=null===(n=null==e?void 0:e.builds)||void 0===n?void 0:n.data)||void 0===a?void 0:a.find(e=>e.metadata.name===t);if(d){return u(d)}const p=null===(s=null===(r=null==e?void 0:e.buildConfigs)||void 0===r?void 0:r.data)||void 0===s?void 0:s.find(e=>e.metadata.name===t);if(p){return u(p)}const m=null===(i=null===(o=null==e?void 0:e.pipelines)||void 0===o?void 0:o.data)||void 0===i?void 0:i.find(e=>e.metadata.name===t);if(m){const e=null===(l=null===(c=null==m?void 0:m.spec)||void 0===c?void 0:c.params)||void 0===l?void 0:l.find(e=>"PATH_CONTEXT"===e.name);if(e)return e.default}return null},g=(e,t,n,a,s=!1,o)=>{const{monitoringAlerts:i=[]}=t,l=r.a(e,"metadata.uid"),m=r.a(e,"metadata.labels",{}),h=r.a(e,"metadata.annotations",{}),b=r.a(e,"metadata.name",""),g=f(o,b),v=Object(c.d)("icon-"+m["app.openshift.io/runtime"])||Object(c.d)("icon-"+m["app.kubernetes.io/name"]);return{id:l,name:(null==e?void 0:e.metadata.name)||m["app.kubernetes.io/instance"],type:n,resource:e,resources:Object.assign(Object.assign({},t),{isOperatorBackedService:s}),data:{monitoringAlerts:i,kind:Object(u.Db)(e),editURL:h["app.openshift.io/edit-url"],vcsURI:h["app.openshift.io/vcs-uri"],vcsRef:h["app.openshift.io/vcs-ref"],contextDir:g,builderImage:v||a,isKnativeResource:!(!n||n!==d.i&&n!==d.n&&n!==d.j)||Object(p.Rd)(e,"metadata.labels")}}},v=(e,t,n,a,r,s,o)=>{var i;const c=null==e?void 0:e.metadata.uid,l=null==e?void 0:e.metadata.name,d=null===(i=null==e?void 0:e.metadata.labels)||void 0===i?void 0:i["app.openshift.io/instance"],p=s||Object(u.Db)(e);return Object.assign(Object.assign({id:c,type:t,label:d||l,shape:o,resource:e,resourceKind:p,data:n},r&&r.length&&{children:r}),a||{})},E={width:m.m,height:m.k,group:!1,visible:!0,style:{padding:m.l}},y=(e,t)=>{const n=r.a(e,"metadata.annotations"),i=[];return s.a(Object(h.d)(n),n=>{const s=r.a(o.a(t,e=>{var t,a,r,s,o;let i;if("string"==typeof n)return i=null!==(r=null===(a=null===(t=e.metadata)||void 0===t?void 0:t.labels)||void 0===a?void 0:a["app.kubernetes.io/instance"])&&void 0!==r?r:null===(s=e.metadata)||void 0===s?void 0:s.name,i===n;i=null===(o=e.metadata)||void 0===o?void 0:o.name;const{apiVersion:c,kind:l,name:u}=n,{kind:d,apiVersion:p}=e;let m=i===u&&d===l;return p&&(m=m&&p===c),m}),["metadata","uid"]),c=r.a(e,["metadata","uid"]);s&&i.push({id:`${c}_${s}`,type:m.v,label:a.a.t("topology~Visual connector"),source:c,target:s})}),i},O=e=>{const t=r.a(e,["metadata","labels","app.kubernetes.io/part-of"]);return t?{id:"group:"+t,type:m.u,group:!0,label:t,children:[r.a(e,["metadata","uid"])],width:m.h,height:m.f,data:{},visible:!0,collapsed:!1,style:{padding:m.g}}:null},_=(e,t)=>{var n;if(!e)return;e.children=null===(n=e.children)||void 0===n?void 0:n.filter(e=>!(null==t?void 0:t.find(t=>{var n;return null===(n=t.children)||void 0===n?void 0:n.includes(e)})));const a=t.find(t=>t.group&&t.id===e.id);a?e.children.forEach(t=>{a.children.includes(t)||a.children.push(t),((e,t)=>{var n,a,r,s;((null===(n=t.data)||void 0===n?void 0:n.groupResources)||(null===(a=e.data)||void 0===a?void 0:a.groupResources))&&((null===(r=t.data)||void 0===r?void 0:r.groupResources)||(t.data.groupResources=[]),(null===(s=null==e?void 0:e.data)||void 0===s?void 0:s.groupResources)&&e.data.groupResources.forEach(e=>{t.data.groupResources.includes(e)||t.data.groupResources.push(e)}))})(e,a)}):t.push(e)},k=(e,t)=>{e&&e.length&&e.forEach(e=>{_(e,t)})},T=(e,t,n=[])=>{(null==e?void 0:e.edges)&&t.edges.push(...e.edges),(null==e?void 0:e.nodes)&&(t.nodes.push(...e.nodes.filter(e=>!e.group&&!t.nodes.find(a=>{if(e.id===a.id)return!0;const{resource:r}=e;return!r||!!n.find(e=>e(r,t))}))),k(e.nodes.filter(e=>e.group),t.nodes))},R=(e,t,n=b.a)=>i.a(n.map(n=>e[n]?e[n].data.map(e=>{const a=e.kind||t[n];let r,s=a;return a&&Object(u.eb)(a)&&(s=Object(u.tb)(a),r=Object(u.o)(a)),Object.assign({kind:s,apiVersion:r},e)}):[])),j=e=>({deploymentConfigs:{isList:!0,kind:"DeploymentConfig",namespace:e,optional:!0},deployments:{isList:!0,kind:"Deployment",namespace:e,optional:!0},daemonSets:{isList:!0,kind:"DaemonSet",namespace:e,optional:!0},pods:{isList:!0,kind:"Pod",namespace:e,optional:!0},jobs:{isList:!0,kind:"Job",namespace:e,optional:!0},cronJobs:{isList:!0,kind:"CronJob",namespace:e,optional:!0},statefulSets:{isList:!0,kind:"StatefulSet",namespace:e,optional:!0},services:{isList:!0,kind:"Service",namespace:e,optional:!0},hpas:{isList:!0,kind:l.HorizontalPodAutoscalerModel.kind,namespace:e,optional:!0},buildConfigs:{isList:!0,kind:l.BuildConfigModel.kind,namespace:e,optional:!0}})},5648:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"j",(function(){return m}));var a,r,s,o=n(5591);!function(e){e.REPOSITORY="Repository",e.URL_REPO="RepoUrl",e.URL_ORG="RepoOrg",e.SHA="sha",e.EVENT_TYPE="EventType"}(a||(a={})),function(e){e.SHA_MESSAGE="sha_message",e.SHA_URL="sha_url",e.REPO_URL="repo_url",e.BRANCH="Branch"}(r||(r={})),function(e){e.golang="go",e.nodejs="nodejs",e.python="python",e.java="java"}(s||(s={}));const i={[a.REPOSITORY]:"pipelinesascode.tekton.dev/repository",[a.URL_REPO]:"pipelinesascode.tekton.dev/url-repository",[a.URL_ORG]:"pipelinesascode.tekton.dev/url-org",[a.SHA]:"pipelinesascode.tekton.dev/sha",[a.EVENT_TYPE]:"pipelinesascode.tekton.dev/event-type"},c={[r.SHA_MESSAGE]:"pipelinesascode.tekton.dev/sha-title",[r.SHA_URL]:"pipelinesascode.tekton.dev/sha-url",[r.REPO_URL]:"pipelinesascode.tekton.dev/repo-url",[r.BRANCH]:"pipelinesascode.tekton.dev/branch"};var l;!function(e){e.GITHUB="github",e.WEBHOOK="webhook"}(l||(l={}));const u={gitUrl:"",githubAppAvailable:!1,gitProvider:o.b.INVALID,name:"",method:"github",showOverviewPage:!1,yamlData:"",webhook:{token:"",method:"token",secret:"",url:"",user:"",autoAttach:!1}},d={[o.b.GITHUB]:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token",[o.b.GITLAB]:"https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html",[o.b.BITBUCKET]:"https://support.atlassian.com/bitbucket-cloud/docs/app-passwords/"},p={[o.b.GITHUB]:"https://docs.github.com/en/developers/webhooks-and-events/webhooks/creating-webhooks",[o.b.GITLAB]:"https://docs.gitlab.com/ee/user/project/integrations/webhooks.html#configure-a-webhook-in-gitlab",[o.b.BITBUCKET]:"https://support.atlassian.com/bitbucket-cloud/docs/manage-webhooks/"},m=["github.com","bitbucket.org","gitlab.com"]},5649:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return h}));var a=n(2338),r=n(689),s=n(5591),o=n(5653),i=n(15),c=n(5655),l=n(5621);const u=e=>r.object().shape({name:Object(i.Zd)(e),project:l.l,application:l.a,image:Object(l.h)(e),git:Object(l.g)(e),docker:Object(l.e)(e),devfile:Object(l.d)(e),deployment:Object(l.c)(e),serverless:Object(l.o)(e),route:Object(l.n)(e),limits:Object(l.k)(e),build:l.b,resources:l.m,healthChecks:Object(c.a)(e),pac:Object(o.e)(e),pipeline:l.i}),d=(e,t)=>e.startsWith(`https://${t}/`)||e.startsWith(`https://www.${t}/`)||e.includes(`@${t}:`),p=e=>l.f.test(e)?d(e,"github.com")?s.b.GITHUB:d(e,"bitbucket.org")?s.b.BITBUCKET:d(e,"gitlab.com")?s.b.GITLAB:d(e,"gitea.com")||e.includes("gitea")?s.b.GITEA:s.b.UNSURE:s.b.INVALID,m=e=>{if(i.Yd.test(e))return e;const t=a.a(e);return e.match(/^\d/)||t.match(/^\d/)?"ocp-"+t:t},h=e=>{if(!l.f.test(e))return;const t=e.replace(/\/$/,"").split("/").pop();return m(t)}},5650:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"k",(function(){return f})),n.d(t,"f",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return E})),n.d(t,"h",(function(){return y})),n.d(t,"j",(function(){return O})),n.d(t,"g",(function(){return _})),n.d(t,"b",(function(){return k})),n.d(t,"i",(function(){return T}));var a,r,s=n(321),o=n(29),i=n(550),c=n(50),l=n(16),u=n(384),d=n(4427),p=n(461),m=n(5),h=n(158),b=n(5588);!function(e){e.NUMBER_OF_PIPELINE_RUNS="NUMBER_OF_PIPELINE_RUNS",e.PIPELINE_RUN_DURATION="PIPELINE_RUN_DURATION",e.PIPELINE_RUN_TASK_RUN_DURATION="PIPELINE_RUN_TASK_RUN_DURATION",e.PIPELINE_SUCCESS_RATIO="PIPELINE_SUCCESS_RATIO"}(a||(a={})),function(e){e.TEKTON="tekton",e.TEKTON_PIPELINES_CONTROLLER="tekton_pipelines_controller"}(r||(r={}));const f=(e=r.TEKTON_PIPELINES_CONTROLLER)=>({[b.n.PIPELINE_TASK_LEVEL]:{[a.PIPELINE_SUCCESS_RATIO]:i.a(e+'_pipelinerun_duration_seconds_count{pipeline="<%= name %>",namespace="<%= namespace %>"}'),[a.NUMBER_OF_PIPELINE_RUNS]:i.a(`sum(${e}_pipelinerun_duration_seconds_count{pipeline="<%= name %>",namespace="<%= namespace %>"})`)},[b.n.PIPELINERUN_TASKRUN_LEVEL]:{[a.NUMBER_OF_PIPELINE_RUNS]:i.a(`sum(count by (pipelinerun) (${e}_pipelinerun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"}))`),[a.PIPELINE_RUN_TASK_RUN_DURATION]:i.a(`sum(${e}_pipelinerun_taskrun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"})  by (pipelinerun, task)`),[a.PIPELINE_RUN_DURATION]:i.a(`sum(${e}_pipelinerun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"})  by (pipelinerun)`),[a.PIPELINE_SUCCESS_RATIO]:i.a(`count(sort_desc(${e}_pipelinerun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"})) by(status)`)},[b.n.UNSIMPLIFIED_METRICS_LEVEL]:{[a.NUMBER_OF_PIPELINE_RUNS]:i.a(`sum(count by (pipelinerun) (${e}_pipelinerun_duration_seconds_count{pipeline="<%= name %>",exported_namespace="<%= namespace %>"}))`),[a.PIPELINE_RUN_TASK_RUN_DURATION]:i.a(`sum(${e}_pipelinerun_taskrun_duration_seconds_sum{pipeline="<%= name %>",exported_namespace="<%= namespace %>"})  by (pipelinerun, task)`),[a.PIPELINE_RUN_DURATION]:i.a(`sum(${e}_pipelinerun_duration_seconds_sum{pipeline="<%= name %>",exported_namespace="<%= namespace %>"})  by (pipelinerun)`),[a.PIPELINE_SUCCESS_RATIO]:i.a(`count(sort_desc(${e}_pipelinerun_duration_seconds_count{pipeline="<%= name %>",exported_namespace="<%= namespace %>"})) by(status)`)}}),g=e=>(e<0?"-":"")+(e=>0===e||e>=.001&&e<1e23?Object(m.cc)(e).string:e.toExponential(1))(Math.abs(e)),v=e=>h.b.format(e),E=(e,t,n)=>{const{metric:a,values:r}=e,s=c.a(r,e=>{const t=Number(e[1]);return{x:new Date(new Date(1e3*e[0]).setHours(0,0,0,0)),y:Number.isNaN(t)?null:t,metric:a}}),o=Number(l.a(s,"[0].x")),i=Number(l.a(u.a(s),"x")),p=n/t;return d.a(o,i,p).forEach((e,t)=>{const n=new Date(e);l.a(s,[t,"x"])>n&&s.splice(t,0,{x:n,y:null,metric:a})}),s},y=(e,t,n)=>{var a;const r=(null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.result)||[];return null==r?void 0:r.map(e=>{var a;return null===(a=null==e?void 0:e.values)||void 0===a?void 0:a.map(([a,r])=>{var s,o;return{x:null!==(s=null==t?void 0:t(e))&&void 0!==s?s:new Date(1e3*a),y:null!==(o=null==n?void 0:n(r))&&void 0!==o?o:parseFloat(r),metric:null==e?void 0:e.metric,time:a}})})},O=e=>{const t=[];if(!e)return t;const n=Object(s.b)("1d"),a=Math.round(e/n),r=new Date(Date.now());for(r.setHours(0,0,0,0);t.length-1<a;)t.push(r.getTime()),r.setDate(r.getDate()-1);return t.slice(0,a)},_=(e,t)=>{if(0===e)return o.a.t("pipelines-plugin~less than a sec");let n=Math.round(e),a=0,r=0,s="";return n>=60&&(a=Math.floor(n/60),n%=60),a>=60&&(r=Math.floor(a/60),a%=60),r>0&&(s+=t?o.a.t("pipelines-plugin~{{count}} hour",{count:r}):o.a.t("pipelines-plugin~{{hr}}h",{hr:r}),s+=" "),a>0&&(s+=t?o.a.t("pipelines-plugin~{{count}} minute",{count:a}):o.a.t("pipelines-plugin~{{min}}m",{min:a}),s+=" "),n>0&&(s+=t?o.a.t("pipelines-plugin~{{count}} second",{count:n}):o.a.t("pipelines-plugin~{{sec}}s",{sec:n})),s.trim()},k=()=>({"1d":o.a.t("pipelines-plugin~1 day"),"3d":o.a.t("pipelines-plugin~3 days"),"1w":o.a.t("pipelines-plugin~1 week"),"2w":o.a.t("pipelines-plugin~2 weeks"),"3w":o.a.t("pipelines-plugin~3 weeks"),"4w":o.a.t("pipelines-plugin~4 weeks")}),T=e=>{let t=0;return p.a(e,"x").map(e=>{const n=e.y-t;return t+=e.y,Object.assign(Object.assign({},e),{y:n})})}},5651:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return d}));var a=n(8),r=n(1402);const s=e=>{const[t,n]=null==e?void 0:e.match(/^[0-9]+|[a-zA-Z]*/g);return{autoscalewindow:Number(t)||"",autoscalewindowUnit:n||"s",defaultAutoscalewindowUnit:n||"s"}},o=/ *\([^)]*\) */g,i=e=>e.replace(o,""),c=(e,t)=>{var n;if(!(null===(n=e.spec)||void 0===n?void 0:n.ref))return null;const{apiVersion:s,kind:o,name:i}=e.spec.ref;return Object(a.n)(r.l)===s&&o===r.l.kind&&i!==t?i:null},l=(e,t)=>[...new Set(null==e?void 0:e.filter(e=>!((null==t?void 0:t.length)>0)||(null==t?void 0:t.includes(i(e)))).map(e=>i(e)))],u=e=>e.some(e=>new RegExp(o).test(e)),d=(e,t=[],n)=>e.filter(e=>u([e])).map(e=>{var a,r;const s=null==t?void 0:t.find(t=>t.metadata.name===i(e));return s&&(null===(r=null===(a=s.spec)||void 0===a?void 0:a.ref)||void 0===r?void 0:r.name)!==n?s:null}).filter(e=>!!e)},5652:function(e,t,n){"use strict";var a=n(5619),r=n(8),s=n(5663);class o extends s.a{constructor(){super(),this.resource=void 0,this.resourceKind=void 0,Object(a.p)(this,{resource:a.q.ref,resourceKind:a.q})}getResource(){return this.resource}setResource(e){this.resource=e}getResourceKind(){return this.resourceKind||Object(r.Db)(this.resource)}setResourceKind(e){this.resourceKind=e}setModel(e){super.setModel(e),"resource"in e&&(this.resource=e.resource),"resourceKind"in e&&(this.resourceKind=e.resourceKind)}}t.a=o},5653:function(e,t,n){"use strict";n.d(t,"g",(function(){return O})),n.d(t,"e",(function(){return k})),n.d(t,"c",(function(){return R})),n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return S})),n.d(t,"f",(function(){return N})),n.d(t,"d",(function(){return P}));var a=n(5596),r=n(320),s=n(2338),o=n(689),i=n(5621),c=n(5624),l=n(77),u=n(5591),d=n(4359),p=n(10),m=n(15),h=n(5586),b=n(5620),f=n(5656),g=n(5588),v=n(5648),E=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((a=a.apply(e,t||[])).next())}))};const y={dryRun:"All"},O=e=>o.object().shape({name:o.string().matches(m.Yd,{message:e("pipelines-plugin~Name must consist of lower-case letters, numbers and hyphens. It must start with a letter and end with a letter or number."),excludeEmptyString:!0}).required(e("pipelines-plugin~Required")),gitUrl:o.string().matches(i.f,e("pipelines-plugin~Invalid Git URL.")).required(e("pipelines-plugin~Required")),accessToken:o.string(),webhook:o.object().when("gitProvider",{is:u.b.BITBUCKET,then:o.object().shape({user:o.string().matches(c.a,{message:e("pipelines-plugin~Name must consist of lower-case letters, numbers, underscores and hyphens. It must start with a letter and end with a letter or number."),excludeEmptyString:!0}).required(e("pipelines-plugin~Required"))})}).when(["method","gitProvider","gitUrl"],{is:(e,t,n)=>n&&!(t===u.b.GITHUB&&e===u.b.GITHUB),then:o.object().shape({token:o.string().test("oneOfRequired","Required",(function(){return this.parent.token||this.parent.secretRef})),secretRef:o.string().test("oneOfRequired","Required",(function(){return this.parent.token||this.parent.secretRef}))})})}),_=e=>o.object().shape({webhook:o.object().when("gitProvider",{is:u.b.BITBUCKET,then:o.object().shape({user:o.string().matches(m.Yd,{message:e("pipelines-plugin~Name must consist of lower-case letters, numbers and hyphens. It must start with a letter and end with a letter or number."),excludeEmptyString:!0}).required(e("pipelines-plugin~Required"))})}).when(["method","gitProvider","gitUrl"],{is:(e,t,n)=>n&&t&&!(t===u.b.GITHUB&&e===u.b.GITHUB),then:o.object().shape({token:o.string().test("oneOfRequired","Required",(function(){return this.parent.token||this.parent.secretRef})),secretRef:o.string().test("oneOfRequired","Required",(function(){return this.parent.token||this.parent.secretRef}))})})}),k=e=>o.object().shape({repository:o.object().when(["pipelineType","pipelineEnabled"],{is:(e,t)=>e===b.a.PAC&&t,then:_(e)})}),T=(e,t)=>e.startsWith(`https://${t}/`)||e.startsWith(`https://www.${t}/`)||e.includes(`@${t}:`),R=e=>i.f.test(e)?T(e,"github.com")?u.b.GITHUB:T(e,"bitbucket.org")?u.b.BITBUCKET:T(e,"gitlab.com")?u.b.GITLAB:u.b.UNSURE:u.b.INVALID,j=(e,t,n={},s)=>E(void 0,void 0,void 0,(function*(){var o,i,c;const{name:m,gitUrl:b,webhook:{secretObj:f,method:g,token:O,secret:_,user:k}}=e,T=r.Base64.encode(_),j=R(b);let S;O&&"token"===g?S=yield((e,t,n,a,s,o,i)=>E(void 0,void 0,void 0,(function*(){const c={apiVersion:p.SecretModel.apiVersion,kind:p.SecretModel.kind,metadata:{generateName:e+"-token-",namespace:a},type:d.SecretType.opaque,stringData:Object.assign(Object.assign({"provider.token":n},o&&{"webhook.secret":o}),s===u.b.BITBUCKET&&{"webhook.auth":r.Base64.encode(`${t}:${n}`)})};return Object(l.g)({model:p.SecretModel,data:c,ns:a,queryParams:i?y:{}})})))(m,k,O,t,j,_,s):"secret"===g&&f&&(null===(o=null==f?void 0:f.data)||void 0===o?void 0:o["webhook.secret"])!==T&&(yield Object(l.p)({model:p.SecretModel,resource:f,data:[{op:"replace",path:"/data/webhook.secret",value:r.Base64.encode(_)}]}));const N=a(b).source,P=S||f,C={kind:h.RepositoryModel.kind,apiVersion:"pipelinesascode.tekton.dev/v1alpha1",metadata:Object.assign({name:m,namespace:t},n||{}),spec:Object.assign({url:b},P||"github.com"!==N?{git_provider:Object.assign(Object.assign(Object.assign({},v.j.includes(N)?{}:{url:N}),"bitbucket.org"===N?{user:k}:{}),P?{secret:{name:null===(i=null==P?void 0:P.metadata)||void 0===i?void 0:i.name,key:"provider.token"},webhook_secret:{name:null===(c=null==P?void 0:P.metadata)||void 0===c?void 0:c.name,key:"webhook.secret"}}:{})}:{})};return yield Object(l.g)({model:h.RepositoryModel,data:C,ns:t,queryParams:s?y:{}})})),S=(e,t,n)=>E(void 0,void 0,void 0,(function*(){var a,s,o;const{gitUrl:i,webhook:{method:c,token:l,secret:d,url:p,secretObj:m,user:h}}=e,b=R(i),f=Object(u.e)(i,b);let g,v=!0;n&&"false"===(null===(a=null==t?void 0:t.data)||void 0===a?void 0:a["webhook-ssl-verification"])&&(v=!1),g=b===u.b.BITBUCKET?"token"===c?r.Base64.encode(`${h}:${l}`):r.Base64.decode(null===(s=null==m?void 0:m.data)||void 0===s?void 0:s["webhook.auth"]):"token"===c?l:r.Base64.decode(null===(o=null==m?void 0:m.data)||void 0===o?void 0:o["provider.token"]);return yield f.createRepoWebhook(g,p,v,d)})),N=e=>{if(!i.f.test(e))return;const t=e.replace(/\/$/,"").split("/").pop();return n=t,m.Yd.test(n)?"git-"+n:"git-"+s.a(n);var n},P=(e,t)=>E(void 0,void 0,void 0,(function*(){var n;let a;try{const[t]=yield Object(l.n)({model:p.ConfigMapModel,queryParams:{ns:g.g,labelSelector:{matchLabels:{"pipelinesascode.openshift.io/runtime":v.g[e]||e}}}});a=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.template}catch(e){console.log("failed to fetch runtime template:",e)}return null!=a?a:yield(e=>E(void 0,void 0,void 0,(function*(){var t;let n=(e=>`apiVersion: tekton.dev/v1beta1\nkind: PipelineRun\nmetadata:\n  name: ${null!=e?e:"pull_request"}\n  annotations:\n    # The event we are targeting as seen from the webhook payload\n    # this can be an array too, i.e: [pull_request, push]\n    pipelinesascode.tekton.dev/on-event: "[pull_request, push]"\n\n    # The branch or tag we are targeting (ie: main, refs/tags/*)\n    pipelinesascode.tekton.dev/on-target-branch: "main"\n\n    # Fetch the git-clone task from hub, we are able to reference later on it\n    # with taskRef and it will automatically be embedded into our pipeline.\n    pipelinesascode.tekton.dev/task: "git-clone"\n\n    # You can add more tasks in here to reuse, browse the one you like from here\n    # https://hub.tekton.dev/\n    # example:\n    # pipelinesascode.tekton.dev/task-2: "[maven, buildah]"\n\n    # How many runs we want to keep attached to this event\n    pipelinesascode.tekton.dev/max-keep-runs: "5"\nspec:\n  params:\n    # The variable with brackets are special to Pipelines as Code\n    # They will automatically be expanded with the events from Github.\n    - name: repo_url\n      value: "{{ repo_url }}"\n    - name: revision\n      value: "{{ revision }}"\n  pipelineSpec:\n    params:\n      - name: repo_url\n      - name: revision\n    workspaces:\n      - name: source\n      - name: basic-auth\n    tasks:\n      - name: fetch-repository\n        taskRef:\n          name: git-clone\n        workspaces:\n          - name: output\n            workspace: source\n          - name: basic-auth\n            workspace: basic-auth\n        params:\n          - name: url\n            value: $(params.repo_url)\n          - name: revision\n            value: $(params.revision)\n\n      # Customize this task if you like, or just do a taskRef\n      # to one of the hub task.\n      - name: noop-task\n        runAfter:\n          - fetch-repository\n        workspaces:\n          - name: source\n            workspace: source\n        taskSpec:\n          workspaces:\n            - name: source\n          steps:\n            - name: noop-task\n              image: registry.access.redhat.com/ubi9/ubi-micro\n              workingDir: $(workspaces.source.path)\n              script: |\n                exit 0\n  workspaces:\n  - name: source\n    volumeClaimTemplate:\n      spec:\n        accessModes:\n          - ReadWriteOnce\n        resources:\n          requests:\n            storage: 1Gi\n  # This workspace will inject secret to help the git-clone task to be able to\n  # checkout the private repositories\n  - name: basic-auth\n    secret:\n      secretName: "{{ git_auth_secret }}"`)(e);try{const e=yield Object(l.j)({model:p.ConfigMapModel,ns:g.g,name:f.h});(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.template)&&(n=e.data.template)}catch(e){console.log("failed to fetch default template:",e)}return n})))(t)}))},5655:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(689);const r=/^\/.*$/,s=e=>a.object().shape({containerName:a.string(),showForm:a.boolean(),enabled:a.boolean(),modified:a.boolean(),data:a.object().when("showForm",{is:!0,then:a.object().shape({periodSeconds:a.number().integer(e("devconsole~Value must be an integer.")).min(1,e("devconsole~Period must be greater than or equal to 1.")).max(2147483647,e("devconsole~Value is larger than maximum value allowed.")),initialDelaySeconds:a.number().integer(e("devconsole~Value must be an integer.")).min(0,e("devconsole~Initial delay must be greater than or equal to 0.")).max(2147483647,e("devconsole~Value is larger than maximum value allowed.")),failureThreshold:a.number().integer(e("devconsole~Value must be an integer.")).min(1,e("devconsole~Failure threshold must be greater than or equal to 1.")),timeoutSeconds:a.number().integer(e("devconsole~Value must be an integer.")).min(1,e("devconsole~Timeout must be greater than or equal to 1.")).max(2147483647,e("devconsole~Value is larger than maximum value allowed.")),successThreshold:a.number().integer(e("devconsole~Value must be an integer.")).min(1,e("devconsole~Success threshold must be greater than or equal to 1.")).max(2147483647,e("devconsole~Value is larger than maximum value allowed.")),requestType:a.string(),httpGet:a.object().when("requestType",{is:"httpGet",then:a.object({path:a.string().matches(r,{message:e("devconsole~Path must start with /."),excludeEmptyString:!0}),port:a.number().required(e("devconsole~Required"))})}),tcpSocket:a.object().when("requestType",{is:"tcpSocket",then:a.object({port:a.number().required(e("devconsole~Required"))})}),exec:a.object().when("requestType",{is:"command",then:a.object({command:a.array().of(a.string().required(e("devconsole~Required")))})})})})}),o=e=>a.object().shape({readinessProbe:s(e),livenessProbe:s(e),startupProbe:s(e)})},5656:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"h",(function(){return u}));const a="https://github.com/settings/apps/new",r="https://docs.github.com/en/developers/apps/getting-started-with-apps/about-apps#about-github-apps",s="https://api.github.com/app-manifests",o="pipelines-as-code-interceptor",i="pipelines-as-code-secret",c="pipelines-ci-clustername",l="pipelines-as-code-info",u="pipelines-as-code-pipelinerun-generic"},5657:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return i}));const a=e=>"Topology/ComponentFactory"===e.type,r=e=>"Topology/DataModelFactory"===e.type,s=e=>"Topology/CreateConnector"===e.type,o=e=>"Topology/DisplayFilters"===e.type,i=e=>"Topology/Decorator"===e.type},5658:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(0);const r=a.createContext({})},5659:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var a=n(2221);const r="operator-backed-service",s=a.h,o=a.f,i=a.g},5661:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var a=n(447),r=n(1941),s=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((a=a.apply(e,t||[])).next())}))};const o=e=>s(void 0,void 0,void 0,(function*(){var t,n,s;if(!(yield e.isFuncYamlPresent()))return{values:{}};const o=yield e.getFuncYamlContent();try{const e=a.a(o)?Object(r.c)(o):o,i=null===(t=null==e?void 0:e.build)||void 0===t?void 0:t.builder,c=null===(n=null==e?void 0:e.build)||void 0===n?void 0:n.buildEnvs,l=null==e?void 0:e.runtime;return{values:{builder:i,runtime:l,builderEnvs:c,runtimeEnvs:null===(s=null==e?void 0:e.run)||void 0===s?void 0:s.envs}}}catch(e){return{values:{}}}})),i=(e,t)=>s(void 0,void 0,void 0,(function*(){var n,a;if((yield t.isFuncYamlPresent())&&e){const e=yield t.getFuncYamlContent(),s=Object(r.c)(e);if(!(null===(n=null==s?void 0:s.build)||void 0===n?void 0:n.builder)||"s2i"===(null===(a=null==s?void 0:s.build)||void 0===a?void 0:a.builder))return!0}return!1}))},5662:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var a=n(0),r=n(5619),s=n(5589),o=n(5647),i=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((a=a.apply(e,t||[])).next())}))};class c{constructor(e){this.extensions={},this.namespace=void 0,this.model={nodes:[],edges:[]},this.loaded=!1,this.loadError=void 0,this.extensionsLoaded=!1,this.watchedResources={},this.updateWatchedResources=()=>{const e=Object.keys(this.extensions);this.watchedResources=e.reduce((e,t)=>{if(this.extensions[t].resources){const n=this.extensions[t].resources(this.namespace);Object.keys(n).forEach(t=>{e[t]||(e[t]=n[t])})}return e},Object(o.d)(this.namespace))},this.updateExtension=(e,t)=>{this.extensions[e]=Object.assign(Object.assign({},this.extensions[e]||{}),t),this.updateExtensionsLoaded(),this.updateWatchedResources()},this.getWorkloadResources=e=>{const t=this.watchedResources,n=Object.keys(t).reduce((e,n)=>(e[n]=t[n].kind,e),{});return Object(o.i)(e,n,this.workloadKeys)},this.getExtensionModels=e=>i(this,void 0,void 0,(function*(){const t={nodes:[],edges:[]},n=this.dataModelGetters;if(!(null==n?void 0:n.length))return Promise.resolve(t);const a=this.dataModelDepicters,r=this.getWorkloadResources(e),s=n.map(t=>{try{return t(this.namespace,e,r)}catch(e){return console.error("Unable to add some resources to topology",e),null}});return yield Promise.all(s).then(e=>{e.forEach(e=>{if(e)try{Object(o.b)(e,t,a)}catch(e){console.error("Unable to add some resources to topology",e)}})}),Promise.resolve(t)})),this.reconcileModel=(e,t)=>{this.dataModelReconcilers.forEach(n=>{try{n(e,t)}catch(e){console.error("Unable to reconcile some resources in topology",e)}})},this.namespace=e,Object(r.p)(this,{namespace:r.q,model:r.q.ref,loaded:r.q,loadError:r.q,extensionsLoaded:r.q,watchedResources:r.q.ref,isEmptyModel:r.i})}updateExtensionsLoaded(){const e=Object.keys(this.extensions),t=this.extensionsLoaded;this.extensionsLoaded=e.length>1&&e.every(e=>!!this.extensions[e].dataModelGetter&&!!this.extensions[e].dataModelDepicter&&!!this.extensions[e].dataModelReconciler),!t&&this.extensionsLoaded&&this.onExtensionsLoaded&&this.onExtensionsLoaded(this)}getExtensions(){return this.extensions}getExtension(e){return this.extensions[e]}get workloadKeys(){const e=[...s.a];return Object.keys(this.extensions).forEach(t=>{this.extensions[t].workloadKeys&&this.extensions[t].workloadKeys.forEach(t=>{e.includes(t)||e.push(t)})}),e}get prioritizedKeys(){return Object.keys(this.extensions).sort((e,t)=>this.extensions[e].priority-this.extensions[t].priority)}get dataModelGetters(){return this.prioritizedKeys.reduce((e,t)=>(this.extensions[t].dataModelGetter&&e.push(this.extensions[t].dataModelGetter),e),[])}get dataModelDepicters(){return this.prioritizedKeys.reduce((e,t)=>(this.extensions[t].dataModelDepicter&&e.push(this.extensions[t].dataModelDepicter),e),[])}get dataModelReconcilers(){return this.prioritizedKeys.reduce((e,t)=>(this.extensions[t].dataModelReconciler&&e.push(this.extensions[t].dataModelReconciler),e),[])}get isEmptyModel(){var e,t,n;return 0===(null!==(n=null===(t=null===(e=this.model)||void 0===e?void 0:e.nodes)||void 0===t?void 0:t.length)&&void 0!==n?n:0)}}const l=Object(a.createContext)(null)},5663:function(e,t,n){"use strict";var a=n(5585),r=n(5619);const s=(e=a.AnchorEnd.both,t="")=>`${e}:${t}`;class o extends a.BaseElement{constructor(){super(),this.anchors={[s()]:new a.CenterAnchor(this)},this.dimensions=new a.Dimensions,this.dimensionsInitialized=!1,this.positioned=!1,this.uncollapsedCenter=null,this.position=new a.Point,this.group=!1,this.collapsed=!1,this.labelPosition=a.LabelPosition.bottom,this.shape=void 0,this.status=void 0,Object(r.p)(this,{anchors:r.q.shallow,dimensions:r.q.ref,dimensionsInitialized:r.q,position:r.q.ref,nodes:r.i,group:r.q,collapsed:r.q,labelPosition:r.q,shape:r.q,status:r.q,groupBounds:r.i,sourceEdges:r.i,targetEdges:r.i,setDimensions:r.f,setBounds:r.f,setPosition:r.f})}get nodes(){return this.isCollapsed()?[]:this.getChildren().filter(a.isNode)}get groupBounds(){const e=this.getChildren().filter(a.isNode).filter(e=>e.isVisible());if(!e.length)return this.getInternalBounds();let t;e.forEach(e=>{if(Object(a.isNode)(e)){const{padding:n}=e.getStyle(),a=e.getBounds();!e.isGroup()&&n&&a.padding(e.getStyle().padding),t?t.union(a):t=a.clone()}}),t||(t=new a.Rect);const{padding:n}=this.getStyle();return t.padding(n)}get sourceEdges(){return this.getGraph().getEdges().filter(e=>e.getSource()===this)}get targetEdges(){return this.getGraph().getEdges().filter(e=>e.getTarget()===this)}getChildren(){return this.isCollapsed()?super.getChildren().filter(a.isEdge):super.getChildren()}getAllNodeChildren(){return super.getChildren().reduce((e,t)=>(Object(a.isNode)(t)&&e.push(t.isGroup()?t.getAllNodeChildren():t),e),[])}getKind(){return a.ModelKind.node}getInternalBounds(){const{position:e,dimensions:t}=this;return new a.Rect(e.x,e.y,t.width,t.height)}getBounds(){return this.group&&!this.collapsed?this.groupBounds:this.getInternalBounds()}setBounds(e){const{width:t,height:n}=this.dimensions;e.width===t&&e.height===n||(this.dimensions=new a.Dimensions(e.width,e.height));const{x:r,y:s}=this.position;e.x===r&&e.y===s||this.setPosition(new a.Point(e.x,e.y))}getPosition(){return this.isGroup()&&this.getChildren().length&&!this.collapsed?this.getBounds().getCenter():this.position}updateChildrenPositions(e,t){const n=e.x-t.x,r=e.y-t.y;this.getChildren().forEach(e=>{if(Object(a.isNode)(e)){const t=e,s=t.getPosition(),o=new a.Point(s.x+n,s.y+r);t.setPosition(o)}})}setPosition(e){if(this.isGroup()&&this.getChildren().length&&!this.collapsed){const t=this.getBounds().getCenter();this.updateChildrenPositions(e,t)}else{this.position=e,this.positioned=!0;try{this.getController().fireEvent(a.NODE_POSITIONED_EVENT,{node:this})}catch(e){}}}isPositioned(){return this.positioned}getDimensions(){return this.dimensions}setDimensions(e){this.dimensions=e,this.dimensionsInitialized=!0}isDimensionsInitialized(){if(!this.dimensionsInitialized&&this.isGroup()){const e=this.getChildren().filter(a.isNode);if(0===e.length)return this.dimensionsInitialized;e.every(e=>e.isDimensionsInitialized())&&(this.dimensionsInitialized=!0)}return this.dimensionsInitialized}getAnchor(e,t){let n=this.anchors[s(e,t)];return!n&&t&&(n=this.anchors[s(e)]),n||e!==a.AnchorEnd.source&&e!==a.AnchorEnd.target||(n=this.anchors[s(a.AnchorEnd.both,t)],!n&&t&&(n=this.anchors[s(a.AnchorEnd.both)])),n}setAnchor(e,t,n){const a=s(t,n);e?this.anchors[a]=e:delete this.anchors[a]}getNodes(){return this.nodes}isGroup(){return this.group}setGroup(e){this.group=e}isCollapsed(){return this.collapsed}setCollapsed(e){if(e!==this.collapsed){const t=this.getBounds().getCenter();!e&&this.uncollapsedCenter?(this.updateChildrenPositions(t,this.uncollapsedCenter),this.uncollapsedCenter=null,this.collapsed=e):(this.uncollapsedCenter=e?t:null,this.collapsed=e,this.setBounds(this.getBounds().setCenter(t.x,t.y))),this.getController().fireEvent(a.NODE_COLLAPSE_CHANGE_EVENT,{node:this})}}getLabelPosition(){return this.labelPosition}setLabelPosition(e){this.labelPosition=e}getNodeShape(){return this.shape||(this.group?a.NodeShape.rect:a.NodeShape.ellipse)}setNodeShape(e){this.shape=e}getNodeStatus(){return this.status||a.NodeStatus.default}setNodeStatus(e){this.status=e}getSourceEdges(){return this.sourceEdges}getTargetEdges(){return this.targetEdges}isVisible(){return super.isVisible()&&this.isDimensionsInitialized()}setModel(e){let t,n;super.setModel(e),"width"in e&&null!=e.width&&e.width!==this.dimensions.width&&(t||(t=this.dimensions.clone()),t.width=e.width),"height"in e&&null!=e.height&&e.height!==this.dimensions.height&&(t||(t=this.dimensions.clone()),t.height=e.height),t&&this.setDimensions(t),"x"in e&&null!=e.x&&e.x!==this.position.x&&(n||(n=this.position.clone()),n.x=e.x),"y"in e&&null!=e.y&&e.y!==this.position.y&&(n||(n=this.position.clone()),n.y=e.y),n&&this.setPosition(n),"group"in e&&this.setGroup(!!e.group),"labelPosition"in e&&(this.labelPosition=e.labelPosition),"shape"in e&&(this.shape=e.shape),"status"in e&&(this.status=e.status),"collapsed"in e&&this.setCollapsed(!!e.collapsed)}toModel(){return Object.assign(Object.assign({},super.toModel()),{x:this.isPositioned()?this.getPosition().x:void 0,y:this.isPositioned()?this.getPosition().y:void 0,width:this.isDimensionsInitialized()?this.getDimensions().width:void 0,height:this.isDimensionsInitialized()?this.getDimensions().height:void 0,collapsed:this.isCollapsed(),group:this.isGroup(),labelPosition:this.labelPosition,shape:this.shape,status:this.status})}translateToParent(e){if(!this.group||this.isCollapsed()){const{x:t,y:n}=this.getPosition();e.translate(t,n)}}translateFromParent(e){if(!this.group||this.isCollapsed()){const{x:t,y:n}=this.getPosition();e.translate(-t,-n)}}}t.a=o},5670:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(0),r=n(31),s=n(499),o=n(327),i=n(517),c=n(5);const l=e=>({watchURL:(t,n)=>e(Object(i.g)(t,n)),stopWatchURL:t=>e(Object(i.e)(t)),watchPrometheusQuery:(t,n,a)=>e(Object(i.f)(t,n,a)),stopWatchPrometheusQuery:(t,n)=>e(Object(i.d)(t,n))}),u=e=>({[o.a.URL]:e.dashboards.get(o.a.URL),[o.a.PROMETHEUS]:e.dashboards.get(o.a.PROMETHEUS),notificationAlerts:e.observe.get("notificationAlerts")}),d=e=>Object(r.connect)(u,l)(class extends a.Component{constructor(e){super(e),this.urls=[],this.queries=[],this.watchingAlerts=!1,this.watchURL=(e,t)=>{this.urls.push(e),this.props.watchURL(e,t)},this.watchPrometheus=(e,t,n)=>{this.queries.push(Object(i.c)(e,n)),this.props.watchPrometheusQuery(e,t,n)},this.stopWatchPrometheusQuery=(e,t)=>{const n=Object(i.c)(e,t);this.queries=this.queries.filter(e=>e!==n),this.props.stopWatchPrometheusQuery(e,t)},this.watchAlerts=()=>{this.watchingAlerts=!0},this.stopWatchAlerts=()=>{this.watchingAlerts=!1},this.watchK8sResource=e=>{this.setState(t=>({k8sResources:[...t.k8sResources,Object.assign(Object.assign({},e),{optional:!0})]}))},this.stopWatchK8sResource=e=>{this.setState(t=>({k8sResources:t.k8sResources.filter(t=>t.prop!==e.prop)}))},this.getExternalProps=e=>s.a(e,"watchURL","stopWatchURL","watchPrometheusQuery","stopWatchPrometheusQuery","watchAlerts","stopWatchAlerts",o.a.URL,o.a.PROMETHEUS,"notificationAlerts"),this.state={k8sResources:[]}}shouldComponentUpdate(e,t){var n,a,r,s,i,c;const l=this.urls.some(t=>this.props[o.a.URL].getIn([t,"data"])!==e[o.a.URL].getIn([t,"data"])||this.props[o.a.URL].getIn([t,"loadError"])!==e[o.a.URL].getIn([t,"loadError"])),u=this.queries.some(t=>this.props[o.a.PROMETHEUS].getIn([t,"data"])!==e[o.a.PROMETHEUS].getIn([t,"data"])||this.props[o.a.PROMETHEUS].getIn([t,"loadError"])!==e[o.a.PROMETHEUS].getIn([t,"loadError"])),d=(null===(a=null===(n=this.props)||void 0===n?void 0:n.notificationAlerts)||void 0===a?void 0:a.data)!==(null===(r=null==e?void 0:e.notificationAlerts)||void 0===r?void 0:r.data)||(null===(i=null===(s=this.props)||void 0===s?void 0:s.notificationAlerts)||void 0===i?void 0:i.loadError)!==(null===(c=null==e?void 0:e.notificationAlerts)||void 0===c?void 0:c.loadError),p=this.state.k8sResources!==t.k8sResources,m=this.getExternalProps(e),h=this.getExternalProps(this.props);return l||u||p||this.watchingAlerts&&d||Object.keys(m).length!==Object.keys(h).length||Object.keys(m).some(e=>m[e]!==h[e])}render(){return a.createElement(c.C,{resources:this.state.k8sResources},a.createElement(e,Object.assign({watchURL:this.watchURL,stopWatchURL:this.props.stopWatchURL,watchPrometheus:this.watchPrometheus,stopWatchPrometheusQuery:this.stopWatchPrometheusQuery,watchAlerts:this.watchAlerts,stopWatchAlerts:this.stopWatchAlerts,urlResults:this.props[o.a.URL],prometheusResults:this.props[o.a.PROMETHEUS],notificationAlerts:this.props.notificationAlerts,watchK8sResource:this.watchK8sResource,stopWatchK8sResource:this.stopWatchK8sResource},this.getExternalProps(this.props))))}})},5674:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o}));var a=n(5);const r=["configmaps","persistentvolumeclaims","pods","replicationcontrollers","resourcequotas","services","services.loadbalancers","services.nodeports","secrets","openshift.io/imagestreams"],s=(e,t)=>{let n=Object(a.Ib)(t),r=Object(a.Ib)(e);return n&&r||(n=parseInt(n,10),r=parseInt(r,10)),n&&r?n/r*100:0},o=({resourceName:e,used:t,hard:n})=>{const o=e.startsWith("count/")||r.includes(e),i=s(n,t);return{label:o?`${t||0} of ${n}`:Object(a.ec)(i).string,percent:i}}},5695:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a,r=n(0),s=n(18),o=n(1946),i=n(5727);n(5728);!function(e){e.light="light",e.default="default"}(a||(a={}));t.b=({children:e,disabled:t,onNamespaceChange:n,hideProjects:c=!1,hideApplications:l=!1,variant:u=a.default,toolbar:d})=>r.createElement("div",{className:"odc-namespaced-page"},r.createElement(o.NamespaceBar,{isDisabled:t,onNamespaceChange:n,hideProjects:c},!l&&r.createElement(i.a,{disabled:t}),d&&r.createElement("div",{className:"odc-namespaced-page__toolbar"},d)),r.createElement("div",{className:s("odc-namespaced-page__content",{["is-"+u]:u!==a.default})},e))},5704:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(13),o=n(5),i=n(69),c=n(15),l=n(5710),u=n(5647),d=n(5720),p=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};t.a=e=>{var{namespace:t}=e,n=p(e,["namespace"]);const{t:m}=Object(r.useTranslation)(),h=Object(i.z)(d.a),b=Object(i.z)(s.Zb),f=a.useMemo(()=>Object(l.b)(b),[b]),g=a.useMemo(()=>{let e=Object(u.d)(t);return[...h,...f].forEach(n=>{var a,r;const s=null===(r=(a=n.properties).resources)||void 0===r?void 0:r.call(a,t);s&&(e=Object.assign(Object.assign({},s),e))}),Object.keys(e).map(t=>Object.assign(Object.assign({},e[t]),{prop:t}))},[f,h,t]);return a.createElement(o.C,{resources:g},a.createElement(c.Nb,Object.assign({},n,{placeholder:m("topology~Select an application"),dataSelector:["metadata","labels","app.kubernetes.io/part-of"]})))}},5710:function(e,t,n){"use strict";n.d(t,"b",(function(){return d}));var a=n(0),r=n(13),s=n(8),o=n(69),i=n(5657),c=n(5714),l=n(5662),u=n(5715);const d=e=>e.map(e=>Object.assign(Object.assign({},e),{properties:Object.assign(Object.assign({},e.properties),{resources:t=>Object.entries(e.properties.resources||{}).reduce((n,[a,r])=>{const o=((e,t,n,a,r={})=>{if(!a)return Object.assign({namespace:e},r);if(a.version){const t=Object(s.Fb)(a);return Object.assign({namespace:e,kind:t},r)}const o=Object(s.wb)(a.group,a.kind);if(!o)return console.warn(`Plugin "${t.pluginID}": Could not find model (CRD) for group "${a.group}" and kind "${a.kind}" to determinate version. Please add a required flag to the extension to suppress this warning. The resource "${n}" will not be loaded and ignored in the topology view for now:`,t,n,a,r),null;const i=Object(s.Hb)(o);return Object.assign({namespace:e,kind:i},r)})(t,e,a,null==r?void 0:r.model,null==r?void 0:r.opts);return o&&(n[a]=o),n},{})})}));t.a=({namespace:e,children:t})=>{const[n,s]=a.useState(new l.a(e));a.useEffect(()=>{s(new l.a(e))},[e]);const p=Object(o.z)(i.c),m=Object(o.z)(r.Zb),h=a.useMemo(()=>d(m),[m]);return a.createElement(l.b.Provider,{value:n},e&&a.createElement(a.Fragment,null,[...h,...p].map(e=>a.createElement(c.a,{key:e.properties.id,dataModelFactory:e.properties}))),e&&a.createElement(u.a,null),t)}},5712:function(e,t,n){},5714:function(e,t,n){"use strict";var a=n(0),r=n(15),s=n(5662);t.a=({dataModelFactory:e})=>{const t=a.useContext(s.b),{id:n,priority:o,resources:i}=e,c=Object(r.De)(e.workloadKeys),l=a.useRef({priority:o,workloadKeys:c,resources:i});return a.useEffect(()=>{if(!t.getExtension(n)){l.current={priority:o,workloadKeys:c,resources:i},t.updateExtension(n,l.current);const{getDataModel:a,isResourceDepicted:r,getDataModelReconciler:s}=e;a?a().then(e=>{l.current.dataModelGetter=e,t.updateExtension(n,l.current)}).catch(()=>{l.current.dataModelGetter=()=>Promise.resolve({}),t.updateExtension(n,l.current)}):(l.current.dataModelGetter=()=>Promise.resolve({}),t.updateExtension(n,l.current)),r?r().then(e=>{l.current.dataModelDepicter=e,t.updateExtension(n,l.current)}).catch(()=>{l.current.dataModelDepicter=()=>!1,t.updateExtension(n,l.current)}):(l.current.dataModelDepicter=()=>!1,t.updateExtension(n,l.current)),s?s().then(e=>{l.current.dataModelReconciler=e,t.updateExtension(n,l.current)}).catch(()=>{l.current.dataModelReconciler=()=>{},t.updateExtension(n,l.current)}):(l.current.dataModelReconciler=()=>{},t.updateExtension(n,l.current))}},[t,e,n,o,i,c]),null}},5715:function(e,t,n){"use strict";var a=n(0),r=n(5585),s=n(22),o=n(108),i=n(15),c=n(5662),l=n(5716),u=n(5718);t.a=Object(r.observer)(({trafficData:e})=>{const t=a.useContext(c.b),{namespace:n,extensionsLoaded:r,watchedResources:d}=t,[p,m]=a.useState(),h=Object(u.a)(n),b=a.useMemo(()=>n&&r?d:{},[r,d,n]),f=Object(i.Ce)(m,250),g=Object(o.b)(b);return a.useEffect(()=>f(g),[f,g]),a.useEffect(()=>{t.model=null},[n]),a.useEffect(()=>{s.a(p)||Object(l.a)(t,p,e,h).then(e=>{t.loadError=e.loadError,e.loaded&&(t.loaded=!0,t.model=e.model)}).catch(()=>{})},[p,e,t,h]),null})},5716:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(5717);const r=(e,t,n,r)=>{const{extensionsLoaded:s,watchedResources:o}=e;if(!s||!t)return Promise.resolve({loaded:!1,loadError:"",model:null});const i=Object.keys(t).find(e=>(e=>t[e].loadError&&!o[e].optional?t[e].loadError:"")(e));if(i)return Promise.resolve({loaded:!1,loadError:t[i].loadError,model:null});if(!Object.keys(t).every(e=>(e=>t[e].loaded||t[e].loadError&&o[e].optional)(e)))return Promise.resolve({loaded:!1,loadError:"",model:null});const c=e.getWorkloadResources(t),l=e.dataModelDepicters;return e.getExtensionModels(t).then(s=>{const o=Object(a.a)(s,e.namespace,t,c,l,n,r);return e.reconcileModel(o,t),Promise.resolve({loaded:!0,loadError:"",model:o})})}},5717:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(1401),r=n(15),s=n(2221),o=n(5589),i=n(5647);const c=(e,t)=>{const n=e.nodes.filter(({data:e})=>e.nodeType===s.y);return e.edges.reduce((e,{data:a})=>{const{data:r}=n.find(e=>e.data.id===a.source),{data:o}=n.find(e=>e.data.id===a.target),i=t.find(e=>e.metadata.name===r[r.nodeType]),c=t.find(e=>e.metadata.name===o[o.nodeType]);return i&&c?[...e,{id:`${i.metadata.uid}_${c.metadata.uid}`,type:s.x,source:i.metadata.uid,target:c.metadata.uid,data:a.traffic}]:e},[])},l=(e,t,n,l,u,d,p)=>{const m=(e=>{const t={nodes:[],edges:[]};return o.a.forEach(n=>{var o,c;if(null===(c=null===(o=null==e?void 0:e[n])||void 0===o?void 0:o.data)||void 0===c?void 0:c.length){const o={nodes:[],edges:[]};e[n].data.forEach(t=>{const c=Object(r.yc)(n,t,e);if(c){const n=Object(i.c)(t,c,s.y,Object(a.d)("icon-openshift"),void 0,e);o.nodes.push(Object(i.h)(t,s.y,n,i.a)),Object(i.j)(Object(i.g)(t),o.nodes)}}),Object(i.b)(o,t)}}),t})(Object.assign(Object.assign({},n),{monitoringAlerts:p}));return Object(i.b)(m,e,u),(e=>{e.nodes.forEach(t=>{var n,a;t.type===s.u&&(t.children=t.children.filter(t=>e.nodes.find(e=>e.id===t)),t.data.groupResources=null!==(a=null===(n=t.children)||void 0===n?void 0:n.map(t=>e.nodes.find(e=>t===e.id)))&&void 0!==a?a:[])}),e.nodes=e.nodes.filter(e=>e.type!==s.u||e.children.length>0)})(e),((e,t)=>{t.forEach(n=>{e.edges.push(...Object(i.f)(n,t))})})(e,l),((e,t,n)=>{n&&e.edges.push(...c(n,t))})(e,l,d),e}},5718:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n(5719),s=n(58),o=n(15);const i=e=>{const[t,n,i]=Object(r.a)({namespace:e}),c=a.useMemo(()=>{let e;return i||n||(e=Object(s.j)(null==t?void 0:t.data).alerts,e.forEach(e=>{delete e.activeAt,e.rule&&(delete e.rule.evaluationTime,delete e.rule.lastEvaluation,e.rule.alerts&&e.rule.alerts.forEach(e=>{delete e.activeAt}))})),{data:e,loaded:!i,loadError:n}},[n,i,t]);return Object(o.De)(c)}},5719:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(763),r=n(436);const s=({delay:e,namespace:t})=>{const n=Object(r.b)({endpoint:r.a.RULES,namespace:t});return Object(a.useURLPoll)(n,e,t)}},5720:function(e,t,n){"use strict";var a=n(5657);n.d(t,"a",(function(){return a.c}))},5727:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(31),o=n(53),i=n(518),c=n(15),l=n(5704);t.a=Object(s.connect)(e=>({namespace:Object(i.d)(e),application:Object(i.c)(e)}),e=>({onChange:t=>{e(Object(o.k)(t))}}))(({namespace:e,application:t,onChange:n,disabled:s})=>{const{t:o}=Object(r.useTranslation)(),i=o("topology~All applications"),u=o("topology~No application group"),d=t===c.b?i:t===c.mc?u:t,[p,m]=a.useState(d);if(a.useEffect(()=>{s||m(d)},[s,d]),e===c.c)return null;return a.createElement(l.a,{className:"co-namespace-selector",buttonClassName:"pf-m-plain",namespace:e,title:p&&a.createElement("span",{className:"btn-link__title"},p),titlePrefix:o("topology~Application"),allSelectorItem:{allSelectorKey:c.b,allSelectorTitle:i},noneSelectorItem:{noneSelectorKey:c.mc,noneSelectorTitle:u},selectedKey:t||c.b,onChange:(e,t)=>{t===c.b?n(t):n(e)},userSettingsPrefix:c.f,storageKey:c.e,disabled:s})})},5728:function(e,t,n){},5734:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a=(e,t)=>Object.assign(Object.assign({},e),{prop:`${t}-${e.prop}`})},5735:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var a=n(0),r=n(353),s=n(19),o=n(7),i=n(14),c=n(13),l=n(517),u=n(5670),d=n(1406),p=n(5),m=n(980),h=n(108),b=n(8),f=n(15),g=n(30),v=n(119),E=n(2229);n(5828);const y=a.memo(({current:e,title:t,humanize:n,consumers:i,namespace:c,position:l=r.b.top,description:u,children:d})=>{const{t:p}=Object(o.useTranslation)(),[m,h]=a.useState(!1),b=a.useCallback(()=>h(!0),[]),f=a.useCallback(()=>h(!1),[]);return e?a.createElement(r.a,{position:l,headerContent:p("console-shared~{{title}} breakdown",{title:t}),bodyContent:a.createElement(k,{humanize:n,consumers:i,namespace:c,isOpen:m,description:u},d),enableFlip:!0,onShow:b,onHide:f,maxWidth:"21rem"},a.createElement(s.a,{variant:"link",isInline:!0},e)):null});t.b=y;const O=e=>{switch(e){case c.m.ERROR:return a.createElement(v.h,null);case c.m.WARN:return a.createElement(v.m,null);default:return null}},_=({limitState:e,requestedState:t,total:n,limit:r,current:s,available:i,requested:l})=>{const{t:u}=Object(o.useTranslation)();return(!!e&&e!==c.m.OK||!!t&&t!==c.m.OK)&&a.createElement("ul",{className:"co-utilization-card-popover__consumer-list"},a.createElement(E.default,{value:n},u("console-shared~Total capacity")),a.createElement(E.default,{value:r,icon:O(e)},u("console-shared~Total limit")),a.createElement(E.default,{value:s},u("console-shared~Current utilization")),a.createElement(E.default,{value:i},u("console-shared~Current available capacity")),a.createElement(E.default,{value:l,icon:O(t)},u("console-shared~Total requested")))},k=Object(u.a)(a.memo(({humanize:e,consumers:t,namespace:n,watchPrometheus:r,stopWatchPrometheusQuery:s,prometheusResults:u,isOpen:v,description:E,children:y})=>{const{t:O}=Object(o.useTranslation)(),[_,k]=a.useState(t[0]),R=Object(c.jc)()[0],j=Object(f.Fe)(g.A.CAN_GET_NS)&&!!window.SERVER_FLAGS.prometheusBaseURL,{query:S,model:N,metric:P,fieldSelector:C}=_,w=a.useMemo(()=>v?((e,t,n)=>({isList:!0,kind:e.crd?Object(b.Hb)(e):e.kind,fieldSelector:n,namespace:t}))(N,n,C):null,[C,v,N,n]),[I,x,D]=Object(h.a)(w);a.useEffect(()=>v?(r(S,n),()=>{s(S)}):()=>{},[S,s,r,n,v]);const A=[],[M,U]=Object(l.b)(u,S),L=Object(d.a)(M,P);if(w&&x&&!D)for(const t of L){if(I.some(e=>Object(f.dd)(e)===t.metric[P]&&(!N.namespaced||Object(f.ed)(e)===t.metric.namespace))&&A.push(Object.assign(Object.assign({},t),{y:e(t.y).string})),5===A.length)break}const B=a.useMemo(()=>{const e=new URLSearchParams;return e.set("query0",_.query),e},[_.query]),F=a.useMemo(()=>t.reduce((e,t)=>(e[Object(b.Hb)(t.model)]=O("console-shared~By {{label}}",{label:t.model.labelKey?O(t.model.labelKey):t.model.label}),e),{}),[t,O]),q=a.useCallback(e=>k(t.find(t=>Object(b.Hb)(t.model)===e)),[t]),K=j&&"admin"===R?"/monitoring/query-browser?"+B.toString():`/dev-monitoring/ns/${n}/metrics?${B.toString()}`;let $;return $=U||D?a.createElement("div",{className:"text-secondary"},O("console-shared~Not available")):x&&M?a.createElement(a.Fragment,null,a.createElement("ul",{className:"co-utilization-card-popover__consumer-list","aria-label":O("console-shared~Top consumer by {{label}}",{label:N.label})},A&&A.map(e=>{const t=String(e.x);return a.createElement(T,{key:t,value:e.y},a.createElement(i.Link,{className:"co-utilization-card-popover__consumer-name",to:Object(p.uc)(N,t,e.metric.namespace)},t))})),a.createElement(i.Link,{to:K},O("console-shared~View more"))):a.createElement("ul",{className:"co-utilization-card-popover__consumer-list"},a.createElement("li",{className:"skeleton-consumer"}),a.createElement("li",{className:"skeleton-consumer"}),a.createElement("li",{className:"skeleton-consumer"}),a.createElement("li",{className:"skeleton-consumer"}),a.createElement("li",{className:"skeleton-consumer"})),a.createElement("div",{className:"co-utilization-card-popover__body"},E&&a.createElement("div",{className:"co-utilization-card-popover__description"},E),y,a.createElement("div",{className:"co-utilization-card-popover__title"},1===t.length?O("console-shared~Top {{label}} consumers",{label:_.model.label.toLowerCase()}):O("console-shared~Top consumers")),t.length>1&&a.createElement(m.b,{className:"co-utilization-card-popover__dropdown",id:"consumer-select",name:"selectConsumerType","aria-label":O("console-shared~Select consumer type"),items:F,onChange:q,selectedKey:Object(b.Hb)(N)}),$)})),T=({children:e,value:t})=>a.createElement("li",{className:"co-utilization-card-popover__consumer-item"},e,a.createElement("div",{className:"co-utilization-card-popover__consumer-value"},t))},5738:function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"d",(function(){return y})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return _}));var a=n(0),r=n(7),s=n(406),o=n(967),i=n(4377),c=n(5791),l=n(1409),u=n(52),d=n(5),p=n(108),m=n(5670),h=n(5734),b=n(517),f=n(5784);const g=({operatorStatus:e,isResolved:t,key:n,Component:r,LoadingComponent:s})=>{const o=r;return t?a.createElement(o,{key:n,operatorStatus:e}):a.createElement(d.c,{key:e.operators[0].metadata.uid,operatorStatus:e,loader:r,LoadingComponent:s})},v=({resources:e,operatorExtensions:t,dynamicOperatorSubsystems:n})=>{const{t:i}=Object(r.useTranslation)(),l=[...t.map((t,n)=>{const r=t.resources.reduce((t,a)=>(t[a.prop]=e[Object(h.a)(a,n).prop],t),{});return a.createElement(s.a,{key:t.title},a.createElement(c.a,{resources:r,getOperatorsWithStatuses:t.getOperatorsWithStatuses,title:t.title,linkTo:t.viewAllLink||Object(d.tc)(t.resources[0].kind),Row:g,Component:t.operatorRowLoader,isResolved:!1}))}),...n.map((t,n)=>{const r=t.resources.reduce((t,a)=>(t[a.prop]=e[Object(h.a)(a,n).prop],t),{});return a.createElement(s.a,{key:t.title},a.createElement(c.a,{resources:r,getOperatorsWithStatuses:t.getOperatorsWithStatuses,title:t.title,linkTo:t.viewAllLink||Object(d.tc)(t.resources[0].kind),Row:g,Component:t.operatorRowLoader,isResolved:!0}))})].reverse();return a.createElement(o.a,{hasGutter:!0},a.createElement(s.a,null,i("public~Operators create, configure, and manage applications by extending the Kubernetes API.")),l)},E=Object(m.a)(({resources:e,watchK8sResource:t,stopWatchK8sResource:n,operatorExtensions:s,dynamicOperatorSubsystems:o})=>{const{t:c}=Object(r.useTranslation)();a.useEffect(()=>(s.forEach((e,n)=>e.resources.forEach(e=>t(Object(h.a)(e,n)))),()=>{s.forEach((e,t)=>e.resources.forEach(e=>n(Object(h.a)(e,t))))}),[t,n,s]);const d=s.map((t,n)=>{const a=t.resources.reduce((t,a)=>(t[a.prop]=e[Object(h.a)(a,n).prop]||{},t),{});if(Object.keys(a).some(e=>a[e].loadError))return{health:u.a.NOT_AVAILABLE};if(Object.keys(a).some(e=>!a[e].loaded))return{health:u.a.LOADING};const r=t.getOperatorsWithStatuses(a);if(!r.length)return{health:u.a.OK};const s=Object(l.a)(r);return{health:s[0].status.health,count:s.length}}),p=Object(l.b)(d,c);return a.createElement(i.default,{title:c("public~Operators"),state:p.health,details:p.detailMessage,popupTitle:c("public~Operator status")},a.createElement(v,{resources:e,operatorExtensions:s,dynamicOperatorSubsystems:o}))}),y=Object(m.a)(({watchURL:e,stopWatchURL:t,urlResults:n,resources:r,watchK8sResource:s,stopWatchK8sResource:o,subsystem:c,models:l})=>{const u=c.additionalResource&&!!l.get(c.additionalResource.kind);a.useEffect(()=>(e(c.url,c.fetch?c.fetch:void 0),u&&s(c.additionalResource),()=>{t(c.url),u&&o(c.additionalResource)}),[e,t,s,o,c,u]);const p=n.getIn([c.url,"data"]),m=n.getIn([c.url,"loadError"]),h=c.additionalResource?r[c.additionalResource.prop]:null,b=c.healthHandler(p,m,h);return a.createElement(i.default,{title:c.title,state:b.state,details:b.message,popupTitle:c.popupTitle,popupBodyContent:c.popupComponent?e=>a.createElement(d.c,{loader:c.popupComponent,healthResult:p,healthResultError:m,k8sResult:h,hide:e}):void 0})}),O=Object(m.a)(({watchK8sResource:e,stopWatchK8sResource:t,resources:n,watchPrometheus:s,stopWatchPrometheusQuery:o,prometheusResults:c,subsystem:l,models:u})=>{const{t:p}=Object(r.useTranslation)(),{infrastructure:m}=a.useContext(f.a),h=l.additionalResource&&!!u.get(l.additionalResource.kind);a.useEffect(()=>(l.queries.forEach(e=>s(e)),h&&e(l.additionalResource),()=>{l.queries.forEach(e=>o(e)),h&&t(l.additionalResource)}),[e,t,s,o,l,h]);const g=a.useMemo(()=>l.queries.map(e=>{const[t,n]=Object(b.b)(c,e);return{response:t,error:n}}),[c,l.queries]),v=l.additionalResource?n[l.additionalResource.prop]:null,E=l.healthHandler(g,p,v,m);return a.createElement(i.default,{title:l.title,state:E.state,details:E.message,popupTitle:l.popupTitle,popupClassname:l.popupClassname,popupKeepOnOutsideClick:l.popupKeepOnOutsideClick,popupBodyContent:l.popupComponent?e=>a.createElement(d.c,{loader:l.popupComponent,responses:g,k8sResult:v,hide:e}):void 0})}),_=({subsystem:e,namespace:t})=>{const{t:n}=Object(r.useTranslation)(),{title:s,resources:o,healthHandler:c,popupComponent:l,popupTitle:u}=e,m=a.useMemo(()=>Object.assign(Object.assign({},o),o.imageManifestVuln&&{imageManifestVuln:Object.assign(Object.assign({},o.imageManifestVuln),{namespace:t})}),[o,t]),h=Object(p.b)(m),b=c(h,n);return a.createElement(i.default,{title:s,state:b.state,details:b.message,popupTitle:u},l&&h&&a.createElement(d.c,Object.assign({loader:l},h,{namespace:t})))}},5744:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l}));var a,r=n(550);!function(e){e.CPU_USAGE="CPU_USAGE",e.CPU_REQUESTS="CPU_REQUESTS",e.MEMORY_USAGE="MEMORY_USAGE",e.MEMORY_REQUESTS="MEMORY_REQUESTS",e.POD_COUNT="POD_COUNT",e.PODS_BY_CPU="PODS_BY_CPU",e.PODS_BY_MEMORY="PODS_BY_MEMORY",e.PODS_BY_FILESYSTEM="PODS_BY_FILESYSTEM",e.PODS_BY_NETWORK_IN="PODS_BY_NETWORK_IN",e.PODS_BY_NETWORK_OUT="PODS_BY_NETWORK_OUT",e.FILESYSTEM_USAGE="FILESYSTEM_USAGE",e.NETWORK_IN_UTILIZATION="NETWORK_IN_UTILIZATION",e.NETWORK_OUT_UTILIZATION="NETWORK_OUT_UTILIZATION",e.NETWORK_UTILIZATION="NETWORK_UTILIZATION"}(a||(a={}));const s={[a.CPU_USAGE]:r.a("namespace:container_cpu_usage:sum{namespace='<%= project %>'}"),[a.CPU_REQUESTS]:r.a('sum(kube_pod_resource_request{resource="cpu", namespace="<%= project %>"}) by (namespace)'),[a.MEMORY_USAGE]:r.a('sum(container_memory_working_set_bytes{namespace=\'<%= project %>\',container="",pod!=""}) BY (namespace)'),[a.MEMORY_REQUESTS]:r.a('sum(kube_pod_resource_request{resource="memory", namespace="<%= project %>"}) by (namespace)'),[a.POD_COUNT]:r.a("count(kube_running_pod_ready{namespace='<%= project %>'}) BY (namespace)"),[a.FILESYSTEM_USAGE]:r.a('sum(pod:container_fs_usage_bytes:sum{container="",pod!="",namespace=\'<%= project %>\'}) BY (namespace)'),[a.NETWORK_IN_UTILIZATION]:r.a('sum(rate(container_network_receive_bytes_total{container="POD",pod!="",namespace=\'<%= project %>\'}[5m])) BY (namespace)'),[a.NETWORK_OUT_UTILIZATION]:r.a('sum(rate(container_network_transmit_bytes_total{container="POD",pod!="",namespace=\'<%= project %>\'}[5m])) BY (namespace)')},o={[a.PODS_BY_CPU]:r.a('topk(25, sort_desc(sum(avg_over_time(pod:container_cpu_usage:sum{container="",pod!="",namespace=\'<%= project %>\'}[5m])) BY (pod, namespace)))'),[a.PODS_BY_MEMORY]:r.a('topk(25, sort_desc(sum(avg_over_time(container_memory_working_set_bytes{container="",pod!="",namespace=\'<%= project %>\'}[5m])) BY (pod, namespace)))'),[a.PODS_BY_FILESYSTEM]:r.a('topk(25, sort_desc(sum(pod:container_fs_usage_bytes:sum{container="",pod!="",namespace=\'<%= project %>\'}) BY (pod, namespace)))'),[a.PODS_BY_NETWORK_IN]:r.a('topk(25, sort_desc(sum(rate(container_network_receive_bytes_total{ container="POD", pod!= "", namespace = \'<%= project %>\'}[5m])) BY (namespace, pod)))'),[a.PODS_BY_NETWORK_OUT]:r.a('topk(25, sort_desc(sum(rate(container_network_transmit_bytes_total{ container="POD", pod!= "", namespace = \'<%= project %>\'}[5m])) BY (namespace, pod)))')},i=e=>({[a.NETWORK_UTILIZATION]:[{query:s[a.NETWORK_IN_UTILIZATION]({project:e}),desc:"in"},{query:s[a.NETWORK_OUT_UTILIZATION]({project:e}),desc:"out"}]}),c=e=>({[a.CPU_USAGE]:s[a.CPU_USAGE]({project:e}),[a.CPU_REQUESTS]:s[a.CPU_REQUESTS]({project:e}),[a.MEMORY_USAGE]:s[a.MEMORY_USAGE]({project:e}),[a.MEMORY_REQUESTS]:s[a.MEMORY_REQUESTS]({project:e}),[a.POD_COUNT]:s[a.POD_COUNT]({project:e}),[a.FILESYSTEM_USAGE]:s[a.FILESYSTEM_USAGE]({project:e})}),l=e=>({[a.PODS_BY_CPU]:o[a.PODS_BY_CPU]({project:e}),[a.PODS_BY_MEMORY]:o[a.PODS_BY_MEMORY]({project:e}),[a.PODS_BY_FILESYSTEM]:o[a.PODS_BY_FILESYSTEM]({project:e}),[a.PODS_BY_NETWORK_IN]:o[a.PODS_BY_NETWORK_IN]({project:e}),[a.PODS_BY_NETWORK_OUT]:o[a.PODS_BY_NETWORK_OUT]({project:e})})},5745:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l}));var a,r=n(550);!function(e){e.MEMORY_TOTAL="MEMORY_TOTAL",e.MEMORY_UTILIZATION="MEMORY_UTILIZATION",e.MEMORY_REQUESTS="MEMORY_REQUESTS",e.NETWORK_UTILIZATION="NETWORK_UTILIZATION",e.NETWORK_IN_UTILIZATION="NETWORK_IN_UTILIZATION",e.NETWORK_OUT_UTILIZATION="NETWORK_OUT_UTILIZATION",e.CPU_UTILIZATION="CPU_UTILIZATION",e.CPU_TOTAL="CPU_TOTAL",e.CPU_REQUESTS="CPU_REQUESTS",e.STORAGE_UTILIZATION="STORAGE_UTILIZATION",e.STORAGE_TOTAL="STORAGE_TOTAL",e.PODS_BY_CPU="PODS_BY_CPU",e.PODS_BY_MEMORY="PODS_BY_MEMORY",e.PODS_BY_STORAGE="PODS_BY_STORAGE",e.PODS_BY_NETWORK_IN="PODS_BY_NETWORK_IN",e.PODS_BY_NETWORK_OUT="PODS_BY_NETWORK_OUT",e.NODES_BY_CPU="NODES_BY_CPU",e.NODES_BY_MEMORY="NODES_BY_MEMORY",e.NODES_BY_STORAGE="NODES_BY_STORAGE",e.NODES_BY_NETWORK_IN="NODES_BY_NETWORK_IN",e.NODES_BY_NETWORK_OUT="NODES_BY_NETWORK_OUT",e.NODES_BY_PODS="NODES_BY_PODS",e.PROJECTS_BY_CPU="PROJECTS_BY_CPU",e.PROJECTS_BY_MEMORY="PROJECTS_BY_MEMORY",e.PROJECTS_BY_STORAGE="PROJECTS_BY_STORAGE",e.PROJECTS_BY_NETWORK_IN="PROJECTS_BY_NETWORK_IN",e.PROJECTS_BY_NETWORK_OUT="PROJECTS_BY_NETWORK_OUT",e.PROJECTS_BY_PODS="PROJECTS_BY_PODS",e.POD_UTILIZATION="POD_UTILIZATION"}(a||(a={}));const s={[a.PODS_BY_CPU]:r.a('\n      topk(25, sort_desc(\n        (\n          sum(avg_over_time(pod:container_cpu_usage:sum{container="",pod!=""}[5m])) BY (pod, namespace)\n          *\n          on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n        )\n        *\n        on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      ))\n    '),[a.PODS_BY_MEMORY]:r.a('\n      topk(25, sort_desc(\n        (\n          sum(avg_over_time(container_memory_working_set_bytes{container="",pod!=""}[5m])) BY (pod, namespace)\n          *\n          on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n        )\n        *\n        on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      ))\n    '),[a.PODS_BY_STORAGE]:r.a('\n      topk(25, sort_desc(\n        (\n          sum(avg_over_time(pod:container_fs_usage_bytes:sum{container="", pod!=""}[5m])) BY (pod, namespace)\n          *\n          on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n        )\n        *\n        on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      ))\n    '),[a.PODS_BY_NETWORK_IN]:r.a('\n      topk(25, sort_desc(\n        (\n          sum(rate(container_network_receive_bytes_total{ container="POD", pod!= ""}[5m])) BY (namespace, pod)\n          *\n          on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n        )\n        *\n        on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      ))\n    '),[a.PODS_BY_NETWORK_OUT]:r.a('\n      topk(25, sort_desc(\n        (\n          sum(rate(container_network_transmit_bytes_total{ container="POD", pod!= ""}[5m])) BY (namespace, pod)\n          *\n          on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n        )\n        *\n        on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      ))\n    '),[a.NODES_BY_CPU]:r.a('\n      topk(25, sort_desc(\n        avg_over_time(instance:node_cpu:rate:sum[5m])\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      ))\n    '),[a.NODES_BY_MEMORY]:r.a('\n      topk(25, sort_desc(\n        (node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes)\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      ))\n    '),[a.NODES_BY_STORAGE]:r.a('\n      topk(25, sort_desc(\n        (\n          sum by (instance) (max by (device, instance) (node_filesystem_size_bytes{device=~"/.*"}))\n          -\n          sum by (instance) (max by (device, instance) (node_filesystem_avail_bytes{device=~"/.*"}))\n        )\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      ))\n    '),[a.NODES_BY_PODS]:r.a('\n      topk(25, sort_desc(\n        sum(avg_over_time(kubelet_running_pods[5m])) BY (node)\n        *\n        on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      ))\n    '),[a.NODES_BY_NETWORK_IN]:r.a('\n      topk(25, sort_desc(\n        sum(instance:node_network_receive_bytes_excluding_lo:rate1m) BY (instance)\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      ))\n    '),[a.NODES_BY_NETWORK_OUT]:r.a('\n      topk(25, sort_desc(\n        sum(instance:node_network_transmit_bytes_excluding_lo:rate1m) BY (instance)\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      ))\n    '),[a.PROJECTS_BY_CPU]:r.a('\n      topk(25, sort_desc(\n        sum by (namespace) (\n          (\n            sum(avg_over_time(pod:container_cpu_usage:sum{container="",pod!=""}[5m])) BY (namespace, pod)\n            *\n            on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n          )\n          *\n          on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n        )\n      ))\n    '),[a.PROJECTS_BY_MEMORY]:r.a('\n      topk(25, sort_desc(\n        sum by (namespace) (\n          (\n            sum(avg_over_time(container_memory_working_set_bytes{container="",pod!=""}[5m])) BY (namespace, pod)\n            *\n            on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n          )\n          *\n          on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n        )\n      ))\n    '),[a.PROJECTS_BY_STORAGE]:r.a('\n      topk(25, sort_desc(\n        sum by (namespace) (\n          (\n            sum(avg_over_time(pod:container_fs_usage_bytes:sum{container="", pod!=""}[5m])) BY (namespace, pod)\n            *\n            on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n          )\n          *\n          on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n        )\n      ))\n    '),[a.PROJECTS_BY_PODS]:r.a('\n      topk(25, sort_desc(\n        count by (namespace) (\n            topk without(uid) (1, kube_running_pod_ready)\n            *\n            ignoring(node,uid) group_right node_namespace_pod:kube_pod_info:\n          *\n          on(node) group_left() (max by (node) (kube_node_role{role=~"<%= nodeType %>"})))\n        ))\n    '),[a.PROJECTS_BY_NETWORK_IN]:r.a('\n      topk(25, sort_desc(\n        sum by (namespace) (\n          (\n            sum(rate(container_network_receive_bytes_total{ container="POD", pod!= ""}[5m])) BY (namespace, pod)\n            *\n            on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n          )\n          *\n          on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n        )\n      ))\n    '),[a.PROJECTS_BY_NETWORK_OUT]:r.a('\n      topk(25, sort_desc(\n        sum by (namespace) (\n          (\n            sum(rate(container_network_transmit_bytes_total{ container="POD", pod!= ""}[5m])) BY (namespace, pod)\n            *\n            on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n          )\n          *\n          on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n        )\n      ))\n    ')},o={[a.MEMORY_TOTAL]:r.a('\n      sum(\n        node_memory_MemTotal_bytes\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    '),[a.MEMORY_UTILIZATION]:r.a('\n      sum(\n        (node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes)\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    '),[a.MEMORY_REQUESTS]:r.a('\n      sum(\n        kube_pod_resource_request{resource="memory"}\n        *\n        on(node) group_left(role) (\n          max by (node) (kube_node_role{role=~"<%= nodeType %>"})\n        )\n      )\n    '),[a.NETWORK_UTILIZATION]:r.a('\n      sum(\n        (\n          instance:node_network_transmit_bytes_excluding_lo:rate1m\n          +\n          instance:node_network_receive_bytes_excluding_lo:rate1m\n        )\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    '),[a.CPU_UTILIZATION]:r.a('\n      sum(\n        1 - sum without (mode) (rate(node_cpu_seconds_total{mode=~"idle|iowait|steal"}[2m]))\n        *\n        on(instance) group_left() (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node","(.*)")\n        )\n      )\n    '),[a.CPU_TOTAL]:r.a('\n      sum(\n        kube_node_status_capacity{resource="cpu",unit="core"}\n        *\n        on(node) group_left(role) (\n          max by (node) (kube_node_role{role=~"<%= nodeType %>"})\n        )\n      )\n    '),[a.CPU_REQUESTS]:r.a('\n      sum(\n        kube_pod_resource_request{resource="cpu"}\n        *\n        on(node) group_left(role) (\n          max by (node) (kube_node_role{role=~"<%= nodeType %>"})\n        )\n      )\n    '),[a.STORAGE_UTILIZATION]:r.a('\n      sum(\n        (\n          max by (device, instance) (node_filesystem_size_bytes{device=~"/.*"})\n          -\n          max by (device, instance) (node_filesystem_free_bytes{device=~"/.*"})\n        )\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    '),[a.STORAGE_TOTAL]:r.a('\n      sum(\n        max by (device, instance) (node_filesystem_size_bytes{device=~"/.*"})\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    '),[a.POD_UTILIZATION]:r.a('\n      count(\n        (\n          topk without(uid) (1, kube_running_pod_ready)\n          *\n          ignoring(node,uid) group_right node_namespace_pod:kube_pod_info:\n        )\n        *\n        on(node) group_left() (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      )\n    '),[a.NETWORK_IN_UTILIZATION]:r.a('\n      sum(\n        instance:node_network_receive_bytes_excluding_lo:rate1m\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    '),[a.NETWORK_OUT_UTILIZATION]:r.a('\n      sum(\n        instance:node_network_transmit_bytes_excluding_lo:rate1m\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    ')},i=e=>({[a.NETWORK_UTILIZATION]:[{query:o[a.NETWORK_IN_UTILIZATION]({nodeType:e}),desc:"in"},{query:o[a.NETWORK_OUT_UTILIZATION]({nodeType:e}),desc:"out"}]}),c=e=>({[a.PODS_BY_CPU]:s[a.PODS_BY_CPU]({nodeType:e}),[a.PODS_BY_MEMORY]:s[a.PODS_BY_MEMORY]({nodeType:e}),[a.PODS_BY_STORAGE]:s[a.PODS_BY_STORAGE]({nodeType:e}),[a.PODS_BY_NETWORK_IN]:s[a.PODS_BY_NETWORK_IN]({nodeType:e}),[a.PODS_BY_NETWORK_OUT]:s[a.PODS_BY_NETWORK_OUT]({nodeType:e}),[a.NODES_BY_CPU]:s[a.NODES_BY_CPU]({nodeType:e}),[a.NODES_BY_MEMORY]:s[a.NODES_BY_MEMORY]({nodeType:e}),[a.NODES_BY_STORAGE]:s[a.NODES_BY_STORAGE]({nodeType:e}),[a.NODES_BY_PODS]:s[a.NODES_BY_PODS]({nodeType:e}),[a.NODES_BY_NETWORK_IN]:s[a.NODES_BY_NETWORK_IN]({nodeType:e}),[a.NODES_BY_NETWORK_OUT]:s[a.NODES_BY_NETWORK_OUT]({nodeType:e}),[a.PROJECTS_BY_CPU]:s[a.PROJECTS_BY_CPU]({nodeType:e}),[a.PROJECTS_BY_MEMORY]:s[a.PROJECTS_BY_MEMORY]({nodeType:e}),[a.PROJECTS_BY_STORAGE]:s[a.PROJECTS_BY_STORAGE]({nodeType:e}),[a.PROJECTS_BY_PODS]:s[a.PROJECTS_BY_PODS]({nodeType:e}),[a.PROJECTS_BY_NETWORK_IN]:s[a.PROJECTS_BY_NETWORK_IN]({nodeType:e}),[a.PROJECTS_BY_NETWORK_OUT]:s[a.PROJECTS_BY_NETWORK_OUT]({nodeType:e})}),l=e=>({[a.CPU_UTILIZATION]:{utilization:o[a.CPU_UTILIZATION]({nodeType:e}),total:o[a.CPU_TOTAL]({nodeType:e}),requests:o[a.CPU_REQUESTS]({nodeType:e})},[a.MEMORY_UTILIZATION]:{utilization:o[a.MEMORY_UTILIZATION]({nodeType:e}),total:o[a.MEMORY_TOTAL]({nodeType:e}),requests:o[a.MEMORY_REQUESTS]({nodeType:e})},[a.STORAGE_UTILIZATION]:{utilization:o[a.STORAGE_UTILIZATION]({nodeType:e}),total:o[a.STORAGE_TOTAL]({nodeType:e})},[a.POD_UTILIZATION]:{utilization:o[a.POD_UTILIZATION]({nodeType:e})}})},5746:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(5807),o=n(5674);n(5712);t.a=({resourceQuota:e})=>{var t,n;const{t:i}=Object(r.useTranslation)(),c=Object.keys(null!==(n=null===(t=e.status)||void 0===t?void 0:t.hard)&&void 0!==n?n:{}).map(t=>{var n;const r=e.status.hard[t],i=null===(n=e.status.used)||void 0===n?void 0:n[t],{label:c,percent:l}=Object(o.a)({resourceName:t,used:i,hard:r});return a.createElement("div",{key:t,className:"co-resource-quota__chart","data-test":"resource-quota-gauge-chart"},a.createElement(s.b,{data:{x:l+"%",y:l},thresholds:[{value:90},{value:101}],title:t,label:c}))});return a.createElement("div",{className:"co-resource-quota-chart-row"},c.length?c:a.createElement(a.Fragment,null,i("console-app~No quota")))}},5747:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(5748),o=n(5674);n(5712);t.a=({appliedClusterResourceQuota:e,namespace:t})=>{var n,i,c,l;const{t:u}=Object(r.useTranslation)(),d=null===(i=null===(n=e.status)||void 0===n?void 0:n.namespaces)||void 0===i?void 0:i.find(e=>e.namespace===t),p=Object.keys(null!==(l=null===(c=null==d?void 0:d.status)||void 0===c?void 0:c.hard)&&void 0!==l?l:{}).map(t=>{var n,r,i,c,l;const u=null===(r=null===(n=e.status.total)||void 0===n?void 0:n.hard)||void 0===r?void 0:r[t],p=null===(c=null===(i=e.status.total)||void 0===i?void 0:i.used)||void 0===c?void 0:c[t],m=null===(l=d.status.used)||void 0===l?void 0:l[t],h=Object(o.b)(u,p),b=100-h,{label:f,percent:g}=Object(o.a)({resourceName:t,used:m,hard:u}),v=h-g;return a.createElement("div",{key:t,className:"co-resource-quota__chart","data-test":"resource-quota-gauge-chart"},a.createElement(s.a,{data:[{x:"Namespace",y:g},{x:"Other namespaces",y:v},{x:"Unused",y:b}],title:t,label:f}))});return a.createElement("div",{className:"co-resource-quota-chart-row"},p.length?p:a.createElement(a.Fragment,null,u("console-app~No quota")))}},5748:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(0),r=n(2232),s=n(6044),o=n(6045),i=n(6046),c=n(6047),l=n(6048),u=n(18),d=n.n(u),p=n(7),m=n(1943),h=n(5);const b=({data:e,query:t="",title:n,ariaChartLinkLabel:u,ariaChartTitle:b,ariaDescription:f,usedLabel:g,label:v,secondaryTitle:E,className:y})=>{var O;const{t:_}=Object(p.useTranslation)(),[k,T]=Object(h.Ic)(),R=g||_("public~used"),j=E||R,S=v||_("No data"),N=e.filter(e=>"Namespace"===e.x);return a.createElement(m.a,{className:d()("graph-wrapper--title-center graph-wrapper--gauge",y),ref:k,title:n},a.createElement(m.b,{query:t,ariaChartLinkLabel:u},a.createElement(r.a,{ariaTitle:b||n,ariaDesc:f,data:e,height:T,padding:0,labels:({datum:{x:e,y:t}})=>_("public~{{x}}: {{y}}%",{x:e,y:t}),width:T,subTitle:j,colorScale:100===(null===(O=N[0])||void 0===O?void 0:O.y)?[s.a.value,o.a.value,i.a.value]:[c.a.value,l.a.value,i.a.value],title:S})))}},5749:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(5674),o=n(119);n(5869);t.a=({hard:e,used:t})=>{const{t:n}=Object(r.useTranslation)(),i=Object.keys(e||{}).reduce((n,a)=>Object(s.b)(e[a],null==t?void 0:t[a])>=100?n+1:n,0);return a.createElement("div",{className:"co-resource-quota__summary"},n("console-shared~{{count}} resource",{count:Object.keys(e||{}).length}),", ",i>0?a.createElement(a.Fragment,null,a.createElement(o.m,null)," ",n("console-shared~{{count}} resource reached quota",{count:i})):n("console-shared~none are at quota"))}},5784:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(0);const r=a.createContext({infrastructureLoaded:!0,infrastructureError:null})},5791:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(0),r=n(363),s=n(7),o=n(14),i=n(1409),c=n(52),l=n(2229);n(5792);const u=({resources:e,getOperatorsWithStatuses:t,title:n,linkTo:u,Row:d,Component:p,isResolved:m})=>{const{t:h}=Object(s.useTranslation)(),b=r.a(e).some(e=>e.loadError),f=t(e),g=Object(i.a)(f).sort((e,t)=>e.operators[0].metadata.name.localeCompare(t.operators[0].metadata.name)),v=g.every(e=>e.status.health===c.a.OK),E=a.useCallback(()=>a.createElement("div",{className:"co-status__operator-skeleton"}),[]);return f.length?a.createElement(l.StatusPopupSection,{firstColumn:a.createElement(a.Fragment,null,a.createElement("span",null,n),a.createElement("span",{className:"text-secondary co-status__operator-detail"}," ",h("console-shared~({{operatorStatusLength}} installed)",{operatorStatusLength:f.length}))),secondColumn:h("console-shared~Status")},b?a.createElement("div",{className:"text-secondary"},h("console-shared~Not available")):!v&&g.map(e=>a.createElement(d,{key:e.operators[0].metadata.uid,Component:p,operatorStatus:e,LoadingComponent:E,isResolved:m})),a.createElement(l.default,{value:h("console-shared~All {{status}}",{status:f[0].status.title.toLowerCase()}),icon:f[0].status.icon},a.createElement(o.Link,{to:u},h("console-shared~View all")))):null}},5792:function(e,t,n){},5793:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return N}));var a=n(0),r=n(22),s=n(31),o=n(14),i=n(7),c=n(69),l=n(13),u=n(192),d=n(434),p=n(295),m=n(5387),h=n(5388),b=n(15),f=n(4375),g=n(4364),v=n(4376),E=n(58),y=n(8),O=n(10),_=n(5738),k=n(108),T=n(206),R=n(1417);const j={kind:Object(y.Hb)(O.ClusterVersionModel),namespaced:!1,name:"version",isList:!1},S=({labelSelector:e})=>{const{t:t}=Object(i.useTranslation)(),n=Object(T.a)(b.O.CLUSTER_VERSION),[s,,c]=Object(R.a)(e),[l,u]=Object(k.a)(n?j:{}),d=Object(b.we)()&&n&&u&&Object(y.db)(l)&&!e;return a.createElement(f.default,{error:!r.a(c)},d&&a.createElement(v.StatusItem,{key:"clusterUpdate",Icon:b.n,message:t("public~A cluster version update is available")},a.createElement(o.Link,{to:"/settings/cluster?showVersions"},t("public~Update cluster"))),s.map(e=>a.createElement(v.default,{key:Object(E.h)(e,e.rule.id),alert:e})))},N=Object(s.connect)(e=>({k8sModels:e.k8s.getIn(["RESOURCES","models"])}))(({k8sModels:e})=>{const t=Object(c.z)(c.f),[n]=Object(l.kc)(l.gb),r=a.useMemo(()=>((e,t)=>e.filter(e=>{if(Object(c.g)(e)||Object(c.d)(e)||Object(l.hb)(e)||Object(l.fb)(e)){const n=e;return!(n.properties.additionalResource&&!n.properties.additionalResource.optional)||!!t.get(n.properties.additionalResource.kind)}return!0}))([...t,...n],e).map(e=>{if(Object(l.Kb)(e)||Object(l.Ib)(e)||Object(l.Jb)(e)){const t=e.properties.popupComponent?{popupComponent:()=>Promise.resolve(e.properties.popupComponent)}:{};return Object.assign(Object.assign({},e),{properties:Object.assign(Object.assign({},e.properties),t)})}return e}),[t,n,e]),s=a.useMemo(()=>r.findIndex(e=>Object(c.c)(e)||Object(l.Hb)(e)),[r]),{t:b}=Object(i.useTranslation)(),f=[];if(r.forEach(t=>{if(Object(c.g)(t)||Object(l.Kb)(t))f.push({title:t.properties.title,Component:a.createElement(_.d,{subsystem:t.properties,models:e})});else if(Object(c.d)(t)||Object(l.Ib)(t)){const{disallowedControlPlaneTopology:n}=t.properties;if((null==n?void 0:n.length)&&n.includes(window.SERVER_FLAGS.controlPlaneTopology))return;f.push({title:t.properties.title,Component:a.createElement(_.b,{subsystem:t.properties,models:e})})}else(Object(c.e)(t)||Object(l.Jb)(t))&&f.push({title:t.properties.title,Component:a.createElement(_.c,{subsystem:t.properties})})}),-1!==s){const e=[],t=[];r.forEach(n=>{Object(l.Hb)(n)?t.push(n.properties):Object(c.c)(n)&&e.push(n.properties)}),f.splice(s,0,{title:"Operators",Component:a.createElement(_.a,{operatorExtensions:e,dynamicOperatorSubsystems:t})})}return a.createElement(u.a,{"data-test-id":"status-card",className:"co-overview-card--gradient",isClickable:!0,isSelectable:!0},a.createElement(d.a,{actions:{actions:a.createElement(a.Fragment,null,a.createElement(o.Link,{to:"/monitoring/alerts","data-test":"status-card-view-alerts"},b("public~View alerts"))),hasNoOffset:!1,className:"co-overview-card__actions"}},a.createElement(p.a,null,b("public~Status"))),a.createElement(g.default,null,a.createElement(m.a,{className:"co-overview-status__health",hasGutter:!0},f.map(e=>a.createElement(h.a,{key:e.title,"data-test":e.title},e.Component)))),a.createElement(S,null))})},5805:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(0),r=n(19),s=n(7),o=n(15),i=n(984),c=n(5851),l=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const u=({openProjectModal:e})=>{const{t:t}=Object(s.useTranslation)(),n=Object(o.Fe)(o.O.CAN_CREATE_NS);return Object(o.Fe)(o.O.CAN_CREATE_PROJECT)?a.createElement(s.Trans,{t:t,ns:"devconsole"}," or ",a.createElement(r.a,{isInline:!0,variant:"link",onClick:e},"create a Project")):n?a.createElement(s.Trans,{t:t,ns:"devconsole"}," or ",a.createElement(r.a,{isInline:!0,variant:"link",onClick:e},"create a Namespace")):null};t.b=e=>{var{onCreate:t,title:n,children:r}=e,s=l(e,["onCreate","title","children"]);const[,u]=Object(o.ue)(),d=Object(i.a)(),p=a.useCallback(()=>{d({onSubmit:e=>{var n;u(null===(n=e.metadata)||void 0===n?void 0:n.name),t&&t(e)}})},[t,u,d]);return a.createElement(c.a,Object.assign({},s,{title:n}),r(p))}},5806:function(e,t,n){"use strict";n.d(t,"b",(function(){return I})),n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return A}));var a=n(0),r=n(22),s=n(7),o=n(205),i=n(165),c=n(682),l=n(354),u=n(294),d=n(192),p=n(434),m=n(516),h=n(164),b=n(295),f=n(13),g=n(4382),v=n(4365),E=n(762),y=n(5670),O=n(982),_=n(1406),k=n(5745),T=n(10),R=n(517),j=n(108),S=n(8),N=n(4366),P=n(1200),C=n(5856);const w=[C.d,C.e],I=Object(y.a)(({watchPrometheus:e,stopWatchPrometheusQuery:t,prometheusResults:n,utilizationQuery:r,totalQuery:s,title:o,TopConsumerPopover:i,humanizeValue:c,byteDataType:l,namespace:u,isDisabled:d=!1,limitQuery:p,requestQuery:m,setLimitReqState:h})=>{let b,f,v,E,y,O,k,T,j,S=!1;const{duration:N}=Object(P.useUtilizationDuration)();return a.useEffect(()=>{if(!d)return e(r,u,N),s&&e(s,u),p&&e(p,u,N),m&&e(m,u,N),()=>{t(r,N),s&&t(s),p&&t(p,N),m&&t(m,N)}},[e,t,N,r,s,u,d,p,m]),d||([b,f]=Object(R.b)(n,r,N),[v,E]=Object(R.b)(n,s),[O,k]=Object(R.b)(n,p,N),[T,j]=Object(R.b)(n,m,N),y=Object(_.a)(v),S=!b||s&&!v||p&&!O),a.createElement(g.default,{title:o,utilization:b,limit:O,requested:T,error:f||E||k||j,isLoading:S,humanizeValue:c,byteDataType:l,query:[r,p,m],max:y&&y.length?y[0].y:null,TopConsumerPopover:i,setLimitReqState:h})}),x=Object(y.a)(({watchPrometheus:e,stopWatchPrometheusQuery:t,prometheusResults:n,queries:r,title:s,TopConsumerPopovers:o,humanizeValue:i,byteDataType:c,namespace:l,isDisabled:u=!1})=>{const{duration:d}=Object(P.useUtilizationDuration)();a.useEffect(()=>{if(!u)return r.forEach(t=>e(t.query,l,d)),()=>{r.forEach(e=>t(e.query,d))}},[e,t,d,r,l,u]);const p=[];let m=!1,h=!1;return u||r.forEach(e=>{var t;const[a,r]=Object(R.b)(n,e.query,d);return r?(m=!0,!1):a?void p.push((null===(t=Object(_.b)(a,e.desc,null,g.trimSecondsXMutator))||void 0===t?void 0:t[0])||[]):(h=!0,!1)}),a.createElement(g.MultilineUtilizationItem,{title:s,data:p,error:m,isLoading:h,humanizeValue:i,byteDataType:c,queries:r,TopConsumerPopovers:o})}),D=({machineConfigPools:e,onNodeSelect:t,selectedNodes:n})=>{const{t:r}=Object(s.useTranslation)(),[d,p]=a.useState(!1),m=e.sort((e,t)=>{const n=["worker","master"],a=n.indexOf(e.metadata.name),r=n.indexOf(t.metadata.name);return-1===a&&-1===r?e.metadata.name.localeCompare(t.metadata.name):-1===a?1:-1===r?-1:a-r}).map(e=>{const t="master"===e.metadata.name?"control plane":e.metadata.name;return a.createElement(o.a,{hasCheckbox:!0,key:e.metadata.name,value:t,isSelected:n.includes(e.metadata.name)},t)});return a.createElement(l.a,{role:"menu","aria-label":r("public~Filter by Node type"),onSelect:t,isOpen:d,selected:n,onOpenChange:e=>p(e),toggle:e=>a.createElement(i.a,{ref:e,onClick:e=>p(e),variant:"plainText"},r("public~Filter by Node type"),n.length>0&&a.createElement(c.a,{className:"pf-v5-u-ml-sm",isRead:!0},n.length))},a.createElement(u.a,null,m))},A=()=>{const{t:e}=Object(s.useTranslation)(),[t,n]=Object(j.a)({isList:!0,kind:Object(S.Hb)(T.MachineConfigPoolModel)}),[o,i]=a.useState([]),[c]=Object(f.kc)(f.Y),[l]=Object(f.kc)(f.X),u=r.a(o)?".+":o.join("|"),[g,y]=a.useMemo(()=>[Object(k.d)(u),Object(k.b)(u)],[u]);return n&&a.createElement(d.a,{"data-test-id":"utilization-card",isClickable:!0,isSelectable:!0},a.createElement(p.a,{actions:{actions:a.createElement(a.Fragment,null,a.createElement(m.a,null,a.createElement(h.a,null,a.createElement(D,{machineConfigPools:t,onNodeSelect:(e,t)=>{const n="control plane"===t?"master":t;o.includes(n)?i(o.filter(e=>e!==n)):i([...o,n])},selectedNodes:o})),a.createElement(h.a,null,a.createElement(N.UtilizationDurationDropdown,null)))),hasNoOffset:!1,className:void 0}},a.createElement(b.a,{"data-test":"utilization-card__title"},e("public~Cluster utilization"))),a.createElement(v.default,null,a.createElement(C.b.Provider,{value:u},a.createElement(I,{title:e("public~CPU"),utilizationQuery:g[k.a.CPU_UTILIZATION].utilization,totalQuery:g[k.a.CPU_UTILIZATION].total,requestQuery:g[k.a.CPU_UTILIZATION].requests,TopConsumerPopover:C.a,humanizeValue:O.h}),a.createElement(I,{title:e("public~Memory"),utilizationQuery:g[k.a.MEMORY_UTILIZATION].utilization,totalQuery:g[k.a.MEMORY_UTILIZATION].total,requestQuery:g[k.a.MEMORY_UTILIZATION].requests,TopConsumerPopover:C.c,humanizeValue:O.f,byteDataType:E.a.BinaryBytes}),a.createElement(I,{title:e("public~Filesystem"),utilizationQuery:g[k.a.STORAGE_UTILIZATION].utilization,totalQuery:g[k.a.STORAGE_UTILIZATION].total,TopConsumerPopover:C.g,humanizeValue:O.f,byteDataType:E.a.BinaryBytes}),a.createElement(x,{title:e("public~Network transfer"),queries:y[k.a.NETWORK_UTILIZATION],humanizeValue:O.j,TopConsumerPopovers:w}),a.createElement(I,{title:e("public~Pod count"),utilizationQuery:g[k.a.POD_UTILIZATION].utilization,TopConsumerPopover:C.f,humanizeValue:O.k}),c.map(({uid:e,properties:t})=>{var n,r,s;return a.createElement(I,{key:e,title:t.title,utilizationQuery:t.getUtilizationQuery(o),totalQuery:null===(n=t.getTotalQuery)||void 0===n?void 0:n.call(t,o),humanizeValue:t.humanize,TopConsumerPopover:t.TopConsumerPopover,requestQuery:null===(r=t.getRequestQuery)||void 0===r?void 0:r.call(t,o),limitQuery:null===(s=t.getLimitQuery)||void 0===s?void 0:s.call(t,o)})}),l.map(({uid:e,properties:t})=>a.createElement(x,{key:e,title:t.title,queries:t.getUtilizationQueries(o),humanizeValue:t.humanize,TopConsumerPopovers:t.TopConsumerPopovers})))))}},5807:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return g}));var a=n(0),r=n(515),s=n(6028),o=n(6029),i=n(18),c=n.n(i),l=n(7),u=n(1943),d=n(1197),p=n(436),m=n(5),h=n(1406);const b=[{value:67},{value:92}],f=({data:e,error:t,humanize:n=m.ec,invert:i=!1,loading:d,query:p="",remainderLabel:h,themeColor:f=r.a.green,thresholds:g=b,title:v,ariaChartLinkLabel:E,ariaChartTitle:y,usedLabel:O,label:_,secondaryTitle:k,className:T})=>{const{t:R}=Object(l.useTranslation)(),[j,S]=Object(m.Ic)(),N=!t&&!d,P=d?R("Loading"):t,C=O||R("public~used"),w=k||C,I=_||(e?n(e.y).string:void 0)||R("No data");return a.createElement(u.a,{className:c()("graph-wrapper--title-center graph-wrapper--gauge",T),ref:j,title:v},a.createElement(u.b,{query:p,ariaChartLinkLabel:E},a.createElement(s.a,{ariaTitle:y||v,data:g,height:S,padding:0,width:S,y:"value"},a.createElement(o.a,{labels:({datum:{x:e,y:t}})=>e?`${e} ${C}`:`${t} ${h||R("available")}`,data:N?e:{y:0},invert:i,padding:0,subTitle:N?w:"",themeColor:f,thresholds:g,title:P||I}))))},g=({humanize:e=m.ec,invert:t,namespace:n,percent:r=0,query:s,remainderLabel:o,secondaryTitle:i,thresholds:c,title:u,usedLabel:b})=>{const{t:g}=Object(l.useTranslation)(),[v,E,y]=Object(d.usePrometheusPoll)({endpoint:p.a.QUERY,namespace:n,query:s}),[O]=v?Object(h.a)(v,null,e).map(({label:e,y:t})=>({x:e,y:t})):[{x:e(r).string,y:r}];return a.createElement(f,{data:O,error:!!E&&g("No data"),invert:t,label:O.x,loading:y,query:s,remainderLabel:o,secondaryTitle:i,thresholds:c,title:u,usedLabel:b})}},5828:function(e,t,n){},5838:function(e,t,n){"use strict";n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return N}));var a=n(0),r=n(137),s=n(116),o=n(16),i=n(22),c=n(240),l=n(7),u=n(13),d=n(694),p=n(4374),m=n(108),h=n(10),b=n(8),f=n(5853),g=n(5854),v=n(5855),E=n(5858),y=n(5859),O=n(5658),_=n(5860),k=n(5864);const T=[{Card:g.a},{Card:v.a},{Card:k.a}],R=[{Card:f.a},{Card:E.a}],j=[{Card:y.a}],S=(e,t)=>s.a(t,t=>{if("NamespaceDashboard"!==t.spec.location)return!1;const n=o.a(t,"spec.namespaceDashboard.namespaces"),a=o.a(t,"spec.namespaceDashboard.namespaceSelector");return!(!i.a(n)||!i.a(a))||(!!c.a(n,e.metadata.name)||!i.a(a)&&new b.e(a).matches(e))}),N=({obj:e})=>{const{t:t}=Object(l.useTranslation)(),[n]=Object(u.jc)(),[s]=Object(m.a)({isList:!0,kind:Object(b.Hb)(h.ConsoleLinkModel),optional:!0}),o=S(e,s),i={obj:e,namespaceLinks:o},c=!!o.length,f=a.useMemo(()=>c?[{Card:_.a},...j]:j,[c]);return a.createElement(a.Fragment,null,"dev"===n&&a.createElement(r.b,null,a.createElement("title",null,t("public~Project overview"))),a.createElement(O.a.Provider,{value:i},a.createElement(d.default,null,a.createElement(p.default,{mainCards:T,leftCards:R,rightCards:f}))))}},5851:function(e,t,n){"use strict";var a=n(0),r=n(155),s=n(40),o=n(1945),i=n(5),c=(n(5871),function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n});t.a=e=>{var{badge:t,title:n,children:l,listComponent:u}=e,d=c(e,["badge","title","children","listComponent"]);return a.createElement("div",{className:"odc-project-list-page"},a.createElement(i.Z,{title:n,badge:t},l),a.createElement(r.a,{className:"co-divider"}),a.createElement(s.c,Object.assign({},d,{showTitle:!1,kind:"Project",ListComponent:u||o.ProjectsTable,canCreate:!1,filterLabel:"by name or display name",textFilter:"project-name"})))}},5852:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n(5);const s=()=>Promise.all([n.e(17),n.e(25),n.e(0),n.e(1),n.e(4),n.e(3),n.e(6),n.e(5),n.e(7),n.e(11),n.e(8),n.e(9),n.e(10),n.e(16),n.e(14),n.e(12),n.e(2),n.e(13),n.e(15),n.e(18),n.e(26),n.e(33),n.e(65),n.e(237)]).then(n.bind(null,6058)).then(e=>e.OverviewListPage),o=e=>a.createElement(r.c,Object.assign({loader:s},e))},5853:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var a=n(160),r=n(4440),s=n(501),o=n(0),i=n(18),c=n.n(i),l=n(7),u=n(192),d=n(434),p=n(295),m=n(296),h=n(19),b=n(4379),f=n(2239),g=n(15),v=n(5),E=n(10),y=n(5658),O=n(14);const _=()=>{var e,t,n;const{obj:i}=o.useContext(y.a),_=a.a(i.metadata.labels).sort(),k=r.a(_,3),T=s.a(i.metadata.labels,k),R=null===(e=i.metadata.annotations)||void 0===e?void 0:e["openshift.io/description"],j=Object(v.uc)(E.ProjectModel,i.metadata.name)+"/details",S=null===(n=null===(t=i.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n["maistra.io/member-of"],{t:N}=Object(l.useTranslation)();return o.createElement(u.a,{"data-test-id":"details-card",isClickable:!0,isSelectable:!0},o.createElement(d.a,{actions:{actions:o.createElement(o.Fragment,null,o.createElement(O.Link,{to:j,"data-test":"details-card-view-all"},N("public~View all"))),hasNoOffset:!1,className:"co-overview-card__actions"}},o.createElement(p.a,null,N("public~Details"))),o.createElement(m.a,null,o.createElement(b.default,null,o.createElement(f.b,{isLoading:!i,title:N("public~Name")},Object(g.dd)(i)),o.createElement(f.b,{isLoading:!i,title:N("public~Requester")},Object(g.Bd)(i)||o.createElement("span",{className:"text-muted"},N("public~No requester"))),o.createElement(f.b,{isLoading:!i,title:N("public~Labels")},o.createElement("div",{className:"co-project-dashboard__details-labels"},o.createElement(v.L,{kind:E.ProjectModel.kind,labels:T}),_.length>3&&o.createElement(h.a,{variant:"link"},o.createElement(O.Link,{to:j},N("public~View all"))))),o.createElement(f.b,{isLoading:!i,title:N("public~Description")},o.createElement("span",{className:c()({"text-muted":!R,"co-project-dashboard-details-card__description":R})},R||N("public~No description"))),S&&o.createElement(f.b,{isLoading:!i,title:N("public~Service mesh")},o.createElement(g.X,null)," ",N("public~Service mesh enabled")))))}},5854:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(0),r=n(7),s=n(192),o=n(434),i=n(295),c=n(5387),l=n(4364),u=n(15),d=n(139),p=n(69),m=n(5658),h=n(5738),b=n(5793);const f=()=>{var e;const{obj:t}=a.useContext(m.a),n=Object(p.z)(p.f),f=a.useMemo(()=>{return(e=n,e.filter(p.e)).find(e=>"Image Vulnerabilities"===e.properties.title);var e},[n]),{metadata:{name:g}}=t,{t:v}=Object(r.useTranslation)();return a.createElement(s.a,{"data-test-id":"status-card",className:"co-overview-card--gradient"},a.createElement(o.a,null,a.createElement(i.a,null,v("public~Status"))),t?a.createElement(a.Fragment,null,a.createElement(l.default,null,a.createElement(c.a,{className:"co-overview-status__health",hasGutter:!0},a.createElement("div",{className:"co-status-card__health-item","data-test":"project-status"},a.createElement(u.cc,{status:null===(e=t.status)||void 0===e?void 0:e.phase,className:"co-icon-and-text--lg"})),f&&a.createElement(h.c,{subsystem:f.properties,namespace:g}))),a.createElement(b.a,{labelSelector:{namespace:g}})):a.createElement(d.g,null))}},5855:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(0),r=n(7),s=n(192),o=n(434),i=n(295),c=n(4365),l=n(762),u=n(13),d=n(5),p=n(5658),m=n(5744),h=n(5806),b=n(4366),f=n(5857);const g=[f.d,f.e],v=()=>{var e;const{t:t}=Object(r.useTranslation)(),{obj:n}=a.useContext(p.a),v=null===(e=null==n?void 0:n.metadata)||void 0===e?void 0:e.name,[E,y]=a.useMemo(()=>[Object(m.d)(v),Object(m.b)(v)],[v]),[O]=Object(u.kc)(u.Fb);return a.createElement(s.a,{"data-test-id":"utilization-card",isClickable:!0,isSelectable:!0},a.createElement(o.a,{actions:{actions:a.createElement(a.Fragment,null,a.createElement(b.UtilizationDurationDropdown,null)),hasNoOffset:!1,className:void 0}},a.createElement(i.a,null,t("public~Utilization"))),a.createElement(c.default,null,a.createElement(f.f.Provider,{value:v},a.createElement(h.b,{title:t("public~CPU"),humanizeValue:d.Yb,utilizationQuery:E[m.a.CPU_USAGE],requestQuery:E[m.a.CPU_REQUESTS],TopConsumerPopover:f.a,namespace:v}),a.createElement(h.b,{title:t("public~Memory"),humanizeValue:d.Wb,utilizationQuery:E[m.a.MEMORY_USAGE],requestQuery:E[m.a.MEMORY_REQUESTS],byteDataType:l.a.BinaryBytes,TopConsumerPopover:f.c,namespace:v}),a.createElement(h.b,{title:t("public~Filesystem"),humanizeValue:d.Wb,utilizationQuery:E[m.a.FILESYSTEM_USAGE],byteDataType:l.a.BinaryBytes,TopConsumerPopover:f.b,namespace:v}),a.createElement(h.a,{title:t("public~Network transfer"),humanizeValue:d.ac,queries:y[m.a.NETWORK_UTILIZATION],TopConsumerPopovers:g,namespace:v}),a.createElement(h.b,{title:t("public~Pod count"),humanizeValue:d.bc,utilizationQuery:E[m.a.POD_COUNT],namespace:v}),O.map(({uid:e,properties:t})=>{var n,r,s;return a.createElement(h.b,{key:e,title:t.title,humanizeValue:t.humanize,utilizationQuery:t.getUtilizationQuery(v),requestQuery:null===(n=t.getRequestQuery)||void 0===n?void 0:n.call(t,v),limitQuery:null===(r=t.getLimitQuery)||void 0===r?void 0:r.call(t,v),totalQuery:null===(s=t.getTotalQuery)||void 0===s?void 0:s.call(t,v),namespace:v,TopConsumerPopover:t.TopConsumerPopover})}))))}},5856:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"g",(function(){return m})),n.d(t,"f",(function(){return h})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return f}));var a=n(0),r=n(7),s=n(5745),o=n(5735),i=n(10),c=n(5);const l=a.createContext(".+"),u=(e,t,n)=>{const r=a.useContext(l);return a.useMemo(()=>{const a=Object(s.c)(r);return[{query:a[e],model:i.ProjectModel,metric:"namespace"},{query:a[t],model:i.PodModel,metric:"pod"},{query:a[n],model:i.NodeModel,metric:"instance"}]},[n,r,e,t])},d=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(s.a.PROJECTS_BY_CPU,s.a.PODS_BY_CPU,s.a.NODES_BY_CPU);return a.createElement(o.b,{title:t("public~CPU"),current:e,consumers:n,humanize:c.Yb})},p=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(s.a.PROJECTS_BY_MEMORY,s.a.PODS_BY_MEMORY,s.a.NODES_BY_MEMORY);return a.createElement(o.b,{title:t("public~Memory"),current:e,consumers:n,humanize:c.Wb})},m=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(s.a.PROJECTS_BY_STORAGE,s.a.PODS_BY_STORAGE,s.a.NODES_BY_STORAGE);return a.createElement(o.b,{title:t("public~Filesystem"),current:e,consumers:n,humanize:c.Wb})},h=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=a.useContext(l),u=a.useMemo(()=>{const e=Object(s.c)(n);return[{query:e[s.a.PROJECTS_BY_PODS],model:i.ProjectModel,metric:"namespace"},{query:e[s.a.NODES_BY_PODS],model:i.NodeModel,metric:"node"}]},[n]);return a.createElement(o.b,{title:t("public~Pod count"),current:e,consumers:u,humanize:c.bc})},b=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(s.a.PROJECTS_BY_NETWORK_IN,s.a.PODS_BY_NETWORK_IN,s.a.NODES_BY_NETWORK_IN);return a.createElement(o.b,{title:t("public~Network in"),current:e,consumers:n,humanize:c.ac})},f=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(s.a.PROJECTS_BY_NETWORK_OUT,s.a.PODS_BY_NETWORK_OUT,s.a.NODES_BY_NETWORK_OUT);return a.createElement(o.b,{title:t("public~Network out"),current:e,consumers:n,humanize:c.ac})}},5857:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return m})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return b}));var a=n(0),r=n(7),s=n(5735),o=n(5744),i=n(10),c=n(5);const l=a.createContext(""),u=e=>{const t=a.useContext(l);return{consumers:a.useMemo(()=>[{query:Object(o.c)(t)[e],model:i.PodModel,metric:"pod"}],[e,t]),namespace:t}},d=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(o.a.PODS_BY_CPU);return a.createElement(s.b,Object.assign({title:t("public~CPU"),current:e,humanize:c.Yb},n))},p=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(o.a.PODS_BY_MEMORY);return a.createElement(s.b,Object.assign({title:t("public~Memory"),current:e,humanize:c.Wb},n))},m=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(o.a.PODS_BY_FILESYSTEM);return a.createElement(s.b,Object.assign({title:t("public~Filesystem"),current:e,humanize:c.Wb},n))},h=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(o.a.PODS_BY_NETWORK_IN);return a.createElement(s.b,Object.assign({title:t("public~Network in"),current:e,humanize:c.ac},n))},b=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(o.a.PODS_BY_NETWORK_OUT);return a.createElement(s.b,Object.assign({title:t("public~Network out"),current:e,humanize:c.ac},n))}},5858:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var a=n(0),r=n(16),s=n(7),o=n(5670),i=n(406),c=n(192),l=n(434),u=n(295),d=n(296),p=n(967),m=n(10),h=n(4378),b=n(2231),f=n(5),g=n(8),v=n(15),E=n(5658),y=n(69),O=n(13),_=n(108),k=n(198);const T=Object(o.a)(({projectName:e,watchK8sResource:t,stopWatchK8sResource:n,resources:s,model:o,mapper:c,additionalResources:l,additionalDynamicResources:u})=>{var d;a.useEffect(()=>{if(e){const a=((e,t)=>({kind:e.crd?Object(g.Hb)(e):e.kind,isList:!0,prop:"resource",namespace:t}))(o,e);return t(a),l&&l.forEach(n=>t(Object.assign(Object.assign({},n),{namespace:e}))),()=>{n(a),l&&l.forEach(n)}}},[t,n,e,o,l]);const p=r.a(s.resource,"data",[]),m=r.a(s.resource,"loaded"),b=r.a(s.resource,"loadError"),f=l?l.reduce((e,t)=>(e[t.prop]=r.a(s[t.prop],"data"),e),{}):{},v=!l||l.filter(e=>!e.optional).every(e=>r.a(s[e.prop],"loaded")),E=!!l&&l.filter(e=>!e.optional).some(e=>!!r.a(s[e.prop],"loadError")),y=Object(_.b)(u||{}),O=null===(d=Object.values(y).find(e=>e.loadError))||void 0===d?void 0:d.loadError,k=Object.keys(y).every(e=>y[e].loaded);return a.createElement(i.a,null,a.createElement(h.ResourceInventoryItem,{kind:o,isLoading:!(e&&m&&v&&k),namespace:e,error:!!b||E||O,resources:p,additionalResources:f,mapper:c,dataTest:"resource-inventory-item"}))}),R=()=>{const e=Object(y.z)(y.t),[t]=Object(O.kc)(O.mb),[n]=Object(O.kc)(O.Eb),{obj:r}=a.useContext(E.a),o=Object(v.dd)(r),h=Object(f.Dc)({group:m.SecretModel.apiGroup,resource:m.SecretModel.plural,namespace:o,verb:"list"}),{t:g}=Object(s.useTranslation)();return a.createElement(c.a,{"data-test-id":"inventory-card"},a.createElement(l.a,null,a.createElement(u.a,null,g("public~Inventory"))),a.createElement(d.a,null,a.createElement(p.a,{hasGutter:!0},a.createElement(T,{projectName:o,model:m.DeploymentModel}),a.createElement(T,{projectName:o,model:m.DeploymentConfigModel}),a.createElement(T,{projectName:o,model:m.StatefulSetModel}),a.createElement(T,{projectName:o,model:m.PodModel,mapper:b.getPodStatusGroups}),a.createElement(T,{projectName:o,model:m.PersistentVolumeClaimModel,mapper:b.getPVCStatusGroups}),a.createElement(T,{projectName:o,model:m.ServiceModel}),a.createElement(T,{projectName:o,model:m.RouteModel}),a.createElement(T,{projectName:o,model:m.ConfigMapModel}),h&&a.createElement(T,{projectName:o,model:m.SecretModel}),a.createElement(T,{projectName:o,model:m.VolumeSnapshotModel,mapper:b.getVSStatusGroups}),e.map(e=>a.createElement(T,{key:e.properties.model.kind,projectName:o,model:e.properties.model,mapper:e.properties.mapper,additionalResources:e.properties.additionalResources})),t.map(e=>a.createElement(T,{key:e.properties.model.kind,projectName:o,model:e.properties.model,mapper:e.properties.mapper,additionalDynamicResources:e.properties.additionalResources})),n.map(({uid:e,properties:{component:t}})=>a.createElement(k.a,{key:e},a.createElement(i.a,null,a.createElement(t,{projectName:o})))))))}},5859:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var a=n(0),r=n(367),s=n(16),o=n(31),i=n(192),c=n(434),l=n(295),u=n(1950),d=n(5670),p=n(10),m=n(69),h=n(13),b=n(5734),f=n(5658),g=n(15),v=n(7),E=n(14);const y=Object(d.a)(({watchK8sResource:e,stopWatchK8sResource:t,resources:n,projectName:r,viewEvents:s})=>(a.useEffect(()=>{if(r){const n=(e=>({isList:!0,kind:p.EventModel.kind,prop:"events",namespace:e}))(r);return e(n),()=>{t(n)}}},[e,t,r]),a.createElement(u.RecentEventsBody,{events:n.events,moreLink:s}))),O=Object(o.connect)(e=>({models:e.k8s.getIn(["RESOURCES","models"])}))(Object(d.a)(({watchK8sResource:e,stopWatchK8sResource:t,resources:n,projectName:o,models:i})=>{const c=Object(m.z)(m.k),[l]=Object(h.kc)(h.lb),d=a.useMemo(()=>[...c,...l].filter(e=>{const t=i.get(e.properties.k8sResource.kind);return t&&t.namespaced}),[c,l,i]);a.useEffect(()=>{if(o)return d.forEach((t,n)=>{e(Object(b.a)(Object.assign(Object.assign({},t.properties.k8sResource),{namespace:o}),n))}),()=>{d.forEach((e,n)=>{t(Object(b.a)(e.properties.k8sResource,n))})}},[e,t,o,d]);const p=a.useMemo(()=>r.a(d.map((e,t)=>s.a(n,[Object(b.a)(e.properties.k8sResource,t).prop,"data"],[]).filter(t=>!e.properties.isActivity||e.properties.isActivity(t)).map(t=>{var n,a,r,s;return{resource:t,timestamp:e.properties.getTimestamp?e.properties.getTimestamp(t):null,loader:null===(a=null===(n=e)||void 0===n?void 0:n.properties)||void 0===a?void 0:a.loader,component:null===(s=null===(r=e)||void 0===r?void 0:r.properties)||void 0===s?void 0:s.component}}))),[d,n]),f=a.useMemo(()=>d.every((e,t)=>s.a(n,[Object(b.a)(e.properties.k8sResource,t).prop,"loaded"])),[d,n]);return a.createElement(u.OngoingActivityBody,{loaded:o&&f&&0!==i.size,resourceActivities:p})})),_=()=>{const{obj:e}=a.useContext(f.a),t=Object(g.dd)(e),n=`/k8s/ns/${t}/events`,{t:r}=Object(v.useTranslation)();return a.createElement(i.a,{"data-test-id":"activity-card",className:"co-overview-card--gradient",isClickable:!0,isSelectable:!0},a.createElement(c.a,{actions:{actions:a.createElement(a.Fragment,null,a.createElement(E.Link,{to:n,"data-test":"view-events-link"},r("public~View events"))),hasNoOffset:!1,className:"co-overview-card__actions"}},a.createElement(l.a,null,r("public~Activity"))),a.createElement(u.default,{className:"co-project-dashboard__activity-body"},a.createElement(O,{projectName:t}),a.createElement(y,{projectName:t,viewEvents:n})))}},5860:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(0),r=n(461),s=n(7),o=n(192),i=n(434),c=n(295),l=n(296),u=n(5861),d=n(5863),p=n(5658);const m=()=>{const{namespaceLinks:e}=a.useContext(p.a),{t:t}=Object(s.useTranslation)();return a.createElement(o.a,{"data-test-id":"launcher-card"},a.createElement(i.a,null,a.createElement(c.a,null,t("public~Launcher"))),a.createElement(l.a,null,a.createElement(u.a,null,r.a(e,"spec.text").map(e=>a.createElement(d.a,{key:e.metadata.uid,consoleLink:e})))))}},5861:function(e,t,n){"use strict";var a=n(0);n(5862);t.a=({children:e})=>a.createElement("div",{className:"co-launcher-card__body"},e)},5862:function(e,t,n){},5863:function(e,t,n){"use strict";var a=n(0),r=n(173);t.a=({consoleLink:e})=>a.createElement(r.a,{additionalClassName:"co-launcher-card__item",href:e.spec.href,text:e.spec.text,dataTestID:"launcher-item"})},5864:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(0),r=n(7),s=n(192),o=n(434),i=n(295),c=n(296),l=n(967),u=n(406),d=n(976),p=n(5865),m=n(5867),h=n(5870),b=n(10),f=n(5658);const g=()=>{const{obj:e}=a.useContext(f.a),[t,n,g]=Object(d.xb)({groupVersionKind:{kind:b.ResourceQuotaModel.kind,version:b.ResourceQuotaModel.apiVersion},namespace:e.metadata.name,isList:!0}),[v,E,y]=Object(d.xb)({groupVersionKind:{kind:b.AppliedClusterResourceQuotaModel.kind,version:b.AppliedClusterResourceQuotaModel.apiVersion,group:b.AppliedClusterResourceQuotaModel.apiGroup},namespace:e.metadata.name,isList:!0}),{t:O}=Object(r.useTranslation)();return a.createElement(s.a,{"data-test-id":"resource-quotas-card"},a.createElement(o.a,null,a.createElement(i.a,null,O("public~ResourceQuotas"))),a.createElement(c.a,null,a.createElement(p.a,{error:!!g,isLoading:!n},t.length?a.createElement(l.a,{hasGutter:!0},t.map(e=>a.createElement(u.a,{key:e.metadata.uid},a.createElement(m.a,{resourceQuota:e})))):void 0)),a.createElement(o.a,null,a.createElement(i.a,null,O("public~AppliedClusterResourceQuotas"))),a.createElement(c.a,null,a.createElement(p.a,{error:!!y,isLoading:!E,noText:O("public~No AppliedClusterResourceQuotas")},v.length?a.createElement(l.a,{hasGutter:!0},v.map(t=>a.createElement(u.a,{key:t.metadata.uid},a.createElement(h.a,{resourceQuota:t,namespace:e.metadata.name})))):void 0)))}},5865:function(e,t,n){"use strict";var a=n(0),r=n(7);n(5866);t.a=({error:e,isLoading:t,noText:n,children:s})=>{let o;const{t:i}=Object(r.useTranslation)();return e?o=a.createElement("div",{className:"text-secondary"},i("console-shared~Not available")):t?o=a.createElement("div",{className:"skeleton-quota"}):a.Children.count(s)||(o=a.createElement("div",{className:"text-secondary"},n||i("console-shared~No ResourceQuotas"))),a.createElement(a.Fragment,null,o||s)}},5866:function(e,t,n){},5867:function(e,t,n){"use strict";var a=n(0),r=n(516),s=n(164),o=n(1921),i=n(5746),c=n(1407),l=n(99),u=n(10),d=n(5749);t.a=({resourceQuota:e})=>{var t,n,p,m,h;const b=Object.keys(null!==(n=null===(t=e.status)||void 0===t?void 0:t.hard)&&void 0!==n?n:{}),[f,g]=a.useState(b.length<=4),v=null===(p=e.spec)||void 0===p?void 0:p.scopes;return a.createElement(a.Fragment,null,a.createElement(r.a,{hasGutter:!0},a.createElement(s.a,{isFilled:!0},a.createElement(o.a,{onToggle:(e,t)=>g(t),isExpanded:f,toggleContent:a.createElement(l.ResourceLink,{groupVersionKind:{kind:u.ResourceQuotaModel.kind,version:u.ResourceQuotaModel.apiVersion},name:e.metadata.name,namespace:e.metadata.namespace,inline:!0,truncate:!0,dataTest:"resource-quota-link"})})),a.createElement(s.a,null,a.createElement(d.a,{hard:null===(m=e.status)||void 0===m?void 0:m.hard,used:null===(h=e.status)||void 0===h?void 0:h.used}))),f&&a.createElement(a.Fragment,null,v&&a.createElement(c.QuotaScopesInline,{scopes:v}),a.createElement(i.a,{resourceQuota:e})))}},5868:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(5748),o=n(5674);n(5712);t.a=({clusterResourceQuota:e})=>{var t,n,i;const{t:c}=Object(r.useTranslation)(),l=Object.keys(null!==(i=null===(n=null===(t=e.status)||void 0===t?void 0:t.total)||void 0===n?void 0:n.hard)&&void 0!==i?i:{}).map(t=>{var n;const r=e.status.total.hard[t],i=null===(n=e.status.total.used)||void 0===n?void 0:n[t],{label:c,percent:l}=Object(o.a)({resourceName:t,used:i,hard:r});return a.createElement("div",{key:t,className:"co-resource-quota__chart","data-test":"resource-quota-gauge-chart"},a.createElement(s.a,{data:[{x:"Used",y:l},{x:"Unused",y:100-l}],title:t,label:c}))});return a.createElement("div",{className:"co-resource-quota-chart-row"},l.length?l:a.createElement(a.Fragment,null,c("console-app~No quota")))}},5869:function(e,t,n){},5870:function(e,t,n){"use strict";var a=n(0),r=n(516),s=n(164),o=n(1921),i=n(5747),c=n(1407),l=n(99),u=n(10),d=n(5749);t.a=({resourceQuota:e,namespace:t})=>{var n,p,m,h,b,f,g,v,E;const y=Object.keys(null!==(m=null===(p=null===(n=e.status)||void 0===n?void 0:n.total)||void 0===p?void 0:p.hard)&&void 0!==m?m:{}),[O,_]=a.useState(y.length<=4),k=null===(b=null===(h=null==e?void 0:e.spec)||void 0===h?void 0:h.quota)||void 0===b?void 0:b.scopes;return a.createElement(a.Fragment,null,a.createElement(r.a,{hasGutter:!0},a.createElement(s.a,{isFilled:!0},a.createElement(o.a,{onToggle:(e,t)=>_(t),isExpanded:O,toggleContent:a.createElement(l.ResourceLink,{groupVersionKind:{kind:u.AppliedClusterResourceQuotaModel.kind,version:u.AppliedClusterResourceQuotaModel.apiVersion,group:u.AppliedClusterResourceQuotaModel.apiGroup},name:e.metadata.name,namespace:t,inline:!0,truncate:!0})})),a.createElement(s.a,null,a.createElement(d.a,{hard:null===(g=null===(f=e.status)||void 0===f?void 0:f.total)||void 0===g?void 0:g.hard,used:null===(E=null===(v=e.status)||void 0===v?void 0:v.total)||void 0===E?void 0:E.used}))),O&&a.createElement(a.Fragment,null,k&&a.createElement(c.QuotaScopesInline,{scopes:k}),a.createElement(i.a,{appliedClusterResourceQuota:e,namespace:t})))}},5871:function(e,t,n){},6274:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n(13),s=n(986),o=n(69);const i=()=>{const e=Object(o.z)(o.v),t=Object(o.z)(r.Nb);return a.useMemo(()=>Object(s.b)(e,t),[e,t])}},7997:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(14),o=n(978),i=n(5),c=n(15),l=n(473),u=n(6274),d=n(761),p=n(5695),m=n(5805);t.a=Object(o.b)(()=>{const{t:e}=Object(r.useTranslation)(),{ns:t,"*":n}=Object(s.useParams)(),o=Object(s.useNavigate)(),h=e("devconsole~Builds"),b={},f=[],[g,v,E]=Object(c.ef)(d.m,"shipwright-builds"),y=Object(u.a)(),O={showTitle:!1,canCreate:!1},_=y.get("build.openshift.io~v1~BuildConfig"),k=a.useMemo(()=>_?e=>a.createElement(i.c,Object.assign({key:"buildconfigs",loader:_},e)):null,[_]);t&&(b.buildConfig={label:e("devconsole~BuildConfig"),onSelection:()=>`/k8s/ns/${t}/buildconfigs/~new/form`}),k&&f.push({href:"",nameKey:"devconsole~BuildConfigs",component:k,pageData:O});const T=Object(c.Fe)("SHIPWRIGHT_BUILD"),R=Object(c.Fe)("SHIPWRIGHT_BUILD_V1ALPHA1"),j=T||R;a.useEffect(()=>{E&&t&&o("shipwright-builds"===g&&j?`/builds/ns/${t}/shipwright-builds`:"/builds/ns/"+t,{replace:!0})},[t,E]),a.useEffect(()=>{E&&t&&v("shipwright-builds"===n?"shipwright-builds":"buildconfigs")},[t,n,E,v]);const S=T?"shipwright.io~v1beta1~Build":"shipwright.io~v1alpha1~Build",N=y.get(S),[P]=Object(l.a)(S),C=a.useMemo(()=>j&&N?e=>a.createElement(i.c,Object.assign({key:"shipwright-builds",loader:N,badge:Object(c.Ec)(P.badge)},e)):null,[j,N,P.badge]);return t&&C&&(b.shipwrightBuild={label:e("devconsole~Shipwright Build"),onSelection:()=>`/k8s/ns/${t}/${S}/~new/form`},f.push({href:"shipwright-builds",nameKey:"devconsole~Shipwright Builds",component:C,pageData:O})),t?_&&1===f.length?a.createElement(p.b,{variant:p.a.light,hideApplications:!0},a.createElement(i.c,{loader:_})):a.createElement(p.b,{variant:p.a.light,hideApplications:!0},a.createElement(c.ob,{title:h,pages:f,menuActions:b,telemetryPrefix:"Builds"})):a.createElement(m.b,{title:h},t=>a.createElement(r.Trans,{t:e,ns:"devconsole"},"Select a Project to view the list of builds",a.createElement(m.a,{openProjectModal:t}),"."))})}}]);
//# sourceMappingURL=builds-chunk-de991f742b633791d4bb.min.js.map
{"version":3,"sources":["webpack:///./public/components/secrets/create-secret/index.tsx","webpack:///./packages/dev-console/src/components/hpa/index.ts","webpack:///./packages/pipelines-plugin/src/models/index.ts","webpack:///./packages/git-service/src/types/index.ts","webpack:///./packages/pipelines-plugin/src/components/pipelines/const.ts","webpack:///./packages/topology/src/utils/topology-utils.ts","webpack:///./public/components/secrets/create-secret/utils.ts","webpack:///./packages/git-service/src/index.ts","webpack:///./packages/git-service/src/services/base-service.ts","webpack:///./public/components/secrets/create-secret/DropableFileInput.tsx","webpack:///./packages/pipelines-plugin/src/types/index.ts","webpack:///./packages/console-shared/src/utils/proxy.ts","webpack:///./public/components/secrets/create-secret/SecretFormWrapper.tsx","webpack:///./packages/dev-console/src/components/import/import-types.ts","webpack:///./public/components/secrets/create-secret/SecretSubForm.tsx","webpack:///./public/components/secrets/create-secret/SourceSecretForm.tsx","webpack:///./public/components/secrets/create-secret/BasicAuthSubform.tsx","webpack:///./public/components/secrets/create-secret/SSHAuthSubform.tsx","webpack:///./public/components/secrets/create-secret/PullSecretForm.tsx","webpack:///./public/components/secrets/create-secret/CreateConfigSubform.tsx","webpack:///./public/components/secrets/create-secret/PullSecretCredentialEntry.tsx","webpack:///./public/components/secrets/create-secret/UploadConfigSubform.tsx","webpack:///./public/components/secrets/create-secret/WebHookSecretForm.tsx","webpack:///./public/components/secrets/create-secret/GenericSecretForm.tsx","webpack:///./public/components/secrets/create-secret/KeyValueEntryForm.tsx","webpack:///./packages/git-service/src/types/git.ts","webpack:///./packages/git-service/src/services/github-service.ts","webpack:///./packages/git-service/src/services/bitbucket-service.ts","webpack:///./packages/git-service/src/services/gitlab-service.ts","webpack:///./packages/git-service/src/services/gitea-service.ts","webpack:///./packages/git-service/src/utils/build-tool-type-detector.ts","webpack:///./packages/pipelines-plugin/src/utils/pipeline-filter-reducer.ts","webpack:///./packages/pipelines-plugin/src/components/import/import-types.ts","webpack:///./packages/dev-console/src/components/import/validation-schema.ts","webpack:///./packages/pipelines-plugin/src/models/pipelines.ts","webpack:///./packages/pipelines-plugin/src/utils/pipeline-utils.ts","webpack:///./packages/dev-console/src/utils/yup-validation-util.ts","webpack:///./packages/topology/src/utils/application-utils.ts","webpack:///./packages/pipelines-plugin/src/types/coreTekton.ts","webpack:///./packages/pipelines-plugin/src/types/pipelineRun.ts","webpack:///./packages/pipelines-plugin/src/types/taskRun.ts","webpack:///./packages/pipelines-plugin/src/types/computedStatus.ts","webpack:///./packages/git-service/src/utils/import-strategy-detector.ts","webpack:///./packages/knative-plugin/src/topology/const.ts","webpack:///./packages/pipelines-plugin/src/utils/pipeline-augment.ts","webpack:///./public/components/secrets/create-secret/EditSecret.tsx","webpack:///./public/components/secrets/create-secret/CreateSecret.tsx","webpack:///./packages/git-service/src/types/repo.ts","webpack:///./packages/git-service/src/types/build-tools.ts","webpack:///./packages/git-service/src/services/index.ts","webpack:///./packages/git-service/src/utils/build-tool-detector.ts","webpack:///./packages/git-service/src/services/git-service.ts","webpack:///./packages/git-service/src/utils/index.ts","webpack:///./packages/git-service/src/utils/dockerfile-parser.ts","webpack:///./packages/topology/src/data-transforms/transform-utils.ts","webpack:///./packages/pipelines-plugin/src/components/repository/consts.ts","webpack:///./packages/dev-console/src/components/import/import-validation-utils.ts","webpack:///./packages/pipelines-plugin/src/components/pipelines/pipeline-metrics/pipeline-metrics-utils.ts","webpack:///./packages/dev-console/src/components/import/serverless/serverless-utils.ts","webpack:///./packages/topology/src/elements/OdcBaseNode.ts","webpack:///./packages/pipelines-plugin/src/components/repository/repository-form-utils.ts","webpack:///./packages/dev-console/src/components/health-checks/health-checks-probe-validation-utils.ts","webpack:///./packages/pipelines-plugin/src/components/pac/const.ts","webpack:///./packages/topology/src/extensions/topology.ts","webpack:///./packages/topology/src/operators/components/const.ts","webpack:///./packages/git-service/src/utils/serverless-strategy-detector.ts","webpack:///./packages/topology/src/data-transforms/ModelContext.ts","webpack:///./packages/topology/src/elements/BaseNode.ts","webpack:///./packages/dev-console/src/components/NamespacedPage.tsx","webpack:///./packages/topology/src/components/dropdowns/ApplicationDropdown.tsx","webpack:///./packages/topology/src/data-transforms/DataModelProvider.tsx","webpack:///./packages/topology/src/data-transforms/DataModelExtension.tsx","webpack:///./packages/topology/src/data-transforms/TopologyDataRetriever.tsx","webpack:///./packages/topology/src/data-transforms/updateTopologyDataModel.ts","webpack:///./packages/topology/src/data-transforms/data-transformer.ts","webpack:///./packages/topology/src/data-transforms/useMonitoringAlerts.tsx","webpack:///./public/components/graphs/prometheus-rules-hook.ts","webpack:///./packages/topology/src/extensions/index.ts","webpack:///./packages/topology/src/components/dropdowns/NamespaceBarApplicationSelector.tsx","webpack:///./packages/dev-console/src/components/hpa/hpa-utils.ts","webpack:///./packages/dev-console/src/components/hpa/HPAPage.tsx","webpack:///./packages/dev-console/src/components/hpa/HPAFormikForm.tsx","webpack:///./packages/dev-console/src/components/hpa/HPAForm.tsx","webpack:///./packages/dev-console/src/components/hpa/HPADetailsForm.tsx","webpack:///./packages/dev-console/src/components/hpa/HPAUtilizationField.tsx","webpack:///./packages/dev-console/src/components/hpa/validation-utils.ts","webpack:///./packages/dev-console/src/components/hpa/HPAPageHeader.tsx"],"names":["StartedByLabel","StartedByAnnotation","TektonTaskAnnotation","TaskProviders","TektonTaskLabel","TektonResourceLabel","PipelineResourceType","VolumeTypes","SecretAnnotationId","Git","Image","PIPELINE_GA_VERSION","TRIGGERS_GA_VERSION","PIPELINE_UNSIMPLIFIED_METRICS_VERSION","PIPELINE_SERVICE_ACCOUNT","PIPELINE_RUN_AUTO_START_FAILED","DEFAULT_CHART_HEIGHT","DEFAULT_LEGEND_CHART_HEIGHT","DEFAULT_SAMPLES","preferredNameAnnotation","chainsSignedAnnotation","PIPELINE_NAMESPACE","PIPELINERUN_TEMPLATE_NAMESPACE","PIPELINE_CONFIG_NAME","PipelineMetricsLevel","FLAG_TEKTON_V1_ENABLED","FLAG_PIPELINES_OPERATOR_VERSION_1_16_OR_NEWER","FLAG_PIPELINES_OPERATOR_VERSION_1_17_OR_NEWER","WORKLOAD_TYPES","getServiceBindingStatus","FLAGS","get","getCheDecoratorData","consoleLinks","cheConsoleLink","cheURL","spec","href","cheIconURL","applicationMenu","imageURL","getEditURL","vcsURI","gitBranch","contextDir","fullGitURL","gitUrl","branch","baseUrl","resource","owner","name","contextPart","replace","includes","getFullGitURL","getNamespaceDashboardKialiLink","namespace","filterBasedOnActiveApplication","data","application","filter","dc","getRoutesURL","routes","length","getTopologyResourceObject","topologyObject","resources","obj","getResource","node","getData","getResourceKind","updateTopologyResourceApplication","item","itemData","Promise","reject","updates","push","getType","groupResources","groupResource","nextResource","resourceKind","Error","t","kind","all","createTopologyResourceConnection","source","target","replaceTarget","removeTopologyResourceConnection","edge","getSource","getTarget","toDefaultSecretType","typeAbstraction","basicAuth","image","dockerconfigjson","opaque","toTypeAbstraction","secret","type","sshAuth","dockercfg","webhook","generic","generateSecret","s4","Math","floor","random","toString","substring","determineSecretType","stringData","dataKeys","sort","tls","serviceAccountToken","getImageSecretKey","secretType","useSecretTitle","isCreate","useSecretDescription","BaseService","gitsource","this","fileList","getRepoFileList","buildTypes","files","packageJsonContent","getPackageJsonContent","a","b","buildType","e","DroppableFileInput","props","loader","then","c","API_PROXY_URL","convertHeaders","headers","Object","keys","reduce","output","key","consoleProxyFetch","proxyRequest","proxyResponse","post","statusCode","consoleProxyFetchJSON","response","str","JSON","parse","isJSONString","body","SecretFormWrapper","modal","onCancel","navigate","params","existingSecret","defaultSecretType","secretTypeAbstraction","initialSecret","fixed","apiVersion","metadata","setSecret","inProgress","setInProgress","error","setError","setStringData","value","decode","base64StringData","setBase64StringData","disableForm","setDisableForm","title","helptext","cancel","ns","onDataChanged","secretsData","onError","err","onNameChanged","event","newSecret","save","preventDefault","encode","s","onSave","message","renderBody","disabled","className","htmlFor","onChange","id","required","onFormDisable","disable","onSubmit","errorMessage","submitText","helpText","isDisabled","variant","saveButtonText","onClick","ImageStreamActions","GitReadableTypes","GITHUB","GITLAB","GITEA","BITBUCKET","UNSURE","ImportTypes","Resources","BuildOptions","SampleRuntime","ReadableResourcesNames","OpenShift","labelKey","Kubernetes","KnativeService","ReadableBuildOptions","BUILDS","SHIPWRIGHT_BUILD","PIPELINES","DISABLED","ResourcesKinds","TerminationType","InsecureTrafficType","PassthroughInsecureTrafficType","CPUUnits","MemoryUnits","ImportOptions","SecretSubForm","SourceSecretFormWithTranslation","super","state","authType","changeAuthenticationType","bind","setState","authTypes","items","dropDownClassName","selectedKey","SourceSecretForm","BasicAuthSubformWithTranslation","username","password","changeData","BasicAuthSubform","SSHAuthSubform","fileData","endsWith","inputFileData","label","inputFieldHelpText","textareaFieldHelpText","isRequired","PullSecretForm","setAuthType","pullSecretData","jsonContent","secretData","newDataKey","stringify","onchange","credentials","onDisable","CreateConfigSubformWithTranslation","isDockerconfigjson","secretEntriesArray","imageSecretObjectToArray","hasDuplicate","entry","address","email","auth","uid","imageSecretObject","imageSecretArray","newImageSecretEntry","v","k","decodedAuth","parsedAuth","Array","imageSecretsObject","imageSecretArrayToObject","updatedEntry","entryIndex","updatedEntryData","propagateEntryChange","splice","secretEntriesList","entryData","index","removeEntry","addEntry","CreateConfigSubform","PullSecretCredentialEntry","updateEntry","trimmedUsername","trim","trimmedPassword","handleBlurEvent","currentTarget","handleChangeEvent","onBlur","UploadConfigSubformWithTranslation","configFile","parseError","onFileChange","updateState","parsedData","UploadConfigSubform","WebHookSecretFormWithTranslation","WebHookSecretKey","changeWebHookSecretkey","generateWebHookSecret","WebHookSecretForm","GenericSecretFormWithTranslation","genericSecretObjectToArray","genericSecretObject","newGenericSecretEntry","isBinary","isBase64","genericSecretArray","acc","entryID","updatedSecretEntriesArray","genericSecretArrayToObject","GenericSecretForm","KeyValueEntryFormWithTranslation","onValueChange","onKeyChange","inputFileIsBinary","KeyValueEntryForm","SecretType","GitProvider","ImportStrategy","GithubService","getAuthProvider","PERSONAL_ACCESS_TOKEN","BASIC_AUTH","OAUTH","secretContent","getRepoMetadata","url","repoName","host","defaultBranch","ref","devfilePath","dockerfilePath","isRepoReachable","client","repos","repo","status","Reachable","RateLimitExceeded","PrivateRepo","InvalidGitTypeSelected","Unreachable","getRepoBranchList","resp","listBranches","branches","map","r","getContents","specificPath","path","isArray","getRepoLanguageList","listLanguages","languages","createRepoWebhook","token","webhookURL","sslVerification","webhookSecret","Accept","Authorization","active","config","content_type","insecure_ssl","events","AddWebhookBaseURL","method","isFilePresent","getFileContent","Buffer","from","isDockerfilePresent","isTektonFolderPresent","getDockerfileContent","isFuncYamlPresent","getFuncYamlContent","isDevfilePresent","getDevfileContent","authOpts","BitbucketService","baseURL","isServer","fetchJson","requestMethod","authHeaders","requestHeaders","fetch","ok","text","json","slug","ResourceNotFound","values","isServerURL","f","language","skip_cert_verification","filePath","GitlabService","getRepo","resolve","Projects","show","fullName","path_with_namespace","getProjectId","projectID","Branches","Repositories","tree","file","includeFolder","push_events","merge_requests_events","enable_ssl_verification","default_branch","RepositoryFiles","showRaw","find","full_name","GiteaService","authorization","allowInsecure","GiteaRepoUnreachable","authorization_header","branch_filter","console","warn","BuildTools","expectedRegexp","priority","RegExp","join","customDetection","gitService","packageJson","detectBuildTypes","detectedFiles","test","t1","t2","SucceedConditionReason","pipelineRunStatus","pipelineRun","conditions","succeedCondition","cancelledCondition","reason","PipelineRunStopped","PipelineRunCancelled","Cancelling","Succeeded","Failed","Running","TaskRunCancelled","Cancelled","PipelineRunStopping","TaskRunStopping","CreateContainerConfigError","ExceededNodeResources","ExceededResourceQuota","PipelineRunPending","Pending","ConditionCheckFailed","Skipped","pipelineRunStatusTitle","pipelineFilterReducer","pipeline","latestRun","Other","pipelineTitleFilterReducer","pipelineRunTitleFilterReducer","pipelineRunFilterReducer","pipelineStatusFilter","filters","selected","pipelineRunStatusFilter","phases","taskRunFilterReducer","taskRun","taskRunFilterTitleReducer","PipelineType","hostnameRegex","pathRegex","gitUrlRegex","projectNameValidationSchema","shape","matches","applicationNameValidationSchema","max","when","is","deploymentValidationSchema","replicas","transform","cv","undefined","min","Number","MAX_SAFE_INTEGER","maxSafeInteger","resourcesValidationSchema","oneOf","serverlessValidationSchema","scaling","minpods","maxpods","limit","parent","concurrencytarget","concurrencylimit","concurrencyutilization","autoscale","autoscalewindow","autoscalewindowUnit","unit","convertToSec","domainMapping","of","excludeEmptyString","domainName","split","routeValidationSchema","secure","termination","hostname","unknownTargetPort","typeError","integer","limitsValidationSchema","cpu","request","requestUnit","limitUnit","ensure","memory","imageValidationSchema","build","strategy","tag","gitValidationSchema","showGitType","dockerValidationSchema","containerPort","devfileValidationSchema","devfileContent","devfileHasError","devfileSuggestedResources","buildValidationSchema","isiValidationSchema","importFlowPipelineTemplateValidationSchema","isPipelineEnabled","buildOption","pipelineType","PAC","templateSelected","color","PipelineModel","apiGroup","labelPluralKey","plural","abbr","namespaced","labelPlural","crd","PipelineModelV1Beta1","PipelineRunModel","PipelineRunModelV1Beta1","TaskModel","TaskModelV1Beta1","TaskRunModel","TaskRunModelV1Beta1","CustomRunModelV1Beta1","PipelineResourceModel","ClusterTaskModel","ConditionModel","TriggerBindingModel","ClusterTriggerBindingModel","TriggerTemplateModel","EventListenerModel","RepositoryModel","TektonConfigModel","TektonHubModel","TektonResultModel","task","inputs","runAfter","ListFilterId","ListFilterLabels","PipelineResourceListFilterId","PullRequest","Cluster","Storage","CloudEvent","appendPipelineRunStatus","taskRuns","isFinallyTasks","finally","tasks","Idle","tr","labels","pipelineTask","taskStatus","mTask","pipelineTaskName","completionTime","startTime","date","Date","getTime","duration","getPipelineTasks","out","taskList","forEach","flag","i","taskRef","nextToFlag","getFinallyTasksWithStatus","containerToLogSourceStatus","container","lastState","waiting","terminated","getLatestPipelineRunStatus","pipelineRuns","latestPipelineRun","PipelineNotStarted","getPipelineRunParams","pipelineParams","param","default","getPipelineRunWorkspaces","pipelineWorkspaces","workspace","calculateDuration","endTime","long","start","durationInSeconds","pipelineRunDuration","run","updateServiceAccount","secretName","originalServiceAccount","updateImagePullSecrets","updatedServiceAccount","secrets","imagePullSecrets","associateServiceAccountToSecret","isImageSecret","serviceAccount","catch","getAnnotationKey","suffix","getSecretAnnotations","annotation","existingAnnotations","count","annotationKey","pipelinesTab","kindObj","getMatchedPVCs","pvcResources","ownerResourceName","ownerResourceKind","pvc","ownerReferences","some","reference","getPipeline","pipelines","p","getTriggerTemplates","triggerTemplates","tt","resourcetemplates","rt","pipelineRef","getEventListeners","eventListeners","et","triggers","template","returnValidPipelineModel","returnValidPipelineRunModel","returnValidTaskModel","TaskRunResultsAnnotations","TaskRunResultsAnnotationValue","TaskRunResults","getSbomTaskRun","taskruns","annotations","KEY","SBOM","hasExternalLink","sbomTaskRun","TYPE","EXTERNAL_LINK","getSbomLink","results","taskResults","getImageUrl","PipelineRun","pipelineResults","IMAGE_REPOSITORY","taskRunStatus","getPipelineRunStatus","conditionsMessage","condition","match","result","totalSucceeded","Completed","Incomplete","isInteger","bitBucketUserNameRegex","sanitizeApplicationValue","applicationType","updateItemAppLabel","patch","op","updateResourceApplication","instanceName","prevApplication","patches","listsValue","list","safeLoadList","model","queryParams","accessCheckRequired","canListResource","group","verb","allowed","safeKill","deleteWebhooks","buildConfigs","deploymentsAnnotations","gitType","secretList","webhooks","requests","bc","secretResource","webhookType","webhookTypeObj","secretReference","secretGenericResource","secretGittypeResource","cleanUpWorkload","reqs","builds","channelModels","resourceModel","loaded","loadError","resourceBuildConfigs","isBuildConfigPresent","resourceTriggerTemplates","resourceEventListeners","deleteModels","knativeDeleteModels","resourceData","deleteRequest","resourceObj","req","batchDeleteRequests","models","channel","MetricsLevel","LevelTypes","DurationTypes","PipelineRunGroupVersionKind","version","TaskRunGroupVersionKind","ComputedStatus","CustomRunStatus","ImportStrategyList","DEVFILE","DOCKERFILE","SERVERLESS_FUNCTION","S2I","detectImportStrategies","repository","isServerlessEnabled","addServerlessFxStrategy","detectedStrategies","repositoryStatus","GitTypeNotDetected","detectedCustomData","strategies","TYPE_EVENT_SOURCE","TYPE_EVENT_SINK","TYPE_KAFKA_SINK","TYPE_EVENT_SOURCE_KAFKA","TYPE_EVENT_SOURCE_LINK","TYPE_EVENT_SINK_LINK","TYPE_KAFKA_CONNECTION_LINK","TYPE_EVENT_PUB_SUB","TYPE_EVENT_PUB_SUB_LINK","TYPE_KNATIVE_SERVICE","TYPE_REVISION_TRAFFIC","TYPE_KNATIVE_REVISION","TYPE_SINK_URI","KNATIVE_GROUP_NODE_WIDTH","KNATIVE_GROUP_NODE_HEIGHT","KNATIVE_GROUP_NODE_PADDING","EVENT_MARKER_RADIUS","URI_KIND","getLatestRun","runs","field","pipelineSpec","succeededCondition","augmentRunsToData","pipelineruns","prsForPipeline","pr","getRunStatusColor","pftoken","FailedToStart","getPipelineFromPipelineRun","pipelineName","getTaskStatus","pipelinerun","totalTasks","executedPipeline","totalPipelineRunTasks","totalPipelineRunCustomTasks","plrTasks","tRun","plrTaskLength","skippedTaskLength","skippedTasks","pipelineRunHasFailure","pipelineRunIsCancelled","unhandledTasks","getResourceModelFromTaskKind","getSafeTaskResourceKind","getResourceModelFromBindingKind","getSafeBindingResourceKind","getModelReferenceFromTaskKind","countRunningTasks","taskStatuses","shouldHidePipelineRunStop","shouldHidePipelineRunStopForTaskRunStatus","taskRunStatusObj","shouldHidePipelineRunCancel","shouldHidePipelineRunCancelForTaskRunStatus","SecretLoadingWrapper","fixedKeys","EditSecret","isList","prop","CreateSecret","RepoStatus","Maven","expectedRegexps","expectedFiles","Gradle","Golang","Ruby","NodeJS","ModernWebApp","PHP","Python","Perl","WebAppDependencies","matchedFiles","isModernWebApp","dep","dependencies","getGitService","gitProvider","SSH","NO_AUTH","gitSource","DockerFileParser","content","parsedCommands","parsedContent","cmd","exposeCommand","args","getContextDirByName","extractContextDir","buildsData","buildConfigData","buildConfig","pipelinesData","pathContextParam","createTopologyNodeData","overviewItem","defaultIcon","operatorBackedService","monitoringAlerts","dcUID","deploymentsLabels","deploymentsName","builderImageIcon","isOperatorBackedService","editURL","vcsRef","builderImage","isKnativeResource","getTopologyNodeItem","nodeProps","children","WorkloadModelProps","width","height","visible","style","padding","getTopologyEdgeItems","edges","targetNode","deployment","edgeApiVersion","edgeKind","edgeName","edgeExists","getTopologyGroupItems","groupName","collapsed","mergeGroup","newGroup","existingGroups","g","existingGroup","mergeGroupData","mergeGroups","newGroups","addToTopologyDataModel","newModel","graphModel","dataModelDepicters","nodes","n","existing","depicter","getWorkloadResources","kindsMap","workloadTypes","res","resKind","getBaseWatchedResources","deploymentConfigs","optional","deployments","daemonSets","pods","jobs","cronJobs","statefulSets","services","hpas","RepositoryFields","RepoAnnotationFields","RepositoryRuntimes","RepositoryLabels","REPOSITORY","URL_REPO","URL_ORG","SHA","EVENT_TYPE","RepositoryAnnotations","SHA_MESSAGE","SHA_URL","REPO_URL","BRANCH","PacConfigurationTypes","defaultRepositoryFormValues","githubAppAvailable","INVALID","showOverviewPage","yamlData","user","autoAttach","AccessTokenDocLinks","WebhookDocLinks","gitProviderTypesHosts","validationSchema","project","git","docker","devfile","serverless","route","limits","healthChecks","pac","hasDomain","domain","startsWith","detectGitType","createComponentName","nameString","kebabCaseStr","detectGitRepoName","pop","PipelineQuery","MetricsQueryPrefix","metricsQueries","prefix","TEKTON_PIPELINES_CONTROLLER","PIPELINE_TASK_LEVEL","PIPELINE_SUCCESS_RATIO","NUMBER_OF_PIPELINE_RUNS","PIPELINERUN_TASKRUN_LEVEL","PIPELINE_RUN_TASK_RUN_DURATION","PIPELINE_RUN_DURATION","UNSIMPLIFIED_METRICS_LEVEL","formatValue","string","toExponential","formatPositiveValue","abs","formatDate","format","formatTimeSeriesValues","samples","span","metric","newValues","y","x","setHours","isNaN","end","step","getRangeVectorData","xMutator","yMutator","parseFloat","time","getXaxisValues","timespan","xValues","oneDayDuration","numDays","round","d","now","setDate","getDate","slice","getDuration","seconds","sec","hr","PipelineMetricsTimeRangeOptions","getTransformedDataPoints","previousValue","val","currentValue","getAutoscaleWindow","autoscaleValue","defaultAutoscalewindowUnit","DOMAIN_MAPPING_KSVC_INFO_REGEX","removeKsvcInfoFromDomainMapping","dm","getOtherKsvcFromDomainMapping","currentKsvcName","removeDuplicateDomainMappings","allDomainMappings","connectedDomainMappings","Set","hasOtherKsvcDomainMappings","getAllOtherDomainMappingInUse","domainMappings","serviceName","selectedDomain","OdcBaseNode","setModel","dryRunOpt","dryRun","repositoryValidationSchema","accessToken","secretRef","pipelinesAccessTokenValidationSchema","importFlowRepositoryValidationSchema","pipelineEnabled","createRepositoryResources","secretObj","encodedSecret","detectedGitType","repositoryName","generateName","createTokenSecret","gitHost","git_provider","webhook_secret","createRemoteWebhook","authToken","recommendRepositoryName","getPipelineRunTemplate","runtime","runTimeTemplate","pipelineRunTemplateCfg","labelSelector","matchLabels","log","pipelineRunTemplate","getFallbackTemplate","getPipelineRunDefaultTemplate","healthChecksValidationSchema","containerName","showForm","enabled","modified","periodSeconds","initialDelaySeconds","failureThreshold","timeoutSeconds","successThreshold","requestType","httpGet","port","tcpSocket","exec","command","healthChecksProbesValidationSchema","readinessProbe","livenessProbe","startupProbe","PAC_GH_APP_NEW","PAC_GH_APP_DOC","PAC_GH_APP_MANIFEST_API","EVENT_LISTNER_NAME","PAC_SECRET_NAME","PAC_GH_APP_NAME","PAC_INFO","PAC_TEMPLATE_DEFAULT","isTopologyComponentFactory","isTopologyDataModelFactory","isTopologyCreateConnector","isTopologyDisplayFilters","isTopologyDecoratorProvider","TYPE_OPERATOR_BACKED_SERVICE","OPERATOR_GROUP_WIDTH","OPERATOR_GROUP_HEIGHT","OPERATOR_GROUP_PADDING","evaluateFunc","resourceContent","funcJSON","builder","builderEnvs","buildEnvs","runtimeEnvs","envs","isServerlessFxRepository","ExtensibleModel","extensions","extensionsLoaded","watchedResources","updateWatchedResources","extensionKeys","resList","resKey","updateExtension","extension","updateExtensionsLoaded","workloadKeys","getExtensionModels","topologyModel","getters","dataModelGetters","depicters","workloadResources","promises","getter","reconcileModel","dataModelReconcilers","reconciler","isEmptyModel","prev","every","dataModelGetter","dataModelDepicter","dataModelReconciler","onExtensionsLoaded","workloadKey","k1","k2","prioritizedKeys","ModelContext","createAnchorKey","both","BaseNode","anchors","dimensions","dimensionsInitialized","positioned","uncollapsedCenter","position","labelPosition","bottom","shallow","groupBounds","sourceEdges","targetEdges","setDimensions","setBounds","setPosition","isCollapsed","getChildren","isVisible","getInternalBounds","rect","getStyle","getBounds","isGroup","union","clone","getGraph","getEdges","total","nexChild","getAllNodeChildren","bounds","getCenter","point","prevLocation","xOffset","yOffset","child","getPosition","newPosition","updateChildrenPositions","getController","fireEvent","isDimensionsInitialized","anchor","prevCenter","setCenter","ellipse","setGroup","setCollapsed","toModel","isPositioned","getDimensions","translate","NamespacedPageVariants","onNamespaceChange","hideProjects","hideApplications","toolbar","modelFactories","dynamicModelFactories","namespacedDynamicFactories","watchedBaseResources","modelFactory","factoryResources","properties","placeholder","dataSelector","getNamespacedDynamicModelFactories","entries","flattenedResource","resourceKey","opts","extensionReference","internalModel","pluginID","internalReference","flattenResource","Provider","factory","dataModelFactory","dataModelContext","extensionContext","getExtension","current","getDataModel","isResourceDepicted","getDataModelReconciler","trafficData","setResources","resourcesList","debouncedUpdateResources","updatedResources","updateTopologyDataModel","loadErrorKey","getLoadError","isLoaded","extensionsModel","fullModel","getTrafficConnectors","filteredWorkload","nodeType","sourceTrafficNode","wrkld","targetTrafficNode","sourceResourceNode","targetResourceNode","traffic","baseDataModelGetter","baseModel","baseDataModel","typedDataModel","getBaseTopologyDataModel","updateAppGroupChildren","createVisualConnectors","createTrafficConnectors","useMonitoringAlerts","alertsResponse","alertsError","alertsLoading","alertData","alerts","alert","activeAt","rule","evaluationTime","lastEvaluation","ruleAlert","usePrometheusRulesPoll","delay","endpoint","RULES","dispatch","app","allApplicationsTitle","noApplicationsTitle","dropdownTitle","setTitle","buttonClassName","titlePrefix","allSelectorItem","allSelectorKey","allSelectorTitle","noneSelectorItem","noneSelectorKey","noneSelectorTitle","newApplication","userSettingsPrefix","storageKey","VALID_HPA_TARGET_KINDS","getResourceLimitsData","containers","hasCpuLimits","isCpuUtilizationPossible","hasMemoryLimits","isMemoryUtilizationPossible","getLimitWarning","defaultHPAYAML","getDefaultMetric","averageUtilization","createScaleTargetRef","getFormData","existingHPA","hpa","metrics","scaleTargetRef","getYAMLData","getMetricByType","hpaMetrics","metricIndex","findIndex","m","toLowerCase","sanitizeHPAToForm","newFormData","defaultHPA","sanityForSubmit","targetResource","validHPA","getInvalidUsageError","formValues","lackCPULimits","disabledFields","cpuUtilization","lackMemoryLimits","memoryUtilization","metricNames","invalidCPU","invalidMemory","hasCustomMetrics","resourceRef","breakdown","hpaLoaded","hpaError","workloadLoaded","workloadError","fullyLoaded","validSupportedType","light","limitWarning","initialValues","showCanUseYAMLMessage","editorType","YAML","Form","formData","helpers","invalidUsageError","setStatus","submitError","goBack","onReset","errors","handleReset","handleSubmit","isSubmitting","validateForm","isForm","formEditor","yamlEditor","showSamples","setTimeout","flexLayout","formContext","editor","sanitizeTo","yamlContext","lastViewUserSettingKey","submitLabel","disableSubmit","resetLabel","sticky","setFieldValue","nameDisabled","updateField","_event","numValue","parseInt","updatedMetrics","actionClose","onClose","isInline","direction","setOutputAsIntegerFlag","onUpdate","thisErrorMetric","fieldId","isFill","isBox","icon","hpaValidationSchema","minReplicas","maxReplicas","avgUtilization","String","inline","linkTo"],"mappings":"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","file":"dev-console/code-refs/hpa-chunk-f1f55240d77475c7014f.min.js","sourcesContent":["export * from './utils';\nexport * from './const';\nexport * from './SecretFormWrapper';\nexport * from './PullSecretForm';\nexport * from './PullSecretCredentialEntry';\nexport * from './CreateConfigSubform';\nexport * from './UploadConfigSubform';\nexport * from './WebHookSecretForm';\nexport * from './SourceSecretForm';\nexport * from './BasicAuthSubform';\nexport * from './SSHAuthSubform';\nexport * from './GenericSecretForm';\nexport * from './KeyValueEntryForm';\nexport * from './EditSecret';\nexport * from './CreateSecret';\nexport * from './DropableFileInput';\nexport * from './SecretSubForm';\nexport * from './types';\n","export { default as HPAPage } from './HPAPage';\n","export * from './pipelines';\n","export * from './auth';\nexport * from './repo';\nexport * from './git';\nexport * from './build-tools';\n","export enum StartedByLabel {\n  triggers = 'triggers.tekton.dev/eventlistener',\n}\nexport enum StartedByAnnotation {\n  user = 'pipeline.openshift.io/started-by',\n}\nexport enum TektonTaskAnnotation {\n  minVersion = ' tekton.dev/pipelines.minVersion',\n  tags = 'tekton.dev/tags',\n  categories = 'tekton.dev/categories',\n  installedFrom = 'openshift.io/installed-from',\n  semVersion = 'openshift.io/sem-version',\n}\nexport enum TaskProviders {\n  redhat = 'Red Hat',\n  community = 'Community',\n  tektonHub = 'TektonHub',\n  artifactHub = 'ArtifactHub',\n}\nexport enum TektonTaskLabel {\n  providerType = 'operator.tekton.dev/provider-type',\n  version = 'app.kubernetes.io/version',\n}\nexport enum TektonResourceLabel {\n  pipeline = 'tekton.dev/pipeline',\n  pipelinerun = 'tekton.dev/pipelineRun',\n  taskrun = 'tekton.dev/taskRun',\n  pipelineTask = 'tekton.dev/pipelineTask',\n}\n\nexport enum PipelineResourceType {\n  git = 'git',\n  image = 'image',\n  cluster = 'cluster',\n  storage = 'storage',\n}\n\nexport enum VolumeTypes {\n  NoWorkspace = 'noWorkspace',\n  EmptyDirectory = 'emptyDirectory',\n  ConfigMap = 'configMap',\n  Secret = 'secret',\n  PVC = 'pvc',\n  VolumeClaimTemplate = 'volumeClaimTemplate',\n}\n\nexport enum SecretAnnotationId {\n  Git = 'git',\n  Image = 'docker',\n}\n\nexport const SecretAnnotationType = {\n  [SecretAnnotationId.Git]: 'Git Server',\n  [SecretAnnotationId.Image]: 'Image Registry',\n};\n\nexport const PIPELINE_GA_VERSION = '1.4.0';\nexport const TRIGGERS_GA_VERSION = '1.6.0';\nexport const PIPELINE_UNSIMPLIFIED_METRICS_VERSION = '1.5.2';\nexport const PIPELINE_SERVICE_ACCOUNT = 'pipeline';\nexport const PIPELINE_RUN_AUTO_START_FAILED = `bridge/pipeline-run-auto-start-failed`;\n\nexport const DEFAULT_CHART_HEIGHT = 275;\nexport const DEFAULT_LEGEND_CHART_HEIGHT = 375;\nexport const DEFAULT_TIME_RANGE = '1w';\nexport const DEFAULT_REFRESH_INTERVAL = '30s';\nexport const DEFAULT_SAMPLES = 60;\n\n// Annotation for referencing pipeline name in case of PipelineRun with no reference to a Pipeline (embedded pipeline)\nexport const preferredNameAnnotation = 'pipeline.openshift.io/preferredName';\nexport const chainsSignedAnnotation = 'chains.tekton.dev/signed';\n\nexport const PIPELINE_NAMESPACE = 'openshift-pipelines';\nexport const PIPELINERUN_TEMPLATE_NAMESPACE = 'openshift';\nexport const PIPELINE_CONFIG_NAME = 'config';\n\nexport enum PipelineMetricsLevel {\n  PIPELINE_TASK_LEVEL = 'pipeline/task',\n  PIPELINERUN_TASKRUN_LEVEL = 'pipelinerun/taskrun',\n  UNSUPPORTED_LEVEL = 'unsupported',\n  UNSIMPLIFIED_METRICS_LEVEL = 'unsimplified',\n}\n\nexport const FLAG_TEKTON_V1_ENABLED = 'FLAG_TEKTON_V1_ENABLED';\nexport const FLAG_PIPELINES_OPERATOR_VERSION_1_16_OR_NEWER =\n  'PIPELINES_OPERATOR_VERSION_1_16_OR_NEWER';\nexport const FLAG_PIPELINES_OPERATOR_VERSION_1_17_OR_NEWER =\n  'PIPELINES_OPERATOR_VERSION_1_17_OR_NEWER';\n","import { Node, Edge, GraphElement } from '@patternfly/react-topology';\nimport * as GitUrlParse from 'git-url-parse';\nimport i18next from 'i18next';\nimport * as _ from 'lodash';\nimport { getRouteWebURL } from '@console/internal/components/routes';\nimport {\n  K8sResourceKind,\n  K8sResourceKindReference,\n  modelFor,\n  referenceFor,\n  RouteKind,\n} from '@console/internal/module/k8s';\nimport { RootState } from '@console/internal/redux';\nimport { ALLOW_SERVICE_BINDING_FLAG } from '@console/service-binding-plugin/src/const';\nimport OdcBaseNode from '../elements/OdcBaseNode';\nimport { TYPE_OPERATOR_BACKED_SERVICE } from '../operators/components/const';\nimport { TopologyDataObject } from '../topology-types';\nimport { updateResourceApplication } from './application-utils';\nimport { createResourceConnection, removeResourceConnection } from './connector-utils';\n\nexport const WORKLOAD_TYPES = [\n  'deployments',\n  'deploymentConfigs',\n  'daemonSets',\n  'statefulSets',\n  'jobs',\n  'cronJobs',\n  'pods',\n];\n\nexport type CheDecoratorData = {\n  cheURL?: string;\n  cheIconURL?: string;\n};\n\nexport const getServiceBindingStatus = ({ FLAGS }: RootState): boolean =>\n  FLAGS.get(ALLOW_SERVICE_BINDING_FLAG);\n\nexport const getCheDecoratorData = (consoleLinks: K8sResourceKind[]): CheDecoratorData => {\n  const cheConsoleLink = _.find(consoleLinks, ['metadata.name', 'che']);\n  return {\n    cheURL: cheConsoleLink?.spec?.href,\n    cheIconURL: cheConsoleLink?.spec?.applicationMenu?.imageURL,\n  };\n};\n\nconst getFullGitURL = (gitUrl: GitUrlParse.GitUrl, branch?: string, contextDir?: string) => {\n  const baseUrl = `https://${gitUrl.resource}/${gitUrl.owner}/${gitUrl.name}`;\n  if (!branch) {\n    return baseUrl;\n  }\n  const contextPart = contextDir ? `/${contextDir.replace(/^\\//, '')}` : '';\n  if (gitUrl.resource.includes('github')) {\n    return `${baseUrl}/tree/${branch}${contextPart}`;\n  }\n  if (gitUrl.resource.includes('gitlab')) {\n    return `${baseUrl}/-/tree/${branch}${contextPart}`;\n  }\n  if (gitUrl.resource.includes('gitea')) {\n    return `${baseUrl}/src/branch/${branch}${contextPart}`;\n  }\n  // Branch names containing '/' do not work with bitbucket src URLs\n  // https://jira.atlassian.com/browse/BCLOUD-9969\n  if (gitUrl.resource.includes('bitbucket') && !branch.includes('/')) {\n    return `${baseUrl}/src/${branch}${contextPart}`;\n  }\n  return baseUrl;\n};\n\nexport const getEditURL = (\n  vcsURI?: string,\n  gitBranch?: string,\n  cheURL?: string,\n  contextDir?: string,\n) => {\n  if (!vcsURI) {\n    return null;\n  }\n  const fullGitURL = getFullGitURL(GitUrlParse(vcsURI), gitBranch, contextDir);\n  return cheURL ? `${cheURL}/f?url=${fullGitURL}&policies.create=peruser` : fullGitURL;\n};\n\nexport const getNamespaceDashboardKialiLink = (\n  consoleLinks: K8sResourceKind[],\n  namespace: string,\n): string => {\n  const kialiLink = _.find(consoleLinks, ['metadata.name', `kiali-namespace-${namespace}`])?.spec\n    ?.href;\n  return kialiLink || '';\n};\n\n/**\n * filter data based on the active application\n */\nexport const filterBasedOnActiveApplication = (\n  data: K8sResourceKind[],\n  application: string,\n): K8sResourceKind[] => {\n  const PART_OF = 'app.kubernetes.io/part-of';\n  if (!application) {\n    return data;\n  }\n  return data.filter((dc) => {\n    return _.get(dc, ['metadata', 'labels', PART_OF]) === application;\n  });\n};\n\n/**\n * get routes url\n */\nexport const getRoutesURL = (resource: K8sResourceKind, routes: RouteKind[]): string => {\n  if (routes.length > 0 && !_.isEmpty(routes[0].spec)) {\n    return getRouteWebURL(routes[0]);\n  }\n  return null;\n};\n\nexport const getTopologyResourceObject = (topologyObject: TopologyDataObject): K8sResourceKind => {\n  if (!topologyObject) {\n    return null;\n  }\n  return topologyObject.resource || topologyObject.resources?.obj;\n};\n\nexport const getResource = <T = K8sResourceKind>(node: GraphElement): T => {\n  const resource = (node as OdcBaseNode)?.getResource();\n  return (resource as T) || (getTopologyResourceObject(node?.getData()) as T);\n};\n\nexport const getResourceKind = (node: Node): K8sResourceKindReference => {\n  return node instanceof OdcBaseNode\n    ? (node as OdcBaseNode).getResourceKind()\n    : referenceFor(getTopologyResourceObject(node?.getData()));\n};\n\nexport const updateTopologyResourceApplication = (\n  item: Node,\n  application: string,\n): Promise<any> => {\n  const itemData = item?.getData();\n  const resource = getResource(item);\n  if (!item || !resource || !_.size(itemData.resources)) {\n    return Promise.reject();\n  }\n\n  const resources: K8sResourceKind[] = [];\n  const updates: Promise<any>[] = [];\n\n  resources.push(resource);\n\n  if (item.getType() === TYPE_OPERATOR_BACKED_SERVICE) {\n    _.forEach(itemData.groupResources, (groupResource) => {\n      resources.push(groupResource.resource);\n    });\n  }\n\n  for (const nextResource of resources) {\n    const resourceKind = modelFor(referenceFor(nextResource));\n    if (!resourceKind) {\n      return Promise.reject(\n        new Error(\n          i18next.t('topology~Unable to update application, invalid resource type: {{kind}}', {\n            kind: nextResource.kind,\n          }),\n        ),\n      );\n    }\n    updates.push(updateResourceApplication(resourceKind, nextResource, application));\n  }\n\n  return Promise.all(updates);\n};\n\nexport const createTopologyResourceConnection = (\n  source: K8sResourceKind,\n  target: K8sResourceKind,\n  replaceTarget: K8sResourceKind = null,\n): Promise<K8sResourceKind[] | K8sResourceKind> => {\n  if (!source || !target || source === target) {\n    return Promise.reject(\n      new Error(i18next.t('topology~Can not create a connection from a node to itself.')),\n    );\n  }\n\n  return createResourceConnection(source, target, replaceTarget);\n};\n\nexport const removeTopologyResourceConnection = (edge: Edge): Promise<any> => {\n  const source = getResource(edge.getSource());\n  const target = getResource(edge.getTarget());\n\n  if (!source || !target) {\n    return Promise.reject();\n  }\n\n  return removeResourceConnection(source, target);\n};\n\nexport const isOperatorBackedNode = (element: Node | GraphElement): boolean => {\n  if (element?.getData()?.resources?.isOperatorBackedService) {\n    return true;\n  }\n  return element?.hasParent() ? isOperatorBackedNode(element.getParent()) : false;\n};\n","import * as _ from 'lodash-es';\nimport { WebHookSecretKey } from '../../secret';\nimport { useTranslation } from 'react-i18next';\nimport { SecretType, SecretTypeAbstraction } from './const';\n\nexport const toDefaultSecretType = (typeAbstraction: SecretTypeAbstraction): SecretType => {\n  switch (typeAbstraction) {\n    case SecretTypeAbstraction.source:\n      return SecretType.basicAuth;\n    case SecretTypeAbstraction.image:\n      return SecretType.dockerconfigjson;\n    default:\n      return SecretType.opaque;\n  }\n};\n\nexport const toTypeAbstraction = (secret): SecretTypeAbstraction => {\n  const { data, type } = secret;\n  switch (type) {\n    case SecretType.basicAuth:\n    case SecretType.sshAuth:\n      return SecretTypeAbstraction.source;\n    case SecretType.dockerconfigjson:\n    case SecretType.dockercfg:\n      return SecretTypeAbstraction.image;\n    default:\n      if (data?.[WebHookSecretKey] && _.size(data) === 1) {\n        return SecretTypeAbstraction.webhook;\n      }\n      return SecretTypeAbstraction.generic;\n  }\n};\n\nexport const generateSecret = (): string => {\n  // http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n  const s4 = () =>\n    Math.floor((1 + Math.random()) * 0x10000)\n      .toString(16)\n      .substring(1);\n  return s4() + s4() + s4() + s4();\n};\n\nexport const determineSecretType = (stringData): SecretType => {\n  const dataKeys = _.keys(stringData).sort();\n  if (_.isEqual(dataKeys, ['tls.crt', 'tls.key'])) {\n    return SecretType.tls;\n  } else if (_.isEqual(dataKeys, ['ca.crt', 'namespace', 'service-ca.crt', 'token'])) {\n    return SecretType.serviceAccountToken;\n  } else if (_.isEqual(dataKeys, ['.dockercfg'])) {\n    return SecretType.dockercfg;\n  } else if (_.isEqual(dataKeys, ['.dockerconfigjson'])) {\n    return SecretType.dockerconfigjson;\n  } else if (_.isEqual(dataKeys, ['password', 'username'])) {\n    return SecretType.basicAuth;\n  } else if (_.isEqual(dataKeys, ['ssh-privatekey'])) {\n    return SecretType.sshAuth;\n  }\n  return SecretType.opaque;\n};\n\nexport const getImageSecretKey = (secretType: SecretType): string => {\n  switch (secretType) {\n    case SecretType.dockercfg:\n      return '.dockercfg';\n    case SecretType.dockerconfigjson:\n      return '.dockerconfigjson';\n    default:\n      return secretType;\n  }\n};\n\nexport const useSecretTitle = (\n  isCreate: boolean,\n  typeAbstraction: SecretTypeAbstraction,\n): string => {\n  const { t } = useTranslation();\n  switch (typeAbstraction) {\n    case SecretTypeAbstraction.generic:\n      return isCreate ? t('public~Create key/value secret') : t('public~Edit key/value secret');\n    case SecretTypeAbstraction.image:\n      return isCreate ? t('public~Create image pull secret') : t('public~Edit image pull secret');\n    default:\n      return isCreate\n        ? t('public~Create {{secretType}} secret', { secretType: typeAbstraction })\n        : t('public~Edit {{secretType}} secret', { secretType: typeAbstraction });\n  }\n};\n\nexport const useSecretDescription = (typeAbstraction: SecretTypeAbstraction): string => {\n  const { t } = useTranslation();\n  switch (typeAbstraction) {\n    case SecretTypeAbstraction.generic:\n      return t(\n        'public~Key/value secrets let you inject sensitive data into your application as files or environment variables.',\n      );\n    case SecretTypeAbstraction.source:\n      return t('public~Source secrets let you authenticate against a Git server.');\n    case SecretTypeAbstraction.image:\n      return t('public~Image pull secrets let you authenticate against a private image registry.');\n    case SecretTypeAbstraction.webhook:\n      return t('public~Webhook secrets let you authenticate a webhook trigger.');\n    default:\n      return null;\n  }\n};\n","export * from './types';\nexport * from './services';\nexport * from './utils';\n","import {\n  BranchList,\n  BuildType,\n  GitSource,\n  RepoFileList,\n  RepoLanguageList,\n  RepoMetadata,\n  RepoStatus,\n} from '../types';\nimport { detectBuildTypes, isModernWebApp } from '../utils/build-tool-detector';\n\nexport abstract class BaseService {\n  protected gitsource: GitSource;\n\n  constructor(gitsource: GitSource) {\n    this.gitsource = gitsource;\n  }\n\n  /**\n   * Fetch metadata of the repository.\n   */\n  protected abstract getRepoMetadata(): RepoMetadata;\n\n  /**\n   * Get the auth providor for the git service.\n   */\n  protected abstract getAuthProvider(): any;\n\n  /**\n   * Returns if repo reachable or not along with the api response.\n   */\n  abstract isRepoReachable(): Promise<RepoStatus>;\n\n  /**\n   * Returns list of branches for given gitsource.\n   */\n  abstract getRepoBranchList(): Promise<BranchList>;\n\n  /**\n   * Returns source code tree for given gitsource\n   */\n  abstract getRepoFileList(params?: {\n    specificPath?: string;\n    includeFolder?: boolean;\n  }): Promise<RepoFileList>;\n\n  /**\n   * Returns list of detected languages.\n   */\n  abstract getRepoLanguageList(): Promise<RepoLanguageList>;\n\n  /**\n   * Creates a Webhook and returns the response status code.\n   */\n  abstract createRepoWebhook(\n    token: string,\n    webhookURL: string,\n    sslVerification: boolean,\n    webhookSecret: string,\n  ): Promise<boolean>;\n\n  /**\n   * Returns content of the file as a string.\n   */\n  abstract getFileContent(path: string): Promise<string | null>;\n\n  /**\n   * Check if Dockerfile present in the repo.\n   */\n  abstract isDockerfilePresent(): Promise<boolean>;\n\n  /**\n   * Check if .tekton folder present in the repo.\n   */\n  abstract isTektonFolderPresent(): Promise<boolean>;\n\n  /**\n   * Checks if dockerfile exist in the repo and returns dockerfile content\n   */\n  abstract getDockerfileContent(): Promise<string>;\n\n  /**\n   * Check if func.yaml is present in the repo.\n   */\n  abstract isFuncYamlPresent(): Promise<boolean>;\n\n  /**\n   * Checks if func.yaml exist in the repo and returns func.yaml content\n   */\n  abstract getFuncYamlContent(): Promise<string>;\n\n  /**\n   * Check if Devfile present in the repo.\n   */\n  abstract isDevfilePresent(): Promise<boolean>;\n\n  /**\n   * Check if Devfile present in the repo.\n   */\n  abstract getDevfileContent(): Promise<string>;\n\n  /**\n   * Checks if package.json exist in the repo and returns content of the file.\n   */\n  abstract getPackageJsonContent(): Promise<string>;\n\n  /**\n   * Detect build types for given gitsource, It runs regular expressions on file list\n   * and returns list of build types matched.\n   */\n  async detectBuildTypes(): Promise<BuildType[]> {\n    try {\n      const fileList = await this.getRepoFileList();\n      const buildTypes = detectBuildTypes(fileList.files);\n      if (fileList.files.includes('package.json')) {\n        const packageJsonContent = await this.getPackageJsonContent();\n        if (isModernWebApp(packageJsonContent)) {\n          return buildTypes.sort((a, b) => {\n            if (b.buildType === 'modern-webapp') return 1;\n            if (a.buildType === 'modern-webapp') return -1;\n            return 0;\n          });\n        }\n      }\n      return buildTypes;\n    } catch (e) {\n      return [];\n    }\n  }\n}\n","import * as React from 'react';\nimport { AsyncComponent } from '../../utils/async';\n\n//TODO :Create a shared LazyDroppableFileInput component.\nexport const DroppableFileInput = (props) => (\n  <AsyncComponent\n    loader={() => import('../../utils/file-input').then((c) => c.DroppableFileInput)}\n    {...props}\n  />\n);\n","export * from './coreTekton';\nexport * from './pipeline';\nexport * from './pipelineRun';\nexport * from './pipelineResource';\nexport * from './task';\nexport * from './taskRun';\nexport * from './computedStatus';\n","import { safeLoad } from 'js-yaml';\nimport { consoleFetchJSON } from '@console/dynamic-plugin-sdk/src/lib-core';\nimport { HttpError } from '@console/dynamic-plugin-sdk/src/utils/error/http-error';\n\nexport const API_PROXY_URL = '/api/dev-console/proxy/internet';\n\ntype ProxyRequest = {\n  allowInsecure?: boolean;\n  allowAuthHeader?: boolean;\n  method: string;\n  url: string;\n  headers?: Record<string, string[]>;\n  queryparams?: Record<string, string[]>;\n  body?: string;\n};\n\nexport type ProxyResponse = {\n  statusCode: number;\n  headers: Record<string, string[]>;\n  body: string;\n};\n\nconst isJSONString = (str: string): boolean => {\n  try {\n    JSON.parse(str);\n  } catch (e) {\n    return false;\n  }\n  return true;\n};\n\nexport const convertHeaders = (headers): Record<string, string[]> => {\n  return Object.keys(headers).reduce((output, key) => {\n    output[key] = [headers[key]];\n    return output;\n  }, {});\n};\n\n/**\n * Calls the proxy in our backend to bypass CORS headers.\n */\nexport const consoleProxyFetch = async (proxyRequest: ProxyRequest): Promise<ProxyResponse> => {\n  const proxyResponse: ProxyResponse = await consoleFetchJSON.post(API_PROXY_URL, proxyRequest);\n  if (!proxyResponse.statusCode) {\n    throw new Error('Unexpected proxy response: Status code is missing!');\n  }\n  if (proxyResponse.statusCode < 200 || proxyResponse.statusCode >= 300) {\n    throw new HttpError(\n      `Unexpected status code: ${proxyResponse.statusCode}`,\n      proxyResponse.statusCode,\n      null,\n      proxyResponse,\n    );\n  }\n  return proxyResponse;\n};\n\nexport const consoleProxyFetchJSON = <T>(proxyRequest: ProxyRequest): Promise<T> => {\n  return consoleProxyFetch(proxyRequest).then((response) => {\n    return isJSONString(response.body) ? JSON.parse(response.body) : safeLoad(response.body);\n  });\n};\n","import * as _ from 'lodash-es';\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet';\nimport { useTranslation } from 'react-i18next';\nimport { Base64 } from 'js-base64';\nimport { ActionGroup, Button } from '@patternfly/react-core';\nimport { useParams, useNavigate } from 'react-router-dom-v5-compat';\nimport { k8sCreate, k8sUpdate, K8sResourceKind, referenceFor } from '../../../module/k8s';\nimport { ButtonBar, PageHeading, resourceObjPath } from '../../utils';\nimport { ModalBody, ModalTitle, ModalSubmitFooter } from '../../factory/modal';\nimport { SecretModel } from '../../../models';\nimport { SecretTypeAbstraction } from './const';\nimport {\n  toDefaultSecretType,\n  determineSecretType,\n  useSecretTitle,\n  useSecretDescription,\n} from './utils';\nimport { SecretSubForm } from './SecretSubForm';\n\nexport const SecretFormWrapper: React.FC<BaseEditSecretProps_> = (props) => {\n  const { isCreate, modal, onCancel } = props;\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const params = useParams();\n\n  const existingSecret = _.pick(props.obj, ['metadata', 'type']);\n  const defaultSecretType = toDefaultSecretType(props.secretTypeAbstraction);\n  const initialSecret = _.defaultsDeep({}, props.fixed, existingSecret, {\n    apiVersion: 'v1',\n    data: {},\n    kind: 'Secret',\n    metadata: {\n      name: '',\n    },\n    type: defaultSecretType,\n  });\n\n  const [secretTypeAbstraction] = React.useState(props.secretTypeAbstraction);\n  const [secret, setSecret] = React.useState(initialSecret);\n  const [inProgress, setInProgress] = React.useState(false);\n  const [error, setError] = React.useState();\n  const [stringData, setStringData] = React.useState(\n    _.mapValues(_.get(props.obj, 'data'), (value) => {\n      return value ? Base64.decode(value) : '';\n    }),\n  );\n  const [base64StringData, setBase64StringData] = React.useState({});\n  const [disableForm, setDisableForm] = React.useState(false);\n  const title = useSecretTitle(isCreate, secretTypeAbstraction);\n  const helptext = useSecretDescription(secretTypeAbstraction);\n  const cancel = () => navigate(`/k8s/ns/${params.ns}/core~v1~Secret`);\n\n  const onDataChanged = (secretsData) => {\n    setStringData({ ...secretsData?.stringData });\n    setBase64StringData({ ...secretsData?.base64StringData });\n  };\n\n  const onError = (err) => {\n    setError(err);\n    setInProgress(false);\n  };\n\n  const onNameChanged = (event) => {\n    const name = event.target.value;\n    const newSecret = _.cloneDeep(secret);\n    newSecret.metadata.name = name;\n    setSecret(newSecret);\n  };\n\n  const save = (e) => {\n    e.preventDefault();\n    const { metadata } = secret;\n    setInProgress(true);\n    const data = {\n      ..._.mapValues(stringData, (value) => {\n        return Base64.encode(value);\n      }),\n      ...base64StringData,\n    };\n    const newSecret = _.assign(\n      {},\n      secret,\n      {\n        data,\n      },\n      // When creating new Secret, determine it's type from the `stringData` keys.\n      // When updating a Secret, use it's type.\n      isCreate ? { type: determineSecretType(stringData) } : {},\n    );\n    (isCreate\n      ? k8sCreate(SecretModel, newSecret)\n      : k8sUpdate(SecretModel, newSecret, metadata.namespace, newSecret.metadata.name)\n    ).then(\n      (s) => {\n        setInProgress(false);\n        if (props.onSave) {\n          props.onSave(s.metadata.name);\n        }\n        if (!props.modal) {\n          navigate(resourceObjPath(s, referenceFor(s)));\n        }\n      },\n      (err) => {\n        setError(err.message);\n        setInProgress(false);\n      },\n    );\n  };\n\n  const renderBody = () => {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n\n    return (\n      <>\n        <fieldset disabled={!isCreate}>\n          <div className=\"form-group\">\n            <label className=\"control-label co-required\" htmlFor=\"secret-name\">\n              {t('public~Secret name')}\n            </label>\n            <div>\n              <input\n                className=\"pf-v5-c-form-control\"\n                type=\"text\"\n                onChange={onNameChanged}\n                value={secret?.metadata?.name}\n                aria-describedby=\"secret-name-help\"\n                id=\"secret-name\"\n                data-test=\"secret-name\"\n                required\n              />\n              <p className=\"help-block\" id=\"secret-name-help\">\n                {t('public~Unique name of the new secret.')}\n              </p>\n            </div>\n          </div>\n        </fieldset>\n        <SecretSubForm\n          typeAbstraction={props.secretTypeAbstraction}\n          onChange={onDataChanged}\n          onError={onError}\n          onFormDisable={(disable) => setDisableForm(disable)}\n          stringData={stringData}\n          secretType={secret.type}\n          isCreate={isCreate}\n        />\n      </>\n    );\n  };\n\n  return modal ? (\n    <form className=\"co-create-secret-form modal-content\" onSubmit={save}>\n      <ModalTitle>{title}</ModalTitle>\n      <ModalBody>{renderBody()}</ModalBody>\n      <ModalSubmitFooter\n        errorMessage={error || ''}\n        inProgress={inProgress}\n        submitText={t('public~Create')}\n        cancel={onCancel || cancel}\n      />\n    </form>\n  ) : (\n    <div className=\"co-m-pane__form\">\n      <Helmet>\n        <title>{title}</title>\n      </Helmet>\n      <PageHeading title={title} helpText={helptext} />\n      <div className=\"co-m-pane__body\">\n        <form className=\"co-m-pane__body-group co-create-secret-form\" onSubmit={save}>\n          {renderBody()}\n          <ButtonBar errorMessage={error} inProgress={inProgress}>\n            <ActionGroup className=\"pf-v5-c-form\">\n              <Button\n                type=\"submit\"\n                data-test=\"save-changes\"\n                isDisabled={disableForm}\n                variant=\"primary\"\n                id=\"save-changes\"\n              >\n                {props.saveButtonText || t('public~Create')}\n              </Button>\n              <Button type=\"button\" variant=\"secondary\" id=\"cancel\" onClick={onCancel || cancel}>\n                {t('public~Cancel')}\n              </Button>\n            </ActionGroup>\n          </ButtonBar>\n        </form>\n      </div>\n    </div>\n  );\n};\n\ntype BaseEditSecretProps_ = {\n  obj?: K8sResourceKind;\n  fixed: any;\n  kind?: string;\n  isCreate?: boolean;\n  modal?: boolean;\n  secretTypeAbstraction?: SecretTypeAbstraction;\n  saveButtonText?: string;\n  onCancel?: () => void;\n  onSave?: (name: string) => void;\n};\n","import { ValidatedOptions } from '@patternfly/react-core';\nimport { WatchK8sResultsObject } from '@console/dynamic-plugin-sdk';\nimport { GitProvider } from '@console/git-service/src';\nimport { DetectedStrategy } from '@console/git-service/src/utils/import-strategy-detector';\nimport { DeploymentModel, DeploymentConfigModel } from '@console/internal/models';\nimport { K8sResourceKind, ContainerPort } from '@console/internal/module/k8s';\nimport { PipelineData } from '@console/pipelines-plugin/src/components/import/import-types';\nimport { RepositoryFormValues } from '@console/pipelines-plugin/src/components/repository/types';\nimport { LazyLoader } from '@console/plugin-sdk';\nimport { NameValuePair, NameValueFromPair, LimitsData } from '@console/shared';\nimport { ClusterBuildStrategy } from '@console/shipwright-plugin/src/types';\nimport { NormalizedBuilderImages } from '../../utils/imagestream-utils';\nimport { HealthCheckFormProbe } from '../health-checks/health-checks-types';\n\nexport interface DeployImageFormProps {\n  builderImages?: NormalizedBuilderImages;\n  projects?: FirehoseList | WatchK8sResultsObject<K8sResourceKind[]>;\n}\nexport type ImageStreamPayload = boolean | K8sResourceKind;\n\nexport type ImageStreamState = {\n  accessLoading: ImageStreamPayload;\n  loading: ImageStreamPayload;\n  selectedImageStream: ImageStreamPayload;\n};\nexport enum ImageStreamActions {\n  setAccessLoading = 'setAccessLoading',\n  setLoading = 'setLoading',\n  setSelectedImageStream = 'setSelectedImageStream',\n}\nexport type ImageStreamAction = { type: ImageStreamActions; value: ImageStreamPayload };\nexport interface ImageStreamContextProps {\n  state: ImageStreamState;\n  dispatch: React.Dispatch<ImageStreamAction>;\n  hasImageStreams: boolean;\n  setHasImageStreams: (value: boolean) => void;\n  setValidated: (validated: ValidatedOptions) => void;\n}\nexport interface SourceToImageFormProps {\n  builderImages?: NormalizedBuilderImages;\n  projects?: {\n    data: [];\n    loaded: boolean;\n  };\n}\n\nexport interface GitImportFormProps {\n  builderImages?: NormalizedBuilderImages;\n  projects?: {\n    data: [];\n    loaded: boolean;\n  };\n}\nexport interface DevfileImportFormProps {\n  builderImages?: NormalizedBuilderImages;\n  projects?: {\n    data: [];\n    loaded: boolean;\n  };\n}\n\nexport interface FirehoseList {\n  data?: K8sResourceKind[];\n  [key: string]: any;\n}\n\nexport interface DeployImageFormData {\n  formType?: string;\n  project: ProjectData;\n  application: ApplicationData;\n  name: string;\n  searchTerm: string;\n  allowInsecureRegistry: boolean;\n  registry: string;\n  imageStream: {\n    image: string;\n    tag: string;\n    namespace: string;\n  };\n  isi: ImageStreamImageData;\n  image: ImageStreamImageData;\n  runtimeIcon?: string;\n  isSearchingForImage: boolean;\n  resources: Resources;\n  resourceTypesNotValid?: Resources[];\n  serverless?: ServerlessData;\n  pac?: PacData;\n  pipeline?: PipelineData;\n  labels: { [name: string]: string };\n  annotations?: { [name: string]: string };\n  env?: { [name: string]: string };\n  route: RouteData;\n  build: BuildData;\n  deployment: DeploymentData;\n  limits: LimitsData;\n  healthChecks: HealthChecksFormData;\n  fileUpload?: FileUploadData;\n  import?: ImportStrategyData;\n}\n\nexport type FileUploadData = {\n  name: string;\n  value: File | '';\n  javaArgs?: string;\n};\n\nexport interface BaseFormData {\n  formType?: string;\n  name: string;\n  project: ProjectData;\n  application: ApplicationData;\n  serverless?: ServerlessData;\n  image: ImageData;\n  runtimeIcon?: string;\n  route: RouteData;\n  resources: Resources;\n  resourceTypesNotValid?: Resources[];\n  build: BuildData;\n  deployment: DeploymentData;\n  labels: { [name: string]: string };\n  limits: LimitsData;\n  healthChecks: HealthChecksFormData;\n}\nexport interface UploadJarFormData extends BaseFormData {\n  fileUpload: FileUploadData;\n  import?: ImportStrategyData;\n}\n\nexport interface GitImportFormData extends BaseFormData {\n  pipeline?: PipelineData;\n  resourceTypesNotValid?: Resources[];\n  git: GitData;\n  docker: DockerData;\n  devfile?: DevfileData;\n  pac?: PacData;\n  import?: ImportStrategyData;\n}\n\nexport interface ApplicationData {\n  initial?: string;\n  name: string;\n  selectedKey: string;\n  isInContext?: boolean;\n}\n\nexport interface ImageData {\n  selected: string;\n  recommended: string;\n  isRecommending: boolean;\n  couldNotRecommend: boolean;\n  tag: string;\n  tagObj: object;\n  ports: ContainerPort[];\n  imageEnv?: { [key: string]: string };\n}\n\nexport interface ImageStreamImageData {\n  name: string;\n  image: { [key: string]: any };\n  tag: string;\n  status: { metadata: {}; status: string };\n  ports: ContainerPort[];\n}\n\nexport interface ProjectData {\n  name: string;\n  displayName?: string;\n  description?: string;\n}\n\nexport interface GitData {\n  url: string;\n  detectedType?: GitProvider;\n  type: GitProvider;\n  ref: string;\n  dir: string;\n  showGitType: boolean;\n  secret: string;\n  isUrlValidating: boolean;\n  validated?: ValidatedOptions;\n  secretResource?: K8sResourceKind;\n}\n\nexport interface DockerData {\n  dockerfilePath?: string;\n  dockerfileHasError?: boolean;\n}\n\nexport type DevfileData = {\n  devfilePath?: string;\n  devfileContent?: string;\n  devfileSourceUrl?: string;\n  devfileHasError: boolean;\n  devfileSuggestedResources?: DevfileSuggestedResources;\n  devfileProjectType?: string;\n};\n\nexport type PacData = {\n  pacHasError: boolean;\n  repository: RepositoryFormValues;\n};\n\nexport type DevfileSuggestedResources = {\n  imageStream: K8sResourceKind;\n  buildResource: K8sResourceKind;\n  deployResource: K8sResourceKind;\n  service?: K8sResourceKind | null;\n  route?: K8sResourceKind | null;\n};\n\nexport interface RouteData {\n  disable?: boolean;\n  create: boolean;\n  targetPort: string;\n  unknownTargetPort?: string;\n  defaultUnknownPort?: number;\n  path?: string;\n  hostname?: string;\n  secure?: boolean;\n  tls?: TLSData;\n  labels?: { [name: string]: string };\n}\n\nexport interface TLSData {\n  termination: TerminationType;\n  insecureEdgeTerminationPolicy: InsecureTrafficType | PassthroughInsecureTrafficType;\n  certificate: string;\n  key: string;\n  caCertificate: string;\n  destinationCACertificate: string;\n}\n\nexport interface BuildData {\n  triggers: {\n    webhook?: boolean;\n    image?: boolean;\n    config?: boolean;\n  };\n  env: (NameValuePair | NameValueFromPair)[];\n  strategy: string;\n  source?: { type: string };\n  option?: BuildOptions;\n  clusterBuildStrategy?: ClusterBuildStrategy;\n}\n\nexport interface DetectedStrategyFormData extends DetectedStrategy {\n  title?: string;\n  iconUrl?: string;\n}\n\nexport interface ImportStrategyData {\n  loaded?: boolean;\n  knativeFuncLoaded?: boolean;\n  loadError?: string;\n  strategies?: DetectedStrategy[];\n  recommendedStrategy?: DetectedStrategyFormData;\n  selectedStrategy?: DetectedStrategyFormData;\n  showEditImportStrategy?: boolean;\n  strategyChanged?: boolean;\n}\n\nexport interface DeploymentData {\n  triggers: {\n    image: boolean;\n    config?: boolean;\n  };\n  replicas: number;\n  env: (NameValuePair | NameValueFromPair)[];\n}\n\nexport interface ServerlessData {\n  scaling: ServerlessScaling;\n  domainMapping?: string[];\n}\n\nexport interface ServerlessScaling {\n  minpods: number | '';\n  maxpods: number | '';\n  concurrencytarget: number | '';\n  concurrencylimit: number | '';\n  defaultConcurrencytarget?: number | '';\n  defaultConcurrencyutilization?: number | '';\n  autoscale: AutoscaleWindowType;\n  concurrencyutilization: number | '';\n}\n\nexport const GitReadableTypes = {\n  [GitProvider.GITHUB]: 'GitHub',\n  [GitProvider.GITLAB]: 'GitLab',\n  [GitProvider.GITEA]: 'Gitea',\n  [GitProvider.BITBUCKET]: 'Bitbucket',\n  [GitProvider.UNSURE]: 'Other',\n};\n\nexport enum ImportTypes {\n  git = 'git',\n  devfile = 'devfile',\n  docker = 'docker',\n  s2i = 's2i',\n}\n\nexport enum Resources {\n  OpenShift = 'openshift',\n  Kubernetes = 'kubernetes',\n  KnativeService = 'knative',\n}\n\nexport enum BuildOptions {\n  BUILDS = 'BUILDS',\n  SHIPWRIGHT_BUILD = 'SHIPWRIGHT_BUILD',\n  PIPELINES = 'PIPELINES',\n  DISABLED = 'DISABLED',\n}\n\nexport enum SampleRuntime {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  'Node.js' = 'nodejs',\n  Quarkus = 'quarkus',\n  dotnet = 'dotnet',\n  Python = 'python',\n  Go = 'golang',\n  springboot = 'spring-boot',\n}\n\nexport const ReadableResourcesNames: Record<Resources, string> = {\n  [Resources.OpenShift]: DeploymentConfigModel.labelKey,\n  [Resources.Kubernetes]: DeploymentModel.labelKey,\n  // t('devconsole~Serverless Deployment')\n  [Resources.KnativeService]: `devconsole~Serverless Deployment`,\n};\n\nexport const ReadableBuildOptions: Record<BuildOptions, string> = {\n  [BuildOptions.BUILDS]: 'devconsole~BuildConfig',\n  // t('devconsole~Builds for OpenShift (Shipwright)')\n  [BuildOptions.SHIPWRIGHT_BUILD]: 'devconsole~Builds for OpenShift (Shipwright)',\n  // t('devconsole~Build using pipelines')\n  [BuildOptions.PIPELINES]: 'devconsole~Build using pipelines',\n  [BuildOptions.DISABLED]: 'devconsole~Disabled',\n};\n\nexport const ResourcesKinds: Record<Resources, string> = {\n  [Resources.OpenShift]: DeploymentConfigModel.kind,\n  [Resources.Kubernetes]: DeploymentModel.kind,\n  [Resources.KnativeService]: 'Service',\n};\n\nexport interface ImportData {\n  type: ImportTypes;\n  title: string;\n  buildStrategy: string;\n  loader: LazyLoader<GitImportFormProps | SourceToImageFormProps>;\n}\n\nexport enum TerminationType {\n  EDGE = 'edge',\n  PASSTHROUGH = 'passthrough',\n  REENCRYPT = 'reencrypt',\n}\n\nexport enum InsecureTrafficType {\n  None = 'None',\n  Allow = 'Allow',\n  Redirect = 'Redirect',\n}\n\nexport enum PassthroughInsecureTrafficType {\n  None = 'None',\n  Redirect = 'Redirect',\n}\n\nexport interface AutoscaleWindowType {\n  autoscalewindow: number | '';\n  defaultAutoscalewindow?: number | '';\n  autoscalewindowUnit: string;\n  defaultAutoscalewindowUnit: string;\n}\n\nexport enum CPUUnits {\n  m = 'millicores',\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  '' = 'cores',\n}\n\nexport enum MemoryUnits {\n  Mi = 'Mi',\n  Gi = 'Gi',\n}\n\nexport enum ImportOptions {\n  GIT = 'GIT',\n  CONTAINER = 'CONTAINER',\n  CATALOG = 'CATALOG',\n  DOCKERFILE = 'DOCKERFILE',\n  DEVFILE = 'DEVFILE',\n  DATABASE = 'DATABASE',\n  EVENTSOURCE = 'EVENTSOURCE',\n  EVENTPUBSUB = 'EVENTPUBSUB',\n  OPERATORBACKED = 'OPERATORBACKED',\n  HELMCHARTS = 'HELMCHARTS',\n  SAMPLES = 'SAMPLES',\n  EVENTCHANNEL = 'EVENTCHANNEL',\n  EVENTBROKER = 'EVENTBROKER',\n  UPLOADJAR = 'UPLOADJAR',\n}\n\nexport interface HealthChecksFormData {\n  readinessProbe: HealthCheckFormProbe;\n  livenessProbe: HealthCheckFormProbe;\n  startupProbe?: HealthCheckFormProbe;\n}\n","import * as React from 'react';\nimport { SecretSubFormProps } from './types';\nimport { SecretTypeAbstraction } from './const';\nimport { SourceSecretForm } from './SourceSecretForm';\nimport { PullSecretForm } from './PullSecretForm';\nimport { WebHookSecretForm } from './WebHookSecretForm';\nimport { GenericSecretForm } from './GenericSecretForm';\n\nexport const SecretSubForm: React.FC<WithTypeAbstraction<SecretSubFormProps>> = ({\n  typeAbstraction,\n  ...props\n}) => {\n  switch (typeAbstraction) {\n    case SecretTypeAbstraction.source:\n      return <SourceSecretForm {...props} />;\n    case SecretTypeAbstraction.image:\n      return <PullSecretForm {...props} />;\n    case SecretTypeAbstraction.webhook:\n      return <WebHookSecretForm {...props} />;\n    default:\n      return <GenericSecretForm {...props} />;\n  }\n};\n\ntype WithTypeAbstraction<T> = T & {\n  typeAbstraction: SecretTypeAbstraction;\n};\n","import * as React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { WithT } from 'i18next';\nimport { Dropdown } from '../../utils';\nimport { SecretType } from './const';\nimport { BasicAuthSubform } from './BasicAuthSubform';\nimport { SSHAuthSubform } from './SSHAuthSubform';\nimport { SecretStringData } from './types';\n\nclass SourceSecretFormWithTranslation extends React.Component<\n  SourceSecretFormProps & WithT,\n  SourceSecretFormState\n> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      type: this.props.secretType,\n      stringData: this.props.stringData || {},\n      authType: SecretType.basicAuth,\n    };\n    this.changeAuthenticationType = this.changeAuthenticationType.bind(this);\n    this.onDataChanged = this.onDataChanged.bind(this);\n  }\n  changeAuthenticationType(type: SecretType) {\n    this.setState(\n      {\n        type,\n      },\n      () => this.props.onChange(this.state),\n    );\n  }\n  onDataChanged(secretsData) {\n    this.setState(\n      {\n        stringData: { ...secretsData },\n      },\n      () => this.props.onChange(this.state),\n    );\n  }\n  render() {\n    const { t } = this.props;\n    const authTypes = {\n      [SecretType.basicAuth]: t('public~Basic authentication'),\n      [SecretType.sshAuth]: t('public~SSH key'),\n    };\n    return (\n      <>\n        {this.props.isCreate ? (\n          <div className=\"form-group\">\n            <label className=\"control-label\" htmlFor=\"secret-type\">\n              {t('public~Authentication type')}\n            </label>\n            <div className=\"co-create-secret__dropdown\">\n              <Dropdown\n                items={authTypes}\n                dropDownClassName=\"dropdown--full-width\"\n                id=\"dropdown-selectbox\"\n                selectedKey={this.state.authType}\n                onChange={this.changeAuthenticationType}\n              />\n            </div>\n          </div>\n        ) : null}\n        {this.state.type === SecretType.basicAuth ? (\n          <BasicAuthSubform onChange={this.onDataChanged} stringData={this.state.stringData} />\n        ) : (\n          <SSHAuthSubform onChange={this.onDataChanged} stringData={this.state.stringData} />\n        )}\n      </>\n    );\n  }\n}\n\nexport const SourceSecretForm = withTranslation()(SourceSecretFormWithTranslation);\n\ntype SourceSecretFormState = {\n  type: SecretType;\n  stringData: SecretStringData;\n  authType: SecretType.basicAuth | SecretType.sshAuth;\n};\n\ntype SourceSecretFormProps = {\n  onChange: Function;\n  stringData: SecretStringData;\n  secretType: SecretType;\n  isCreate: boolean;\n};\n","import * as React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { WithT } from 'i18next';\nimport { SecretStringData } from './types';\n\nclass BasicAuthSubformWithTranslation extends React.Component<\n  BasicAuthSubformProps & WithT,\n  BasicAuthSubformState\n> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: this.props.stringData.username || '',\n      password: this.props.stringData.password || '',\n    };\n    this.changeData = this.changeData.bind(this);\n  }\n  changeData(event) {\n    this.setState(\n      {\n        [event.target.name]: event.target.value,\n      } as BasicAuthSubformState,\n      () => this.props.onChange(this.state),\n    );\n  }\n\n  render() {\n    const { t } = this.props;\n    return (\n      <>\n        <div className=\"form-group\">\n          <label className=\"control-label\" htmlFor=\"username\">\n            {t('public~Username')}\n          </label>\n          <div>\n            <input\n              className=\"pf-v5-c-form-control\"\n              id=\"username\"\n              data-test=\"secret-username\"\n              aria-describedby=\"username-help\"\n              type=\"text\"\n              name=\"username\"\n              onChange={this.changeData}\n              value={this.state.username}\n            />\n            <p className=\"help-block\" id=\"username-help\">\n              {t('public~Optional username for Git authentication.')}\n            </p>\n          </div>\n        </div>\n        <div className=\"form-group\">\n          <label className=\"control-label co-required\" htmlFor=\"password\">\n            {t('public~Password or token')}\n          </label>\n          <div>\n            <input\n              className=\"pf-v5-c-form-control\"\n              id=\"password\"\n              data-test=\"secret-password\"\n              aria-describedby=\"password-help\"\n              type=\"password\"\n              name=\"password\"\n              onChange={this.changeData}\n              value={this.state.password}\n              required\n            />\n            <p className=\"help-block\" id=\"password-help\">\n              {t(\n                'public~Password or token for Git authentication. Required if a ca.crt or .gitconfig file is not specified.',\n              )}\n            </p>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport const BasicAuthSubform = withTranslation()(BasicAuthSubformWithTranslation);\n\ntype BasicAuthSubformState = {\n  username: string;\n  password: string;\n};\n\ntype BasicAuthSubformProps = {\n  onChange: Function;\n  stringData: SecretStringData;\n};\n","import * as React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { DroppableFileInput } from './DropableFileInput';\nimport { SecretStringData } from './types';\n\nexport const SSHAuthSubform: React.FC<SSHAuthSubformProps> = ({ onChange, stringData }) => {\n  const { t } = useTranslation();\n  const onFileChange = (fileData: string) => {\n    const value = fileData.endsWith('\\n') ? fileData : `${fileData}\\n`;\n    onChange({ 'ssh-privatekey': value });\n  };\n  return (\n    <DroppableFileInput\n      onChange={onFileChange}\n      inputFileData={stringData['ssh-privatekey'] || ''}\n      id=\"ssh-privatekey\"\n      label={t('public~SSH private key')}\n      inputFieldHelpText={t(\n        'public~Drag and drop file with your private SSH key here or browse to upload it.',\n      )}\n      textareaFieldHelpText={t('public~Private SSH key file for Git authentication.')}\n      isRequired={true}\n    />\n  );\n};\n\ntype SSHAuthSubformProps = {\n  onChange: Function;\n  stringData: SecretStringData;\n};\n","import * as _ from 'lodash-es';\nimport * as React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dropdown } from '../../utils';\nimport { SecretSubFormProps } from './types';\nimport { getImageSecretKey } from './utils';\nimport { AUTHS_KEY } from './const';\nimport { CreateConfigSubform } from './CreateConfigSubform';\nimport { UploadConfigSubform } from './UploadConfigSubform';\n\nexport const PullSecretForm: React.FC<SecretSubFormProps> = ({\n  onChange,\n  onError,\n  onFormDisable,\n  stringData,\n  secretType,\n  isCreate,\n}) => {\n  const [authType, setAuthType] = React.useState('credentials');\n  const { t } = useTranslation();\n\n  const pullSecretData = React.useMemo<PullSecretData>(() => {\n    try {\n      const key = getImageSecretKey(secretType);\n      const jsonContent = stringData[key] ?? '{}';\n      return JSON.parse(jsonContent);\n    } catch (err) {\n      onError(`Error parsing secret's data: ${err.message}`);\n      return {};\n    }\n  }, [stringData, secretType]);\n\n  const onDataChanged = React.useCallback(\n    (secretData: PullSecretData) => {\n      if (!_.isError(secretData)) {\n        onFormDisable(false);\n      }\n      const newDataKey = secretData[AUTHS_KEY] ? '.dockerconfigjson' : '.dockercfg';\n      onChange({\n        stringData: {\n          [newDataKey]: JSON.stringify(secretData),\n        },\n        base64StringData: {},\n      });\n    },\n    [onFormDisable, onchange],\n  );\n\n  const authTypes = {\n    credentials: t('public~Image registry credentials'),\n    'config-file': t('public~Upload configuration file'),\n  };\n\n  return (\n    <>\n      {isCreate && (\n        <div className=\"form-group\">\n          <label className=\"control-label\" htmlFor=\"secret-type\">\n            {t('public~Authentication type')}\n          </label>\n          <div className=\"co-create-secret__dropdown\">\n            <Dropdown\n              items={authTypes}\n              dropDownClassName=\"dropdown--full-width\"\n              id=\"dropdown-selectbox\"\n              selectedKey={authType}\n              onChange={setAuthType}\n            />\n          </div>\n        </div>\n      )}\n      {authType === 'credentials' ? (\n        <CreateConfigSubform onChange={onDataChanged} stringData={pullSecretData} />\n      ) : (\n        <UploadConfigSubform\n          onChange={onDataChanged}\n          stringData={pullSecretData}\n          onDisable={onFormDisable}\n        />\n      )}\n    </>\n  );\n};\n\ntype DockerConfigData = {\n  [url: string]: {\n    username: string;\n    password: string;\n    email: string;\n    auth: string;\n  };\n};\n\ntype DockerConfigJSONData = {\n  auths: DockerConfigData;\n};\n\ntype PullSecretData = DockerConfigData | DockerConfigJSONData;\n","import * as _ from 'lodash-es';\nimport * as React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { WithT } from 'i18next';\nimport { Base64 } from 'js-base64';\nimport { Button } from '@patternfly/react-core';\nimport { MinusCircleIcon } from '@patternfly/react-icons/dist/esm/icons/minus-circle-icon';\nimport { PlusCircleIcon } from '@patternfly/react-icons/dist/esm/icons/plus-circle-icon';\nimport { AUTHS_KEY } from './const';\nimport { PullSecretCredentialEntry } from './PullSecretCredentialEntry';\n\nclass CreateConfigSubformWithTranslation extends React.Component<\n  CreateConfigSubformProps & WithT,\n  CreateConfigSubformState\n> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // If user creates a new image secret by filling out the form a 'kubernetes.io/dockerconfigjson' secret will be created.\n      isDockerconfigjson: _.isEmpty(this.props.stringData) || !!this.props.stringData[AUTHS_KEY],\n      secretEntriesArray: this.imageSecretObjectToArray(\n        this.props.stringData?.[AUTHS_KEY] || this.props.stringData,\n      ),\n      hasDuplicate: false,\n    };\n    this.onDataChanged = this.onDataChanged.bind(this);\n  }\n  newImageSecretEntry() {\n    return {\n      entry: {\n        address: '',\n        username: '',\n        password: '',\n        email: '',\n        auth: '',\n      },\n      uid: _.uniqueId(),\n    };\n  }\n  imageSecretObjectToArray(imageSecretObject) {\n    const imageSecretArray = [];\n    if (_.isEmpty(imageSecretObject)) {\n      return _.concat(imageSecretArray, this.newImageSecretEntry());\n    }\n    _.each(imageSecretObject, (v, k) => {\n      // Decode and parse 'auth' in case 'username' and 'password' are not part of the secret.\n      const decodedAuth = Base64.decode(_.get(v, 'auth', ''));\n      const parsedAuth = _.isEmpty(decodedAuth) ? _.fill(Array(2), '') : _.split(decodedAuth, ':');\n      imageSecretArray.push({\n        entry: {\n          address: k,\n          username: _.get(v, 'username', parsedAuth[0]),\n          password: _.get(v, 'password', parsedAuth[1]),\n          email: _.get(v, 'email', ''),\n          auth: _.get(v, 'auth', ''),\n        },\n        uid: _.get(v, 'uid', _.uniqueId()),\n      });\n    });\n    return imageSecretArray;\n  }\n  imageSecretArrayToObject(imageSecretArray) {\n    const imageSecretsObject = {};\n    _.each(imageSecretArray, (value) => {\n      imageSecretsObject[value.entry.address] = _.pick(value.entry, [\n        'username',\n        'password',\n        'auth',\n        'email',\n      ]);\n    });\n    return imageSecretsObject;\n  }\n  propagateEntryChange(secretEntriesArray) {\n    const imageSecretObject = this.imageSecretArrayToObject(secretEntriesArray);\n    this.props.onChange(\n      this.state.isDockerconfigjson ? { [AUTHS_KEY]: imageSecretObject } : imageSecretObject,\n    );\n  }\n  onDataChanged(updatedEntry, entryIndex: number) {\n    this.setState(\n      (state: CreateConfigSubformState) => {\n        const secretEntriesArray = [...state.secretEntriesArray];\n        const updatedEntryData = {\n          uid: secretEntriesArray[entryIndex].uid,\n          entry: updatedEntry,\n          auth: Base64.encode(`${updatedEntry.username}:${updatedEntry.password}`),\n        };\n        secretEntriesArray[entryIndex] = updatedEntryData;\n        return {\n          secretEntriesArray,\n        };\n      },\n      () => this.propagateEntryChange(this.state.secretEntriesArray),\n    );\n  }\n  removeEntry(entryIndex: number) {\n    this.setState(\n      (state: CreateConfigSubformState) => {\n        const secretEntriesArray = [...state.secretEntriesArray];\n        secretEntriesArray.splice(entryIndex, 1);\n        return { secretEntriesArray };\n      },\n      () => this.propagateEntryChange(this.state.secretEntriesArray),\n    );\n  }\n  addEntry() {\n    this.setState(\n      {\n        secretEntriesArray: _.concat(this.state.secretEntriesArray, this.newImageSecretEntry()),\n      },\n      () => {\n        this.propagateEntryChange(this.state.secretEntriesArray);\n      },\n    );\n  }\n  render() {\n    const { t } = this.props;\n    const secretEntriesList = _.map(this.state.secretEntriesArray, (entryData, index) => {\n      const { uid, entry } = entryData ?? {};\n      const { address, email, password, username } = entry ?? {};\n      return (\n        <div className=\"co-add-remove-form__entry\" key={uid}>\n          {_.size(this.state.secretEntriesArray) > 1 && (\n            <div className=\"co-add-remove-form__link--remove-entry\">\n              <Button\n                onClick={() => this.removeEntry(index)}\n                type=\"button\"\n                variant=\"link\"\n                data-test=\"remove-entry-button\"\n              >\n                <MinusCircleIcon className=\"co-icon-space-r\" />\n                {t('public~Remove credentials')}\n              </Button>\n            </div>\n          )}\n          <PullSecretCredentialEntry\n            id={index}\n            address={address}\n            email={email}\n            password={password}\n            username={username}\n            onChange={this.onDataChanged}\n          />\n        </div>\n      );\n    });\n    return (\n      <>\n        {secretEntriesList}\n        <Button\n          className=\"co-create-secret-form__link--add-entry pf-m-link--align-left\"\n          onClick={() => this.addEntry()}\n          type=\"button\"\n          variant=\"link\"\n          data-test=\"add-credentials-button\"\n        >\n          <PlusCircleIcon className=\"co-icon-space-r\" />\n          {t('public~Add credentials')}\n        </Button>\n      </>\n    );\n  }\n}\n\nexport const CreateConfigSubform = withTranslation()(CreateConfigSubformWithTranslation);\n\ntype CreateConfigSubformState = {\n  isDockerconfigjson: boolean;\n  hasDuplicate: boolean;\n  secretEntriesArray: {\n    entry: {\n      address: string;\n      username: string;\n      password: string;\n      email: string;\n      auth: string;\n    };\n    uid: string;\n  }[];\n};\n\ntype CreateConfigSubformProps = {\n  onChange: Function;\n  stringData: {\n    [key: string]: any;\n  };\n};\n","import * as React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Base64 } from 'js-base64';\n\nexport const PullSecretCredentialEntry: React.FC<PullSecretCredentialEntryProps> = ({\n  id,\n  address,\n  email,\n  password,\n  username,\n  onChange,\n}) => {\n  const { t } = useTranslation();\n\n  const updateEntry = (name: string, value: string): void => {\n    const trimmedUsername = username.trim();\n    const trimmedPassword = password.trim();\n    const auth = username && password ? Base64.encode(`${trimmedUsername}:${trimmedPassword}`) : '';\n    onChange(\n      {\n        address,\n        username,\n        password,\n        email,\n        [name]: value,\n        ...(auth ? { auth } : {}),\n      },\n      id,\n    );\n  };\n\n  const handleBlurEvent = (e: React.SyntheticEvent<HTMLInputElement>) =>\n    updateEntry(e.currentTarget.name, e.currentTarget.value.trim());\n\n  const handleChangeEvent = (e: React.SyntheticEvent<HTMLInputElement>) =>\n    updateEntry(e.currentTarget.name, e.currentTarget.value);\n\n  return (\n    <div className=\"co-m-pane__body-group\" data-test-id=\"create-image-secret-form\">\n      <div className=\"form-group\">\n        <label className=\"control-label co-required\" htmlFor={`${id}-address`}>\n          {t('public~Registry server address')}\n        </label>\n        <div>\n          <input\n            className=\"pf-v5-c-form-control\"\n            id={`${id}-address`}\n            aria-describedby={`${id}-address-help`}\n            type=\"text\"\n            name=\"address\"\n            onChange={handleChangeEvent}\n            value={address}\n            onBlur={handleBlurEvent}\n            data-test=\"image-secret-address\"\n            required\n          />\n        </div>\n        <p className=\"help-block\" id={`${id}-address-help`}>\n          {t('public~For example quay.io or docker.io')}\n        </p>\n      </div>\n      <div className=\"form-group\">\n        <label className=\"control-label co-required\" htmlFor={`${id}-username`}>\n          {t('public~Username')}\n        </label>\n        <div>\n          <input\n            className=\"pf-v5-c-form-control\"\n            id={`${id}-username`}\n            type=\"text\"\n            name=\"username\"\n            onChange={handleChangeEvent}\n            value={username}\n            onBlur={handleBlurEvent}\n            data-test=\"image-secret-username\"\n            required\n          />\n        </div>\n      </div>\n      <div className=\"form-group\">\n        <label className=\"control-label co-required\" htmlFor={`${id}-password`}>\n          {t('public~Password')}\n        </label>\n        <div>\n          <input\n            className=\"pf-v5-c-form-control\"\n            id={`${id}-password`}\n            type=\"password\"\n            name=\"password\"\n            onChange={handleChangeEvent}\n            value={password}\n            onBlur={handleBlurEvent}\n            data-test=\"image-secret-password\"\n            required\n          />\n        </div>\n      </div>\n      <div className=\"form-group\">\n        <label className=\"control-label\" htmlFor={`${id}-email`}>\n          {t('public~Email')}\n        </label>\n        <div>\n          <input\n            className=\"pf-v5-c-form-control\"\n            id={`${id}-email`}\n            type=\"text\"\n            name=\"email\"\n            onChange={handleChangeEvent}\n            value={email}\n            onBlur={handleBlurEvent}\n            data-test=\"image-secret-email\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\ntype PullSecretCredentialEntryProps = {\n  id: number;\n  address: string;\n  email: string;\n  password: string;\n  username: string;\n  onChange: (updatedEntry, entryIndex: number) => void;\n};\n","import * as _ from 'lodash-es';\nimport * as React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { WithT } from 'i18next';\nimport { DroppableFileInput } from './DropableFileInput';\n\nclass UploadConfigSubformWithTranslation extends React.Component<\n  UploadConfigSubformProps & WithT,\n  UploadConfigSubformState\n> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      configFile: _.isEmpty(this.props.stringData) ? '' : JSON.stringify(this.props.stringData),\n      parseError: false,\n    };\n    this.changeData = this.changeData.bind(this);\n    this.onFileChange = this.onFileChange.bind(this);\n  }\n  changeData(event) {\n    this.updateState(_.attempt(JSON.parse, event.target.value), event.target.value);\n  }\n  onFileChange(fileData) {\n    this.updateState(_.attempt(JSON.parse, fileData), fileData);\n  }\n  updateState(parsedData, stringData) {\n    this.setState(\n      {\n        configFile: stringData,\n        parseError: _.isError(parsedData),\n      },\n      () => {\n        this.props.onChange(parsedData);\n        this.props.onDisable(this.state.parseError);\n      },\n    );\n  }\n  render() {\n    const { t } = this.props;\n    return (\n      <>\n        <DroppableFileInput\n          onChange={this.onFileChange}\n          inputFileData={this.state.configFile}\n          id=\"docker-config\"\n          label={t('public~Configuration file')}\n          inputFieldHelpText={t('public~Upload a .dockercfg or .docker/config.json file.')}\n          textareaFieldHelpText={t(\n            'public~File with credentials and other configuration for connecting to a secured image registry.',\n          )}\n          isRequired={true}\n        />\n        {this.state.parseError && (\n          <div className=\"co-create-secret-warning\">\n            {t('public~Configuration file should be in JSON format.')}\n          </div>\n        )}\n      </>\n    );\n  }\n}\n\nexport const UploadConfigSubform = withTranslation()(UploadConfigSubformWithTranslation);\n\ntype UploadConfigSubformState = {\n  parseError: boolean;\n  configFile: string;\n};\n\ntype UploadConfigSubformProps = {\n  onChange: Function;\n  onDisable: Function;\n  stringData: {\n    [key: string]: Object;\n  };\n};\n","import * as React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { WithT } from 'i18next';\nimport { generateSecret } from './utils';\nimport { SecretStringData } from './types';\n\nclass WebHookSecretFormWithTranslation extends React.Component<\n  WebHookSecretFormProps & WithT,\n  WebHookSecretFormState\n> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      stringData: { WebHookSecretKey: this.props.stringData.WebHookSecretKey || '' },\n    };\n    this.changeWebHookSecretkey = this.changeWebHookSecretkey.bind(this);\n    this.generateWebHookSecret = this.generateWebHookSecret.bind(this);\n  }\n  changeWebHookSecretkey(event) {\n    this.setState(\n      {\n        stringData: { WebHookSecretKey: event.target.value },\n      },\n      () => this.props.onChange(this.state),\n    );\n  }\n  generateWebHookSecret() {\n    this.setState(\n      {\n        stringData: { WebHookSecretKey: generateSecret() },\n      },\n      () => this.props.onChange(this.state),\n    );\n  }\n  render() {\n    const { t } = this.props;\n    return (\n      <div className=\"form-group\">\n        <label className=\"control-label co-required\" htmlFor=\"webhook-secret-key\">\n          {t('public~Webhook secret key')}\n        </label>\n        <div className=\"pf-v5-c-input-group\">\n          <input\n            className=\"pf-v5-c-form-control\"\n            id=\"webhook-secret-key\"\n            data-test=\"secret-key\"\n            type=\"text\"\n            name=\"webhookSecretKey\"\n            onChange={this.changeWebHookSecretkey}\n            value={this.state.stringData.WebHookSecretKey}\n            aria-describedby=\"webhook-secret-help\"\n            required\n          />\n          <button\n            type=\"button\"\n            onClick={this.generateWebHookSecret}\n            className=\"pf-v5-c-button pf-m-tertiary\"\n            data-test=\"webhook-generate-button\"\n          >\n            {t('public~Generate')}\n          </button>\n        </div>\n        <p className=\"help-block\" id=\"webhook-secret-help\">\n          {t('public~Value of the secret will be supplied when invoking the webhook.')}\n        </p>\n      </div>\n    );\n  }\n}\n\nexport const WebHookSecretForm = withTranslation()(WebHookSecretFormWithTranslation);\n\ntype WebHookSecretFormState = {\n  stringData: SecretStringData;\n};\n\ntype WebHookSecretFormProps = {\n  onChange: Function;\n  onError: Function;\n  onFormDisable: Function;\n  secretType: string;\n  stringData: SecretStringData;\n};\n","import * as _ from 'lodash-es';\nimport * as React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { WithT } from 'i18next';\nimport { Base64 } from 'js-base64';\nimport { Button } from '@patternfly/react-core';\nimport { MinusCircleIcon } from '@patternfly/react-icons/dist/esm/icons/minus-circle-icon';\nimport { PlusCircleIcon } from '@patternfly/react-icons/dist/esm/icons/plus-circle-icon';\nimport * as ITOB from 'istextorbinary/edition-es2017';\nimport { KeyValueEntryFormState, SecretStringData } from './types';\nimport { KeyValueEntryForm } from './KeyValueEntryForm';\n\nclass GenericSecretFormWithTranslation extends React.Component<\n  GenericSecretFormProps & WithT,\n  GenericSecretFormState\n> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      secretEntriesArray: this.genericSecretObjectToArray(this.props.stringData),\n    };\n    this.onDataChanged = this.onDataChanged.bind(this);\n  }\n  newGenericSecretEntry() {\n    return {\n      entry: {\n        key: '',\n        value: '',\n      },\n      uid: _.uniqueId(),\n    };\n  }\n  genericSecretObjectToArray(genericSecretObject) {\n    if (_.isEmpty(genericSecretObject)) {\n      return [this.newGenericSecretEntry()];\n    }\n    return _.map(genericSecretObject, (value, key) => {\n      const isBinary = ITOB.isBinary(null, value);\n      return {\n        uid: _.uniqueId(),\n        entry: {\n          key,\n          value: isBinary ? Base64.encode(value) : value,\n          isBase64: isBinary,\n          isBinary,\n        },\n      };\n    });\n  }\n  genericSecretArrayToObject(genericSecretArray) {\n    return _.reduce(\n      genericSecretArray,\n      (acc, k) =>\n        _.assign(acc, {\n          [k.entry.key]:\n            k.entry?.isBase64 || k.entry?.isBinary ? k.entry.value : Base64.encode(k.entry.value),\n        }),\n      {},\n    );\n  }\n  onDataChanged(updatedEntry, entryID) {\n    const updatedSecretEntriesArray = [...this.state.secretEntriesArray];\n    const updatedEntryData = {\n      uid: updatedSecretEntriesArray[entryID].uid,\n      entry: updatedEntry,\n    };\n    updatedSecretEntriesArray[entryID] = updatedEntryData;\n    this.setState(\n      {\n        secretEntriesArray: updatedSecretEntriesArray,\n      },\n      () =>\n        this.props.onChange({\n          base64StringData: this.genericSecretArrayToObject(this.state.secretEntriesArray),\n        }),\n    );\n  }\n  removeEntry(entryID) {\n    const updatedSecretEntriesArray = [...this.state.secretEntriesArray];\n    updatedSecretEntriesArray.splice(entryID, 1);\n    this.setState(\n      {\n        secretEntriesArray: updatedSecretEntriesArray,\n      },\n      () =>\n        this.props.onChange({\n          base64StringData: this.genericSecretArrayToObject(this.state.secretEntriesArray),\n        }),\n    );\n  }\n  addEntry() {\n    this.setState(\n      {\n        secretEntriesArray: _.concat(this.state.secretEntriesArray, this.newGenericSecretEntry()),\n      },\n      () =>\n        this.props.onChange({\n          base64StringData: this.genericSecretArrayToObject(this.state.secretEntriesArray),\n        }),\n    );\n  }\n  render() {\n    const { t } = this.props;\n    const secretEntriesList = _.map(this.state.secretEntriesArray, (entryData, index) => {\n      return (\n        <div className=\"co-add-remove-form__entry\" key={entryData.uid}>\n          {_.size(this.state.secretEntriesArray) > 1 && (\n            <div className=\"co-add-remove-form__link--remove-entry\">\n              <Button\n                type=\"button\"\n                onClick={() => this.removeEntry(index)}\n                variant=\"link\"\n                data-test=\"remove-entry-button\"\n              >\n                <MinusCircleIcon className=\"co-icon-space-r\" />\n                {t('public~Remove key/value')}\n              </Button>\n            </div>\n          )}\n          <KeyValueEntryForm id={index} entry={entryData.entry} onChange={this.onDataChanged} />\n        </div>\n      );\n    });\n    return (\n      <>\n        {secretEntriesList}\n        <Button\n          className=\"co-create-secret-form__link--add-entry pf-m-link--align-left\"\n          onClick={() => this.addEntry()}\n          type=\"button\"\n          variant=\"link\"\n          data-test=\"add-credentials-button\"\n        >\n          <PlusCircleIcon className=\"co-icon-space-r\" />\n          {t('public~Add key/value')}\n        </Button>\n      </>\n    );\n  }\n}\n\nexport const GenericSecretForm = withTranslation()(GenericSecretFormWithTranslation);\n\ntype GenericSecretFormProps = {\n  onChange: Function;\n  stringData: SecretStringData;\n  isCreate: boolean;\n};\n\ntype GenericSecretFormState = {\n  secretEntriesArray: {\n    entry: KeyValueEntryFormState;\n    uid: string;\n  }[];\n};\n","import * as React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { WithT } from 'i18next';\nimport { DroppableFileInput } from './DropableFileInput';\nimport { KeyValueEntryFormState, KeyValueEntryFormProps } from './types';\n\nexport class KeyValueEntryFormWithTranslation extends React.Component<\n  KeyValueEntryFormProps & WithT,\n  KeyValueEntryFormState\n> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      key: props.entry.key,\n      value: props.entry.value,\n      isBinary: props.entry.isBinary,\n    };\n    this.onValueChange = this.onValueChange.bind(this);\n    this.onKeyChange = this.onKeyChange.bind(this);\n  }\n  onValueChange(fileData, isBinary) {\n    this.setState(\n      {\n        value: fileData,\n        isBase64: isBinary,\n      },\n      () => this.props.onChange(this.state, this.props.id),\n    );\n  }\n  onKeyChange(event) {\n    this.setState(\n      {\n        key: event.target.value,\n      },\n      () => this.props.onChange(this.state, this.props.id),\n    );\n  }\n  render() {\n    const { t } = this.props;\n    return (\n      <div className=\"co-create-generic-secret__form\">\n        <div className=\"form-group\">\n          <label className=\"control-label co-required\" htmlFor={`${this.props.id}-key`}>\n            {t('public~Key')}\n          </label>\n          <div>\n            <input\n              className=\"pf-v5-c-form-control\"\n              id={`${this.props.id}-key`}\n              type=\"text\"\n              name=\"key\"\n              onChange={this.onKeyChange}\n              value={this.state.key}\n              data-test=\"secret-key\"\n              required\n            />\n          </div>\n        </div>\n        <div className=\"form-group\">\n          <div>\n            <DroppableFileInput\n              onChange={this.onValueChange}\n              inputFileData={this.state.value}\n              id={`${this.props.id}-value`}\n              label={t('public~Value')}\n              inputFieldHelpText={t(\n                'public~Drag and drop file with your value here or browse to upload it.',\n              )}\n              inputFileIsBinary={this.state.isBinary}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport const KeyValueEntryForm = withTranslation()(KeyValueEntryFormWithTranslation);\n","export enum SecretType {\n  NO_AUTH,\n  BASIC_AUTH,\n  SSH,\n  PERSONAL_ACCESS_TOKEN,\n  OAUTH,\n}\n\nexport interface GitSource {\n  url: string;\n  secretType?: SecretType;\n  secretContent?: any;\n  ref?: string;\n  contextDir?: string;\n  devfilePath?: string;\n  dockerfilePath?: string;\n}\n\nexport enum GitProvider {\n  GITHUB = 'github',\n  BITBUCKET = 'bitbucket',\n  GITLAB = 'gitlab',\n  GITEA = 'gitea',\n  UNSURE = 'other',\n  INVALID = '',\n}\n\nexport enum ImportStrategy {\n  S2I,\n  DOCKERFILE,\n  DEVFILE,\n  SERVERLESS_FUNCTION,\n}\n","import * as Octokit from '@octokit/rest';\nimport * as GitUrlParse from 'git-url-parse';\nimport { Base64 } from 'js-base64';\nimport { consoleFetchJSON } from '@console/dynamic-plugin-sdk/src/lib-core';\nimport { API_PROXY_URL, ProxyResponse } from '@console/shared/src/utils/proxy';\nimport {\n  GitSource,\n  SecretType,\n  RepoMetadata,\n  BranchList,\n  RepoLanguageList,\n  RepoFileList,\n  RepoStatus,\n} from '../types';\nimport { BaseService } from './base-service';\n\nexport class GithubService extends BaseService {\n  private readonly client: Octokit;\n\n  private readonly metadata: RepoMetadata;\n\n  constructor(gitsource: GitSource) {\n    super(gitsource);\n    const authOpts = this.getAuthProvider();\n    this.metadata = this.getRepoMetadata();\n    const baseUrl =\n      this.metadata.host === 'github.com' ? null : `https://${this.metadata.host}/api/v3`;\n    this.client = new Octokit({ ...authOpts, baseUrl });\n  }\n\n  protected getAuthProvider = (): Octokit.Options => {\n    switch (this.gitsource.secretType) {\n      case SecretType.PERSONAL_ACCESS_TOKEN:\n      case SecretType.BASIC_AUTH:\n      case SecretType.OAUTH:\n        return { auth: Base64.decode(this.gitsource.secretContent.password) };\n      default:\n        return null;\n    }\n  };\n\n  protected getRepoMetadata = (): RepoMetadata => {\n    const { name, owner, source } = GitUrlParse(this.gitsource.url);\n    const contextDir = this.gitsource.contextDir?.replace(/\\/$/, '') || '';\n    return {\n      repoName: name,\n      owner,\n      host: source,\n      defaultBranch: this.gitsource.ref,\n      contextDir,\n      devfilePath: this.gitsource.devfilePath,\n      dockerfilePath: this.gitsource.dockerfilePath,\n    };\n  };\n\n  isRepoReachable = async (): Promise<RepoStatus> => {\n    try {\n      const resp = await this.client.repos.get({\n        owner: this.metadata.owner,\n        repo: this.metadata.repoName,\n      });\n\n      if (resp.status === 200) {\n        return RepoStatus.Reachable;\n      }\n    } catch (e) {\n      switch (e.status) {\n        case 403: {\n          return RepoStatus.RateLimitExceeded;\n        }\n        case 404: {\n          return RepoStatus.PrivateRepo;\n        }\n        case 422: {\n          return RepoStatus.InvalidGitTypeSelected;\n        }\n        default: {\n          return RepoStatus.Unreachable;\n        }\n      }\n    }\n    return RepoStatus.Unreachable;\n  };\n\n  getRepoBranchList = async (): Promise<BranchList> => {\n    try {\n      const resp = await this.client.repos.listBranches({\n        owner: this.metadata.owner,\n        repo: this.metadata.repoName,\n      });\n      const list = resp.data.map((r) => {\n        return r.name;\n      });\n      return { branches: list };\n    } catch (e) {\n      return { branches: [] };\n    }\n  };\n\n  getRepoFileList = async (params?: { specificPath?: string }): Promise<RepoFileList> => {\n    try {\n      const resp = await this.client.repos.getContents({\n        owner: this.metadata.owner,\n        repo: this.metadata.repoName,\n        ...(params && params?.specificPath\n          ? { path: `${this.metadata.contextDir}/${params.specificPath}` }\n          : { path: this.metadata.contextDir }),\n        ...(this.metadata.defaultBranch ? { ref: this.metadata.defaultBranch } : {}),\n      });\n      let files = [];\n      if (resp.status === 200 && Array.isArray(resp.data)) {\n        files = resp.data.map((t) => t.name);\n      }\n      return { files };\n    } catch (e) {\n      return { files: [] };\n    }\n  };\n\n  getRepoLanguageList = async (): Promise<RepoLanguageList> => {\n    try {\n      const resp = await this.client.repos.listLanguages({\n        owner: this.metadata.owner,\n        repo: this.metadata.repoName,\n      });\n      if (resp.status === 200) {\n        return { languages: Object.keys(resp.data) };\n      }\n      return { languages: [] };\n    } catch (e) {\n      return { languages: [] };\n    }\n  };\n\n  createRepoWebhook = async (\n    token: string,\n    webhookURL: string,\n    sslVerification: boolean,\n    webhookSecret: string,\n  ): Promise<boolean> => {\n    const headers = {\n      Accept: ['application/vnd.github+json'],\n      Authorization: [`Bearer ${token}`],\n      'X-GitHub-Api-Version': ['2022-11-28'],\n    };\n    const body = {\n      name: 'web',\n      active: true,\n      config: {\n        url: webhookURL,\n        content_type: 'json',\n        insecure_ssl: sslVerification ? '0' : '1',\n        secret: webhookSecret,\n      },\n      events: ['push', 'pull_request'],\n    };\n    const AddWebhookBaseURL =\n      this.metadata.host === 'github.com'\n        ? `https://api.github.com`\n        : `https://${this.metadata.host}/api/v3`;\n    /* Using DevConsole Proxy to create webhook as Octokit is giving CORS error */\n    const webhookResponse: ProxyResponse = await consoleFetchJSON.post(API_PROXY_URL, {\n      url: `${AddWebhookBaseURL}/repos/${this.metadata.owner}/${this.metadata.repoName}/hooks`,\n      method: 'POST',\n      headers,\n      body: JSON.stringify(body),\n    });\n\n    return webhookResponse.statusCode === 201;\n  };\n\n  isFilePresent = async (path: string): Promise<boolean> => {\n    try {\n      const resp = await this.client.repos.getContents({\n        owner: this.metadata.owner,\n        repo: this.metadata.repoName,\n        path,\n        ...(this.metadata.defaultBranch ? { ref: this.metadata.defaultBranch } : {}),\n      });\n      return resp.status === 200;\n    } catch (e) {\n      return false;\n    }\n  };\n\n  getFileContent = async (path: string): Promise<string | null> => {\n    try {\n      const resp = await this.client.repos.getContents({\n        owner: this.metadata.owner,\n        repo: this.metadata.repoName,\n        path,\n        ...(this.metadata.defaultBranch ? { ref: this.metadata.defaultBranch } : {}),\n      });\n      if (resp.status === 200) {\n        // eslint-disable-next-line dot-notation\n        return Buffer.from(resp.data['content'], 'base64').toString();\n      }\n      return null;\n    } catch (e) {\n      return null;\n    }\n  };\n\n  isDockerfilePresent = () =>\n    this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`);\n\n  isTektonFolderPresent = () => this.isFilePresent(`${this.metadata.contextDir}/.tekton`);\n\n  getDockerfileContent = () =>\n    this.getFileContent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`);\n\n  isFuncYamlPresent = () =>\n    this.isFilePresent(`${this.metadata.contextDir}/func.yaml`) ||\n    this.isFilePresent(`${this.metadata.contextDir}/func.yml`);\n\n  getFuncYamlContent = () =>\n    this.getFileContent(`${this.metadata.contextDir}/func.yaml`) ||\n    this.getFileContent(`${this.metadata.contextDir}/func.yml`);\n\n  isDevfilePresent = () =>\n    this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`);\n\n  getDevfileContent = () =>\n    this.getFileContent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`);\n\n  getPackageJsonContent = () => this.getFileContent(`${this.metadata.contextDir}/package.json`);\n}\n","import { Base64 } from 'js-base64';\nimport * as ParseBitbucketUrl from 'parse-bitbucket-url';\nimport 'whatwg-fetch';\nimport { consoleFetchJSON } from '@console/dynamic-plugin-sdk/src/lib-core';\nimport {\n  API_PROXY_URL,\n  ProxyResponse,\n  consoleProxyFetchJSON,\n  convertHeaders,\n} from '@console/shared/src/utils/proxy';\nimport {\n  GitSource,\n  SecretType,\n  RepoMetadata,\n  BranchList,\n  RepoLanguageList,\n  RepoFileList,\n  RepoStatus,\n} from '../types';\nimport { BaseService } from './base-service';\n\nexport class BitbucketService extends BaseService {\n  private readonly metadata: RepoMetadata;\n\n  private baseURL = 'https://api.bitbucket.org/2.0';\n\n  private isServer = false;\n\n  constructor(gitsource: GitSource) {\n    super(gitsource);\n    this.metadata = this.getRepoMetadata();\n    if (this.metadata.host !== 'bitbucket.org') {\n      this.baseURL = `https://${this.metadata.host}/rest/api/1.0`;\n      this.isServer = true;\n    }\n  }\n\n  protected getAuthProvider = (): any => {\n    switch (this.gitsource.secretType) {\n      case SecretType.BASIC_AUTH: {\n        const { username, password } = this.gitsource.secretContent;\n        const encodedAuth = Base64.encode(`${Base64.decode(username)}:${Base64.decode(password)}`);\n        return { Authorization: `Basic ${encodedAuth}` };\n      }\n      default:\n        return null;\n    }\n  };\n\n  protected fetchJson = async (\n    url: string,\n    requestMethod?: string,\n    headers?: object,\n    body?: object,\n  ) => {\n    const authHeaders = this.getAuthProvider();\n\n    const requestHeaders = {\n      Accept: 'application/json',\n      ...authHeaders,\n      ...headers,\n    };\n\n    if (this.isServer) {\n      return consoleProxyFetchJSON({\n        url,\n        method: requestMethod || 'GET',\n        headers: convertHeaders(requestHeaders),\n        ...(body && { body: JSON.stringify(body) }),\n      });\n    }\n\n    const response = await fetch(url, {\n      method: requestMethod || 'GET',\n      headers: requestHeaders,\n      ...(body && { body: JSON.stringify(body) }),\n    });\n    if (!response.ok) {\n      throw response;\n    }\n    if (response.headers.get('Content-Type') === 'text/plain') {\n      return response.text();\n    }\n    return response.json();\n  };\n\n  getRepoMetadata = (): RepoMetadata => {\n    const { name, owner, host } = ParseBitbucketUrl(this.gitsource.url);\n    const contextDir = this.gitsource.contextDir?.replace(/\\/$/, '') || '';\n    return {\n      repoName: name,\n      owner,\n      host,\n      defaultBranch: this.gitsource.ref || 'HEAD',\n      contextDir,\n      devfilePath: this.gitsource.devfilePath,\n      dockerfilePath: this.gitsource.dockerfilePath,\n    };\n  };\n\n  isRepoReachable = async (): Promise<RepoStatus> => {\n    const url = this.isServer\n      ? `${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}`\n      : `${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}`;\n    try {\n      const data = await this.fetchJson(url);\n      if (data.slug === this.metadata.repoName) {\n        return RepoStatus.Reachable;\n      }\n    } catch (e) {\n      switch (e.status) {\n        case 429: {\n          return RepoStatus.RateLimitExceeded;\n        }\n        case 403: {\n          return RepoStatus.PrivateRepo;\n        }\n        case 404: {\n          return RepoStatus.ResourceNotFound;\n        }\n        default: {\n          return RepoStatus.InvalidGitTypeSelected;\n        }\n      }\n    }\n    return RepoStatus.Unreachable;\n  };\n\n  getRepoBranchList = async (): Promise<BranchList> => {\n    const url = this.isServer\n      ? `${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/branches`\n      : `${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/refs/branches`;\n    try {\n      const data = await this.fetchJson(url);\n      const list = data.values.map((b) => b.name);\n      return { branches: list };\n    } catch (e) {\n      return { branches: [] };\n    }\n  };\n\n  isServerURL = (isServer: boolean, specificPath?: string) => {\n    let url = '';\n    if (specificPath) {\n      url = isServer\n        ? `${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/files/${this.metadata.contextDir}/${specificPath}?limit=50&at=${this.metadata.defaultBranch}`\n        : `${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/src/${this.metadata.defaultBranch}/${this.metadata.contextDir}/${specificPath}?pagelen=50`;\n    } else {\n      url = isServer\n        ? `${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/files/${this.metadata.contextDir}?limit=50&at=${this.metadata.defaultBranch}`\n        : `${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/src/${this.metadata.defaultBranch}/${this.metadata.contextDir}?pagelen=50`;\n    }\n    return url;\n  };\n\n  getRepoFileList = async (params?: { specificPath?: string }): Promise<RepoFileList> => {\n    const url = params?.specificPath\n      ? this.isServerURL(this.isServer, params.specificPath)\n      : this.isServerURL(this.isServer);\n    try {\n      const data = await this.fetchJson(url);\n      const files = this.isServer ? data.values : data.values?.map((f) => f.path) || [];\n      return { files };\n    } catch (e) {\n      return { files: [] };\n    }\n  };\n\n  getRepoLanguageList = async (): Promise<RepoLanguageList> => {\n    const url = this.isServer\n      ? `${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}`\n      : `${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}`;\n    try {\n      const data = await this.fetchJson(url);\n      return { languages: [data.language] };\n    } catch (e) {\n      return { languages: [] };\n    }\n  };\n\n  createRepoWebhook = async (\n    token: string,\n    webhookURL: string,\n    sslVerification: boolean,\n  ): Promise<boolean> => {\n    const headers = {\n      'Content-Type': ['application/json'],\n      Authorization: [`Basic ${token}`],\n    };\n    const body = {\n      url: webhookURL,\n      events: ['repo:push', 'pullrequest:created', 'pullrequest:updated'],\n      skip_cert_verification: !sslVerification,\n      active: true,\n    };\n    const url = this.isServer\n      ? `${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/hooks`\n      : `${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/hooks`;\n\n    /* Using DevConsole Proxy to create webhook as Bitbucket is giving CORS error */\n    const webhookResponse: ProxyResponse = await consoleFetchJSON.post(API_PROXY_URL, {\n      url,\n      method: 'POST',\n      headers,\n      body: JSON.stringify(body),\n    });\n\n    return webhookResponse.statusCode === 201;\n  };\n\n  isFilePresent = async (path: string): Promise<boolean> => {\n    const filePath = path.replace(/^\\//, '');\n    const url = this.isServer\n      ? `${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/raw/${filePath}?at=${this.metadata.defaultBranch}`\n      : `${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/src/${this.metadata.defaultBranch}/${filePath}`;\n    try {\n      await this.fetchJson(url);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  };\n\n  getFileContent = async (path: string): Promise<string | null> => {\n    const filePath = path.replace(/^\\//, '');\n    const url = this.isServer\n      ? `${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/raw/${filePath}?at=${this.metadata.defaultBranch}`\n      : `${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/src/${this.metadata.defaultBranch}/${filePath}`;\n    try {\n      const data = await this.fetchJson(url);\n      return data as string;\n    } catch (e) {\n      return null;\n    }\n  };\n\n  isDockerfilePresent = () =>\n    this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`);\n\n  isTektonFolderPresent = () => this.isFilePresent(`${this.metadata.contextDir}/.tekton`);\n\n  getDockerfileContent = () =>\n    this.getFileContent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`);\n\n  isFuncYamlPresent = () =>\n    this.isFilePresent(`${this.metadata.contextDir}/func.yaml`) ||\n    this.isFilePresent(`${this.metadata.contextDir}/func.yml`);\n\n  getFuncYamlContent = () =>\n    this.getFileContent(`${this.metadata.contextDir}/func.yaml`) ||\n    this.getFileContent(`${this.metadata.contextDir}/func.yml`);\n\n  isDevfilePresent = () =>\n    this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`);\n\n  getDevfileContent = () =>\n    this.getFileContent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`);\n\n  getPackageJsonContent = () => this.getFileContent(`${this.metadata.contextDir}/package.json`);\n}\n","import * as GitUrlParse from 'git-url-parse';\nimport { Gitlab } from 'gitlab';\nimport i18n from 'i18next';\nimport { Base64 } from 'js-base64';\nimport { consoleFetchJSON } from '@console/dynamic-plugin-sdk/src/lib-core';\nimport { API_PROXY_URL, ProxyResponse } from '@console/shared/src/utils/proxy';\nimport {\n  GitSource,\n  SecretType,\n  RepoMetadata,\n  BranchList,\n  RepoLanguageList,\n  RepoFileList,\n  RepoStatus,\n} from '../types';\nimport { BaseService } from './base-service';\n\ntype GitlabRepo = {\n  id: number;\n  path_with_namespace: string;\n};\n\nconst removeLeadingSlash = (str: string) => str?.replace(/^\\//, '') || '';\n\nexport class GitlabService extends BaseService {\n  private readonly client: any;\n\n  private readonly metadata: RepoMetadata;\n\n  private repo: GitlabRepo;\n\n  constructor(gitsource: GitSource) {\n    super(gitsource);\n    this.metadata = this.getRepoMetadata();\n    const token = this.getAuthProvider();\n    this.client = new Gitlab({\n      host: this.metadata.host,\n      token,\n    });\n    this.repo = null;\n  }\n\n  private getRepo = async (): Promise<GitlabRepo> => {\n    if (this.repo) {\n      return Promise.resolve(this.repo);\n    }\n    const repo: GitlabRepo = await this.client.Projects.show(this.metadata.fullName);\n    if (!repo) {\n      throw new Error(i18n.t('git-service~Unable to find repository'));\n    } else if (repo.path_with_namespace !== this.metadata.fullName) {\n      throw new Error(\n        i18n.t('git-service~Repository path {{path}} does not match expected name {{name}}', {\n          path: repo.path_with_namespace,\n          name: this.metadata.fullName,\n        }),\n      );\n    }\n\n    this.repo = repo;\n    return Promise.resolve(this.repo);\n  };\n\n  getRepoMetadata(): RepoMetadata {\n    const { name, owner, resource, full_name: fullName } = GitUrlParse(this.gitsource.url);\n    const contextDir = removeLeadingSlash(this.gitsource.contextDir);\n    const host = `https://${resource}`;\n    return {\n      repoName: name,\n      owner,\n      host,\n      defaultBranch: this.gitsource.ref,\n      fullName,\n      contextDir,\n      devfilePath: this.gitsource.devfilePath,\n      dockerfilePath: this.gitsource.dockerfilePath,\n    };\n  }\n\n  getAuthProvider = (): any => {\n    switch (this.gitsource.secretType) {\n      case SecretType.PERSONAL_ACCESS_TOKEN:\n      case SecretType.OAUTH:\n      case SecretType.BASIC_AUTH:\n        return Base64.decode(this.gitsource.secretContent.password);\n      default:\n        return null;\n    }\n  };\n\n  getProjectId = async (): Promise<any> => {\n    try {\n      const repo = await this.getRepo();\n      return repo.id;\n    } catch (e) {\n      throw e;\n    }\n  };\n\n  isRepoReachable = async (): Promise<RepoStatus> => {\n    try {\n      await this.getRepo();\n      return RepoStatus.Reachable;\n    } catch (e) {\n      switch (e.status) {\n        case 429: {\n          return RepoStatus.RateLimitExceeded;\n        }\n        case 403: {\n          return RepoStatus.PrivateRepo;\n        }\n        case 404: {\n          return RepoStatus.ResourceNotFound;\n        }\n        case 422: {\n          return RepoStatus.InvalidGitTypeSelected;\n        }\n        default: {\n          return RepoStatus.Unreachable;\n        }\n      }\n    }\n  };\n\n  getRepoBranchList = async (): Promise<BranchList> => {\n    try {\n      const projectID = await this.getProjectId();\n      const resp = await this.client.Branches.all(projectID);\n      const list = resp.map((b) => b.name);\n      return { branches: list };\n    } catch (e) {\n      return { branches: [] };\n    }\n  };\n\n  getRepoFileList = async (params?: {\n    specificPath?: string;\n    includeFolder?: boolean;\n  }): Promise<RepoFileList> => {\n    try {\n      const projectID = await this.getProjectId();\n      const resp = await this.client.Repositories.tree(projectID, {\n        ...(params?.specificPath\n          ? { path: this.filePath(params.specificPath) }\n          : { path: this.metadata.contextDir }),\n      });\n      const files = resp.reduce((acc, file) => {\n        if (file.type === 'blob' || (params?.includeFolder && file.type === 'tree'))\n          acc.push(file.path);\n        return acc;\n      }, []);\n      return { files };\n    } catch (e) {\n      return { files: [] };\n    }\n  };\n\n  getRepoLanguageList = async (): Promise<RepoLanguageList> => {\n    try {\n      const projectID = await this.getProjectId();\n      const resp = await this.client.Projects.languages(projectID);\n      return { languages: Object.keys(resp) };\n    } catch (e) {\n      return { languages: [] };\n    }\n  };\n\n  createRepoWebhook = async (\n    token: string,\n    webhookURL: string,\n    sslVerification: boolean,\n    webhookSecret: string,\n  ): Promise<boolean> => {\n    const projectID = await this.getProjectId();\n    const headers = {\n      'Content-Type': ['application/json'],\n      'PRIVATE-TOKEN': [token],\n    };\n    const body = {\n      url: webhookURL,\n      push_events: true,\n      merge_requests_events: true,\n      enable_ssl_verification: sslVerification,\n      token: webhookSecret,\n    };\n    /* Using DevConsole Proxy to create webhook as Gitlab is giving CORS error */\n    const webhookResponse: ProxyResponse = await consoleFetchJSON.post(API_PROXY_URL, {\n      url: `${this.metadata.host}/api/v4/projects/${projectID}/hooks`,\n      method: 'POST',\n      headers,\n      body: JSON.stringify(body),\n    });\n\n    return webhookResponse.statusCode === 201;\n  };\n\n  isFilePresent = async (path: string): Promise<boolean> => {\n    try {\n      const projectID = await this.getProjectId();\n      const ref = this.metadata.defaultBranch || (this.repo as any)?.default_branch;\n      await this.client.RepositoryFiles.showRaw(projectID, path, ref);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  };\n\n  getFileContent = async (path: string): Promise<string | null> => {\n    try {\n      const projectID = await this.getProjectId();\n      const ref = this.metadata.defaultBranch || (this.repo as any)?.default_branch;\n      const filePath = path.replace(/^\\/+/, '');\n      return await this.client.RepositoryFiles.showRaw(projectID, filePath, ref);\n    } catch (e) {\n      return null;\n    }\n  };\n\n  filePath = (file: string): string => {\n    return this.metadata.contextDir ? `${this.metadata.contextDir}/${file}` : file;\n  };\n\n  isDockerfilePresent = () => this.isFilePresent(this.filePath(`${this.metadata.dockerfilePath}`));\n\n  isTektonFolderPresent = async (): Promise<boolean> => {\n    try {\n      const projectID = await this.getProjectId();\n      const resp = await this.client.Repositories.tree(projectID, {\n        path: this.metadata.contextDir,\n      });\n      const tektonFolderPresent = resp.find(\n        (file) => file.type === 'tree' && file.name === '.tekton',\n      );\n      return !!tektonFolderPresent;\n    } catch (e) {\n      return false;\n    }\n  };\n\n  getDockerfileContent = () =>\n    this.getFileContent(this.filePath(`${this.metadata.dockerfilePath}`));\n\n  isFuncYamlPresent = () =>\n    this.isFilePresent(this.filePath('func.yaml')) || this.isFilePresent(this.filePath('func.yml'));\n\n  getFuncYamlContent = () =>\n    this.getFileContent(this.filePath('func.yaml')) ||\n    this.getFileContent(this.filePath('func.yml'));\n\n  isDevfilePresent = () => this.isFilePresent(this.filePath(`${this.metadata.devfilePath}`));\n\n  getDevfileContent = () => this.getFileContent(this.filePath(`${this.metadata.devfilePath}`));\n\n  getPackageJsonContent = () => this.getFileContent(this.filePath('package.json'));\n}\n","import * as GitUrlParse from 'git-url-parse';\nimport { Base64 } from 'js-base64';\nimport * as _ from 'lodash';\nimport 'whatwg-fetch';\nimport { consoleFetchJSON } from '@console/dynamic-plugin-sdk/src/lib-core';\nimport {\n  API_PROXY_URL,\n  ProxyResponse,\n  consoleProxyFetchJSON,\n  convertHeaders,\n} from '@console/shared/src/utils/proxy';\nimport {\n  BranchList,\n  GitSource,\n  RepoFileList,\n  RepoLanguageList,\n  RepoMetadata,\n  RepoStatus,\n  SecretType,\n} from '../types';\nimport { definitions } from '../types/generated/gitea';\nimport { BaseService } from './base-service';\n\nexport class GiteaService extends BaseService {\n  private readonly metadata: RepoMetadata;\n\n  private isServer = false;\n\n  constructor(gitsource: GitSource) {\n    super(gitsource);\n    this.metadata = this.getRepoMetadata();\n    if (!this.metadata.host.includes('gitea.com')) {\n      this.isServer = true;\n    }\n  }\n\n  protected getAuthProvider = (): any => {\n    if (this.gitsource.secretType === SecretType.BASIC_AUTH) {\n      const { username, password } = this.gitsource.secretContent;\n      if (!_.isEmpty(username)) {\n        const encodedAuth = Base64.encode(`${Base64.decode(username)}:${Base64.decode(password)}`);\n        return { authorization: `Basic ${encodedAuth}` };\n      }\n      return { Authorization: `token ${Base64.decode(password)}` };\n    }\n    return null;\n  };\n\n  protected fetchJson = async (\n    url: string,\n    requestMethod?: string,\n    headers?: object,\n    body?: object,\n  ) => {\n    const authHeaders = this.getAuthProvider();\n    const requestHeaders = {\n      Accept: 'application/json',\n      ...authHeaders,\n      ...headers,\n    };\n    if (this.isServer) {\n      return consoleProxyFetchJSON({\n        allowInsecure: true,\n        url,\n        method: requestMethod || 'GET',\n        headers: convertHeaders(requestHeaders),\n        ...(body && { body: JSON.stringify(body) }),\n      });\n    }\n\n    const response = await fetch(url, {\n      method: requestMethod || 'GET',\n      headers: requestHeaders,\n      ...(body && { body: JSON.stringify(body) }),\n    });\n    if (!response.ok) {\n      throw response;\n    }\n    if (response.headers.get('Content-Type') === 'text/plain') {\n      return response.text();\n    }\n    return response.json();\n  };\n\n  getRepoMetadata = (): RepoMetadata => {\n    const { name, owner, resource, full_name: fullName } = GitUrlParse(this.gitsource.url);\n    const contextDir = this.gitsource.contextDir?.replace(/\\/$/, '') || '';\n    const host = `https://${resource}`;\n    return {\n      repoName: name,\n      owner,\n      host,\n      defaultBranch: this.gitsource.ref,\n      fullName,\n      contextDir,\n      devfilePath: this.gitsource.devfilePath,\n      dockerfilePath: this.gitsource.dockerfilePath,\n    };\n  };\n\n  isRepoReachable = async (): Promise<RepoStatus> => {\n    const url = `${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}`;\n    try {\n      const data: definitions['Repository'] = await this.fetchJson(url);\n      if (data?.name === this.metadata.repoName) {\n        return RepoStatus.Reachable;\n      }\n    } catch (e) {\n      return RepoStatus.GiteaRepoUnreachable;\n    }\n    return RepoStatus.GiteaRepoUnreachable;\n  };\n\n  getRepoBranchList = async (): Promise<BranchList> => {\n    const url = `${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/branches`;\n    try {\n      const data: definitions['Branch'][] = await this.fetchJson(url);\n      const list = data?.map((b) => b.name) || [];\n      return { branches: list };\n    } catch (e) {\n      return { branches: [] };\n    }\n  };\n\n  getRepoFileList = async (params?: { specificPath?: string }): Promise<RepoFileList> => {\n    const url = params?.specificPath\n      ? `${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/contents/${this.metadata.contextDir}/${params.specificPath}`\n      : `${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/contents/${this.metadata.contextDir}`;\n\n    try {\n      const data: definitions['ContentsResponse'][] = await this.fetchJson(url);\n      const list = data?.map((f) => f.name) || [];\n      return { files: list };\n    } catch (e) {\n      return { files: [] };\n    }\n  };\n\n  getRepoLanguageList = async (): Promise<RepoLanguageList> => {\n    const url = `${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/languages`;\n    try {\n      const data: { [key: string]: number } = await this.fetchJson(url);\n      const list = Object?.keys(data) || [];\n      return { languages: list };\n    } catch (e) {\n      return { languages: [] };\n    }\n  };\n\n  /* TODO: Gitea PAC Support */\n  createRepoWebhook = async (token: string, webhookURL: string): Promise<boolean> => {\n    const headers = {\n      'Content-Type': ['application/json'],\n      Authorization: [`token ${token}`],\n    };\n    const body = {\n      active: true,\n      authorization_header: '',\n      branch_filter: '*',\n      config: {\n        content_type: 'json',\n        url: webhookURL,\n      },\n      events: ['push', 'pull_request'],\n      type: 'gitea',\n    };\n    const url = `${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/hooks`;\n\n    /* Using DevConsole Proxy to create webhook as Gitea is giving CORS error */\n    const webhookResponse: ProxyResponse = await consoleFetchJSON.post(API_PROXY_URL, {\n      url,\n      method: 'POST',\n      headers,\n      body: JSON.stringify(body),\n    });\n\n    return webhookResponse.statusCode === 201;\n  };\n\n  isFilePresent = async (path: string): Promise<boolean> => {\n    const filePath = path.replace(/^\\//, '');\n    const url = `${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/contents/${filePath}?ref=${this.metadata.defaultBranch}`;\n    try {\n      await this.fetchJson(url);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  };\n\n  getFileContent = async (path: string): Promise<string | null> => {\n    const filePath = path.replace(/^\\//, '');\n    const url = `${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/raw/${filePath}?ref=${this.metadata.defaultBranch}`;\n    try {\n      const data = await this.fetchJson(url);\n      return data as string;\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.warn('Error fetching file content', e);\n      return null;\n    }\n  };\n\n  isDockerfilePresent = () =>\n    this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`);\n\n  isTektonFolderPresent = () => this.isFilePresent(`${this.metadata.contextDir}/.tekton`);\n\n  getDockerfileContent = () =>\n    this.getFileContent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`);\n\n  isFuncYamlPresent = () =>\n    this.isFilePresent(`${this.metadata.contextDir}/func.yaml`) ||\n    this.isFilePresent(`${this.metadata.contextDir}/func.yml`);\n\n  getFuncYamlContent = () =>\n    this.getFileContent(`${this.metadata.contextDir}/func.yaml`) ||\n    this.getFileContent(`${this.metadata.contextDir}/func.yml`);\n\n  isDevfilePresent = () =>\n    this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`);\n\n  getDevfileContent = () =>\n    this.getFileContent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`);\n\n  getPackageJsonContent = () => this.getFileContent(`${this.metadata.contextDir}/package.json`);\n}\n","import { BaseService } from '../services/base-service';\nimport { isModernWebApp } from './build-tool-detector';\n\ntype BuildTool = {\n  name: string;\n  type: string;\n  language: string;\n  expectedRegexp: RegExp;\n  priority: number;\n  customDetection?: (gitService: BaseService) => Promise<string[]>;\n};\n\nconst BuildTools: BuildTool[] = [\n  {\n    name: 'Maven',\n    type: 'java',\n    language: 'java',\n    expectedRegexp: /pom.xml/,\n    priority: 0,\n  },\n  {\n    name: 'Gradle',\n    type: 'java',\n    language: 'java',\n    expectedRegexp: /.*gradle.*/,\n    priority: 0,\n  },\n  {\n    name: 'Golang',\n    type: 'golang',\n    language: 'go',\n    expectedRegexp: RegExp([`.*.\\\\.go`, `Gopkg.toml`, `glide.yaml`].join('|')),\n    priority: 0,\n  },\n  {\n    name: 'Ruby',\n    type: 'ruby',\n    language: 'ruby',\n    expectedRegexp: RegExp([`Gemfile`, `Rakefile`, `config.ru`].join('|')),\n    priority: 0,\n  },\n  {\n    name: 'NodeJS',\n    type: 'nodejs',\n    language: 'javascript',\n    expectedRegexp: RegExp([`app.json`, `package.json`, `gulpfile.js`, `Gruntfile.js`].join('|')),\n    priority: 0,\n  },\n  {\n    name: 'Modern Web App',\n    type: 'modern-webapp',\n    language: 'javascript',\n    expectedRegexp: /package\\.json/,\n    priority: 1,\n    customDetection: async (gitService) => {\n      const packageJson = await gitService.getPackageJsonContent();\n      return isModernWebApp(packageJson) ? ['package.json'] : [];\n    },\n  },\n  {\n    name: 'PHP',\n    type: 'php',\n    language: 'php',\n    expectedRegexp: RegExp([`index.php`, `composer.json`].join('|')),\n    priority: 0,\n  },\n  {\n    name: 'Python',\n    type: 'python',\n    language: 'python',\n    expectedRegexp: RegExp([`requirements.txt`, `setup.py`].join('|')),\n    priority: 0,\n  },\n  {\n    name: 'Perl',\n    type: 'perl',\n    language: 'perl',\n    expectedRegexp: RegExp([`index.pl`, `cpanfile`].join('|')),\n    priority: 0,\n  },\n  {\n    name: 'Dotnet',\n    type: 'dotnet',\n    language: 'C#',\n    expectedRegexp: RegExp([`project.json`, `.*.csproj`].join('|')),\n    priority: 0,\n  },\n];\n\nexport type DetectedBuildType = {\n  name: string;\n  type: string;\n  language: string;\n  priority: number;\n  detectedFiles: string[];\n};\n\nexport const detectBuildTypes = async (gitService: BaseService): Promise<DetectedBuildType[]> => {\n  const { files } = await gitService.getRepoFileList();\n\n  const buildTypes = await Promise.all(\n    BuildTools.map<Promise<DetectedBuildType>>(async (t) => {\n      let detectedFiles = files.filter((f) => t.expectedRegexp.test(f));\n      if (detectedFiles.length > 0 && t.customDetection) {\n        detectedFiles = await t.customDetection(gitService);\n      }\n      return {\n        name: t.name,\n        type: t.type,\n        language: t.language,\n        priority: t.priority,\n        detectedFiles,\n      };\n    }),\n  );\n\n  return buildTypes\n    .filter((t) => !!t.detectedFiles.length)\n    .sort((t1, t2) => t2.priority - t1.priority);\n};\n","import i18next from 'i18next';\nimport * as _ from 'lodash';\nimport { ComputedStatus } from '../types';\n\nexport enum SucceedConditionReason {\n  PipelineRunCancelled = 'StoppedRunFinally',\n  PipelineRunStopped = 'CancelledRunFinally',\n  TaskRunCancelled = 'TaskRunCancelled',\n  Cancelled = 'Cancelled',\n  PipelineRunStopping = 'PipelineRunStopping',\n  PipelineRunPending = 'PipelineRunPending',\n  TaskRunStopping = 'TaskRunStopping',\n  CreateContainerConfigError = 'CreateContainerConfigError',\n  ExceededNodeResources = 'ExceededNodeResources',\n  ExceededResourceQuota = 'ExceededResourceQuota',\n  ConditionCheckFailed = 'ConditionCheckFailed',\n}\n\nexport const pipelineRunStatus = (pipelineRun): ComputedStatus => {\n  const conditions = _.get(pipelineRun, ['status', 'conditions'], []);\n  if (conditions.length === 0) return null;\n\n  const succeedCondition = conditions.find((c) => c.type === 'Succeeded');\n  const cancelledCondition = conditions.find((c) => c.reason === 'Cancelled');\n\n  if (\n    [\n      SucceedConditionReason.PipelineRunStopped,\n      SucceedConditionReason.PipelineRunCancelled,\n    ].includes(pipelineRun.spec?.status) &&\n    !cancelledCondition\n  ) {\n    return ComputedStatus.Cancelling;\n  }\n\n  if (!succeedCondition || !succeedCondition.status) {\n    return null;\n  }\n\n  const status =\n    succeedCondition.status === 'True'\n      ? ComputedStatus.Succeeded\n      : succeedCondition.status === 'False'\n      ? ComputedStatus.Failed\n      : ComputedStatus.Running;\n\n  if (succeedCondition.reason && succeedCondition.reason !== status) {\n    switch (succeedCondition.reason) {\n      case SucceedConditionReason.PipelineRunCancelled:\n      case SucceedConditionReason.TaskRunCancelled:\n      case SucceedConditionReason.Cancelled:\n      case SucceedConditionReason.PipelineRunStopped:\n        return ComputedStatus.Cancelled;\n      case SucceedConditionReason.PipelineRunStopping:\n      case SucceedConditionReason.TaskRunStopping:\n        return ComputedStatus.Failed;\n      case SucceedConditionReason.CreateContainerConfigError:\n      case SucceedConditionReason.ExceededNodeResources:\n      case SucceedConditionReason.ExceededResourceQuota:\n      case SucceedConditionReason.PipelineRunPending:\n        return ComputedStatus.Pending;\n      case SucceedConditionReason.ConditionCheckFailed:\n        return ComputedStatus.Skipped;\n      default:\n        return status;\n    }\n  }\n  return status;\n};\n\n// Converts the PipelineRun (and TaskRun) condition status into a human readable string.\n// See also tkn cli implementation at https://github.com/tektoncd/cli/blob/release-v0.15.0/pkg/formatted/k8s.go#L54-L83\nexport const pipelineRunStatusTitle = (pipelineRun): string => {\n  const status = pipelineRunStatus(pipelineRun);\n  if (!status) return '-';\n  switch (status) {\n    case ComputedStatus.Cancelled:\n      return i18next.t('pipelines-plugin~Cancelled');\n    case ComputedStatus.Failed:\n      return i18next.t('pipelines-plugin~Failed');\n    case ComputedStatus.Succeeded:\n      return i18next.t('pipelines-plugin~Succeeded');\n    case ComputedStatus.Pending:\n      return i18next.t('pipelines-plugin~Pending');\n    case ComputedStatus.Running:\n      return i18next.t('pipelines-plugin~Running');\n    case ComputedStatus.Skipped:\n      return i18next.t('pipelines-plugin~Skipped');\n    case ComputedStatus.Cancelling:\n      return i18next.t('pipelines-plugin~Cancelling');\n    default:\n      return status;\n  }\n};\n\nexport const pipelineFilterReducer = (pipeline): ComputedStatus => {\n  if (!pipeline.latestRun) return ComputedStatus.Other;\n  return pipelineRunStatus(pipeline.latestRun) || ComputedStatus.Other;\n};\n\nexport const pipelineTitleFilterReducer = (pipeline): string => {\n  if (!pipeline.latestRun) return '-';\n  return pipelineRunStatusTitle(pipeline.latestRun) || '-';\n};\n\nexport const pipelineRunTitleFilterReducer = (pipelineRun): string => {\n  const status = pipelineRunStatusTitle(pipelineRun);\n  return status || '-';\n};\nexport const pipelineRunFilterReducer = (pipelineRun): ComputedStatus => {\n  const status = pipelineRunStatus(pipelineRun);\n  return status || ComputedStatus.Other;\n};\n\nexport const pipelineStatusFilter = (filters, pipeline) => {\n  if (!filters || !filters.selected || !filters.selected.length) {\n    return true;\n  }\n  const status = pipelineFilterReducer(pipeline);\n  return filters.selected?.includes(status) || !_.includes(filters.all, status);\n};\n\nexport const pipelineRunStatusFilter = (phases, pipeline) => {\n  if (!phases || !phases.selected || !phases.selected.length) {\n    return true;\n  }\n\n  const status = pipelineRunFilterReducer(pipeline);\n  return phases.selected?.includes(status) || !_.includes(phases.all, status);\n};\n\nexport const pipelineResourceFilterReducer = (pipelineResource): string => {\n  return pipelineResource.spec.type;\n};\n\nexport const pipelineResourceTypeFilter = (filters, pipelineResource): boolean => {\n  if (!filters || !filters.selected || !filters.selected.length) {\n    return true;\n  }\n  const type = pipelineResourceFilterReducer(pipelineResource);\n  return filters.selected?.includes(type) || !_.includes(filters.all, type);\n};\n\nexport const taskRunFilterReducer = (taskRun): ComputedStatus => {\n  const status = pipelineRunStatus(taskRun);\n  return status || ComputedStatus.Other;\n};\n\nexport const taskRunFilterTitleReducer = (taskRun): string => {\n  const status = pipelineRunStatusTitle(taskRun);\n  return status || '-';\n};\n","import { PipelineKind } from '../../types';\n\nexport enum PipelineType {\n  PAC = 'pac',\n  PIPELINE = 'pipeline',\n}\nexport interface PipelineData {\n  enabled: boolean;\n  type?: PipelineType;\n  template?: PipelineKind;\n}\n","import { TFunction } from 'i18next';\nimport * as _ from 'lodash';\nimport * as yup from 'yup';\nimport { convertToBaseValue } from '@console/internal/components/utils';\nimport { PipelineType } from '@console/pipelines-plugin/src/components/import/import-types';\nimport { CREATE_APPLICATION_KEY } from '@console/topology/src/const';\nimport { isInteger } from '../../utils/yup-validation-util';\nimport { BuildOptions, Resources } from './import-types';\nimport { removeKsvcInfoFromDomainMapping } from './serverless/serverless-utils';\n\nconst hostnameRegex = /^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$/;\nconst pathRegex = /^\\/.*$/;\nconst projectNameRegex = /^[a-z0-9]([-a-z0-9]*[a-z0-9])?$/;\n\nexport const gitUrlRegex = /^((((ssh|git|https?:?):\\/\\/:?)(([^\\s@]+@|[^@]:?)[-\\w.]+(:\\d\\d+:?)?(\\/[-\\w.~/?[\\]!$&'()*+,;=:@%]*:?)?:?))|([^\\s@]+@[-\\w.]+:[-\\w.~/?[\\]!$&'()*+,;=:@%]*?:?))$/;\n\nconst convertToSec = (value: number, unit: string): number => {\n  switch (unit) {\n    case 'm': {\n      return value * 60;\n    }\n    case 'h': {\n      return value * 3600;\n    }\n    default: {\n      return value;\n    }\n  }\n};\n\nexport const projectNameValidationSchema = yup.object().shape({\n  name: yup\n    .string()\n    .matches(\n      projectNameRegex,\n      \"Name must consist of lower case alphanumeric characters or '-' and must start and end with an alphanumeric character.\",\n    )\n    .required('Required'),\n});\n\nexport const applicationNameValidationSchema = yup.object().shape({\n  selectedKey: yup.string(),\n  name: yup\n    .string()\n    .max(63, 'Cannot be longer than 63 characters.')\n    .when('selectedKey', {\n      is: CREATE_APPLICATION_KEY,\n      then: yup.string().required('Required'),\n    }),\n});\n\nexport const deploymentValidationSchema = (t: TFunction) =>\n  yup.object().shape({\n    replicas: yup\n      .number()\n      .transform((cv) => (_.isNaN(cv) ? undefined : cv))\n      .test(isInteger(t('devconsole~Replicas must be an integer.')))\n      .min(0, t('devconsole~Replicas must be greater than or equal to 0.'))\n      .max(\n        Number.MAX_SAFE_INTEGER,\n        t('devconsole~Replicas must be lesser than or equal to {{maxSafeInteger}}.', {\n          maxSafeInteger: Number.MAX_SAFE_INTEGER,\n        }),\n      )\n      .test({\n        name: 'isEmpty',\n        test: (value) => value !== undefined,\n        message: t('devconsole~This field cannot be empty.'),\n      }),\n  });\n\nexport const resourcesValidationSchema = yup\n  .string()\n  .oneOf([Resources.OpenShift, Resources.Kubernetes, Resources.KnativeService])\n  .required();\n\nexport const serverlessValidationSchema = (t: TFunction) =>\n  yup.object().when('resources', {\n    is: Resources.KnativeService,\n    then: yup.object().shape({\n      scaling: yup.object({\n        minpods: yup\n          .number()\n          .transform((cv) => (_.isNaN(cv) ? undefined : cv))\n          .test(isInteger(t('devconsole~Min Pods must be an integer.')))\n          .min(0, t('devconsole~Min Pods must be greater than or equal to 0.'))\n          .max(\n            Number.MAX_SAFE_INTEGER,\n            t('devconsole~Min Pods must be lesser than or equal to {{maxSafeInteger}}.', {\n              maxSafeInteger: Number.MAX_SAFE_INTEGER,\n            }),\n          ),\n        maxpods: yup\n          .number()\n          .transform((cv) => (_.isNaN(cv) ? undefined : cv))\n          .test(isInteger(t('devconsole~Max Pods must be an integer.')))\n          .min(1, t('devconsole~Max Pods must be greater than or equal to 1.'))\n          .max(\n            Number.MAX_SAFE_INTEGER,\n            t('devconsole~Max Pods must be lesser than or equal to {{maxSafeInteger}}.', {\n              maxSafeInteger: Number.MAX_SAFE_INTEGER,\n            }),\n          )\n          .test({\n            test(limit) {\n              const { minpods } = this.parent;\n              return limit ? limit >= minpods : true;\n            },\n            message: t('devconsole~Max Pods must be greater than or equal to Min Pods.'),\n          }),\n        concurrencytarget: yup\n          .number()\n          .transform((cv) => (_.isNaN(cv) ? undefined : cv))\n          .test(isInteger(t('devconsole~Concurrency target must be an integer.')))\n          .min(0, t('devconsole~Concurrency target must be greater than or equal to 0.'))\n          .max(\n            Number.MAX_SAFE_INTEGER,\n            t('devconsole~Concurrency target must be lesser than or equal to {{maxSafeInteger}}.', {\n              maxSafeInteger: Number.MAX_SAFE_INTEGER,\n            }),\n          ),\n        concurrencylimit: yup\n          .number()\n          .transform((cv) => (_.isNaN(cv) ? undefined : cv))\n          .test(isInteger(t('devconsole~Concurrency limit must be an integer.')))\n          .min(0, t('devconsole~Concurrency limit must be greater than or equal to 0.'))\n          .max(\n            Number.MAX_SAFE_INTEGER,\n            t('devconsole~Concurrency limit must be lesser than or equal to {{maxSafeInteger}}.', {\n              maxSafeInteger: Number.MAX_SAFE_INTEGER,\n            }),\n          ),\n        concurrencyutilization: yup\n          .number()\n          .transform((cv) => (_.isNaN(cv) ? undefined : cv))\n          .min(0, t('devconsole~Concurrency utilization must be between 0 and 100.'))\n          .max(100, t('devconsole~Concurrency utilization must be between 0 and 100.')),\n        autoscale: yup.object().shape({\n          autoscalewindow: yup\n            .number()\n            .transform((cv) => (_.isNaN(cv) ? undefined : cv))\n            .test({\n              test(autoscalewindow) {\n                if (autoscalewindow) {\n                  const { autoscalewindowUnit } = this.parent;\n                  const value = convertToSec(autoscalewindow, autoscalewindowUnit);\n                  return value >= 6 && value <= 3600;\n                }\n                return true;\n              },\n              message: t('devconsole~Autoscale window must be between 6s and 1h.'),\n            }),\n        }),\n      }),\n      domainMapping: yup.array().of(\n        yup\n          .string()\n          .transform(removeKsvcInfoFromDomainMapping)\n          .matches(hostnameRegex, {\n            message: t(\n              'devconsole~Domain name must consist of lower-case letters, numbers, periods, and hyphens. It must start and end with a letter or number.',\n            ),\n            excludeEmptyString: true,\n          })\n          .test(\n            'domainname-has-segements',\n            t('devconsole~Domain name must consist of at least two segments separated by dots.'),\n            function (domainName: string) {\n              return domainName.split('.').length >= 2;\n            },\n          ),\n      ),\n    }),\n  });\n\nexport const routeValidationSchema = (t: TFunction) =>\n  yup.object().shape({\n    secure: yup.boolean(),\n    tls: yup.object().when('secure', {\n      is: true,\n      then: yup.object({\n        termination: yup.string().required(t('devconsole~Please select a termination type.')),\n      }),\n    }),\n    hostname: yup\n      .string()\n      .matches(hostnameRegex, {\n        message: t(\n          'devconsole~Hostname must consist of lower-case letters, numbers, periods, and hyphens. It must start and end with a letter or number.',\n        ),\n        excludeEmptyString: true,\n      })\n      .max(253, t('devconsole~Cannot be longer than 253 characters.')),\n    path: yup.string().matches(pathRegex, {\n      message: t('devconsole~Path must start with /.'),\n      excludeEmptyString: true,\n    }),\n    unknownTargetPort: yup\n      .number()\n      .typeError(t('devconsole~Port must be an integer.'))\n      .integer(t('devconsole~Port must be an integer.'))\n      .min(1, t('devconsole~Port must be between 1 and 65535.'))\n      .max(65535, t('devconsole~Port must be between 1 and 65535.')),\n  });\n\nexport const limitsValidationSchema = (t: TFunction) =>\n  yup.object().shape({\n    cpu: yup.object().shape({\n      request: yup\n        .number()\n        .transform((request) => (_.isNaN(request) ? undefined : request))\n        .min(0, t('devconsole~Request must be greater than or equal to 0.'))\n        .test({\n          test(request) {\n            const { requestUnit, limit, limitUnit } = this.parent;\n            if (limit !== undefined) {\n              return (\n                convertToBaseValue(`${request}${requestUnit}`) <=\n                convertToBaseValue(`${limit}${limitUnit}`)\n              );\n            }\n            return true;\n          },\n          message: t('devconsole~CPU request must be less than or equal to limit.'),\n        }),\n      requestUnit: yup.string(t('devconsole~Unit must be millicores or cores.')).ensure(),\n      limitUnit: yup.string(t('devconsole~Unit must be millicores or cores.')).ensure(),\n      limit: yup\n        .number()\n        .transform((limit) => (_.isNaN(limit) ? undefined : limit))\n        .min(0, t('devconsole~Limit must be greater than or equal to 0.'))\n        .test({\n          test(limit) {\n            const { request, requestUnit, limitUnit } = this.parent;\n            if (limit !== undefined) {\n              return (\n                convertToBaseValue(`${limit}${limitUnit}`) >=\n                convertToBaseValue(`${request}${requestUnit}`)\n              );\n            }\n            return true;\n          },\n          message: t('devconsole~CPU limit must be greater than or equal to request.'),\n        }),\n    }),\n    memory: yup.object().shape({\n      request: yup\n        .number()\n        .transform((request) => (_.isNaN(request) ? undefined : request))\n        .min(0, t('devconsole~Request must be greater than or equal to 0.'))\n        .test({\n          test(request) {\n            const { requestUnit, limit, limitUnit } = this.parent;\n            if (limit !== undefined) {\n              return (\n                convertToBaseValue(`${request}${requestUnit}`) <=\n                convertToBaseValue(`${limit}${limitUnit}`)\n              );\n            }\n            return true;\n          },\n          message: t('devconsole~Memory request must be less than or equal to limit.'),\n        }),\n      requestUnit: yup.string(t('devconsole~Unit must be Mi or Gi.')),\n      limit: yup\n        .number()\n        .transform((limit) => (_.isNaN(limit) ? undefined : limit))\n        .min(0, t('devconsole~Limit must be greater than or equal to 0.'))\n        .test({\n          test(limit) {\n            const { request, requestUnit, limitUnit } = this.parent;\n            if (limit !== undefined) {\n              return (\n                convertToBaseValue(`${request}${requestUnit}`) <=\n                convertToBaseValue(`${limit}${limitUnit}`)\n              );\n            }\n            return true;\n          },\n          message: t('devconsole~Memory limit must be greater than or equal to request.'),\n        }),\n      limitUnit: yup.string(t('devconsole~Unit must be Mi or Gi.')),\n    }),\n  });\n\nexport const imageValidationSchema = (t: TFunction) =>\n  yup.object().when('build', {\n    is: (build) => build.strategy === 'Source',\n    then: yup.object().shape({\n      selected: yup.string().required(t('devconsole~Required')),\n      tag: yup.string().required(t('devconsole~Required')),\n    }),\n  });\n\nexport const gitValidationSchema = (t: TFunction) =>\n  yup.object().shape({\n    url: yup\n      .string()\n      .max(2000, t('devconsole~Please enter a URL that is less then 2000 characters.'))\n      .matches(gitUrlRegex, t('devconsole~Invalid Git URL.'))\n      .required(t('devconsole~Required')),\n    type: yup.string().when('showGitType', {\n      is: true,\n      then: yup\n        .string()\n        .required(t('devconsole~We failed to detect the Git type. Please choose a Git type.')),\n    }),\n    showGitType: yup.boolean(),\n  });\n\nexport const dockerValidationSchema = (t: TFunction) =>\n  yup.object().when('build', {\n    is: (build) => build.strategy === 'Docker',\n    then: yup.object().shape({\n      containerPort: yup\n        .number()\n        .test(isInteger(t('devconsole~Container port should be an integer'))),\n      dockerfilePath: yup.string().required(t('devconsole~Required')),\n    }),\n  });\n\nexport const devfileValidationSchema = (t: TFunction) =>\n  yup.object().when('build', {\n    is: (build) => build.strategy === 'Devfile',\n    then: yup.object().shape({\n      devfilePath: yup.string().required(t('devconsole~Required')),\n      devfileContent: yup\n        .string()\n        .min(1, t('devconsole~Required'))\n        .required(t('devconsole~Required')),\n      devfileHasError: yup.boolean().oneOf([false]),\n      devfileSuggestedResources: yup.object().required(t('devconsole~Required')),\n    }),\n  });\n\nexport const buildValidationSchema = yup.object().shape({\n  strategy: yup.string(),\n});\n\nexport const searchTermValidationSchema = (t: TFunction) =>\n  yup.string().required(t('devconsole~Required'));\n\nexport const isiValidationSchema = (t: TFunction) =>\n  yup.object().shape({\n    name: yup.string().required(t('devconsole~Required')),\n    image: yup.object().required(t('devconsole~Required')),\n    tag: yup.string(),\n    status: yup.string().required(t('devconsole~Required')),\n  });\n\nexport const importFlowPipelineTemplateValidationSchema = yup\n  .object()\n  .when(['enabled', 'build.option', 'type'], {\n    is: (isPipelineEnabled, buildOption, pipelineType) =>\n      (isPipelineEnabled || buildOption === BuildOptions.PIPELINES) &&\n      pipelineType !== PipelineType.PAC,\n    then: yup.object().shape({\n      templateSelected: yup.string().required(),\n    }),\n  });\n","import { chart_color_green_400 as tektonGroupColor } from '@patternfly/react-tokens/dist/js/chart_color_green_400';\nimport { K8sKind } from '@console/internal/module/k8s';\n\nconst color = tektonGroupColor.value;\n\nexport const PipelineModel: K8sKind = {\n  apiGroup: 'tekton.dev',\n  apiVersion: 'v1',\n  label: 'Pipeline',\n  // t('pipelines-plugin~Pipeline')\n  labelKey: 'pipelines-plugin~Pipeline',\n  // t('pipelines-plugin~Pipelines')\n  labelPluralKey: 'pipelines-plugin~Pipelines',\n  plural: 'pipelines',\n  abbr: 'PL',\n  namespaced: true,\n  kind: 'Pipeline',\n  id: 'pipeline',\n  labelPlural: 'Pipelines',\n  crd: true,\n  color,\n};\n\nexport const PipelineModelV1Beta1: K8sKind = {\n  apiGroup: 'tekton.dev',\n  apiVersion: 'v1beta1',\n  label: 'Pipeline',\n  // t('pipelines-plugin~Pipeline')\n  labelKey: 'pipelines-plugin~Pipeline',\n  // t('pipelines-plugin~Pipelines')\n  labelPluralKey: 'pipelines-plugin~Pipelines',\n  plural: 'pipelines',\n  abbr: 'PL',\n  namespaced: true,\n  kind: 'Pipeline',\n  id: 'pipeline',\n  labelPlural: 'Pipelines',\n  crd: true,\n  color,\n};\n\nexport const PipelineRunModel: K8sKind = {\n  apiGroup: 'tekton.dev',\n  apiVersion: 'v1',\n  label: 'PipelineRun',\n  // t('pipelines-plugin~PipelineRun')\n  labelKey: 'pipelines-plugin~PipelineRun',\n  // t('pipelines-plugin~PipelineRuns')\n  labelPluralKey: 'pipelines-plugin~PipelineRuns',\n  plural: 'pipelineruns',\n  abbr: 'PLR',\n  namespaced: true,\n  kind: 'PipelineRun',\n  id: 'pipelinerun',\n  labelPlural: 'PipelineRuns',\n  crd: true,\n  color,\n};\n\nexport const PipelineRunModelV1Beta1: K8sKind = {\n  apiGroup: 'tekton.dev',\n  apiVersion: 'v1beta1',\n  label: 'PipelineRun',\n  // t('pipelines-plugin~PipelineRun')\n  labelKey: 'pipelines-plugin~PipelineRun',\n  // t('pipelines-plugin~PipelineRuns')\n  labelPluralKey: 'pipelines-plugin~PipelineRuns',\n  plural: 'pipelineruns',\n  abbr: 'PLR',\n  namespaced: true,\n  kind: 'PipelineRun',\n  id: 'pipelinerun',\n  labelPlural: 'PipelineRuns',\n  crd: true,\n  color,\n};\n\nexport const TaskModel: K8sKind = {\n  apiGroup: 'tekton.dev',\n  apiVersion: 'v1',\n  label: 'Task',\n  // t('pipelines-plugin~Task')\n  labelKey: 'pipelines-plugin~Task',\n  // t('pipelines-plugin~Tasks')\n  labelPluralKey: 'pipelines-plugin~Tasks',\n  plural: 'tasks',\n  abbr: 'T',\n  namespaced: true,\n  kind: 'Task',\n  id: 'task',\n  labelPlural: 'Tasks',\n  crd: true,\n  color,\n};\n\nexport const TaskModelV1Beta1: K8sKind = {\n  apiGroup: 'tekton.dev',\n  apiVersion: 'v1beta1',\n  label: 'Task',\n  // t('pipelines-plugin~Task')\n  labelKey: 'pipelines-plugin~Task',\n  // t('pipelines-plugin~Tasks')\n  labelPluralKey: 'pipelines-plugin~Tasks',\n  plural: 'tasks',\n  abbr: 'T',\n  namespaced: true,\n  kind: 'Task',\n  id: 'task',\n  labelPlural: 'Tasks',\n  crd: true,\n  color,\n};\n\nexport const TaskRunModel: K8sKind = {\n  apiGroup: 'tekton.dev',\n  apiVersion: 'v1',\n  label: 'TaskRun',\n  // t('pipelines-plugin~TaskRun')\n  labelKey: 'pipelines-plugin~TaskRun',\n  // t('pipelines-plugin~TaskRuns')\n  labelPluralKey: 'pipelines-plugin~TaskRuns',\n  plural: 'taskruns',\n  abbr: 'TR',\n  namespaced: true,\n  kind: 'TaskRun',\n  id: 'taskrun',\n  labelPlural: 'TaskRuns',\n  crd: true,\n  color,\n};\n\nexport const TaskRunModelV1Beta1: K8sKind = {\n  apiGroup: 'tekton.dev',\n  apiVersion: 'v1beta1',\n  label: 'TaskRun',\n  // t('pipelines-plugin~TaskRun')\n  labelKey: 'pipelines-plugin~TaskRun',\n  // t('pipelines-plugin~TaskRuns')\n  labelPluralKey: 'pipelines-plugin~TaskRuns',\n  plural: 'taskruns',\n  abbr: 'TR',\n  namespaced: true,\n  kind: 'TaskRun',\n  id: 'taskrun',\n  labelPlural: 'TaskRuns',\n  crd: true,\n  color,\n};\n\nexport const CustomRunModelV1Beta1: K8sKind = {\n  apiGroup: 'tekton.dev',\n  apiVersion: 'v1beta1',\n  label: 'CustomRun',\n  // t('pipelines-plugin~CustomRun')\n  labelKey: 'pipelines-plugin~CustomRun',\n  // t('pipelines-plugin~CustomRuns')\n  labelPluralKey: 'pipelines-plugin~CustomRuns',\n  plural: 'customruns',\n  abbr: 'CR',\n  namespaced: true,\n  kind: 'CustomRun',\n  id: 'customrun',\n  labelPlural: 'CustomRuns',\n  crd: true,\n  color,\n};\n\nexport const PipelineResourceModel: K8sKind = {\n  apiGroup: 'tekton.dev',\n  apiVersion: 'v1alpha1',\n  label: 'PipelineResource',\n  // t('pipelines-plugin~PipelineResource')\n  labelKey: 'pipelines-plugin~PipelineResource',\n  // t('pipelines-plugin~PipelineResources')\n  labelPluralKey: 'pipelines-plugin~PipelineResources',\n  plural: 'pipelineresources',\n  abbr: 'PR',\n  namespaced: true,\n  kind: 'PipelineResource',\n  id: 'pipelineresource',\n  labelPlural: 'PipelineResources',\n  crd: true,\n  color,\n};\n\nexport const ClusterTaskModel: K8sKind = {\n  apiGroup: 'tekton.dev',\n  apiVersion: 'v1beta1',\n  label: 'ClusterTask',\n  // t('pipelines-plugin~ClusterTask')\n  labelKey: 'pipelines-plugin~ClusterTask',\n  // t('pipelines-plugin~ClusterTasks')\n  labelPluralKey: 'pipelines-plugin~ClusterTasks',\n  plural: 'clustertasks',\n  abbr: 'CT',\n  namespaced: false,\n  kind: 'ClusterTask',\n  id: 'clustertask',\n  labelPlural: 'ClusterTasks',\n  crd: true,\n  color,\n};\n\nexport const ConditionModel: K8sKind = {\n  apiGroup: 'tekton.dev',\n  apiVersion: 'v1alpha1',\n  label: 'Condition',\n  // t('pipelines-plugin~Condition')\n  labelKey: 'pipelines-plugin~Condition',\n  // t('pipelines-plugin~Conditions')\n  labelPluralKey: 'pipelines-plugin~Conditions',\n  plural: 'conditions',\n  abbr: 'C',\n  namespaced: true,\n  kind: 'Condition',\n  id: 'condition',\n  labelPlural: 'Conditions',\n  crd: true,\n  color,\n};\n\nexport const TriggerBindingModel: K8sKind = {\n  apiGroup: 'triggers.tekton.dev',\n  apiVersion: 'v1beta1',\n  label: 'TriggerBinding',\n  // t('pipelines-plugin~TriggerBinding')\n  labelKey: 'pipelines-plugin~TriggerBinding',\n  // t('pipelines-plugin~TriggerBindings')\n  labelPluralKey: 'pipelines-plugin~TriggerBindings',\n  plural: 'triggerbindings',\n  abbr: 'TB',\n  namespaced: true,\n  kind: 'TriggerBinding',\n  id: 'triggerbinding',\n  labelPlural: 'TriggerBindings',\n  crd: true,\n  color,\n};\n\nexport const ClusterTriggerBindingModel: K8sKind = {\n  apiGroup: 'triggers.tekton.dev',\n  apiVersion: 'v1beta1',\n  label: 'ClusterTriggerBinding',\n  // t('pipelines-plugin~ClusterTriggerBinding')\n  labelKey: 'pipelines-plugin~ClusterTriggerBinding',\n  // t('pipelines-plugin~ClusterTriggerBindings')\n  labelPluralKey: 'pipelines-plugin~ClusterTriggerBindings',\n  plural: 'clustertriggerbindings',\n  abbr: 'CTB',\n  namespaced: false,\n  kind: 'ClusterTriggerBinding',\n  id: 'clustertriggerbinding',\n  labelPlural: 'ClusterTriggerBindings',\n  crd: true,\n  color,\n};\n\nexport const TriggerTemplateModel: K8sKind = {\n  apiGroup: 'triggers.tekton.dev',\n  apiVersion: 'v1beta1',\n  label: 'TriggerTemplate',\n  // t('pipelines-plugin~TriggerTemplate')\n  labelKey: 'pipelines-plugin~TriggerTemplate',\n  // t('pipelines-plugin~TriggerTemplates')\n  labelPluralKey: 'pipelines-plugin~TriggerTemplates',\n  plural: 'triggertemplates',\n  abbr: 'TT',\n  namespaced: true,\n  kind: 'TriggerTemplate',\n  id: 'triggertemplate',\n  labelPlural: 'TriggerTemplates',\n  crd: true,\n  color,\n};\n\nexport const EventListenerModel: K8sKind = {\n  apiGroup: 'triggers.tekton.dev',\n  apiVersion: 'v1beta1',\n  label: 'EventListener',\n  // t('pipelines-plugin~EventListener')\n  labelKey: 'pipelines-plugin~EventListener',\n  // t('pipelines-plugin~EventListeners')\n  labelPluralKey: 'pipelines-plugin~EventListeners',\n  plural: 'eventlisteners',\n  abbr: 'EL',\n  namespaced: true,\n  kind: 'EventListener',\n  id: 'eventlistener',\n  labelPlural: 'EventListeners',\n  crd: true,\n  color,\n};\n\nexport const RepositoryModel: K8sKind = {\n  apiGroup: 'pipelinesascode.tekton.dev',\n  apiVersion: 'v1alpha1',\n  label: 'Repository',\n  // t('pipelines-plugin~Repository')\n  labelKey: 'pipelines-plugin~Repository',\n  // t('pipelines-plugin~Repositories')\n  labelPluralKey: 'pipelines-plugin~Repositories',\n  plural: 'repositories',\n  abbr: 'R',\n  namespaced: true,\n  kind: 'Repository',\n  id: 'repository',\n  labelPlural: 'Repositories',\n  crd: true,\n  color,\n};\n\nexport const TektonConfigModel: K8sKind = {\n  apiGroup: 'operator.tekton.dev',\n  apiVersion: 'v1alpha1',\n  label: 'TektonConfig',\n  // t('pipelines-plugin~TektonConfig')\n  labelKey: 'pipelines-plugin~TektonConfig',\n  // t('pipelines-plugin~TektonConfigs')\n  labelPluralKey: 'pipelines-plugin~TektonConfigs',\n  plural: 'tektonconfigs',\n  abbr: 'TC',\n  namespaced: false,\n  kind: 'TektonConfig',\n  id: 'tektonconfig',\n  labelPlural: 'TektonConfigs',\n  crd: true,\n};\n\nexport const TektonHubModel: K8sKind = {\n  apiGroup: 'operator.tekton.dev',\n  apiVersion: 'v1alpha1',\n  label: 'TektonHub',\n  // t('pipelines-plugin~TektonHub')\n  labelKey: 'pipelines-plugin~TektonHub',\n  // t('pipelines-plugin~TektonHubs')\n  labelPluralKey: 'pipelines-plugin~TektonHubs',\n  plural: 'tektonhubs',\n  abbr: 'TH',\n  namespaced: false,\n  kind: 'TektonHub',\n  id: 'tektonhub',\n  labelPlural: 'TektonHubs',\n  crd: true,\n};\n\nexport const TektonResultModel: K8sKind = {\n  apiGroup: 'operator.tekton.dev',\n  apiVersion: 'v1alpha1',\n  label: 'TektonResult',\n  // t('pipelines-plugin~TektonResult')\n  labelKey: 'pipelines-plugin~TektonResult',\n  // t('pipelines-plugin~TektonResults')\n  labelPluralKey: 'pipelines-plugin~TektonResults',\n  plural: 'tektonresults',\n  abbr: 'TR',\n  namespaced: false,\n  kind: 'TektonResult',\n  id: 'tektonresult',\n  labelPlural: 'TektonResults',\n  crd: true,\n};\n","import { formatPrometheusDuration } from '@openshift-console/plugin-shared/src/datetime/prometheus';\nimport i18next from 'i18next';\nimport * as _ from 'lodash';\nimport { errorModal } from '@console/internal/components/modals/error-modal';\nimport {\n  LOG_SOURCE_RESTARTING,\n  LOG_SOURCE_WAITING,\n  LOG_SOURCE_RUNNING,\n  LOG_SOURCE_TERMINATED,\n} from '@console/internal/components/utils';\nimport { ServiceAccountModel } from '@console/internal/models';\nimport {\n  ContainerStatus,\n  k8sUpdate,\n  k8sGet,\n  SecretKind,\n  K8sResourceCommon,\n  K8sKind,\n  K8sResourceKind,\n  PersistentVolumeClaimKind,\n  K8sModel,\n} from '@console/internal/module/k8s';\nimport {\n  PIPELINE_SERVICE_ACCOUNT,\n  SecretAnnotationId,\n  TektonResourceLabel,\n} from '../components/pipelines/const';\nimport { PipelineModalFormWorkspace } from '../components/pipelines/modals/common/types';\nimport { getDuration } from '../components/pipelines/pipeline-metrics/pipeline-metrics-utils';\nimport { EventListenerKind, TriggerTemplateKind } from '../components/pipelines/resource-types';\nimport {\n  PipelineRunModel,\n  TaskRunModel,\n  PipelineResourceModel,\n  ConditionModel,\n  ClusterTaskModel,\n  TriggerTemplateModel,\n  TriggerBindingModel,\n  ClusterTriggerBindingModel,\n  PipelineModel,\n  TaskModel,\n  EventListenerModel,\n  RepositoryModel,\n  PipelineModelV1Beta1,\n  PipelineRunModelV1Beta1,\n  TaskModelV1Beta1,\n} from '../models';\nimport {\n  ComputedStatus,\n  PipelineRunKind,\n  PipelineRunParam,\n  PipelineRunWorkspace,\n  PipelineTask,\n  PipelineKind,\n  TaskRunKind,\n  TektonParam,\n  TaskRunStatus,\n  TaskKind,\n  PLRTaskRunData,\n  PipelineRunStatusType,\n} from '../types';\nimport { TaskStatus, getLatestRun } from './pipeline-augment';\nimport {\n  pipelineRunFilterReducer,\n  pipelineRunStatus,\n  SucceedConditionReason,\n} from './pipeline-filter-reducer';\n\ninterface ServiceAccountSecretNames {\n  [name: string]: string;\n}\n\nexport type ServiceAccountType = {\n  secrets: ServiceAccountSecretNames[];\n  imagePullSecrets: ServiceAccountSecretNames[];\n} & K8sResourceCommon;\n\nexport const TaskStatusClassNameMap = {\n  'In Progress': 'is-running',\n  Succeeded: 'is-done',\n  Failed: 'is-error',\n  Idle: 'is-idle',\n};\n\nexport const conditions = {\n  hasFromDependency: (task: PipelineTask): boolean =>\n    task.resources &&\n    task.resources.inputs &&\n    task.resources.inputs.length > 0 &&\n    !!task.resources.inputs[0].from,\n  hasRunAfterDependency: (task: PipelineTask): boolean => task.runAfter && task.runAfter.length > 0,\n};\n\nexport enum ListFilterId {\n  Running = 'Running',\n  Failed = 'Failed',\n  Succeeded = 'Succeeded',\n  Cancelled = 'Cancelled',\n  Other = '-',\n}\n\nexport const ListFilterLabels = {\n  [ListFilterId.Running]: i18next.t('pipelines-plugin~Running'),\n  [ListFilterId.Failed]: i18next.t('pipelines-plugin~Failed'),\n  [ListFilterId.Succeeded]: i18next.t('pipelines-plugin~Succeeded'),\n  [ListFilterId.Cancelled]: i18next.t('pipelines-plugin~Cancelled'),\n  [ListFilterId.Other]: i18next.t('pipelines-plugin~Other'),\n};\n\nexport enum PipelineResourceListFilterId {\n  Git = 'git',\n  PullRequest = 'pullRequest',\n  Image = 'image',\n  Cluster = 'cluster',\n  Storage = 'storage',\n  CloudEvent = 'cloudEvent',\n}\n\nexport const PipelineResourceListFilterLabels = {\n  [PipelineResourceListFilterId.Git]: 'Git',\n  [PipelineResourceListFilterId.PullRequest]: 'Pull Request',\n  [PipelineResourceListFilterId.Image]: 'Image',\n  [PipelineResourceListFilterId.Cluster]: 'Cluster',\n  [PipelineResourceListFilterId.Storage]: 'Storage',\n  [PipelineResourceListFilterId.CloudEvent]: 'Cloud Event',\n};\n\n/**\n * Appends the pipeline run status to each tasks in the pipeline.\n * @param pipeline\n * @param pipelineRun\n * @param isFinallyTasks\n */\nexport const appendPipelineRunStatus = (\n  pipeline,\n  pipelineRun,\n  taskRuns: TaskRunKind[],\n  isFinallyTasks = false,\n) => {\n  const tasks = (isFinallyTasks ? pipeline.spec.finally : pipeline.spec.tasks) || [];\n\n  return tasks.map((task) => {\n    if (!pipelineRun.status) {\n      return task;\n    }\n    if (!taskRuns || taskRuns.length === 0) {\n      if (pipelineRun.spec.status === SucceedConditionReason.PipelineRunCancelled) {\n        return _.merge(task, { status: { reason: ComputedStatus.Cancelled } });\n      }\n      if (pipelineRun.spec.status === SucceedConditionReason.PipelineRunPending) {\n        return _.merge(task, { status: { reason: ComputedStatus.Idle } });\n      }\n      return _.merge(task, { status: { reason: ComputedStatus.Failed } });\n    }\n\n    const taskRun = _.find(\n      taskRuns,\n      (tr) => tr.metadata.labels[TektonResourceLabel.pipelineTask] === task.name,\n    );\n    const taskStatus: TaskRunStatus = taskRun?.status;\n\n    const mTask = _.merge(task, {\n      status: pipelineRun?.status?.taskRuns\n        ? _.get(_.find(pipelineRun.status.taskRuns, { pipelineTaskName: task.name }), 'status')\n        : taskStatus,\n    });\n    // append task duration\n    if (mTask.status && mTask.status.completionTime && mTask.status.startTime) {\n      const date =\n        new Date(mTask.status.completionTime).getTime() -\n        new Date(mTask.status.startTime).getTime();\n      mTask.status.duration = formatPrometheusDuration(date);\n    }\n    // append task status\n    if (!mTask.status) {\n      mTask.status = { reason: ComputedStatus.Pending };\n    } else if (mTask.status && mTask.status.conditions) {\n      mTask.status.reason = pipelineRunStatus(mTask) || ComputedStatus.Pending;\n    } else if (mTask.status && !mTask.status.reason) {\n      mTask.status.reason = ComputedStatus.Pending;\n    }\n    return mTask;\n  });\n};\n\nexport const getPipelineTasks = (\n  pipeline: PipelineKind,\n  pipelineRun: PipelineRunKind = {\n    apiVersion: '',\n    metadata: {},\n    kind: 'PipelineRun',\n    spec: {},\n  },\n  taskRuns: TaskRunKind[],\n): PipelineTask[][] => {\n  // Each unit in 'out' array is termed as stage | out = [stage1 = [task1], stage2 = [task2,task3], stage3 = [task4]]\n  const out = [];\n  if (!pipeline.spec?.tasks || _.isEmpty(pipeline.spec.tasks)) {\n    return out;\n  }\n  const taskList = appendPipelineRunStatus(pipeline, pipelineRun, taskRuns);\n\n  // Step 1: Push all nodes without any dependencies in different stages\n  taskList.forEach((task) => {\n    if (!conditions.hasFromDependency(task) && !conditions.hasRunAfterDependency(task)) {\n      if (out.length === 0) {\n        out.push([]);\n      }\n      out[0].push(task);\n    }\n  });\n\n  // Step 2: Push nodes with 'from' dependency and stack similar tasks in a stage\n  taskList.forEach((task) => {\n    if (!conditions.hasRunAfterDependency(task) && conditions.hasFromDependency(task)) {\n      let flag = out.length - 1;\n      for (let i = 0; i < out.length; i++) {\n        for (const t of out[i]) {\n          if (\n            t.taskRef?.name === task.resources.inputs[0].from[0] ||\n            t.name === task.resources.inputs[0].from[0]\n          ) {\n            flag = i;\n          }\n        }\n      }\n      const nextToFlag = out[flag + 1] ? out[flag + 1] : null;\n      if (\n        nextToFlag &&\n        nextToFlag[0] &&\n        nextToFlag[0].resources &&\n        nextToFlag[0].resources.inputs &&\n        nextToFlag[0].resources.inputs[0] &&\n        nextToFlag[0].resources.inputs[0].from &&\n        nextToFlag[0].resources.inputs[0].from[0] &&\n        nextToFlag[0].resources.inputs[0].from[0] === task.resources.inputs[0].from[0]\n      ) {\n        nextToFlag.push(task);\n      } else {\n        out.splice(flag + 1, 0, [task]);\n      }\n    }\n  });\n\n  // Step 3: Push nodes with 'runAfter' dependencies and stack similar tasks in a stage\n  taskList.forEach((task) => {\n    if (conditions.hasRunAfterDependency(task)) {\n      let flag = out.length - 1;\n      for (let i = 0; i < out.length; i++) {\n        for (const t of out[i]) {\n          if (t.taskRef?.name === task.runAfter[0] || t.name === task.runAfter[0]) {\n            flag = i;\n          }\n        }\n      }\n      const nextToFlag = out[flag + 1] ? out[flag + 1] : null;\n      if (\n        nextToFlag &&\n        nextToFlag[0].runAfter &&\n        nextToFlag[0].runAfter[0] &&\n        nextToFlag[0].runAfter[0] === task.runAfter[0]\n      ) {\n        nextToFlag.push(task);\n      } else {\n        out.splice(flag + 1, 0, [task]);\n      }\n    }\n  });\n  return out;\n};\n\nexport const getFinallyTasksWithStatus = (\n  pipeline: PipelineKind,\n  pipelineRun: PipelineRunKind,\n  taskRuns: TaskRunKind[],\n) => appendPipelineRunStatus(pipeline, pipelineRun, taskRuns, true);\n\nexport const containerToLogSourceStatus = (container: ContainerStatus): string => {\n  if (!container) {\n    return LOG_SOURCE_WAITING;\n  }\n  const { state, lastState } = container;\n  if (state.waiting && !_.isEmpty(lastState)) {\n    return LOG_SOURCE_RESTARTING;\n  }\n  if (state.waiting) {\n    return LOG_SOURCE_WAITING;\n  }\n  if (state.terminated) {\n    return LOG_SOURCE_TERMINATED;\n  }\n  return LOG_SOURCE_RUNNING;\n};\n\nexport type LatestPipelineRunStatus = {\n  latestPipelineRun: PipelineRunKind;\n  status: string;\n};\n\n/**\n * Takes pipeline runs and produces a latest pipeline run state.\n */\nexport const getLatestPipelineRunStatus = (\n  pipelineRuns: PipelineRunKind[],\n): LatestPipelineRunStatus => {\n  if (!pipelineRuns || pipelineRuns.length === 0) {\n    // Not enough data to build the current state\n    return { latestPipelineRun: null, status: ComputedStatus.PipelineNotStarted };\n  }\n\n  const latestPipelineRun = getLatestRun(pipelineRuns, 'creationTimestamp');\n\n  if (!latestPipelineRun) {\n    // Without the latestRun we will not have progress to show\n    return { latestPipelineRun: null, status: ComputedStatus.PipelineNotStarted };\n  }\n\n  let status: string = pipelineRunFilterReducer(latestPipelineRun);\n  if (status === '-') {\n    status = ComputedStatus.Pending;\n  }\n\n  return {\n    latestPipelineRun,\n    status,\n  };\n};\n\nexport const getPipelineRunParams = (pipelineParams: TektonParam[]): PipelineRunParam[] => {\n  return (\n    pipelineParams &&\n    pipelineParams.map((param) => ({\n      name: param.name,\n      value: param.default,\n    }))\n  );\n};\n\nexport const getPipelineRunWorkspaces = (\n  pipelineWorkspaces: PipelineModalFormWorkspace[],\n): PipelineRunWorkspace[] => {\n  return (\n    pipelineWorkspaces &&\n    pipelineWorkspaces.map((workspace) => ({\n      name: workspace.name,\n      ...workspace.data,\n    }))\n  );\n};\n\nexport const calculateDuration = (startTime: string, endTime?: string, long?: boolean) => {\n  const start = new Date(startTime).getTime();\n  const end = endTime ? new Date(endTime).getTime() : new Date().getTime();\n  const durationInSeconds = (end - start) / 1000;\n  return getDuration(durationInSeconds, long);\n};\n\nexport const pipelineRunDuration = (run: PipelineRunKind | TaskRunKind): string => {\n  const startTime = run?.status?.startTime ?? null;\n  const completionTime = run?.status?.completionTime ?? null;\n\n  // Duration cannot be computed if start time is missing or a completed/failed pipeline/task has no end time\n  if (!startTime || (!completionTime && pipelineRunStatus(run) !== 'Running')) {\n    return '-';\n  }\n  return calculateDuration(startTime, completionTime, true);\n};\n\nexport const updateServiceAccount = (\n  secretName: string,\n  originalServiceAccount: ServiceAccountType,\n  updateImagePullSecrets: boolean,\n): Promise<ServiceAccountType> => {\n  const updatedServiceAccount = _.cloneDeep(originalServiceAccount);\n  updatedServiceAccount.secrets = [...updatedServiceAccount.secrets, { name: secretName }];\n  if (updateImagePullSecrets) {\n    updatedServiceAccount.imagePullSecrets = [\n      ...updatedServiceAccount.imagePullSecrets,\n      { name: secretName },\n    ];\n  }\n  return k8sUpdate(ServiceAccountModel, updatedServiceAccount);\n};\n\nexport const associateServiceAccountToSecret = (\n  secret: SecretKind,\n  namespace: string,\n  isImageSecret: boolean,\n) => {\n  k8sGet(ServiceAccountModel, PIPELINE_SERVICE_ACCOUNT, namespace)\n    .then((serviceAccount) => {\n      if (_.find(serviceAccount.secrets, (s) => s.name === secret.metadata.name) === undefined) {\n        updateServiceAccount(secret.metadata.name, serviceAccount, isImageSecret);\n      }\n    })\n    .catch((err) => {\n      errorModal({ error: err.message });\n    });\n};\n\ntype KeyValuePair = {\n  key: string;\n  value: string;\n};\n\nconst getAnnotationKey = (secretType: string, suffix: number) => {\n  const annotationPrefix = 'tekton.dev';\n  if (secretType === SecretAnnotationId.Git) {\n    return `${annotationPrefix}/${SecretAnnotationId.Git}-${suffix}`;\n  }\n  if (secretType === SecretAnnotationId.Image) {\n    return `${annotationPrefix}/${SecretAnnotationId.Image}-${suffix}`;\n  }\n  return null;\n};\n\nexport const getSecretAnnotations = (\n  annotation: KeyValuePair,\n  existingAnnotations: { [key: string]: string } = {},\n) => {\n  let count = 0;\n  let annotationKey = getAnnotationKey(annotation?.key, count);\n  if (!annotationKey) {\n    return existingAnnotations;\n  }\n  while (\n    existingAnnotations[annotationKey] &&\n    existingAnnotations[annotationKey] !== annotation?.value\n  ) {\n    annotationKey = getAnnotationKey(annotation?.key, ++count);\n  }\n\n  return { ...existingAnnotations, [annotationKey]: annotation?.value };\n};\n\nexport const pipelinesTab = (kindObj: K8sKind) => {\n  switch (kindObj.kind) {\n    case PipelineModel.kind:\n    case TaskModel.kind:\n    case EventListenerModel.kind:\n      return '';\n    case PipelineRunModel.kind:\n      return 'pipeline-runs';\n    case PipelineResourceModel.kind:\n      return 'pipeline-resources';\n    case ConditionModel.kind:\n      return 'conditions';\n    case TaskRunModel.kind:\n      return 'task-runs';\n    case ClusterTaskModel.kind:\n      return 'cluster-tasks';\n    case TriggerTemplateModel.kind:\n      return 'trigger-templates';\n    case TriggerBindingModel.kind:\n      return 'trigger-bindings';\n    case ClusterTriggerBindingModel.kind:\n      return 'cluster-trigger-bindings';\n    case RepositoryModel.kind:\n      return 'repositories';\n    default:\n      return null;\n  }\n};\n\nexport const getMatchedPVCs = (\n  pvcResources: PersistentVolumeClaimKind[],\n  ownerResourceName: string,\n  ownerResourceKind: string,\n): PersistentVolumeClaimKind[] => {\n  return pvcResources.filter((pvc) => {\n    const { ownerReferences = [] } = pvc.metadata;\n\n    return ownerReferences.some(\n      (reference) => reference.name === ownerResourceName && reference.kind === ownerResourceKind,\n    );\n  });\n};\n\nexport const getPipeline = (resource: K8sResourceKind, pipelines: PipelineKind[]): PipelineKind => {\n  const pipeline = pipelines.find((p: PipelineKind) => p.metadata.name === resource.metadata.name);\n  return pipeline;\n};\n\nexport const getTriggerTemplates = (\n  pipeline: PipelineKind,\n  triggerTemplates: TriggerTemplateKind[],\n): TriggerTemplateKind[] => {\n  const triggerTemplate = triggerTemplates.filter(\n    (tt: TriggerTemplateKind) =>\n      !!tt.spec.resourcetemplates.find(\n        (rt) => rt.spec.pipelineRef?.name === pipeline.metadata.name,\n      ),\n  );\n  return triggerTemplate;\n};\n\nexport const getEventListeners = (\n  triggerTemplates: TriggerTemplateKind[],\n  eventListeners: EventListenerKind[],\n): EventListenerKind[] => {\n  const resourceEventListeners = eventListeners.reduce((acc, et: EventListenerKind) => {\n    const triggers = et.spec.triggers.filter((t) =>\n      triggerTemplates.find((tt) => tt?.metadata.name === t?.template?.ref),\n    );\n    if (triggers.length > 0) {\n      acc.push(et);\n    }\n    return acc;\n  }, []);\n  return resourceEventListeners;\n};\n\nexport const returnValidPipelineModel = (pipeline: PipelineKind): K8sModel => {\n  if (pipeline.apiVersion === 'tekton.dev/v1beta1') {\n    return PipelineModelV1Beta1;\n  }\n  return PipelineModel;\n};\n\nexport const returnValidPipelineRunModel = (pipelineRun: PipelineRunKind): K8sModel => {\n  if (pipelineRun.apiVersion === 'tekton.dev/v1beta1') {\n    return PipelineRunModelV1Beta1;\n  }\n  return PipelineRunModel;\n};\n\nexport const returnValidTaskModel = (task: TaskKind): K8sModel => {\n  if (task.apiVersion === 'tekton.dev/v1beta1') {\n    return TaskModelV1Beta1;\n  }\n  return TaskModel;\n};\n\nexport enum TaskRunResultsAnnotations {\n  KEY = 'task.results.key',\n  TYPE = 'task.results.type',\n}\n\nexport enum TaskRunResultsAnnotationValue {\n  EXTERNAL_LINK = 'external-link',\n}\n\nexport enum TaskRunResults {\n  IMAGE_REPOSITORY = 'IMAGE_URL',\n  SBOM = 'LINK_TO_SBOM',\n  SCAN_OUTPUT = 'SCAN_OUTPUT',\n  TEST_OUTPUT = 'TEST_OUTPUT',\n}\n\nexport const getSbomTaskRun = (taskruns: TaskRunKind[]): TaskRunKind =>\n  taskruns?.find(\n    (tr) => tr?.metadata?.annotations?.[TaskRunResultsAnnotations.KEY] === TaskRunResults.SBOM,\n  );\n\nexport const hasExternalLink = (sbomTaskRun: TaskRunKind): boolean =>\n  sbomTaskRun?.metadata?.annotations?.[TaskRunResultsAnnotations.TYPE] ===\n  TaskRunResultsAnnotationValue.EXTERNAL_LINK;\n\nexport const getSbomLink = (sbomTaskRun: TaskRunKind): string | undefined =>\n  (sbomTaskRun?.status?.results || sbomTaskRun?.status?.taskResults)?.find(\n    (r) => r.name === TaskRunResults.SBOM,\n  )?.value;\n\nexport const getImageUrl = (PipelineRun: PipelineRunKind): string | undefined =>\n  (PipelineRun?.status?.results || PipelineRun?.status?.pipelineResults)?.find(\n    (r) => r.name === TaskRunResults.IMAGE_REPOSITORY,\n  )?.value;\n\nexport const taskRunStatus = (taskRun: TaskRunKind | PLRTaskRunData): ComputedStatus => {\n  if (!taskRun?.status?.conditions?.length) {\n    return ComputedStatus.Pending;\n  }\n  const status: ComputedStatus = pipelineRunStatus(taskRun);\n  return status;\n};\n\nexport const getPipelineRunStatus = (pipelineRun: PipelineRunKind): TaskStatus => {\n  const conditionsMessage = pipelineRun?.status?.conditions?.find(\n    (condition) => condition?.type === 'Succeeded',\n  )?.message;\n\n  // Extracting key-value pairs using updated regular expression\n  const matches = conditionsMessage?.match(/(\\w+)(?::\\s*|\\s+)(\\d+)/g);\n  // Creating the object dynamically\n  const result: PipelineRunStatusType = {};\n  matches?.forEach((match) => {\n    const [key, value] = match.split(/(?::\\s*|\\s+)/);\n    result[key.trim()] = Number(value.trim());\n  });\n\n  const totalSucceeded =\n    (result?.Completed || 0) - (result?.Failed || 0) - (result?.Cancelled || 0);\n\n  const taskRunStatusObj: TaskStatus = {\n    Running: result?.Incomplete || 0,\n    Succeeded: totalSucceeded || 0,\n    Cancelled: result?.Cancelled || 0,\n    Failed: result?.Failed || 0,\n    Skipped: result?.Skipped || 0,\n    Completed: result?.Completed || 0,\n    Cancelling: result?.Cancelled || 0,\n    PipelineNotStarted: 0,\n    Pending: 0,\n  };\n\n  return taskRunStatusObj;\n};\n","export const isInteger = (message) => ({\n  test(value) {\n    return value == null || Number.isInteger(value);\n  },\n  message,\n});\n\nexport const bitBucketUserNameRegex = /^[a-z]([a-z0-9_]-?)*[a-z0-9]$/;\n","import i18next from 'i18next';\nimport * as _ from 'lodash';\nimport { detectGitType } from '@console/dev-console/src/components/import/import-validation-utils';\nimport { checkAccess } from '@console/internal/components/utils';\nimport {\n  ImageStreamModel,\n  BuildConfigModel,\n  ServiceModel,\n  DeploymentConfigModel,\n  DeploymentModel,\n  RouteModel,\n  SecretModel,\n  DaemonSetModel,\n  StatefulSetModel,\n  JobModel,\n  CronJobModel,\n  BuildModel,\n} from '@console/internal/models';\nimport {\n  K8sModel,\n  k8sList,\n  k8sPatch,\n  k8sKill,\n  K8sResourceKind,\n  modelFor,\n  referenceFor,\n} from '@console/internal/module/k8s';\nimport {\n  CamelKameletBindingModel,\n  EventingBrokerModel,\n  KafkaSinkModel,\n  ServiceModel as KnativeServiceModel,\n} from '@console/knative-plugin/src/models';\nimport {\n  fetchChannelsCrd,\n  isDynamicEventResourceKind,\n} from '@console/knative-plugin/src/utils/fetch-dynamic-eventsources-utils';\nimport {\n  EventListenerKind,\n  TriggerTemplateKind,\n} from '@console/pipelines-plugin/src/components/pipelines/resource-types';\nimport {\n  EventListenerModel,\n  PipelineModel,\n  TriggerTemplateModel,\n} from '@console/pipelines-plugin/src/models';\nimport {\n  getEventListeners,\n  getPipeline,\n  getTriggerTemplates,\n} from '@console/pipelines-plugin/src/utils/pipeline-utils';\nimport { getBuildConfigsForResource } from '@console/shared';\nimport { CREATE_APPLICATION_KEY, UNASSIGNED_KEY } from '../const';\nimport { listInstanceResources } from './connector-utils';\n\nexport const sanitizeApplicationValue = (\n  application: string,\n  applicationType: string = application,\n): string => {\n  switch (applicationType) {\n    case UNASSIGNED_KEY:\n    case CREATE_APPLICATION_KEY:\n      return '';\n    default:\n      return application;\n  }\n};\n\n// Updates the resource's labels to set its application grouping\nconst updateItemAppLabel = (\n  resourceKind: K8sModel,\n  item: K8sResourceKind,\n  application: string,\n): Promise<any> => {\n  const labels = { ...item.metadata.labels, 'app.kubernetes.io/part-of': application || undefined };\n\n  if (!resourceKind) {\n    return Promise.reject();\n  }\n\n  const patch = [\n    {\n      op: _.isEmpty(labels) ? 'add' : 'replace',\n      path: '/metadata/labels',\n      value: labels,\n    },\n  ];\n\n  return k8sPatch(resourceKind, item, patch);\n};\n\n// Updates the given resource and its associated resources to the given application grouping\nexport const updateResourceApplication = (\n  resourceKind: K8sModel,\n  resource: K8sResourceKind,\n  application: string,\n): Promise<any> => {\n  if (!resource) {\n    return Promise.reject(\n      new Error(i18next.t('topology~Error: no resource provided to update application for.')),\n    );\n  }\n  if (!resourceKind) {\n    return Promise.reject(\n      new Error(\n        i18next.t('topology~Error: invalid resource kind provided for updating application.'),\n      ),\n    );\n  }\n\n  const instanceName = _.get(resource, ['metadata', 'labels', 'app.kubernetes.io/instance']);\n  const prevApplication = _.get(resource, ['metadata', 'labels', 'app.kubernetes.io/part-of']);\n\n  const patches: Promise<any>[] = [updateItemAppLabel(resourceKind, resource, application)];\n\n  // If there is no instance label, only update this item\n  if (!instanceName) {\n    return Promise.all(patches);\n  }\n\n  // selector is for the instance name and current application if there is one\n  const labelSelector = {\n    'app.kubernetes.io/instance': instanceName,\n  };\n  if (prevApplication) {\n    labelSelector['app.kubernetes.io/part-of'] = prevApplication;\n  }\n\n  // Update all the instance's resources that were part of the previous application\n  return listInstanceResources(resource.metadata.namespace, instanceName, {\n    'app.kubernetes.io/part-of': prevApplication,\n  }).then((listsValue) => {\n    _.forEach(listsValue, (list) => {\n      _.forEach(list, (item) => {\n        // verify the case of no previous application\n        if (prevApplication || !_.get(item, ['metadata', 'labels', 'app.kubernetes.io/part-of'])) {\n          patches.push(updateItemAppLabel(modelFor(item.kind), item, application));\n        }\n      });\n    });\n\n    return Promise.all(patches);\n  });\n};\n\nconst safeLoadList = async (\n  model: K8sModel,\n  queryParams: { [key: string]: any } = {},\n  accessCheckRequired?: boolean,\n) => {\n  try {\n    if (accessCheckRequired) {\n      const canListResource = await checkAccess({\n        group: model.apiGroup,\n        resource: model.plural,\n        verb: 'list',\n        namespace: queryParams?.ns,\n      });\n      if (!canListResource?.status?.allowed) {\n        return [];\n      }\n    }\n    return await k8sList(model, queryParams);\n  } catch (error) {\n    // Ignore when resource is not found\n    if (error?.response?.status === 404) {\n      // eslint-disable-next-line no-console\n      console.warn(`Ignore that model ${model.plural} was not found:`, error);\n      return [];\n    }\n    // eslint-disable-next-line no-console\n    console.warn(`Error while loading model ${model.plural}:`, error);\n    throw error;\n  }\n};\n\nconst safeKill = async (model: K8sModel, obj: K8sResourceKind) => {\n  const resp = await checkAccess({\n    group: model.apiGroup,\n    resource: model.plural,\n    verb: 'delete',\n    name: obj.metadata.name,\n    namespace: obj.metadata.namespace,\n  });\n  if (!resp.status.allowed) {\n    // eslint-disable-next-line no-console\n    console.warn(`User is not allowed to delete resource ${model.plural} ${obj.metadata.name}.`);\n    return null;\n  }\n  try {\n    return await k8sKill(model, obj);\n  } catch (error) {\n    // Ignore when resource is not found\n    if (error?.response?.status === 404) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Resource ${model.plural} ${obj.metadata.name} was not found. Ignore this error.`,\n        error,\n      );\n      return null;\n    }\n    // eslint-disable-next-line no-console\n    console.warn(`Error while deleting resource ${model.plural} ${obj.metadata.name}:`, error);\n    throw error;\n  }\n};\n\nconst deleteWebhooks = async (resource: K8sResourceKind, buildConfigs?: K8sResourceKind[]) => {\n  const deploymentsAnnotations = resource.metadata?.annotations ?? {};\n  const gitType = detectGitType(deploymentsAnnotations['app.openshift.io/vcs-uri']);\n  const secretList = await k8sList(SecretModel, {\n    ns: resource.metadata.namespace,\n  });\n  let webhooks;\n  if (buildConfigs?.length > 0) {\n    webhooks = buildConfigs?.reduce((requests, bc) => {\n      const triggers = bc.spec?.triggers ?? [];\n      const reqs = triggers.reduce((a, t) => {\n        let secretResource: K8sResourceKind;\n        const webhookType = t.generic ? 'generic' : gitType;\n        const webhookTypeObj = t.generic || t[gitType];\n        if (webhookTypeObj) {\n          const secretName =\n            webhookTypeObj.secretReference?.name ??\n            `${resource.metadata.name}-${webhookType}-webhook-secret`;\n          secretResource = secretList.find(\n            (secret: K8sResourceKind) => secret.metadata.name === secretName,\n          );\n        }\n        return secretResource ? [...a, safeKill(SecretModel, secretResource)] : a;\n      }, []);\n      return [...requests, ...reqs];\n    }, []);\n  } else {\n    const secretGenericResource = secretList.find(\n      (secret: K8sResourceKind) =>\n        secret.metadata.name === `${resource.metadata.name}-generic-webhook-secret`,\n    );\n    const secretGittypeResource = secretList.find(\n      (secret: K8sResourceKind) =>\n        secret.metadata.name === `${resource.metadata.name}-${gitType}-webhook-secret`,\n    );\n    webhooks = [\n      safeKill(SecretModel, secretGenericResource),\n      safeKill(SecretModel, secretGittypeResource),\n    ];\n  }\n  return webhooks;\n};\n\nexport const cleanUpWorkload = async (resource: K8sResourceKind): Promise<K8sResourceKind[]> => {\n  const reqs = [];\n\n  const buildConfigs = await safeLoadList(BuildConfigModel, { ns: resource.metadata.namespace });\n  const builds = await safeLoadList(BuildModel, { ns: resource.metadata.namespace });\n  const pipelines = await safeLoadList(PipelineModel, { ns: resource.metadata.namespace }, true);\n  const triggerTemplates = await safeLoadList(\n    TriggerTemplateModel,\n    {\n      ns: resource.metadata.namespace,\n    },\n    true,\n  );\n  const eventListeners = await safeLoadList(\n    EventListenerModel,\n    {\n      ns: resource.metadata.namespace,\n    },\n    true,\n  );\n  const channelModels = await fetchChannelsCrd();\n\n  const resourceModel = modelFor(referenceFor(resource));\n  const resources = {\n    buildConfigs: {\n      data: buildConfigs,\n      loaded: true,\n      loadError: null,\n    },\n    builds: {\n      data: builds,\n      loaded: true,\n      loadError: null,\n    },\n  };\n  const resourceBuildConfigs = getBuildConfigsForResource(resource, resources);\n  const isBuildConfigPresent = !_.isEmpty(resourceBuildConfigs);\n  const pipeline = getPipeline(resource, pipelines);\n  let resourceTriggerTemplates: TriggerTemplateKind[] = [];\n  let resourceEventListeners: EventListenerKind[] = [];\n\n  const deleteModels = [ServiceModel, RouteModel, ImageStreamModel];\n  const knativeDeleteModels = [KnativeServiceModel, ImageStreamModel];\n\n  if (!_.isEmpty(pipeline)) {\n    deleteModels.push(PipelineModel);\n    knativeDeleteModels.push(PipelineModel);\n    resourceTriggerTemplates = getTriggerTemplates(pipeline, triggerTemplates);\n    resourceEventListeners = getEventListeners(resourceTriggerTemplates, eventListeners);\n  }\n  const resourceData = _.cloneDeep(resource);\n  const deleteRequest = (model: K8sModel, resourceObj: K8sResourceKind) => {\n    const req = safeKill(model, resourceObj);\n    req && reqs.push(req);\n  };\n  if (isBuildConfigPresent) {\n    resourceBuildConfigs.forEach((bc) => {\n      deleteRequest(BuildConfigModel, bc);\n    });\n  }\n  const batchDeleteRequests = (models: K8sModel[], resourceObj: K8sResourceKind): void => {\n    models.forEach((model) => deleteRequest(model, resourceObj));\n  };\n  if (isDynamicEventResourceKind(referenceFor(resource)))\n    deleteRequest(modelFor(referenceFor(resource)), resource);\n  if (channelModels.find((channel) => channel.kind === resource.kind)) {\n    deleteRequest(resourceModel, resource);\n  }\n  if (resourceTriggerTemplates.length > 0) {\n    resourceTriggerTemplates.forEach((tt) => deleteRequest(TriggerTemplateModel, tt));\n  }\n\n  if (resourceEventListeners.length > 0) {\n    resourceEventListeners.forEach((et) => deleteRequest(EventListenerModel, et));\n  }\n\n  switch (resource.kind) {\n    case DaemonSetModel.kind:\n    case StatefulSetModel.kind:\n    case JobModel.kind:\n    case CronJobModel.kind:\n    case EventingBrokerModel.kind:\n      deleteRequest(resourceModel, resource);\n      break;\n    case DeploymentModel.kind:\n    case DeploymentConfigModel.kind:\n      deleteRequest(resourceModel, resource);\n      batchDeleteRequests(deleteModels, resource);\n      break;\n    case KnativeServiceModel.kind:\n      batchDeleteRequests(knativeDeleteModels, resourceData);\n      break;\n    case CamelKameletBindingModel.kind:\n    case KafkaSinkModel.kind:\n      deleteRequest(resourceModel, resource);\n      break;\n    default:\n      break;\n  }\n\n  if (isBuildConfigPresent) {\n    reqs.push(...(await deleteWebhooks(resource, resourceBuildConfigs)));\n  }\n  if (pipeline) {\n    reqs.push(...(await deleteWebhooks(resource)));\n  }\n\n  return Promise.all(reqs);\n};\n","import { K8sResourceCommon } from '@console/dynamic-plugin-sdk/src';\n\nexport type ResourceTarget = 'inputs' | 'outputs';\n\nexport type TektonParam = {\n  default?: string | string[];\n  description?: string;\n  name: string;\n  type?: 'string' | 'array';\n};\n\nexport type TektonTaskSteps = {\n  // TODO: Figure out required fields\n  name: string;\n  args?: string[];\n  command?: string[];\n  image?: string;\n  resources?: {}[] | {};\n  env?: { name: string; value: string }[];\n  script?: string[];\n};\n\nexport type TaskResult = {\n  name: string;\n  description?: string;\n};\n\nexport type TektonTaskSpec = {\n  metadata?: {};\n  description?: string;\n  steps: TektonTaskSteps[];\n  params?: TektonParam[];\n  resources?: TektonResourceGroup<TektonResource>;\n  results?: TaskResult[];\n  workspaces?: TektonWorkspace[];\n};\n\nexport type TektonResourceGroup<ResourceType> = {\n  inputs?: ResourceType[];\n  outputs?: ResourceType[];\n};\n\n/** Deprecated upstream - Workspaces are replacing Resources */\nexport type TektonResource = {\n  name: string;\n  optional?: boolean;\n  type: string; // TODO: limit to known strings\n};\n\nexport type TektonWorkspace = {\n  name: string;\n  description?: string;\n  mountPath?: string;\n  readOnly?: boolean;\n  optional?: boolean;\n};\n\nexport type TektonResultsRun = {\n  name: string;\n  value: string;\n};\n\nexport interface Addon {\n  enablePipelinesAsCode: boolean;\n  params: Param[];\n}\n\nexport interface Param {\n  name: string;\n  value: string;\n}\n\nexport interface Dashboard {\n  readonly: boolean;\n}\n\nexport enum MetricsLevel {\n  METRICS_PIPELINERUN_DURATION_TYPE = 'metrics.pipelinerun.duration-type',\n  METRICS_PIPELINERUN_LEVEL = 'metrics.pipelinerun.level',\n  METRICS_TASKRUN_DURATION_TYPE = 'metrics.taskrun.duration-type',\n  METRICS_TASKRUN_LEVEL = 'metrics.taskrun.level',\n}\n\nexport enum LevelTypes {\n  PIPELINE = 'pipeline',\n  PIPELINERUN = 'pipelinerun',\n  TASK = 'task',\n  TASKRUN = 'taskrun',\n}\n\nexport enum DurationTypes {\n  HISTOGRAM = 'histogram',\n  LASTVALUE = 'lastvalue',\n  NAMESPACE = 'namespace',\n}\n\nexport interface Pipeline {\n  'default-service-account': string;\n  'disable-affinity-assistant': boolean;\n  'disable-creds-init': boolean;\n  'enable-api-fields': string;\n  'enable-custom-tasks': boolean;\n  'enable-tekton-oci-bundles': boolean;\n  [MetricsLevel.METRICS_PIPELINERUN_DURATION_TYPE]: DurationTypes;\n  [MetricsLevel.METRICS_PIPELINERUN_LEVEL]: LevelTypes;\n  [MetricsLevel.METRICS_TASKRUN_DURATION_TYPE]: DurationTypes;\n  [MetricsLevel.METRICS_TASKRUN_LEVEL]: LevelTypes;\n  params: Param[];\n  'require-git-ssh-secret-known-hosts': boolean;\n  'running-in-environment-with-injected-sidecars': boolean;\n  'scope-when-expressions-to-task': boolean;\n}\n\nexport interface Pruner {\n  keep: number;\n  resources: string[];\n  schedule: string;\n}\n\nexport interface Trigger {\n  'default-service-account': string;\n  'enable-api-fields': string;\n}\n\nexport interface Spec {\n  addon: Addon;\n  config: {};\n  dashboard: Dashboard;\n  hub: {};\n  params: Param[];\n  pipeline: Pipeline;\n  profile: string;\n  pruner: Pruner;\n  targetNamespace: string;\n  trigger: Trigger;\n}\n\nexport interface Status {\n  conditions: TektonConfigCondition[];\n}\n\nexport interface TektonConfigCondition {\n  lastTransitionTime: string;\n  status: string;\n  type: string;\n}\n\nexport type TektonConfig = K8sResourceCommon & {\n  spec: Spec;\n  status: Status;\n};\n","import {\n  K8sGroupVersionKind,\n  K8sResourceCommon,\n  ObjectMetadata,\n} from '@console/internal/module/k8s';\nimport { TektonResultsRun, TektonTaskSpec } from './coreTekton';\nimport { PipelineKind, PipelineSpec } from './pipeline';\n\nexport type PLRTaskRunStep = {\n  container: string;\n  imageID?: string;\n  name: string;\n  waiting?: {\n    reason: string;\n  };\n  running?: {\n    startedAt: string;\n  };\n  terminated?: {\n    containerID: string;\n    exitCode: number;\n    finishedAt: string;\n    reason: string;\n    startedAt: string;\n    message?: string;\n  };\n};\n\nexport type PLRTaskRunData = {\n  pipelineTaskName: string;\n  status: {\n    completionTime?: string;\n    conditions: Condition[];\n    /** Can be empty */\n    podName: string;\n    startTime: string;\n    steps?: PLRTaskRunStep[];\n    taskSpec?: TektonTaskSpec;\n    taskResults?: { name: string; value: string }[]; // in tekton v1 taskResults is renamed to results\n    results?: { name: string; value: string }[];\n  };\n};\n\nexport type PLRTaskRuns = {\n  [taskRunName: string]: PLRTaskRunData;\n};\n\nexport type VolumeTypeSecret = {\n  secretName: string;\n  items?: {\n    key: string;\n    path: string;\n  }[];\n};\n\nexport type VolumeTypeConfigMaps = {\n  name: string;\n  items?: {\n    key: string;\n    path: string;\n  }[];\n};\n\nexport type VolumeTypePVC = {\n  claimName: string;\n};\n\nexport type PersistentVolumeClaimType = {\n  persistentVolumeClaim: VolumeTypePVC;\n};\n\nexport type VolumeClaimTemplateType = {\n  volumeClaimTemplate: VolumeTypeClaim;\n};\nexport type VolumeTypeClaim = {\n  metadata?: ObjectMetadata;\n  spec: {\n    accessModes: string[];\n    resources: {\n      requests: {\n        storage: string;\n      };\n    };\n    storageClassName?: string;\n    volumeMode?: string;\n  };\n};\n\nexport type Condition = {\n  type: string;\n  status: string;\n  reason?: string;\n  message?: string;\n  lastTransitionTime?: string;\n};\n\nexport type ChildReferences = {\n  apiVersion: string;\n  kind: string;\n  name: string;\n  pipelineTaskName: string;\n};\n\nexport type PipelineRunEmbeddedResourceParam = { name: string; value: string };\nexport type PipelineRunEmbeddedResource = {\n  name: string;\n  resourceSpec: {\n    params: PipelineRunEmbeddedResourceParam[];\n    type: string;\n  };\n};\nexport type PipelineRunReferenceResource = {\n  name: string;\n  resourceRef: {\n    name: string;\n  };\n};\nexport type PipelineRunResource = PipelineRunReferenceResource | PipelineRunEmbeddedResource;\n\nexport type PipelineRunWorkspace = {\n  name: string;\n  [volumeType: string]:\n    | VolumeTypeSecret\n    | VolumeTypeConfigMaps\n    | VolumeTypePVC\n    | VolumeTypeClaim\n    | {};\n};\n\nexport type PipelineRunParam = {\n  name: string;\n  value: string | string[];\n\n  // TODO: To be validated\n  input?: string;\n  output?: string;\n  resource?: object;\n};\n\nexport type PipelineRunStatus = {\n  succeededCondition?: string;\n  creationTimestamp?: string;\n  conditions?: Condition[];\n  startTime?: string;\n  completionTime?: string;\n  taskRuns?: PLRTaskRuns;\n  pipelineSpec: PipelineSpec;\n  skippedTasks?: {\n    name: string;\n  }[];\n  pipelineResults?: TektonResultsRun[]; // in tekton v1 pipelineResults is renamed to results\n  results?: TektonResultsRun[];\n  childReferences?: ChildReferences[];\n};\n\nexport type PipelineRunKind = K8sResourceCommon & {\n  spec: {\n    pipelineRef?: { name: string };\n    pipelineSpec?: PipelineSpec;\n    params?: PipelineRunParam[];\n    workspaces?: PipelineRunWorkspace[];\n    resources?: PipelineRunResource[];\n    serviceAccountName?: string;\n    timeout?: string;\n    // Only used in a single case - cancelling a pipeline; should not be copied between PLRs\n    status?: 'StoppedRunFinally' | 'PipelineRunPending' | 'CancelledRunFinally';\n    // In tekton v1 ServiceAccountName is moved\n    // to TaskRunTemplate as TaskRunTemplate.ServiceAccountName\n    taskRunTemplate?: {\n      serviceAccountName?: string;\n    };\n  };\n  status?: PipelineRunStatus;\n};\n\nexport type PipelineWithLatest = PipelineKind & {\n  latestRun?: PipelineRunKind;\n};\n\nexport const PipelineRunGroupVersionKind: K8sGroupVersionKind = {\n  group: 'tekton.dev',\n  version: 'v1',\n  kind: 'PipelineRun',\n};\n","import {\n  K8sGroupVersionKind,\n  K8sResourceCommon,\n  PersistentVolumeClaimKind,\n} from '@console/internal/module/k8s';\nimport { TektonResource, TektonResultsRun, TektonTaskSpec } from './coreTekton';\nimport { PipelineTaskParam, PipelineTaskRef } from './pipeline';\nimport {\n  Condition,\n  PLRTaskRunStep,\n  VolumeTypeConfigMaps,\n  VolumeTypePVC,\n  VolumeTypeSecret,\n} from './pipelineRun';\n\nexport type TaskRunWorkspace = {\n  name: string;\n  volumeClaimTemplate?: PersistentVolumeClaimKind;\n  persistentVolumeClaim?: VolumeTypePVC;\n  configMap?: VolumeTypeConfigMaps;\n  emptyDir?: {};\n  secret?: VolumeTypeSecret;\n  subPath?: string;\n};\n\nexport type TaskRunStatus = {\n  completionTime?: string;\n  conditions?: Condition[];\n  podName?: string;\n  startTime?: string;\n  steps?: PLRTaskRunStep[];\n  taskResults?: TektonResultsRun[]; // in tekton v1 taskResults is renamed to results\n  results?: TektonResultsRun[];\n};\n\nexport type TaskRunKind = K8sResourceCommon & {\n  spec: {\n    taskRef?: PipelineTaskRef;\n    taskSpec?: TektonTaskSpec;\n    serviceAccountName?: string;\n    params?: PipelineTaskParam[];\n    resources?: TektonResource[];\n    timeout?: string;\n    workspaces?: TaskRunWorkspace[];\n  };\n  status?: TaskRunStatus;\n};\n\nexport const TaskRunGroupVersionKind: K8sGroupVersionKind = {\n  group: 'tekton.dev',\n  version: 'v1',\n  kind: 'TaskRun',\n};\n\nexport type PipelineRunStatusType = {\n  Completed?: number;\n  Failed?: number;\n  Skipped?: number;\n  Cancelled?: number;\n  Incomplete?: number;\n  PipelineNotStarted?: number;\n  Pending?: number;\n  Running?: number;\n  Succeeded?: number;\n};\n","export enum ComputedStatus {\n  Cancelling = 'Cancelling',\n  Succeeded = 'Succeeded',\n  Failed = 'Failed',\n  Running = 'Running',\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  'In Progress' = 'In Progress',\n  FailedToStart = 'FailedToStart',\n  PipelineNotStarted = 'PipelineNotStarted',\n  Skipped = 'Skipped',\n  Cancelled = 'Cancelled',\n  Pending = 'Pending',\n  Idle = 'Idle',\n  Other = '-',\n}\n\nexport enum CustomRunStatus {\n  RunCancelled = 'RunCancelled',\n}\n","import { BaseService } from '../services/base-service';\nimport { RepoStatus } from '../types';\nimport { ImportStrategy } from '../types/git';\nimport { detectBuildTypes } from './build-tool-type-detector';\nimport { isServerlessFxRepository } from './serverless-strategy-detector';\n\ntype ImportStrategyType = {\n  name: string;\n  type: ImportStrategy;\n  expectedRegexp: RegExp;\n  priority: number;\n  customDetection?: (gitService: BaseService) => Promise<any>;\n};\n\nconst ImportStrategyList: ImportStrategyType[] = [\n  {\n    name: 'Devfile',\n    type: ImportStrategy.DEVFILE,\n    expectedRegexp: /^\\.?devfile\\.yaml$/,\n    priority: 3,\n  },\n  {\n    name: 'Dockerfile',\n    type: ImportStrategy.DOCKERFILE,\n    expectedRegexp: /^(Dockerfile|Containerfile).*/,\n    priority: 2,\n  },\n  {\n    name: 'Serverless Function',\n    type: ImportStrategy.SERVERLESS_FUNCTION,\n    expectedRegexp: /^func\\.(yaml|yml)$/,\n    priority: 1,\n  },\n  {\n    name: 'Builder Image',\n    type: ImportStrategy.S2I,\n    expectedRegexp: /^/,\n    priority: 0,\n    customDetection: detectBuildTypes,\n  },\n];\n\nexport type DetectedStrategy = {\n  name: string;\n  type: ImportStrategy;\n  priority: number;\n  detectedFiles: string[];\n  detectedCustomData?: any;\n};\n\ntype DetectedServiceData = {\n  loaded: boolean;\n  loadError?: any;\n  repositoryStatus: RepoStatus;\n  strategies: DetectedStrategy[];\n};\n\nexport const detectImportStrategies = async (\n  repository: string,\n  gitService: BaseService,\n  isServerlessEnabled: boolean = false,\n): Promise<DetectedServiceData> => {\n  let detectedStrategies: DetectedStrategy[] = [];\n  let addServerlessFxStrategy: boolean;\n  let loaded: boolean = false;\n  let loadError = null;\n\n  const repositoryStatus = gitService\n    ? await gitService.isRepoReachable()\n    : RepoStatus.GitTypeNotDetected;\n  let detectedFiles: string[] = [];\n  let detectedCustomData: string[];\n\n  if (repositoryStatus === RepoStatus.Reachable) {\n    try {\n      const { files } = await gitService.getRepoFileList({ includeFolder: true });\n      addServerlessFxStrategy = await isServerlessFxRepository(isServerlessEnabled, gitService);\n\n      detectedStrategies = await Promise.all(\n        ImportStrategyList.map<Promise<DetectedStrategy>>(async (strategy) => {\n          detectedFiles = files.filter((f) => strategy.expectedRegexp.test(f));\n          if (detectedFiles.length > 0 && strategy.customDetection) {\n            detectedCustomData = await strategy.customDetection(gitService);\n          }\n          return {\n            name: strategy.name,\n            type: strategy.type,\n            priority: strategy.priority,\n            detectedFiles,\n            detectedCustomData,\n          };\n        }),\n      );\n      loaded = true;\n    } catch (err) {\n      loaded = true;\n      loadError = err.message;\n    }\n  } else {\n    loaded = true;\n  }\n\n  if (!addServerlessFxStrategy) {\n    detectedStrategies = detectedStrategies.filter(\n      (strategy) => strategy.type !== ImportStrategy.SERVERLESS_FUNCTION,\n    );\n  }\n\n  detectedStrategies = detectedStrategies\n    .filter((strategy) => !!strategy.detectedFiles.length || !!strategy.detectedCustomData?.length)\n    .sort((t1, t2) => t2.priority - t1.priority);\n\n  return {\n    loaded,\n    loadError,\n    repositoryStatus,\n    strategies: detectedStrategies,\n  };\n};\n","import { DEFAULT_GROUP_PAD, GROUP_WIDTH } from '@console/topology/src/const';\n\nexport const TYPE_EVENT_SOURCE = 'event-source';\nexport const TYPE_EVENT_SINK = 'event-sink';\nexport const TYPE_KAFKA_SINK = 'kafka-sink';\nexport const TYPE_EVENT_SOURCE_KAFKA = 'event-source-kafka';\nexport const TYPE_EVENT_SOURCE_LINK = 'event-source-link';\nexport const TYPE_EVENT_SINK_LINK = 'event-sink-link';\nexport const TYPE_KAFKA_CONNECTION_LINK = 'event-source-kafka-link';\nexport const TYPE_EVENT_PUB_SUB = 'event-pubsub';\nexport const TYPE_EVENT_PUB_SUB_LINK = 'event-pubsub-link';\nexport const TYPE_KNATIVE_SERVICE = 'knative-service';\nexport const TYPE_REVISION_TRAFFIC = 'revision-traffic';\nexport const TYPE_KNATIVE_REVISION = 'knative-revision';\nexport const TYPE_SINK_URI = 'sink-uri';\n\nexport const KNATIVE_GROUP_NODE_WIDTH = GROUP_WIDTH;\nexport const KNATIVE_GROUP_NODE_HEIGHT = 100;\nexport const KNATIVE_GROUP_NODE_PADDING = [\n  DEFAULT_GROUP_PAD,\n  DEFAULT_GROUP_PAD,\n  DEFAULT_GROUP_PAD + 10,\n  DEFAULT_GROUP_PAD,\n];\n\nexport const EVENT_MARKER_RADIUS = 6;\n\n// URI Kind\nexport const URI_KIND = 'URI';\n","import { chart_color_black_400 as skippedColor } from '@patternfly/react-tokens/dist/js/chart_color_black_400';\nimport { chart_color_black_500 as cancelledColor } from '@patternfly/react-tokens/dist/js/chart_color_black_500';\nimport { chart_color_blue_100 as pendingColor } from '@patternfly/react-tokens/dist/js/chart_color_blue_100';\nimport { chart_color_blue_300 as runningColor } from '@patternfly/react-tokens/dist/js/chart_color_blue_300';\nimport { chart_color_green_400 as successColor } from '@patternfly/react-tokens/dist/js/chart_color_green_400';\nimport { global_danger_color_100 as failureColor } from '@patternfly/react-tokens/dist/js/global_danger_color_100';\nimport i18next from 'i18next';\nimport {\n  K8sKind,\n  referenceForModel,\n  GroupVersionKind,\n  apiVersionForModel,\n} from '@console/internal/module/k8s';\nimport { TektonResourceLabel } from '../components/pipelines/const';\nimport {\n  ClusterTaskModel,\n  ClusterTriggerBindingModel,\n  TaskModel,\n  TriggerBindingModel,\n  PipelineModel,\n} from '../models';\nimport { ComputedStatus, PipelineKind, PipelineRunKind, PipelineTask, TaskRunKind } from '../types';\nimport { pipelineRunFilterReducer, SucceedConditionReason } from './pipeline-filter-reducer';\n\ninterface Metadata {\n  name: string;\n  namespace?: string;\n}\n\nexport interface PropPipelineData {\n  metadata: Metadata;\n  latestRun?: PipelineRunKind;\n}\n\nexport interface StatusMessage {\n  message: string;\n  pftoken: { name: string; value: string; var: string };\n}\n\nexport interface TaskStatus {\n  PipelineNotStarted: number;\n  Pending: number;\n  Running: number;\n  Succeeded: number;\n  Cancelled: number;\n  Failed: number;\n  Skipped: number;\n  Completed?: number;\n  Cancelling?: number;\n}\n\nexport const getLatestRun = (runs: PipelineRunKind[], field: string): PipelineRunKind => {\n  if (!runs || !(runs.length > 0) || !field) {\n    return null;\n  }\n  let latestRun = runs[0];\n  if (field === 'creationTimestamp') {\n    for (let i = 1; i < runs.length; i++) {\n      latestRun =\n        runs[i] &&\n        runs[i].metadata &&\n        runs[i].metadata[field] &&\n        new Date(runs[i].metadata[field]) > new Date(latestRun.metadata[field])\n          ? runs[i]\n          : latestRun;\n    }\n  } else if (field === 'startTime' || field === 'completionTime') {\n    for (let i = 1; i < runs.length; i++) {\n      latestRun =\n        runs[i] &&\n        runs[i].status &&\n        runs[i].status[field] &&\n        new Date(runs[i].status[field]) > new Date(latestRun.status[field])\n          ? runs[i]\n          : latestRun;\n    }\n  } else {\n    latestRun = runs[runs.length - 1];\n  }\n  if (!latestRun.status) {\n    latestRun = { ...latestRun, status: { pipelineSpec: { tasks: [] } } };\n  }\n  if (!latestRun.status.succeededCondition) {\n    latestRun.status = { ...latestRun.status, succeededCondition: '' };\n  }\n  latestRun.status.succeededCondition = pipelineRunFilterReducer(latestRun);\n  return latestRun;\n};\n\nexport const augmentRunsToData = (\n  pipelines: PropPipelineData[],\n  pipelineruns: PipelineRunKind[],\n): PropPipelineData[] => {\n  return pipelines.map((pipeline) => {\n    const prsForPipeline = pipelineruns.filter(\n      (pr) => pr.metadata.labels?.['tekton.dev/pipeline'] === pipeline.metadata.name,\n    );\n    pipeline.latestRun = getLatestRun(prsForPipeline, 'creationTimestamp');\n    return pipeline;\n  });\n};\n\nexport const getRunStatusColor = (status: string): StatusMessage => {\n  switch (status) {\n    case ComputedStatus.Succeeded:\n      return { message: i18next.t('pipelines-plugin~Succeeded'), pftoken: successColor };\n    case ComputedStatus.Failed:\n      return { message: i18next.t('pipelines-plugin~Failed'), pftoken: failureColor };\n    case ComputedStatus.FailedToStart:\n      return {\n        message: i18next.t('pipelines-plugin~PipelineRun failed to start'),\n        pftoken: failureColor,\n      };\n    case ComputedStatus.Running:\n      return { message: i18next.t('pipelines-plugin~Running'), pftoken: runningColor };\n    case ComputedStatus['In Progress']:\n      return { message: i18next.t('pipelines-plugin~Running'), pftoken: runningColor };\n\n    case ComputedStatus.Skipped:\n      return { message: i18next.t('pipelines-plugin~Skipped'), pftoken: skippedColor };\n    case ComputedStatus.Cancelled:\n      return { message: i18next.t('pipelines-plugin~Cancelled'), pftoken: cancelledColor };\n    case ComputedStatus.Cancelling:\n      return { message: i18next.t('pipelines-plugin~Cancelling'), pftoken: cancelledColor };\n    case ComputedStatus.Idle:\n    case ComputedStatus.Pending:\n      return { message: i18next.t('pipelines-plugin~Pending'), pftoken: pendingColor };\n    default:\n      return {\n        message: i18next.t('pipelines-plugin~PipelineRun not started yet'),\n        pftoken: pendingColor,\n      };\n  }\n};\n\nexport const truncateName = (name: string, length: number): string =>\n  name.length < length ? name : `${name.slice(0, length - 1)}...`;\n\nexport const getPipelineFromPipelineRun = (pipelineRun: PipelineRunKind): PipelineKind => {\n  const pipelineName =\n    pipelineRun?.metadata?.labels?.[TektonResourceLabel.pipeline] || pipelineRun?.metadata?.name;\n  const pipelineSpec = pipelineRun?.status?.pipelineSpec || pipelineRun?.spec?.pipelineSpec;\n  if (!pipelineName || !pipelineSpec) {\n    return null;\n  }\n  return {\n    apiVersion: apiVersionForModel(PipelineModel),\n    kind: PipelineModel.kind,\n    metadata: {\n      name: pipelineName,\n      namespace: pipelineRun.metadata.namespace,\n    },\n    spec: pipelineSpec,\n  };\n};\n\nexport const totalPipelineRunTasks = (executedPipeline: PipelineKind): number => {\n  if (!executedPipeline) {\n    return 0;\n  }\n  const totalTasks = (executedPipeline.spec?.tasks || []).length ?? 0;\n  const finallyTasks = (executedPipeline.spec?.finally || []).length ?? 0;\n  return totalTasks + finallyTasks;\n};\n\nexport const totalPipelineRunCustomTasks = (executedPipeline: PipelineKind): number => {\n  if (!executedPipeline) {\n    return 0;\n  }\n  const totalCustomTasks =\n    (executedPipeline.spec?.tasks || []).filter(\n      (task) => task.taskRef?.kind !== 'Task' && task.taskRef?.kind !== 'ClusterTask',\n    ).length ?? 0;\n  const finallyCustomTasks =\n    (executedPipeline.spec?.finally || []).filter(\n      (task) => task.taskRef?.kind !== 'Task' && task.taskRef?.kind !== 'ClusterTask',\n    ).length ?? 0;\n  return totalCustomTasks + finallyCustomTasks;\n};\n\nexport const getTaskStatus = (\n  pipelinerun: PipelineRunKind,\n  pipeline: PipelineKind,\n  taskRuns: TaskRunKind[],\n): TaskStatus => {\n  const totalTasks = totalPipelineRunTasks(pipeline) - totalPipelineRunCustomTasks(pipeline);\n  const plrTasks = (): string[] => {\n    if (pipelinerun?.status?.taskRuns) {\n      return Object.keys(pipelinerun.status.taskRuns);\n    }\n    if (taskRuns) {\n      return taskRuns?.map((tRun) => tRun.metadata.name);\n    }\n    return [];\n  };\n  const plrTaskLength = plrTasks().length;\n  const skippedTaskLength = (pipelinerun?.status?.skippedTasks || []).length;\n  const taskStatus: TaskStatus = {\n    PipelineNotStarted: 0,\n    Pending: 0,\n    Running: 0,\n    Succeeded: 0,\n    Failed: 0,\n    Cancelled: 0,\n    Skipped: skippedTaskLength,\n  };\n\n  if (pipelinerun?.status?.taskRuns || taskRuns) {\n    plrTasks().forEach((taskRun) => {\n      const status = pipelineRunFilterReducer(\n        taskRuns?.find((tRun) => tRun.metadata.name === taskRun) ||\n          pipelinerun.status.taskRuns[taskRun],\n      );\n      if (status === 'Succeeded') {\n        taskStatus[ComputedStatus.Succeeded]++;\n      } else if (status === 'Running') {\n        taskStatus[ComputedStatus.Running]++;\n      } else if (status === 'Failed') {\n        taskStatus[ComputedStatus.Failed]++;\n      } else if (status === 'Cancelled') {\n        taskStatus[ComputedStatus.Cancelled]++;\n      } else {\n        taskStatus[ComputedStatus.Pending]++;\n      }\n    });\n\n    const pipelineRunHasFailure = taskStatus[ComputedStatus.Failed] > 0;\n    const pipelineRunIsCancelled =\n      pipelineRunFilterReducer(pipelinerun) === ComputedStatus.Cancelled;\n    const unhandledTasks =\n      totalTasks >= plrTaskLength ? totalTasks - plrTaskLength - skippedTaskLength : totalTasks;\n\n    if (pipelineRunHasFailure || pipelineRunIsCancelled) {\n      taskStatus[ComputedStatus.Cancelled] += unhandledTasks;\n    } else {\n      taskStatus[ComputedStatus.Pending] += unhandledTasks;\n    }\n  } else if (\n    pipelinerun?.status?.conditions?.[0]?.status === 'False' ||\n    pipelinerun?.spec.status === SucceedConditionReason.PipelineRunCancelled\n  ) {\n    taskStatus[ComputedStatus.Cancelled] = totalTasks;\n  } else if (pipelinerun?.spec.status === SucceedConditionReason.PipelineRunPending) {\n    taskStatus[ComputedStatus.Pending] += totalTasks;\n  } else {\n    taskStatus[ComputedStatus.PipelineNotStarted]++;\n  }\n  return taskStatus;\n};\n\nexport const getResourceModelFromTaskKind = (kind: string): K8sKind => {\n  if (kind === ClusterTaskModel.kind) {\n    return ClusterTaskModel;\n  }\n  if (kind === TaskModel.kind || kind === undefined) {\n    return TaskModel;\n  }\n  return null;\n};\n\nexport const getSafeTaskResourceKind = (kind: string): string =>\n  (getResourceModelFromTaskKind(kind) || TaskModel).kind;\n\nexport const getResourceModelFromBindingKind = (kind: string): K8sKind => {\n  if (kind === ClusterTriggerBindingModel.kind) {\n    return ClusterTriggerBindingModel;\n  }\n  if (kind === TriggerBindingModel.kind || kind === undefined) {\n    return TriggerBindingModel;\n  }\n  return null;\n};\n\nexport const getSafeBindingResourceKind = (kind: string): string =>\n  (getResourceModelFromBindingKind(kind) || TriggerBindingModel).kind;\n\nexport const getResourceModelFromTask = (task: PipelineTask): K8sKind => {\n  const {\n    taskRef: { kind },\n  } = task;\n\n  return getResourceModelFromTaskKind(kind);\n};\n\nexport const pipelineRefExists = (pipelineRun: PipelineRunKind): boolean =>\n  !!pipelineRun.spec.pipelineRef?.name;\n\nexport const getModelReferenceFromTaskKind = (kind: string): GroupVersionKind => {\n  const model = getResourceModelFromTaskKind(kind);\n  return referenceForModel(model);\n};\n\nexport const countRunningTasks = (\n  pipelineRun: PipelineRunKind,\n  taskRuns: TaskRunKind[],\n): number => {\n  const taskStatuses = taskRuns && getTaskStatus(pipelineRun, undefined, taskRuns);\n  return taskStatuses?.Running;\n};\n\nexport const shouldHidePipelineRunStop = (\n  pipelineRun: PipelineRunKind,\n  taskRuns: TaskRunKind[],\n): boolean =>\n  !(\n    pipelineRun &&\n    (countRunningTasks(pipelineRun, taskRuns) > 0 ||\n      pipelineRunFilterReducer(pipelineRun) === ComputedStatus.Running)\n  );\n\nexport const shouldHidePipelineRunStopForTaskRunStatus = (\n  pipelineRun: PipelineRunKind,\n  taskRunStatusObj: TaskStatus,\n): boolean =>\n  !(\n    pipelineRun &&\n    (taskRunStatusObj?.Running > 0 ||\n      pipelineRunFilterReducer(pipelineRun) === ComputedStatus.Running)\n  );\n\nexport const shouldHidePipelineRunCancel = (\n  pipelineRun: PipelineRunKind,\n  taskRuns: TaskRunKind[],\n): boolean =>\n  !(\n    pipelineRun &&\n    countRunningTasks(pipelineRun, taskRuns) > 0 &&\n    pipelineRunFilterReducer(pipelineRun) !== ComputedStatus.Cancelled\n  );\n\nexport const shouldHidePipelineRunCancelForTaskRunStatus = (\n  pipelineRun: PipelineRunKind,\n  taskRunStatusObj: TaskStatus,\n): boolean =>\n  !(\n    pipelineRun &&\n    taskRunStatusObj?.Running > 0 &&\n    pipelineRunFilterReducer(pipelineRun) !== ComputedStatus.Cancelled\n  );\n","import * as _ from 'lodash-es';\nimport * as React from 'react';\nimport { useTranslation, withTranslation } from 'react-i18next';\nimport { WithT } from 'i18next';\nimport { useParams } from 'react-router-dom-v5-compat';\nimport { K8sResourceKind } from '../../../module/k8s';\nimport { Firehose, LoadingBox, StatusBox } from '../../utils';\nimport { SecretTypeAbstraction } from './const';\nimport { toTypeAbstraction } from './utils';\nimport { SecretFormWrapper } from './SecretFormWrapper';\n\nexport const SecretLoadingWrapper = withTranslation()(\n  class SecretLoadingWrapper extends React.Component<\n    SecretLoadingWrapperProps & WithT,\n    SecretLoadingWrapperState\n  > {\n    readonly state: SecretLoadingWrapperState = {\n      secretTypeAbstraction: SecretTypeAbstraction.generic,\n    };\n    componentDidUpdate() {\n      if (!_.isEmpty(this.props.obj.data)) {\n        const secretTypeAbstraction = toTypeAbstraction(this.props.obj.data);\n        if (this.state.secretTypeAbstraction !== secretTypeAbstraction) {\n          this.setState({\n            secretTypeAbstraction,\n          });\n        }\n      }\n    }\n    render() {\n      const { obj, fixedKeys } = this.props;\n      const { secretTypeAbstraction } = this.state;\n      if (!secretTypeAbstraction) {\n        return <LoadingBox />;\n      }\n      const fixed = fixedKeys?.reduce((acc, k) => ({ ...acc, [k]: obj.data?.[k] || '' }), {});\n\n      return (\n        <StatusBox {...obj}>\n          <SecretFormWrapper\n            {...this.props}\n            secretTypeAbstraction={secretTypeAbstraction}\n            obj={obj.data}\n            fixed={fixed}\n          />\n        </StatusBox>\n      );\n    }\n  },\n);\n\nexport const EditSecret = ({ kind }: EditSecretProps) => {\n  const params = useParams();\n  const { t } = useTranslation();\n  return (\n    <Firehose\n      resources={[{ kind, name: params.name, namespace: params.ns, isList: false, prop: 'obj' }]}\n    >\n      <SecretLoadingWrapper fixedKeys={['kind', 'metadata']} saveButtonText={t('public~Save')} />\n    </Firehose>\n  );\n};\n\ntype EditSecretProps = {\n  kind: string;\n};\n\ntype SecretLoadingWrapperProps = {\n  obj?: {\n    data?: K8sResourceKind;\n    [key: string]: any;\n  };\n  fixedKeys: string[];\n  saveButtonText: string;\n};\n\ntype SecretLoadingWrapperState = {\n  secretTypeAbstraction: SecretTypeAbstraction;\n};\n","import * as React from 'react';\nimport { useParams } from 'react-router-dom-v5-compat';\nimport { SecretTypeAbstraction } from './const';\nimport { SecretFormWrapper } from './SecretFormWrapper';\n\nexport const CreateSecret = () => {\n  const params = useParams();\n  const secretTypeAbstraction = params.type as SecretTypeAbstraction;\n  return (\n    <SecretFormWrapper\n      fixed={{ metadata: { namespace: params.ns } }}\n      secretTypeAbstraction={secretTypeAbstraction}\n      isCreate={true}\n    />\n  );\n};\n","export interface RepoMetadata {\n  repoName: string;\n  owner: string;\n  host: string;\n  defaultBranch?: string;\n  fullName?: string;\n  contextDir?: string;\n  devfilePath?: string;\n  dockerfilePath?: string;\n}\n\nexport interface BranchList {\n  branches: string[];\n}\n\nexport interface RepoLanguageList {\n  languages: string[];\n}\n\nexport interface RepoFileList {\n  files: string[];\n}\n\nexport enum RepoStatus {\n  Reachable,\n  Unreachable,\n  RateLimitExceeded,\n  GitTypeNotDetected,\n  InvalidGitTypeSelected,\n  PrivateRepo,\n  ResourceNotFound,\n  GiteaRepoUnreachable,\n}\n","export interface BuildTool {\n  name: string;\n  type: string;\n  language: string;\n  expectedRegexps: RegExp;\n  expectedFiles: string[];\n}\n\nexport interface BuildType {\n  buildType: string;\n  language: string;\n  files: string[];\n}\n\nexport const Maven: BuildTool = {\n  name: 'Maven',\n  type: 'java',\n  language: 'java',\n  expectedRegexps: RegExp([`pom.xml`].join('|')),\n  expectedFiles: ['pom.xml'],\n};\n\nexport const Gradle: BuildTool = {\n  name: 'Gradle',\n  type: 'java',\n  language: 'java',\n  expectedRegexps: RegExp([`.*gradle.*`].join('|')),\n  expectedFiles: ['build.gradle', 'gradlew', 'gradlew.bat'],\n};\n\nexport const Golang: BuildTool = {\n  name: 'Golang',\n  type: 'golang',\n  language: 'go',\n  expectedRegexps: RegExp([`.*.\\\\.go`, `Gopkg.toml`, `glide.yaml`].join('|')),\n  expectedFiles: ['main.go', 'Gopkg.toml', 'glide.yaml'],\n};\n\nexport const Ruby: BuildTool = {\n  name: 'Ruby',\n  type: 'ruby',\n  language: 'ruby',\n  expectedRegexps: RegExp([`Gemfile`, `Rakefile`, `config.ru`].join('|')),\n  expectedFiles: ['Gemfile', 'Rakefile', 'config.ru'],\n};\n\nexport const NodeJS: BuildTool = {\n  name: 'NodeJS',\n  type: 'nodejs',\n  language: 'javascript',\n  expectedRegexps: RegExp([`app.json`, `package.json`, `gulpfile.js`, `Gruntfile.js`].join('|')),\n  expectedFiles: ['app.json', 'package.json', 'gulpfile.js', 'Gruntfile.js'],\n};\n\nexport const ModernWebApp: BuildTool = {\n  name: 'Modern Web App',\n  type: 'modern-webapp',\n  language: 'javascript',\n  expectedRegexps: RegExp([`app.json`, `package.json`, `gulpfile.js`, `Gruntfile.js`].join('|')),\n  expectedFiles: ['app.json', 'package.json', 'gulpfile.js', 'Gruntfile.js'],\n};\n\nexport const PHP: BuildTool = {\n  name: 'PHP',\n  type: 'php',\n  language: 'php',\n  expectedRegexps: RegExp([`index.php`, `composer.json`].join('|')),\n  expectedFiles: ['index.php', 'composer.json'],\n};\n\nexport const Python: BuildTool = {\n  name: 'Python',\n  type: 'python',\n  language: 'python',\n  expectedRegexps: RegExp([`requirements.txt`, `setup.py`].join('|')),\n  expectedFiles: ['requirements.txt', 'setup.py'],\n};\n\nexport const Perl: BuildTool = {\n  name: 'Perl',\n  type: 'perl',\n  language: 'perl',\n  expectedRegexps: RegExp([`index.pl`, `cpanfile`].join('|')),\n  expectedFiles: ['index.pl', 'cpanfile'],\n};\n\nexport const Dotnet: BuildTool = {\n  name: 'Dotnet',\n  type: 'dotnet',\n  language: 'C#',\n  expectedRegexps: RegExp([`project.json`, `.*.csproj`].join('|')),\n  expectedFiles: ['project.json', 'app.csproj'],\n};\n\nexport const BuildTools = [\n  Dotnet,\n  Golang,\n  Gradle,\n  Maven,\n  NodeJS,\n  ModernWebApp,\n  Perl,\n  PHP,\n  Python,\n  Ruby,\n];\n\nexport const WebAppDependencies = [\n  'react',\n  'angular',\n  '@angular/core',\n  'vue',\n  'knockout',\n  'knockback',\n];\n","export * from './github-service';\nexport * from './bitbucket-service';\nexport * from './gitlab-service';\nexport * from './gitea-service';\nexport * from './git-service';\nexport * from './base-service';\n","import { BuildTool, BuildTools, BuildType, WebAppDependencies } from '../types';\n\nexport function detectBuildTypes(files: string[]): BuildType[] {\n  const buildTypes = BuildTools.map((t: BuildTool) => {\n    const matchedFiles = files.filter((f: string) => t.expectedRegexps.test(f));\n    return { buildType: t.type, language: t.language, files: matchedFiles };\n  });\n  return buildTypes\n    .filter((b: BuildType) => b.files.length > 0)\n    .sort((a, b) => b.files.length - a.files.length);\n}\n\nexport function isModernWebApp(packageJsonContent: string): boolean {\n  try {\n    const packageJson = JSON.parse(packageJsonContent);\n    return WebAppDependencies.some((dep) => dep in packageJson.dependencies);\n  } catch {\n    return false;\n  }\n}\n","import { SecretType } from '@console/internal/components/secrets/create-secret';\nimport { SecretKind } from '@console/internal/module/k8s';\nimport { GitSource, GitProvider, SecretType as GitSecretType } from '../types';\nimport { BaseService } from './base-service';\nimport { BitbucketService } from './bitbucket-service';\nimport { GiteaService } from './gitea-service';\nimport { GithubService } from './github-service';\nimport { GitlabService } from './gitlab-service';\n\nexport function getGitService(\n  repository: string,\n  gitProvider: GitProvider,\n  ref?: string,\n  contextDir?: string,\n  secret?: SecretKind,\n  devfilePath?: string,\n  dockerfilePath?: string,\n): BaseService {\n  let secretType: GitSecretType;\n  let secretContent: any;\n  switch (secret?.type) {\n    case SecretType.basicAuth:\n      secretType = GitSecretType.BASIC_AUTH;\n      secretContent = secret.data;\n      break;\n    case SecretType.sshAuth:\n      secretType = GitSecretType.SSH;\n      secretContent = secret['ssh-privatekey'];\n      break;\n    default:\n      secretType = GitSecretType.NO_AUTH;\n  }\n  const gitSource: GitSource = {\n    url: repository,\n    ref,\n    contextDir,\n    secretType,\n    secretContent,\n    devfilePath,\n    dockerfilePath,\n  };\n\n  switch (gitProvider) {\n    case GitProvider.GITHUB:\n      return new GithubService(gitSource);\n    case GitProvider.BITBUCKET:\n      return new BitbucketService(gitSource);\n    case GitProvider.GITLAB:\n      return new GitlabService(gitSource);\n    case GitProvider.GITEA:\n      return new GiteaService(gitSource);\n    default:\n      return null;\n  }\n}\n","export * from './build-tool-type-detector';\nexport * from './dockerfile-parser';\nexport * from './import-strategy-detector';\n","import { CommandEntry, parse } from 'docker-file-parser';\n\nexport class DockerFileParser {\n  content: string;\n\n  parsedCommands: CommandEntry[];\n\n  constructor(content: string) {\n    this.content = content;\n    this.parsedCommands = this.parse();\n  }\n\n  parse(): CommandEntry[] {\n    let parsedContent: CommandEntry[] = [];\n    try {\n      parsedContent = parse(this.content);\n    } catch {} // eslint-disable-line no-empty\n    return parsedContent;\n  }\n\n  getContainerPort(): number {\n    const cmd = this.parsedCommands.filter((c: CommandEntry) => c.name === 'EXPOSE');\n    if (cmd.length > 0) {\n      const exposeCommand = cmd[0];\n      if ((exposeCommand.args.length as number) > 0) return Number(exposeCommand.args[0]);\n    }\n    return null;\n  }\n}\n","import { EdgeModel, Model, NodeModel, NodeShape } from '@patternfly/react-topology';\nimport i18next from 'i18next';\nimport * as _ from 'lodash';\nimport { WatchK8sResources, WatchK8sResults } from '@console/dynamic-plugin-sdk';\nimport { getImageForIconClass } from '@console/internal/components/catalog/catalog-item-icon';\nimport { Alerts } from '@console/internal/components/monitoring/types';\nimport { BuildConfigModel, HorizontalPodAutoscalerModel } from '@console/internal/models';\nimport {\n  apiVersionForReference,\n  isGroupVersionKind,\n  K8sResourceKind,\n  K8sResourceKindReference,\n  kindForReference,\n  referenceFor,\n} from '@console/internal/module/k8s';\nimport {\n  TYPE_EVENT_SOURCE,\n  TYPE_EVENT_SOURCE_KAFKA,\n  TYPE_KNATIVE_REVISION,\n} from '@console/knative-plugin/src/topology/const';\nimport { isKnativeServing, OverviewItem } from '@console/shared';\nimport {\n  TYPE_APPLICATION_GROUP,\n  TYPE_CONNECTS_TO,\n  NODE_WIDTH,\n  NODE_HEIGHT,\n  NODE_PADDING,\n  GROUP_WIDTH,\n  GROUP_HEIGHT,\n  GROUP_PADDING,\n} from '../const';\nimport {\n  TopologyDataObject,\n  TopologyDataResources,\n  TopologyDataModelDepicted,\n  OdcNodeModel,\n  TopologyResourcesObject,\n} from '../topology-types';\nimport { ConnectsToData, edgesFromAnnotations } from '../utils/connector-utils';\nimport { WORKLOAD_TYPES } from '../utils/topology-utils';\n\nexport const dataObjectFromModel = (node: OdcNodeModel): TopologyDataObject => {\n  return {\n    id: node.id,\n    name: node.label,\n    type: node.type,\n    resource: node.resource,\n    resources: null,\n    data: null,\n  };\n};\n\nexport const getContextDirByName = (data, name) => {\n  if (!data?.builds && !data?.buildConfigs && !data?.pipelines) {\n    return null;\n  }\n\n  const extractContextDir = (item) => item.spec?.source?.contextDir ?? null;\n  const buildsData = data?.builds?.data?.find(\n    (build: K8sResourceKind) => build.metadata.name === name,\n  );\n  if (buildsData) {\n    const contextDir = extractContextDir(buildsData);\n    return contextDir;\n  }\n\n  const buildConfigData = data?.buildConfigs?.data?.find(\n    (buildConfig: K8sResourceKind) => buildConfig.metadata.name === name,\n  );\n  if (buildConfigData) {\n    const contextDir = extractContextDir(buildConfigData);\n    return contextDir;\n  }\n\n  const pipelinesData = data?.pipelines?.data?.find(\n    (pipeline: K8sResourceKind) => pipeline.metadata.name === name,\n  );\n  if (pipelinesData) {\n    const pathContextParam = pipelinesData?.spec?.params?.find(\n      (param) => param.name === 'PATH_CONTEXT',\n    );\n    if (pathContextParam) {\n      return pathContextParam.default;\n    }\n  }\n  return null;\n};\n\n/**\n * create all data that need to be shown on a topology data\n */\nexport const createTopologyNodeData = (\n  resource: K8sResourceKind,\n  overviewItem: OverviewItem,\n  type: string,\n  defaultIcon: string,\n  operatorBackedService: boolean = false,\n  resources?: WatchK8sResults<TopologyResourcesObject> | { [x: string]: Alerts },\n): TopologyDataObject => {\n  const { monitoringAlerts = [] } = overviewItem;\n  const dcUID = _.get(resource, 'metadata.uid');\n  const deploymentsLabels = _.get(resource, 'metadata.labels', {});\n  const deploymentsAnnotations = _.get(resource, 'metadata.annotations', {});\n  const deploymentsName = _.get(resource, 'metadata.name', '');\n  const contextDir = getContextDirByName(resources, deploymentsName);\n  const builderImageIcon =\n    getImageForIconClass(`icon-${deploymentsLabels['app.openshift.io/runtime']}`) ||\n    getImageForIconClass(`icon-${deploymentsLabels['app.kubernetes.io/name']}`);\n  return {\n    id: dcUID,\n    name: resource?.metadata.name || deploymentsLabels['app.kubernetes.io/instance'],\n    type,\n    resource,\n    resources: { ...overviewItem, isOperatorBackedService: operatorBackedService },\n    data: {\n      monitoringAlerts,\n      kind: referenceFor(resource),\n      editURL: deploymentsAnnotations['app.openshift.io/edit-url'],\n      vcsURI: deploymentsAnnotations['app.openshift.io/vcs-uri'],\n      vcsRef: deploymentsAnnotations['app.openshift.io/vcs-ref'],\n      contextDir,\n      builderImage: builderImageIcon || defaultIcon,\n      isKnativeResource:\n        type &&\n        (type === TYPE_EVENT_SOURCE ||\n          type === TYPE_KNATIVE_REVISION ||\n          type === TYPE_EVENT_SOURCE_KAFKA)\n          ? true\n          : isKnativeServing(resource, 'metadata.labels'),\n    },\n  };\n};\n\n/**\n * create node data for graphs\n */\nexport const getTopologyNodeItem = (\n  resource: K8sResourceKind,\n  type: string,\n  data: any,\n  nodeProps?: Omit<OdcNodeModel, 'type' | 'data' | 'children' | 'id' | 'label'>,\n  children?: string[],\n  resourceKind?: K8sResourceKindReference,\n  shape?: NodeShape,\n): OdcNodeModel => {\n  const uid = resource?.metadata.uid;\n  const name = resource?.metadata.name;\n  const label = resource?.metadata.labels?.['app.openshift.io/instance'];\n  const kind = resourceKind || referenceFor(resource);\n  return {\n    id: uid,\n    type,\n    label: label || name,\n    shape,\n    resource,\n    resourceKind: kind,\n    data,\n    ...(children && children.length && { children }),\n    ...(nodeProps || {}),\n  };\n};\n\nexport const WorkloadModelProps = {\n  width: NODE_WIDTH,\n  height: NODE_HEIGHT,\n  group: false,\n  visible: true,\n  style: {\n    padding: NODE_PADDING,\n  },\n};\n\n/**\n * create edge data for graph\n */\nexport const getTopologyEdgeItems = (\n  dc: K8sResourceKind,\n  resources: K8sResourceKind[],\n): EdgeModel[] => {\n  const annotations = _.get(dc, 'metadata.annotations');\n  const edges = [];\n\n  _.forEach(edgesFromAnnotations(annotations), (edge: string | ConnectsToData) => {\n    // handles multiple edges\n    const targetNode = _.get(\n      _.find(resources, (deployment) => {\n        let name;\n        if (typeof edge === 'string') {\n          name =\n            deployment.metadata?.labels?.['app.kubernetes.io/instance'] ??\n            deployment.metadata?.name;\n          return name === edge;\n        }\n        name = deployment.metadata?.name;\n        const { apiVersion: edgeApiVersion, kind: edgeKind, name: edgeName } = edge;\n        const { kind, apiVersion } = deployment;\n        let edgeExists = name === edgeName && kind === edgeKind;\n        if (apiVersion) {\n          edgeExists = edgeExists && apiVersion === edgeApiVersion;\n        }\n        return edgeExists;\n      }),\n      ['metadata', 'uid'],\n    );\n    const uid = _.get(dc, ['metadata', 'uid']);\n    if (targetNode) {\n      edges.push({\n        id: `${uid}_${targetNode}`,\n        type: TYPE_CONNECTS_TO,\n        label: i18next.t('topology~Visual connector'),\n        source: uid,\n        target: targetNode,\n      });\n    }\n  });\n\n  return edges;\n};\n\n/**\n * create groups data for graph\n */\nexport const getTopologyGroupItems = (dc: K8sResourceKind): NodeModel => {\n  const groupName = _.get(dc, ['metadata', 'labels', 'app.kubernetes.io/part-of']);\n  if (!groupName) {\n    return null;\n  }\n\n  return {\n    id: `group:${groupName}`,\n    type: TYPE_APPLICATION_GROUP,\n    group: true,\n    label: groupName,\n    children: [_.get(dc, ['metadata', 'uid'])],\n    width: GROUP_WIDTH,\n    height: GROUP_HEIGHT,\n    data: {},\n    visible: true,\n    collapsed: false,\n    style: {\n      padding: GROUP_PADDING,\n    },\n  };\n};\n\nconst mergeGroupData = (newGroup: NodeModel, existingGroup: NodeModel): void => {\n  if (!existingGroup.data?.groupResources && !newGroup.data?.groupResources) {\n    return;\n  }\n\n  if (!existingGroup.data?.groupResources) {\n    existingGroup.data.groupResources = [];\n  }\n  if (newGroup?.data?.groupResources) {\n    newGroup.data.groupResources.forEach((obj) => {\n      if (!existingGroup.data.groupResources.includes(obj)) {\n        existingGroup.data.groupResources.push(obj);\n      }\n    });\n  }\n};\n\nexport const mergeGroup = (newGroup: NodeModel, existingGroups: NodeModel[]): void => {\n  if (!newGroup) {\n    return;\n  }\n\n  // Remove any children from the new group that already belong to another group\n  newGroup.children = newGroup.children?.filter(\n    (c) => !existingGroups?.find((g) => g.children?.includes(c)),\n  );\n\n  // find and add the groups\n  const existingGroup = existingGroups.find((g) => g.group && g.id === newGroup.id);\n  if (!existingGroup) {\n    existingGroups.push(newGroup);\n  } else {\n    newGroup.children.forEach((id) => {\n      if (!existingGroup.children.includes(id)) {\n        existingGroup.children.push(id);\n      }\n      mergeGroupData(newGroup, existingGroup);\n    });\n  }\n};\n\nexport const mergeGroups = (newGroups: NodeModel[], existingGroups: NodeModel[]): void => {\n  if (!newGroups || !newGroups.length) {\n    return;\n  }\n  newGroups.forEach((newGroup) => {\n    mergeGroup(newGroup, existingGroups);\n  });\n};\n\nexport const addToTopologyDataModel = (\n  newModel: Model,\n  graphModel: Model,\n  dataModelDepicters: TopologyDataModelDepicted[] = [],\n) => {\n  if (newModel?.edges) {\n    graphModel.edges.push(...newModel.edges);\n  }\n  if (newModel?.nodes) {\n    graphModel.nodes.push(\n      ...newModel.nodes.filter(\n        (n) =>\n          !n.group &&\n          !graphModel.nodes.find((existing) => {\n            if (n.id === existing.id) {\n              return true;\n            }\n            const { resource } = n as OdcNodeModel;\n            return (\n              !resource || !!dataModelDepicters.find((depicter) => depicter(resource, graphModel))\n            );\n          }),\n      ),\n    );\n    mergeGroups(\n      newModel.nodes.filter((n) => n.group),\n      graphModel.nodes,\n    );\n  }\n};\n\n/**\n * Mapping of TopologyResourcesObject key to k8s resource kind\n */\nexport interface KindsMap {\n  [key: string]: string;\n}\n\nexport const getWorkloadResources = (\n  resources: TopologyDataResources,\n  kindsMap: KindsMap,\n  workloadTypes: string[] = WORKLOAD_TYPES,\n) => {\n  return _.flatten(\n    workloadTypes.map((resourceKind) => {\n      return resources[resourceKind]\n        ? resources[resourceKind].data.map((res) => {\n            const resKind = res.kind || kindsMap[resourceKind];\n            let kind = resKind;\n            let apiVersion;\n            if (resKind && isGroupVersionKind(resKind)) {\n              kind = kindForReference(resKind);\n              apiVersion = apiVersionForReference(resKind);\n            }\n            return {\n              kind,\n              apiVersion,\n              ...res,\n            };\n          })\n        : [];\n    }),\n  );\n};\n\nexport const getBaseWatchedResources = (namespace: string): WatchK8sResources<any> => {\n  return {\n    deploymentConfigs: {\n      isList: true,\n      kind: 'DeploymentConfig',\n      namespace,\n      optional: true,\n    },\n    deployments: {\n      isList: true,\n      kind: 'Deployment',\n      namespace,\n      optional: true,\n    },\n    daemonSets: {\n      isList: true,\n      kind: 'DaemonSet',\n      namespace,\n      optional: true,\n    },\n    pods: {\n      isList: true,\n      kind: 'Pod',\n      namespace,\n      optional: true,\n    },\n    jobs: {\n      isList: true,\n      kind: 'Job',\n      namespace,\n      optional: true,\n    },\n    cronJobs: {\n      isList: true,\n      kind: 'CronJob',\n      namespace,\n      optional: true,\n    },\n    statefulSets: {\n      isList: true,\n      kind: 'StatefulSet',\n      namespace,\n      optional: true,\n    },\n    services: {\n      isList: true,\n      kind: 'Service',\n      namespace,\n      optional: true,\n    },\n    hpas: {\n      isList: true,\n      kind: HorizontalPodAutoscalerModel.kind,\n      namespace,\n      optional: true,\n    },\n    buildConfigs: {\n      isList: true,\n      kind: BuildConfigModel.kind,\n      namespace,\n      optional: true,\n    },\n  };\n};\n","import { GitProvider } from '@console/git-service/src';\nimport { RepositoryFormValues } from './types';\n\nexport enum RepositoryFields {\n  REPOSITORY = 'Repository',\n  URL_REPO = 'RepoUrl',\n  URL_ORG = 'RepoOrg',\n  SHA = 'sha',\n  EVENT_TYPE = 'EventType',\n}\n\nexport enum RepoAnnotationFields {\n  SHA_MESSAGE = 'sha_message',\n  SHA_URL = 'sha_url',\n  REPO_URL = 'repo_url',\n  BRANCH = 'Branch',\n}\n\nexport enum RepositoryRuntimes {\n  golang = 'go',\n  nodejs = 'nodejs',\n  python = 'python',\n  java = 'java',\n}\n\nexport const RepositoryLabels: Record<RepositoryFields, string> = {\n  [RepositoryFields.REPOSITORY]: 'pipelinesascode.tekton.dev/repository',\n  [RepositoryFields.URL_REPO]: 'pipelinesascode.tekton.dev/url-repository',\n  [RepositoryFields.URL_ORG]: 'pipelinesascode.tekton.dev/url-org',\n  [RepositoryFields.SHA]: 'pipelinesascode.tekton.dev/sha',\n  [RepositoryFields.EVENT_TYPE]: 'pipelinesascode.tekton.dev/event-type',\n};\n\nexport const RepositoryAnnotations: Record<RepoAnnotationFields, string> = {\n  [RepoAnnotationFields.SHA_MESSAGE]: 'pipelinesascode.tekton.dev/sha-title',\n  [RepoAnnotationFields.SHA_URL]: 'pipelinesascode.tekton.dev/sha-url',\n  [RepoAnnotationFields.REPO_URL]: 'pipelinesascode.tekton.dev/repo-url',\n  [RepoAnnotationFields.BRANCH]: 'pipelinesascode.tekton.dev/branch',\n};\n\nexport const baseURL = 'https://github.com';\n\nexport enum PacConfigurationTypes {\n  GITHUB = 'github',\n  WEBHOOK = 'webhook',\n}\n\nexport const defaultRepositoryFormValues: RepositoryFormValues = {\n  gitUrl: '',\n  githubAppAvailable: false,\n  gitProvider: GitProvider.INVALID,\n  name: '',\n  method: 'github',\n  showOverviewPage: false,\n  yamlData: ``,\n  webhook: {\n    token: '',\n    method: 'token',\n    secret: '',\n    url: '',\n    user: '',\n    autoAttach: false,\n  },\n};\n\nexport const AccessTokenDocLinks = {\n  [GitProvider.GITHUB]:\n    'https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token',\n  [GitProvider.GITLAB]: 'https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html',\n  [GitProvider.BITBUCKET]: 'https://support.atlassian.com/bitbucket-cloud/docs/app-passwords/',\n};\n\nexport const WebhookDocLinks = {\n  [GitProvider.GITHUB]:\n    'https://docs.github.com/en/developers/webhooks-and-events/webhooks/creating-webhooks',\n  [GitProvider.GITLAB]:\n    'https://docs.gitlab.com/ee/user/project/integrations/webhooks.html#configure-a-webhook-in-gitlab',\n  [GitProvider.BITBUCKET]: 'https://support.atlassian.com/bitbucket-cloud/docs/manage-webhooks/',\n};\n\nexport const gitProviderTypesHosts = ['github.com', 'bitbucket.org', 'gitlab.com'];\n","import { TFunction } from 'i18next';\nimport * as _ from 'lodash';\nimport * as yup from 'yup';\nimport { GitProvider } from '@console/git-service/src';\nimport { importFlowRepositoryValidationSchema } from '@console/pipelines-plugin/src/components/repository/repository-form-utils';\nimport { nameValidationSchema, nameRegex } from '@console/shared';\nimport { healthChecksProbesValidationSchema } from '../health-checks/health-checks-probe-validation-utils';\nimport {\n  projectNameValidationSchema,\n  applicationNameValidationSchema,\n  deploymentValidationSchema,\n  serverlessValidationSchema,\n  limitsValidationSchema,\n  routeValidationSchema,\n  imageValidationSchema,\n  gitValidationSchema,\n  dockerValidationSchema,\n  buildValidationSchema,\n  gitUrlRegex,\n  resourcesValidationSchema,\n  devfileValidationSchema,\n  importFlowPipelineTemplateValidationSchema,\n} from './validation-schema';\n\nexport const validationSchema = (t: TFunction) =>\n  yup.object().shape({\n    name: nameValidationSchema(t),\n    project: projectNameValidationSchema,\n    application: applicationNameValidationSchema,\n    image: imageValidationSchema(t),\n    git: gitValidationSchema(t),\n    docker: dockerValidationSchema(t),\n    devfile: devfileValidationSchema(t),\n    deployment: deploymentValidationSchema(t),\n    serverless: serverlessValidationSchema(t),\n    route: routeValidationSchema(t),\n    limits: limitsValidationSchema(t),\n    build: buildValidationSchema,\n    resources: resourcesValidationSchema,\n    healthChecks: healthChecksProbesValidationSchema(t),\n    pac: importFlowRepositoryValidationSchema(t),\n    pipeline: importFlowPipelineTemplateValidationSchema,\n  });\n\nconst hasDomain = (url: string, domain: string): boolean => {\n  return (\n    url.startsWith(`https://${domain}/`) ||\n    url.startsWith(`https://www.${domain}/`) ||\n    url.includes(`@${domain}:`)\n  );\n};\n\nexport const detectGitType = (url: string): GitProvider => {\n  if (!gitUrlRegex.test(url)) {\n    // Not a URL\n    return GitProvider.INVALID;\n  }\n  if (hasDomain(url, 'github.com')) {\n    return GitProvider.GITHUB;\n  }\n  if (hasDomain(url, 'bitbucket.org')) {\n    return GitProvider.BITBUCKET;\n  }\n  if (hasDomain(url, 'gitlab.com')) {\n    return GitProvider.GITLAB;\n  }\n  if (hasDomain(url, 'gitea.com') || url.includes('gitea')) {\n    return GitProvider.GITEA;\n  }\n  // Not a known URL\n  return GitProvider.UNSURE;\n};\n\nexport const createComponentName = (nameString: string): string => {\n  if (nameRegex.test(nameString)) {\n    return nameString;\n  }\n\n  const kebabCaseStr = _.kebabCase(nameString);\n  return nameString.match(/^\\d/) || kebabCaseStr.match(/^\\d/)\n    ? `ocp-${kebabCaseStr}`\n    : kebabCaseStr;\n};\n\nexport const detectGitRepoName = (url: string): string | undefined => {\n  if (!gitUrlRegex.test(url)) {\n    return undefined;\n  }\n  const name = url.replace(/\\/$/, '').split('/').pop();\n  return createComponentName(name);\n};\n","import { parsePrometheusDuration } from '@openshift-console/plugin-shared/src/datetime/prometheus';\nimport i18next from 'i18next';\nimport * as _ from 'lodash';\nimport {\n  DataPoint,\n  PrometheusResponse,\n  PrometheusResult,\n} from '@console/internal/components/graphs';\nimport { humanizeNumberSI } from '@console/internal/components/utils';\nimport { dateFormatterNoYear } from '@console/internal/components/utils/datetime';\nimport { PipelineKind } from '../../../types';\nimport { PipelineMetricsLevel } from '../const';\n\nexport interface GraphData {\n  chartName: string;\n  hasData: boolean;\n}\nexport interface PipelineMetricsGraphProps {\n  pipeline: PipelineKind;\n  timespan: number;\n  queryPrefix: string;\n  metricsLevel: string;\n  interval: number;\n  width?: number;\n\n  loaded?: boolean;\n  onLoad?: (g: GraphData) => void;\n}\nexport enum PipelineQuery {\n  NUMBER_OF_PIPELINE_RUNS = 'NUMBER_OF_PIPELINE_RUNS',\n  PIPELINE_RUN_DURATION = 'PIPELINE_RUN_DURATION',\n  PIPELINE_RUN_TASK_RUN_DURATION = 'PIPELINE_RUN_TASK_RUN_DURATION',\n  PIPELINE_SUCCESS_RATIO = 'PIPELINE_SUCCESS_RATIO',\n}\n\nexport enum MetricsQueryPrefix {\n  TEKTON = 'tekton',\n  TEKTON_PIPELINES_CONTROLLER = 'tekton_pipelines_controller',\n}\n\nexport const metricsQueries = (\n  prefix: string = MetricsQueryPrefix.TEKTON_PIPELINES_CONTROLLER,\n) => ({\n  [PipelineMetricsLevel.PIPELINE_TASK_LEVEL]: {\n    [PipelineQuery.PIPELINE_SUCCESS_RATIO]: _.template(\n      `${prefix}_pipelinerun_duration_seconds_count{pipeline=\"<%= name %>\",namespace=\"<%= namespace %>\"}`,\n    ),\n    [PipelineQuery.NUMBER_OF_PIPELINE_RUNS]: _.template(\n      `sum(${prefix}_pipelinerun_duration_seconds_count{pipeline=\"<%= name %>\",namespace=\"<%= namespace %>\"})`,\n    ),\n  },\n  [PipelineMetricsLevel.PIPELINERUN_TASKRUN_LEVEL]: {\n    [PipelineQuery.NUMBER_OF_PIPELINE_RUNS]: _.template(\n      `sum(count by (pipelinerun) (${prefix}_pipelinerun_duration_seconds{pipeline=\"<%= name %>\",namespace=\"<%= namespace %>\"}))`,\n    ),\n    [PipelineQuery.PIPELINE_RUN_TASK_RUN_DURATION]: _.template(\n      `sum(${prefix}_pipelinerun_taskrun_duration_seconds{pipeline=\"<%= name %>\",namespace=\"<%= namespace %>\"})  by (pipelinerun, task)`,\n    ),\n    [PipelineQuery.PIPELINE_RUN_DURATION]: _.template(\n      `sum(${prefix}_pipelinerun_duration_seconds{pipeline=\"<%= name %>\",namespace=\"<%= namespace %>\"})  by (pipelinerun)`,\n    ),\n    [PipelineQuery.PIPELINE_SUCCESS_RATIO]: _.template(\n      `count(sort_desc(${prefix}_pipelinerun_duration_seconds{pipeline=\"<%= name %>\",namespace=\"<%= namespace %>\"})) by(status)`,\n    ),\n  },\n  [PipelineMetricsLevel.UNSIMPLIFIED_METRICS_LEVEL]: {\n    [PipelineQuery.NUMBER_OF_PIPELINE_RUNS]: _.template(\n      `sum(count by (pipelinerun) (${prefix}_pipelinerun_duration_seconds_count{pipeline=\"<%= name %>\",exported_namespace=\"<%= namespace %>\"}))`,\n    ),\n    [PipelineQuery.PIPELINE_RUN_TASK_RUN_DURATION]: _.template(\n      `sum(${prefix}_pipelinerun_taskrun_duration_seconds_sum{pipeline=\"<%= name %>\",exported_namespace=\"<%= namespace %>\"})  by (pipelinerun, task)`,\n    ),\n    [PipelineQuery.PIPELINE_RUN_DURATION]: _.template(\n      `sum(${prefix}_pipelinerun_duration_seconds_sum{pipeline=\"<%= name %>\",exported_namespace=\"<%= namespace %>\"})  by (pipelinerun)`,\n    ),\n    [PipelineQuery.PIPELINE_SUCCESS_RATIO]: _.template(\n      `count(sort_desc(${prefix}_pipelinerun_duration_seconds_count{pipeline=\"<%= name %>\",exported_namespace=\"<%= namespace %>\"})) by(status)`,\n    ),\n  },\n});\n\nconst formatPositiveValue = (v: number): string =>\n  v === 0 || (v >= 0.001 && v < 1e23) ? humanizeNumberSI(v).string : v.toExponential(1);\nexport const formatValue = (v: number): string =>\n  (v < 0 ? '-' : '') + formatPositiveValue(Math.abs(v));\nexport const formatDate = (date: Date) => {\n  return dateFormatterNoYear.format(date);\n};\nexport const formatTimeSeriesValues = (result: PrometheusResult, samples: number, span: number) => {\n  const { metric, values } = result;\n  const newValues = _.map(values, (v) => {\n    const y = Number(v[1]);\n    return {\n      x: new Date(new Date(v[0] * 1000).setHours(0, 0, 0, 0)),\n      y: Number.isNaN(y) ? null : y,\n      metric,\n    };\n  });\n\n  // The data may have missing values, so we fill those gaps with nulls so that the graph correctly\n  // shows the missing values as gaps in the line\n  const start = Number(_.get(newValues, '[0].x'));\n  const end = Number(_.get(_.last(newValues), 'x'));\n  const step = span / samples;\n  _.range(start, end, step).forEach((t, i) => {\n    const x = new Date(t);\n    if (_.get(newValues, [i, 'x']) > x) {\n      newValues.splice(i, 0, { x, y: null, metric });\n    }\n  });\n\n  return newValues;\n};\n\ntype XMutator = (x: any) => Date | string;\ntype YMutator = (y: any) => number;\nexport const getRangeVectorData = (\n  response: PrometheusResponse,\n  xMutator: XMutator,\n  yMutator?: YMutator,\n) => {\n  const results = response?.data?.result || [];\n  return results?.map((r) => {\n    return r?.values?.map(([x, y]) => {\n      return {\n        x: xMutator?.(r) ?? new Date(x * 1000),\n        y: yMutator?.(y) ?? parseFloat(y),\n        metric: r?.metric,\n        time: x,\n      };\n    });\n  });\n};\n\nexport const getXaxisValues = (timespan: number): number[] => {\n  const xValues = [];\n  if (!timespan) return xValues;\n  const oneDayDuration = parsePrometheusDuration('1d');\n  const numDays = Math.round(timespan / oneDayDuration);\n  const d = new Date(Date.now());\n  d.setHours(0, 0, 0, 0);\n  while (xValues.length - 1 < numDays) {\n    xValues.push(d.getTime());\n    d.setDate(d.getDate() - 1);\n  }\n  return xValues.slice(0, numDays);\n};\n\nexport const getDuration = (seconds: number, long?: boolean): string => {\n  if (seconds === 0) {\n    return i18next.t('pipelines-plugin~less than a sec');\n  }\n  let sec = Math.round(seconds);\n  let min = 0;\n  let hr = 0;\n  let duration = '';\n  if (sec >= 60) {\n    min = Math.floor(sec / 60);\n    sec %= 60;\n  }\n  if (min >= 60) {\n    hr = Math.floor(min / 60);\n    min %= 60;\n  }\n  if (hr > 0) {\n    duration += long\n      ? i18next.t('pipelines-plugin~{{count}} hour', { count: hr })\n      : i18next.t('pipelines-plugin~{{hr}}h', { hr });\n    duration += ' ';\n  }\n  if (min > 0) {\n    duration += long\n      ? i18next.t('pipelines-plugin~{{count}} minute', { count: min })\n      : i18next.t('pipelines-plugin~{{min}}m', { min });\n    duration += ' ';\n  }\n  if (sec > 0) {\n    duration += long\n      ? i18next.t('pipelines-plugin~{{count}} second', { count: sec })\n      : i18next.t('pipelines-plugin~{{sec}}s', { sec });\n  }\n\n  return duration.trim();\n};\n\nexport const PipelineMetricsTimeRangeOptions = () => ({\n  '1d': i18next.t('pipelines-plugin~1 day'),\n  '3d': i18next.t('pipelines-plugin~3 days'),\n  '1w': i18next.t('pipelines-plugin~1 week'),\n  '2w': i18next.t('pipelines-plugin~2 weeks'),\n  '3w': i18next.t('pipelines-plugin~3 weeks'),\n  '4w': i18next.t('pipelines-plugin~4 weeks'),\n});\n\nexport const getTransformedDataPoints = (data: DataPoint[]): DataPoint[] => {\n  let previousValue = 0;\n  return _.sortBy(data, 'x').map((val) => {\n    const currentValue = val.y - previousValue;\n    previousValue += val.y;\n    return { ...val, y: currentValue };\n  });\n};\n","import { apiVersionForModel, K8sResourceKind } from '@console/internal/module/k8s';\nimport { ServiceModel } from '@console/knative-plugin/src';\nimport { AutoscaleWindowType } from '../import-types';\n\nexport const getAutoscaleWindow = (autoscaleValue: string): AutoscaleWindowType => {\n  const windowRegEx = /^[0-9]+|[a-zA-Z]*/g;\n  const [val, unit] = autoscaleValue?.match(windowRegEx);\n  return {\n    autoscalewindow: Number(val) || '',\n    autoscalewindowUnit: unit || 's',\n    defaultAutoscalewindowUnit: unit || 's',\n  };\n};\n\nconst DOMAIN_MAPPING_KSVC_INFO_REGEX = / *\\([^)]*\\) */g;\n\nexport const removeKsvcInfoFromDomainMapping = (dm: string) =>\n  dm.replace(DOMAIN_MAPPING_KSVC_INFO_REGEX, '');\n\nexport const getOtherKsvcFromDomainMapping = (\n  dm: K8sResourceKind,\n  currentKsvcName: string,\n): string | null => {\n  if (!dm.spec?.ref) return null;\n  const { apiVersion, kind, name } = dm.spec.ref;\n  return apiVersionForModel(ServiceModel) === apiVersion &&\n    kind === ServiceModel.kind &&\n    name !== currentKsvcName\n    ? name\n    : null;\n};\n\nexport const removeDuplicateDomainMappings = (\n  allDomainMappings: string[],\n  connectedDomainMappings: string[],\n): string[] => {\n  return [\n    ...new Set(\n      allDomainMappings\n        ?.filter((dm) =>\n          connectedDomainMappings?.length > 0\n            ? connectedDomainMappings?.includes(removeKsvcInfoFromDomainMapping(dm))\n            : true,\n        )\n        .map((n) => removeKsvcInfoFromDomainMapping(n)),\n    ),\n  ];\n};\n\nexport const hasOtherKsvcDomainMappings = (domainMapping: string[]): boolean =>\n  domainMapping.some((dm) => new RegExp(DOMAIN_MAPPING_KSVC_INFO_REGEX).test(dm));\n\nexport const getAllOtherDomainMappingInUse = (\n  domainMappings: string[],\n  data: K8sResourceKind[] = [],\n  serviceName: string,\n): K8sResourceKind[] =>\n  domainMappings\n    .filter((d) => hasOtherKsvcDomainMappings([d]))\n    .map((dm) => {\n      const selectedDomain = data?.find(\n        (d) => d.metadata.name === removeKsvcInfoFromDomainMapping(dm),\n      );\n      return selectedDomain && selectedDomain.spec?.ref?.name !== serviceName\n        ? selectedDomain\n        : null;\n    })\n    .filter((d) => !!d);\n","import { observable, makeObservable } from 'mobx';\nimport {\n  K8sResourceKind,\n  K8sResourceKindReference,\n  referenceFor,\n} from '@console/internal/module/k8s';\nimport { OdcNodeModel } from '../topology-types';\n//\n// Import from @patternfly/react-topology when updated to a branch containing https://github.com/patternfly/patternfly-react/pull/7573\n//\nimport BaseNode from './BaseNode';\n\nclass OdcBaseNode extends BaseNode {\n  public resource?: K8sResourceKind | undefined = undefined;\n\n  public resourceKind?: K8sResourceKindReference | undefined = undefined;\n\n  constructor() {\n    super();\n\n    makeObservable(this, {\n      resource: observable.ref,\n      resourceKind: observable,\n    });\n  }\n\n  getResource(): K8sResourceKind | undefined {\n    return this.resource;\n  }\n\n  setResource(resource: K8sResourceKind | undefined): void {\n    this.resource = resource;\n  }\n\n  getResourceKind(): K8sResourceKindReference | undefined {\n    return this.resourceKind || referenceFor(this.resource);\n  }\n\n  setResourceKind(kind: K8sResourceKindReference | undefined): void {\n    this.resourceKind = kind;\n  }\n\n  setModel(model: OdcNodeModel): void {\n    super.setModel(model);\n\n    if ('resource' in model) {\n      this.resource = model.resource;\n    }\n    if ('resourceKind' in model) {\n      this.resourceKind = model.resourceKind;\n    }\n  }\n}\n\nexport default OdcBaseNode;\n","import * as GitUrlParse from 'git-url-parse';\nimport { TFunction } from 'i18next';\nimport { Base64 } from 'js-base64';\nimport * as _ from 'lodash';\nimport * as yup from 'yup';\nimport { gitUrlRegex } from '@console/dev-console/src/components/import/validation-schema';\nimport { bitBucketUserNameRegex } from '@console/dev-console/src/utils/yup-validation-util';\nimport {\n  k8sCreateResource,\n  k8sGetResource,\n  k8sListResourceItems,\n  k8sPatchResource,\n} from '@console/dynamic-plugin-sdk/src/utils/k8s';\nimport { getGitService, GitProvider } from '@console/git-service/src';\nimport { SecretType } from '@console/internal/components/secrets/create-secret';\nimport { ConfigMapModel, SecretModel } from '@console/internal/models';\nimport { ConfigMapKind, SecretKind, K8sResourceKind } from '@console/internal/module/k8s';\nimport { nameRegex } from '@console/shared/src';\nimport { RepositoryModel } from '../../models';\nimport { PipelineType } from '../import/import-types';\nimport { PAC_TEMPLATE_DEFAULT } from '../pac/const';\nimport { PIPELINERUN_TEMPLATE_NAMESPACE } from '../pipelines/const';\nimport { RepositoryRuntimes, gitProviderTypesHosts } from './consts';\nimport { RepositoryFormValues } from './types';\n\nexport const dryRunOpt = { dryRun: 'All' };\n\nexport const repositoryValidationSchema = (t: TFunction) =>\n  yup.object().shape({\n    name: yup\n      .string()\n      .matches(nameRegex, {\n        message: t(\n          'pipelines-plugin~Name must consist of lower-case letters, numbers and hyphens. It must start with a letter and end with a letter or number.',\n        ),\n        excludeEmptyString: true,\n      })\n      .required(t('pipelines-plugin~Required')),\n    gitUrl: yup\n      .string()\n      .matches(gitUrlRegex, t('pipelines-plugin~Invalid Git URL.'))\n      .required(t('pipelines-plugin~Required')),\n    accessToken: yup.string(),\n    webhook: yup\n      .object()\n      .when('gitProvider', {\n        is: GitProvider.BITBUCKET,\n        then: yup.object().shape({\n          user: yup\n            .string()\n            .matches(bitBucketUserNameRegex, {\n              message: t(\n                'pipelines-plugin~Name must consist of lower-case letters, numbers, underscores and hyphens. It must start with a letter and end with a letter or number.',\n              ),\n              excludeEmptyString: true,\n            })\n            .required(t('pipelines-plugin~Required')),\n        }),\n      })\n      .when(['method', 'gitProvider', 'gitUrl'], {\n        is: (method, gitProvider, gitUrl) =>\n          gitUrl && !(gitProvider === GitProvider.GITHUB && method === GitProvider.GITHUB),\n        then: yup.object().shape({\n          token: yup.string().test('oneOfRequired', 'Required', function () {\n            return this.parent.token || this.parent.secretRef;\n          }),\n          secretRef: yup.string().test('oneOfRequired', 'Required', function () {\n            return this.parent.token || this.parent.secretRef;\n          }),\n        }),\n      }),\n  });\n\nexport const pipelinesAccessTokenValidationSchema = (t: TFunction) =>\n  yup.object().shape({\n    webhook: yup\n      .object()\n      .when('gitProvider', {\n        is: GitProvider.BITBUCKET,\n        then: yup.object().shape({\n          user: yup\n            .string()\n            .matches(nameRegex, {\n              message: t(\n                'pipelines-plugin~Name must consist of lower-case letters, numbers and hyphens. It must start with a letter and end with a letter or number.',\n              ),\n              excludeEmptyString: true,\n            })\n            .required(t('pipelines-plugin~Required')),\n        }),\n      })\n      .when(['method', 'gitProvider', 'gitUrl'], {\n        is: (method, gitProvider, gitUrl) =>\n          gitUrl &&\n          gitProvider &&\n          !(gitProvider === GitProvider.GITHUB && method === GitProvider.GITHUB),\n        then: yup.object().shape({\n          token: yup.string().test('oneOfRequired', 'Required', function () {\n            return this.parent.token || this.parent.secretRef;\n          }),\n          secretRef: yup.string().test('oneOfRequired', 'Required', function () {\n            return this.parent.token || this.parent.secretRef;\n          }),\n        }),\n      }),\n  });\n\nexport const importFlowRepositoryValidationSchema = (t: TFunction) => {\n  return yup.object().shape({\n    repository: yup.object().when(['pipelineType', 'pipelineEnabled'], {\n      is: (pipelineType, pipelineEnabled) => pipelineType === PipelineType.PAC && pipelineEnabled,\n      then: pipelinesAccessTokenValidationSchema(t),\n    }),\n  });\n};\n\nconst hasDomain = (url: string, domain: string): boolean => {\n  return (\n    url.startsWith(`https://${domain}/`) ||\n    url.startsWith(`https://www.${domain}/`) ||\n    url.includes(`@${domain}:`)\n  );\n};\n\nexport const detectGitType = (url: string): GitProvider => {\n  if (!gitUrlRegex.test(url)) {\n    // Not a URL\n    return GitProvider.INVALID;\n  }\n  if (hasDomain(url, 'github.com')) {\n    return GitProvider.GITHUB;\n  }\n  if (hasDomain(url, 'bitbucket.org')) {\n    return GitProvider.BITBUCKET;\n  }\n  if (hasDomain(url, 'gitlab.com')) {\n    return GitProvider.GITLAB;\n  }\n  // Not a known URL\n  return GitProvider.UNSURE;\n};\n\nconst createTokenSecret = async (\n  repositoryName: string,\n  user: string,\n  token: string,\n  namespace: string,\n  detectedGitType: GitProvider,\n  webhookSecret?: string,\n  dryRun?: boolean,\n) => {\n  const data: SecretKind = {\n    apiVersion: SecretModel.apiVersion,\n    kind: SecretModel.kind,\n    metadata: {\n      generateName: `${repositoryName}-token-`,\n      namespace,\n    },\n    type: SecretType.opaque,\n    stringData: {\n      'provider.token': token,\n      ...(webhookSecret && { 'webhook.secret': webhookSecret }),\n      ...(detectedGitType === GitProvider.BITBUCKET && {\n        'webhook.auth': Base64.encode(`${user}:${token}`),\n      }),\n    },\n  };\n\n  return k8sCreateResource({\n    model: SecretModel,\n    data,\n    ns: namespace,\n    queryParams: dryRun ? dryRunOpt : {},\n  });\n};\n\nexport const createRepositoryResources = async (\n  values: RepositoryFormValues,\n  namespace: string,\n  labels: { [key: string]: string } = {},\n  dryRun?: boolean,\n): Promise<K8sResourceKind> => {\n  const {\n    name,\n    gitUrl,\n    webhook: { secretObj, method, token, secret: webhookSecret, user },\n  } = values;\n  const encodedSecret = Base64.encode(webhookSecret);\n  const detectedGitType = detectGitType(gitUrl);\n  let secret: SecretKind;\n  if (token && method === 'token') {\n    secret = await createTokenSecret(\n      name,\n      user,\n      token,\n      namespace,\n      detectedGitType,\n      webhookSecret,\n      dryRun,\n    );\n  } else if (\n    method === 'secret' &&\n    secretObj &&\n    secretObj?.data?.['webhook.secret'] !== encodedSecret\n  ) {\n    await k8sPatchResource({\n      model: SecretModel,\n      resource: secretObj,\n      data: [{ op: 'replace', path: `/data/webhook.secret`, value: Base64.encode(webhookSecret) }],\n    });\n  }\n  const gitHost = GitUrlParse(gitUrl).source;\n  const secretRef = secret || secretObj;\n  const data = {\n    kind: RepositoryModel.kind,\n    apiVersion: 'pipelinesascode.tekton.dev/v1alpha1',\n    metadata: {\n      name,\n      namespace,\n      ...(labels || {}),\n    },\n    spec: {\n      url: gitUrl,\n      ...(secretRef || gitHost !== 'github.com'\n        ? {\n            // eslint-disable-next-line @typescript-eslint/naming-convention\n            git_provider: {\n              ...(!gitProviderTypesHosts.includes(gitHost) ? { url: gitHost } : {}),\n              ...(gitHost === 'bitbucket.org'\n                ? {\n                    user,\n                  }\n                : {}),\n              ...(secretRef\n                ? {\n                    secret: {\n                      name: secretRef?.metadata?.name,\n                      key: 'provider.token',\n                    },\n                    // eslint-disable-next-line @typescript-eslint/naming-convention\n                    webhook_secret: {\n                      name: secretRef?.metadata?.name,\n                      key: 'webhook.secret',\n                    },\n                  }\n                : {}),\n            },\n          }\n        : {}),\n    },\n  };\n\n  const resource = await k8sCreateResource({\n    model: RepositoryModel,\n    data,\n    ns: namespace,\n    queryParams: dryRun ? dryRunOpt : {},\n  });\n\n  return resource;\n};\n\nexport const createRemoteWebhook = async (\n  values: RepositoryFormValues,\n  pac: ConfigMapKind,\n  loaded: boolean,\n): Promise<boolean> => {\n  const {\n    gitUrl,\n    webhook: { method, token, secret: webhookSecret, url: webhookURL, secretObj, user },\n  } = values;\n  const detectedGitType = detectGitType(gitUrl);\n  const gitService = getGitService(gitUrl, detectedGitType);\n\n  let sslVerification = true;\n  if (loaded && pac?.data?.['webhook-ssl-verification'] === 'false') {\n    sslVerification = false;\n  }\n\n  let authToken: string;\n  if (detectedGitType === GitProvider.BITBUCKET) {\n    authToken =\n      method === 'token'\n        ? Base64.encode(`${user}:${token}`)\n        : Base64.decode(secretObj?.data?.['webhook.auth']);\n  } else {\n    authToken = method === 'token' ? token : Base64.decode(secretObj?.data?.['provider.token']);\n  }\n\n  const webhookCreationStatus = await gitService.createRepoWebhook(\n    authToken,\n    webhookURL,\n    sslVerification,\n    webhookSecret,\n  );\n\n  return webhookCreationStatus;\n};\n\nexport const createRepositoryName = (nameString: string): string => {\n  if (nameRegex.test(nameString)) {\n    return `git-${nameString}`;\n  }\n  return `git-${_.kebabCase(nameString)}`;\n};\n\nexport const recommendRepositoryName = (url: string): string | undefined => {\n  if (!gitUrlRegex.test(url)) {\n    return undefined;\n  }\n  const name = url.replace(/\\/$/, '').split('/').pop();\n  return createRepositoryName(name);\n};\n\nexport const getFallbackTemplate = (repoName: string): string => `apiVersion: tekton.dev/v1beta1\nkind: PipelineRun\nmetadata:\n  name: ${repoName ?? 'pull_request'}\n  annotations:\n    # The event we are targeting as seen from the webhook payload\n    # this can be an array too, i.e: [pull_request, push]\n    pipelinesascode.tekton.dev/on-event: \"[pull_request, push]\"\n\n    # The branch or tag we are targeting (ie: main, refs/tags/*)\n    pipelinesascode.tekton.dev/on-target-branch: \"main\"\n\n    # Fetch the git-clone task from hub, we are able to reference later on it\n    # with taskRef and it will automatically be embedded into our pipeline.\n    pipelinesascode.tekton.dev/task: \"git-clone\"\n\n    # You can add more tasks in here to reuse, browse the one you like from here\n    # https://hub.tekton.dev/\n    # example:\n    # pipelinesascode.tekton.dev/task-2: \"[maven, buildah]\"\n\n    # How many runs we want to keep attached to this event\n    pipelinesascode.tekton.dev/max-keep-runs: \"5\"\nspec:\n  params:\n    # The variable with brackets are special to Pipelines as Code\n    # They will automatically be expanded with the events from Github.\n    - name: repo_url\n      value: \"{{ repo_url }}\"\n    - name: revision\n      value: \"{{ revision }}\"\n  pipelineSpec:\n    params:\n      - name: repo_url\n      - name: revision\n    workspaces:\n      - name: source\n      - name: basic-auth\n    tasks:\n      - name: fetch-repository\n        taskRef:\n          name: git-clone\n        workspaces:\n          - name: output\n            workspace: source\n          - name: basic-auth\n            workspace: basic-auth\n        params:\n          - name: url\n            value: $(params.repo_url)\n          - name: revision\n            value: $(params.revision)\n\n      # Customize this task if you like, or just do a taskRef\n      # to one of the hub task.\n      - name: noop-task\n        runAfter:\n          - fetch-repository\n        workspaces:\n          - name: source\n            workspace: source\n        taskSpec:\n          workspaces:\n            - name: source\n          steps:\n            - name: noop-task\n              image: registry.access.redhat.com/ubi9/ubi-micro\n              workingDir: $(workspaces.source.path)\n              script: |\n                exit 0\n  workspaces:\n  - name: source\n    volumeClaimTemplate:\n      spec:\n        accessModes:\n          - ReadWriteOnce\n        resources:\n          requests:\n            storage: 1Gi\n  # This workspace will inject secret to help the git-clone task to be able to\n  # checkout the private repositories\n  - name: basic-auth\n    secret:\n      secretName: \"{{ git_auth_secret }}\"`;\n\nexport const getPipelineRunDefaultTemplate = async (repoName: string): Promise<string> => {\n  let pipelineRunTemplate = getFallbackTemplate(repoName);\n  try {\n    const template = await k8sGetResource<ConfigMapKind>({\n      model: ConfigMapModel,\n      ns: PIPELINERUN_TEMPLATE_NAMESPACE,\n      name: PAC_TEMPLATE_DEFAULT,\n    });\n    if (template?.data?.template) {\n      pipelineRunTemplate = template.data.template;\n    }\n  } catch (e) {\n    console.log('failed to fetch default template:', e); // eslint-disable-line no-console\n  }\n\n  return pipelineRunTemplate;\n};\n\nexport const getPipelineRunTemplate = async (\n  runtime: string,\n  repoName: string,\n): Promise<string> => {\n  let runTimeTemplate;\n  try {\n    const [pipelineRunTemplateCfg] = await k8sListResourceItems<ConfigMapKind>({\n      model: ConfigMapModel,\n      queryParams: {\n        ns: PIPELINERUN_TEMPLATE_NAMESPACE,\n        labelSelector: {\n          matchLabels: {\n            'pipelinesascode.openshift.io/runtime': RepositoryRuntimes[runtime] || runtime,\n          },\n        },\n      },\n    });\n    runTimeTemplate = pipelineRunTemplateCfg?.data?.template;\n  } catch (e) {\n    console.log('failed to fetch runtime template:', e); // eslint-disable-line no-console\n  }\n  const pipelineRunTemplate = runTimeTemplate ?? (await getPipelineRunDefaultTemplate(repoName));\n  return pipelineRunTemplate;\n};\n","import { TFunction } from 'i18next';\nimport * as yup from 'yup';\n\nconst pathRegex = /^\\/.*$/;\n\nexport const MAX_INT32 = 2147483647;\n\nexport const healthChecksValidationSchema = (t: TFunction) =>\n  yup.object().shape({\n    containerName: yup.string(),\n    showForm: yup.boolean(),\n    enabled: yup.boolean(),\n    modified: yup.boolean(),\n    data: yup.object().when('showForm', {\n      is: true,\n      then: yup.object().shape({\n        periodSeconds: yup\n          .number()\n          .integer(t('devconsole~Value must be an integer.'))\n          .min(1, t('devconsole~Period must be greater than or equal to 1.'))\n          .max(MAX_INT32, t('devconsole~Value is larger than maximum value allowed.')),\n        initialDelaySeconds: yup\n          .number()\n          .integer(t('devconsole~Value must be an integer.'))\n          .min(0, t('devconsole~Initial delay must be greater than or equal to 0.'))\n          .max(MAX_INT32, t('devconsole~Value is larger than maximum value allowed.')),\n        failureThreshold: yup\n          .number()\n          .integer(t('devconsole~Value must be an integer.'))\n          .min(1, t('devconsole~Failure threshold must be greater than or equal to 1.')),\n        timeoutSeconds: yup\n          .number()\n          .integer(t('devconsole~Value must be an integer.'))\n          .min(1, t('devconsole~Timeout must be greater than or equal to 1.'))\n          .max(MAX_INT32, t('devconsole~Value is larger than maximum value allowed.')),\n        successThreshold: yup\n          .number()\n          .integer(t('devconsole~Value must be an integer.'))\n          .min(1, t('devconsole~Success threshold must be greater than or equal to 1.'))\n          .max(MAX_INT32, t('devconsole~Value is larger than maximum value allowed.')),\n        requestType: yup.string(),\n        httpGet: yup.object().when('requestType', {\n          is: 'httpGet',\n          then: yup.object({\n            path: yup.string().matches(pathRegex, {\n              message: t('devconsole~Path must start with /.'),\n              excludeEmptyString: true,\n            }),\n            port: yup.number().required(t('devconsole~Required')),\n          }),\n        }),\n        tcpSocket: yup.object().when('requestType', {\n          is: 'tcpSocket',\n          then: yup.object({\n            port: yup.number().required(t('devconsole~Required')),\n          }),\n        }),\n        exec: yup.object().when('requestType', {\n          is: 'command',\n          then: yup.object({\n            command: yup.array().of(yup.string().required(t('devconsole~Required'))),\n          }),\n        }),\n      }),\n    }),\n  });\n\nexport const healthChecksProbesValidationSchema = (t: TFunction) =>\n  yup.object().shape({\n    readinessProbe: healthChecksValidationSchema(t),\n    livenessProbe: healthChecksValidationSchema(t),\n    startupProbe: healthChecksValidationSchema(t),\n  });\n","export const PAC_GH_APP_NEW = 'https://github.com/settings/apps/new';\nexport const PAC_GH_APP_DOC =\n  'https://docs.github.com/en/developers/apps/getting-started-with-apps/about-apps#about-github-apps';\nexport const PAC_GH_APP_MANIFEST_API = 'https://api.github.com/app-manifests';\nexport const EVENT_LISTNER_NAME = 'pipelines-as-code-interceptor';\nexport const PAC_SECRET_NAME = 'pipelines-as-code-secret';\nexport const PAC_GH_APP_NAME = 'pipelines-ci-clustername';\nexport const PAC_INFO = 'pipelines-as-code-info';\nexport const PAC_TEMPLATE_DEFAULT = 'pipelines-as-code-pipelinerun-generic';\n","import { TopologyQuadrant } from '@patternfly/react-topology';\nimport { WatchK8sResources } from '@console/dynamic-plugin-sdk';\nimport { CodeRef } from '@console/dynamic-plugin-sdk/src/types';\nimport { Extension } from '@console/plugin-sdk/src/typings/base';\nimport {\n  TopologyApplyDisplayOptions,\n  TopologyDataModelDepicted,\n  TopologyDataModelGetter,\n  TopologyDisplayOption,\n  CreateConnectionGetter,\n  ViewComponentFactory,\n  TopologyDataModelReconciler,\n  TopologyDecoratorGetter,\n} from '../topology-types';\n\nnamespace ExtensionProperties {\n  export interface TopologyComponentFactory {\n    /** Getter for a ViewComponentFactory */\n    getFactory: CodeRef<ViewComponentFactory>;\n  }\n\n  export interface TopologyDataModelFactory {\n    /** Unique ID for the factory. */\n    id: string;\n    /** Priority for the factory */\n    priority: number;\n    /** Resources to be fetched from useK8sWatchResources hook. */\n    resources?: (namespace: string) => WatchK8sResources<any>;\n    /** Keys in resources containing workloads. */\n    workloadKeys?: string[];\n    /** Getter for the data model factory */\n    getDataModel?: CodeRef<TopologyDataModelGetter>;\n    /** Getter for function to determine if a resource is depicted by this model factory */\n    isResourceDepicted?: CodeRef<TopologyDataModelDepicted>;\n    /** Getter for function to reconcile data model after all extensions' models have loaded */\n    getDataModelReconciler?: CodeRef<TopologyDataModelReconciler>;\n  }\n\n  export interface TopologyCreateConnector {\n    /** Getter for the create connector function */\n    getCreateConnector: CodeRef<CreateConnectionGetter>;\n  }\n\n  export interface TopologyDisplayFilters {\n    // Getter for topology filters specific to the extension\n    getTopologyFilters: CodeRef<() => TopologyDisplayOption[]>;\n    // Function to apply filters to the model\n    applyDisplayOptions: CodeRef<TopologyApplyDisplayOptions>;\n  }\n\n  export interface TopologyDecoratorProvider {\n    id: string;\n    priority: number;\n    quadrant: TopologyQuadrant;\n    decorator: CodeRef<TopologyDecoratorGetter>;\n  }\n}\n\nexport interface TopologyComponentFactory\n  extends Extension<ExtensionProperties.TopologyComponentFactory> {\n  type: 'Topology/ComponentFactory';\n}\n\nexport interface TopologyDataModelFactory\n  extends Extension<ExtensionProperties.TopologyDataModelFactory> {\n  type: 'Topology/DataModelFactory';\n}\n\nexport interface TopologyCreateConnector\n  extends Extension<ExtensionProperties.TopologyCreateConnector> {\n  type: 'Topology/CreateConnector';\n}\n\nexport interface TopologyDisplayFilters\n  extends Extension<ExtensionProperties.TopologyDisplayFilters> {\n  type: 'Topology/DisplayFilters';\n}\n\nexport interface TopologyDecoratorProvider\n  extends Extension<ExtensionProperties.TopologyDecoratorProvider> {\n  type: 'Topology/Decorator';\n}\n\nexport const isTopologyComponentFactory = (e: Extension): e is TopologyComponentFactory => {\n  return e.type === 'Topology/ComponentFactory';\n};\n\nexport const isTopologyDataModelFactory = (e: Extension): e is TopologyDataModelFactory => {\n  return e.type === 'Topology/DataModelFactory';\n};\n\nexport const isTopologyCreateConnector = (e: Extension): e is TopologyCreateConnector => {\n  return e.type === 'Topology/CreateConnector';\n};\n\nexport const isTopologyDisplayFilters = (e: Extension): e is TopologyDisplayFilters => {\n  return e.type === 'Topology/DisplayFilters';\n};\n\nexport const isTopologyDecoratorProvider = (e: Extension): e is TopologyDecoratorProvider => {\n  return e.type === 'Topology/Decorator';\n};\n","import { GROUP_HEIGHT, GROUP_PADDING, GROUP_WIDTH } from '../../const';\n\nexport const TYPE_OPERATOR_BACKED_SERVICE = 'operator-backed-service';\n\nexport const OPERATOR_GROUP_WIDTH = GROUP_WIDTH;\nexport const OPERATOR_GROUP_HEIGHT = GROUP_HEIGHT;\nexport const OPERATOR_GROUP_PADDING = GROUP_PADDING;\n","import * as _ from 'lodash';\nimport { safeYAMLToJS } from '@console/shared/src/utils/yaml';\nimport { BaseService } from '../services/base-service';\n\ntype FuncData = {\n  values: {\n    builder?: string;\n    runtime?: string;\n    builderEnvs?: string[];\n    runtimeEnvs?: string[];\n  };\n};\n\nexport const evaluateFunc = async (gitService: BaseService): Promise<FuncData> => {\n  const isFuncYamlPresent = await gitService.isFuncYamlPresent();\n\n  if (!isFuncYamlPresent) {\n    return {\n      values: {},\n    };\n  }\n\n  const resourceContent = await gitService.getFuncYamlContent();\n\n  try {\n    const funcJSON = !_.isString(resourceContent) ? resourceContent : safeYAMLToJS(resourceContent);\n\n    const builder = funcJSON?.build?.builder;\n    const builderEnvs = funcJSON?.build?.buildEnvs;\n    const runtime = funcJSON?.runtime;\n    const runtimeEnvs = funcJSON?.run?.envs;\n    return {\n      values: {\n        builder,\n        runtime,\n        builderEnvs,\n        runtimeEnvs,\n      },\n    };\n  } catch {\n    return {\n      values: {},\n    };\n  }\n};\n\nexport const isServerlessFxRepository = async (\n  isServerlessEnabled: boolean,\n  gitService: BaseService,\n): Promise<boolean> => {\n  const isFuncYamlPresent = await gitService.isFuncYamlPresent();\n\n  if (isFuncYamlPresent && isServerlessEnabled) {\n    const content = await gitService.getFuncYamlContent();\n    const funcJSON = safeYAMLToJS(content);\n    if (!funcJSON?.build?.builder || funcJSON?.build?.builder === 's2i') {\n      return true;\n    }\n  }\n  return false;\n};\n","import { createContext } from 'react';\nimport { Model } from '@patternfly/react-topology';\nimport { observable, computed, makeObservable } from 'mobx';\nimport { WatchK8sResources } from '@console/dynamic-plugin-sdk';\nimport { K8sResourceKind } from '@console/internal/module/k8s';\nimport {\n  TopologyDataModelDepicted,\n  TopologyDataModelGetter,\n  TopologyDataModelReconciler,\n  TopologyDataResources,\n} from '../topology-types';\nimport { WORKLOAD_TYPES } from '../utils/topology-utils';\nimport {\n  addToTopologyDataModel,\n  getBaseWatchedResources,\n  getWorkloadResources,\n} from './transform-utils';\n\nexport type ModelExtensionContext = {\n  priority: number;\n  resources?: (namespace: string) => WatchK8sResources<any>;\n  workloadKeys?: string[];\n  dataModelGetter?: TopologyDataModelGetter;\n  dataModelDepicter?: TopologyDataModelDepicted;\n  dataModelReconciler?: TopologyDataModelReconciler;\n};\n\nexport class ExtensibleModel {\n  private extensions: { [id: string]: ModelExtensionContext } = {};\n\n  public namespace: string = undefined;\n\n  public model: Model = { nodes: [], edges: [] };\n\n  public loaded: boolean = false;\n\n  public loadError: string = undefined;\n\n  public extensionsLoaded: boolean = false;\n\n  public watchedResources: WatchK8sResources<any> = {};\n\n  public constructor(namespace?: string) {\n    this.namespace = namespace;\n\n    makeObservable(this, {\n      namespace: observable,\n      model: observable.ref,\n      loaded: observable,\n      loadError: observable,\n      extensionsLoaded: observable,\n      watchedResources: observable.ref,\n      isEmptyModel: computed,\n    });\n  }\n\n  public onExtensionsLoaded: (extensibleModel: ExtensibleModel) => void;\n\n  private updateExtensionsLoaded(): void {\n    const extensionKeys = Object.keys(this.extensions);\n    const prev = this.extensionsLoaded;\n    this.extensionsLoaded =\n      extensionKeys.length > 1 &&\n      extensionKeys.every(\n        (key) =>\n          !!this.extensions[key].dataModelGetter &&\n          !!this.extensions[key].dataModelDepicter &&\n          !!this.extensions[key].dataModelReconciler,\n      );\n    if (!prev && this.extensionsLoaded && this.onExtensionsLoaded) {\n      this.onExtensionsLoaded(this);\n    }\n  }\n\n  public getExtensions(): { [id: string]: ModelExtensionContext } {\n    return this.extensions;\n  }\n\n  public getExtension(id: string): ModelExtensionContext {\n    return this.extensions[id];\n  }\n\n  public get workloadKeys(): string[] {\n    const workloadKeys = [...WORKLOAD_TYPES];\n    Object.keys(this.extensions).forEach((key) => {\n      if (this.extensions[key].workloadKeys) {\n        this.extensions[key].workloadKeys.forEach((workloadKey) => {\n          if (!workloadKeys.includes(workloadKey)) {\n            workloadKeys.push(workloadKey);\n          }\n        });\n      }\n    });\n    return workloadKeys;\n  }\n\n  public updateWatchedResources = (): void => {\n    const extensionKeys = Object.keys(this.extensions);\n    this.watchedResources = extensionKeys.reduce((acc, key) => {\n      if (this.extensions[key].resources) {\n        const resList = this.extensions[key].resources(this.namespace);\n        Object.keys(resList).forEach((resKey) => {\n          if (!acc[resKey]) {\n            acc[resKey] = resList[resKey];\n          }\n        });\n      }\n      return acc;\n    }, getBaseWatchedResources(this.namespace));\n  };\n\n  public updateExtension = (id: string, extension: ModelExtensionContext): void => {\n    this.extensions[id] = { ...(this.extensions[id] || {}), ...extension };\n    this.updateExtensionsLoaded();\n    this.updateWatchedResources();\n  };\n\n  public getWorkloadResources = (resources: TopologyDataResources): K8sResourceKind[] => {\n    const resList = this.watchedResources;\n    const kindsMap = Object.keys(resList).reduce((acc, key) => {\n      acc[key] = resList[key].kind;\n      return acc;\n    }, {});\n    return getWorkloadResources(resources, kindsMap, this.workloadKeys);\n  };\n\n  public get prioritizedKeys(): string[] {\n    return Object.keys(this.extensions).sort(\n      (k1, k2) => this.extensions[k1].priority - this.extensions[k2].priority,\n    );\n  }\n\n  public get dataModelGetters(): TopologyDataModelGetter[] {\n    return this.prioritizedKeys.reduce((acc, key) => {\n      if (this.extensions[key].dataModelGetter) {\n        acc.push(this.extensions[key].dataModelGetter);\n      }\n      return acc;\n    }, []);\n  }\n\n  public get dataModelDepicters(): TopologyDataModelDepicted[] {\n    return this.prioritizedKeys.reduce((acc, key) => {\n      if (this.extensions[key].dataModelDepicter) {\n        acc.push(this.extensions[key].dataModelDepicter);\n      }\n      return acc;\n    }, []);\n  }\n\n  public get dataModelReconcilers(): TopologyDataModelReconciler[] {\n    return this.prioritizedKeys.reduce((acc, key) => {\n      if (this.extensions[key].dataModelReconciler) {\n        acc.push(this.extensions[key].dataModelReconciler);\n      }\n      return acc;\n    }, []);\n  }\n\n  public get isEmptyModel(): boolean {\n    return (this.model?.nodes?.length ?? 0) === 0;\n  }\n\n  public getExtensionModels = async (resources: TopologyDataResources): Promise<Model> => {\n    const topologyModel: Model = {\n      nodes: [],\n      edges: [],\n    };\n    const getters = this.dataModelGetters;\n\n    if (!getters?.length) {\n      return Promise.resolve(topologyModel);\n    }\n\n    const depicters = this.dataModelDepicters;\n    const workloadResources = this.getWorkloadResources(resources);\n    const promises = getters.map((getter) => {\n      try {\n        return getter(this.namespace, resources, workloadResources);\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.error('Unable to add some resources to topology', e);\n        return null;\n      }\n    });\n\n    await Promise.all(promises).then((models) => {\n      models.forEach((model) => {\n        if (model) {\n          try {\n            addToTopologyDataModel(model, topologyModel, depicters);\n          } catch (e) {\n            // eslint-disable-next-line no-console\n            console.error('Unable to add some resources to topology', e);\n          }\n        }\n      });\n    });\n\n    return Promise.resolve(topologyModel);\n  };\n\n  public reconcileModel = (model: Model, resources: TopologyDataResources): void => {\n    this.dataModelReconcilers.forEach((reconciler) => {\n      try {\n        reconciler(model, resources);\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.error('Unable to reconcile some resources in topology', e);\n      }\n    });\n  };\n}\n\nexport const ModelContext = createContext<ExtensibleModel>(null);\n","//\n// Copied from @patternfly/react-topology with fixes for https://github.com/patternfly/patternfly-react/issues/7572\n// Remove when updated to a branch containing https://github.com/patternfly/patternfly-react/pull/7573\n//\nimport {\n  Node,\n  Anchor,\n  NodeModel,\n  ModelKind,\n  isNode,\n  isEdge,\n  AnchorEnd,\n  NodeStyle,\n  NodeShape,\n  Edge,\n  GraphElement,\n  NODE_COLLAPSE_CHANGE_EVENT,\n  NODE_POSITIONED_EVENT,\n  NodeStatus,\n  LabelPosition,\n  CenterAnchor,\n  Rect,\n  Translatable,\n  BaseElement,\n  Dimensions,\n  Point,\n} from '@patternfly/react-topology';\nimport { observable, action, computed, makeObservable } from 'mobx';\n\nconst createAnchorKey = (end: AnchorEnd = AnchorEnd.both, type: string = ''): string =>\n  `${end}:${type}`;\n\nclass BaseNode<E extends NodeModel = NodeModel, D = any> extends BaseElement<E, D>\n  implements Node<E, D> {\n  private anchors: { [type: string]: Anchor } = {\n    [createAnchorKey()]: new CenterAnchor(this),\n  };\n\n  private dimensions = new Dimensions();\n\n  private dimensionsInitialized = false;\n\n  private positioned = false;\n\n  private uncollapsedCenter: Point = null;\n\n  private position = new Point();\n\n  private get nodes(): Node[] {\n    if (this.isCollapsed()) {\n      return [];\n    }\n\n    return this.getChildren().filter(isNode);\n  }\n\n  private group = false;\n\n  private collapsed = false;\n\n  private labelPosition = LabelPosition.bottom;\n\n  private shape: NodeShape | undefined = undefined;\n\n  private status: NodeStatus | undefined = undefined;\n\n  constructor() {\n    super();\n\n    makeObservable<\n      BaseElement,\n      | 'anchors'\n      | 'dimensions'\n      | 'dimensionsInitialized'\n      | 'position'\n      | 'nodes'\n      | 'group'\n      | 'collapsed'\n      | 'labelPosition'\n      | 'shape'\n      | 'status'\n      | 'groupBounds'\n      | 'sourceEdges'\n      | 'targetEdges'\n      | 'setDimensions'\n      | 'setBounds'\n      | 'setPosition'\n    >(this, {\n      anchors: observable.shallow,\n      dimensions: observable.ref,\n      dimensionsInitialized: observable,\n      position: observable.ref,\n      nodes: computed,\n      group: observable,\n      collapsed: observable,\n      labelPosition: observable,\n      shape: observable,\n      status: observable,\n      groupBounds: computed,\n      sourceEdges: computed,\n      targetEdges: computed,\n      setDimensions: action,\n      setBounds: action,\n      setPosition: action,\n    });\n  }\n\n  private get groupBounds(): Rect {\n    const children = this.getChildren()\n      .filter(isNode)\n      .filter((n) => n.isVisible());\n    if (!children.length) {\n      return this.getInternalBounds();\n    }\n\n    let rect: Rect | undefined;\n    children.forEach((c) => {\n      if (isNode(c)) {\n        const { padding } = c.getStyle<NodeStyle>();\n        const b = c.getBounds();\n        // Currently non-group nodes do not include their padding in the bounds\n        if (!c.isGroup() && padding) {\n          b.padding(c.getStyle<NodeStyle>().padding);\n        }\n        if (!rect) {\n          rect = b.clone();\n        } else {\n          rect.union(b);\n        }\n      }\n    });\n\n    if (!rect) {\n      rect = new Rect();\n    }\n\n    const { padding } = this.getStyle<NodeStyle>();\n\n    return rect.padding(padding);\n  }\n\n  private get sourceEdges(): Edge[] {\n    return this.getGraph()\n      .getEdges()\n      .filter((e) => e.getSource() === this);\n  }\n\n  private get targetEdges(): Edge[] {\n    return this.getGraph()\n      .getEdges()\n      .filter((e) => e.getTarget() === this);\n  }\n\n  getChildren(): GraphElement[] {\n    if (this.isCollapsed()) {\n      return super.getChildren().filter(isEdge);\n    }\n    return super.getChildren();\n  }\n\n  // Return all child leaf nodes regardless of collapse status or child groups' collapsed status\n  getAllNodeChildren(): Node[] {\n    return super.getChildren().reduce((total, nexChild) => {\n      if (isNode(nexChild)) {\n        total.push(nexChild.isGroup() ? nexChild.getAllNodeChildren() : nexChild);\n      }\n      return total;\n    }, []);\n  }\n\n  getKind(): ModelKind {\n    return ModelKind.node;\n  }\n\n  private getInternalBounds(): Rect {\n    const { position, dimensions } = this;\n    return new Rect(position.x, position.y, dimensions.width, dimensions.height);\n  }\n\n  getBounds(): Rect {\n    return this.group && !this.collapsed ? this.groupBounds : this.getInternalBounds();\n  }\n\n  setBounds(bounds: Rect): void {\n    const { width, height } = this.dimensions;\n    if (bounds.width !== width || bounds.height !== height) {\n      this.dimensions = new Dimensions(bounds.width, bounds.height);\n    }\n    const { x, y } = this.position;\n    if (bounds.x !== x || bounds.y !== y) {\n      this.setPosition(new Point(bounds.x, bounds.y));\n    }\n  }\n\n  getPosition(): Point {\n    if (this.isGroup() && this.getChildren().length && !this.collapsed) {\n      return this.getBounds().getCenter();\n    }\n    return this.position;\n  }\n\n  updateChildrenPositions(point: Point, prevLocation: Point): void {\n    const xOffset = point.x - prevLocation.x;\n    const yOffset = point.y - prevLocation.y;\n    this.getChildren().forEach((child) => {\n      if (isNode(child)) {\n        const node = child as Node;\n        const position = node.getPosition();\n        const newPosition = new Point(position.x + xOffset, position.y + yOffset);\n        node.setPosition(newPosition);\n      }\n    });\n  }\n\n  setPosition(point: Point): void {\n    if (this.isGroup() && this.getChildren().length && !this.collapsed) {\n      const prevLocation = this.getBounds().getCenter();\n      this.updateChildrenPositions(point, prevLocation);\n      return;\n    }\n    this.position = point;\n    this.positioned = true;\n    try {\n      this.getController().fireEvent(NODE_POSITIONED_EVENT, { node: this });\n      // eslint-disable-next-line no-empty\n    } catch (e) {}\n  }\n\n  isPositioned(): boolean {\n    return this.positioned;\n  }\n\n  getDimensions(): Dimensions {\n    return this.dimensions;\n  }\n\n  setDimensions(dimensions: Dimensions): void {\n    this.dimensions = dimensions;\n    this.dimensionsInitialized = true;\n  }\n\n  isDimensionsInitialized(): boolean {\n    if (!this.dimensionsInitialized && this.isGroup()) {\n      const nodes = this.getChildren().filter(isNode);\n      if (nodes.length === 0) {\n        return this.dimensionsInitialized;\n      }\n      const result = nodes.every((c) => c.isDimensionsInitialized());\n      if (result) {\n        this.dimensionsInitialized = true;\n      }\n    }\n    return this.dimensionsInitialized;\n  }\n\n  getAnchor(end?: AnchorEnd, type?: string): Anchor {\n    let anchor = this.anchors[createAnchorKey(end, type)];\n    if (!anchor && type) {\n      anchor = this.anchors[createAnchorKey(end)];\n    }\n    if (!anchor && (end === AnchorEnd.source || end === AnchorEnd.target)) {\n      anchor = this.anchors[createAnchorKey(AnchorEnd.both, type)];\n      if (!anchor && type) {\n        anchor = this.anchors[createAnchorKey(AnchorEnd.both)];\n      }\n    }\n    return anchor;\n  }\n\n  setAnchor(anchor: Anchor, end?: AnchorEnd, type?: string): void {\n    const key = createAnchorKey(end, type);\n    if (anchor) {\n      this.anchors[key] = anchor;\n    } else {\n      delete this.anchors[key];\n    }\n  }\n\n  getNodes(): Node[] {\n    return this.nodes;\n  }\n\n  isGroup(): boolean {\n    return this.group;\n  }\n\n  setGroup(group: boolean): void {\n    this.group = group;\n  }\n\n  isCollapsed(): boolean {\n    return this.collapsed;\n  }\n\n  setCollapsed(collapsed: boolean): void {\n    if (collapsed !== this.collapsed) {\n      // Get the location prior to the collapse change and apply it after the collapse.\n      // This updates the new node(s) location(s) to be what the node was originally, basically\n      // keeping the nodes ln place so the layout doesn't start fresh (putting the new nodes at 0,0\n      // TODO: Update to better position the nodes at a point location rather than relying on the setCenter updating the nodes.\n      const prevCenter = this.getBounds().getCenter();\n      if (!collapsed && this.uncollapsedCenter) {\n        this.updateChildrenPositions(prevCenter, this.uncollapsedCenter);\n        this.uncollapsedCenter = null;\n        this.collapsed = collapsed;\n      } else {\n        this.uncollapsedCenter = collapsed ? prevCenter : null;\n        this.collapsed = collapsed;\n        this.setBounds(this.getBounds().setCenter(prevCenter.x, prevCenter.y));\n      }\n      this.getController().fireEvent(NODE_COLLAPSE_CHANGE_EVENT, { node: this });\n    }\n  }\n\n  getLabelPosition(): LabelPosition {\n    return this.labelPosition;\n  }\n\n  setLabelPosition(position: LabelPosition): void {\n    this.labelPosition = position;\n  }\n\n  getNodeShape(): NodeShape {\n    return this.shape || (this.group ? NodeShape.rect : NodeShape.ellipse);\n  }\n\n  setNodeShape(shape: NodeShape): void {\n    this.shape = shape;\n  }\n\n  getNodeStatus(): NodeStatus {\n    return this.status || NodeStatus.default;\n  }\n\n  setNodeStatus(status: NodeStatus): void {\n    this.status = status;\n  }\n\n  getSourceEdges(): Edge[] {\n    return this.sourceEdges;\n  }\n\n  getTargetEdges(): Edge[] {\n    return this.targetEdges;\n  }\n\n  isVisible(): boolean {\n    return super.isVisible() && this.isDimensionsInitialized();\n  }\n\n  setModel(model: E): void {\n    super.setModel(model);\n\n    let d: Dimensions | undefined;\n    let p: Point | undefined;\n\n    if ('width' in model && model.width != null && model.width !== this.dimensions.width) {\n      if (!d) {\n        d = this.dimensions.clone();\n      }\n      d.width = model.width;\n    }\n    if ('height' in model && model.height != null && model.height !== this.dimensions.height) {\n      if (!d) {\n        d = this.dimensions.clone();\n      }\n      d.height = model.height;\n    }\n    if (d) {\n      this.setDimensions(d);\n    }\n\n    if ('x' in model && model.x != null && model.x !== this.position.x) {\n      if (!p) {\n        p = this.position.clone();\n      }\n      p.x = model.x;\n    }\n    if ('y' in model && model.y != null && model.y !== this.position.y) {\n      if (!p) {\n        p = this.position.clone();\n      }\n      p.y = model.y;\n    }\n    if (p) {\n      this.setPosition(p);\n    }\n\n    if ('group' in model) {\n      this.setGroup(!!model.group);\n    }\n    if ('labelPosition' in model) {\n      this.labelPosition = model.labelPosition;\n    }\n    if ('shape' in model) {\n      this.shape = model.shape;\n    }\n    if ('status' in model) {\n      this.status = model.status;\n    }\n    if ('collapsed' in model) {\n      this.setCollapsed(!!model.collapsed);\n    }\n  }\n\n  toModel(): NodeModel {\n    return {\n      ...super.toModel(),\n      x: this.isPositioned() ? this.getPosition().x : undefined,\n      y: this.isPositioned() ? this.getPosition().y : undefined,\n      width: this.isDimensionsInitialized() ? this.getDimensions().width : undefined,\n      height: this.isDimensionsInitialized() ? this.getDimensions().height : undefined,\n      collapsed: this.isCollapsed(),\n      group: this.isGroup(),\n      labelPosition: this.labelPosition,\n      shape: this.shape,\n      status: this.status,\n    };\n  }\n\n  translateToParent(t: Translatable): void {\n    if (!this.group || this.isCollapsed()) {\n      const { x, y } = this.getPosition();\n      t.translate(x, y);\n    }\n  }\n\n  translateFromParent(t: Translatable): void {\n    if (!this.group || this.isCollapsed()) {\n      const { x, y } = this.getPosition();\n      t.translate(-x, -y);\n    }\n  }\n}\n\nexport default BaseNode;\n","import * as React from 'react';\nimport * as cx from 'classnames';\nimport { NamespaceBar } from '@console/internal/components/namespace-bar';\nimport NamespaceBarApplicationSelector from '@console/topology/src/components/dropdowns/NamespaceBarApplicationSelector';\n\nimport './NamespacedPage.scss';\n\nexport enum NamespacedPageVariants {\n  light = 'light',\n  default = 'default',\n}\n\nexport interface NamespacedPageProps {\n  disabled?: boolean;\n  hideProjects?: boolean;\n  hideApplications?: boolean;\n  onNamespaceChange?: (newNamespace: string) => void;\n  variant?: NamespacedPageVariants;\n  toolbar?: React.ReactNode;\n}\n\nconst NamespacedPage: React.FC<NamespacedPageProps> = ({\n  children,\n  disabled,\n  onNamespaceChange,\n  hideProjects = false,\n  hideApplications = false,\n  variant = NamespacedPageVariants.default,\n  toolbar,\n}) => (\n  <div className=\"odc-namespaced-page\">\n    <NamespaceBar\n      isDisabled={disabled}\n      onNamespaceChange={onNamespaceChange}\n      hideProjects={hideProjects}\n    >\n      {!hideApplications && <NamespaceBarApplicationSelector disabled={disabled} />}\n      {toolbar && <div className=\"odc-namespaced-page__toolbar\">{toolbar}</div>}\n    </NamespaceBar>\n    <div\n      className={cx('odc-namespaced-page__content', {\n        [`is-${variant}`]: variant !== NamespacedPageVariants.default,\n      })}\n    >\n      {children}\n    </div>\n  </div>\n);\n\nexport default NamespacedPage;\n","import * as React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n  isTopologyDataModelFactory as isDynamicTopologyDataModelFactory,\n  TopologyDataModelFactory as DynamicTopologyDataModelFactory,\n} from '@console/dynamic-plugin-sdk';\nimport { Firehose } from '@console/internal/components/utils';\nimport { useExtensions } from '@console/plugin-sdk/src';\nimport { ResourceDropdown } from '@console/shared';\nimport { getNamespacedDynamicModelFactories } from '../../data-transforms/DataModelProvider';\nimport { getBaseWatchedResources } from '../../data-transforms/transform-utils';\nimport { isTopologyDataModelFactory, TopologyDataModelFactory } from '../../extensions';\n\ninterface ApplicationDropdownProps {\n  id?: string;\n  ariaLabel?: string;\n  className?: string;\n  dropDownClassName?: string;\n  menuClassName?: string;\n  buttonClassName?: string;\n  title?: React.ReactNode;\n  titlePrefix?: string;\n  allApplicationsKey?: string;\n  userSettingsPrefix?: string;\n  storageKey?: string;\n  disabled?: boolean;\n  allSelectorItem?: {\n    allSelectorKey?: string;\n    allSelectorTitle?: string;\n  };\n  noneSelectorItem?: {\n    noneSelectorKey?: string;\n    noneSelectorTitle?: string;\n  };\n  namespace?: string;\n  actionItems?: {\n    actionTitle: string;\n    actionKey: string;\n  }[];\n  selectedKey: string;\n  autoSelect?: boolean;\n  onChange?: (key: string, name?: string) => void;\n  onLoad?: (items: { [key: string]: string }) => void;\n}\n\nconst ApplicationDropdown: React.FC<ApplicationDropdownProps> = ({ namespace, ...props }) => {\n  const { t } = useTranslation();\n  const modelFactories = useExtensions<TopologyDataModelFactory>(isTopologyDataModelFactory);\n  const dynamicModelFactories = useExtensions<DynamicTopologyDataModelFactory>(\n    isDynamicTopologyDataModelFactory,\n  );\n\n  const namespacedDynamicFactories = React.useMemo(\n    () => getNamespacedDynamicModelFactories(dynamicModelFactories),\n    [dynamicModelFactories],\n  );\n\n  const resources = React.useMemo(() => {\n    let watchedBaseResources = getBaseWatchedResources(namespace);\n    [...modelFactories, ...namespacedDynamicFactories].forEach((modelFactory) => {\n      const factoryResources = modelFactory.properties.resources?.(namespace);\n      if (factoryResources) {\n        watchedBaseResources = {\n          ...factoryResources,\n          ...watchedBaseResources,\n        };\n      }\n    });\n    return Object.keys(watchedBaseResources).map((key) => ({\n      ...watchedBaseResources[key],\n      prop: key,\n    }));\n  }, [namespacedDynamicFactories, modelFactories, namespace]);\n\n  return (\n    <Firehose resources={resources}>\n      <ResourceDropdown\n        {...props}\n        placeholder={t('topology~Select an application')}\n        dataSelector={['metadata', 'labels', 'app.kubernetes.io/part-of']}\n      />\n    </Firehose>\n  );\n};\n\nexport default ApplicationDropdown;\n","import * as React from 'react';\nimport {\n  ExtensionK8sGroupKindModel,\n  isTopologyDataModelFactory as isDynamicTopologyDataModelFactory,\n  TopologyDataModelFactory as DynamicTopologyDataModelFactory,\n  WatchK8sResource,\n} from '@console/dynamic-plugin-sdk';\nimport {\n  modelForGroupKind,\n  referenceForExtensionModel,\n  referenceForModel,\n} from '@console/internal/module/k8s';\nimport { LoadedExtension, useExtensions } from '@console/plugin-sdk/src';\nimport { isTopologyDataModelFactory, TopologyDataModelFactory } from '../extensions/topology';\nimport DataModelExtension from './DataModelExtension';\nimport { ModelContext, ExtensibleModel } from './ModelContext';\nimport TopologyDataRetriever from './TopologyDataRetriever';\n\ninterface DataModelProviderProps {\n  namespace: string;\n  children?: React.ReactNode;\n}\n\nconst flattenResource = (\n  namespace: string,\n  extension: LoadedExtension<DynamicTopologyDataModelFactory>,\n  resourceKey: string,\n  model?: ExtensionK8sGroupKindModel,\n  opts = {} as Partial<WatchK8sResource>,\n) => {\n  if (!model) {\n    return { namespace, ...opts };\n  }\n\n  if (model.version) {\n    const extensionReference = referenceForExtensionModel(model); // requires model.version\n    return { namespace, kind: extensionReference, ...opts };\n  }\n\n  // If can't find reference for an extention model, fall back to internal reference\n  const internalModel = modelForGroupKind(model.group, model.kind); // Return null for CRDs\n  if (!internalModel) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      `Plugin \"${extension.pluginID}\": Could not find model (CRD) for group \"${model.group}\" and kind \"${model.kind}\" to determinate version. Please add a required flag to the extension to suppress this warning. The resource \"${resourceKey}\" will not be loaded and ignored in the topology view for now:`,\n      extension,\n      resourceKey,\n      model,\n      opts,\n    );\n    return null;\n  }\n  const internalReference = referenceForModel(internalModel);\n  return { namespace, kind: internalReference, ...opts };\n};\n\nexport const getNamespacedDynamicModelFactories = (\n  extensions: LoadedExtension<DynamicTopologyDataModelFactory>[],\n) =>\n  extensions.map((extension) => {\n    return {\n      ...extension,\n      properties: {\n        ...extension.properties,\n        resources: (namespace: string) =>\n          Object.entries(extension.properties.resources || {}).reduce((acc, [key, resource]) => {\n            const flattenedResource = flattenResource(\n              namespace,\n              extension,\n              key,\n              resource?.model,\n              resource?.opts,\n            );\n            if (flattenedResource) {\n              acc[key] = flattenedResource;\n            }\n            return acc;\n          }, {}),\n      },\n    };\n  });\n\nconst DataModelProvider: React.FC<DataModelProviderProps> = ({ namespace, children }) => {\n  const [model, setModel] = React.useState<ExtensibleModel>(new ExtensibleModel(namespace));\n\n  React.useEffect(() => {\n    setModel(new ExtensibleModel(namespace));\n  }, [namespace]);\n\n  const modelFactories = useExtensions<TopologyDataModelFactory>(isTopologyDataModelFactory);\n  const dynamicModelFactories = useExtensions<DynamicTopologyDataModelFactory>(\n    isDynamicTopologyDataModelFactory,\n  );\n\n  const namespacedDynamicFactories = React.useMemo(\n    () => getNamespacedDynamicModelFactories(dynamicModelFactories),\n    [dynamicModelFactories],\n  );\n\n  return (\n    <ModelContext.Provider value={model}>\n      {namespace && (\n        <>\n          {[...namespacedDynamicFactories, ...modelFactories].map((factory) => (\n            <DataModelExtension key={factory.properties.id} dataModelFactory={factory.properties} />\n          ))}\n        </>\n      )}\n      {namespace && <TopologyDataRetriever />}\n      {children}\n    </ModelContext.Provider>\n  );\n};\n\nexport default DataModelProvider;\n","import * as React from 'react';\nimport { useDeepCompareMemoize } from '@console/shared';\nimport { TopologyDataModelFactory } from '../extensions/topology';\nimport { ModelContext, ExtensibleModel, ModelExtensionContext } from './ModelContext';\n\ninterface DataModelExtensionProps {\n  dataModelFactory: TopologyDataModelFactory['properties'];\n}\n\nconst DataModelExtension: React.FC<DataModelExtensionProps> = ({ dataModelFactory }) => {\n  const dataModelContext = React.useContext<ExtensibleModel>(ModelContext);\n  const { id, priority, resources } = dataModelFactory;\n  const workloadKeys = useDeepCompareMemoize(dataModelFactory.workloadKeys);\n  const extensionContext = React.useRef<ModelExtensionContext>({\n    priority,\n    workloadKeys,\n    resources,\n  });\n\n  React.useEffect(() => {\n    const storedContext = dataModelContext.getExtension(id);\n    if (!storedContext) {\n      extensionContext.current = {\n        priority,\n        workloadKeys,\n        resources,\n      };\n      dataModelContext.updateExtension(id, extensionContext.current);\n\n      const { getDataModel, isResourceDepicted, getDataModelReconciler } = dataModelFactory;\n      if (getDataModel) {\n        getDataModel()\n          .then((getter) => {\n            extensionContext.current.dataModelGetter = getter;\n            dataModelContext.updateExtension(id, extensionContext.current);\n          })\n          .catch(() => {\n            extensionContext.current.dataModelGetter = () => Promise.resolve({});\n            dataModelContext.updateExtension(id, extensionContext.current);\n          });\n      } else {\n        extensionContext.current.dataModelGetter = () => Promise.resolve({});\n        dataModelContext.updateExtension(id, extensionContext.current);\n      }\n\n      if (isResourceDepicted) {\n        isResourceDepicted()\n          .then((depicter) => {\n            extensionContext.current.dataModelDepicter = depicter;\n            dataModelContext.updateExtension(id, extensionContext.current);\n          })\n          .catch(() => {\n            extensionContext.current.dataModelDepicter = () => false;\n            dataModelContext.updateExtension(id, extensionContext.current);\n          });\n      } else {\n        extensionContext.current.dataModelDepicter = () => false;\n        dataModelContext.updateExtension(id, extensionContext.current);\n      }\n\n      if (getDataModelReconciler) {\n        getDataModelReconciler()\n          .then((reconciler) => {\n            extensionContext.current.dataModelReconciler = reconciler;\n            dataModelContext.updateExtension(id, extensionContext.current);\n          })\n          .catch(() => {\n            extensionContext.current.dataModelReconciler = () => {};\n            dataModelContext.updateExtension(id, extensionContext.current);\n          });\n      } else {\n        extensionContext.current.dataModelReconciler = () => {};\n        dataModelContext.updateExtension(id, extensionContext.current);\n      }\n    }\n  }, [dataModelContext, dataModelFactory, id, priority, resources, workloadKeys]);\n\n  return null;\n};\n\nexport default DataModelExtension;\n","import * as React from 'react';\nimport { observer } from '@patternfly/react-topology';\nimport * as _ from 'lodash';\nimport { WatchK8sResources, WatchK8sResults } from '@console/dynamic-plugin-sdk';\nimport { useK8sWatchResources } from '@console/internal/components/utils/k8s-watch-hook';\nimport { useDebounceCallback } from '@console/shared';\nimport { TopologyResourcesObject, TrafficData } from '../topology-types';\nimport { ModelContext, ExtensibleModel } from './ModelContext';\nimport { updateTopologyDataModel } from './updateTopologyDataModel';\nimport { useMonitoringAlerts } from './useMonitoringAlerts';\n\ntype TopologyDataRetrieverProps = {\n  trafficData?: TrafficData;\n};\n\nconst TopologyDataRetriever: React.FC<TopologyDataRetrieverProps> = ({ trafficData }) => {\n  const dataModelContext = React.useContext<ExtensibleModel>(ModelContext);\n  const { namespace, extensionsLoaded, watchedResources } = dataModelContext;\n  const [resources, setResources] = React.useState<WatchK8sResults<TopologyResourcesObject>>();\n  const monitoringAlerts = useMonitoringAlerts(namespace);\n  const resourcesList = React.useMemo<WatchK8sResources<any>>(\n    () => (namespace && extensionsLoaded ? watchedResources : {}),\n    [extensionsLoaded, watchedResources, namespace],\n  );\n\n  const debouncedUpdateResources = useDebounceCallback(setResources, 250);\n\n  const updatedResources = useK8sWatchResources<TopologyResourcesObject>(resourcesList);\n  React.useEffect(() => debouncedUpdateResources(updatedResources), [\n    debouncedUpdateResources,\n    updatedResources,\n  ]);\n\n  // Wipe the current model on a namespace change\n  React.useEffect(() => {\n    dataModelContext.model = null;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [namespace]);\n\n  React.useEffect(() => {\n    if (!_.isEmpty(resources)) {\n      updateTopologyDataModel(dataModelContext, resources, trafficData, monitoringAlerts)\n        .then((res) => {\n          dataModelContext.loadError = res.loadError;\n          if (res.loaded) {\n            dataModelContext.loaded = true;\n            dataModelContext.model = res.model;\n          }\n        })\n        .catch(() => {});\n    }\n  }, [resources, trafficData, dataModelContext, monitoringAlerts]);\n\n  return null;\n};\n\nexport default observer(TopologyDataRetriever);\n","import { Model } from '@patternfly/react-topology';\nimport { WatchK8sResults } from '@console/dynamic-plugin-sdk';\nimport { Alerts } from '@console/internal/components/monitoring/types';\nimport { TopologyResourcesObject, TrafficData } from '../topology-types';\nimport { baseDataModelGetter } from './data-transformer';\nimport { ExtensibleModel } from './ModelContext';\n\nexport const updateTopologyDataModel = (\n  dataModelContext: ExtensibleModel,\n  resources: WatchK8sResults<TopologyResourcesObject>,\n  trafficData: TrafficData,\n  monitoringAlerts: Alerts,\n): Promise<{ loaded: boolean; loadError: string; model: Model }> => {\n  const { extensionsLoaded, watchedResources } = dataModelContext;\n  if (!extensionsLoaded || !resources) {\n    return Promise.resolve({ loaded: false, loadError: '', model: null });\n  }\n\n  const getLoadError = (key) => {\n    if (resources[key].loadError && !watchedResources[key].optional) {\n      return resources[key].loadError;\n    }\n    return '';\n  };\n\n  const isLoaded = (key) => {\n    return resources[key].loaded || (resources[key].loadError && watchedResources[key].optional);\n  };\n\n  const loadErrorKey = Object.keys(resources).find((key) => getLoadError(key));\n  if (loadErrorKey) {\n    return Promise.resolve({\n      loaded: false,\n      loadError: resources[loadErrorKey].loadError,\n      model: null,\n    });\n  }\n\n  if (!Object.keys(resources).every((key) => isLoaded(key))) {\n    return Promise.resolve({ loaded: false, loadError: '', model: null });\n  }\n\n  // Get Workload objects from extensions\n  const workloadResources = dataModelContext.getWorkloadResources(resources);\n\n  // Get model from each extension\n  const depicters = dataModelContext.dataModelDepicters;\n  return dataModelContext.getExtensionModels(resources).then((extensionsModel) => {\n    const fullModel = baseDataModelGetter(\n      extensionsModel,\n      dataModelContext.namespace,\n      resources,\n      workloadResources,\n      depicters,\n      trafficData,\n      monitoringAlerts,\n    );\n    dataModelContext.reconcileModel(fullModel, resources);\n    return Promise.resolve({ loaded: true, loadError: '', model: fullModel });\n  });\n};\n","import { EdgeModel, Model } from '@patternfly/react-topology';\nimport { getImageForIconClass } from '@console/internal/components/catalog/catalog-item-icon';\nimport { Alerts } from '@console/internal/components/monitoring/types';\nimport { K8sResourceKind } from '@console/internal/module/k8s';\nimport { createOverviewItemForType } from '@console/shared';\nimport { TYPE_APPLICATION_GROUP, TYPE_TRAFFIC_CONNECTOR, TYPE_WORKLOAD } from '../const';\nimport {\n  TopologyDataResources,\n  TrafficData,\n  KialiNode,\n  TopologyDataModelDepicted,\n} from '../topology-types';\nimport { WORKLOAD_TYPES } from '../utils/topology-utils';\nimport {\n  addToTopologyDataModel,\n  createTopologyNodeData,\n  getTopologyEdgeItems,\n  getTopologyGroupItems,\n  getTopologyNodeItem,\n  mergeGroup,\n  WorkloadModelProps,\n} from './transform-utils';\n\nexport const getFilteredTrafficWorkload = (nodes: KialiNode[]): KialiNode[] =>\n  nodes.filter(({ data }) => data.nodeType === TYPE_WORKLOAD);\n\nexport const getTrafficConnectors = (\n  trafficData: TrafficData,\n  resources: K8sResourceKind[],\n): EdgeModel[] => {\n  const filteredWorkload = getFilteredTrafficWorkload(trafficData.nodes);\n  return trafficData.edges.reduce((acc, { data }) => {\n    const { data: sourceTrafficNode } = filteredWorkload.find(\n      (wrkld) => wrkld.data.id === data.source,\n    );\n    const { data: targetTrafficNode } = filteredWorkload.find(\n      (wrkld) => wrkld.data.id === data.target,\n    );\n    const sourceResourceNode = resources.find((res) => {\n      return res.metadata.name === sourceTrafficNode[sourceTrafficNode.nodeType];\n    });\n    const targetResourceNode = resources.find(\n      (res) => res.metadata.name === targetTrafficNode[targetTrafficNode.nodeType],\n    );\n    return sourceResourceNode && targetResourceNode\n      ? [\n          ...acc,\n          {\n            id: `${sourceResourceNode.metadata.uid}_${targetResourceNode.metadata.uid}`,\n            type: TYPE_TRAFFIC_CONNECTOR,\n            source: sourceResourceNode.metadata.uid,\n            target: targetResourceNode.metadata.uid,\n            data: data.traffic,\n          },\n        ]\n      : acc;\n  }, []);\n};\n\nconst getBaseTopologyDataModel = (\n  resources: { [x: string]: Alerts } | TopologyDataResources,\n): Model => {\n  const baseDataModel: Model = {\n    nodes: [],\n    edges: [],\n  };\n\n  WORKLOAD_TYPES.forEach((key) => {\n    if (resources?.[key]?.data?.length) {\n      const typedDataModel: Model = {\n        nodes: [],\n        edges: [],\n      };\n\n      resources[key].data.forEach((resource) => {\n        const item = createOverviewItemForType(key, resource, resources);\n        if (item) {\n          const data = createTopologyNodeData(\n            resource,\n            item,\n            TYPE_WORKLOAD,\n            getImageForIconClass(`icon-openshift`),\n            undefined,\n            resources,\n          );\n          typedDataModel.nodes.push(\n            getTopologyNodeItem(resource, TYPE_WORKLOAD, data, WorkloadModelProps),\n          );\n          mergeGroup(getTopologyGroupItems(resource), typedDataModel.nodes);\n        }\n      });\n      addToTopologyDataModel(typedDataModel, baseDataModel);\n    }\n  });\n\n  return baseDataModel;\n};\n\nconst updateAppGroupChildren = (model: Model) => {\n  model.nodes.forEach((n) => {\n    if (n.type === TYPE_APPLICATION_GROUP) {\n      // Filter out any children removed by depicters\n      n.children = n.children.filter((id) => model.nodes.find((child) => child.id === id));\n      n.data.groupResources = n.children?.map((id) => model.nodes.find((c) => id === c.id)) ?? [];\n    }\n  });\n\n  // Remove any empty groups\n  model.nodes = model.nodes.filter(\n    (n) => n.type !== TYPE_APPLICATION_GROUP || n.children.length > 0,\n  );\n};\n\nconst createVisualConnectors = (model: Model, workloadResources: K8sResourceKind[]) => {\n  // Create all visual connectors\n  workloadResources.forEach((dc) => {\n    model.edges.push(...getTopologyEdgeItems(dc, workloadResources));\n  });\n};\n\nconst createTrafficConnectors = (\n  model: Model,\n  workloadResources: K8sResourceKind[],\n  trafficData?: TrafficData,\n) => {\n  // Create traffic connectors\n  if (trafficData) {\n    model.edges.push(...getTrafficConnectors(trafficData, workloadResources));\n  }\n};\n\nexport const baseDataModelGetter = (\n  model: Model,\n  namespace: string,\n  resources: TopologyDataResources,\n  workloadResources: K8sResourceKind[],\n  dataModelDepicters?: TopologyDataModelDepicted[],\n  trafficData?: TrafficData,\n  monitoringAlerts?: Alerts,\n): Model => {\n  const res = { ...resources, monitoringAlerts };\n  const baseModel = getBaseTopologyDataModel(res);\n  addToTopologyDataModel(baseModel, model, dataModelDepicters);\n\n  updateAppGroupChildren(model);\n  createVisualConnectors(model, workloadResources);\n  createTrafficConnectors(model, workloadResources, trafficData);\n\n  return model;\n};\n","import * as React from 'react';\nimport { Alert } from '@console/dynamic-plugin-sdk';\nimport { usePrometheusRulesPoll } from '@console/internal/components/graphs/prometheus-rules-hook';\nimport { getAlertsAndRules } from '@console/internal/components/monitoring/utils';\nimport { useDeepCompareMemoize } from '@console/shared';\n\nexport const useMonitoringAlerts = (\n  namespace: string,\n): {\n  data: Alert[];\n  loaded: boolean;\n  loadError: string;\n} => {\n  const [alertsResponse, alertsError, alertsLoading] = usePrometheusRulesPoll({ namespace });\n  const response = React.useMemo(() => {\n    let alertData;\n    if (!alertsLoading && !alertsError) {\n      alertData = getAlertsAndRules(alertsResponse?.data).alerts;\n\n      // Don't update due to time changes\n      alertData.forEach((alert) => {\n        delete alert.activeAt;\n        if (alert.rule) {\n          delete alert.rule.evaluationTime;\n          delete alert.rule.lastEvaluation;\n          alert.rule.alerts &&\n            alert.rule.alerts.forEach((ruleAlert) => {\n              delete ruleAlert.activeAt;\n            });\n        }\n      });\n    }\n    return { data: alertData, loaded: !alertsLoading, loadError: alertsError };\n  }, [alertsError, alertsLoading, alertsResponse]);\n\n  return useDeepCompareMemoize(response);\n};\n","import { useURLPoll } from '../utils/url-poll-hook';\nimport { getPrometheusURL, PrometheusEndpoint } from './helpers';\nimport { PrometheusRulesResponse } from '@console/dynamic-plugin-sdk';\n\nexport const usePrometheusRulesPoll = ({ delay, namespace }: PrometheusPollProps) => {\n  const url = getPrometheusURL({\n    endpoint: PrometheusEndpoint.RULES,\n    namespace,\n  });\n\n  return useURLPoll<PrometheusRulesResponse>(url, delay, namespace);\n};\n\ntype PrometheusPollProps = {\n  delay?: number;\n  namespace?: string;\n};\n","export * from './topology';\n","import * as React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { connect, Dispatch } from 'react-redux';\nimport { setActiveApplication } from '@console/internal/actions/ui';\nimport { getActiveNamespace, getActiveApplication } from '@console/internal/reducers/ui';\nimport { RootState } from '@console/internal/redux';\nimport {\n  ALL_NAMESPACES_KEY,\n  ALL_APPLICATIONS_KEY,\n  UNASSIGNED_APPLICATIONS_KEY,\n  APPLICATION_USERSETTINGS_PREFIX,\n  APPLICATION_LOCAL_STORAGE_KEY,\n} from '@console/shared';\nimport ApplicationDropdown from './ApplicationDropdown';\n\ninterface NamespaceBarApplicationSelectorProps {\n  disabled?: boolean;\n}\n\ninterface StateProps {\n  namespace: string;\n  application: string;\n}\n\ninterface DispatchProps {\n  onChange: (name: string) => void;\n}\n\ntype Props = NamespaceBarApplicationSelectorProps & StateProps & DispatchProps;\n\nconst NamespaceBarApplicationSelector: React.FC<Props> = ({\n  namespace,\n  application,\n  onChange,\n  disabled,\n}) => {\n  const { t } = useTranslation();\n  const allApplicationsTitle = t('topology~All applications');\n  const noApplicationsTitle = t('topology~No application group');\n  const dropdownTitle: string =\n    application === ALL_APPLICATIONS_KEY\n      ? allApplicationsTitle\n      : application === UNASSIGNED_APPLICATIONS_KEY\n      ? noApplicationsTitle\n      : application;\n  const [title, setTitle] = React.useState<string>(dropdownTitle);\n  React.useEffect(() => {\n    if (!disabled) {\n      setTitle(dropdownTitle);\n    }\n  }, [disabled, dropdownTitle]);\n  if (namespace === ALL_NAMESPACES_KEY) return null;\n\n  const onApplicationChange = (newApplication: string, key: string) => {\n    key === ALL_APPLICATIONS_KEY ? onChange(key) : onChange(newApplication);\n  };\n\n  return (\n    <ApplicationDropdown\n      className=\"co-namespace-selector\"\n      buttonClassName=\"pf-m-plain\"\n      namespace={namespace}\n      title={title && <span className=\"btn-link__title\">{title}</span>}\n      titlePrefix={t('topology~Application')}\n      allSelectorItem={{\n        allSelectorKey: ALL_APPLICATIONS_KEY,\n        allSelectorTitle: allApplicationsTitle,\n      }}\n      noneSelectorItem={{\n        noneSelectorKey: UNASSIGNED_APPLICATIONS_KEY,\n        noneSelectorTitle: noApplicationsTitle,\n      }}\n      selectedKey={application || ALL_APPLICATIONS_KEY}\n      onChange={onApplicationChange}\n      userSettingsPrefix={APPLICATION_USERSETTINGS_PREFIX}\n      storageKey={APPLICATION_LOCAL_STORAGE_KEY}\n      disabled={disabled}\n    />\n  );\n};\n\nconst mapStateToProps = (state: RootState): StateProps => ({\n  namespace: getActiveNamespace(state),\n  application: getActiveApplication(state),\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => ({\n  onChange: (app: string) => {\n    dispatch(setActiveApplication(app));\n  },\n});\n\nexport default connect<StateProps, DispatchProps, NamespaceBarApplicationSelectorProps>(\n  mapStateToProps,\n  mapDispatchToProps,\n)(NamespaceBarApplicationSelector);\n","import i18next from 'i18next';\nimport { omit, merge } from 'lodash';\nimport { HorizontalPodAutoscalerModel } from '@console/internal/models';\nimport { baseTemplates } from '@console/internal/models/yaml-templates';\nimport {\n  HorizontalPodAutoscalerKind,\n  HPAMetric,\n  K8sResourceKind,\n  referenceForModel,\n} from '@console/internal/module/k8s';\nimport { LimitsData } from '@console/shared/src';\nimport { safeJSToYAML, safeYAMLToJS } from '@console/shared/src/utils/yaml';\nimport { HPAFormValues, SupportedMetricTypes } from './types';\n\nexport const VALID_HPA_TARGET_KINDS = ['Deployment', 'DeploymentConfig'];\n\nconst getResourceLimitsData = (resource: K8sResourceKind): LimitsData => {\n  const container = resource?.spec?.template?.spec?.containers?.find((c) => c.resources.limits);\n\n  return container?.resources?.limits || null;\n};\nconst hasCpuLimits = (limits: LimitsData): boolean => !!limits?.cpu;\nexport const isCpuUtilizationPossible = (resource: K8sResourceKind): boolean =>\n  hasCpuLimits(getResourceLimitsData(resource));\nconst hasMemoryLimits = (limits: LimitsData): boolean => !!limits?.memory;\nexport const isMemoryUtilizationPossible = (resource: K8sResourceKind): boolean =>\n  hasMemoryLimits(getResourceLimitsData(resource));\n\nexport const getLimitWarning = (resource: K8sResourceKind): string => {\n  const limits = getResourceLimitsData(resource);\n\n  if (!limits) {\n    return i18next.t(\n      'devconsole~CPU and memory resource limits must be set if you want to use CPU and memory utilization. The HorizontalPodAutoscaler will not have CPU or memory metrics until resource limits are set.',\n    );\n  }\n\n  if (!hasCpuLimits(limits)) {\n    return i18next.t(\n      'devconsole~CPU resource limits must be set if you want to use CPU utilization. The HorizontalPodAutoscaler will not have CPU metrics until resource limits are set.',\n    );\n  }\n  if (!hasMemoryLimits(limits)) {\n    return i18next.t(\n      'devconsole~Memory resource limits must be set if you want to use memory utilization. The HorizontalPodAutoscaler will not have memory metrics until resource limits are set.',\n    );\n  }\n\n  return null;\n};\n\nconst defaultHPAYAML = baseTemplates\n  .get(referenceForModel(HorizontalPodAutoscalerModel))\n  .get('default');\n\nconst getDefaultMetric = (type: SupportedMetricTypes): HPAMetric => ({\n  type: 'Resource',\n  resource: {\n    name: type,\n    target: {\n      averageUtilization: 0,\n      type: 'Utilization',\n    },\n  },\n});\n\nconst createScaleTargetRef = (resource: K8sResourceKind) => ({\n  apiVersion: resource.apiVersion,\n  kind: resource.kind,\n  name: resource.metadata.name,\n});\n\nexport const getFormData = (\n  resource: K8sResourceKind,\n  existingHPA?: HorizontalPodAutoscalerKind,\n): HorizontalPodAutoscalerKind => {\n  const hpa: HorizontalPodAutoscalerKind = existingHPA || safeYAMLToJS(defaultHPAYAML);\n  if (!existingHPA) {\n    // If we are working off the default, zero out cpu metrics to make it easier to use non-cpu metrics with the default\n    hpa.spec.metrics = [getDefaultMetric('cpu')];\n  }\n\n  return {\n    ...hpa,\n    spec: {\n      ...hpa.spec,\n      scaleTargetRef: createScaleTargetRef(resource),\n    },\n  };\n};\nexport const getYAMLData = (\n  resource: K8sResourceKind,\n  existingHPA?: HorizontalPodAutoscalerKind,\n): string => {\n  return safeJSToYAML(getFormData(resource, existingHPA));\n};\n\nexport const getMetricByType = (\n  hpa: HorizontalPodAutoscalerKind,\n  type: SupportedMetricTypes,\n): { metric: HPAMetric; index: number } => {\n  const hpaMetrics = hpa.spec.metrics || [];\n  const metricIndex = hpaMetrics.findIndex((m) => m.resource.name?.toLowerCase() === type);\n  const metric: HPAMetric = hpaMetrics[metricIndex] || getDefaultMetric(type);\n\n  return { metric, index: metricIndex === -1 ? hpaMetrics.length : metricIndex };\n};\n\nexport const sanitizeHPAToForm = (\n  newFormData: Partial<HorizontalPodAutoscalerKind>,\n  resource: K8sResourceKind,\n): HorizontalPodAutoscalerKind => {\n  // Remove the default metrics as the user may be crafting their own custom ones\n  const defaultHPA: HorizontalPodAutoscalerKind = omit(getFormData(resource), 'spec.metrics');\n  return merge({}, defaultHPA, newFormData);\n};\n\nexport const sanityForSubmit = (\n  targetResource: K8sResourceKind,\n  hpa: HorizontalPodAutoscalerKind,\n): HorizontalPodAutoscalerKind => {\n  const validHPA = merge(\n    {},\n    hpa,\n    // Make sure it's against _this_ namespace\n    { metadata: { namespace: targetResource.metadata.namespace } },\n    // Make sure we kept the target we started with\n    { spec: { scaleTargetRef: createScaleTargetRef(targetResource) } },\n  );\n\n  // Remove empty metrics\n  validHPA.spec.metrics = validHPA.spec.metrics?.filter(\n    (metric: HPAMetric) =>\n      !['cpu', 'memory'].includes(metric?.resource?.name?.toLowerCase()) ||\n      (metric.resource.target.type === 'Utilization' &&\n        metric.resource.target.averageUtilization > 0),\n  );\n\n  return validHPA;\n};\n\nexport const getInvalidUsageError = (\n  hpa: HorizontalPodAutoscalerKind,\n  formValues: HPAFormValues,\n): string => {\n  const lackCPULimits = formValues.disabledFields.cpuUtilization;\n  const lackMemoryLimits = formValues.disabledFields.memoryUtilization;\n  const metricNames = (hpa.spec.metrics || []).map((metric) =>\n    metric.resource?.name?.toLowerCase(),\n  );\n  const invalidCPU = lackCPULimits && metricNames.includes('cpu');\n  const invalidMemory = lackMemoryLimits && metricNames.includes('memory');\n\n  if (metricNames.length === 0) {\n    return i18next.t('devconsole~Cannot create a HorizontalPodAutoscaler with no valid metrics.');\n  }\n  if (invalidCPU && invalidMemory) {\n    return i18next.t('devconsole~CPU and memory utilization cannot be used currently.');\n  }\n  if (invalidCPU) {\n    return i18next.t('devconsole~CPU utilization cannot be used currently.');\n  }\n  if (invalidMemory) {\n    return i18next.t('devconsole~Memory utilization cannot be used currently.');\n  }\n\n  return null;\n};\n\nexport const hasCustomMetrics = (hpa?: HorizontalPodAutoscalerKind): boolean => {\n  const metrics = hpa?.spec?.metrics;\n  if (!metrics) {\n    return false;\n  }\n\n  return !!metrics.find((metric) => !['cpu', 'memory'].includes(metric?.resource?.name));\n};\n","import * as React from 'react';\nimport { Helmet } from 'react-helmet';\nimport { useTranslation } from 'react-i18next';\nimport { useParams } from 'react-router-dom-v5-compat';\nimport { ErrorPage404 } from '@console/internal/components/error';\nimport { LoadingBox, LoadingInline, PageComponentProps } from '@console/internal/components/utils';\nimport { useK8sWatchResource } from '@console/internal/components/utils/k8s-watch-hook';\nimport { HorizontalPodAutoscalerModel } from '@console/internal/models';\nimport { getGroupVersionKind, K8sResourceKind } from '@console/internal/module/k8s';\nimport { useRelatedHPA } from '@console/shared';\nimport NamespacedPage, { NamespacedPageVariants } from '../NamespacedPage';\nimport { getLimitWarning, VALID_HPA_TARGET_KINDS } from './hpa-utils';\nimport HPAFormikForm from './HPAFormikForm';\nimport HPAPageHeader from './HPAPageHeader';\n\nconst HPAPage: React.FC<PageComponentProps> = () => {\n  const { t } = useTranslation();\n  const { ns, resourceRef, name } = useParams();\n  const breakdown = getGroupVersionKind(resourceRef) || [];\n  const [group, version, kind] = breakdown;\n  const [hpa, hpaLoaded, hpaError] = useRelatedHPA(`${group}/${version}`, kind, name, ns);\n  const resource = React.useMemo(\n    () => ({\n      kind,\n      namespace: ns,\n      name,\n    }),\n    [kind, ns, name],\n  );\n  const [data, workloadLoaded, workloadError] = useK8sWatchResource<K8sResourceKind>(resource);\n\n  const fullyLoaded = hpaLoaded && workloadLoaded;\n  const error = hpaError || workloadError?.message;\n\n  const validSupportedType = VALID_HPA_TARGET_KINDS.includes(kind);\n  const title = `${hpa ? t('devconsole~Edit') : t('devconsole~Add')} ${\n    HorizontalPodAutoscalerModel.label\n  }`;\n\n  if (!breakdown) {\n    return <ErrorPage404 />;\n  }\n\n  return (\n    <NamespacedPage disabled variant={NamespacedPageVariants.light} hideApplications>\n      <Helmet>\n        <title>{fullyLoaded ? title : HorizontalPodAutoscalerModel.label}</title>\n      </Helmet>\n      {fullyLoaded || error ? (\n        <>\n          <HPAPageHeader\n            kind={kind}\n            limitWarning={workloadLoaded && validSupportedType ? getLimitWarning(data) : null}\n            loadError={error}\n            name={name}\n            title={title}\n            validSupportedType={validSupportedType}\n          />\n          {!error && validSupportedType && (\n            <>\n              {fullyLoaded ? (\n                <HPAFormikForm existingHPA={hpa} targetResource={data} />\n              ) : (\n                <LoadingInline />\n              )}\n            </>\n          )}\n        </>\n      ) : (\n        <LoadingBox />\n      )}\n    </NamespacedPage>\n  );\n};\n\nexport default HPAPage;\n","import * as React from 'react';\nimport { Formik, FormikHelpers, FormikProps } from 'formik';\nimport { useTranslation } from 'react-i18next';\nimport { history } from '@console/internal/components/utils';\nimport { HorizontalPodAutoscalerModel } from '@console/internal/models';\nimport {\n  HorizontalPodAutoscalerKind,\n  k8sCreate,\n  K8sKind,\n  K8sResourceKind,\n  k8sUpdate,\n} from '@console/internal/module/k8s';\nimport { EditorType } from '@console/shared/src/components/synced-editor/editor-toggle';\nimport { safeYAMLToJS } from '@console/shared/src/utils/yaml';\nimport {\n  getFormData,\n  getInvalidUsageError,\n  getYAMLData,\n  hasCustomMetrics,\n  isCpuUtilizationPossible,\n  isMemoryUtilizationPossible,\n  sanityForSubmit,\n} from './hpa-utils';\nimport HPAForm from './HPAForm';\nimport { HPAFormValues } from './types';\nimport { hpaValidationSchema } from './validation-utils';\n\ntype HPAFormikFormProps = {\n  existingHPA?: HorizontalPodAutoscalerKind;\n  targetResource: K8sResourceKind;\n};\n\nconst HPAFormikForm: React.FC<HPAFormikFormProps> = ({ existingHPA, targetResource }) => {\n  const { t } = useTranslation();\n  const initialValues: HPAFormValues = {\n    showCanUseYAMLMessage: true,\n    disabledFields: {\n      name: !!existingHPA,\n      cpuUtilization: !isCpuUtilizationPossible(targetResource),\n      memoryUtilization: !isMemoryUtilizationPossible(targetResource),\n    },\n    editorType: hasCustomMetrics(existingHPA) ? EditorType.YAML : EditorType.Form,\n    formData: getFormData(targetResource, existingHPA),\n    yamlData: getYAMLData(targetResource, existingHPA),\n  };\n\n  const handleSubmit = (values: HPAFormValues, helpers: FormikHelpers<HPAFormValues>) => {\n    const hpa: HorizontalPodAutoscalerKind = sanityForSubmit(\n      targetResource,\n      values.editorType === EditorType.YAML ? safeYAMLToJS(values.yamlData) : values.formData,\n    );\n\n    const invalidUsageError = getInvalidUsageError(hpa, values);\n    if (invalidUsageError) {\n      helpers.setStatus({ submitError: invalidUsageError });\n      return Promise.resolve();\n    }\n\n    const method: (\n      kind: K8sKind,\n      data: HorizontalPodAutoscalerKind,\n    ) => Promise<HorizontalPodAutoscalerKind> = existingHPA ? k8sUpdate : k8sCreate;\n    return method(HorizontalPodAutoscalerModel, hpa)\n      .then(() => {\n        history.goBack();\n      })\n      .catch((error) => {\n        helpers.setStatus({\n          submitError: error?.message || t('devconsole~Unknown error submitting'),\n        });\n      });\n  };\n\n  return (\n    <Formik\n      initialValues={initialValues}\n      onSubmit={handleSubmit}\n      onReset={history.goBack}\n      validationSchema={hpaValidationSchema(t)}\n    >\n      {(props: FormikProps<HPAFormValues>) => (\n        <HPAForm {...props} existingHPA={existingHPA} targetResource={targetResource} />\n      )}\n    </Formik>\n  );\n};\n\nexport default HPAFormikForm;\n","import * as React from 'react';\nimport { FormikProps } from 'formik';\nimport { isEmpty } from 'lodash';\nimport { useTranslation } from 'react-i18next';\nimport { HorizontalPodAutoscalerModel } from '@console/internal/models';\nimport { HorizontalPodAutoscalerKind, K8sResourceCommon } from '@console/internal/module/k8s';\nimport {\n  FlexForm,\n  FormBody,\n  FormFooter,\n  SyncedEditorField,\n  CodeEditorField,\n} from '@console/shared';\nimport { EditorType } from '@console/shared/src/components/synced-editor/editor-toggle';\nimport { sanitizeHPAToForm } from './hpa-utils';\nimport HPADetailsForm from './HPADetailsForm';\nimport { HPAFormValues } from './types';\n\ntype HPAFormProps = {\n  existingHPA?: HorizontalPodAutoscalerKind;\n  targetResource: K8sResourceCommon;\n};\n\nconst HPAForm: React.FC<FormikProps<HPAFormValues> & HPAFormProps> = ({\n  errors,\n  handleReset,\n  handleSubmit,\n  status,\n  setStatus,\n  isSubmitting,\n  existingHPA,\n  targetResource,\n  validateForm,\n  values,\n}) => {\n  const { t } = useTranslation();\n  const LAST_VIEWED_EDITOR_TYPE_USERSETTING_KEY = 'devconsole.hpaForm.editor.lastView';\n  const isForm = values.editorType === EditorType.Form;\n  const formEditor = <HPADetailsForm />;\n  const yamlEditor = (\n    <CodeEditorField\n      name=\"yamlData\"\n      model={HorizontalPodAutoscalerModel}\n      showSamples={!existingHPA}\n      onSave={handleSubmit}\n    />\n  );\n  const customMetrics = false;\n\n  React.useEffect(() => {\n    setStatus({ submitError: null });\n    if (values.editorType === EditorType.Form) {\n      // Force validation against the new data that was adjusted in the YAML\n      // Formik isn't properly handling the immediate state of the form values during the cycle of the editorType\n      setTimeout(() => validateForm(), 0);\n    }\n  }, [setStatus, values.editorType, validateForm]);\n\n  return (\n    <FlexForm onSubmit={handleSubmit}>\n      <FormBody flexLayout>\n        <SyncedEditorField\n          name=\"editorType\"\n          formContext={{\n            name: 'formData',\n            editor: formEditor,\n            isDisabled: customMetrics,\n            sanitizeTo: (newFormData: Partial<HorizontalPodAutoscalerKind>) =>\n              sanitizeHPAToForm(newFormData, targetResource),\n          }}\n          yamlContext={{ name: 'yamlData', editor: yamlEditor }}\n          lastViewUserSettingKey={LAST_VIEWED_EDITOR_TYPE_USERSETTING_KEY}\n        />\n      </FormBody>\n      <FormFooter\n        handleReset={handleReset}\n        errorMessage={status?.submitError}\n        isSubmitting={isSubmitting}\n        submitLabel={t('devconsole~Save')}\n        disableSubmit={(isForm && !isEmpty(errors)) || isSubmitting}\n        resetLabel={t('devconsole~Cancel')}\n        sticky\n      />\n    </FlexForm>\n  );\n};\n\nexport default HPAForm;\n","import * as React from 'react';\nimport { Alert, AlertActionCloseButton, Flex } from '@patternfly/react-core';\nimport { useField, useFormikContext } from 'formik';\nimport { useTranslation } from 'react-i18next';\nimport { HorizontalPodAutoscalerKind } from '@console/internal/module/k8s';\nimport { InputField, NumberSpinnerField } from '@console/shared';\nimport { getMetricByType } from './hpa-utils';\nimport HPAUtilizationField from './HPAUtilizationField';\nimport { HPAFormValues, SupportedMetricTypes } from './types';\n\nconst HPADetailsForm: React.FC = () => {\n  const { t } = useTranslation();\n  const name = 'formData';\n  const [field] = useField<HorizontalPodAutoscalerKind>(name);\n  const {\n    setFieldValue,\n    values: {\n      disabledFields: { name: nameDisabled, cpuUtilization, memoryUtilization },\n      showCanUseYAMLMessage,\n    },\n  } = useFormikContext<HPAFormValues>();\n\n  const updateField = (type: SupportedMetricTypes) => (\n    _event: React.FormEvent<HTMLInputElement>,\n    value: string,\n  ) => {\n    const numValue = parseInt(value, 10);\n\n    const hpa: HorizontalPodAutoscalerKind = field.value;\n    const { metric, index } = getMetricByType(hpa, type);\n    const hpaMetrics = hpa.spec.metrics || [];\n\n    const updatedMetrics = [...hpaMetrics];\n    updatedMetrics[index] = {\n      ...metric,\n      resource: {\n        ...metric.resource,\n        target: {\n          ...metric.resource.target,\n          averageUtilization: numValue,\n        },\n      },\n    };\n\n    setFieldValue(name, {\n      ...hpa,\n      spec: {\n        ...hpa.spec,\n        metrics: updatedMetrics,\n      },\n    });\n  };\n\n  return (\n    <>\n      {showCanUseYAMLMessage && (\n        <Alert\n          actionClose={\n            <AlertActionCloseButton onClose={() => setFieldValue('showCanUseYAMLMessage', false)} />\n          }\n          isInline\n          title={t(\n            'devconsole~Note: Some fields may not be represented in this form view. Please select \"YAML view\" for full control.',\n          )}\n          variant=\"info\"\n        />\n      )}\n      <div className=\"row\">\n        <div className=\"col-lg-8\">\n          <Flex direction={{ default: 'column' }}>\n            <InputField\n              isDisabled={nameDisabled}\n              label={t('devconsole~Name')}\n              name={`${name}.metadata.name`}\n            />\n            <NumberSpinnerField\n              label={t('devconsole~Minimum Pods')}\n              name={`${name}.spec.minReplicas`}\n              setOutputAsIntegerFlag\n            />\n            <NumberSpinnerField\n              label={t('devconsole~Maximum Pods')}\n              name={`${name}.spec.maxReplicas`}\n              setOutputAsIntegerFlag\n            />\n            <HPAUtilizationField\n              disabled={cpuUtilization}\n              hpa={field.value}\n              label={t('devconsole~CPU')}\n              onUpdate={updateField('cpu')}\n              type=\"cpu\"\n            />\n            <HPAUtilizationField\n              disabled={memoryUtilization}\n              hpa={field.value}\n              label={t('devconsole~Memory')}\n              onUpdate={updateField('memory')}\n              type=\"memory\"\n            />\n          </Flex>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default HPADetailsForm;\n","import * as React from 'react';\nimport {\n  FormGroup,\n  InputGroup,\n  InputGroupText,\n  TextInput,\n  InputGroupItem,\n  FormHelperText,\n  HelperText,\n  HelperTextItem,\n} from '@patternfly/react-core';\nimport { PercentIcon } from '@patternfly/react-icons/dist/esm/icons/percent-icon';\nimport { FormikErrors, useFormikContext } from 'formik';\nimport { useTranslation } from 'react-i18next';\nimport { RedExclamationCircleIcon } from '@console/dynamic-plugin-sdk';\nimport { HorizontalPodAutoscalerKind, HPAMetric } from '@console/internal/module/k8s';\nimport { getMetricByType } from './hpa-utils';\nimport { HPAFormValues, SupportedMetricTypes } from './types';\n\ntype HPAUtilizationFieldProps = {\n  disabled?: boolean;\n  hpa: HorizontalPodAutoscalerKind;\n  label: string;\n  onUpdate: (event: React.FormEvent<HTMLInputElement>, stringValue: string) => void;\n  type: SupportedMetricTypes;\n};\n\nconst HPAUtilizationField: React.FC<HPAUtilizationFieldProps> = ({\n  disabled,\n  hpa,\n  label,\n  onUpdate,\n  type,\n}) => {\n  const { errors } = useFormikContext<HPAFormValues>();\n  const { metric, index } = getMetricByType(hpa, type);\n  const value: number = metric?.resource?.target?.averageUtilization;\n  const thisErrorMetric = errors.formData?.spec?.metrics?.[index] as FormikErrors<HPAMetric>;\n  const error: string = thisErrorMetric?.resource?.target?.averageUtilization;\n  const { t } = useTranslation();\n  return (\n    <FormGroup\n      fieldId={`${type}-utilization`}\n      label={t('devconsole~{{label}} Utilization', { label })}\n    >\n      <InputGroup>\n        <InputGroupItem isFill>\n          <TextInput\n            id={type}\n            type=\"text\"\n            isDisabled={disabled}\n            onChange={onUpdate}\n            value={Number.isNaN(value) ? '' : value}\n          />\n        </InputGroupItem>\n        <InputGroupItem isBox>\n          <InputGroupText id=\"percent\" aria-label=\"%\">\n            <PercentIcon />\n          </InputGroupText>\n        </InputGroupItem>\n      </InputGroup>\n\n      <FormHelperText>\n        <HelperText>\n          {error ? (\n            <HelperTextItem variant=\"error\" icon={<RedExclamationCircleIcon />}>\n              {error}\n            </HelperTextItem>\n          ) : (\n            <HelperTextItem>\n              {t(\n                'devconsole~{{label}} request and limit must be set before {{label}} utilization can be set.',\n                { label },\n              )}\n            </HelperTextItem>\n          )}\n        </HelperText>\n      </FormHelperText>\n    </FormGroup>\n  );\n};\n\nexport default HPAUtilizationField;\n","import { TFunction } from 'i18next';\nimport * as yup from 'yup';\nimport { nameRegex } from '@console/shared';\nimport { EditorType } from '@console/shared/src/components/synced-editor/editor-toggle';\nimport { isInteger } from '../../utils/yup-validation-util';\n\nexport const hpaValidationSchema = (t: TFunction) =>\n  yup.object({\n    editorType: yup.string(),\n    formData: yup.object().when('editorType', {\n      is: EditorType.Form,\n      then: yup.object({\n        metadata: yup.object({\n          name: yup\n            .string()\n            .matches(nameRegex, {\n              message: t(\n                'devconsole~Name must consist of lower-case letters, numbers and hyphens. It must start with a letter and end with a letter or number.',\n              ),\n              excludeEmptyString: true,\n            })\n            .max(253, t('devconsole~Cannot be longer than 253 characters.'))\n            .required(t('devconsole~Required')),\n        }),\n        spec: yup.object({\n          minReplicas: yup\n            .number()\n            .test(isInteger(t('devconsole~Minimum Pods must be an integer.')))\n            .min(1, t('devconsole~Minimum Pods must greater than or equal to 1.'))\n            .test(\n              'test-less-than-max',\n              t('devconsole~Minimum Pods should be less than or equal to Maximum Pods.'),\n              function (minReplicas) {\n                const { maxReplicas } = this.parent;\n                return minReplicas <= maxReplicas;\n              },\n            ),\n          maxReplicas: yup\n            .number()\n            .test(isInteger(t('devconsole~Maximum Pods must be an integer.')))\n            .max(\n              Number.MAX_SAFE_INTEGER,\n              t('devconsole~Value is larger than maximum value allowed.'),\n            )\n            .test(\n              'test-greater-than-min',\n              t('devconsole~Maximum Pods should be greater than or equal to Minimum Pods.'),\n              function (maxReplicas) {\n                const { minReplicas } = this.parent;\n                return minReplicas <= maxReplicas;\n              },\n            )\n            .required(t('devconsole~Max Pods must be defined.')),\n          metrics: yup.array(\n            yup.object({\n              resource: yup.object({\n                target: yup.object({\n                  averageUtilization: yup\n                    .mixed()\n                    .test(\n                      'test-for-valid-utilization',\n                      t('devconsole~Average utilization must be a positive number.'),\n                      function (avgUtilization) {\n                        if (!avgUtilization) return true;\n                        return /^\\d+$/.test(String(avgUtilization));\n                      },\n                    ),\n                }),\n              }),\n            }),\n          ),\n        }),\n      }),\n    }),\n  });\n","import * as React from 'react';\nimport { Alert, Flex } from '@patternfly/react-core';\nimport { useTranslation } from 'react-i18next';\nimport { PageHeading, ResourceLink } from '@console/internal/components/utils';\n\ntype HPAPageHeaderProps = {\n  kind: string;\n  limitWarning?: string;\n  loadError?: string;\n  name: string;\n  title: string;\n  validSupportedType: boolean;\n};\n\nconst HPAPageHeader: React.FC<HPAPageHeaderProps> = ({\n  name,\n  title,\n  kind,\n  loadError,\n  limitWarning,\n  validSupportedType,\n}) => {\n  const { t } = useTranslation();\n  return (\n    <PageHeading>\n      <Flex direction={{ default: 'column' }}>\n        <h1 className=\"pf-v5-c-title pf-m-2xl\">{title}</h1>\n        {validSupportedType ? (\n          <>\n            <div>\n              {t('devconsole~Resource')}{' '}\n              <ResourceLink inline linkTo={false} kind={kind} name={name} />\n            </div>\n            {loadError ? (\n              <Alert\n                isInline\n                variant=\"danger\"\n                title={t('devconsole~This resource is not available')}\n              >\n                {loadError}\n              </Alert>\n            ) : (\n              limitWarning && <Alert isInline variant=\"warning\" title={limitWarning} />\n            )}\n          </>\n        ) : (\n          <Alert\n            isInline\n            variant=\"danger\"\n            title={t('devconsole~This is not a supported in-context type')}\n          />\n        )}\n      </Flex>\n    </PageHeading>\n  );\n};\n\nexport default HPAPageHeader;\n"],"sourceRoot":""}
(window.webpackJsonp=window.webpackJsonp||[]).push([[155,20,35,44,57,126],{1407:function(e,t,n){"use strict";n.r(t),n.d(t,"getQuotaResourceTypes",(function(){return U})),n.d(t,"getACRQResourceUsage",(function(){return B})),n.d(t,"getResourceUsage",(function(){return F})),n.d(t,"UsageIcon",(function(){return K})),n.d(t,"ResourceUsageRow",(function(){return G})),n.d(t,"QuotaScopesInline",(function(){return Y})),n.d(t,"QuotaScopesList",(function(){return V})),n.d(t,"hasComputeResources",(function(){return W})),n.d(t,"ResourceQuotasList",(function(){return J})),n.d(t,"AppliedClusterResourceQuotasList",(function(){return Z})),n.d(t,"quotaType",(function(){return X})),n.d(t,"flatten",(function(){return ee})),n.d(t,"ResourceQuotasPage",(function(){return te})),n.d(t,"AppliedClusterResourceQuotasPage",(function(){return ne})),n.d(t,"ResourceQuotasDetailsPage",(function(){return ae})),n.d(t,"AppliedClusterResourceQuotasDetailsPage",(function(){return re}));var a=n(16),r=n(160),s=n(1120),i=n(460),o=n(839),c=n(0),l=n(18),u=n(14),d=n(54),p=n(5839),m=n(5840),b=n(2248),h=n(2247),v=n(1199),g=n(7),f=n(5747),E=n(5746),O=n(5868),y=n(15),j=n(40),k=n(5),_=n(243),T=n(207),R=n(139),S=n(8),P=n(10),N=n(5674);const{common:C}=k.F.factory,w=[...k.F.getExtensionsActionsForKind(P.ResourceQuotaModel),...C],I=[...k.F.getExtensionsActionsForKind(P.ClusterResourceQuotaModel),...C],A=e=>[...k.F.getExtensionsActionsForKind(P.ClusterResourceQuotaModel),k.F.factory.ModifyLabels,k.F.factory.ModifyAnnotations,(t,n)=>({labelKey:"public~Edit AppliedClusterResourceQuota",href:`/k8s/ns/${e}/${Object(S.Hb)(P.AppliedClusterResourceQuotaModel)}/${n.metadata.name}/yaml`,accessReview:{group:t.apiGroup,resource:t.plural,name:n.metadata.name,namespace:e,verb:"update"}}),k.F.factory.Delete],x=e=>!e.metadata.namespace,D=Object(S.Hb)(P.ClusterResourceQuotaModel),M=Object(S.Hb)(P.AppliedClusterResourceQuotaModel),L=(e,t)=>e.metadata.namespace?w:"ClusterResourceQuota"===e.kind?I:"AppliedClusterResourceQuota"===e.kind?A(t.namespace):void 0,U=e=>{const t=x(e)?a.a(e,"spec.quota.hard"):a.a(e,"spec.hard");return r.a(t).sort()},B=(e,t,n)=>{var a,r,s,i,o,c,l,u,d,p,m,b,h;let v;if(n){v={namespace:null===(s=null===(r=(null===(a=e.status)||void 0===a?void 0:a.namespaces).filter(e=>e.namespace===n)[0])||void 0===r?void 0:r.status)||void 0===s?void 0:s.used[t],cluster:null===(o=null===(i=e.status)||void 0===i?void 0:i.total)||void 0===o?void 0:o.used[t]}}else v={namespace:0,cluster:null===(l=null===(c=e.status)||void 0===c?void 0:c.total)||void 0===l?void 0:l.used[t]};const g=null===(d=null===(u=e.status)||void 0===u?void 0:u.total)||void 0===d?void 0:d.used[t],f=(null===(m=null===(p=e.status)||void 0===p?void 0:p.total)||void 0===m?void 0:m.hard[t])||(null===(h=null===(b=e.spec)||void 0===b?void 0:b.quota)||void 0===h?void 0:h.hard[t]),E=f&&v.namespace?Object(k.Ib)(v.namespace)/Object(k.Ib)(f)*100:0,O=(f&&v.cluster?Object(k.Ib)(v.cluster)/Object(k.Ib)(f)*100:0)-E;return{used:v,totalUsed:g,max:f,percent:{namespace:E,otherNamespaces:O,unused:100-(E+O)}}},F=(e,t)=>{const n=x(e),r=n?["status","total","hard"]:["status","hard"],s=n?["spec","quota","hard"]:["spec","hard"],i=n?["status","total","used"]:["status","used"],o=a.a(e,[...r,t])||a.a(e,[...s,t]),c=a.a(e,[...i,t]);return{used:c,max:o,percent:o&&c?Object(k.Ib)(c)/Object(k.Ib)(o)*100:0}},q=["","","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg",k.F.columnClass],$=["","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg",k.F.columnClass],K=({percent:e})=>{let t=c.createElement(v.a,null);return 0===e?t=c.createElement(p.a,{className:"co-resource-quota-empty"}):e>0&&e<50?t=c.createElement(m.a,{className:"co-resource-quota-almost-empty"}):e>=50&&e<100?t=c.createElement(b.a,{className:"co-resource-quota-almost-full"}):100===e?t=c.createElement(h.a,{className:"co-resource-quota-full"}):e>100&&(t=c.createElement(y.tc,{className:"co-resource-quota-exceeded"})),t},G=({quota:e,resourceType:t,namespace:n})=>{if(Object(S.Db)(e)===M){const{used:a,totalUsed:r,max:s,percent:i}=B(e,t,n);return c.createElement("div",{className:"row co-m-row"},c.createElement("div",{className:"col-sm-4 col-xs-6 co-break-word"},t),c.createElement("div",{className:"col-sm-2 hidden-xs co-resource-quota-icon"},c.createElement(K,{percent:i.namespace})),c.createElement("div",{className:"col-sm-2 col-xs-2"},a.namespace),c.createElement("div",{className:"col-sm-2 col-xs-2"},r),c.createElement("div",{className:"col-sm-2 col-xs-2"},s))}const{used:a,max:r,percent:s}=F(e,t);return c.createElement("div",{className:"row co-m-row"},c.createElement("div",{className:"col-sm-4 col-xs-6 co-break-word"},t),c.createElement("div",{className:"col-sm-2 hidden-xs co-resource-quota-icon"},c.createElement(K,{percent:s})),c.createElement("div",{className:"col-sm-3 col-xs-3"},a),c.createElement("div",{className:"col-sm-3 col-xs-3"},r))},Y=({scopes:e})=>c.createElement("span",null,"(",e.join(", "),")"),V=({scopes:e})=>{const{t:t}=Object(g.useTranslation)(),n={Terminating:{description:t("public~Affects pods that have an active deadline. These pods usually include builds, deployers, and jobs.")},NotTerminating:{description:t("public~Affects pods that do not have an active deadline. These pods usually include your applications.")},BestEffort:{description:t("public~Affects pods that do not have resource limits set. These pods have a best effort quality of service.")},NotBestEffort:{description:t("public~Affects pods that have at least one resource limit set. These pods do not have a best effort quality of service.")}};return e.map(e=>{const t=a.a(n,e);return t?c.createElement("dd",{key:e},c.createElement("div",{className:"co-resource-quota-scope__label"},e),c.createElement("div",{className:"co-resource-quota-scope__description"},t.description)):c.createElement("dd",{key:e,className:"co-resource-quota-scope__label"},e)})},W=e=>s.a(e,["requests.cpu","cpu","limits.cpu","requests.memory","memory","limits.memory"]).length>0,H=({obj:e})=>{var t,n,a,r,s,i,o,d,p;const{t:m}=Object(g.useTranslation)(),b=Object(u.useParams)(),h=U(e),v=null!==(n=null===(t=e.spec)||void 0===t?void 0:t.scopes)&&void 0!==n?n:null===(r=null===(a=e.spec)||void 0===a?void 0:a.quota)||void 0===r?void 0:r.scopes,y=Object(S.Db)(e),j=y===M,_=null==b?void 0:b.ns;let T,R;switch(y){case M:T=m("public~AppliedClusterResourceQuota details"),R=c.createElement(f.a,{appliedClusterResourceQuota:e,namespace:_});break;case D:T=m("public~ClusterResourceQuota details"),R=c.createElement(O.a,{clusterResourceQuota:e});break;default:T=m("public~ResourceQuota details"),R=c.createElement(E.a,{resourceQuota:e})}const N=Object(k.Dc)({group:P.ClusterResourceQuotaModel.apiGroup,resource:P.ClusterResourceQuotaModel.plural,verb:"list"});return c.createElement(c.Fragment,null,c.createElement("div",{className:"co-m-pane__body"},c.createElement(k.ob,{text:T}),R,c.createElement("div",{className:"row"},c.createElement("div",{className:"col-sm-6"},c.createElement(k.lb,{resource:e},N&&c.createElement(k.r,{label:m("public~ClusterResourceQuota"),obj:e,path:"rq.metadata.name"},c.createElement(k.hb,{kind:D,name:e.metadata.name})),c.createElement(k.r,{label:m("public~Label selector"),obj:e,path:"spec.selector.labels.matchLabels"},c.createElement(k.L,{kind:M,labels:null===(o=null===(i=null===(s=e.spec)||void 0===s?void 0:s.selector)||void 0===i?void 0:i.labels)||void 0===o?void 0:o.matchLabels})),c.createElement(k.r,{label:m("public~Project annotations"),obj:e,path:"spec.selector.annotations"},c.createElement(k.pb,{selector:null===(p=null===(d=e.spec)||void 0===d?void 0:d.selector)||void 0===p?void 0:p.annotations,namespace:_})))),v&&c.createElement("div",{className:"col-sm-6"},c.createElement("dl",{className:"co-m-pane__details"},c.createElement("dt",null,m("public~Scopes")),c.createElement(V,{scopes:v}))))),c.createElement("div",{className:"co-m-pane__body"},c.createElement(k.ob,{text:T,style:{display:"block",marginBottom:"20px"}},c.createElement(k.B,null,c.createElement("p",null,m("public~Requests are the amount of resources you expect to use. These are used when establishing if the cluster can fulfill your Request.")),c.createElement("p",null,m("public~Limits are a maximum amount of a resource you can consume. Applications consuming more than the Limit may be terminated.")),c.createElement("p",null,m("public~A cluster administrator can establish limits on both the amount you can request and your limits with a ResourceQuota.")))),c.createElement("div",{className:"co-m-table-grid co-m-table-grid--bordered"},c.createElement("div",{className:"row co-m-table-grid__head"},c.createElement("div",{className:"col-sm-4 col-xs-6"},m("public~Resource type")),c.createElement("div",{className:"col-sm-2 hidden-xs"},m("public~Capacity")),c.createElement("div",{className:l({"col-sm-2 col-xs-2":j},{"col-sm-3 col-xs-3":!j})},m("public~Used")),j&&c.createElement("div",{className:"col-sm-2 col-xs-2"},m("public~Total used")),c.createElement("div",{className:l({"col-sm-2 col-xs-2":j},{"col-sm-3 col-xs-3":!j})},m("public~Max"))),c.createElement("div",{className:"co-m-table-grid__body"},h.map(t=>c.createElement(G,{key:t,quota:e,resourceType:t,namespace:_}))))))},z=({obj:e,customData:t})=>{var n,a,r,s,i,o,u,d;const{t:p}=Object(g.useTranslation)(),m=L(e,t);let b;return b=e.kind===P.ResourceQuotaModel.kind?Object.keys((null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.hard)||{}).reduce((t,n)=>{var a,r,s;return Object(N.b)(null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.hard[n],null===(s=null===(r=null==e?void 0:e.status)||void 0===r?void 0:r.used)||void 0===s?void 0:s[n])>=100?t+1:t},0):Object.keys((null===(r=null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.total)||void 0===r?void 0:r.hard)||{}).reduce((t,n)=>{var a,r,s,i,o;return Object(N.b)(null===(r=null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.total)||void 0===r?void 0:r.hard[n],null===(o=null===(i=null===(s=null==e?void 0:e.status)||void 0===s?void 0:s.total)||void 0===i?void 0:i.used)||void 0===o?void 0:o[n])>=100?t+1:t},0),c.createElement(c.Fragment,null,c.createElement(j.k,{className:q[0]},c.createElement(k.hb,{kind:Object(S.Db)(e),name:e.metadata.name,namespace:Object(S.Db)(e)===M?t.namespace:e.metadata.namespace,className:"co-resource-item__resource-name",dataTest:"resource-quota-link"})),c.createElement(j.k,{className:l(q[1],"co-break-word"),columnID:"namespace"},e.metadata.namespace?c.createElement(k.hb,{kind:"Namespace",name:e.metadata.namespace}):p("public~None")),c.createElement(j.k,{className:l(q[2],"co-break-word")},c.createElement(k.L,{kind:M,labels:null===(o=null===(i=null===(s=e.spec)||void 0===s?void 0:s.selector)||void 0===i?void 0:i.labels)||void 0===o?void 0:o.matchLabels})),c.createElement(j.k,{className:l(q[3],"co-break-word")},c.createElement(k.pb,{selector:null===(d=null===(u=e.spec)||void 0===u?void 0:u.selector)||void 0===d?void 0:d.annotations,namespace:t.namespace})),c.createElement(j.k,{className:l(q[4],"co-break-word")},b>0?c.createElement(c.Fragment,null,c.createElement(y.tc,null)," ",p("public~{{count}} resource reached quota",{count:b})):p("public~none are at quota")),c.createElement(j.k,{className:q[5]},c.createElement(k.xb,{timestamp:e.metadata.creationTimestamp})),c.createElement(j.k,{className:q[6]},c.createElement(k.gb,{customData:t,actions:m,kind:Object(S.Db)(e),resource:e})))},Q=({obj:e,customData:t})=>{var n,a,r,s,i,o,u;const{t:d}=Object(g.useTranslation)(),p=L(e,t),m=Object.keys((null===(a=null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.total)||void 0===a?void 0:a.hard)||{}).reduce((t,n)=>{var a,r,s,i,o;return Object(N.b)(null===(r=null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.total)||void 0===r?void 0:r.hard[n],null===(o=null===(i=null===(s=null==e?void 0:e.status)||void 0===s?void 0:s.total)||void 0===i?void 0:i.used)||void 0===o?void 0:o[n])>=100?t+1:t},0);return c.createElement(c.Fragment,null,c.createElement(j.k,{className:$[0]},c.createElement(k.hb,{kind:M,name:e.metadata.name,namespace:t.namespace,className:"co-resource-item__resource-name"})),c.createElement(j.k,{className:l($[1],"co-break-word")},c.createElement(k.L,{kind:M,labels:null===(i=null===(s=null===(r=e.spec)||void 0===r?void 0:r.selector)||void 0===s?void 0:s.labels)||void 0===i?void 0:i.matchLabels})),c.createElement(j.k,{className:l($[2],"co-break-word")},c.createElement(k.pb,{selector:null===(u=null===(o=e.spec)||void 0===o?void 0:o.selector)||void 0===u?void 0:u.annotations,namespace:t.namespace})),c.createElement(j.k,{className:l($[3],"co-break-word")},m>0?c.createElement(c.Fragment,null,c.createElement(y.tc,null)," ",d("public~{{count}} resource reached quota",{count:m})):d("public~none are at quota")),c.createElement(j.k,{className:$[4]},c.createElement(k.xb,{timestamp:e.metadata.creationTimestamp})),c.createElement(j.k,{className:$[5]},c.createElement(k.gb,{customData:t,actions:p,kind:M,resource:e})))},J=e=>{const{t:t}=Object(g.useTranslation)();return c.createElement(j.j,Object.assign({},e,{"aria-label":t("public~ResourceQuotas"),Header:()=>[{title:t("public~Name"),sortField:"metadata.name",transforms:[d.a],props:{className:q[0]}},{title:t("public~Namespace"),sortField:"metadata.namespace",transforms:[d.a],props:{className:q[1]},id:"namespace"},{title:t("public~Label selector"),sortField:"spec.selector.labels.matchLabels",transforms:[d.a],props:{className:q[2]}},{title:t("public~Project annotations"),sortField:"spec.selector.annotations",transforms:[d.a],props:{className:q[3]}},{title:t("public~Status"),props:{className:q[4]},transforms:[d.a]},{title:t("public~Created"),sortField:"metadata.creationTimestamp",transforms:[d.a],props:{className:q[5]}},{title:"",props:{className:q[6]}}],Row:z,virtualize:!0,customData:{namespace:e.namespace}}))},Z=e=>{const{t:t}=Object(g.useTranslation)();return c.createElement(j.j,Object.assign({},e,{"aria-label":t("public~AppliedClusterResourceQuotas"),Header:()=>[{title:t("public~Name"),sortField:"metadata.name",transforms:[d.a],props:{className:$[0]}},{title:t("public~Label selector"),sortField:"spec.selector.labels.matchLabels",transforms:[d.a],props:{className:$[1]}},{title:t("public~Project annotations"),sortField:"spec.selector.annotations",transforms:[d.a],props:{className:$[2]}},{title:t("public~Status"),props:{className:$[3]},transforms:[d.a]},{title:t("public~Created"),sortField:"metadata.creationTimestamp",transforms:[d.a],props:{className:$[4]}},{title:"",props:{className:$[5]}}],Row:Q,virtualize:!0,customData:{namespace:e.namespace}}))},X=e=>{if(e)return e.metadata.namespace?"namespace":"cluster"},ee=e=>i.a(e,e=>o.a(e.data)),te=Object(_.a)(y.O.OPENSHIFT)(({namespace:e,flags:t,mock:n,showTitle:a})=>{const{t:r}=Object(g.useTranslation)(),s=[{kind:"ResourceQuota",namespaced:!0}];let i=null;if(Object(T.c)(t[y.O.OPENSHIFT]))return c.createElement(R.f,null);t[y.O.OPENSHIFT]&&(e?s.push({kind:Object(S.Hb)(P.AppliedClusterResourceQuotaModel),namespaced:!0,namespace:e,optional:!0}):s.push({kind:Object(S.Hb)(P.ClusterResourceQuotaModel),namespaced:!1,optional:!0}),i=[{filterGroupName:r("public~Role"),type:"role-kind",reducer:X,items:[{id:"cluster",title:r("public~Cluster-wide {{resource}}",{resource:r(P.ResourceQuotaModel.labelPluralKey)})},{id:"namespace",title:r("public~Namespace {{resource}}",{resource:r(P.ResourceQuotaModel.labelPluralKey)})}]}]);const o=e||"default",l={model:P.ResourceQuotaModel,namespace:o};return c.createElement(j.i,{canCreate:!0,createAccessReview:l,createButtonText:r("public~Create ResourceQuota"),createProps:{to:`/k8s/ns/${o}/resourcequotas/~new`},ListComponent:J,resources:s,label:r(P.ResourceQuotaModel.labelPluralKey),namespace:e,flatten:ee,title:r(P.ResourceQuotaModel.labelPluralKey),rowFilters:i,mock:n,showTitle:a})}),ne=({namespace:e,mock:t,showTitle:n})=>{const{t:a}=Object(g.useTranslation)(),r=[{kind:Object(S.Hb)(P.AppliedClusterResourceQuotaModel),namespaced:!0,namespace:e,optional:!0}];return c.createElement(j.i,{ListComponent:Z,resources:r,label:a(P.AppliedClusterResourceQuotaModel.labelPluralKey),namespace:e,flatten:ee,title:a(P.AppliedClusterResourceQuotaModel.labelPluralKey),mock:t,showTitle:n})},ae=e=>c.createElement(j.a,Object.assign({},e,{menuActions:w,pages:[k.mc.details(H),k.mc.editYaml()]})),re=e=>{const t=Object(u.useParams)(),n=A(null==t?void 0:t.ns);return c.createElement(j.a,Object.assign({},e,{menuActions:n,pages:[k.mc.details(H),k.mc.editYaml()]}))}},1945:function(e,t,n){"use strict";n.r(t),n.d(t,"deleteModal",(function(){return H})),n.d(t,"NamespacesList",(function(){return re})),n.d(t,"NamespacesPage",(function(){return se})),n.d(t,"projectMenuActions",(function(){return ie})),n.d(t,"ProjectsTable",(function(){return pe})),n.d(t,"ProjectList",(function(){return ge})),n.d(t,"ProjectsPage",(function(){return fe})),n.d(t,"PullSecret",(function(){return Ee})),n.d(t,"NamespaceLineCharts",(function(){return Oe})),n.d(t,"TopPodsBarChart",(function(){return ye})),n.d(t,"NamespaceSummary",(function(){return ke})),n.d(t,"NamespaceDetails",(function(){return _e})),n.d(t,"NamespacesDetailsPage",(function(){return Re})),n.d(t,"ProjectsDetailsPage",(function(){return Se}));var a=n(16),r=n(667),s=n(1256),i=n(501),o=n(22),c=n(50),l=n(461),u=n(0),d=n(137),p=n(18),m=n(54),b=n(88),h=n(80),v=n(19),g=n(2244),f=n.n(g),E=n(31),O=n(7),y=n(29),j=n(615),k=n(764),_=n(15),T=n(762),R=n(121),S=n(13),P=n(10),N=n(109),C=n(8),w=n(53),I=n(40),A=n(5),x=n(131),D=n(767),M=n(199),L=n(207),U=n(978),B=n(5852),F=n(5838),q=n(108),$=n(1418),K=n(2249),G=n(2250),Y=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const V=e=>a.a(e,["metadata","annotations","openshift.io/display-name"]),W=()=>[{filterGroupName:y.a.t("public~Requester"),type:"requester",reducer:e=>{var t,n,a;const r=null===(t=e.metadata)||void 0===t?void 0:t.name,s=null===(a=null===(n=e.metadata)||void 0===n?void 0:n.annotations)||void 0===a?void 0:a["openshift.io/requester"];return Object($.b)(s)?_.Hb.ME:Object($.c)(s,r)?_.Hb.USER:Object($.d)({title:r})?_.Hb.SYSTEM:void 0},items:[{id:_.Hb.ME,title:y.a.t("public~Me")},{id:_.Hb.USER,title:y.a.t("public~User")},{id:_.Hb.SYSTEM,title:y.a.t("public~System"),hideIfEmpty:!0}]}],H=(e,t)=>{var n;const{labelKey:a,labelKind:r,weight:s,accessReview:i}=A.F.factory.Delete(e,t);let o,c,l=void 0;return"default"===t.metadata.name?o=e.label+" default cannot be deleted":"Terminating"===(null===(n=t.status)||void 0===n?void 0:n.phase)?o=e.label+" is already terminating":l=()=>Object(x.r)({kind:e,resource:t}),o&&(c=u.createElement("div",{className:"dropdown__disabled"},u.createElement(b.a,{content:o},u.createElement("span",null,y.a.t(a,r))))),{label:c,labelKey:a,labelKind:r,weight:s,callback:l,accessReview:i}},z=[A.F.factory.ModifyLabels,A.F.factory.ModifyAnnotations,A.F.factory.Edit,H],Q=()=>{const e=[{key:"memory",query:'sum by(namespace) (container_memory_working_set_bytes{container="",pod!=""})'},{key:"cpu",query:"namespace:container_cpu_usage:sum"}].map(({key:e,query:t})=>{const n=`${M.g}/api/v1/query?&query=${t}`;return Object(N.c)(n).then(({data:{result:t}})=>t.reduce((t,n)=>{const a=Number(n.value[1]);return r.a(t,[e,n.metric.namespace],a)},{}))});return Promise.all(e).then(e=>s.a({},...e)).catch(console.error)},J=Object.freeze({name:{classes:"",id:"name"},displayName:{classes:"co-break-word",id:"displayName"},status:{classes:"",id:"status"},requester:{classes:"",id:"requester"},memory:{classes:"",id:"memory"},cpu:{classes:"",id:"cpu"},created:{classes:"",id:"created"},description:{classes:"",id:"description"},labels:{classes:"",id:"labels"}}),Z=()=>[{title:y.a.t("public~Name"),id:J.name.id,sortField:"metadata.name",transforms:[m.a],props:{className:J.name.classes}},{title:y.a.t("public~Display name"),id:J.displayName.id,sortField:'metadata.annotations["openshift.io/display-name"]',transforms:[m.a],props:{className:J.displayName.classes}},{title:y.a.t("public~Status"),id:J.status.id,sortField:"status.phase",transforms:[m.a],props:{className:J.status.classes}},{title:y.a.t("public~Requester"),id:J.requester.id,sortField:"metadata.annotations.['openshift.io/requester']",transforms:[m.a],props:{className:J.requester.classes}},{title:y.a.t("public~Memory"),id:J.memory.id,sortFunc:"namespaceMemory",transforms:[m.a],props:{className:J.memory.classes}},{title:y.a.t("public~CPU"),id:J.cpu.id,sortFunc:"namespaceCPU",transforms:[m.a],props:{className:J.cpu.classes}},{title:y.a.t("public~Created"),id:J.created.id,sortField:"metadata.creationTimestamp",transforms:[m.a],props:{className:J.created.classes}},{title:y.a.t("public~Description"),id:J.description.id,sortField:"metadata.annotations.['openshift.io/description']",transforms:[m.a],props:{className:J.description.classes},additional:!0},{title:y.a.t("public~Labels"),id:J.labels.id,sortField:"metadata.labels",transforms:[m.a],props:{className:J.labels.classes},additional:!0},{title:"",props:{className:A.F.columnClass}}];Z.displayName="NamespacesTableHeader";const X=Object(C.Hb)(P.NamespaceModel),ee=()=>new Set(Z().reduce((e,t)=>(t.id&&!t.additional&&e.push(t.id),e),[])),te=({obj:e,customData:{tableColumns:t}})=>{var n,a,r;const{t:s}=Object(O.useTranslation)(),i=Object(E.useSelector)(({UI:e})=>e.getIn(["metrics","namespace"])),o=Object(_.dd)(e),c=Object(_.Bd)(e),l=null===(n=null==i?void 0:i.memory)||void 0===n?void 0:n[o],d=null===(a=null==i?void 0:i.cpu)||void 0===a?void 0:a[o],m=Object(_.Jc)(e),b=e.metadata.labels,h=(null==t?void 0:t.length)>0?new Set(t):ee();return u.createElement(u.Fragment,null,u.createElement(I.k,{className:J.name.classes},u.createElement(A.hb,{kind:"Namespace",name:e.metadata.name})),u.createElement(I.k,{className:J.displayName.classes,columns:h,columnID:J.displayName.id},u.createElement("span",{className:"co-break-word co-line-clamp"},V(e)||u.createElement("span",{className:"text-muted"},s("public~No display name")))),u.createElement(I.k,{className:p(J.status.classes,"co-break-word"),columns:h,columnID:J.status.id},u.createElement(_.cc,{status:null===(r=e.status)||void 0===r?void 0:r.phase})),u.createElement(I.k,{className:p(J.requester.classes,"co-break-word"),columns:h,columnID:J.requester.id},c||u.createElement("span",{className:"text-muted"},s("public~No requester"))),u.createElement(I.k,{className:J.memory.classes,columns:h,columnID:J.memory.id},l?Object(A.Ob)(l)+" MiB":"-"),u.createElement(I.k,{className:J.cpu.classes,columns:h,columnID:J.cpu.id},d?s("public~{{cores}} cores",{cores:Object(A.Pb)(d)}):"-"),u.createElement(I.k,{className:J.created.classes,columns:h,columnID:J.created.id},u.createElement(A.xb,{timestamp:e.metadata.creationTimestamp})),u.createElement(I.k,{className:J.description.classes,columns:h,columnID:J.description.id},u.createElement("span",{className:"co-break-word co-line-clamp"},m||u.createElement("span",{className:"text-muted"},s("public~No description")))),u.createElement(I.k,{className:J.labels.classes,columns:h,columnID:J.labels.id},u.createElement(A.L,{kind:"Namespace",labels:b})),u.createElement(I.k,{className:A.F.columnClass},u.createElement(A.gb,{actions:z,kind:"Namespace",resource:e})))},ne=()=>{const{t:e}=Object(O.useTranslation)();return u.createElement(A.h,{title:e("public~No Namespaces found"),Icon:f.a},e("public~No results were found for the requested Namespaces."))},ae=()=>{const{t:e}=Object(O.useTranslation)();return u.createElement(A.h,{title:e("public~No matching Namespaces"),Icon:f.a},e("public~No results match the filter criteria."))},re=e=>{var t;const{t:n}=Object(O.useTranslation)(),a=Object(E.useDispatch)(),[r]=Object(_.ff)(_.q,_.r,void 0,!0);u.useEffect(()=>{const e=()=>Q().then(e=>a(w.q(e)));e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[a]);const s=(null===(t=null==r?void 0:r[X])||void 0===t?void 0:t.length)>0?new Set(r[X]):null,i=u.useMemo(()=>({tableColumns:null==r?void 0:r[X]}),[r]);return u.createElement(I.j,Object.assign({},e,{activeColumns:s,columnManagementID:X,"aria-label":n("public~Namespaces"),Header:Z,Row:te,customData:i,virtualize:!0,EmptyMsg:ae,NoDataEmptyMsg:ne}))},se=e=>{var t;const{t:n}=Object(O.useTranslation)(),a=Object(K.a)(),[r]=Object(_.ff)(_.q,_.r,void 0,!0),s=(null===(t=null==r?void 0:r[X])||void 0===t?void 0:t.length)>0?new Set(r[X]):ee();return u.createElement(I.c,Object.assign({},e,{rowFilters:W(),ListComponent:re,canCreate:!0,createHandler:()=>a(),columnLayout:{columns:Z().map(e=>i.a(e,["title","additional","id"])),id:X,selectedColumns:s,type:n("public~Namespaces")}}))},ie=[A.F.factory.Edit,H],oe=Object(C.Hb)(P.ProjectModel),ce=({showMetrics:e,showActions:t})=>[{title:y.a.t("public~Name"),id:J.name.id,sortField:"metadata.name",transforms:[m.a],props:{className:J.name.classes}},{title:y.a.t("public~Display name"),id:J.displayName.id,sortField:'metadata.annotations["openshift.io/display-name"]',transforms:[m.a],props:{className:J.displayName.classes}},{title:y.a.t("public~Status"),id:J.status.id,sortField:"status.phase",transforms:[m.a],props:{className:J.status.classes}},{title:y.a.t("public~Requester"),id:J.requester.id,sortField:"metadata.annotations.['openshift.io/requester']",transforms:[m.a],props:{className:J.requester.classes}},...e?[{title:y.a.t("public~Memory"),id:J.memory.id,sortFunc:"namespaceMemory",transforms:[m.a],props:{className:J.memory.classes}},{title:y.a.t("public~CPU"),id:J.cpu.id,sortFunc:"namespaceCPU",transforms:[m.a],props:{className:J.cpu.classes}}]:[],{title:y.a.t("public~Created"),id:J.created.id,sortField:"metadata.creationTimestamp",transforms:[m.a],props:{className:J.created.classes}},{title:y.a.t("public~Description"),id:J.description.id,sortField:"metadata.annotations.['openshift.io/description']",transforms:[m.a],props:{className:J.description.classes},additional:!0},{title:y.a.t("public~Labels"),id:J.labels.id,sortField:"metadata.labels",transforms:[m.a],props:{className:J.labels.classes},additional:!0},...t?[{title:"",props:{className:A.F.columnClass}}]:[]],le=({project:e})=>{const t=Object(E.useDispatch)(),[,n]=Object(_.ff)(_.gb,_.fb),a=new URL(window.location.href),r=new URLSearchParams(a.search),s=a.pathname;r.has("project-name")&&r.delete("project-name");const i={search:"?"+r.toString(),hash:a.hash},o=w.b(e.metadata.name,s,i);return u.createElement("span",{className:"co-resource-item co-resource-item--truncate"},u.createElement(A.fb,{kind:"Project"}),u.createElement(k.Link,{to:o,className:"co-resource-item__resource-name",onClick:a=>{Object(_.Sd)(a)||(n(e.metadata.name),sessionStorage.setItem(_.fb,e.metadata.name),t(R.b(Object(C.Hb)(P.ProjectModel),"project-name","")))}},e.metadata.name))},ue=()=>ce({showMetrics:!1,showActions:!1}),de=({obj:e,customData:t={}})=>{var n,a,r;const{t:s}=Object(O.useTranslation)(),i=Object(E.useSelector)(({UI:e})=>e.getIn(["metrics","namespace"])),o=Object(_.dd)(e),c=Object(_.Bd)(e),{ProjectLinkComponent:l,actionsEnabled:d=!0,showMetrics:m,showActions:b,isColumnManagementEnabled:h=!0,tableColumns:v}=t,g=null===(n=null==i?void 0:i.memory)||void 0===n?void 0:n[o],f=null===(a=null==i?void 0:i.cpu)||void 0===a?void 0:a[o],y=Object(_.Jc)(e),j=e.metadata.labels,k=h?(null==v?void 0:v.length)>0?new Set(v):(({showMetrics:e,showActions:t})=>new Set(ce({showMetrics:e,showActions:t}).reduce((e,t)=>(t.id&&!t.additional&&e.push(t.id),e),[])))({showMetrics:m,showActions:b}):null;return u.createElement(u.Fragment,null,u.createElement(I.k,{className:J.name.classes},t&&l?u.createElement(l,{project:e}):u.createElement("span",{className:"co-resource-item"},u.createElement(A.hb,{kind:"Project",name:e.metadata.name}))),u.createElement(I.k,{className:J.displayName.classes,columns:k,columnID:J.displayName.id},u.createElement("span",{className:"co-break-word co-line-clamp"},V(e)||u.createElement("span",{className:"text-muted"},s("public~No display name")))),u.createElement(I.k,{className:J.status.classes,columns:k,columnID:J.status.id},u.createElement(_.cc,{status:null===(r=e.status)||void 0===r?void 0:r.phase})),u.createElement(I.k,{className:p(J.requester.classes,"co-break-word"),columns:k,columnID:J.requester.id},c||u.createElement("span",{className:"text-muted"},s("public~No requester"))),m&&u.createElement(u.Fragment,null,u.createElement(I.k,{className:J.memory.classes,columns:k,columnID:J.memory.id},g?Object(A.Ob)(g)+" MiB":"-"),u.createElement(I.k,{className:J.cpu.classes,columns:k,columnID:J.cpu.id},f?s("public~{{cores}} cores",{cores:Object(A.Pb)(f)}):"-")),u.createElement(I.k,{className:J.created.classes,columns:k,columnID:J.created.id},u.createElement(A.xb,{timestamp:e.metadata.creationTimestamp})),h&&u.createElement(u.Fragment,null,u.createElement(I.k,{className:J.description.classes,columns:k,columnID:J.description.id},u.createElement("span",{className:"co-break-word co-line-clamp"},y||u.createElement("span",{className:"text-muted"},s("public~No description")))),u.createElement(I.k,{className:J.labels.classes,columns:k,columnID:J.labels.id},u.createElement(A.L,{labels:j,kind:"Project"}))),d&&u.createElement(I.k,{className:A.F.columnClass},u.createElement(A.gb,{actions:ie,kind:"Project",resource:e})))};de.displayName="ProjectTableRow";const pe=e=>{const{t:t}=Object(O.useTranslation)(),n=u.useMemo(()=>({ProjectLinkComponent:le,actionsEnabled:!1,isColumnManagementEnabled:!1}),[]);return u.createElement(I.j,Object.assign({},e,{"aria-label":t("public~Projects"),Header:ue,Row:de,customData:n,virtualize:!0}))},me=()=>ce({showMetrics:!0,showActions:!0}),be=()=>ce({showMetrics:!1,showActions:!0}),he=()=>{const{t:e}=Object(O.useTranslation)(),t=Object(_.Fe)(_.O.CAN_CREATE_NS),n=Object(_.Fe)(_.O.CAN_CREATE_PROJECT),a=t||n;return u.createElement(A.h,{title:e("public~Welcome to OpenShift")},u.createElement(U.a,{canCreate:a}))},ve=()=>{const{t:e}=Object(O.useTranslation)();return u.createElement(A.h,{title:e("public~No matching Projects"),icon:f.a},e("public~No results match the filter criteria."))},ge=e=>{var t,{data:n}=e,a=Y(e,["data"]);const{t:r}=Object(O.useTranslation)(),s=Object(E.useDispatch)(),i=Object(_.Fe)(_.O.CAN_GET_NS),[o]=Object(_.ff)(_.q,_.r,void 0,!0),c=Object(_.Ue)()&&i&&window.screen.width>=1200,l=u.useMemo(()=>({showMetrics:c,tableColumns:null==o?void 0:o[oe]}),[c,o]);u.useEffect(()=>{if(c){const e=()=>Q().then(e=>s(w.q(e)));e();const t=setInterval(e,3e4);return()=>clearInterval(t)}},[s,c]);const d=(null===(t=null==o?void 0:o[oe])||void 0===t?void 0:t.length)>0?new Set(o[oe]):null;return Object(L.c)(i)?null:u.createElement(I.j,Object.assign({},a,{activeColumns:d,columnManagementID:oe,"aria-label":r("public~Projects"),data:n,Header:c?me:be,Row:de,NoDataEmptyMsg:he,EmptyMsg:ve,customData:l,virtualize:!0}))},fe=e=>{var t;const{t:n}=Object(O.useTranslation)(),a=Object(G.a)(),r=Object(_.Fe)(_.O.CAN_GET_NS),s=Object(_.Fe)(_.O.CAN_CREATE_PROJECT),[o]=Object(_.ff)(_.q,_.r,void 0,!0),c=Object(_.Ue)()&&r&&window.screen.width>=1200,l=c;return u.createElement(I.c,Object.assign({},e,{rowFilters:W(),ListComponent:ge,canCreate:s,createHandler:()=>a(),filterLabel:n("public~by name or display name"),skipAccessReview:!0,textFilter:"project-name",kind:"Project",columnLayout:{columns:ce({showMetrics:c,showActions:l}).map(e=>i.a(e,["title","additional","id"])),id:oe,selectedColumns:(null===(t=null==o?void 0:o[oe])||void 0===t?void 0:t.length)>0?new Set(o[oe]):null,type:n("public~Project")}}))},Ee=e=>{const[t,n]=u.useState(!0),[a,r]=u.useState([]),[s,i]=u.useState(!1),{t:o}=Object(O.useTranslation)(),{namespace:c,canViewSecrets:l}=e;u.useEffect(()=>{Object(C.kb)(P.ServiceAccountModel,"default",c.metadata.name,{}).then(e=>{var t;n(!1),r(null!==(t=e.imagePullSecrets)&&void 0!==t?t:[]),i(!1)}).catch(e=>{n(!1),r([]),i(!0),console.error("Error getting default ServiceAccount",e)})},[c.metadata.name]);const d=()=>Object(x.k)({namespace:c,pullSecret:void 0});return u.createElement(u.Fragment,null,u.createElement("dt",null,o("public~Default pull Secret",{count:a.length})),u.createElement("dd",null,t?u.createElement(A.T,null):s?u.createElement(h.a,{variant:"danger",isInline:!0,title:o("Error loading default pull Secrets")}):a.length>0?a.map(e=>u.createElement("div",{key:e.name},u.createElement(A.hb,{kind:"Secret",name:e.name,namespace:c.metadata.name,linkTo:l}))):u.createElement(v.a,{variant:"link",type:"button",isInline:!0,onClick:d},o("public~Not configured"),u.createElement(j.a,{className:"co-icon-space-l pf-v5-c-button-icon--plain"}))))},Oe=({ns:e})=>{const{t:t}=Object(O.useTranslation)();return u.createElement("div",{className:"row"},u.createElement("div",{className:"col-md-6 col-sm-12"},u.createElement(M.b,{title:t("public~CPU usage"),humanize:A.Yb,namespace:e.metadata.name,query:`namespace:container_cpu_usage:sum{namespace='${e.metadata.name}'}`})),u.createElement("div",{className:"col-md-6 col-sm-12"},u.createElement(M.b,{title:t("public~Memory usage"),humanize:A.Wb,byteDataType:T.a.BinaryBytes,namespace:e.metadata.name,query:`sum by(namespace) (container_memory_working_set_bytes{namespace="${e.metadata.name}",container="",pod!=""})`})))},ye=({ns:e})=>{const{t:t}=Object(O.useTranslation)();return u.createElement(M.c,{title:t("public~Memory usage by pod (top 10)"),namespace:e.metadata.name,query:`sort_desc(topk(10, sum by (pod)(container_memory_working_set_bytes{container="",pod!="",namespace="${e.metadata.name}"})))`,humanize:A.Wb,metric:"pod"})},je=({ns:e})=>{const{t:t}=Object(O.useTranslation)();return Object(_.Ue)()?u.createElement("div",{className:"co-m-pane__body"},u.createElement(A.ob,{text:t("public~Resource usage")}),u.createElement(Oe,{ns:e}),u.createElement(ye,{ns:e})):null},ke=({ns:e})=>{var t,n,a;const{t:r}=Object(O.useTranslation)(),s=V(e),i=Object(_.Jc)(e),o=Object(_.Bd)(e),c=null===(n=null===(t=e.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n["maistra.io/member-of"],l=Object(A.Dc)({group:P.SecretModel.apiGroup,resource:P.SecretModel.plural,verb:"patch",namespace:e.metadata.name});return u.createElement("div",{className:"row"},u.createElement("div",{className:"col-sm-6 col-xs-12"},u.createElement(A.lb,{resource:e,showLabelEditor:"Namespace"===e.kind},u.createElement("dt",null,r("public~Display name")),u.createElement("dd",{className:p({"text-muted":!s})},s||r("public~No display name")),u.createElement("dt",null,r("public~Description")),u.createElement("dd",null,u.createElement("p",{className:p({"text-muted":!i,"co-pre-wrap":i,"co-namespace-summary__description":i})},i||r("public~No description"))),o&&u.createElement("dt",null,"Requester"),o&&u.createElement("dd",null,o))),u.createElement("div",{className:"col-sm-6 col-xs-12"},u.createElement("dl",{className:"co-m-pane__details"},u.createElement(A.r,{label:r("public~Status"),obj:e,path:"status.phase"},u.createElement(_.cc,{status:null===(a=e.status)||void 0===a?void 0:a.phase})),u.createElement(Ee,{namespace:e,canViewSecrets:l}),u.createElement("dt",null,r("public~NetworkPolicies")),u.createElement("dd",null,u.createElement(k.Link,{to:`/k8s/ns/${e.metadata.name}/networkpolicies`},r("public~NetworkPolicies"))),c&&u.createElement(u.Fragment,null,u.createElement("dt",null,r("public~Service mesh")),u.createElement("dd",null,u.createElement(_.X,null)," ",r("public~Service mesh enabled"))))))},_e=({obj:e,customData:t})=>{const{t:n}=Object(O.useTranslation)(),[a]=Object(S.jc)(),[r]=Object(q.a)({isList:!0,kind:Object(C.Hb)(P.ConsoleLinkModel),optional:!0}),s=Object(F.b)(e,r);return u.createElement("div",null,"dev"===a&&u.createElement(d.b,null,u.createElement("title",null,n("public~Project details"))),u.createElement("div",{className:"co-m-pane__body"},!(null==t?void 0:t.hideHeading)&&u.createElement(A.ob,{text:n("public~{{kind}} details",{kind:e.kind})}),u.createElement(ke,{ns:e})),"Namespace"===e.kind&&u.createElement(je,{ns:e}),!o.a(s)&&u.createElement("div",{className:"co-m-pane__body"},u.createElement(A.ob,{text:n("public~Launcher")}),u.createElement("ul",{className:"pf-v5-c-list pf-m-plain"},c.a(l.a(s,"spec.text"),e=>u.createElement("li",{key:e.metadata.uid},u.createElement(A.z,{href:e.spec.href,text:e.spec.text}))))))},Te=({obj:{metadata:e}})=>u.createElement(D.RoleBindingsPage,{createPath:`/k8s/ns/${e.name}/rolebindings/~new`,namespace:e.name,showTitle:!1}),Re=e=>u.createElement(I.a,Object.assign({},e,{menuActions:z,pages:[A.mc.details(_e),A.mc.editYaml(),A.mc.roles(Te)]})),Se=e=>u.createElement(I.a,Object.assign({},e,{menuActions:ie,pages:[{href:"",nameKey:"public~Overview",component:F.a},{href:"details",nameKey:"public~Details",component:_e},A.mc.editYaml(),A.mc.workloads(B.a),A.mc.roles(Te)]}))},2231:function(e,t,n){"use strict";n.r(t),n.d(t,"getStatusGroups",(function(){return p})),n.d(t,"getPodStatusGroups",(function(){return m})),n.d(t,"getNodeStatusGroups",(function(){return b})),n.d(t,"getPVCStatusGroups",(function(){return h})),n.d(t,"getPVStatusGroups",(function(){return v})),n.d(t,"getVSStatusGroups",(function(){return g}));var a=n(2233),r=n(2238),s=n(8),i=n(475);const o={[i.a.NOT_MAPPED]:["Running","Succeeded"],[i.a.ERROR]:["CrashLoopBackOff","Failed"],[i.a.PROGRESS]:["Terminating","Pending"],[i.a.WARN]:["Unknown"]},c={[i.a.NOT_MAPPED]:["Bound"],[i.a.ERROR]:["Lost"],[i.a.PROGRESS]:["Pending"]},l={[i.a.NOT_MAPPED]:["Available","Bound"],[i.a.PROGRESS]:["Released"],[i.a.ERROR]:["Failed"]},u={[i.a.NOT_MAPPED]:["Ready"],[i.a.PROGRESS]:["Not Ready"]},d={[i.a.NOT_MAPPED]:["Ready"],[i.a.PROGRESS]:["Pending"],[i.a.ERROR]:["Error"]},p=(e,t,n,a)=>{const r={[i.a.UNKNOWN]:{statusIDs:[],count:0}};return Object.keys(t).forEach(e=>{r[e]={statusIDs:[...t[e]],count:0,filterType:a}}),e.forEach(e=>{const a=n(e),s=Object.keys(t).find(e=>t[e].includes(a))||i.a.UNKNOWN;r[s].count++}),r},m=e=>p(e,o,s.Ab,"pod-status"),b=e=>p(e,u,a.a,"node-status"),h=e=>p(e,c,e=>e.status.phase,"pvc-status"),v=e=>p(e,l,e=>e.status.phase,"pv-status"),g=e=>p(e,d,r.b,"snapshot-status")},4359:function(e,t,n){"use strict";n.r(t);var a=n(5590);n.d(t,"toDefaultSecretType",(function(){return a.d})),n.d(t,"toTypeAbstraction",(function(){return a.e})),n.d(t,"generateSecret",(function(){return a.b})),n.d(t,"determineSecretType",(function(){return a.a})),n.d(t,"getImageSecretKey",(function(){return a.c})),n.d(t,"useSecretTitle",(function(){return a.g})),n.d(t,"useSecretDescription",(function(){return a.f}));var r=n(869);n.d(t,"SecretTypeAbstraction",(function(){return r.c})),n.d(t,"AUTHS_KEY",(function(){return r.a})),n.d(t,"SecretType",(function(){return r.b}));var s=n(5598);n.d(t,"SecretFormWrapper",(function(){return s.a}));var i=n(5604);n.d(t,"PullSecretForm",(function(){return i.a}));var o=n(5606);n.d(t,"PullSecretCredentialEntry",(function(){return o.a}));var c=n(5605);n.d(t,"CreateConfigSubform",(function(){return c.a}));var l=n(5607);n.d(t,"UploadConfigSubform",(function(){return l.a}));var u=n(5608);n.d(t,"WebHookSecretForm",(function(){return u.a}));var d=n(5601);n.d(t,"SourceSecretForm",(function(){return d.a}));var p=n(5602);n.d(t,"BasicAuthSubform",(function(){return p.a}));var m=n(5603);n.d(t,"SSHAuthSubform",(function(){return m.a}));var b=n(5609);n.d(t,"GenericSecretForm",(function(){return b.a}));var h=n(5610);n.d(t,"KeyValueEntryFormWithTranslation",(function(){return h.b})),n.d(t,"KeyValueEntryForm",(function(){return h.a}));var v=n(5636);n.d(t,"SecretLoadingWrapper",(function(){return v.b})),n.d(t,"EditSecret",(function(){return v.a}));var g=n(5637);n.d(t,"CreateSecret",(function(){return g.a}));var f=n(5593);n.d(t,"DroppableFileInput",(function(){return f.a}));var E=n(5600);n.d(t,"SecretSubForm",(function(){return E.a}));n(5638)},4362:function(e,t,n){"use strict";n.r(t),n.d(t,"getAnnotationTags",(function(){return L})),n.d(t,"getBuilderTags",(function(){return U})),n.d(t,"getBuilderTagsSortedByVersion",(function(){return B})),n.d(t,"getMostRecentBuilderTag",(function(){return F})),n.d(t,"isBuilder",(function(){return q})),n.d(t,"ExampleDockerCommandPopover",(function(){return Y})),n.d(t,"ImageStreamsDetails",(function(){return V})),n.d(t,"ImageStreamsDetailsPage",(function(){return z})),n.d(t,"ImageStreamsList",(function(){return Z})),n.d(t,"buildPhase",(function(){return X})),n.d(t,"ImageStreamsPage",(function(){return ee}));var a=n(0),r=n(7),s=n(16),i=n(240),o=n(2050),c=n(116),l=n(1533),u=n(22),d=n(225),p=n(7187),m=n(117),b=n(50),h=n(283),v=n(18),g=n(54),f=n(353),E=n(19),O=n(80),y=n(979),j=n(10),k=n(40),_=n(5),T=n(1198),R=n(1414),S=n(173),P=n(981),N=n(284),C=n(1413),w=n(1948),I=n(99),A=n(1411),x=n(693),D=n(5781),M=n(15);const L=e=>s.a(e,"annotations.tags","").split(/\s*,\s*/),U=e=>{const t=(e=>{const t=s.a(e,"status.tags");return o.a(t,"tag")})(e);return c.a(e.spec.tags,e=>(e=>{const t=L(e);return i.a(t,"builder")&&!i.a(t,"hidden")})(e)&&t[e.name])},B=e=>U(e).sort(({name:e},{name:t})=>{const n=h.coerce(e),a=h.coerce(t);return n||a?n?a?h.rcompare(n,a):-1:1:e.localeCompare(t)}),F=e=>{const t=B(e);return l.a(t)},q=e=>!u.a(U(e)),{common:$}=P.a.factory,K=[...P.a.getExtensionsActionsForKind(j.ImageStreamModel),...$],G=({imageStream:e,specTag:t,statusTag:n})=>{const i=s.a(e,"status"),o=s.a(n,["items",0]),c=s.a(t,"from"),l="ImageStreamTag"===s.a(t,"from.kind"),u=s.a(o,"image"),p=s.a(o,"created"),m=d.a(e,["metadata","annotations","openshift.io/image.dockerRepositoryCheck"]),{t:b}=Object(r.useTranslation)();return a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-2 col-sm-4 col-xs-4 co-break-word"},a.createElement(I.ResourceLink,{kind:"ImageStreamTag",name:Object(D.b)(e.metadata.name,n.tag),namespace:e.metadata.namespace,title:n.tag,linkTo:!!u})),a.createElement("span",{className:"col-md-3 col-sm-4 col-xs-8 co-break-all"},c&&l&&a.createElement(I.ResourceLink,{kind:"ImageStreamTag",name:c.name,namespace:e.metadata.namespace,title:c.name}),c&&!l&&a.createElement(a.Fragment,null,c.name),!c&&a.createElement("span",{className:"text-muted"},b("public~pushed image"))),a.createElement("span",{className:"col-md-4 col-sm-4 hidden-xs co-break-all"},!i&&m&&a.createElement(a.Fragment,null,a.createElement(M.tc,null)," ",b("public~Unable to resolve")),!i&&!m&&!c&&a.createElement(a.Fragment,null,b("public~Not synced yet")),!i&&!m&&c&&a.createElement(a.Fragment,null,b("public~Unresolved")),i&&u&&a.createElement(a.Fragment,null,u),i&&!u&&a.createElement(a.Fragment,null,a.createElement(M.tc,null)," ",b("public~There is no image associated with this tag"))),a.createElement("div",{className:"col-md-3 hidden-sm hidden-xs"},p&&a.createElement(x.Timestamp,{timestamp:p}),!p&&"-"))},Y=({imageStream:e,tag:t})=>{const n=s.a(e,"status.publicDockerImageRepository"),{t:i}=Object(r.useTranslation)();if(!n)return null;const o=`docker push ${n}:${t||"<tag>"}`,c=`docker pull ${n}:${t||"<tag>"}`;return a.createElement(f.a,{headerContent:a.createElement(a.Fragment,null,i("public~Image registry commands")),className:"co-example-docker-command__popover",minWidth:"600px",bodyContent:a.createElement("div",null,a.createElement("p",null,i("public~Create a new ImageStreamTag by pushing an image to this ImageStream with the desired tag.")),a.createElement("br",null),a.createElement("p",null,i("public~Authenticate to the internal registry")),a.createElement(T.a,{value:"oc registry login"}),a.createElement("br",null),a.createElement("p",null,i("public~Push an image to this ImageStream")),a.createElement(T.a,{value:o}),a.createElement("br",null),a.createElement("p",null,i("public~Pull an image from this ImageStream")),a.createElement(T.a,{value:c}),a.createElement("br",null),a.createElement("p",null,a.createElement(r.Trans,{t:i,ns:"public"},"Red Hat Enterprise Linux users may use the equivalent ",a.createElement("strong",null,"podman")," ","commands."," "),a.createElement(S.a,{href:_.p,text:i("public~Learn more.")})))},a.createElement(E.a,{className:"hidden-sm hidden-xs",type:"button",variant:"link"},a.createElement(y.a,{className:"co-icon-space-r"}),i("public~Do you need to work with this ImageStream outside of the web console?")))},V=({obj:e})=>{const{t:t}=Object(r.useTranslation)(),n=s.a(e,"status.dockerImageRepository"),i=s.a(e,"status.publicDockerImageRepository"),c=s.a(e,"status.tags.length"),l=o.a(e.spec.tags,"name"),d=p.a(e.status.tags,(n,a)=>{const r=m.a(a.conditions,e=>"ImportSuccess"===e.type&&"False"===e.status);r&&n.push(t("public~Unable to sync image for tag {{tag}}. {{message}}",{tag:`${e.metadata.name}:${a.tag}`,message:r.message}))});return a.createElement("div",null,a.createElement("div",{className:"co-m-pane__body"},!u.a(d)&&a.createElement(R.a,{variant:O.b.warning,alerts:b.a(d,(e,t)=>a.createElement(a.Fragment,{key:t},e))}),a.createElement(N.c,{text:t("public~ImageStream details")}),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6"},a.createElement(A.b,{resource:e},n&&a.createElement("dt",null,t("public~Image repository")),n&&a.createElement("dd",null,n),i&&a.createElement("dt",null,t("public~Public image repository")),i&&a.createElement("dd",null,i),a.createElement("dt",null,t("public~Image count")),a.createElement("dd",null,c||0)),a.createElement(Y,{imageStream:e})))),a.createElement("div",{className:"co-m-pane__body"},a.createElement(N.c,{text:t("public~Tags")}),u.a(e.status.tags)?a.createElement("span",{className:"text-muted"},t("public~No tags")):a.createElement("div",{className:"row"},a.createElement("div",{className:"co-m-table-grid co-m-table-grid--bordered"},a.createElement("div",{className:"row co-m-table-grid__head"},a.createElement("div",{className:"col-md-2 col-sm-4 col-xs-4"},t("public~Name")),a.createElement("div",{className:"col-md-3 col-sm-4 col-xs-8"},t("public~From")),a.createElement("div",{className:"col-md-4 col-sm-4 hidden-xs"},t("public~Identifier")),a.createElement("div",{className:"col-md-3 hidden-sm hidden-xs"},t("public~Last updated"))),a.createElement("div",{className:"co-m-table-grid__body"},b.a(e.status.tags,t=>a.createElement(G,{key:t.tag,imageStream:e,specTag:l[t.tag],statusTag:t})))))))},W=({obj:e})=>{const t=s.a(e,"status.tags");return a.createElement(D.a,{imageStreamTags:t,imageStreamName:e.metadata.name,imageStreamNamespace:e.metadata.namespace})};W.displayName="ImageStreamHistory";const H=[w.navFactory.details(V),w.navFactory.editYaml(),w.navFactory.history(W)],z=e=>a.createElement(k.a,Object.assign({},e,{kind:"ImageStream",menuActions:K,pages:H}));z.displayName="ImageStreamsDetailsPage";const Q=["","","pf-m-hidden pf-m-visible-on-md","pf-m-hidden pf-m-visible-on-lg",P.a.columnClass],J=({obj:e})=>a.createElement(a.Fragment,null,a.createElement(k.k,{className:Q[0]},a.createElement(I.ResourceLink,{kind:"ImageStream",name:e.metadata.name,namespace:e.metadata.namespace})),a.createElement(k.k,{className:v(Q[1],"co-break-word"),columnID:"namespace"},a.createElement(I.ResourceLink,{kind:"Namespace",name:e.metadata.namespace})),a.createElement(k.k,{className:Q[2]},a.createElement(C.a,{kind:"ImageStream",labels:e.metadata.labels})),a.createElement(k.k,{className:Q[3]},a.createElement(x.Timestamp,{timestamp:e.metadata.creationTimestamp})),a.createElement(k.k,{className:Q[4]},a.createElement(P.d,{actions:K,kind:"ImageStream",resource:e}))),Z=e=>{const{t:t}=Object(r.useTranslation)(),n=()=>[{title:t("public~Name"),sortField:"metadata.name",transforms:[g.a],props:{className:Q[0]}},{title:t("public~Namespace"),sortField:"metadata.namespace",transforms:[g.a],props:{className:Q[1]},id:"namespace"},{title:t("public~Labels"),sortField:"metadata.labels",transforms:[g.a],props:{className:Q[2]}},{title:t("public~Created"),sortField:"metadata.creationTimestamp",transforms:[g.a],props:{className:Q[3]}},{title:"",props:{className:Q[4]}}];return n.displayName="ImageStreamsTableHeader",a.createElement(k.j,Object.assign({},e,{"aria-label":t("public~ImageStreams"),Header:n,Row:J,virtualize:!0}))};Z.displayName="ImageStreamsList";const X=e=>e.status.phase,ee=e=>{const{t:t}=Object(r.useTranslation)();return a.createElement(k.c,Object.assign({},e,{title:t("public~ImageStreams"),kind:"ImageStream",ListComponent:Z,canCreate:!0}))};ee.displayName="ImageStreamsListPage"},5446:function(e,t,n){"use strict";n.r(t);var a=n(8118);n.d(t,"ProjectDetailsPage",(function(){return a.a}))},5586:function(e,t,n){"use strict";n.r(t);var a=n(5622);n.d(t,"PipelineModel",(function(){return a.f})),n.d(t,"PipelineModelV1Beta1",(function(){return a.g})),n.d(t,"PipelineRunModel",(function(){return a.i})),n.d(t,"PipelineRunModelV1Beta1",(function(){return a.j})),n.d(t,"TaskModel",(function(){return a.l})),n.d(t,"TaskModelV1Beta1",(function(){return a.m})),n.d(t,"TaskRunModel",(function(){return a.n})),n.d(t,"TaskRunModelV1Beta1",(function(){return a.o})),n.d(t,"CustomRunModelV1Beta1",(function(){return a.d})),n.d(t,"PipelineResourceModel",(function(){return a.h})),n.d(t,"ClusterTaskModel",(function(){return a.a})),n.d(t,"ConditionModel",(function(){return a.c})),n.d(t,"TriggerBindingModel",(function(){return a.s})),n.d(t,"ClusterTriggerBindingModel",(function(){return a.b})),n.d(t,"TriggerTemplateModel",(function(){return a.t})),n.d(t,"EventListenerModel",(function(){return a.e})),n.d(t,"RepositoryModel",(function(){return a.k})),n.d(t,"TektonConfigModel",(function(){return a.p})),n.d(t,"TektonHubModel",(function(){return a.q})),n.d(t,"TektonResultModel",(function(){return a.r}))},5587:function(e,t,n){"use strict";n(5639);var a=n(5640);n.d(t,"d",(function(){return a.a}));var r=n(5611);n.d(t,"b",(function(){return r.a})),n.d(t,"c",(function(){return r.b})),n.d(t,"e",(function(){return r.c}));var s=n(5641);n.d(t,"a",(function(){return s.a})),n.d(t,"f",(function(){return s.b}))},5588:function(e,t,n){"use strict";var a,r,s,i,o,c,l,u,d;n.d(t,"r",(function(){return a})),n.d(t,"q",(function(){return r})),n.d(t,"v",(function(){return s})),n.d(t,"t",(function(){return i})),n.d(t,"w",(function(){return o})),n.d(t,"u",(function(){return c})),n.d(t,"o",(function(){return l})),n.d(t,"x",(function(){return u})),n.d(t,"p",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"s",(function(){return m})),n.d(t,"m",(function(){return b})),n.d(t,"l",(function(){return h})),n.d(t,"k",(function(){return v})),n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return E})),n.d(t,"z",(function(){return O})),n.d(t,"y",(function(){return y})),n.d(t,"j",(function(){return j})),n.d(t,"g",(function(){return k})),n.d(t,"h",(function(){return _})),n.d(t,"n",(function(){return T})),n.d(t,"f",(function(){return R})),n.d(t,"d",(function(){return S})),n.d(t,"e",(function(){return P})),function(e){e.triggers="triggers.tekton.dev/eventlistener"}(a||(a={})),function(e){e.user="pipeline.openshift.io/started-by"}(r||(r={})),function(e){e.minVersion=" tekton.dev/pipelines.minVersion",e.tags="tekton.dev/tags",e.categories="tekton.dev/categories",e.installedFrom="openshift.io/installed-from",e.semVersion="openshift.io/sem-version"}(s||(s={})),function(e){e.redhat="Red Hat",e.community="Community",e.tektonHub="TektonHub",e.artifactHub="ArtifactHub"}(i||(i={})),function(e){e.providerType="operator.tekton.dev/provider-type",e.version="app.kubernetes.io/version"}(o||(o={})),function(e){e.pipeline="tekton.dev/pipeline",e.pipelinerun="tekton.dev/pipelineRun",e.taskrun="tekton.dev/taskRun",e.pipelineTask="tekton.dev/pipelineTask"}(c||(c={})),function(e){e.git="git",e.image="image",e.cluster="cluster",e.storage="storage"}(l||(l={})),function(e){e.NoWorkspace="noWorkspace",e.EmptyDirectory="emptyDirectory",e.ConfigMap="configMap",e.Secret="secret",e.PVC="pvc",e.VolumeClaimTemplate="volumeClaimTemplate"}(u||(u={})),function(e){e.Git="git",e.Image="docker"}(d||(d={}));d.Git,d.Image;const p="1.4.0",m="1.6.0",b="1.5.2",h="pipeline",v="bridge/pipeline-run-auto-start-failed",g=275,f=375,E=60,O="pipeline.openshift.io/preferredName",y="chains.tekton.dev/signed",j="openshift-pipelines",k="openshift",_="config";var T;!function(e){e.PIPELINE_TASK_LEVEL="pipeline/task",e.PIPELINERUN_TASKRUN_LEVEL="pipelinerun/taskrun",e.UNSUPPORTED_LEVEL="unsupported",e.UNSIMPLIFIED_METRICS_LEVEL="unsimplified"}(T||(T={}));const R="FLAG_TEKTON_V1_ENABLED",S="PIPELINES_OPERATOR_VERSION_1_16_OR_NEWER",P="PIPELINES_OPERATOR_VERSION_1_17_OR_NEWER"},5589:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"j",(function(){return f})),n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return y})),n.d(t,"c",(function(){return j})),n.d(t,"i",(function(){return k})),n.d(t,"k",(function(){return _})),n.d(t,"g",(function(){return T})),n.d(t,"h",(function(){return R})),n.d(t,"m",(function(){return S})),n.d(t,"b",(function(){return P})),n.d(t,"l",(function(){return N}));var a=n(5596),r=n(29),s=n(117),i=n(16),o=n(22),c=n(279),l=n(57),u=n(2222),d=n(8),p=n(975),m=n(5652),b=n(5659),h=n(5625),v=n(1400);const g=["deployments","deploymentConfigs","daemonSets","statefulSets","jobs","cronJobs","pods"],f=({FLAGS:e})=>e.get(p.a),E=e=>{var t,n,a;const r=s.a(e,["metadata.name","che"]);return{cheURL:null===(t=null==r?void 0:r.spec)||void 0===t?void 0:t.href,cheIconURL:null===(a=null===(n=null==r?void 0:r.spec)||void 0===n?void 0:n.applicationMenu)||void 0===a?void 0:a.imageURL}},O=(e,t,n,r)=>{if(!e)return null;const s=((e,t,n)=>{const a=`https://${e.resource}/${e.owner}/${e.name}`;if(!t)return a;const r=n?"/"+n.replace(/^\//,""):"";return e.resource.includes("github")?`${a}/tree/${t}${r}`:e.resource.includes("gitlab")?`${a}/-/tree/${t}${r}`:e.resource.includes("gitea")?`${a}/src/branch/${t}${r}`:e.resource.includes("bitbucket")&&!t.includes("/")?`${a}/src/${t}${r}`:a})(a(e),t,r);return n?`${n}/f?url=${s}&policies.create=peruser`:s},y=(e,t)=>{var n,a;return(null===(a=null===(n=s.a(e,["metadata.name","kiali-namespace-"+t]))||void 0===n?void 0:n.spec)||void 0===a?void 0:a.href)||""},j=(e,t)=>t?e.filter(e=>i.a(e,["metadata","labels","app.kubernetes.io/part-of"])===t):e,k=(e,t)=>t.length>0&&!o.a(t[0].spec)?Object(u.c)(t[0]):null,_=e=>{var t;return e?e.resource||(null===(t=e.resources)||void 0===t?void 0:t.obj):null},T=e=>{var t;return(null===(t=e)||void 0===t?void 0:t.getResource())||_(null==e?void 0:e.getData())},R=e=>e instanceof m.a?e.getResourceKind():Object(d.Db)(_(null==e?void 0:e.getData())),S=(e,t)=>{const n=null==e?void 0:e.getData(),a=T(e);if(!e||!a||!c.a(n.resources))return Promise.reject();const s=[],i=[];s.push(a),e.getType()===b.d&&l.a(n.groupResources,e=>{s.push(e.resource)});for(const e of s){const n=Object(d.vb)(Object(d.Db)(e));if(!n)return Promise.reject(new Error(r.a.t("topology~Unable to update application, invalid resource type: {{kind}}",{kind:e.kind})));i.push(Object(h.c)(n,e,t))}return Promise.all(i)},P=(e,t,n=null)=>e&&t&&e!==t?Object(v.a)(e,t,n):Promise.reject(new Error(r.a.t("topology~Can not create a connection from a node to itself."))),N=e=>{const t=T(e.getSource()),n=T(e.getTarget());return t&&n?Object(v.f)(t,n):Promise.reject()}},5590:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"g",(function(){return b})),n.d(t,"f",(function(){return h}));var a=n(279),r=n(160),s=n(107),i=n(1404),o=n(7),c=n(869);const l=e=>{switch(e){case c.c.source:return c.b.basicAuth;case c.c.image:return c.b.dockerconfigjson;default:return c.b.opaque}},u=e=>{const{data:t,type:n}=e;switch(n){case c.b.basicAuth:case c.b.sshAuth:return c.c.source;case c.b.dockerconfigjson:case c.b.dockercfg:return c.c.image;default:return(null==t?void 0:t[i.WebHookSecretKey])&&1===a.a(t)?c.c.webhook:c.c.generic}},d=()=>{const e=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e()+e()+e()+e()},p=e=>{const t=r.a(e).sort();return s.a(t,["tls.crt","tls.key"])?c.b.tls:s.a(t,["ca.crt","namespace","service-ca.crt","token"])?c.b.serviceAccountToken:s.a(t,[".dockercfg"])?c.b.dockercfg:s.a(t,[".dockerconfigjson"])?c.b.dockerconfigjson:s.a(t,["password","username"])?c.b.basicAuth:s.a(t,["ssh-privatekey"])?c.b.sshAuth:c.b.opaque},m=e=>{switch(e){case c.b.dockercfg:return".dockercfg";case c.b.dockerconfigjson:return".dockerconfigjson";default:return e}},b=(e,t)=>{const{t:n}=Object(o.useTranslation)();switch(t){case c.c.generic:return n(e?"public~Create key/value secret":"public~Edit key/value secret");case c.c.image:return n(e?"public~Create image pull secret":"public~Edit image pull secret");default:return n(e?"public~Create {{secretType}} secret":"public~Edit {{secretType}} secret",{secretType:t})}},h=e=>{const{t:t}=Object(o.useTranslation)();switch(e){case c.c.generic:return t("public~Key/value secrets let you inject sensitive data into your application as files or environment variables.");case c.c.source:return t("public~Source secrets let you authenticate against a Git server.");case c.c.image:return t("public~Image pull secrets let you authenticate against a private image registry.");case c.c.webhook:return t("public~Webhook secrets let you authenticate a webhook trigger.");default:return null}}},5591:function(e,t,n){"use strict";var a=n(5587);n.d(t,"b",(function(){return a.b})),n.d(t,"c",(function(){return a.c})),n.d(t,"d",(function(){return a.d}));var r=n(5642);n.d(t,"e",(function(){return r.a}));var s=n(5645);n.d(t,"a",(function(){return s.a}))},5592:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(5643),r=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};class s{constructor(e){this.gitsource=e}detectBuildTypes(){return r(this,void 0,void 0,(function*(){try{const e=yield this.getRepoFileList(),t=Object(a.a)(e.files);if(e.files.includes("package.json")){const e=yield this.getPackageJsonContent();if(Object(a.b)(e))return t.sort((e,t)=>"modern-webapp"===t.buildType?1:"modern-webapp"===e.buildType?-1:0)}return t}catch(e){return[]}}))}}},5593:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(0),r=n(282);const s=e=>a.createElement(r.a,Object.assign({loader:()=>Promise.resolve().then(n.bind(null,2223)).then(e=>e.DroppableFileInput)},e))},5595:function(e,t,n){"use strict";var a=n(5626);n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return a.b})),n.d(t,"d",(function(){return a.c}));n(5627);var r=n(5628);n.d(t,"e",(function(){return r.a}));n(5629),n(5630);var s=n(5631);n.d(t,"f",(function(){return s.a}));var i=n(5632);n.d(t,"a",(function(){return i.a}))},5597:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}));var a=n(380),r=n(83),s=n(437),i=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};const o="/api/dev-console/proxy/internet",c=e=>Object.keys(e).reduce((t,n)=>(t[n]=[e[n]],t),{}),l=e=>i(void 0,void 0,void 0,(function*(){const t=yield r.consoleFetchJSON.post(o,e);if(!t.statusCode)throw new Error("Unexpected proxy response: Status code is missing!");if(t.statusCode<200||t.statusCode>=300)throw new s.a("Unexpected status code: "+t.statusCode,t.statusCode,null,t);return t})),u=e=>l(e).then(e=>(e=>{try{JSON.parse(e)}catch(e){return!1}return!0})(e.body)?JSON.parse(e.body):Object(a.safeLoad)(e.body))},5598:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(501),r=n(838),s=n(2324),i=n(16),o=n(640),c=n(1256),l=n(0),u=n(137),d=n(7),p=n(320),m=n(966),b=n(19),h=n(14),v=n(8),g=n(5),f=n(118),E=n(10),O=n(5590),y=n(5600);const j=e=>{const{isCreate:t,modal:n,onCancel:j}=e,{t:k}=Object(d.useTranslation)(),_=Object(h.useNavigate)(),T=Object(h.useParams)(),R=a.a(e.obj,["metadata","type"]),S=Object(O.d)(e.secretTypeAbstraction),P=r.a({},e.fixed,R,{apiVersion:"v1",data:{},kind:"Secret",metadata:{name:""},type:S}),[N]=l.useState(e.secretTypeAbstraction),[C,w]=l.useState(P),[I,A]=l.useState(!1),[x,D]=l.useState(),[M,L]=l.useState(s.a(i.a(e.obj,"data"),e=>e?p.Base64.decode(e):"")),[U,B]=l.useState({}),[F,q]=l.useState(!1),$=Object(O.g)(t,N),K=Object(O.f)(N),G=()=>_(`/k8s/ns/${T.ns}/core~v1~Secret`),Y=e=>{L(Object.assign({},null==e?void 0:e.stringData)),B(Object.assign({},null==e?void 0:e.base64StringData))},V=e=>{D(e),A(!1)},W=e=>{const t=e.target.value,n=o.a(C);n.metadata.name=t,w(n)},H=n=>{n.preventDefault();const{metadata:a}=C;A(!0);const r=Object.assign(Object.assign({},s.a(M,e=>p.Base64.encode(e))),U),i=c.a({},C,{data:r},t?{type:Object(O.a)(M)}:{});(t?Object(v.jb)(E.SecretModel,i):Object(v.rb)(E.SecretModel,i,a.namespace,i.metadata.name)).then(t=>{A(!1),e.onSave&&e.onSave(t.metadata.name),e.modal||_(Object(g.sc)(t,Object(v.Db)(t)))},e=>{D(e.message),A(!1)})},z=()=>{var n;return l.createElement(l.Fragment,null,l.createElement("fieldset",{disabled:!t},l.createElement("div",{className:"form-group"},l.createElement("label",{className:"control-label co-required",htmlFor:"secret-name"},k("public~Secret name")),l.createElement("div",null,l.createElement("input",{className:"pf-v5-c-form-control",type:"text",onChange:W,value:null===(n=null==C?void 0:C.metadata)||void 0===n?void 0:n.name,"aria-describedby":"secret-name-help",id:"secret-name","data-test":"secret-name",required:!0}),l.createElement("p",{className:"help-block",id:"secret-name-help"},k("public~Unique name of the new secret."))))),l.createElement(y.a,{typeAbstraction:e.secretTypeAbstraction,onChange:Y,onError:V,onFormDisable:e=>q(e),stringData:M,secretType:C.type,isCreate:t}))};return n?l.createElement("form",{className:"co-create-secret-form modal-content",onSubmit:H},l.createElement(f.d,null,$),l.createElement(f.a,null,z()),l.createElement(f.c,{errorMessage:x||"",inProgress:I,submitText:k("public~Create"),cancel:j||G})):l.createElement("div",{className:"co-m-pane__form"},l.createElement(u.a,null,l.createElement("title",null,$)),l.createElement(g.Z,{title:$,helpText:K}),l.createElement("div",{className:"co-m-pane__body"},l.createElement("form",{className:"co-m-pane__body-group co-create-secret-form",onSubmit:H},z(),l.createElement(g.g,{errorMessage:x,inProgress:I},l.createElement(m.a,{className:"pf-v5-c-form"},l.createElement(b.a,{type:"submit","data-test":"save-changes",isDisabled:F,variant:"primary",id:"save-changes"},e.saveButtonText||k("public~Create")),l.createElement(b.a,{type:"button",variant:"secondary",id:"cancel",onClick:j||G},k("public~Cancel")))))))}},5599:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"k",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"m",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"l",(function(){return m})),n.d(t,"n",(function(){return b})),n.d(t,"f",(function(){return h})),n.d(t,"h",(function(){return v})),n.d(t,"b",(function(){return g})),n.d(t,"g",(function(){return f}));var a,r=n(5591),s=n(10);!function(e){e.setAccessLoading="setAccessLoading",e.setLoading="setLoading",e.setSelectedImageStream="setSelectedImageStream"}(a||(a={}));const i={[r.b.GITHUB]:"GitHub",[r.b.GITLAB]:"GitLab",[r.b.GITEA]:"Gitea",[r.b.BITBUCKET]:"Bitbucket",[r.b.UNSURE]:"Other"};var o,c,l,u;!function(e){e.git="git",e.devfile="devfile",e.docker="docker",e.s2i="s2i"}(o||(o={})),function(e){e.OpenShift="openshift",e.Kubernetes="kubernetes",e.KnativeService="knative"}(c||(c={})),function(e){e.BUILDS="BUILDS",e.SHIPWRIGHT_BUILD="SHIPWRIGHT_BUILD",e.PIPELINES="PIPELINES",e.DISABLED="DISABLED"}(l||(l={})),function(e){e["Node.js"]="nodejs",e.Quarkus="quarkus",e.dotnet="dotnet",e.Python="python",e.Go="golang",e.springboot="spring-boot"}(u||(u={}));const d={[c.OpenShift]:s.DeploymentConfigModel.labelKey,[c.Kubernetes]:s.DeploymentModel.labelKey,[c.KnativeService]:"devconsole~Serverless Deployment"},p={[l.BUILDS]:"devconsole~BuildConfig",[l.SHIPWRIGHT_BUILD]:"devconsole~Builds for OpenShift (Shipwright)",[l.PIPELINES]:"devconsole~Build using pipelines",[l.DISABLED]:"devconsole~Disabled"},m={[c.OpenShift]:s.DeploymentConfigModel.kind,[c.Kubernetes]:s.DeploymentModel.kind,[c.KnativeService]:"Service"};var b,h,v,g,f,E;!function(e){e.EDGE="edge",e.PASSTHROUGH="passthrough",e.REENCRYPT="reencrypt"}(b||(b={})),function(e){e.None="None",e.Allow="Allow",e.Redirect="Redirect"}(h||(h={})),function(e){e.None="None",e.Redirect="Redirect"}(v||(v={})),function(e){e.m="millicores",e[""]="cores"}(g||(g={})),function(e){e.Mi="Mi",e.Gi="Gi"}(f||(f={})),function(e){e.GIT="GIT",e.CONTAINER="CONTAINER",e.CATALOG="CATALOG",e.DOCKERFILE="DOCKERFILE",e.DEVFILE="DEVFILE",e.DATABASE="DATABASE",e.EVENTSOURCE="EVENTSOURCE",e.EVENTPUBSUB="EVENTPUBSUB",e.OPERATORBACKED="OPERATORBACKED",e.HELMCHARTS="HELMCHARTS",e.SAMPLES="SAMPLES",e.EVENTCHANNEL="EVENTCHANNEL",e.EVENTBROKER="EVENTBROKER",e.UPLOADJAR="UPLOADJAR"}(E||(E={}))},5600:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(0),r=n(869),s=n(5601),i=n(5604),o=n(5608),c=n(5609),l=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const u=e=>{var{typeAbstraction:t}=e,n=l(e,["typeAbstraction"]);switch(t){case r.c.source:return a.createElement(s.a,Object.assign({},n));case r.c.image:return a.createElement(i.a,Object.assign({},n));case r.c.webhook:return a.createElement(o.a,Object.assign({},n));default:return a.createElement(c.a,Object.assign({},n))}}},5601:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(0),r=n(7),s=n(5),i=n(869),o=n(5602),c=n(5603);class l extends a.Component{constructor(e){super(e),this.state={type:this.props.secretType,stringData:this.props.stringData||{},authType:i.b.basicAuth},this.changeAuthenticationType=this.changeAuthenticationType.bind(this),this.onDataChanged=this.onDataChanged.bind(this)}changeAuthenticationType(e){this.setState({type:e},()=>this.props.onChange(this.state))}onDataChanged(e){this.setState({stringData:Object.assign({},e)},()=>this.props.onChange(this.state))}render(){const{t:e}=this.props,t={[i.b.basicAuth]:e("public~Basic authentication"),[i.b.sshAuth]:e("public~SSH key")};return a.createElement(a.Fragment,null,this.props.isCreate?a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label",htmlFor:"secret-type"},e("public~Authentication type")),a.createElement("div",{className:"co-create-secret__dropdown"},a.createElement(s.t,{items:t,dropDownClassName:"dropdown--full-width",id:"dropdown-selectbox",selectedKey:this.state.authType,onChange:this.changeAuthenticationType}))):null,this.state.type===i.b.basicAuth?a.createElement(o.a,{onChange:this.onDataChanged,stringData:this.state.stringData}):a.createElement(c.a,{onChange:this.onDataChanged,stringData:this.state.stringData}))}}const u=Object(r.withTranslation)()(l)},5602:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n(7);class s extends a.Component{constructor(e){super(e),this.state={username:this.props.stringData.username||"",password:this.props.stringData.password||""},this.changeData=this.changeData.bind(this)}changeData(e){this.setState({[e.target.name]:e.target.value},()=>this.props.onChange(this.state))}render(){const{t:e}=this.props;return a.createElement(a.Fragment,null,a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label",htmlFor:"username"},e("public~Username")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:"username","data-test":"secret-username","aria-describedby":"username-help",type:"text",name:"username",onChange:this.changeData,value:this.state.username}),a.createElement("p",{className:"help-block",id:"username-help"},e("public~Optional username for Git authentication.")))),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label co-required",htmlFor:"password"},e("public~Password or token")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:"password","data-test":"secret-password","aria-describedby":"password-help",type:"password",name:"password",onChange:this.changeData,value:this.state.password,required:!0}),a.createElement("p",{className:"help-block",id:"password-help"},e("public~Password or token for Git authentication. Required if a ca.crt or .gitconfig file is not specified.")))))}}const i=Object(r.withTranslation)()(s)},5603:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n(7),s=n(5593);const i=({onChange:e,stringData:t})=>{const{t:n}=Object(r.useTranslation)();return a.createElement(s.a,{onChange:t=>{const n=t.endsWith("\n")?t:t+"\n";e({"ssh-privatekey":n})},inputFileData:t["ssh-privatekey"]||"",id:"ssh-privatekey",label:n("public~SSH private key"),inputFieldHelpText:n("public~Drag and drop file with your private SSH key here or browse to upload it."),textareaFieldHelpText:n("public~Private SSH key file for Git authentication."),isRequired:!0})}},5604:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(1240),r=n(0),s=n(7),i=n(5),o=n(5590),c=n(869),l=n(5605),u=n(5607);const d=({onChange:e,onError:t,onFormDisable:n,stringData:d,secretType:p,isCreate:m})=>{const[b,h]=r.useState("credentials"),{t:v}=Object(s.useTranslation)(),g=r.useMemo(()=>{var e;try{const t=Object(o.c)(p),n=null!==(e=d[t])&&void 0!==e?e:"{}";return JSON.parse(n)}catch(e){return t("Error parsing secret's data: "+e.message),{}}},[d,p]),f=r.useCallback(t=>{a.a(t)||n(!1);const r=t[c.a]?".dockerconfigjson":".dockercfg";e({stringData:{[r]:JSON.stringify(t)},base64StringData:{}})},[n,onchange]),E={credentials:v("public~Image registry credentials"),"config-file":v("public~Upload configuration file")};return r.createElement(r.Fragment,null,m&&r.createElement("div",{className:"form-group"},r.createElement("label",{className:"control-label",htmlFor:"secret-type"},v("public~Authentication type")),r.createElement("div",{className:"co-create-secret__dropdown"},r.createElement(i.t,{items:E,dropDownClassName:"dropdown--full-width",id:"dropdown-selectbox",selectedKey:b,onChange:h}))),"credentials"===b?r.createElement(l.a,{onChange:f,stringData:g}):r.createElement(u.a,{onChange:f,stringData:g,onDisable:n}))}},5605:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(22),r=n(840),s=n(4434),i=n(57),o=n(16),c=n(4437),l=n(4436),u=n(501),d=n(50),p=n(279),m=n(0),b=n(7),h=n(320),v=n(19),g=n(408),f=n(407),E=n(869),O=n(5606);class y extends m.Component{constructor(e){var t;super(e),this.state={isDockerconfigjson:a.a(this.props.stringData)||!!this.props.stringData[E.a],secretEntriesArray:this.imageSecretObjectToArray((null===(t=this.props.stringData)||void 0===t?void 0:t[E.a])||this.props.stringData),hasDuplicate:!1},this.onDataChanged=this.onDataChanged.bind(this)}newImageSecretEntry(){return{entry:{address:"",username:"",password:"",email:"",auth:""},uid:r.a()}}imageSecretObjectToArray(e){const t=[];return a.a(e)?s.a(t,this.newImageSecretEntry()):(i.a(e,(e,n)=>{const s=h.Base64.decode(o.a(e,"auth","")),i=a.a(s)?c.a(Array(2),""):l.a(s,":");t.push({entry:{address:n,username:o.a(e,"username",i[0]),password:o.a(e,"password",i[1]),email:o.a(e,"email",""),auth:o.a(e,"auth","")},uid:o.a(e,"uid",r.a())})}),t)}imageSecretArrayToObject(e){const t={};return i.a(e,e=>{t[e.entry.address]=u.a(e.entry,["username","password","auth","email"])}),t}propagateEntryChange(e){const t=this.imageSecretArrayToObject(e);this.props.onChange(this.state.isDockerconfigjson?{[E.a]:t}:t)}onDataChanged(e,t){this.setState(n=>{const a=[...n.secretEntriesArray],r={uid:a[t].uid,entry:e,auth:h.Base64.encode(`${e.username}:${e.password}`)};return a[t]=r,{secretEntriesArray:a}},()=>this.propagateEntryChange(this.state.secretEntriesArray))}removeEntry(e){this.setState(t=>{const n=[...t.secretEntriesArray];return n.splice(e,1),{secretEntriesArray:n}},()=>this.propagateEntryChange(this.state.secretEntriesArray))}addEntry(){this.setState({secretEntriesArray:s.a(this.state.secretEntriesArray,this.newImageSecretEntry())},()=>{this.propagateEntryChange(this.state.secretEntriesArray)})}render(){const{t:e}=this.props,t=d.a(this.state.secretEntriesArray,(t,n)=>{const{uid:a,entry:r}=null!=t?t:{},{address:s,email:i,password:o,username:c}=null!=r?r:{};return m.createElement("div",{className:"co-add-remove-form__entry",key:a},p.a(this.state.secretEntriesArray)>1&&m.createElement("div",{className:"co-add-remove-form__link--remove-entry"},m.createElement(v.a,{onClick:()=>this.removeEntry(n),type:"button",variant:"link","data-test":"remove-entry-button"},m.createElement(g.a,{className:"co-icon-space-r"}),e("public~Remove credentials"))),m.createElement(O.a,{id:n,address:s,email:i,password:o,username:c,onChange:this.onDataChanged}))});return m.createElement(m.Fragment,null,t,m.createElement(v.a,{className:"co-create-secret-form__link--add-entry pf-m-link--align-left",onClick:()=>this.addEntry(),type:"button",variant:"link","data-test":"add-credentials-button"},m.createElement(f.a,{className:"co-icon-space-r"}),e("public~Add credentials")))}}const j=Object(b.withTranslation)()(y)},5606:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n(7),s=n(320);const i=({id:e,address:t,email:n,password:i,username:o,onChange:c})=>{const{t:l}=Object(r.useTranslation)(),u=(a,r)=>{const l=o.trim(),u=i.trim(),d=o&&i?s.Base64.encode(`${l}:${u}`):"";c(Object.assign({address:t,username:o,password:i,email:n,[a]:r},d?{auth:d}:{}),e)},d=e=>u(e.currentTarget.name,e.currentTarget.value.trim()),p=e=>u(e.currentTarget.name,e.currentTarget.value);return a.createElement("div",{className:"co-m-pane__body-group","data-test-id":"create-image-secret-form"},a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label co-required",htmlFor:e+"-address"},l("public~Registry server address")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:e+"-address","aria-describedby":e+"-address-help",type:"text",name:"address",onChange:p,value:t,onBlur:d,"data-test":"image-secret-address",required:!0})),a.createElement("p",{className:"help-block",id:e+"-address-help"},l("public~For example quay.io or docker.io"))),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label co-required",htmlFor:e+"-username"},l("public~Username")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:e+"-username",type:"text",name:"username",onChange:p,value:o,onBlur:d,"data-test":"image-secret-username",required:!0}))),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label co-required",htmlFor:e+"-password"},l("public~Password")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:e+"-password",type:"password",name:"password",onChange:p,value:i,onBlur:d,"data-test":"image-secret-password",required:!0}))),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label",htmlFor:e+"-email"},l("public~Email")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:e+"-email",type:"text",name:"email",onChange:p,value:n,onBlur:d,"data-test":"image-secret-email"}))))}},5607:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(22),r=n(1973),s=n(1240),i=n(0),o=n(7),c=n(5593);class l extends i.Component{constructor(e){super(e),this.state={configFile:a.a(this.props.stringData)?"":JSON.stringify(this.props.stringData),parseError:!1},this.changeData=this.changeData.bind(this),this.onFileChange=this.onFileChange.bind(this)}changeData(e){this.updateState(r.a(JSON.parse,e.target.value),e.target.value)}onFileChange(e){this.updateState(r.a(JSON.parse,e),e)}updateState(e,t){this.setState({configFile:t,parseError:s.a(e)},()=>{this.props.onChange(e),this.props.onDisable(this.state.parseError)})}render(){const{t:e}=this.props;return i.createElement(i.Fragment,null,i.createElement(c.a,{onChange:this.onFileChange,inputFileData:this.state.configFile,id:"docker-config",label:e("public~Configuration file"),inputFieldHelpText:e("public~Upload a .dockercfg or .docker/config.json file."),textareaFieldHelpText:e("public~File with credentials and other configuration for connecting to a secured image registry."),isRequired:!0}),this.state.parseError&&i.createElement("div",{className:"co-create-secret-warning"},e("public~Configuration file should be in JSON format.")))}}const u=Object(o.withTranslation)()(l)},5608:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n(7),s=n(5590);class i extends a.Component{constructor(e){super(e),this.state={stringData:{WebHookSecretKey:this.props.stringData.WebHookSecretKey||""}},this.changeWebHookSecretkey=this.changeWebHookSecretkey.bind(this),this.generateWebHookSecret=this.generateWebHookSecret.bind(this)}changeWebHookSecretkey(e){this.setState({stringData:{WebHookSecretKey:e.target.value}},()=>this.props.onChange(this.state))}generateWebHookSecret(){this.setState({stringData:{WebHookSecretKey:Object(s.b)()}},()=>this.props.onChange(this.state))}render(){const{t:e}=this.props;return a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label co-required",htmlFor:"webhook-secret-key"},e("public~Webhook secret key")),a.createElement("div",{className:"pf-v5-c-input-group"},a.createElement("input",{className:"pf-v5-c-form-control",id:"webhook-secret-key","data-test":"secret-key",type:"text",name:"webhookSecretKey",onChange:this.changeWebHookSecretkey,value:this.state.stringData.WebHookSecretKey,"aria-describedby":"webhook-secret-help",required:!0}),a.createElement("button",{type:"button",onClick:this.generateWebHookSecret,className:"pf-v5-c-button pf-m-tertiary","data-test":"webhook-generate-button"},e("public~Generate"))),a.createElement("p",{className:"help-block",id:"webhook-secret-help"},e("public~Value of the secret will be supplied when invoking the webhook.")))}}const o=Object(r.withTranslation)()(i)},5609:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var a=n(840),r=n(22),s=n(50),i=n(255),o=n(1256),c=n(4434),l=n(279),u=n(0),d=n(7),p=n(320),m=n(19),b=n(408),h=n(407),v=n(973),g=n(5610);class f extends u.Component{constructor(e){super(e),this.state={secretEntriesArray:this.genericSecretObjectToArray(this.props.stringData)},this.onDataChanged=this.onDataChanged.bind(this)}newGenericSecretEntry(){return{entry:{key:"",value:""},uid:a.a()}}genericSecretObjectToArray(e){return r.a(e)?[this.newGenericSecretEntry()]:s.a(e,(e,t)=>{const n=v.isBinary(null,e);return{uid:a.a(),entry:{key:t,value:n?p.Base64.encode(e):e,isBase64:n,isBinary:n}}})}genericSecretArrayToObject(e){return i.a(e,(e,t)=>{var n,a;return o.a(e,{[t.entry.key]:(null===(n=t.entry)||void 0===n?void 0:n.isBase64)||(null===(a=t.entry)||void 0===a?void 0:a.isBinary)?t.entry.value:p.Base64.encode(t.entry.value)})},{})}onDataChanged(e,t){const n=[...this.state.secretEntriesArray],a={uid:n[t].uid,entry:e};n[t]=a,this.setState({secretEntriesArray:n},()=>this.props.onChange({base64StringData:this.genericSecretArrayToObject(this.state.secretEntriesArray)}))}removeEntry(e){const t=[...this.state.secretEntriesArray];t.splice(e,1),this.setState({secretEntriesArray:t},()=>this.props.onChange({base64StringData:this.genericSecretArrayToObject(this.state.secretEntriesArray)}))}addEntry(){this.setState({secretEntriesArray:c.a(this.state.secretEntriesArray,this.newGenericSecretEntry())},()=>this.props.onChange({base64StringData:this.genericSecretArrayToObject(this.state.secretEntriesArray)}))}render(){const{t:e}=this.props,t=s.a(this.state.secretEntriesArray,(t,n)=>u.createElement("div",{className:"co-add-remove-form__entry",key:t.uid},l.a(this.state.secretEntriesArray)>1&&u.createElement("div",{className:"co-add-remove-form__link--remove-entry"},u.createElement(m.a,{type:"button",onClick:()=>this.removeEntry(n),variant:"link","data-test":"remove-entry-button"},u.createElement(b.a,{className:"co-icon-space-r"}),e("public~Remove key/value"))),u.createElement(g.a,{id:n,entry:t.entry,onChange:this.onDataChanged})));return u.createElement(u.Fragment,null,t,u.createElement(m.a,{className:"co-create-secret-form__link--add-entry pf-m-link--align-left",onClick:()=>this.addEntry(),type:"button",variant:"link","data-test":"add-credentials-button"},u.createElement(h.a,{className:"co-icon-space-r"}),e("public~Add key/value")))}}const E=Object(d.withTranslation)()(f)},5610:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var a=n(0),r=n(7),s=n(5593);class i extends a.Component{constructor(e){super(e),this.state={key:e.entry.key,value:e.entry.value,isBinary:e.entry.isBinary},this.onValueChange=this.onValueChange.bind(this),this.onKeyChange=this.onKeyChange.bind(this)}onValueChange(e,t){this.setState({value:e,isBase64:t},()=>this.props.onChange(this.state,this.props.id))}onKeyChange(e){this.setState({key:e.target.value},()=>this.props.onChange(this.state,this.props.id))}render(){const{t:e}=this.props;return a.createElement("div",{className:"co-create-generic-secret__form"},a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label co-required",htmlFor:this.props.id+"-key"},e("public~Key")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:this.props.id+"-key",type:"text",name:"key",onChange:this.onKeyChange,value:this.state.key,"data-test":"secret-key",required:!0}))),a.createElement("div",{className:"form-group"},a.createElement("div",null,a.createElement(s.a,{onChange:this.onValueChange,inputFileData:this.state.value,id:this.props.id+"-value",label:e("public~Value"),inputFieldHelpText:e("public~Drag and drop file with your value here or browse to upload it."),inputFileIsBinary:this.state.isBinary}))))}}const o=Object(r.withTranslation)()(i)},5611:function(e,t,n){"use strict";var a,r,s;n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),function(e){e[e.NO_AUTH=0]="NO_AUTH",e[e.BASIC_AUTH=1]="BASIC_AUTH",e[e.SSH=2]="SSH",e[e.PERSONAL_ACCESS_TOKEN=3]="PERSONAL_ACCESS_TOKEN",e[e.OAUTH=4]="OAUTH"}(a||(a={})),function(e){e.GITHUB="github",e.BITBUCKET="bitbucket",e.GITLAB="gitlab",e.GITEA="gitea",e.UNSURE="other",e.INVALID=""}(r||(r={})),function(e){e[e.S2I=0]="S2I",e[e.DOCKERFILE=1]="DOCKERFILE",e[e.DEVFILE=2]="DEVFILE",e[e.SERVERLESS_FUNCTION=3]="SERVERLESS_FUNCTION"}(s||(s={}))},5612:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var a=n(5706),r=n(5596),s=n(320),i=n(83),o=n(5597),c=n(5587),l=n(5592),u=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};class d extends l.a{constructor(t){super(t),this.getAuthProvider=()=>{switch(this.gitsource.secretType){case c.e.PERSONAL_ACCESS_TOKEN:case c.e.BASIC_AUTH:case c.e.OAUTH:return{auth:s.Base64.decode(this.gitsource.secretContent.password)};default:return null}},this.getRepoMetadata=()=>{var e;const{name:t,owner:n,source:a}=r(this.gitsource.url),s=(null===(e=this.gitsource.contextDir)||void 0===e?void 0:e.replace(/\/$/,""))||"";return{repoName:t,owner:n,host:a,defaultBranch:this.gitsource.ref,contextDir:s,devfilePath:this.gitsource.devfilePath,dockerfilePath:this.gitsource.dockerfilePath}},this.isRepoReachable=()=>u(this,void 0,void 0,(function*(){try{if(200===(yield this.client.repos.get({owner:this.metadata.owner,repo:this.metadata.repoName})).status)return c.d.Reachable}catch(e){switch(e.status){case 403:return c.d.RateLimitExceeded;case 404:return c.d.PrivateRepo;case 422:return c.d.InvalidGitTypeSelected;default:return c.d.Unreachable}}return c.d.Unreachable})),this.getRepoBranchList=()=>u(this,void 0,void 0,(function*(){try{const e=yield this.client.repos.listBranches({owner:this.metadata.owner,repo:this.metadata.repoName});return{branches:e.data.map(e=>e.name)}}catch(e){return{branches:[]}}})),this.getRepoFileList=e=>u(this,void 0,void 0,(function*(){try{const t=yield this.client.repos.getContents(Object.assign(Object.assign({owner:this.metadata.owner,repo:this.metadata.repoName},e&&(null==e?void 0:e.specificPath)?{path:`${this.metadata.contextDir}/${e.specificPath}`}:{path:this.metadata.contextDir}),this.metadata.defaultBranch?{ref:this.metadata.defaultBranch}:{}));let n=[];return 200===t.status&&Array.isArray(t.data)&&(n=t.data.map(e=>e.name)),{files:n}}catch(e){return{files:[]}}})),this.getRepoLanguageList=()=>u(this,void 0,void 0,(function*(){try{const e=yield this.client.repos.listLanguages({owner:this.metadata.owner,repo:this.metadata.repoName});return 200===e.status?{languages:Object.keys(e.data)}:{languages:[]}}catch(e){return{languages:[]}}})),this.createRepoWebhook=(e,t,n,a)=>u(this,void 0,void 0,(function*(){const r={Accept:["application/vnd.github+json"],Authorization:["Bearer "+e],"X-GitHub-Api-Version":["2022-11-28"]},s={name:"web",active:!0,config:{url:t,content_type:"json",insecure_ssl:n?"0":"1",secret:a},events:["push","pull_request"]},c="github.com"===this.metadata.host?"https://api.github.com":`https://${this.metadata.host}/api/v3`;return 201===(yield i.consoleFetchJSON.post(o.a,{url:`${c}/repos/${this.metadata.owner}/${this.metadata.repoName}/hooks`,method:"POST",headers:r,body:JSON.stringify(s)})).statusCode})),this.isFilePresent=e=>u(this,void 0,void 0,(function*(){try{return 200===(yield this.client.repos.getContents(Object.assign({owner:this.metadata.owner,repo:this.metadata.repoName,path:e},this.metadata.defaultBranch?{ref:this.metadata.defaultBranch}:{}))).status}catch(e){return!1}})),this.getFileContent=t=>u(this,void 0,void 0,(function*(){try{const n=yield this.client.repos.getContents(Object.assign({owner:this.metadata.owner,repo:this.metadata.repoName,path:t},this.metadata.defaultBranch?{ref:this.metadata.defaultBranch}:{}));return 200===n.status?e.from(n.data.content,"base64").toString():null}catch(e){return null}})),this.isDockerfilePresent=()=>this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`),this.isTektonFolderPresent=()=>this.isFilePresent(this.metadata.contextDir+"/.tekton"),this.getDockerfileContent=()=>this.getFileContent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`),this.isFuncYamlPresent=()=>this.isFilePresent(this.metadata.contextDir+"/func.yaml")||this.isFilePresent(this.metadata.contextDir+"/func.yml"),this.getFuncYamlContent=()=>this.getFileContent(this.metadata.contextDir+"/func.yaml")||this.getFileContent(this.metadata.contextDir+"/func.yml"),this.isDevfilePresent=()=>this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`),this.getDevfileContent=()=>this.getFileContent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`),this.getPackageJsonContent=()=>this.getFileContent(this.metadata.contextDir+"/package.json");const n=this.getAuthProvider();this.metadata=this.getRepoMetadata();const l="github.com"===this.metadata.host?null:`https://${this.metadata.host}/api/v3`;this.client=new a(Object.assign(Object.assign({},n),{baseUrl:l}))}}}).call(this,n(265).Buffer)},5613:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(320),r=n(5707),s=(n(4360),n(83)),i=n(5597),o=n(5587),c=n(5592),l=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};class u extends c.a{constructor(e){super(e),this.baseURL="https://api.bitbucket.org/2.0",this.isServer=!1,this.getAuthProvider=()=>{switch(this.gitsource.secretType){case o.e.BASIC_AUTH:{const{username:e,password:t}=this.gitsource.secretContent;return{Authorization:"Basic "+a.Base64.encode(`${a.Base64.decode(e)}:${a.Base64.decode(t)}`)}}default:return null}},this.fetchJson=(e,t,n,a)=>l(this,void 0,void 0,(function*(){const r=this.getAuthProvider(),s=Object.assign(Object.assign({Accept:"application/json"},r),n);if(this.isServer)return Object(i.c)(Object.assign({url:e,method:t||"GET",headers:Object(i.d)(s)},a&&{body:JSON.stringify(a)}));const o=yield fetch(e,Object.assign({method:t||"GET",headers:s},a&&{body:JSON.stringify(a)}));if(!o.ok)throw o;return"text/plain"===o.headers.get("Content-Type")?o.text():o.json()})),this.getRepoMetadata=()=>{var e;const{name:t,owner:n,host:a}=r(this.gitsource.url),s=(null===(e=this.gitsource.contextDir)||void 0===e?void 0:e.replace(/\/$/,""))||"";return{repoName:t,owner:n,host:a,defaultBranch:this.gitsource.ref||"HEAD",contextDir:s,devfilePath:this.gitsource.devfilePath,dockerfilePath:this.gitsource.dockerfilePath}},this.isRepoReachable=()=>l(this,void 0,void 0,(function*(){const e=this.isServer?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}`;try{if((yield this.fetchJson(e)).slug===this.metadata.repoName)return o.d.Reachable}catch(e){switch(e.status){case 429:return o.d.RateLimitExceeded;case 403:return o.d.PrivateRepo;case 404:return o.d.ResourceNotFound;default:return o.d.InvalidGitTypeSelected}}return o.d.Unreachable})),this.getRepoBranchList=()=>l(this,void 0,void 0,(function*(){const e=this.isServer?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/branches`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/refs/branches`;try{const t=yield this.fetchJson(e);return{branches:t.values.map(e=>e.name)}}catch(e){return{branches:[]}}})),this.isServerURL=(e,t)=>{let n="";return n=t?e?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/files/${this.metadata.contextDir}/${t}?limit=50&at=${this.metadata.defaultBranch}`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/src/${this.metadata.defaultBranch}/${this.metadata.contextDir}/${t}?pagelen=50`:e?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/files/${this.metadata.contextDir}?limit=50&at=${this.metadata.defaultBranch}`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/src/${this.metadata.defaultBranch}/${this.metadata.contextDir}?pagelen=50`,n},this.getRepoFileList=e=>l(this,void 0,void 0,(function*(){var t;const n=(null==e?void 0:e.specificPath)?this.isServerURL(this.isServer,e.specificPath):this.isServerURL(this.isServer);try{const e=yield this.fetchJson(n);return{files:this.isServer?e.values:(null===(t=e.values)||void 0===t?void 0:t.map(e=>e.path))||[]}}catch(e){return{files:[]}}})),this.getRepoLanguageList=()=>l(this,void 0,void 0,(function*(){const e=this.isServer?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}`;try{return{languages:[(yield this.fetchJson(e)).language]}}catch(e){return{languages:[]}}})),this.createRepoWebhook=(e,t,n)=>l(this,void 0,void 0,(function*(){const a={"Content-Type":["application/json"],Authorization:["Basic "+e]},r={url:t,events:["repo:push","pullrequest:created","pullrequest:updated"],skip_cert_verification:!n,active:!0},o=this.isServer?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/hooks`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/hooks`;return 201===(yield s.consoleFetchJSON.post(i.a,{url:o,method:"POST",headers:a,body:JSON.stringify(r)})).statusCode})),this.isFilePresent=e=>l(this,void 0,void 0,(function*(){const t=e.replace(/^\//,""),n=this.isServer?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/raw/${t}?at=${this.metadata.defaultBranch}`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/src/${this.metadata.defaultBranch}/${t}`;try{return yield this.fetchJson(n),!0}catch(e){return!1}})),this.getFileContent=e=>l(this,void 0,void 0,(function*(){const t=e.replace(/^\//,""),n=this.isServer?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/raw/${t}?at=${this.metadata.defaultBranch}`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/src/${this.metadata.defaultBranch}/${t}`;try{return yield this.fetchJson(n)}catch(e){return null}})),this.isDockerfilePresent=()=>this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`),this.isTektonFolderPresent=()=>this.isFilePresent(this.metadata.contextDir+"/.tekton"),this.getDockerfileContent=()=>this.getFileContent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`),this.isFuncYamlPresent=()=>this.isFilePresent(this.metadata.contextDir+"/func.yaml")||this.isFilePresent(this.metadata.contextDir+"/func.yml"),this.getFuncYamlContent=()=>this.getFileContent(this.metadata.contextDir+"/func.yaml")||this.getFileContent(this.metadata.contextDir+"/func.yml"),this.isDevfilePresent=()=>this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`),this.getDevfileContent=()=>this.getFileContent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`),this.getPackageJsonContent=()=>this.getFileContent(this.metadata.contextDir+"/package.json"),this.metadata=this.getRepoMetadata(),"bitbucket.org"!==this.metadata.host&&(this.baseURL=`https://${this.metadata.host}/rest/api/1.0`,this.isServer=!0)}}},5614:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(5596),r=n(5708),s=n(29),i=n(320),o=n(83),c=n(5597),l=n(5587),u=n(5592),d=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};class p extends u.a{constructor(e){super(e),this.getRepo=()=>d(this,void 0,void 0,(function*(){if(this.repo)return Promise.resolve(this.repo);const e=yield this.client.Projects.show(this.metadata.fullName);if(!e)throw new Error(s.a.t("git-service~Unable to find repository"));if(e.path_with_namespace!==this.metadata.fullName)throw new Error(s.a.t("git-service~Repository path {{path}} does not match expected name {{name}}",{path:e.path_with_namespace,name:this.metadata.fullName}));return this.repo=e,Promise.resolve(this.repo)})),this.getAuthProvider=()=>{switch(this.gitsource.secretType){case l.e.PERSONAL_ACCESS_TOKEN:case l.e.OAUTH:case l.e.BASIC_AUTH:return i.Base64.decode(this.gitsource.secretContent.password);default:return null}},this.getProjectId=()=>d(this,void 0,void 0,(function*(){try{return(yield this.getRepo()).id}catch(e){throw e}})),this.isRepoReachable=()=>d(this,void 0,void 0,(function*(){try{return yield this.getRepo(),l.d.Reachable}catch(e){switch(e.status){case 429:return l.d.RateLimitExceeded;case 403:return l.d.PrivateRepo;case 404:return l.d.ResourceNotFound;case 422:return l.d.InvalidGitTypeSelected;default:return l.d.Unreachable}}})),this.getRepoBranchList=()=>d(this,void 0,void 0,(function*(){try{const e=yield this.getProjectId(),t=yield this.client.Branches.all(e);return{branches:t.map(e=>e.name)}}catch(e){return{branches:[]}}})),this.getRepoFileList=e=>d(this,void 0,void 0,(function*(){try{const t=yield this.getProjectId(),n=yield this.client.Repositories.tree(t,Object.assign({},(null==e?void 0:e.specificPath)?{path:this.filePath(e.specificPath)}:{path:this.metadata.contextDir}));return{files:n.reduce((t,n)=>(("blob"===n.type||(null==e?void 0:e.includeFolder)&&"tree"===n.type)&&t.push(n.path),t),[])}}catch(e){return{files:[]}}})),this.getRepoLanguageList=()=>d(this,void 0,void 0,(function*(){try{const e=yield this.getProjectId(),t=yield this.client.Projects.languages(e);return{languages:Object.keys(t)}}catch(e){return{languages:[]}}})),this.createRepoWebhook=(e,t,n,a)=>d(this,void 0,void 0,(function*(){const r=yield this.getProjectId(),s={"Content-Type":["application/json"],"PRIVATE-TOKEN":[e]},i={url:t,push_events:!0,merge_requests_events:!0,enable_ssl_verification:n,token:a};return 201===(yield o.consoleFetchJSON.post(c.a,{url:`${this.metadata.host}/api/v4/projects/${r}/hooks`,method:"POST",headers:s,body:JSON.stringify(i)})).statusCode})),this.isFilePresent=e=>d(this,void 0,void 0,(function*(){var t;try{const n=yield this.getProjectId(),a=this.metadata.defaultBranch||(null===(t=this.repo)||void 0===t?void 0:t.default_branch);return yield this.client.RepositoryFiles.showRaw(n,e,a),!0}catch(e){return!1}})),this.getFileContent=e=>d(this,void 0,void 0,(function*(){var t;try{const n=yield this.getProjectId(),a=this.metadata.defaultBranch||(null===(t=this.repo)||void 0===t?void 0:t.default_branch),r=e.replace(/^\/+/,"");return yield this.client.RepositoryFiles.showRaw(n,r,a)}catch(e){return null}})),this.filePath=e=>this.metadata.contextDir?`${this.metadata.contextDir}/${e}`:e,this.isDockerfilePresent=()=>this.isFilePresent(this.filePath(""+this.metadata.dockerfilePath)),this.isTektonFolderPresent=()=>d(this,void 0,void 0,(function*(){try{const e=yield this.getProjectId(),t=yield this.client.Repositories.tree(e,{path:this.metadata.contextDir});return!!t.find(e=>"tree"===e.type&&".tekton"===e.name)}catch(e){return!1}})),this.getDockerfileContent=()=>this.getFileContent(this.filePath(""+this.metadata.dockerfilePath)),this.isFuncYamlPresent=()=>this.isFilePresent(this.filePath("func.yaml"))||this.isFilePresent(this.filePath("func.yml")),this.getFuncYamlContent=()=>this.getFileContent(this.filePath("func.yaml"))||this.getFileContent(this.filePath("func.yml")),this.isDevfilePresent=()=>this.isFilePresent(this.filePath(""+this.metadata.devfilePath)),this.getDevfileContent=()=>this.getFileContent(this.filePath(""+this.metadata.devfilePath)),this.getPackageJsonContent=()=>this.getFileContent(this.filePath("package.json")),this.metadata=this.getRepoMetadata();const t=this.getAuthProvider();this.client=new r.Gitlab({host:this.metadata.host,token:t}),this.repo=null}getRepoMetadata(){const{name:e,owner:t,resource:n,full_name:r}=a(this.gitsource.url),s=(null==(i=this.gitsource.contextDir)?void 0:i.replace(/^\//,""))||"";var i;return{repoName:e,owner:t,host:"https://"+n,defaultBranch:this.gitsource.ref,fullName:r,contextDir:s,devfilePath:this.gitsource.devfilePath,dockerfilePath:this.gitsource.dockerfilePath}}}},5615:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(5596),r=n(320),s=n(22),i=(n(4360),n(83)),o=n(5597),c=n(5587),l=n(5592),u=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};class d extends l.a{constructor(e){super(e),this.isServer=!1,this.getAuthProvider=()=>{if(this.gitsource.secretType===c.e.BASIC_AUTH){const{username:e,password:t}=this.gitsource.secretContent;if(!s.a(e)){return{authorization:"Basic "+r.Base64.encode(`${r.Base64.decode(e)}:${r.Base64.decode(t)}`)}}return{Authorization:"token "+r.Base64.decode(t)}}return null},this.fetchJson=(e,t,n,a)=>u(this,void 0,void 0,(function*(){const r=this.getAuthProvider(),s=Object.assign(Object.assign({Accept:"application/json"},r),n);if(this.isServer)return Object(o.c)(Object.assign({allowInsecure:!0,url:e,method:t||"GET",headers:Object(o.d)(s)},a&&{body:JSON.stringify(a)}));const i=yield fetch(e,Object.assign({method:t||"GET",headers:s},a&&{body:JSON.stringify(a)}));if(!i.ok)throw i;return"text/plain"===i.headers.get("Content-Type")?i.text():i.json()})),this.getRepoMetadata=()=>{var e;const{name:t,owner:n,resource:r,full_name:s}=a(this.gitsource.url),i=(null===(e=this.gitsource.contextDir)||void 0===e?void 0:e.replace(/\/$/,""))||"";return{repoName:t,owner:n,host:"https://"+r,defaultBranch:this.gitsource.ref,fullName:s,contextDir:i,devfilePath:this.gitsource.devfilePath,dockerfilePath:this.gitsource.dockerfilePath}},this.isRepoReachable=()=>u(this,void 0,void 0,(function*(){const e=`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}`;try{const t=yield this.fetchJson(e);if((null==t?void 0:t.name)===this.metadata.repoName)return c.d.Reachable}catch(e){return c.d.GiteaRepoUnreachable}return c.d.GiteaRepoUnreachable})),this.getRepoBranchList=()=>u(this,void 0,void 0,(function*(){const e=`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/branches`;try{const t=yield this.fetchJson(e);return{branches:(null==t?void 0:t.map(e=>e.name))||[]}}catch(e){return{branches:[]}}})),this.getRepoFileList=e=>u(this,void 0,void 0,(function*(){const t=(null==e?void 0:e.specificPath)?`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/contents/${this.metadata.contextDir}/${e.specificPath}`:`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/contents/${this.metadata.contextDir}`;try{const e=yield this.fetchJson(t);return{files:(null==e?void 0:e.map(e=>e.name))||[]}}catch(e){return{files:[]}}})),this.getRepoLanguageList=()=>u(this,void 0,void 0,(function*(){const e=`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/languages`;try{const t=yield this.fetchJson(e);return{languages:(null==Object?void 0:Object.keys(t))||[]}}catch(e){return{languages:[]}}})),this.createRepoWebhook=(e,t)=>u(this,void 0,void 0,(function*(){const n={"Content-Type":["application/json"],Authorization:["token "+e]},a={active:!0,authorization_header:"",branch_filter:"*",config:{content_type:"json",url:t},events:["push","pull_request"],type:"gitea"},r=`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/hooks`;return 201===(yield i.consoleFetchJSON.post(o.a,{url:r,method:"POST",headers:n,body:JSON.stringify(a)})).statusCode})),this.isFilePresent=e=>u(this,void 0,void 0,(function*(){const t=e.replace(/^\//,""),n=`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/contents/${t}?ref=${this.metadata.defaultBranch}`;try{return yield this.fetchJson(n),!0}catch(e){return!1}})),this.getFileContent=e=>u(this,void 0,void 0,(function*(){const t=e.replace(/^\//,""),n=`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/raw/${t}?ref=${this.metadata.defaultBranch}`;try{return yield this.fetchJson(n)}catch(e){return console.warn("Error fetching file content",e),null}})),this.isDockerfilePresent=()=>this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`),this.isTektonFolderPresent=()=>this.isFilePresent(this.metadata.contextDir+"/.tekton"),this.getDockerfileContent=()=>this.getFileContent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`),this.isFuncYamlPresent=()=>this.isFilePresent(this.metadata.contextDir+"/func.yaml")||this.isFilePresent(this.metadata.contextDir+"/func.yml"),this.getFuncYamlContent=()=>this.getFileContent(this.metadata.contextDir+"/func.yaml")||this.getFileContent(this.metadata.contextDir+"/func.yml"),this.isDevfilePresent=()=>this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`),this.getDevfileContent=()=>this.getFileContent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`),this.getPackageJsonContent=()=>this.getFileContent(this.metadata.contextDir+"/package.json"),this.metadata=this.getRepoMetadata(),this.metadata.host.includes("gitea.com")||(this.isServer=!0)}}},5616:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(5643),r=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};const s=[{name:"Maven",type:"java",language:"java",expectedRegexp:/pom.xml/,priority:0},{name:"Gradle",type:"java",language:"java",expectedRegexp:/.*gradle.*/,priority:0},{name:"Golang",type:"golang",language:"go",expectedRegexp:RegExp([".*.\\.go","Gopkg.toml","glide.yaml"].join("|")),priority:0},{name:"Ruby",type:"ruby",language:"ruby",expectedRegexp:RegExp(["Gemfile","Rakefile","config.ru"].join("|")),priority:0},{name:"NodeJS",type:"nodejs",language:"javascript",expectedRegexp:RegExp(["app.json","package.json","gulpfile.js","Gruntfile.js"].join("|")),priority:0},{name:"Modern Web App",type:"modern-webapp",language:"javascript",expectedRegexp:/package\.json/,priority:1,customDetection:e=>r(void 0,void 0,void 0,(function*(){const t=yield e.getPackageJsonContent();return Object(a.b)(t)?["package.json"]:[]}))},{name:"PHP",type:"php",language:"php",expectedRegexp:RegExp(["index.php","composer.json"].join("|")),priority:0},{name:"Python",type:"python",language:"python",expectedRegexp:RegExp(["requirements.txt","setup.py"].join("|")),priority:0},{name:"Perl",type:"perl",language:"perl",expectedRegexp:RegExp(["index.pl","cpanfile"].join("|")),priority:0},{name:"Dotnet",type:"dotnet",language:"C#",expectedRegexp:RegExp(["project.json",".*.csproj"].join("|")),priority:0}],i=e=>r(void 0,void 0,void 0,(function*(){const{files:t}=yield e.getRepoFileList();return(yield Promise.all(s.map(n=>r(void 0,void 0,void 0,(function*(){let a=t.filter(e=>n.expectedRegexp.test(e));return a.length>0&&n.customDetection&&(a=yield n.customDetection(e)),{name:n.name,type:n.type,language:n.language,priority:n.priority,detectedFiles:a}}))))).filter(e=>!!e.detectedFiles.length).sort((e,t)=>t.priority-e.priority)}))},5617:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"g",(function(){return b})),n.d(t,"e",(function(){return h})),n.d(t,"i",(function(){return v})),n.d(t,"j",(function(){return g}));var a,r=n(29),s=n(16),i=n(240),o=n(5595);!function(e){e.PipelineRunCancelled="StoppedRunFinally",e.PipelineRunStopped="CancelledRunFinally",e.TaskRunCancelled="TaskRunCancelled",e.Cancelled="Cancelled",e.PipelineRunStopping="PipelineRunStopping",e.PipelineRunPending="PipelineRunPending",e.TaskRunStopping="TaskRunStopping",e.CreateContainerConfigError="CreateContainerConfigError",e.ExceededNodeResources="ExceededNodeResources",e.ExceededResourceQuota="ExceededResourceQuota",e.ConditionCheckFailed="ConditionCheckFailed"}(a||(a={}));const c=e=>{var t;const n=s.a(e,["status","conditions"],[]);if(0===n.length)return null;const r=n.find(e=>"Succeeded"===e.type),i=n.find(e=>"Cancelled"===e.reason);if([a.PipelineRunStopped,a.PipelineRunCancelled].includes(null===(t=e.spec)||void 0===t?void 0:t.status)&&!i)return o.a.Cancelling;if(!r||!r.status)return null;const c="True"===r.status?o.a.Succeeded:"False"===r.status?o.a.Failed:o.a.Running;if(r.reason&&r.reason!==c)switch(r.reason){case a.PipelineRunCancelled:case a.TaskRunCancelled:case a.Cancelled:case a.PipelineRunStopped:return o.a.Cancelled;case a.PipelineRunStopping:case a.TaskRunStopping:return o.a.Failed;case a.CreateContainerConfigError:case a.ExceededNodeResources:case a.ExceededResourceQuota:case a.PipelineRunPending:return o.a.Pending;case a.ConditionCheckFailed:return o.a.Skipped;default:return c}return c},l=e=>{const t=c(e);if(!t)return"-";switch(t){case o.a.Cancelled:return r.a.t("pipelines-plugin~Cancelled");case o.a.Failed:return r.a.t("pipelines-plugin~Failed");case o.a.Succeeded:return r.a.t("pipelines-plugin~Succeeded");case o.a.Pending:return r.a.t("pipelines-plugin~Pending");case o.a.Running:return r.a.t("pipelines-plugin~Running");case o.a.Skipped:return r.a.t("pipelines-plugin~Skipped");case o.a.Cancelling:return r.a.t("pipelines-plugin~Cancelling");default:return t}},u=e=>e.latestRun&&c(e.latestRun)||o.a.Other,d=e=>e.latestRun&&l(e.latestRun)||"-",p=e=>l(e)||"-",m=e=>c(e)||o.a.Other,b=(e,t)=>{var n;if(!e||!e.selected||!e.selected.length)return!0;const a=u(t);return(null===(n=e.selected)||void 0===n?void 0:n.includes(a))||!i.a(e.all,a)},h=(e,t)=>{var n;if(!e||!e.selected||!e.selected.length)return!0;const a=m(t);return(null===(n=e.selected)||void 0===n?void 0:n.includes(a))||!i.a(e.all,a)},v=e=>c(e)||o.a.Other,g=e=>l(e)||"-"},5620:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.PAC="pac",e.PIPELINE="pipeline"}(a||(a={}))},5621:function(e,t,n){"use strict";n.d(t,"f",(function(){return m})),n.d(t,"l",(function(){return b})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return v})),n.d(t,"m",(function(){return g})),n.d(t,"o",(function(){return f})),n.d(t,"n",(function(){return E})),n.d(t,"k",(function(){return O})),n.d(t,"h",(function(){return y})),n.d(t,"g",(function(){return j})),n.d(t,"e",(function(){return k})),n.d(t,"d",(function(){return _})),n.d(t,"b",(function(){return T})),n.d(t,"j",(function(){return R})),n.d(t,"i",(function(){return S}));var a=n(4413),r=n(689),s=n(5),i=n(5620),o=n(2221),c=n(5624),l=n(5599),u=n(5651);const d=/^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$/,p=/^\/.*$/,m=/^((((ssh|git|https?:?):\/\/:?)(([^\s@]+@|[^@]:?)[-\w.]+(:\d\d+:?)?(\/[-\w.~/?[\]!$&'()*+,;=:@%]*:?)?:?))|([^\s@]+@[-\w.]+:[-\w.~/?[\]!$&'()*+,;=:@%]*?:?))$/,b=r.object().shape({name:r.string().matches(/^[a-z0-9]([-a-z0-9]*[a-z0-9])?$/,"Name must consist of lower case alphanumeric characters or '-' and must start and end with an alphanumeric character.").required("Required")}),h=r.object().shape({selectedKey:r.string(),name:r.string().max(63,"Cannot be longer than 63 characters.").when("selectedKey",{is:o.b,then:r.string().required("Required")})}),v=e=>r.object().shape({replicas:r.number().transform(e=>a.a(e)?void 0:e).test(Object(c.b)(e("devconsole~Replicas must be an integer."))).min(0,e("devconsole~Replicas must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Replicas must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})).test({name:"isEmpty",test:e=>void 0!==e,message:e("devconsole~This field cannot be empty.")})}),g=r.string().oneOf([l.k.OpenShift,l.k.Kubernetes,l.k.KnativeService]).required(),f=e=>r.object().when("resources",{is:l.k.KnativeService,then:r.object().shape({scaling:r.object({minpods:r.number().transform(e=>a.a(e)?void 0:e).test(Object(c.b)(e("devconsole~Min Pods must be an integer."))).min(0,e("devconsole~Min Pods must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Min Pods must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})),maxpods:r.number().transform(e=>a.a(e)?void 0:e).test(Object(c.b)(e("devconsole~Max Pods must be an integer."))).min(1,e("devconsole~Max Pods must be greater than or equal to 1.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Max Pods must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})).test({test(e){const{minpods:t}=this.parent;return!e||e>=t},message:e("devconsole~Max Pods must be greater than or equal to Min Pods.")}),concurrencytarget:r.number().transform(e=>a.a(e)?void 0:e).test(Object(c.b)(e("devconsole~Concurrency target must be an integer."))).min(0,e("devconsole~Concurrency target must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Concurrency target must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})),concurrencylimit:r.number().transform(e=>a.a(e)?void 0:e).test(Object(c.b)(e("devconsole~Concurrency limit must be an integer."))).min(0,e("devconsole~Concurrency limit must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Concurrency limit must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})),concurrencyutilization:r.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Concurrency utilization must be between 0 and 100.")).max(100,e("devconsole~Concurrency utilization must be between 0 and 100.")),autoscale:r.object().shape({autoscalewindow:r.number().transform(e=>a.a(e)?void 0:e).test({test(e){if(e){const{autoscalewindowUnit:t}=this.parent,n=((e,t)=>{switch(t){case"m":return 60*e;case"h":return 3600*e;default:return e}})(e,t);return n>=6&&n<=3600}return!0},message:e("devconsole~Autoscale window must be between 6s and 1h.")})})}),domainMapping:r.array().of(r.string().transform(u.f).matches(d,{message:e("devconsole~Domain name must consist of lower-case letters, numbers, periods, and hyphens. It must start and end with a letter or number."),excludeEmptyString:!0}).test("domainname-has-segements",e("devconsole~Domain name must consist of at least two segments separated by dots."),(function(e){return e.split(".").length>=2})))})}),E=e=>r.object().shape({secure:r.boolean(),tls:r.object().when("secure",{is:!0,then:r.object({termination:r.string().required(e("devconsole~Please select a termination type."))})}),hostname:r.string().matches(d,{message:e("devconsole~Hostname must consist of lower-case letters, numbers, periods, and hyphens. It must start and end with a letter or number."),excludeEmptyString:!0}).max(253,e("devconsole~Cannot be longer than 253 characters.")),path:r.string().matches(p,{message:e("devconsole~Path must start with /."),excludeEmptyString:!0}),unknownTargetPort:r.number().typeError(e("devconsole~Port must be an integer.")).integer(e("devconsole~Port must be an integer.")).min(1,e("devconsole~Port must be between 1 and 65535.")).max(65535,e("devconsole~Port must be between 1 and 65535."))}),O=e=>r.object().shape({cpu:r.object().shape({request:r.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Request must be greater than or equal to 0.")).test({test(e){const{requestUnit:t,limit:n,limitUnit:a}=this.parent;return void 0===n||Object(s.Ib)(`${e}${t}`)<=Object(s.Ib)(`${n}${a}`)},message:e("devconsole~CPU request must be less than or equal to limit.")}),requestUnit:r.string(e("devconsole~Unit must be millicores or cores.")).ensure(),limitUnit:r.string(e("devconsole~Unit must be millicores or cores.")).ensure(),limit:r.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Limit must be greater than or equal to 0.")).test({test(e){const{request:t,requestUnit:n,limitUnit:a}=this.parent;return void 0===e||Object(s.Ib)(`${e}${a}`)>=Object(s.Ib)(`${t}${n}`)},message:e("devconsole~CPU limit must be greater than or equal to request.")})}),memory:r.object().shape({request:r.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Request must be greater than or equal to 0.")).test({test(e){const{requestUnit:t,limit:n,limitUnit:a}=this.parent;return void 0===n||Object(s.Ib)(`${e}${t}`)<=Object(s.Ib)(`${n}${a}`)},message:e("devconsole~Memory request must be less than or equal to limit.")}),requestUnit:r.string(e("devconsole~Unit must be Mi or Gi.")),limit:r.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Limit must be greater than or equal to 0.")).test({test(e){const{request:t,requestUnit:n,limitUnit:a}=this.parent;return void 0===e||Object(s.Ib)(`${t}${n}`)<=Object(s.Ib)(`${e}${a}`)},message:e("devconsole~Memory limit must be greater than or equal to request.")}),limitUnit:r.string(e("devconsole~Unit must be Mi or Gi."))})}),y=e=>r.object().when("build",{is:e=>"Source"===e.strategy,then:r.object().shape({selected:r.string().required(e("devconsole~Required")),tag:r.string().required(e("devconsole~Required"))})}),j=e=>r.object().shape({url:r.string().max(2e3,e("devconsole~Please enter a URL that is less then 2000 characters.")).matches(m,e("devconsole~Invalid Git URL.")).required(e("devconsole~Required")),type:r.string().when("showGitType",{is:!0,then:r.string().required(e("devconsole~We failed to detect the Git type. Please choose a Git type."))}),showGitType:r.boolean()}),k=e=>r.object().when("build",{is:e=>"Docker"===e.strategy,then:r.object().shape({containerPort:r.number().test(Object(c.b)(e("devconsole~Container port should be an integer"))),dockerfilePath:r.string().required(e("devconsole~Required"))})}),_=e=>r.object().when("build",{is:e=>"Devfile"===e.strategy,then:r.object().shape({devfilePath:r.string().required(e("devconsole~Required")),devfileContent:r.string().min(1,e("devconsole~Required")).required(e("devconsole~Required")),devfileHasError:r.boolean().oneOf([!1]),devfileSuggestedResources:r.object().required(e("devconsole~Required"))})}),T=r.object().shape({strategy:r.string()}),R=e=>r.object().shape({name:r.string().required(e("devconsole~Required")),image:r.object().required(e("devconsole~Required")),tag:r.string(),status:r.string().required(e("devconsole~Required"))}),S=r.object().when(["enabled","build.option","type"],{is:(e,t,n)=>(e||t===l.a.PIPELINES)&&n!==i.a.PAC,then:r.object().shape({templateSelected:r.string().required()})})},5622:function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return i})),n.d(t,"i",(function(){return o})),n.d(t,"j",(function(){return c})),n.d(t,"l",(function(){return l})),n.d(t,"m",(function(){return u})),n.d(t,"n",(function(){return d})),n.d(t,"o",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"h",(function(){return b})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return v})),n.d(t,"s",(function(){return g})),n.d(t,"b",(function(){return f})),n.d(t,"t",(function(){return E})),n.d(t,"e",(function(){return O})),n.d(t,"k",(function(){return y})),n.d(t,"p",(function(){return j})),n.d(t,"q",(function(){return k})),n.d(t,"r",(function(){return _}));var a=n(5654);const r=a.chart_color_green_400.value,s={apiGroup:"tekton.dev",apiVersion:"v1",label:"Pipeline",labelKey:"pipelines-plugin~Pipeline",labelPluralKey:"pipelines-plugin~Pipelines",plural:"pipelines",abbr:"PL",namespaced:!0,kind:"Pipeline",id:"pipeline",labelPlural:"Pipelines",crd:!0,color:r},i={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"Pipeline",labelKey:"pipelines-plugin~Pipeline",labelPluralKey:"pipelines-plugin~Pipelines",plural:"pipelines",abbr:"PL",namespaced:!0,kind:"Pipeline",id:"pipeline",labelPlural:"Pipelines",crd:!0,color:r},o={apiGroup:"tekton.dev",apiVersion:"v1",label:"PipelineRun",labelKey:"pipelines-plugin~PipelineRun",labelPluralKey:"pipelines-plugin~PipelineRuns",plural:"pipelineruns",abbr:"PLR",namespaced:!0,kind:"PipelineRun",id:"pipelinerun",labelPlural:"PipelineRuns",crd:!0,color:r},c={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"PipelineRun",labelKey:"pipelines-plugin~PipelineRun",labelPluralKey:"pipelines-plugin~PipelineRuns",plural:"pipelineruns",abbr:"PLR",namespaced:!0,kind:"PipelineRun",id:"pipelinerun",labelPlural:"PipelineRuns",crd:!0,color:r},l={apiGroup:"tekton.dev",apiVersion:"v1",label:"Task",labelKey:"pipelines-plugin~Task",labelPluralKey:"pipelines-plugin~Tasks",plural:"tasks",abbr:"T",namespaced:!0,kind:"Task",id:"task",labelPlural:"Tasks",crd:!0,color:r},u={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"Task",labelKey:"pipelines-plugin~Task",labelPluralKey:"pipelines-plugin~Tasks",plural:"tasks",abbr:"T",namespaced:!0,kind:"Task",id:"task",labelPlural:"Tasks",crd:!0,color:r},d={apiGroup:"tekton.dev",apiVersion:"v1",label:"TaskRun",labelKey:"pipelines-plugin~TaskRun",labelPluralKey:"pipelines-plugin~TaskRuns",plural:"taskruns",abbr:"TR",namespaced:!0,kind:"TaskRun",id:"taskrun",labelPlural:"TaskRuns",crd:!0,color:r},p={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"TaskRun",labelKey:"pipelines-plugin~TaskRun",labelPluralKey:"pipelines-plugin~TaskRuns",plural:"taskruns",abbr:"TR",namespaced:!0,kind:"TaskRun",id:"taskrun",labelPlural:"TaskRuns",crd:!0,color:r},m={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"CustomRun",labelKey:"pipelines-plugin~CustomRun",labelPluralKey:"pipelines-plugin~CustomRuns",plural:"customruns",abbr:"CR",namespaced:!0,kind:"CustomRun",id:"customrun",labelPlural:"CustomRuns",crd:!0,color:r},b={apiGroup:"tekton.dev",apiVersion:"v1alpha1",label:"PipelineResource",labelKey:"pipelines-plugin~PipelineResource",labelPluralKey:"pipelines-plugin~PipelineResources",plural:"pipelineresources",abbr:"PR",namespaced:!0,kind:"PipelineResource",id:"pipelineresource",labelPlural:"PipelineResources",crd:!0,color:r},h={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"ClusterTask",labelKey:"pipelines-plugin~ClusterTask",labelPluralKey:"pipelines-plugin~ClusterTasks",plural:"clustertasks",abbr:"CT",namespaced:!1,kind:"ClusterTask",id:"clustertask",labelPlural:"ClusterTasks",crd:!0,color:r},v={apiGroup:"tekton.dev",apiVersion:"v1alpha1",label:"Condition",labelKey:"pipelines-plugin~Condition",labelPluralKey:"pipelines-plugin~Conditions",plural:"conditions",abbr:"C",namespaced:!0,kind:"Condition",id:"condition",labelPlural:"Conditions",crd:!0,color:r},g={apiGroup:"triggers.tekton.dev",apiVersion:"v1beta1",label:"TriggerBinding",labelKey:"pipelines-plugin~TriggerBinding",labelPluralKey:"pipelines-plugin~TriggerBindings",plural:"triggerbindings",abbr:"TB",namespaced:!0,kind:"TriggerBinding",id:"triggerbinding",labelPlural:"TriggerBindings",crd:!0,color:r},f={apiGroup:"triggers.tekton.dev",apiVersion:"v1beta1",label:"ClusterTriggerBinding",labelKey:"pipelines-plugin~ClusterTriggerBinding",labelPluralKey:"pipelines-plugin~ClusterTriggerBindings",plural:"clustertriggerbindings",abbr:"CTB",namespaced:!1,kind:"ClusterTriggerBinding",id:"clustertriggerbinding",labelPlural:"ClusterTriggerBindings",crd:!0,color:r},E={apiGroup:"triggers.tekton.dev",apiVersion:"v1beta1",label:"TriggerTemplate",labelKey:"pipelines-plugin~TriggerTemplate",labelPluralKey:"pipelines-plugin~TriggerTemplates",plural:"triggertemplates",abbr:"TT",namespaced:!0,kind:"TriggerTemplate",id:"triggertemplate",labelPlural:"TriggerTemplates",crd:!0,color:r},O={apiGroup:"triggers.tekton.dev",apiVersion:"v1beta1",label:"EventListener",labelKey:"pipelines-plugin~EventListener",labelPluralKey:"pipelines-plugin~EventListeners",plural:"eventlisteners",abbr:"EL",namespaced:!0,kind:"EventListener",id:"eventlistener",labelPlural:"EventListeners",crd:!0,color:r},y={apiGroup:"pipelinesascode.tekton.dev",apiVersion:"v1alpha1",label:"Repository",labelKey:"pipelines-plugin~Repository",labelPluralKey:"pipelines-plugin~Repositories",plural:"repositories",abbr:"R",namespaced:!0,kind:"Repository",id:"repository",labelPlural:"Repositories",crd:!0,color:r},j={apiGroup:"operator.tekton.dev",apiVersion:"v1alpha1",label:"TektonConfig",labelKey:"pipelines-plugin~TektonConfig",labelPluralKey:"pipelines-plugin~TektonConfigs",plural:"tektonconfigs",abbr:"TC",namespaced:!1,kind:"TektonConfig",id:"tektonconfig",labelPlural:"TektonConfigs",crd:!0},k={apiGroup:"operator.tekton.dev",apiVersion:"v1alpha1",label:"TektonHub",labelKey:"pipelines-plugin~TektonHub",labelPluralKey:"pipelines-plugin~TektonHubs",plural:"tektonhubs",abbr:"TH",namespaced:!1,kind:"TektonHub",id:"tektonhub",labelPlural:"TektonHubs",crd:!0},_={apiGroup:"operator.tekton.dev",apiVersion:"v1alpha1",label:"TektonResult",labelKey:"pipelines-plugin~TektonResult",labelPluralKey:"pipelines-plugin~TektonResults",plural:"tektonresults",abbr:"TR",namespaced:!1,kind:"TektonResult",id:"tektonresult",labelPlural:"TektonResults",crd:!0}},5623:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return T})),n.d(t,"p",(function(){return R})),n.d(t,"h",(function(){return S})),n.d(t,"f",(function(){return P})),n.d(t,"j",(function(){return N})),n.d(t,"m",(function(){return C})),n.d(t,"o",(function(){return w})),n.d(t,"e",(function(){return I})),n.d(t,"v",(function(){return A})),n.d(t,"B",(function(){return x})),n.d(t,"d",(function(){return D})),n.d(t,"s",(function(){return L})),n.d(t,"w",(function(){return U})),n.d(t,"k",(function(){return B})),n.d(t,"l",(function(){return F})),n.d(t,"t",(function(){return q})),n.d(t,"g",(function(){return $})),n.d(t,"x",(function(){return K})),n.d(t,"y",(function(){return G})),n.d(t,"z",(function(){return Y})),n.d(t,"r",(function(){return z})),n.d(t,"u",(function(){return Q})),n.d(t,"q",(function(){return J})),n.d(t,"i",(function(){return Z})),n.d(t,"A",(function(){return X})),n.d(t,"n",(function(){return ee}));var a=n(321),r=n(29),s=n(1557),i=n(117),o=n(16),c=n(22),l=n(640),u=n(1942),d=n(5),p=n(10),m=n(8),b=n(5588),h=n(5650),v=n(5586),g=n(5595),f=n(5635),E=n(5617);const O=e=>e.resources&&e.resources.inputs&&e.resources.inputs.length>0&&!!e.resources.inputs[0].from,y=e=>e.runAfter&&e.runAfter.length>0;var j;!function(e){e.Running="Running",e.Failed="Failed",e.Succeeded="Succeeded",e.Cancelled="Cancelled",e.Other="-"}(j||(j={}));const k={[j.Running]:r.a.t("pipelines-plugin~Running"),[j.Failed]:r.a.t("pipelines-plugin~Failed"),[j.Succeeded]:r.a.t("pipelines-plugin~Succeeded"),[j.Cancelled]:r.a.t("pipelines-plugin~Cancelled"),[j.Other]:r.a.t("pipelines-plugin~Other")};var _;!function(e){e.Git="git",e.PullRequest="pullRequest",e.Image="image",e.Cluster="cluster",e.Storage="storage",e.CloudEvent="cloudEvent"}(_||(_={}));_.Git,_.PullRequest,_.Image,_.Cluster,_.Storage,_.CloudEvent;const T=(e,t,n,r=!1)=>((r?e.spec.finally:e.spec.tasks)||[]).map(e=>{var r;if(!t.status)return e;if(!n||0===n.length)return t.spec.status===E.a.PipelineRunCancelled?s.a(e,{status:{reason:g.a.Cancelled}}):t.spec.status===E.a.PipelineRunPending?s.a(e,{status:{reason:g.a.Idle}}):s.a(e,{status:{reason:g.a.Failed}});const c=i.a(n,t=>t.metadata.labels[b.u.pipelineTask]===e.name),l=null==c?void 0:c.status,u=s.a(e,{status:(null===(r=null==t?void 0:t.status)||void 0===r?void 0:r.taskRuns)?o.a(i.a(t.status.taskRuns,{pipelineTaskName:e.name}),"status"):l});if(u.status&&u.status.completionTime&&u.status.startTime){const e=new Date(u.status.completionTime).getTime()-new Date(u.status.startTime).getTime();u.status.duration=Object(a.a)(e)}return u.status?u.status&&u.status.conditions?u.status.reason=Object(E.d)(u)||g.a.Pending:u.status&&!u.status.reason&&(u.status.reason=g.a.Pending):u.status={reason:g.a.Pending},u}),R=(e,t={apiVersion:"",metadata:{},kind:"PipelineRun",spec:{}},n)=>{var a;const r=[];if(!(null===(a=e.spec)||void 0===a?void 0:a.tasks)||c.a(e.spec.tasks))return r;const s=T(e,t,n);return s.forEach(e=>{O(e)||y(e)||(0===r.length&&r.push([]),r[0].push(e))}),s.forEach(e=>{var t;if(!y(e)&&O(e)){let n=r.length-1;for(let a=0;a<r.length;a++)for(const s of r[a])(null===(t=s.taskRef)||void 0===t?void 0:t.name)!==e.resources.inputs[0].from[0]&&s.name!==e.resources.inputs[0].from[0]||(n=a);const a=r[n+1]?r[n+1]:null;a&&a[0]&&a[0].resources&&a[0].resources.inputs&&a[0].resources.inputs[0]&&a[0].resources.inputs[0].from&&a[0].resources.inputs[0].from[0]&&a[0].resources.inputs[0].from[0]===e.resources.inputs[0].from[0]?a.push(e):r.splice(n+1,0,[e])}}),s.forEach(e=>{var t;if(y(e)){let n=r.length-1;for(let a=0;a<r.length;a++)for(const s of r[a])(null===(t=s.taskRef)||void 0===t?void 0:t.name)!==e.runAfter[0]&&s.name!==e.runAfter[0]||(n=a);const a=r[n+1]?r[n+1]:null;a&&a[0].runAfter&&a[0].runAfter[0]&&a[0].runAfter[0]===e.runAfter[0]?a.push(e):r.splice(n+1,0,[e])}}),r},S=(e,t,n)=>T(e,t,n,!0),P=e=>{if(!e)return d.K;const{state:t,lastState:n}=e;return t.waiting&&!c.a(n)?d.H:t.waiting?d.K:t.terminated?d.J:d.I},N=e=>{if(!e||0===e.length)return{latestPipelineRun:null,status:g.a.PipelineNotStarted};const t=Object(f.b)(e,"creationTimestamp");if(!t)return{latestPipelineRun:null,status:g.a.PipelineNotStarted};let n=Object(E.c)(t);return"-"===n&&(n=g.a.Pending),{latestPipelineRun:t,status:n}},C=e=>e&&e.map(e=>({name:e.name,value:e.default})),w=e=>e&&e.map(e=>Object.assign({name:e.name},e.data)),I=(e,t,n)=>{const a=new Date(e).getTime(),r=((t?new Date(t).getTime():(new Date).getTime())-a)/1e3;return Object(h.g)(r,n)},A=e=>{var t,n,a,r;const s=null!==(n=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.startTime)&&void 0!==n?n:null,i=null!==(r=null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.completionTime)&&void 0!==r?r:null;return!s||!i&&"Running"!==Object(E.d)(e)?"-":I(s,i,!0)},x=(e,t,n)=>{const a=l.a(t);return a.secrets=[...a.secrets,{name:e}],n&&(a.imagePullSecrets=[...a.imagePullSecrets,{name:e}]),Object(m.rb)(p.ServiceAccountModel,a)},D=(e,t,n)=>{Object(m.kb)(p.ServiceAccountModel,b.l,t).then(t=>{void 0===i.a(t.secrets,t=>t.name===e.metadata.name)&&x(e.metadata.name,t,n)}).catch(e=>{Object(u.errorModal)({error:e.message})})},M=(e,t)=>e===b.p.Git?`tekton.dev/${b.p.Git}-${t}`:e===b.p.Image?`tekton.dev/${b.p.Image}-${t}`:null,L=(e,t={})=>{let n=0,a=M(null==e?void 0:e.key,n);if(!a)return t;for(;t[a]&&t[a]!==(null==e?void 0:e.value);)a=M(null==e?void 0:e.key,++n);return Object.assign(Object.assign({},t),{[a]:null==e?void 0:e.value})},U=e=>{switch(e.kind){case v.PipelineModel.kind:case v.TaskModel.kind:case v.EventListenerModel.kind:return"";case v.PipelineRunModel.kind:return"pipeline-runs";case v.PipelineResourceModel.kind:return"pipeline-resources";case v.ConditionModel.kind:return"conditions";case v.TaskRunModel.kind:return"task-runs";case v.ClusterTaskModel.kind:return"cluster-tasks";case v.TriggerTemplateModel.kind:return"trigger-templates";case v.TriggerBindingModel.kind:return"trigger-bindings";case v.ClusterTriggerBindingModel.kind:return"cluster-trigger-bindings";case v.RepositoryModel.kind:return"repositories";default:return null}},B=(e,t,n)=>e.filter(e=>{const{ownerReferences:a=[]}=e.metadata;return a.some(e=>e.name===t&&e.kind===n)}),F=(e,t)=>t.find(t=>t.metadata.name===e.metadata.name),q=(e,t)=>t.filter(t=>!!t.spec.resourcetemplates.find(t=>{var n;return(null===(n=t.spec.pipelineRef)||void 0===n?void 0:n.name)===e.metadata.name})),$=(e,t)=>t.reduce((t,n)=>(n.spec.triggers.filter(t=>e.find(e=>{var n;return(null==e?void 0:e.metadata.name)===(null===(n=null==t?void 0:t.template)||void 0===n?void 0:n.ref)})).length>0&&t.push(n),t),[]),K=e=>"tekton.dev/v1beta1"===e.apiVersion?v.PipelineModelV1Beta1:v.PipelineModel,G=e=>"tekton.dev/v1beta1"===e.apiVersion?v.PipelineRunModelV1Beta1:v.PipelineRunModel,Y=e=>"tekton.dev/v1beta1"===e.apiVersion?v.TaskModelV1Beta1:v.TaskModel;var V,W,H;!function(e){e.KEY="task.results.key",e.TYPE="task.results.type"}(V||(V={})),function(e){e.EXTERNAL_LINK="external-link"}(W||(W={})),function(e){e.IMAGE_REPOSITORY="IMAGE_URL",e.SBOM="LINK_TO_SBOM",e.SCAN_OUTPUT="SCAN_OUTPUT",e.TEST_OUTPUT="TEST_OUTPUT"}(H||(H={}));const z=e=>null==e?void 0:e.find(e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.annotations)||void 0===n?void 0:n[V.KEY])===H.SBOM}),Q=e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.annotations)||void 0===n?void 0:n[V.TYPE])===W.EXTERNAL_LINK},J=e=>{var t,n,a,r;return null===(r=null===(a=(null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.results)||(null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.taskResults))||void 0===a?void 0:a.find(e=>e.name===H.SBOM))||void 0===r?void 0:r.value},Z=e=>{var t,n,a,r;return null===(r=null===(a=(null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.results)||(null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.pipelineResults))||void 0===a?void 0:a.find(e=>e.name===H.IMAGE_REPOSITORY))||void 0===r?void 0:r.value},X=e=>{var t,n;if(!(null===(n=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.conditions)||void 0===n?void 0:n.length))return g.a.Pending;return Object(E.d)(e)},ee=e=>{var t,n,a;const r=null===(a=null===(n=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.conditions)||void 0===n?void 0:n.find(e=>"Succeeded"===(null==e?void 0:e.type)))||void 0===a?void 0:a.message,s=null==r?void 0:r.match(/(\w+)(?::\s*|\s+)(\d+)/g),i={};null==s||s.forEach(e=>{const[t,n]=e.split(/(?::\s*|\s+)/);i[t.trim()]=Number(n.trim())});const o=((null==i?void 0:i.Completed)||0)-((null==i?void 0:i.Failed)||0)-((null==i?void 0:i.Cancelled)||0);return{Running:(null==i?void 0:i.Incomplete)||0,Succeeded:o||0,Cancelled:(null==i?void 0:i.Cancelled)||0,Failed:(null==i?void 0:i.Failed)||0,Skipped:(null==i?void 0:i.Skipped)||0,Completed:(null==i?void 0:i.Completed)||0,Cancelling:(null==i?void 0:i.Cancelled)||0,PipelineNotStarted:0,Pending:0}}},5624:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));const a=e=>({test:e=>null==e||Number.isInteger(e),message:e}),r=/^[a-z]([a-z0-9_]-?)*[a-z0-9]$/},5625:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return j})),n.d(t,"a",(function(){return R}));var a=n(29),r=n(22),s=n(16),i=n(57),o=n(640),c=n(5649),l=n(5),u=n(10),d=n(8),p=n(76),m=n(870),b=n(5586),h=n(5623),v=n(15),g=n(2221),f=n(1400),E=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};const O=(e,t=e)=>{switch(t){case g.z:case g.b:return"";default:return e}},y=(e,t,n)=>{const a=Object.assign(Object.assign({},t.metadata.labels),{"app.kubernetes.io/part-of":n||void 0});if(!e)return Promise.reject();const s=[{op:r.a(a)?"add":"replace",path:"/metadata/labels",value:a}];return Object(d.pb)(e,t,s)},j=(e,t,n)=>{if(!t)return Promise.reject(new Error(a.a.t("topology~Error: no resource provided to update application for.")));if(!e)return Promise.reject(new Error(a.a.t("topology~Error: invalid resource kind provided for updating application.")));const r=s.a(t,["metadata","labels","app.kubernetes.io/instance"]),o=s.a(t,["metadata","labels","app.kubernetes.io/part-of"]),c=[y(e,t,n)];if(!r)return Promise.all(c);return o&&({"app.kubernetes.io/instance":r}["app.kubernetes.io/part-of"]=o),Object(f.e)(t.metadata.namespace,r,{"app.kubernetes.io/part-of":o}).then(e=>(i.a(e,e=>{i.a(e,e=>{!o&&s.a(e,["metadata","labels","app.kubernetes.io/part-of"])||c.push(y(Object(d.vb)(e.kind),e,n))})}),Promise.all(c)))},k=(e,t={},n)=>E(void 0,void 0,void 0,(function*(){var a,r;try{if(n){const n=yield Object(l.Fb)({group:e.apiGroup,resource:e.plural,verb:"list",namespace:null==t?void 0:t.ns});if(!(null===(a=null==n?void 0:n.status)||void 0===a?void 0:a.allowed))return[]}return yield Object(d.nb)(e,t)}catch(t){if(404===(null===(r=null==t?void 0:t.response)||void 0===r?void 0:r.status))return console.warn(`Ignore that model ${e.plural} was not found:`,t),[];throw console.warn(`Error while loading model ${e.plural}:`,t),t}})),_=(e,t)=>E(void 0,void 0,void 0,(function*(){var n;if(!(yield Object(l.Fb)({group:e.apiGroup,resource:e.plural,verb:"delete",name:t.metadata.name,namespace:t.metadata.namespace})).status.allowed)return console.warn(`User is not allowed to delete resource ${e.plural} ${t.metadata.name}.`),null;try{return yield Object(d.lb)(e,t)}catch(a){if(404===(null===(n=null==a?void 0:a.response)||void 0===n?void 0:n.status))return console.warn(`Resource ${e.plural} ${t.metadata.name} was not found. Ignore this error.`,a),null;throw console.warn(`Error while deleting resource ${e.plural} ${t.metadata.name}:`,a),a}})),T=(e,t)=>E(void 0,void 0,void 0,(function*(){var n,a;const r=null!==(a=null===(n=e.metadata)||void 0===n?void 0:n.annotations)&&void 0!==a?a:{},s=Object(c.c)(r["app.openshift.io/vcs-uri"]),i=yield Object(d.nb)(u.SecretModel,{ns:e.metadata.namespace});let o;if((null==t?void 0:t.length)>0)o=null==t?void 0:t.reduce((t,n)=>{var a,r;return[...t,...(null!==(r=null===(a=n.spec)||void 0===a?void 0:a.triggers)&&void 0!==r?r:[]).reduce((t,n)=>{var a,r;let o;const c=n.generic?"generic":s,l=n.generic||n[s];if(l){const t=null!==(r=null===(a=l.secretReference)||void 0===a?void 0:a.name)&&void 0!==r?r:`${e.metadata.name}-${c}-webhook-secret`;o=i.find(e=>e.metadata.name===t)}return o?[...t,_(u.SecretModel,o)]:t},[])]},[]);else{const t=i.find(t=>t.metadata.name===e.metadata.name+"-generic-webhook-secret"),n=i.find(t=>t.metadata.name===`${e.metadata.name}-${s}-webhook-secret`);o=[_(u.SecretModel,t),_(u.SecretModel,n)]}return o})),R=e=>E(void 0,void 0,void 0,(function*(){const t=[],n=yield k(u.BuildConfigModel,{ns:e.metadata.namespace}),a=yield k(u.BuildModel,{ns:e.metadata.namespace}),s=yield k(b.PipelineModel,{ns:e.metadata.namespace},!0),i=yield k(b.TriggerTemplateModel,{ns:e.metadata.namespace},!0),c=yield k(b.EventListenerModel,{ns:e.metadata.namespace},!0),l=yield Object(m.fetchChannelsCrd)(),g=Object(d.vb)(Object(d.Db)(e)),f={buildConfigs:{data:n,loaded:!0,loadError:null},builds:{data:a,loaded:!0,loadError:null}},E=Object(v.Gc)(e,f),O=!r.a(E),y=Object(h.l)(e,s);let j=[],R=[];const S=[u.ServiceModel,u.RouteModel,u.ImageStreamModel],P=[p.p,u.ImageStreamModel];r.a(y)||(S.push(b.PipelineModel),P.push(b.PipelineModel),j=Object(h.t)(y,i),R=Object(h.g)(j,c));const N=o.a(e),C=(e,n)=>{const a=_(e,n);a&&t.push(a)};O&&E.forEach(e=>{C(u.BuildConfigModel,e)});const w=(e,t)=>{e.forEach(e=>C(e,t))};switch(Object(m.isDynamicEventResourceKind)(Object(d.Db)(e))&&C(Object(d.vb)(Object(d.Db)(e)),e),l.find(t=>t.kind===e.kind)&&C(g,e),j.length>0&&j.forEach(e=>C(b.TriggerTemplateModel,e)),R.length>0&&R.forEach(e=>C(b.EventListenerModel,e)),e.kind){case u.DaemonSetModel.kind:case u.StatefulSetModel.kind:case u.JobModel.kind:case u.CronJobModel.kind:case p.f.kind:C(g,e);break;case u.DeploymentModel.kind:case u.DeploymentConfigModel.kind:C(g,e),w(S,e);break;case p.p.kind:w(P,N);break;case p.b.kind:case p.k.kind:C(g,e)}return O&&t.push(...yield T(e,E)),y&&t.push(...yield T(e)),Promise.all(t)}))},5626:function(e,t,n){"use strict";var a,r,s;n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s})),function(e){e.METRICS_PIPELINERUN_DURATION_TYPE="metrics.pipelinerun.duration-type",e.METRICS_PIPELINERUN_LEVEL="metrics.pipelinerun.level",e.METRICS_TASKRUN_DURATION_TYPE="metrics.taskrun.duration-type",e.METRICS_TASKRUN_LEVEL="metrics.taskrun.level"}(a||(a={})),function(e){e.PIPELINE="pipeline",e.PIPELINERUN="pipelinerun",e.TASK="task",e.TASKRUN="taskrun"}(r||(r={})),function(e){e.HISTOGRAM="histogram",e.LASTVALUE="lastvalue",e.NAMESPACE="namespace"}(s||(s={}))},5627:function(e,t,n){},5628:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={group:"tekton.dev",version:"v1",kind:"PipelineRun"}},5629:function(e,t,n){},5630:function(e,t,n){},5631:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={group:"tekton.dev",version:"v1",kind:"TaskRun"}},5632:function(e,t,n){"use strict";var a,r;n.d(t,"a",(function(){return a})),function(e){e.Cancelling="Cancelling",e.Succeeded="Succeeded",e.Failed="Failed",e.Running="Running",e["In Progress"]="In Progress",e.FailedToStart="FailedToStart",e.PipelineNotStarted="PipelineNotStarted",e.Skipped="Skipped",e.Cancelled="Cancelled",e.Pending="Pending",e.Idle="Idle",e.Other="-"}(a||(a={})),function(e){e.RunCancelled="RunCancelled"}(r||(r={}))},5633:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(5587),r=n(5611),s=n(5616),i=n(5661),o=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};const c=[{name:"Devfile",type:r.b.DEVFILE,expectedRegexp:/^\.?devfile\.yaml$/,priority:3},{name:"Dockerfile",type:r.b.DOCKERFILE,expectedRegexp:/^(Dockerfile|Containerfile).*/,priority:2},{name:"Serverless Function",type:r.b.SERVERLESS_FUNCTION,expectedRegexp:/^func\.(yaml|yml)$/,priority:1},{name:"Builder Image",type:r.b.S2I,expectedRegexp:/^/,priority:0,customDetection:s.a}],l=(e,t,n=!1)=>o(void 0,void 0,void 0,(function*(){let e,s=[],l=!1,u=null;const d=t?yield t.isRepoReachable():a.d.GitTypeNotDetected;let p,m=[];if(d===a.d.Reachable)try{const{files:a}=yield t.getRepoFileList({includeFolder:!0});e=yield Object(i.b)(n,t),s=yield Promise.all(c.map(e=>o(void 0,void 0,void 0,(function*(){return m=a.filter(t=>e.expectedRegexp.test(t)),m.length>0&&e.customDetection&&(p=yield e.customDetection(t)),{name:e.name,type:e.type,priority:e.priority,detectedFiles:m,detectedCustomData:p}})))),l=!0}catch(e){l=!0,u=e.message}else l=!0;return e||(s=s.filter(e=>e.type!==r.b.SERVERLESS_FUNCTION)),s=s.filter(e=>{var t;return!!e.detectedFiles.length||!!(null===(t=e.detectedCustomData)||void 0===t?void 0:t.length)}).sort((e,t)=>t.priority-e.priority),{loaded:l,loadError:u,repositoryStatus:d,strategies:s}}))},5634:function(e,t,n){"use strict";n.d(t,"i",(function(){return r})),n.d(t,"g",(function(){return s})),n.d(t,"m",(function(){return i})),n.d(t,"j",(function(){return o})),n.d(t,"k",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"l",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"o",(function(){return m})),n.d(t,"p",(function(){return b})),n.d(t,"n",(function(){return h})),n.d(t,"q",(function(){return v})),n.d(t,"d",(function(){return g})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return E})),n.d(t,"a",(function(){return O})),n.d(t,"r",(function(){return y}));var a=n(2221);const r="event-source",s="event-sink",i="kafka-sink",o="event-source-kafka",c="event-source-link",l="event-sink-link",u="event-source-kafka-link",d="event-pubsub",p="event-pubsub-link",m="knative-service",b="revision-traffic",h="knative-revision",v="sink-uri",g=a.h,f=100,E=[a.c,a.c,a.c+10,a.c],O=6,y="URI"},5635:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return v})),n.d(t,"f",(function(){return g})),n.d(t,"d",(function(){return f})),n.d(t,"i",(function(){return E})),n.d(t,"h",(function(){return y})),n.d(t,"e",(function(){return j})),n.d(t,"g",(function(){return k})),n.d(t,"c",(function(){return _})),n.d(t,"l",(function(){return R})),n.d(t,"m",(function(){return S})),n.d(t,"j",(function(){return P})),n.d(t,"k",(function(){return N}));var a=n(5699),r=n(1403),s=n(5692),i=n(5691),o=n(5654),c=n(2225),l=n(29),u=n(8),d=n(5588),p=n(5586),m=n(5595),b=n(5617);const h=(e,t)=>{if(!(e&&e.length>0&&t))return null;let n=e[0];if("creationTimestamp"===t)for(let a=1;a<e.length;a++)n=e[a]&&e[a].metadata&&e[a].metadata[t]&&new Date(e[a].metadata[t])>new Date(n.metadata[t])?e[a]:n;else if("startTime"===t||"completionTime"===t)for(let a=1;a<e.length;a++)n=e[a]&&e[a].status&&e[a].status[t]&&new Date(e[a].status[t])>new Date(n.status[t])?e[a]:n;else n=e[e.length-1];return n.status||(n=Object.assign(Object.assign({},n),{status:{pipelineSpec:{tasks:[]}}})),n.status.succeededCondition||(n.status=Object.assign(Object.assign({},n.status),{succeededCondition:""})),n.status.succeededCondition=Object(b.c)(n),n},v=(e,t)=>e.map(e=>{const n=t.filter(t=>{var n;return(null===(n=t.metadata.labels)||void 0===n?void 0:n["tekton.dev/pipeline"])===e.metadata.name});return e.latestRun=h(n,"creationTimestamp"),e}),g=e=>{switch(e){case m.a.Succeeded:return{message:l.a.t("pipelines-plugin~Succeeded"),pftoken:o.chart_color_green_400};case m.a.Failed:return{message:l.a.t("pipelines-plugin~Failed"),pftoken:c.global_danger_color_100};case m.a.FailedToStart:return{message:l.a.t("pipelines-plugin~PipelineRun failed to start"),pftoken:c.global_danger_color_100};case m.a.Running:case m.a["In Progress"]:return{message:l.a.t("pipelines-plugin~Running"),pftoken:i.chart_color_blue_300};case m.a.Skipped:return{message:l.a.t("pipelines-plugin~Skipped"),pftoken:a.chart_color_black_400};case m.a.Cancelled:return{message:l.a.t("pipelines-plugin~Cancelled"),pftoken:r.chart_color_black_500};case m.a.Cancelling:return{message:l.a.t("pipelines-plugin~Cancelling"),pftoken:r.chart_color_black_500};case m.a.Idle:case m.a.Pending:return{message:l.a.t("pipelines-plugin~Pending"),pftoken:s.chart_color_blue_100};default:return{message:l.a.t("pipelines-plugin~PipelineRun not started yet"),pftoken:s.chart_color_blue_100}}},f=e=>{var t,n,a,r,s;const i=(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n[d.u.pipeline])||(null===(a=null==e?void 0:e.metadata)||void 0===a?void 0:a.name),o=(null===(r=null==e?void 0:e.status)||void 0===r?void 0:r.pipelineSpec)||(null===(s=null==e?void 0:e.spec)||void 0===s?void 0:s.pipelineSpec);return i&&o?{apiVersion:Object(u.n)(p.PipelineModel),kind:p.PipelineModel.kind,metadata:{name:i,namespace:e.metadata.namespace},spec:o}:null},E=(e,t,n)=>{var a,r,s,i,o;const c=(e=>{var t,n,a,r;if(!e)return 0;return(null!==(n=((null===(t=e.spec)||void 0===t?void 0:t.tasks)||[]).length)&&void 0!==n?n:0)+(null!==(r=((null===(a=e.spec)||void 0===a?void 0:a.finally)||[]).length)&&void 0!==r?r:0)})(t)-(e=>{var t,n,a,r;if(!e)return 0;return(null!==(n=((null===(t=e.spec)||void 0===t?void 0:t.tasks)||[]).filter(e=>{var t,n;return"Task"!==(null===(t=e.taskRef)||void 0===t?void 0:t.kind)&&"ClusterTask"!==(null===(n=e.taskRef)||void 0===n?void 0:n.kind)}).length)&&void 0!==n?n:0)+(null!==(r=((null===(a=e.spec)||void 0===a?void 0:a.finally)||[]).filter(e=>{var t,n;return"Task"!==(null===(t=e.taskRef)||void 0===t?void 0:t.kind)&&"ClusterTask"!==(null===(n=e.taskRef)||void 0===n?void 0:n.kind)}).length)&&void 0!==r?r:0)})(t),l=()=>{var t;return(null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.taskRuns)?Object.keys(e.status.taskRuns):n?null==n?void 0:n.map(e=>e.metadata.name):[]},u=l().length,d=((null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.skippedTasks)||[]).length,p={PipelineNotStarted:0,Pending:0,Running:0,Succeeded:0,Failed:0,Cancelled:0,Skipped:d};if((null===(r=null==e?void 0:e.status)||void 0===r?void 0:r.taskRuns)||n){l().forEach(t=>{const a=Object(b.c)((null==n?void 0:n.find(e=>e.metadata.name===t))||e.status.taskRuns[t]);"Succeeded"===a?p[m.a.Succeeded]++:"Running"===a?p[m.a.Running]++:"Failed"===a?p[m.a.Failed]++:"Cancelled"===a?p[m.a.Cancelled]++:p[m.a.Pending]++});const t=p[m.a.Failed]>0,a=Object(b.c)(e)===m.a.Cancelled,r=c>=u?c-u-d:c;t||a?p[m.a.Cancelled]+=r:p[m.a.Pending]+=r}else"False"===(null===(o=null===(i=null===(s=null==e?void 0:e.status)||void 0===s?void 0:s.conditions)||void 0===i?void 0:i[0])||void 0===o?void 0:o.status)||(null==e?void 0:e.spec.status)===b.a.PipelineRunCancelled?p[m.a.Cancelled]=c:(null==e?void 0:e.spec.status)===b.a.PipelineRunPending?p[m.a.Pending]+=c:p[m.a.PipelineNotStarted]++;return p},O=e=>e===p.ClusterTaskModel.kind?p.ClusterTaskModel:e===p.TaskModel.kind||void 0===e?p.TaskModel:null,y=e=>(O(e)||p.TaskModel).kind,j=e=>e===p.ClusterTriggerBindingModel.kind?p.ClusterTriggerBindingModel:e===p.TriggerBindingModel.kind||void 0===e?p.TriggerBindingModel:null,k=e=>(j(e)||p.TriggerBindingModel).kind,_=e=>{const t=O(e);return Object(u.Hb)(t)},T=(e,t)=>{const n=t&&E(e,void 0,t);return null==n?void 0:n.Running},R=(e,t)=>!(e&&(T(e,t)>0||Object(b.c)(e)===m.a.Running)),S=(e,t)=>!(e&&((null==t?void 0:t.Running)>0||Object(b.c)(e)===m.a.Running)),P=(e,t)=>!(e&&T(e,t)>0&&Object(b.c)(e)!==m.a.Cancelled),N=(e,t)=>!(e&&(null==t?void 0:t.Running)>0&&Object(b.c)(e)!==m.a.Cancelled)},5636:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var a=n(22),r=n(0),s=n(7),i=n(14),o=n(5),c=n(869),l=n(5590),u=n(5598);const d=Object(s.withTranslation)()(class extends r.Component{constructor(){super(...arguments),this.state={secretTypeAbstraction:c.c.generic}}componentDidUpdate(){if(!a.a(this.props.obj.data)){const e=Object(l.e)(this.props.obj.data);this.state.secretTypeAbstraction!==e&&this.setState({secretTypeAbstraction:e})}}render(){const{obj:e,fixedKeys:t}=this.props,{secretTypeAbstraction:n}=this.state;if(!n)return r.createElement(o.S,null);const a=null==t?void 0:t.reduce((t,n)=>{var a;return Object.assign(Object.assign({},t),{[n]:(null===(a=e.data)||void 0===a?void 0:a[n])||""})},{});return r.createElement(o.wb,Object.assign({},e),r.createElement(u.a,Object.assign({},this.props,{secretTypeAbstraction:n,obj:e.data,fixed:a})))}}),p=({kind:e})=>{const t=Object(i.useParams)(),{t:n}=Object(s.useTranslation)();return r.createElement(o.C,{resources:[{kind:e,name:t.name,namespace:t.ns,isList:!1,prop:"obj"}]},r.createElement(d,{fixedKeys:["kind","metadata"],saveButtonText:n("public~Save")}))}},5637:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n(14),s=n(5598);const i=()=>{const e=Object(r.useParams)(),t=e.type;return a.createElement(s.a,{fixed:{metadata:{namespace:e.ns}},secretTypeAbstraction:t,isCreate:!0})}},5638:function(e,t,n){},5639:function(e,t,n){},5640:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.Reachable=0]="Reachable",e[e.Unreachable=1]="Unreachable",e[e.RateLimitExceeded=2]="RateLimitExceeded",e[e.GitTypeNotDetected=3]="GitTypeNotDetected",e[e.InvalidGitTypeSelected=4]="InvalidGitTypeSelected",e[e.PrivateRepo=5]="PrivateRepo",e[e.ResourceNotFound=6]="ResourceNotFound",e[e.GiteaRepoUnreachable=7]="GiteaRepoUnreachable"}(a||(a={}))},5641:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));const a={name:"Maven",type:"java",language:"java",expectedRegexps:RegExp(["pom.xml"].join("|")),expectedFiles:["pom.xml"]},r={name:"Gradle",type:"java",language:"java",expectedRegexps:RegExp([".*gradle.*"].join("|")),expectedFiles:["build.gradle","gradlew","gradlew.bat"]},s={name:"Golang",type:"golang",language:"go",expectedRegexps:RegExp([".*.\\.go","Gopkg.toml","glide.yaml"].join("|")),expectedFiles:["main.go","Gopkg.toml","glide.yaml"]},i={name:"Ruby",type:"ruby",language:"ruby",expectedRegexps:RegExp(["Gemfile","Rakefile","config.ru"].join("|")),expectedFiles:["Gemfile","Rakefile","config.ru"]},o={name:"NodeJS",type:"nodejs",language:"javascript",expectedRegexps:RegExp(["app.json","package.json","gulpfile.js","Gruntfile.js"].join("|")),expectedFiles:["app.json","package.json","gulpfile.js","Gruntfile.js"]},c={name:"Modern Web App",type:"modern-webapp",language:"javascript",expectedRegexps:RegExp(["app.json","package.json","gulpfile.js","Gruntfile.js"].join("|")),expectedFiles:["app.json","package.json","gulpfile.js","Gruntfile.js"]},l={name:"PHP",type:"php",language:"php",expectedRegexps:RegExp(["index.php","composer.json"].join("|")),expectedFiles:["index.php","composer.json"]},u={name:"Python",type:"python",language:"python",expectedRegexps:RegExp(["requirements.txt","setup.py"].join("|")),expectedFiles:["requirements.txt","setup.py"]},d={name:"Perl",type:"perl",language:"perl",expectedRegexps:RegExp(["index.pl","cpanfile"].join("|")),expectedFiles:["index.pl","cpanfile"]},p=[{name:"Dotnet",type:"dotnet",language:"C#",expectedRegexps:RegExp(["project.json",".*.csproj"].join("|")),expectedFiles:["project.json","app.csproj"]},s,r,a,o,c,d,l,u,i],m=["react","angular","@angular/core","vue","knockout","knockback"]},5642:function(e,t,n){"use strict";n(5612),n(5613),n(5614),n(5615);var a=n(5644);n.d(t,"a",(function(){return a.a}));n(5592)},5643:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var a=n(5587);function r(e){return a.a.map(t=>{const n=e.filter(e=>t.expectedRegexps.test(e));return{buildType:t.type,language:t.language,files:n}}).filter(e=>e.files.length>0).sort((e,t)=>t.files.length-e.files.length)}function s(e){try{const t=JSON.parse(e);return a.f.some(e=>e in t.dependencies)}catch(e){return!1}}},5644:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(4359),r=n(5587),s=n(5613),i=n(5615),o=n(5612),c=n(5614);function l(e,t,n,l,u,d,p){let m,b;switch(null==u?void 0:u.type){case a.SecretType.basicAuth:m=r.e.BASIC_AUTH,b=u.data;break;case a.SecretType.sshAuth:m=r.e.SSH,b=u["ssh-privatekey"];break;default:m=r.e.NO_AUTH}const h={url:e,ref:n,contextDir:l,secretType:m,secretContent:b,devfilePath:d,dockerfilePath:p};switch(t){case r.b.GITHUB:return new o.a(h);case r.b.BITBUCKET:return new s.a(h);case r.b.GITLAB:return new c.a(h);case r.b.GITEA:return new i.a(h);default:return null}}},5645:function(e,t,n){"use strict";n(5616);var a=n(5646);n.d(t,"a",(function(){return a.a}));n(5633)},5646:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(5709);class r{constructor(e){this.content=e,this.parsedCommands=this.parse()}parse(){let e=[];try{e=Object(a.parse)(this.content)}catch(e){}return e}getContainerPort(){const e=this.parsedCommands.filter(e=>"EXPOSE"===e.name);if(e.length>0){const t=e[0];if(t.args.length>0)return Number(t.args[0])}return null}}},5647:function(e,t,n){"use strict";n.d(t,"e",(function(){return v})),n.d(t,"c",(function(){return g})),n.d(t,"h",(function(){return f})),n.d(t,"a",(function(){return E})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return y})),n.d(t,"j",(function(){return j})),n.d(t,"k",(function(){return k})),n.d(t,"b",(function(){return _})),n.d(t,"i",(function(){return T})),n.d(t,"d",(function(){return R}));var a=n(29),r=n(16),s=n(57),i=n(117),o=n(367),c=n(1401),l=n(10),u=n(8),d=n(5634),p=n(15),m=n(2221),b=n(1400),h=n(5589);const v=(e,t)=>{var n,a,r,s,i,o,c,l;if(!(null==e?void 0:e.builds)&&!(null==e?void 0:e.buildConfigs)&&!(null==e?void 0:e.pipelines))return null;const u=e=>{var t,n,a;return null!==(a=null===(n=null===(t=e.spec)||void 0===t?void 0:t.source)||void 0===n?void 0:n.contextDir)&&void 0!==a?a:null},d=null===(a=null===(n=null==e?void 0:e.builds)||void 0===n?void 0:n.data)||void 0===a?void 0:a.find(e=>e.metadata.name===t);if(d){return u(d)}const p=null===(s=null===(r=null==e?void 0:e.buildConfigs)||void 0===r?void 0:r.data)||void 0===s?void 0:s.find(e=>e.metadata.name===t);if(p){return u(p)}const m=null===(o=null===(i=null==e?void 0:e.pipelines)||void 0===i?void 0:i.data)||void 0===o?void 0:o.find(e=>e.metadata.name===t);if(m){const e=null===(l=null===(c=null==m?void 0:m.spec)||void 0===c?void 0:c.params)||void 0===l?void 0:l.find(e=>"PATH_CONTEXT"===e.name);if(e)return e.default}return null},g=(e,t,n,a,s=!1,i)=>{const{monitoringAlerts:o=[]}=t,l=r.a(e,"metadata.uid"),m=r.a(e,"metadata.labels",{}),b=r.a(e,"metadata.annotations",{}),h=r.a(e,"metadata.name",""),g=v(i,h),f=Object(c.d)("icon-"+m["app.openshift.io/runtime"])||Object(c.d)("icon-"+m["app.kubernetes.io/name"]);return{id:l,name:(null==e?void 0:e.metadata.name)||m["app.kubernetes.io/instance"],type:n,resource:e,resources:Object.assign(Object.assign({},t),{isOperatorBackedService:s}),data:{monitoringAlerts:o,kind:Object(u.Db)(e),editURL:b["app.openshift.io/edit-url"],vcsURI:b["app.openshift.io/vcs-uri"],vcsRef:b["app.openshift.io/vcs-ref"],contextDir:g,builderImage:f||a,isKnativeResource:!(!n||n!==d.i&&n!==d.n&&n!==d.j)||Object(p.Rd)(e,"metadata.labels")}}},f=(e,t,n,a,r,s,i)=>{var o;const c=null==e?void 0:e.metadata.uid,l=null==e?void 0:e.metadata.name,d=null===(o=null==e?void 0:e.metadata.labels)||void 0===o?void 0:o["app.openshift.io/instance"],p=s||Object(u.Db)(e);return Object.assign(Object.assign({id:c,type:t,label:d||l,shape:i,resource:e,resourceKind:p,data:n},r&&r.length&&{children:r}),a||{})},E={width:m.m,height:m.k,group:!1,visible:!0,style:{padding:m.l}},O=(e,t)=>{const n=r.a(e,"metadata.annotations"),o=[];return s.a(Object(b.d)(n),n=>{const s=r.a(i.a(t,e=>{var t,a,r,s,i;let o;if("string"==typeof n)return o=null!==(r=null===(a=null===(t=e.metadata)||void 0===t?void 0:t.labels)||void 0===a?void 0:a["app.kubernetes.io/instance"])&&void 0!==r?r:null===(s=e.metadata)||void 0===s?void 0:s.name,o===n;o=null===(i=e.metadata)||void 0===i?void 0:i.name;const{apiVersion:c,kind:l,name:u}=n,{kind:d,apiVersion:p}=e;let m=o===u&&d===l;return p&&(m=m&&p===c),m}),["metadata","uid"]),c=r.a(e,["metadata","uid"]);s&&o.push({id:`${c}_${s}`,type:m.v,label:a.a.t("topology~Visual connector"),source:c,target:s})}),o},y=e=>{const t=r.a(e,["metadata","labels","app.kubernetes.io/part-of"]);return t?{id:"group:"+t,type:m.u,group:!0,label:t,children:[r.a(e,["metadata","uid"])],width:m.h,height:m.f,data:{},visible:!0,collapsed:!1,style:{padding:m.g}}:null},j=(e,t)=>{var n;if(!e)return;e.children=null===(n=e.children)||void 0===n?void 0:n.filter(e=>!(null==t?void 0:t.find(t=>{var n;return null===(n=t.children)||void 0===n?void 0:n.includes(e)})));const a=t.find(t=>t.group&&t.id===e.id);a?e.children.forEach(t=>{a.children.includes(t)||a.children.push(t),((e,t)=>{var n,a,r,s;((null===(n=t.data)||void 0===n?void 0:n.groupResources)||(null===(a=e.data)||void 0===a?void 0:a.groupResources))&&((null===(r=t.data)||void 0===r?void 0:r.groupResources)||(t.data.groupResources=[]),(null===(s=null==e?void 0:e.data)||void 0===s?void 0:s.groupResources)&&e.data.groupResources.forEach(e=>{t.data.groupResources.includes(e)||t.data.groupResources.push(e)}))})(e,a)}):t.push(e)},k=(e,t)=>{e&&e.length&&e.forEach(e=>{j(e,t)})},_=(e,t,n=[])=>{(null==e?void 0:e.edges)&&t.edges.push(...e.edges),(null==e?void 0:e.nodes)&&(t.nodes.push(...e.nodes.filter(e=>!e.group&&!t.nodes.find(a=>{if(e.id===a.id)return!0;const{resource:r}=e;return!r||!!n.find(e=>e(r,t))}))),k(e.nodes.filter(e=>e.group),t.nodes))},T=(e,t,n=h.a)=>o.a(n.map(n=>e[n]?e[n].data.map(e=>{const a=e.kind||t[n];let r,s=a;return a&&Object(u.eb)(a)&&(s=Object(u.tb)(a),r=Object(u.o)(a)),Object.assign({kind:s,apiVersion:r},e)}):[])),R=e=>({deploymentConfigs:{isList:!0,kind:"DeploymentConfig",namespace:e,optional:!0},deployments:{isList:!0,kind:"Deployment",namespace:e,optional:!0},daemonSets:{isList:!0,kind:"DaemonSet",namespace:e,optional:!0},pods:{isList:!0,kind:"Pod",namespace:e,optional:!0},jobs:{isList:!0,kind:"Job",namespace:e,optional:!0},cronJobs:{isList:!0,kind:"CronJob",namespace:e,optional:!0},statefulSets:{isList:!0,kind:"StatefulSet",namespace:e,optional:!0},services:{isList:!0,kind:"Service",namespace:e,optional:!0},hpas:{isList:!0,kind:l.HorizontalPodAutoscalerModel.kind,namespace:e,optional:!0},buildConfigs:{isList:!0,kind:l.BuildConfigModel.kind,namespace:e,optional:!0}})},5648:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"j",(function(){return m}));var a,r,s,i=n(5591);!function(e){e.REPOSITORY="Repository",e.URL_REPO="RepoUrl",e.URL_ORG="RepoOrg",e.SHA="sha",e.EVENT_TYPE="EventType"}(a||(a={})),function(e){e.SHA_MESSAGE="sha_message",e.SHA_URL="sha_url",e.REPO_URL="repo_url",e.BRANCH="Branch"}(r||(r={})),function(e){e.golang="go",e.nodejs="nodejs",e.python="python",e.java="java"}(s||(s={}));const o={[a.REPOSITORY]:"pipelinesascode.tekton.dev/repository",[a.URL_REPO]:"pipelinesascode.tekton.dev/url-repository",[a.URL_ORG]:"pipelinesascode.tekton.dev/url-org",[a.SHA]:"pipelinesascode.tekton.dev/sha",[a.EVENT_TYPE]:"pipelinesascode.tekton.dev/event-type"},c={[r.SHA_MESSAGE]:"pipelinesascode.tekton.dev/sha-title",[r.SHA_URL]:"pipelinesascode.tekton.dev/sha-url",[r.REPO_URL]:"pipelinesascode.tekton.dev/repo-url",[r.BRANCH]:"pipelinesascode.tekton.dev/branch"};var l;!function(e){e.GITHUB="github",e.WEBHOOK="webhook"}(l||(l={}));const u={gitUrl:"",githubAppAvailable:!1,gitProvider:i.b.INVALID,name:"",method:"github",showOverviewPage:!1,yamlData:"",webhook:{token:"",method:"token",secret:"",url:"",user:"",autoAttach:!1}},d={[i.b.GITHUB]:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token",[i.b.GITLAB]:"https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html",[i.b.BITBUCKET]:"https://support.atlassian.com/bitbucket-cloud/docs/app-passwords/"},p={[i.b.GITHUB]:"https://docs.github.com/en/developers/webhooks-and-events/webhooks/creating-webhooks",[i.b.GITLAB]:"https://docs.gitlab.com/ee/user/project/integrations/webhooks.html#configure-a-webhook-in-gitlab",[i.b.BITBUCKET]:"https://support.atlassian.com/bitbucket-cloud/docs/manage-webhooks/"},m=["github.com","bitbucket.org","gitlab.com"]},5649:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b}));var a=n(2338),r=n(689),s=n(5591),i=n(5653),o=n(15),c=n(5655),l=n(5621);const u=e=>r.object().shape({name:Object(o.Zd)(e),project:l.l,application:l.a,image:Object(l.h)(e),git:Object(l.g)(e),docker:Object(l.e)(e),devfile:Object(l.d)(e),deployment:Object(l.c)(e),serverless:Object(l.o)(e),route:Object(l.n)(e),limits:Object(l.k)(e),build:l.b,resources:l.m,healthChecks:Object(c.a)(e),pac:Object(i.e)(e),pipeline:l.i}),d=(e,t)=>e.startsWith(`https://${t}/`)||e.startsWith(`https://www.${t}/`)||e.includes(`@${t}:`),p=e=>l.f.test(e)?d(e,"github.com")?s.b.GITHUB:d(e,"bitbucket.org")?s.b.BITBUCKET:d(e,"gitlab.com")?s.b.GITLAB:d(e,"gitea.com")||e.includes("gitea")?s.b.GITEA:s.b.UNSURE:s.b.INVALID,m=e=>{if(o.Yd.test(e))return e;const t=a.a(e);return e.match(/^\d/)||t.match(/^\d/)?"ocp-"+t:t},b=e=>{if(!l.f.test(e))return;const t=e.replace(/\/$/,"").split("/").pop();return m(t)}},5650:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"k",(function(){return v})),n.d(t,"f",(function(){return g})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return E})),n.d(t,"h",(function(){return O})),n.d(t,"j",(function(){return y})),n.d(t,"g",(function(){return j})),n.d(t,"b",(function(){return k})),n.d(t,"i",(function(){return _}));var a,r,s=n(321),i=n(29),o=n(550),c=n(50),l=n(16),u=n(384),d=n(4427),p=n(461),m=n(5),b=n(158),h=n(5588);!function(e){e.NUMBER_OF_PIPELINE_RUNS="NUMBER_OF_PIPELINE_RUNS",e.PIPELINE_RUN_DURATION="PIPELINE_RUN_DURATION",e.PIPELINE_RUN_TASK_RUN_DURATION="PIPELINE_RUN_TASK_RUN_DURATION",e.PIPELINE_SUCCESS_RATIO="PIPELINE_SUCCESS_RATIO"}(a||(a={})),function(e){e.TEKTON="tekton",e.TEKTON_PIPELINES_CONTROLLER="tekton_pipelines_controller"}(r||(r={}));const v=(e=r.TEKTON_PIPELINES_CONTROLLER)=>({[h.n.PIPELINE_TASK_LEVEL]:{[a.PIPELINE_SUCCESS_RATIO]:o.a(e+'_pipelinerun_duration_seconds_count{pipeline="<%= name %>",namespace="<%= namespace %>"}'),[a.NUMBER_OF_PIPELINE_RUNS]:o.a(`sum(${e}_pipelinerun_duration_seconds_count{pipeline="<%= name %>",namespace="<%= namespace %>"})`)},[h.n.PIPELINERUN_TASKRUN_LEVEL]:{[a.NUMBER_OF_PIPELINE_RUNS]:o.a(`sum(count by (pipelinerun) (${e}_pipelinerun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"}))`),[a.PIPELINE_RUN_TASK_RUN_DURATION]:o.a(`sum(${e}_pipelinerun_taskrun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"})  by (pipelinerun, task)`),[a.PIPELINE_RUN_DURATION]:o.a(`sum(${e}_pipelinerun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"})  by (pipelinerun)`),[a.PIPELINE_SUCCESS_RATIO]:o.a(`count(sort_desc(${e}_pipelinerun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"})) by(status)`)},[h.n.UNSIMPLIFIED_METRICS_LEVEL]:{[a.NUMBER_OF_PIPELINE_RUNS]:o.a(`sum(count by (pipelinerun) (${e}_pipelinerun_duration_seconds_count{pipeline="<%= name %>",exported_namespace="<%= namespace %>"}))`),[a.PIPELINE_RUN_TASK_RUN_DURATION]:o.a(`sum(${e}_pipelinerun_taskrun_duration_seconds_sum{pipeline="<%= name %>",exported_namespace="<%= namespace %>"})  by (pipelinerun, task)`),[a.PIPELINE_RUN_DURATION]:o.a(`sum(${e}_pipelinerun_duration_seconds_sum{pipeline="<%= name %>",exported_namespace="<%= namespace %>"})  by (pipelinerun)`),[a.PIPELINE_SUCCESS_RATIO]:o.a(`count(sort_desc(${e}_pipelinerun_duration_seconds_count{pipeline="<%= name %>",exported_namespace="<%= namespace %>"})) by(status)`)}}),g=e=>(e<0?"-":"")+(e=>0===e||e>=.001&&e<1e23?Object(m.cc)(e).string:e.toExponential(1))(Math.abs(e)),f=e=>b.b.format(e),E=(e,t,n)=>{const{metric:a,values:r}=e,s=c.a(r,e=>{const t=Number(e[1]);return{x:new Date(new Date(1e3*e[0]).setHours(0,0,0,0)),y:Number.isNaN(t)?null:t,metric:a}}),i=Number(l.a(s,"[0].x")),o=Number(l.a(u.a(s),"x")),p=n/t;return d.a(i,o,p).forEach((e,t)=>{const n=new Date(e);l.a(s,[t,"x"])>n&&s.splice(t,0,{x:n,y:null,metric:a})}),s},O=(e,t,n)=>{var a;const r=(null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.result)||[];return null==r?void 0:r.map(e=>{var a;return null===(a=null==e?void 0:e.values)||void 0===a?void 0:a.map(([a,r])=>{var s,i;return{x:null!==(s=null==t?void 0:t(e))&&void 0!==s?s:new Date(1e3*a),y:null!==(i=null==n?void 0:n(r))&&void 0!==i?i:parseFloat(r),metric:null==e?void 0:e.metric,time:a}})})},y=e=>{const t=[];if(!e)return t;const n=Object(s.b)("1d"),a=Math.round(e/n),r=new Date(Date.now());for(r.setHours(0,0,0,0);t.length-1<a;)t.push(r.getTime()),r.setDate(r.getDate()-1);return t.slice(0,a)},j=(e,t)=>{if(0===e)return i.a.t("pipelines-plugin~less than a sec");let n=Math.round(e),a=0,r=0,s="";return n>=60&&(a=Math.floor(n/60),n%=60),a>=60&&(r=Math.floor(a/60),a%=60),r>0&&(s+=t?i.a.t("pipelines-plugin~{{count}} hour",{count:r}):i.a.t("pipelines-plugin~{{hr}}h",{hr:r}),s+=" "),a>0&&(s+=t?i.a.t("pipelines-plugin~{{count}} minute",{count:a}):i.a.t("pipelines-plugin~{{min}}m",{min:a}),s+=" "),n>0&&(s+=t?i.a.t("pipelines-plugin~{{count}} second",{count:n}):i.a.t("pipelines-plugin~{{sec}}s",{sec:n})),s.trim()},k=()=>({"1d":i.a.t("pipelines-plugin~1 day"),"3d":i.a.t("pipelines-plugin~3 days"),"1w":i.a.t("pipelines-plugin~1 week"),"2w":i.a.t("pipelines-plugin~2 weeks"),"3w":i.a.t("pipelines-plugin~3 weeks"),"4w":i.a.t("pipelines-plugin~4 weeks")}),_=e=>{let t=0;return p.a(e,"x").map(e=>{const n=e.y-t;return t+=e.y,Object.assign(Object.assign({},e),{y:n})})}},5651:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return d}));var a=n(8),r=n(1402);const s=e=>{const[t,n]=null==e?void 0:e.match(/^[0-9]+|[a-zA-Z]*/g);return{autoscalewindow:Number(t)||"",autoscalewindowUnit:n||"s",defaultAutoscalewindowUnit:n||"s"}},i=/ *\([^)]*\) */g,o=e=>e.replace(i,""),c=(e,t)=>{var n;if(!(null===(n=e.spec)||void 0===n?void 0:n.ref))return null;const{apiVersion:s,kind:i,name:o}=e.spec.ref;return Object(a.n)(r.l)===s&&i===r.l.kind&&o!==t?o:null},l=(e,t)=>[...new Set(null==e?void 0:e.filter(e=>!((null==t?void 0:t.length)>0)||(null==t?void 0:t.includes(o(e)))).map(e=>o(e)))],u=e=>e.some(e=>new RegExp(i).test(e)),d=(e,t=[],n)=>e.filter(e=>u([e])).map(e=>{var a,r;const s=null==t?void 0:t.find(t=>t.metadata.name===o(e));return s&&(null===(r=null===(a=s.spec)||void 0===a?void 0:a.ref)||void 0===r?void 0:r.name)!==n?s:null}).filter(e=>!!e)},5652:function(e,t,n){"use strict";var a=n(5619),r=n(8),s=n(5663);class i extends s.a{constructor(){super(),this.resource=void 0,this.resourceKind=void 0,Object(a.p)(this,{resource:a.q.ref,resourceKind:a.q})}getResource(){return this.resource}setResource(e){this.resource=e}getResourceKind(){return this.resourceKind||Object(r.Db)(this.resource)}setResourceKind(e){this.resourceKind=e}setModel(e){super.setModel(e),"resource"in e&&(this.resource=e.resource),"resourceKind"in e&&(this.resourceKind=e.resourceKind)}}t.a=i},5653:function(e,t,n){"use strict";n.d(t,"g",(function(){return y})),n.d(t,"e",(function(){return k})),n.d(t,"c",(function(){return T})),n.d(t,"b",(function(){return R})),n.d(t,"a",(function(){return S})),n.d(t,"f",(function(){return P})),n.d(t,"d",(function(){return N}));var a=n(5596),r=n(320),s=n(2338),i=n(689),o=n(5621),c=n(5624),l=n(77),u=n(5591),d=n(4359),p=n(10),m=n(15),b=n(5586),h=n(5620),v=n(5656),g=n(5588),f=n(5648),E=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};const O={dryRun:"All"},y=e=>i.object().shape({name:i.string().matches(m.Yd,{message:e("pipelines-plugin~Name must consist of lower-case letters, numbers and hyphens. It must start with a letter and end with a letter or number."),excludeEmptyString:!0}).required(e("pipelines-plugin~Required")),gitUrl:i.string().matches(o.f,e("pipelines-plugin~Invalid Git URL.")).required(e("pipelines-plugin~Required")),accessToken:i.string(),webhook:i.object().when("gitProvider",{is:u.b.BITBUCKET,then:i.object().shape({user:i.string().matches(c.a,{message:e("pipelines-plugin~Name must consist of lower-case letters, numbers, underscores and hyphens. It must start with a letter and end with a letter or number."),excludeEmptyString:!0}).required(e("pipelines-plugin~Required"))})}).when(["method","gitProvider","gitUrl"],{is:(e,t,n)=>n&&!(t===u.b.GITHUB&&e===u.b.GITHUB),then:i.object().shape({token:i.string().test("oneOfRequired","Required",(function(){return this.parent.token||this.parent.secretRef})),secretRef:i.string().test("oneOfRequired","Required",(function(){return this.parent.token||this.parent.secretRef}))})})}),j=e=>i.object().shape({webhook:i.object().when("gitProvider",{is:u.b.BITBUCKET,then:i.object().shape({user:i.string().matches(m.Yd,{message:e("pipelines-plugin~Name must consist of lower-case letters, numbers and hyphens. It must start with a letter and end with a letter or number."),excludeEmptyString:!0}).required(e("pipelines-plugin~Required"))})}).when(["method","gitProvider","gitUrl"],{is:(e,t,n)=>n&&t&&!(t===u.b.GITHUB&&e===u.b.GITHUB),then:i.object().shape({token:i.string().test("oneOfRequired","Required",(function(){return this.parent.token||this.parent.secretRef})),secretRef:i.string().test("oneOfRequired","Required",(function(){return this.parent.token||this.parent.secretRef}))})})}),k=e=>i.object().shape({repository:i.object().when(["pipelineType","pipelineEnabled"],{is:(e,t)=>e===h.a.PAC&&t,then:j(e)})}),_=(e,t)=>e.startsWith(`https://${t}/`)||e.startsWith(`https://www.${t}/`)||e.includes(`@${t}:`),T=e=>o.f.test(e)?_(e,"github.com")?u.b.GITHUB:_(e,"bitbucket.org")?u.b.BITBUCKET:_(e,"gitlab.com")?u.b.GITLAB:u.b.UNSURE:u.b.INVALID,R=(e,t,n={},s)=>E(void 0,void 0,void 0,(function*(){var i,o,c;const{name:m,gitUrl:h,webhook:{secretObj:v,method:g,token:y,secret:j,user:k}}=e,_=r.Base64.encode(j),R=T(h);let S;y&&"token"===g?S=yield((e,t,n,a,s,i,o)=>E(void 0,void 0,void 0,(function*(){const c={apiVersion:p.SecretModel.apiVersion,kind:p.SecretModel.kind,metadata:{generateName:e+"-token-",namespace:a},type:d.SecretType.opaque,stringData:Object.assign(Object.assign({"provider.token":n},i&&{"webhook.secret":i}),s===u.b.BITBUCKET&&{"webhook.auth":r.Base64.encode(`${t}:${n}`)})};return Object(l.g)({model:p.SecretModel,data:c,ns:a,queryParams:o?O:{}})})))(m,k,y,t,R,j,s):"secret"===g&&v&&(null===(i=null==v?void 0:v.data)||void 0===i?void 0:i["webhook.secret"])!==_&&(yield Object(l.p)({model:p.SecretModel,resource:v,data:[{op:"replace",path:"/data/webhook.secret",value:r.Base64.encode(j)}]}));const P=a(h).source,N=S||v,C={kind:b.RepositoryModel.kind,apiVersion:"pipelinesascode.tekton.dev/v1alpha1",metadata:Object.assign({name:m,namespace:t},n||{}),spec:Object.assign({url:h},N||"github.com"!==P?{git_provider:Object.assign(Object.assign(Object.assign({},f.j.includes(P)?{}:{url:P}),"bitbucket.org"===P?{user:k}:{}),N?{secret:{name:null===(o=null==N?void 0:N.metadata)||void 0===o?void 0:o.name,key:"provider.token"},webhook_secret:{name:null===(c=null==N?void 0:N.metadata)||void 0===c?void 0:c.name,key:"webhook.secret"}}:{})}:{})};return yield Object(l.g)({model:b.RepositoryModel,data:C,ns:t,queryParams:s?O:{}})})),S=(e,t,n)=>E(void 0,void 0,void 0,(function*(){var a,s,i;const{gitUrl:o,webhook:{method:c,token:l,secret:d,url:p,secretObj:m,user:b}}=e,h=T(o),v=Object(u.e)(o,h);let g,f=!0;n&&"false"===(null===(a=null==t?void 0:t.data)||void 0===a?void 0:a["webhook-ssl-verification"])&&(f=!1),g=h===u.b.BITBUCKET?"token"===c?r.Base64.encode(`${b}:${l}`):r.Base64.decode(null===(s=null==m?void 0:m.data)||void 0===s?void 0:s["webhook.auth"]):"token"===c?l:r.Base64.decode(null===(i=null==m?void 0:m.data)||void 0===i?void 0:i["provider.token"]);return yield v.createRepoWebhook(g,p,f,d)})),P=e=>{if(!o.f.test(e))return;const t=e.replace(/\/$/,"").split("/").pop();return n=t,m.Yd.test(n)?"git-"+n:"git-"+s.a(n);var n},N=(e,t)=>E(void 0,void 0,void 0,(function*(){var n;let a;try{const[t]=yield Object(l.n)({model:p.ConfigMapModel,queryParams:{ns:g.g,labelSelector:{matchLabels:{"pipelinesascode.openshift.io/runtime":f.g[e]||e}}}});a=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.template}catch(e){console.log("failed to fetch runtime template:",e)}return null!=a?a:yield(e=>E(void 0,void 0,void 0,(function*(){var t;let n=(e=>`apiVersion: tekton.dev/v1beta1\nkind: PipelineRun\nmetadata:\n  name: ${null!=e?e:"pull_request"}\n  annotations:\n    # The event we are targeting as seen from the webhook payload\n    # this can be an array too, i.e: [pull_request, push]\n    pipelinesascode.tekton.dev/on-event: "[pull_request, push]"\n\n    # The branch or tag we are targeting (ie: main, refs/tags/*)\n    pipelinesascode.tekton.dev/on-target-branch: "main"\n\n    # Fetch the git-clone task from hub, we are able to reference later on it\n    # with taskRef and it will automatically be embedded into our pipeline.\n    pipelinesascode.tekton.dev/task: "git-clone"\n\n    # You can add more tasks in here to reuse, browse the one you like from here\n    # https://hub.tekton.dev/\n    # example:\n    # pipelinesascode.tekton.dev/task-2: "[maven, buildah]"\n\n    # How many runs we want to keep attached to this event\n    pipelinesascode.tekton.dev/max-keep-runs: "5"\nspec:\n  params:\n    # The variable with brackets are special to Pipelines as Code\n    # They will automatically be expanded with the events from Github.\n    - name: repo_url\n      value: "{{ repo_url }}"\n    - name: revision\n      value: "{{ revision }}"\n  pipelineSpec:\n    params:\n      - name: repo_url\n      - name: revision\n    workspaces:\n      - name: source\n      - name: basic-auth\n    tasks:\n      - name: fetch-repository\n        taskRef:\n          name: git-clone\n        workspaces:\n          - name: output\n            workspace: source\n          - name: basic-auth\n            workspace: basic-auth\n        params:\n          - name: url\n            value: $(params.repo_url)\n          - name: revision\n            value: $(params.revision)\n\n      # Customize this task if you like, or just do a taskRef\n      # to one of the hub task.\n      - name: noop-task\n        runAfter:\n          - fetch-repository\n        workspaces:\n          - name: source\n            workspace: source\n        taskSpec:\n          workspaces:\n            - name: source\n          steps:\n            - name: noop-task\n              image: registry.access.redhat.com/ubi9/ubi-micro\n              workingDir: $(workspaces.source.path)\n              script: |\n                exit 0\n  workspaces:\n  - name: source\n    volumeClaimTemplate:\n      spec:\n        accessModes:\n          - ReadWriteOnce\n        resources:\n          requests:\n            storage: 1Gi\n  # This workspace will inject secret to help the git-clone task to be able to\n  # checkout the private repositories\n  - name: basic-auth\n    secret:\n      secretName: "{{ git_auth_secret }}"`)(e);try{const e=yield Object(l.j)({model:p.ConfigMapModel,ns:g.g,name:v.h});(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.template)&&(n=e.data.template)}catch(e){console.log("failed to fetch default template:",e)}return n})))(t)}))},5655:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(689);const r=/^\/.*$/,s=e=>a.object().shape({containerName:a.string(),showForm:a.boolean(),enabled:a.boolean(),modified:a.boolean(),data:a.object().when("showForm",{is:!0,then:a.object().shape({periodSeconds:a.number().integer(e("devconsole~Value must be an integer.")).min(1,e("devconsole~Period must be greater than or equal to 1.")).max(2147483647,e("devconsole~Value is larger than maximum value allowed.")),initialDelaySeconds:a.number().integer(e("devconsole~Value must be an integer.")).min(0,e("devconsole~Initial delay must be greater than or equal to 0.")).max(2147483647,e("devconsole~Value is larger than maximum value allowed.")),failureThreshold:a.number().integer(e("devconsole~Value must be an integer.")).min(1,e("devconsole~Failure threshold must be greater than or equal to 1.")),timeoutSeconds:a.number().integer(e("devconsole~Value must be an integer.")).min(1,e("devconsole~Timeout must be greater than or equal to 1.")).max(2147483647,e("devconsole~Value is larger than maximum value allowed.")),successThreshold:a.number().integer(e("devconsole~Value must be an integer.")).min(1,e("devconsole~Success threshold must be greater than or equal to 1.")).max(2147483647,e("devconsole~Value is larger than maximum value allowed.")),requestType:a.string(),httpGet:a.object().when("requestType",{is:"httpGet",then:a.object({path:a.string().matches(r,{message:e("devconsole~Path must start with /."),excludeEmptyString:!0}),port:a.number().required(e("devconsole~Required"))})}),tcpSocket:a.object().when("requestType",{is:"tcpSocket",then:a.object({port:a.number().required(e("devconsole~Required"))})}),exec:a.object().when("requestType",{is:"command",then:a.object({command:a.array().of(a.string().required(e("devconsole~Required")))})})})})}),i=e=>a.object().shape({readinessProbe:s(e),livenessProbe:s(e),startupProbe:s(e)})},5656:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i})),n.d(t,"g",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"h",(function(){return u}));const a="https://github.com/settings/apps/new",r="https://docs.github.com/en/developers/apps/getting-started-with-apps/about-apps#about-github-apps",s="https://api.github.com/app-manifests",i="pipelines-as-code-interceptor",o="pipelines-as-code-secret",c="pipelines-ci-clustername",l="pipelines-as-code-info",u="pipelines-as-code-pipelinerun-generic"},5657:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return o}));const a=e=>"Topology/ComponentFactory"===e.type,r=e=>"Topology/DataModelFactory"===e.type,s=e=>"Topology/CreateConnector"===e.type,i=e=>"Topology/DisplayFilters"===e.type,o=e=>"Topology/Decorator"===e.type},5658:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(0);const r=a.createContext({})},5659:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var a=n(2221);const r="operator-backed-service",s=a.h,i=a.f,o=a.g},5661:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var a=n(447),r=n(1941),s=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};const i=e=>s(void 0,void 0,void 0,(function*(){var t,n,s;if(!(yield e.isFuncYamlPresent()))return{values:{}};const i=yield e.getFuncYamlContent();try{const e=a.a(i)?Object(r.c)(i):i,o=null===(t=null==e?void 0:e.build)||void 0===t?void 0:t.builder,c=null===(n=null==e?void 0:e.build)||void 0===n?void 0:n.buildEnvs,l=null==e?void 0:e.runtime;return{values:{builder:o,runtime:l,builderEnvs:c,runtimeEnvs:null===(s=null==e?void 0:e.run)||void 0===s?void 0:s.envs}}}catch(e){return{values:{}}}})),o=(e,t)=>s(void 0,void 0,void 0,(function*(){var n,a;if((yield t.isFuncYamlPresent())&&e){const e=yield t.getFuncYamlContent(),s=Object(r.c)(e);if(!(null===(n=null==s?void 0:s.build)||void 0===n?void 0:n.builder)||"s2i"===(null===(a=null==s?void 0:s.build)||void 0===a?void 0:a.builder))return!0}return!1}))},5662:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var a=n(0),r=n(5619),s=n(5589),i=n(5647),o=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};class c{constructor(e){this.extensions={},this.namespace=void 0,this.model={nodes:[],edges:[]},this.loaded=!1,this.loadError=void 0,this.extensionsLoaded=!1,this.watchedResources={},this.updateWatchedResources=()=>{const e=Object.keys(this.extensions);this.watchedResources=e.reduce((e,t)=>{if(this.extensions[t].resources){const n=this.extensions[t].resources(this.namespace);Object.keys(n).forEach(t=>{e[t]||(e[t]=n[t])})}return e},Object(i.d)(this.namespace))},this.updateExtension=(e,t)=>{this.extensions[e]=Object.assign(Object.assign({},this.extensions[e]||{}),t),this.updateExtensionsLoaded(),this.updateWatchedResources()},this.getWorkloadResources=e=>{const t=this.watchedResources,n=Object.keys(t).reduce((e,n)=>(e[n]=t[n].kind,e),{});return Object(i.i)(e,n,this.workloadKeys)},this.getExtensionModels=e=>o(this,void 0,void 0,(function*(){const t={nodes:[],edges:[]},n=this.dataModelGetters;if(!(null==n?void 0:n.length))return Promise.resolve(t);const a=this.dataModelDepicters,r=this.getWorkloadResources(e),s=n.map(t=>{try{return t(this.namespace,e,r)}catch(e){return console.error("Unable to add some resources to topology",e),null}});return yield Promise.all(s).then(e=>{e.forEach(e=>{if(e)try{Object(i.b)(e,t,a)}catch(e){console.error("Unable to add some resources to topology",e)}})}),Promise.resolve(t)})),this.reconcileModel=(e,t)=>{this.dataModelReconcilers.forEach(n=>{try{n(e,t)}catch(e){console.error("Unable to reconcile some resources in topology",e)}})},this.namespace=e,Object(r.p)(this,{namespace:r.q,model:r.q.ref,loaded:r.q,loadError:r.q,extensionsLoaded:r.q,watchedResources:r.q.ref,isEmptyModel:r.i})}updateExtensionsLoaded(){const e=Object.keys(this.extensions),t=this.extensionsLoaded;this.extensionsLoaded=e.length>1&&e.every(e=>!!this.extensions[e].dataModelGetter&&!!this.extensions[e].dataModelDepicter&&!!this.extensions[e].dataModelReconciler),!t&&this.extensionsLoaded&&this.onExtensionsLoaded&&this.onExtensionsLoaded(this)}getExtensions(){return this.extensions}getExtension(e){return this.extensions[e]}get workloadKeys(){const e=[...s.a];return Object.keys(this.extensions).forEach(t=>{this.extensions[t].workloadKeys&&this.extensions[t].workloadKeys.forEach(t=>{e.includes(t)||e.push(t)})}),e}get prioritizedKeys(){return Object.keys(this.extensions).sort((e,t)=>this.extensions[e].priority-this.extensions[t].priority)}get dataModelGetters(){return this.prioritizedKeys.reduce((e,t)=>(this.extensions[t].dataModelGetter&&e.push(this.extensions[t].dataModelGetter),e),[])}get dataModelDepicters(){return this.prioritizedKeys.reduce((e,t)=>(this.extensions[t].dataModelDepicter&&e.push(this.extensions[t].dataModelDepicter),e),[])}get dataModelReconcilers(){return this.prioritizedKeys.reduce((e,t)=>(this.extensions[t].dataModelReconciler&&e.push(this.extensions[t].dataModelReconciler),e),[])}get isEmptyModel(){var e,t,n;return 0===(null!==(n=null===(t=null===(e=this.model)||void 0===e?void 0:e.nodes)||void 0===t?void 0:t.length)&&void 0!==n?n:0)}}const l=Object(a.createContext)(null)},5663:function(e,t,n){"use strict";var a=n(5585),r=n(5619);const s=(e=a.AnchorEnd.both,t="")=>`${e}:${t}`;class i extends a.BaseElement{constructor(){super(),this.anchors={[s()]:new a.CenterAnchor(this)},this.dimensions=new a.Dimensions,this.dimensionsInitialized=!1,this.positioned=!1,this.uncollapsedCenter=null,this.position=new a.Point,this.group=!1,this.collapsed=!1,this.labelPosition=a.LabelPosition.bottom,this.shape=void 0,this.status=void 0,Object(r.p)(this,{anchors:r.q.shallow,dimensions:r.q.ref,dimensionsInitialized:r.q,position:r.q.ref,nodes:r.i,group:r.q,collapsed:r.q,labelPosition:r.q,shape:r.q,status:r.q,groupBounds:r.i,sourceEdges:r.i,targetEdges:r.i,setDimensions:r.f,setBounds:r.f,setPosition:r.f})}get nodes(){return this.isCollapsed()?[]:this.getChildren().filter(a.isNode)}get groupBounds(){const e=this.getChildren().filter(a.isNode).filter(e=>e.isVisible());if(!e.length)return this.getInternalBounds();let t;e.forEach(e=>{if(Object(a.isNode)(e)){const{padding:n}=e.getStyle(),a=e.getBounds();!e.isGroup()&&n&&a.padding(e.getStyle().padding),t?t.union(a):t=a.clone()}}),t||(t=new a.Rect);const{padding:n}=this.getStyle();return t.padding(n)}get sourceEdges(){return this.getGraph().getEdges().filter(e=>e.getSource()===this)}get targetEdges(){return this.getGraph().getEdges().filter(e=>e.getTarget()===this)}getChildren(){return this.isCollapsed()?super.getChildren().filter(a.isEdge):super.getChildren()}getAllNodeChildren(){return super.getChildren().reduce((e,t)=>(Object(a.isNode)(t)&&e.push(t.isGroup()?t.getAllNodeChildren():t),e),[])}getKind(){return a.ModelKind.node}getInternalBounds(){const{position:e,dimensions:t}=this;return new a.Rect(e.x,e.y,t.width,t.height)}getBounds(){return this.group&&!this.collapsed?this.groupBounds:this.getInternalBounds()}setBounds(e){const{width:t,height:n}=this.dimensions;e.width===t&&e.height===n||(this.dimensions=new a.Dimensions(e.width,e.height));const{x:r,y:s}=this.position;e.x===r&&e.y===s||this.setPosition(new a.Point(e.x,e.y))}getPosition(){return this.isGroup()&&this.getChildren().length&&!this.collapsed?this.getBounds().getCenter():this.position}updateChildrenPositions(e,t){const n=e.x-t.x,r=e.y-t.y;this.getChildren().forEach(e=>{if(Object(a.isNode)(e)){const t=e,s=t.getPosition(),i=new a.Point(s.x+n,s.y+r);t.setPosition(i)}})}setPosition(e){if(this.isGroup()&&this.getChildren().length&&!this.collapsed){const t=this.getBounds().getCenter();this.updateChildrenPositions(e,t)}else{this.position=e,this.positioned=!0;try{this.getController().fireEvent(a.NODE_POSITIONED_EVENT,{node:this})}catch(e){}}}isPositioned(){return this.positioned}getDimensions(){return this.dimensions}setDimensions(e){this.dimensions=e,this.dimensionsInitialized=!0}isDimensionsInitialized(){if(!this.dimensionsInitialized&&this.isGroup()){const e=this.getChildren().filter(a.isNode);if(0===e.length)return this.dimensionsInitialized;e.every(e=>e.isDimensionsInitialized())&&(this.dimensionsInitialized=!0)}return this.dimensionsInitialized}getAnchor(e,t){let n=this.anchors[s(e,t)];return!n&&t&&(n=this.anchors[s(e)]),n||e!==a.AnchorEnd.source&&e!==a.AnchorEnd.target||(n=this.anchors[s(a.AnchorEnd.both,t)],!n&&t&&(n=this.anchors[s(a.AnchorEnd.both)])),n}setAnchor(e,t,n){const a=s(t,n);e?this.anchors[a]=e:delete this.anchors[a]}getNodes(){return this.nodes}isGroup(){return this.group}setGroup(e){this.group=e}isCollapsed(){return this.collapsed}setCollapsed(e){if(e!==this.collapsed){const t=this.getBounds().getCenter();!e&&this.uncollapsedCenter?(this.updateChildrenPositions(t,this.uncollapsedCenter),this.uncollapsedCenter=null,this.collapsed=e):(this.uncollapsedCenter=e?t:null,this.collapsed=e,this.setBounds(this.getBounds().setCenter(t.x,t.y))),this.getController().fireEvent(a.NODE_COLLAPSE_CHANGE_EVENT,{node:this})}}getLabelPosition(){return this.labelPosition}setLabelPosition(e){this.labelPosition=e}getNodeShape(){return this.shape||(this.group?a.NodeShape.rect:a.NodeShape.ellipse)}setNodeShape(e){this.shape=e}getNodeStatus(){return this.status||a.NodeStatus.default}setNodeStatus(e){this.status=e}getSourceEdges(){return this.sourceEdges}getTargetEdges(){return this.targetEdges}isVisible(){return super.isVisible()&&this.isDimensionsInitialized()}setModel(e){let t,n;super.setModel(e),"width"in e&&null!=e.width&&e.width!==this.dimensions.width&&(t||(t=this.dimensions.clone()),t.width=e.width),"height"in e&&null!=e.height&&e.height!==this.dimensions.height&&(t||(t=this.dimensions.clone()),t.height=e.height),t&&this.setDimensions(t),"x"in e&&null!=e.x&&e.x!==this.position.x&&(n||(n=this.position.clone()),n.x=e.x),"y"in e&&null!=e.y&&e.y!==this.position.y&&(n||(n=this.position.clone()),n.y=e.y),n&&this.setPosition(n),"group"in e&&this.setGroup(!!e.group),"labelPosition"in e&&(this.labelPosition=e.labelPosition),"shape"in e&&(this.shape=e.shape),"status"in e&&(this.status=e.status),"collapsed"in e&&this.setCollapsed(!!e.collapsed)}toModel(){return Object.assign(Object.assign({},super.toModel()),{x:this.isPositioned()?this.getPosition().x:void 0,y:this.isPositioned()?this.getPosition().y:void 0,width:this.isDimensionsInitialized()?this.getDimensions().width:void 0,height:this.isDimensionsInitialized()?this.getDimensions().height:void 0,collapsed:this.isCollapsed(),group:this.isGroup(),labelPosition:this.labelPosition,shape:this.shape,status:this.status})}translateToParent(e){if(!this.group||this.isCollapsed()){const{x:t,y:n}=this.getPosition();e.translate(t,n)}}translateFromParent(e){if(!this.group||this.isCollapsed()){const{x:t,y:n}=this.getPosition();e.translate(-t,-n)}}}t.a=i},5669:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return c})),n.d(t,"j",(function(){return l})),n.d(t,"k",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"l",(function(){return b}));const a="OPENSHIFT_PIPELINE",r="OPENSHIFT_PIPELINE_AS_CODE",s="OPENSHIFT_PIPELINE_CONDITION",i="openshift",o="pipeline.openshift.io/runtime",c="pipeline.openshift.io/runtime-version",l="pipeline.openshift.io/strategy",u="pipeline.preferredPipelinePageTab",d="function.knative.dev/runtime",p="https://artifacthub.io/api/v1",m="resource.deleted.in.k8s",b="resource.loaded.from.tektonResults"},5670:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(0),r=n(31),s=n(499),i=n(327),o=n(517),c=n(5);const l=e=>({watchURL:(t,n)=>e(Object(o.g)(t,n)),stopWatchURL:t=>e(Object(o.e)(t)),watchPrometheusQuery:(t,n,a)=>e(Object(o.f)(t,n,a)),stopWatchPrometheusQuery:(t,n)=>e(Object(o.d)(t,n))}),u=e=>({[i.a.URL]:e.dashboards.get(i.a.URL),[i.a.PROMETHEUS]:e.dashboards.get(i.a.PROMETHEUS),notificationAlerts:e.observe.get("notificationAlerts")}),d=e=>Object(r.connect)(u,l)(class extends a.Component{constructor(e){super(e),this.urls=[],this.queries=[],this.watchingAlerts=!1,this.watchURL=(e,t)=>{this.urls.push(e),this.props.watchURL(e,t)},this.watchPrometheus=(e,t,n)=>{this.queries.push(Object(o.c)(e,n)),this.props.watchPrometheusQuery(e,t,n)},this.stopWatchPrometheusQuery=(e,t)=>{const n=Object(o.c)(e,t);this.queries=this.queries.filter(e=>e!==n),this.props.stopWatchPrometheusQuery(e,t)},this.watchAlerts=()=>{this.watchingAlerts=!0},this.stopWatchAlerts=()=>{this.watchingAlerts=!1},this.watchK8sResource=e=>{this.setState(t=>({k8sResources:[...t.k8sResources,Object.assign(Object.assign({},e),{optional:!0})]}))},this.stopWatchK8sResource=e=>{this.setState(t=>({k8sResources:t.k8sResources.filter(t=>t.prop!==e.prop)}))},this.getExternalProps=e=>s.a(e,"watchURL","stopWatchURL","watchPrometheusQuery","stopWatchPrometheusQuery","watchAlerts","stopWatchAlerts",i.a.URL,i.a.PROMETHEUS,"notificationAlerts"),this.state={k8sResources:[]}}shouldComponentUpdate(e,t){var n,a,r,s,o,c;const l=this.urls.some(t=>this.props[i.a.URL].getIn([t,"data"])!==e[i.a.URL].getIn([t,"data"])||this.props[i.a.URL].getIn([t,"loadError"])!==e[i.a.URL].getIn([t,"loadError"])),u=this.queries.some(t=>this.props[i.a.PROMETHEUS].getIn([t,"data"])!==e[i.a.PROMETHEUS].getIn([t,"data"])||this.props[i.a.PROMETHEUS].getIn([t,"loadError"])!==e[i.a.PROMETHEUS].getIn([t,"loadError"])),d=(null===(a=null===(n=this.props)||void 0===n?void 0:n.notificationAlerts)||void 0===a?void 0:a.data)!==(null===(r=null==e?void 0:e.notificationAlerts)||void 0===r?void 0:r.data)||(null===(o=null===(s=this.props)||void 0===s?void 0:s.notificationAlerts)||void 0===o?void 0:o.loadError)!==(null===(c=null==e?void 0:e.notificationAlerts)||void 0===c?void 0:c.loadError),p=this.state.k8sResources!==t.k8sResources,m=this.getExternalProps(e),b=this.getExternalProps(this.props);return l||u||p||this.watchingAlerts&&d||Object.keys(m).length!==Object.keys(b).length||Object.keys(m).some(e=>m[e]!==b[e])}render(){return a.createElement(c.C,{resources:this.state.k8sResources},a.createElement(e,Object.assign({watchURL:this.watchURL,stopWatchURL:this.props.stopWatchURL,watchPrometheus:this.watchPrometheus,stopWatchPrometheusQuery:this.stopWatchPrometheusQuery,watchAlerts:this.watchAlerts,stopWatchAlerts:this.stopWatchAlerts,urlResults:this.props[i.a.URL],prometheusResults:this.props[i.a.PROMETHEUS],notificationAlerts:this.props.notificationAlerts,watchK8sResource:this.watchK8sResource,stopWatchK8sResource:this.stopWatchK8sResource},this.getExternalProps(this.props))))}})},5673:function(e,t,n){"use strict";n.d(t,"m",(function(){return b})),n.d(t,"i",(function(){return h})),n.d(t,"h",(function(){return v})),n.d(t,"g",(function(){return g})),n.d(t,"e",(function(){return f})),n.d(t,"n",(function(){return E})),n.d(t,"p",(function(){return O})),n.d(t,"o",(function(){return y})),n.d(t,"k",(function(){return j})),n.d(t,"j",(function(){return k})),n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return T})),n.d(t,"l",(function(){return R})),n.d(t,"d",(function(){return S})),n.d(t,"f",(function(){return P})),n.d(t,"c",(function(){return N}));var a=n(255),r=n(745),s=n(117),i=n(384),o=n(1533),c=n(70),l=n(22),u=n(283),d=n(1401),p=n(4362),m=n(10);const b=["app.kubernetes.io/name","app.openshift.io/runtime"],h=e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.annotations)||void 0===t?void 0:t.sampleRepo)&&void 0!==n?n:""},v=e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.annotations)||void 0===t?void 0:t.sampleRef)&&void 0!==n?n:""},g=e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.annotations)||void 0===t?void 0:t.sampleContextDir)&&void 0!==n?n:""},f=e=>{var t,n,s,i,o,c;return(e=>a.a(e,(e,t,n)=>{const a=n.split("/");1===a.length&&a.push("tcp");const s=parseInt(a[0],10);return r.a(s)?e.push({containerPort:s,protocol:a[1].toUpperCase()}):console.warn("Unrecognized image port format",n),e},[]))((null===(s=null===(n=null===(t=null==e?void 0:e.image)||void 0===t?void 0:t.dockerImageMetadata)||void 0===n?void 0:n.Config)||void 0===s?void 0:s.ExposedPorts)||(null===(c=null===(o=null===(i=null==e?void 0:e.image)||void 0===i?void 0:i.dockerImageMetadata)||void 0===o?void 0:o.ContainerConfig)||void 0===c?void 0:c.ExposedPorts))},E=e=>`${e.containerPort}-${e.protocol}`.toLowerCase(),O=e=>e.replace(/(-|^)([^-]?)/g,(e,t,n)=>(t&&" ")+n.toUpperCase()),y=e=>(Array.isArray(e)?e:[e]).filter(e=>Object(p.isBuilder)(e)).reduce((e,t)=>{var n,a,r;const s=Object(p.getBuilderTagsSortedByVersion)(t),i=Object(p.getMostRecentBuilderTag)(t),{name:o}=t.metadata,c=null===(a=null===(n=null==t?void 0:t.metadata)||void 0===n?void 0:n.annotations)||void 0===a?void 0:a["openshift.io/display-name"],l=null===(r=null==i?void 0:i.annotations)||void 0===r?void 0:r.description,u=t.metadata.namespace,m=c&&c.length<14?c:O(o),b=Object(d.e)(i),h=Object(d.d)(b);return e[o]={obj:t,name:o,displayName:c,description:l,title:m,iconUrl:h,tags:s,recentTag:i,imageStreamNamespace:u},e},{}),j=(e,t,n)=>{var a,r;const i=s.a(e,{name:t});return[i,null!==(r=null===(a=null==i?void 0:i.annotations)||void 0===a?void 0:a["openshift.io/display-name"])&&void 0!==r?r:n]},k=e=>{if(!e)return;const t=i.a(e.split("/"));return o.a(t.split(/[^a-z0-9-]/))};var _,T;!function(e){e.External="external",e.Internal="internal"}(_||(_={})),function(e){e.Openshift="openshift"}(T||(T={}));const R=e=>({External:{value:_.External,label:e("devconsole~Image name from external registry")},Internal:{value:_.Internal,label:e("devconsole~Image stream tag from internal registry")}}),S=e=>(e&&!l.a(e)?(e=>c.a(e.status.tags)&&e.status.tags.length?e.status.tags.sort(({tag:e},{tag:t})=>{const n=u.coerce(e),a=u.coerce(t);return n||a?n?a?u.rcompare(n,a):-1:1:e.localeCompare(t)}):[])(e):[]).reduce((e,{tag:t})=>(e[t]=t,e),{}),P=()=>[{isList:!0,kind:m.ProjectModel.kind,prop:m.ProjectModel.id}],N=e=>{const t=[];return e&&t.push({isList:!0,kind:m.ImageStreamModel.kind,prop:m.ImageStreamModel.id,namespace:e}),t}},5674:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i}));var a=n(5);const r=["configmaps","persistentvolumeclaims","pods","replicationcontrollers","resourcequotas","services","services.loadbalancers","services.nodeports","secrets","openshift.io/imagestreams"],s=(e,t)=>{let n=Object(a.Ib)(t),r=Object(a.Ib)(e);return n&&r||(n=parseInt(n,10),r=parseInt(r,10)),n&&r?n/r*100:0},i=({resourceName:e,used:t,hard:n})=>{const i=e.startsWith("count/")||r.includes(e),o=s(n,t);return{label:i?`${t||0} of ${n}`:Object(a.ec)(o).string,percent:o}}},5684:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n(8),s=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};const i=(e,t,n,i)=>{const[o,c]=a.useState(),[l,u]=a.useState(!1),[d,p]=a.useState();return a.useEffect(()=>{s(void 0,void 0,void 0,(function*(){try{p(null),u(!1),c(null);const a=yield Object(r.kb)(e,t,n,i);c(a)}catch(e){p(e)}finally{u(!0)}}))},[e,t,n,i]),[o,l,d]}},5687:function(e,t,n){"use strict";n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return v})),n.d(t,"f",(function(){return g})),n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return O})),n.d(t,"e",(function(){return y}));var a=n(225),r=n(16),s=n(499),i=n(1557),o=n(53),c=n(15),l=n(5669),u=n(5586),d=n(5623),p=n(5588),m=n(5725);const b=e=>{var t;return e.metadata.generateName?e.metadata.generateName:(null===(t=e.metadata.name)||void 0===t?void 0:t.replace(/-[a-z0-9]{5,6}$/,""))+"-"},h=(e=null,t,n)=>{var m,h,v,g,f,E;if(!e&&!t)return console.error("Missing parameters, unable to create new PipelineRun"),null;const O=((e,t)=>{var n,a,r;return e?e.metadata.name:t?null!==(a=null===(n=t.spec.pipelineRef)||void 0===n?void 0:n.name)&&void 0!==a?a:(null===(r=t.metadata.annotations)||void 0===r?void 0:r[p.z])||t.metadata.name:null})(e,t),y=null==t?void 0:t.spec.workspaces,j=null==t?void 0:t.spec.params,k=null==e?void 0:e.spec.params,_=j||Object(d.m)(k),T=i.a({},null===(m=null==e?void 0:e.metadata)||void 0===m?void 0:m.annotations,null===(h=null==t?void 0:t.metadata)||void 0===h?void 0:h.annotations,{[p.q.user]:Object(o.d)()},!(null==t?void 0:t.spec.pipelineRef)&&!(null===(v=null==t?void 0:t.metadata.annotations)||void 0===v?void 0:v[p.z])&&{[p.z]:O});delete T["kubectl.kubernetes.io/last-applied-configuration"],delete T["tekton.dev/v1beta1TaskRuns"],delete T["results.tekton.dev/log"],delete T["results.tekton.dev/record"],delete T["results.tekton.dev/result"],delete T[l.c],delete T[l.l];return(e=>{let t=e;if(a.a(t,"spec.serviceAccount")){const e=r.a(t,"spec.serviceAccount");t=s.a(t,["spec.serviceAccount"]),t=i.a(t,{spec:{serviceAccountName:e}})}return t})({apiVersion:e?e.apiVersion:t.apiVersion,kind:u.PipelineRunModel.kind,metadata:Object.assign(Object.assign({},(null==n?void 0:n.generateName)?{generateName:O+"-"}:{name:void 0!==(null===(g=null==t?void 0:t.metadata)||void 0===g?void 0:g.name)?`${b(t)}${Object(c.wd)()}`:`${O}-${Object(c.wd)()}`}),{annotations:T,namespace:e?e.metadata.namespace:t.metadata.namespace,labels:i.a({},null===(f=null==e?void 0:e.metadata)||void 0===f?void 0:f.labels,null===(E=null==t?void 0:t.metadata)||void 0===E?void 0:E.labels,((null==t?void 0:t.spec.pipelineRef)||e)&&{"tekton.dev/pipeline":O})}),spec:Object.assign(Object.assign(Object.assign(Object.assign({},(null==t?void 0:t.spec)||{}),((null==t?void 0:t.spec.pipelineRef)||e)&&{pipelineRef:{name:O}}),_&&{params:_}),{workspaces:y,status:null})})},v=e=>({volumeClaimTemplate:{metadata:{labels:{[p.u.pipeline]:e}},spec:{accessModes:["ReadWriteOnce"],resources:{requests:{storage:"1Gi"}}}}}),g=e=>({volumeClaimTemplate:{metadata:{finalizers:["kubernetes.io/pvc-protection"],labels:{[p.u.pipeline]:e,"boson.dev/function":"true","function.knative.dev":"true","function.knative.dev/name":e}},spec:{accessModes:["ReadWriteOnce"],resources:{requests:{storage:"1Gi"}},storageClassName:"gp3-csi",volumeMode:"Filesystem"}}}),f=e=>t=>{let n={type:p.x.EmptyDirectory,data:{emptyDir:{}}};return e&&(n={type:p.x.PVC,data:{persistentVolumeClaim:{claimName:e}}}),t.optional&&(n={type:p.x.NoWorkspace,data:{}}),Object.assign(Object.assign({},t),n)},E=(e,t=!1,n="")=>{const{metadata:{namespace:a},spec:{params:r,resources:s}}=e;return{namespace:a,parameters:(r||[]).map(e=>Object.assign(Object.assign({},e),{value:e.default})),resources:(s||[]).map(e=>({name:e.name,selection:t?m.a:"",data:Object.assign(Object.assign({},m.b[e.type]),{type:e.type})})),workspaces:(e.spec.workspaces||[]).map(f(n))}},O=e=>Object.keys(e).map(t=>({name:t,value:e[t]})),y=(e,t,n,a,r)=>{const{parameters:s,workspaces:i}=t,o={metadata:{annotations:a,labels:n},spec:{pipelineRef:{name:e.metadata.name},params:s.map(({name:e,value:t})=>({name:e,value:t})),workspaces:Object(d.o)(i)}};return h(e,o,r)}},5695:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a,r=n(0),s=n(18),i=n(1946),o=n(5727);n(5728);!function(e){e.light="light",e.default="default"}(a||(a={}));t.b=({children:e,disabled:t,onNamespaceChange:n,hideProjects:c=!1,hideApplications:l=!1,variant:u=a.default,toolbar:d})=>r.createElement("div",{className:"odc-namespaced-page"},r.createElement(i.NamespaceBar,{isDisabled:t,onNamespaceChange:n,hideProjects:c},!l&&r.createElement(o.a,{disabled:t}),d&&r.createElement("div",{className:"odc-namespaced-page__toolbar"},d)),r.createElement("div",{className:s("odc-namespaced-page__content",{["is-"+u]:u!==a.default})},e))},5704:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(13),i=n(5),o=n(69),c=n(15),l=n(5710),u=n(5647),d=n(5720),p=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};t.a=e=>{var{namespace:t}=e,n=p(e,["namespace"]);const{t:m}=Object(r.useTranslation)(),b=Object(o.z)(d.a),h=Object(o.z)(s.Zb),v=a.useMemo(()=>Object(l.b)(h),[h]),g=a.useMemo(()=>{let e=Object(u.d)(t);return[...b,...v].forEach(n=>{var a,r;const s=null===(r=(a=n.properties).resources)||void 0===r?void 0:r.call(a,t);s&&(e=Object.assign(Object.assign({},s),e))}),Object.keys(e).map(t=>Object.assign(Object.assign({},e[t]),{prop:t}))},[v,b,t]);return a.createElement(i.C,{resources:g},a.createElement(c.Nb,Object.assign({},n,{placeholder:m("topology~Select an application"),dataSelector:["metadata","labels","app.kubernetes.io/part-of"]})))}},5705:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"h",(function(){return h})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return g})),n.d(t,"g",(function(){return f})),n.d(t,"f",(function(){return E})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return y}));var a=n(0),r=n(283),s=n(13),i=n(77),o=n(519),c=n(15),l=n(5586),u=n(5588),d=n(5650),p=n(5899),m=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};const b=e=>m(void 0,void 0,void 0,(function*(){const t=(yield Object(i.l)(o.a,{ns:e})).filter(e=>{var t,n,a,r,s;return((null===(n=null===(t=e.metadata)||void 0===t?void 0:t.name)||void 0===n?void 0:n.startsWith("openshift-pipelines-operator"))||(null===(r=null===(a=e.metadata)||void 0===a?void 0:a.name)||void 0===r?void 0:r.startsWith("redhat-openshift-pipelines")))&&(null===(s=e.status)||void 0===s?void 0:s.phase)===o.b.CSVPhaseSucceeded}).map(e=>Object(r.parse)(e.spec.version)).filter(Boolean);return t.sort(r.compare),t.length>0?t[t.length-1]:null})),h=e=>{const[t,n]=a.useState(null);return a.useEffect(()=>{b(e).then(n).catch(e=>console.warn("Error while determinate OpenShift Pipelines Operator version:",e))},[e]),t},v=e=>!!e&&Object(r.gte)(e.version,u.i),g=e=>!!e&&Object(r.gte)(e.version,u.s),f=e=>{const t=h(e),[n]=Object(p.b)(),[a]=Object(s.hc)({group:l.TektonConfigModel.apiGroup,resource:l.TektonConfigModel.plural,namespace:u.j,verb:"update"});var i;return{metricsLevel:!!(i=t)&&Object(r.gt)(i.version,u.m)?Object(p.a)(n):u.n.UNSIMPLIFIED_METRICS_LEVEL,queryPrefix:t&&!v(t)?d.a.TEKTON:d.a.TEKTON_PIPELINES_CONTROLLER,hasUpdatePermission:a}},E=e=>{const[t]=Object(c.ue)(),n=h(t),a=1===(null==n?void 0:n.major)&&(null==n?void 0:n.minor)>=11;e(u.f,a)},O=e=>{const[t]=Object(c.ue)(),n=h(t),a=1===(null==n?void 0:n.major)&&(null==n?void 0:n.minor)>=16;e(u.d,a)},y=e=>{const[t]=Object(c.ue)(),n=h(t),a=1===(null==n?void 0:n.major)&&(null==n?void 0:n.minor)>=17;e(u.e,a)}},5710:function(e,t,n){"use strict";n.d(t,"b",(function(){return d}));var a=n(0),r=n(13),s=n(8),i=n(69),o=n(5657),c=n(5714),l=n(5662),u=n(5715);const d=e=>e.map(e=>Object.assign(Object.assign({},e),{properties:Object.assign(Object.assign({},e.properties),{resources:t=>Object.entries(e.properties.resources||{}).reduce((n,[a,r])=>{const i=((e,t,n,a,r={})=>{if(!a)return Object.assign({namespace:e},r);if(a.version){const t=Object(s.Fb)(a);return Object.assign({namespace:e,kind:t},r)}const i=Object(s.wb)(a.group,a.kind);if(!i)return console.warn(`Plugin "${t.pluginID}": Could not find model (CRD) for group "${a.group}" and kind "${a.kind}" to determinate version. Please add a required flag to the extension to suppress this warning. The resource "${n}" will not be loaded and ignored in the topology view for now:`,t,n,a,r),null;const o=Object(s.Hb)(i);return Object.assign({namespace:e,kind:o},r)})(t,e,a,null==r?void 0:r.model,null==r?void 0:r.opts);return i&&(n[a]=i),n},{})})}));t.a=({namespace:e,children:t})=>{const[n,s]=a.useState(new l.a(e));a.useEffect(()=>{s(new l.a(e))},[e]);const p=Object(i.z)(o.c),m=Object(i.z)(r.Zb),b=a.useMemo(()=>d(m),[m]);return a.createElement(l.b.Provider,{value:n},e&&a.createElement(a.Fragment,null,[...b,...p].map(e=>a.createElement(c.a,{key:e.properties.id,dataModelFactory:e.properties}))),e&&a.createElement(u.a,null),t)}},5711:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return b})),n.d(t,"g",(function(){return h})),n.d(t,"d",(function(){return v})),n.d(t,"h",(function(){return g})),n.d(t,"f",(function(){return f}));var a=n(499),r=n(22),s=n(1557),i=n(655),o=n(255),c=n(15),l=n(2221),u=n(5599);const d=({name:e,applicationName:t,imageStreamName:n,runtimeIcon:a,selectedTag:r,namespace:s})=>{const i=Object.assign({app:e,"app.kubernetes.io/instance":e,"app.kubernetes.io/component":e,"app.kubernetes.io/name":e},n&&{"app.openshift.io/runtime":n});return a&&(i["app.openshift.io/runtime"]=a),t&&t.trim().length>0&&(i["app.kubernetes.io/part-of"]=t),r&&(i["app.openshift.io/runtime-version"]=r),s&&(i["app.openshift.io/runtime-namespace"]=s),i},p=()=>({"openshift.io/generated-by":"OpenShiftWebConsole"}),m=()=>({[l.n]:"false"}),b=(e,t)=>({"app.openshift.io/vcs-uri":e,"app.openshift.io/vcs-ref":t||""}),h=(e,t,n,a,r="latest")=>({[c.ic]:JSON.stringify([{from:{kind:"ImageStreamTag",name:`${t}:${r}`,namespace:n},fieldPath:`spec.template.spec.containers[?(@.name=="${e}")].image`,paused:""+!a}])}),v=(e,t)=>{const n=u.l[e];return n?{app:t,[n.toLowerCase()]:t}:{app:t}},g=(e,t)=>{var n,o,c,l,u,d,p,m,b,h,v,g,f,E,O,y,j,k,_,T,R,S,P,N,C,w,I,A,x;if(r.a(e))return t;const D=s.a({},e||{},t),M=null===(o=null===(n=null==e?void 0:e.metadata)||void 0===n?void 0:n.annotations)||void 0===o?void 0:o.isFromDevfile;var L;if(D.metadata.labels=Object.assign(Object.assign({},t.metadata.labels),M?null===(c=null==e?void 0:e.metadata)||void 0===c?void 0:c.labels:{}),D.metadata.annotations&&(D.metadata.annotations=Object.assign(Object.assign({},M?null===(l=null==e?void 0:e.metadata)||void 0===l?void 0:l.annotations:(L=null===(u=null==e?void 0:e.metadata)||void 0===u?void 0:u.annotations,a.a(L,["app.openshift.io/vcs-uri","app.openshift.io/vcs-ref","openshift.io/generated-by","image.openshift.io/triggers","alpha.image.policy.openshift.io/resolve-names","jarFileName","kubectl.kubernetes.io/last-applied-configuration"]))),t.metadata.annotations)),(null===(m=null===(p=null===(d=D.spec)||void 0===d?void 0:d.template)||void 0===p?void 0:p.metadata)||void 0===m?void 0:m.labels)&&(D.spec.template.metadata.labels=null===(v=null===(h=null===(b=t.spec)||void 0===b?void 0:b.template)||void 0===h?void 0:h.metadata)||void 0===v?void 0:v.labels),!r.a(null===(E=null===(f=null===(g=e.spec)||void 0===g?void 0:g.template)||void 0===f?void 0:f.spec)||void 0===E?void 0:E.containers)){D.spec.template.spec.containers=e.spec.template.spec.containers;const n=i.a(e.spec.template.spec.containers,{name:e.metadata.name});n>=0?D.spec.template.spec.containers[n]=Object.assign(Object.assign(Object.assign({},e.spec.template.spec.containers[n]),t.spec.template.spec.containers[0]),{volumeMounts:e.spec.template.spec.containers[n].volumeMounts}):D.spec.template.spec.containers.push(t.spec.template.spec.containers[0])}return(null===(O=null==D?void 0:D.spec)||void 0===O?void 0:O.hasOwnProperty("strategy"))&&(D.spec.strategy=null!==(j=null===(y=t.spec)||void 0===y?void 0:y.strategy)&&void 0!==j?j:null===(k=e.spec)||void 0===k?void 0:k.strategy),(null===(_=D.spec)||void 0===_?void 0:_.triggers)&&(D.spec.triggers=t.spec.triggers),(null===(R=null===(T=t.spec)||void 0===T?void 0:T.source)||void 0===R?void 0:R.sourceSecret)||null===(P=null===(S=null==D?void 0:D.spec)||void 0===S?void 0:S.source)||void 0===P||delete P.sourceSecret,(null===(w=null===(C=null===(N=D.spec)||void 0===N?void 0:N.template)||void 0===C?void 0:C.spec)||void 0===w?void 0:w.hasOwnProperty("volumes"))&&(D.spec.template.spec.volumes=null===(x=null===(A=null===(I=e.spec)||void 0===I?void 0:I.template)||void 0===A?void 0:A.spec)||void 0===x?void 0:x.volumes),D},f=e=>{var t,n,a;return o.a(null===(a=null===(n=null===(t=null==e?void 0:e.spec)||void 0===t?void 0:t.template)||void 0===n?void 0:n.metadata)||void 0===a?void 0:a.labels,(t,n,a)=>{var r,s;return(null===(s=null===(r=e.metadata)||void 0===r?void 0:r.labels)||void 0===s?void 0:s.hasOwnProperty(a))||(t[a]=n),t},{})}},5712:function(e,t,n){},5714:function(e,t,n){"use strict";var a=n(0),r=n(15),s=n(5662);t.a=({dataModelFactory:e})=>{const t=a.useContext(s.b),{id:n,priority:i,resources:o}=e,c=Object(r.De)(e.workloadKeys),l=a.useRef({priority:i,workloadKeys:c,resources:o});return a.useEffect(()=>{if(!t.getExtension(n)){l.current={priority:i,workloadKeys:c,resources:o},t.updateExtension(n,l.current);const{getDataModel:a,isResourceDepicted:r,getDataModelReconciler:s}=e;a?a().then(e=>{l.current.dataModelGetter=e,t.updateExtension(n,l.current)}).catch(()=>{l.current.dataModelGetter=()=>Promise.resolve({}),t.updateExtension(n,l.current)}):(l.current.dataModelGetter=()=>Promise.resolve({}),t.updateExtension(n,l.current)),r?r().then(e=>{l.current.dataModelDepicter=e,t.updateExtension(n,l.current)}).catch(()=>{l.current.dataModelDepicter=()=>!1,t.updateExtension(n,l.current)}):(l.current.dataModelDepicter=()=>!1,t.updateExtension(n,l.current)),s?s().then(e=>{l.current.dataModelReconciler=e,t.updateExtension(n,l.current)}).catch(()=>{l.current.dataModelReconciler=()=>{},t.updateExtension(n,l.current)}):(l.current.dataModelReconciler=()=>{},t.updateExtension(n,l.current))}},[t,e,n,i,o,c]),null}},5715:function(e,t,n){"use strict";var a=n(0),r=n(5585),s=n(22),i=n(108),o=n(15),c=n(5662),l=n(5716),u=n(5718);t.a=Object(r.observer)(({trafficData:e})=>{const t=a.useContext(c.b),{namespace:n,extensionsLoaded:r,watchedResources:d}=t,[p,m]=a.useState(),b=Object(u.a)(n),h=a.useMemo(()=>n&&r?d:{},[r,d,n]),v=Object(o.Ce)(m,250),g=Object(i.b)(h);return a.useEffect(()=>v(g),[v,g]),a.useEffect(()=>{t.model=null},[n]),a.useEffect(()=>{s.a(p)||Object(l.a)(t,p,e,b).then(e=>{t.loadError=e.loadError,e.loaded&&(t.loaded=!0,t.model=e.model)}).catch(()=>{})},[p,e,t,b]),null})},5716:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(5717);const r=(e,t,n,r)=>{const{extensionsLoaded:s,watchedResources:i}=e;if(!s||!t)return Promise.resolve({loaded:!1,loadError:"",model:null});const o=Object.keys(t).find(e=>(e=>t[e].loadError&&!i[e].optional?t[e].loadError:"")(e));if(o)return Promise.resolve({loaded:!1,loadError:t[o].loadError,model:null});if(!Object.keys(t).every(e=>(e=>t[e].loaded||t[e].loadError&&i[e].optional)(e)))return Promise.resolve({loaded:!1,loadError:"",model:null});const c=e.getWorkloadResources(t),l=e.dataModelDepicters;return e.getExtensionModels(t).then(s=>{const i=Object(a.a)(s,e.namespace,t,c,l,n,r);return e.reconcileModel(i,t),Promise.resolve({loaded:!0,loadError:"",model:i})})}},5717:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(1401),r=n(15),s=n(2221),i=n(5589),o=n(5647);const c=(e,t)=>{const n=e.nodes.filter(({data:e})=>e.nodeType===s.y);return e.edges.reduce((e,{data:a})=>{const{data:r}=n.find(e=>e.data.id===a.source),{data:i}=n.find(e=>e.data.id===a.target),o=t.find(e=>e.metadata.name===r[r.nodeType]),c=t.find(e=>e.metadata.name===i[i.nodeType]);return o&&c?[...e,{id:`${o.metadata.uid}_${c.metadata.uid}`,type:s.x,source:o.metadata.uid,target:c.metadata.uid,data:a.traffic}]:e},[])},l=(e,t,n,l,u,d,p)=>{const m=(e=>{const t={nodes:[],edges:[]};return i.a.forEach(n=>{var i,c;if(null===(c=null===(i=null==e?void 0:e[n])||void 0===i?void 0:i.data)||void 0===c?void 0:c.length){const i={nodes:[],edges:[]};e[n].data.forEach(t=>{const c=Object(r.yc)(n,t,e);if(c){const n=Object(o.c)(t,c,s.y,Object(a.d)("icon-openshift"),void 0,e);i.nodes.push(Object(o.h)(t,s.y,n,o.a)),Object(o.j)(Object(o.g)(t),i.nodes)}}),Object(o.b)(i,t)}}),t})(Object.assign(Object.assign({},n),{monitoringAlerts:p}));return Object(o.b)(m,e,u),(e=>{e.nodes.forEach(t=>{var n,a;t.type===s.u&&(t.children=t.children.filter(t=>e.nodes.find(e=>e.id===t)),t.data.groupResources=null!==(a=null===(n=t.children)||void 0===n?void 0:n.map(t=>e.nodes.find(e=>t===e.id)))&&void 0!==a?a:[])}),e.nodes=e.nodes.filter(e=>e.type!==s.u||e.children.length>0)})(e),((e,t)=>{t.forEach(n=>{e.edges.push(...Object(o.f)(n,t))})})(e,l),((e,t,n)=>{n&&e.edges.push(...c(n,t))})(e,l,d),e}},5718:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n(5719),s=n(58),i=n(15);const o=e=>{const[t,n,o]=Object(r.a)({namespace:e}),c=a.useMemo(()=>{let e;return o||n||(e=Object(s.j)(null==t?void 0:t.data).alerts,e.forEach(e=>{delete e.activeAt,e.rule&&(delete e.rule.evaluationTime,delete e.rule.lastEvaluation,e.rule.alerts&&e.rule.alerts.forEach(e=>{delete e.activeAt}))})),{data:e,loaded:!o,loadError:n}},[n,o,t]);return Object(i.De)(c)}},5719:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(763),r=n(436);const s=({delay:e,namespace:t})=>{const n=Object(r.b)({endpoint:r.a.RULES,namespace:t});return Object(a.useURLPoll)(n,e,t)}},5720:function(e,t,n){"use strict";var a=n(5657);n.d(t,"a",(function(){return a.c}))},5723:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var a=n(141),r=n(225),s=n(22),i=n(5599),o=n(5790),c=n(5724);const l=(e,t)=>{var n;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e.failureThreshold&&{failureThreshold:a.a(e.failureThreshold)}),e.successThreshold&&{successThreshold:a.a(e.successThreshold)}),e.requestType===c.b.ContainerCommand&&{exec:e.exec}),e.requestType===c.b.HTTPGET&&{httpGet:Object.assign(Object.assign({},e[e.requestType]),{scheme:(null===(n=e[e.requestType])||void 0===n?void 0:n.scheme)?e[e.requestType].scheme[0]:"HTTP",port:t===i.k.KnativeService?0:a.a(e.httpGet.port)})}),e.requestType===c.b.TCPSocket&&{tcpSocket:{port:t===i.k.KnativeService?0:a.a(e.tcpSocket.port)}}),e.initialDelaySeconds&&{initialDelaySeconds:a.a(e.initialDelaySeconds)}),e.periodSeconds&&{periodSeconds:a.a(e.periodSeconds)}),e.timeoutSeconds&&{timeoutSeconds:a.a(e.timeoutSeconds)})},u=e=>{var t,n,a,s,i,o,l,u;return Object.assign(Object.assign(Object.assign(Object.assign({},e),{requestType:(u=e,r.a(u,c.b.HTTPGET)?c.b.HTTPGET:r.a(u,c.b.TCPSocket)?c.b.TCPSocket:r.a(u,"exec.command")?c.b.ContainerCommand:""),failureThreshold:(null===(t=e.failureThreshold)||void 0===t?void 0:t.toString())||"",successThreshold:(null===(n=e.successThreshold)||void 0===n?void 0:n.toString())||"",initialDelaySeconds:(null===(a=e.initialDelaySeconds)||void 0===a?void 0:a.toString())||"",periodSeconds:(null===(s=e.periodSeconds)||void 0===s?void 0:s.toString())||"",timeoutSeconds:(null===(i=e.timeoutSeconds)||void 0===i?void 0:i.toString())||""}),e.httpGet&&{httpGet:Object.assign(Object.assign({},e.httpGet),{port:(null===(o=e.httpGet.port)||void 0===o?void 0:o.toString())||"",scheme:"HTTP"===e.httpGet.scheme?void 0:["HTTPS"]})}),e.tcpSocket&&{tcpSocket:{port:(null===(l=e.tcpSocket.port)||void 0===l?void 0:l.toString())||""}})},d=(e,t=0)=>{var n,a,r,i,l,d,p,m,b,h;const v=null!==(i=null===(r=null===(a=null===(n=null==e?void 0:e.spec)||void 0===n?void 0:n.template)||void 0===a?void 0:a.spec)||void 0===r?void 0:r.containers)&&void 0!==i?i:[],g=null!==(d=null===(l=null==v?void 0:v[t])||void 0===l?void 0:l[c.a.ReadinessProbe])&&void 0!==d?d:{},f=null!==(m=null===(p=null==v?void 0:v[t])||void 0===p?void 0:p[c.a.LivenessProbe])&&void 0!==m?m:{},E=null!==(h=null===(b=null==v?void 0:v[t])||void 0===b?void 0:b[c.a.StartupProbe])&&void 0!==h?h:{};return{readinessProbe:{showForm:!1,modified:!1,enabled:!s.a(g),data:s.a(g)?o.b.data:Object.assign({},u(g))},livenessProbe:{showForm:!1,modified:!1,enabled:!s.a(f),data:s.a(f)?o.b.data:Object.assign({},u(f))},startupProbe:{showForm:!1,modified:!1,enabled:!s.a(E),data:s.a(E)?o.b.data:Object.assign({},u(E))}}},p=(e,t)=>{const{readinessProbe:n,livenessProbe:a,startupProbe:r}=e;return Object.assign(Object.assign(Object.assign({},n.enabled?{readinessProbe:l(n.data,t)}:{}),a.enabled?{livenessProbe:l(a.data,t)}:{}),t!==i.k.KnativeService&&(null==r?void 0:r.enabled)?{startupProbe:l(r.data)}:{})}},5724:function(e,t,n){"use strict";var a,r;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),function(e){e.ReadinessProbe="readinessProbe",e.LivenessProbe="livenessProbe",e.StartupProbe="startupProbe"}(a||(a={})),function(e){e.HTTPGET="httpGet",e.ContainerCommand="command",e.TCPSocket="tcpSocket"}(r||(r={}))},5725:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var a=n(5588);const r="#CREATE_PIPELINE_RESOURCE#",s={[a.o.git]:{params:{url:"",revision:""}},[a.o.image]:{params:{url:""}},[a.o.storage]:{params:{type:"",location:"",dir:""}},[a.o.cluster]:{params:{name:"",url:"",username:"",password:"",insecure:""},secrets:{cadata:"",token:""}}}},5727:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(31),i=n(53),o=n(518),c=n(15),l=n(5704);t.a=Object(s.connect)(e=>({namespace:Object(o.d)(e),application:Object(o.c)(e)}),e=>({onChange:t=>{e(Object(i.k)(t))}}))(({namespace:e,application:t,onChange:n,disabled:s})=>{const{t:i}=Object(r.useTranslation)(),o=i("topology~All applications"),u=i("topology~No application group"),d=t===c.b?o:t===c.mc?u:t,[p,m]=a.useState(d);if(a.useEffect(()=>{s||m(d)},[s,d]),e===c.c)return null;return a.createElement(l.a,{className:"co-namespace-selector",buttonClassName:"pf-m-plain",namespace:e,title:p&&a.createElement("span",{className:"btn-link__title"},p),titlePrefix:i("topology~Application"),allSelectorItem:{allSelectorKey:c.b,allSelectorTitle:o},noneSelectorItem:{noneSelectorKey:c.mc,noneSelectorTitle:u},selectedKey:t||c.b,onChange:(e,t)=>{t===c.b?n(t):n(e)},userSettingsPrefix:c.f,storageKey:c.e,disabled:s})})},5728:function(e,t,n){},5729:function(e,t,n){"use strict";n.d(t,"h",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"g",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return d}));var a=n(5731);const r={id:"clusterbuildstrategy",plural:"clusterbuildstrategies",apiGroup:a.a,apiVersion:"v1alpha1",kind:"ClusterBuildStrategy",namespaced:!1,crd:!0,label:"ClusterBuildStrategy",labelKey:"shipwright-plugin~ClusterBuildStrategy",labelPlural:"ClusterBuildStrategies",labelPluralKey:"shipwright-plugin~ClusterBuildStrategies",abbr:"CBS"},s={id:"buildstrategy",plural:"buildstrategies",apiGroup:a.a,apiVersion:"v1alpha1",kind:"BuildStrategy",namespaced:!0,crd:!0,label:"BuildStrategy",labelKey:"shipwright-plugin~BuildStrategy",labelPlural:"BuildStrategies",labelPluralKey:"shipwright-plugin~BuildStrategies",abbr:"BS"},i={id:"build",plural:"builds",apiGroup:a.a,apiVersion:"v1alpha1",kind:"Build",namespaced:!0,crd:!0,label:"Build",labelKey:"shipwright-plugin~Build",labelPlural:"Builds",labelPluralKey:"shipwright-plugin~Builds",abbr:"B"},o={id:"buildrun",plural:"buildruns",apiGroup:a.a,apiVersion:"v1alpha1",kind:"BuildRun",namespaced:!0,crd:!0,label:"BuildRun",labelKey:"shipwright-plugin~BuildRun",labelPlural:"BuildRuns",labelPluralKey:"shipwright-plugin~BuildRuns",abbr:"BR"},c={id:"clusterbuildstrategy",plural:"clusterbuildstrategies",apiGroup:a.a,apiVersion:a.b,kind:"ClusterBuildStrategy",namespaced:!1,crd:!0,label:"ClusterBuildStrategy",labelKey:"shipwright-plugin~ClusterBuildStrategy",labelPlural:"ClusterBuildStrategies",labelPluralKey:"shipwright-plugin~ClusterBuildStrategies",abbr:"CBS"},l={id:"buildstrategy",plural:"buildstrategies",apiGroup:a.a,apiVersion:a.b,kind:"BuildStrategy",namespaced:!0,crd:!0,label:"BuildStrategy",labelKey:"shipwright-plugin~BuildStrategy",labelPlural:"BuildStrategies",labelPluralKey:"shipwright-plugin~BuildStrategies",abbr:"BS"},u={id:"build",plural:"builds",apiGroup:a.a,apiVersion:a.b,kind:"Build",namespaced:!0,crd:!0,label:"Build",labelKey:"shipwright-plugin~Build",labelPlural:"Builds",labelPluralKey:"shipwright-plugin~Builds",abbr:"B"},d={id:"buildrun",plural:"buildruns",apiGroup:a.a,apiVersion:a.b,kind:"BuildRun",namespaced:!0,crd:!0,label:"BuildRun",labelKey:"shipwright-plugin~BuildRun",labelPlural:"BuildRuns",labelPluralKey:"shipwright-plugin~BuildRuns",abbr:"BR"}},5731:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return c}));const a="shipwright.io",r="v1beta1",s="build.shipwright.io/name",i="app.kubernetes.io/instance",o="image-registry.openshift-image-registry.svc:5000",c="quay.io"},5734:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a=(e,t)=>Object.assign(Object.assign({},e),{prop:`${t}-${e.prop}`})},5735:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(0),r=n(353),s=n(19),i=n(7),o=n(14),c=n(13),l=n(517),u=n(5670),d=n(1406),p=n(5),m=n(980),b=n(108),h=n(8),v=n(15),g=n(30),f=n(119),E=n(2229);n(5828);const O=a.memo(({current:e,title:t,humanize:n,consumers:o,namespace:c,position:l=r.b.top,description:u,children:d})=>{const{t:p}=Object(i.useTranslation)(),[m,b]=a.useState(!1),h=a.useCallback(()=>b(!0),[]),v=a.useCallback(()=>b(!1),[]);return e?a.createElement(r.a,{position:l,headerContent:p("console-shared~{{title}} breakdown",{title:t}),bodyContent:a.createElement(k,{humanize:n,consumers:o,namespace:c,isOpen:m,description:u},d),enableFlip:!0,onShow:h,onHide:v,maxWidth:"21rem"},a.createElement(s.a,{variant:"link",isInline:!0},e)):null});t.b=O;const y=e=>{switch(e){case c.m.ERROR:return a.createElement(f.h,null);case c.m.WARN:return a.createElement(f.m,null);default:return null}},j=({limitState:e,requestedState:t,total:n,limit:r,current:s,available:o,requested:l})=>{const{t:u}=Object(i.useTranslation)();return(!!e&&e!==c.m.OK||!!t&&t!==c.m.OK)&&a.createElement("ul",{className:"co-utilization-card-popover__consumer-list"},a.createElement(E.default,{value:n},u("console-shared~Total capacity")),a.createElement(E.default,{value:r,icon:y(e)},u("console-shared~Total limit")),a.createElement(E.default,{value:s},u("console-shared~Current utilization")),a.createElement(E.default,{value:o},u("console-shared~Current available capacity")),a.createElement(E.default,{value:l,icon:y(t)},u("console-shared~Total requested")))},k=Object(u.a)(a.memo(({humanize:e,consumers:t,namespace:n,watchPrometheus:r,stopWatchPrometheusQuery:s,prometheusResults:u,isOpen:f,description:E,children:O})=>{const{t:y}=Object(i.useTranslation)(),[j,k]=a.useState(t[0]),T=Object(c.jc)()[0],R=Object(v.Fe)(g.A.CAN_GET_NS)&&!!window.SERVER_FLAGS.prometheusBaseURL,{query:S,model:P,metric:N,fieldSelector:C}=j,w=a.useMemo(()=>f?((e,t,n)=>({isList:!0,kind:e.crd?Object(h.Hb)(e):e.kind,fieldSelector:n,namespace:t}))(P,n,C):null,[C,f,P,n]),[I,A,x]=Object(b.a)(w);a.useEffect(()=>f?(r(S,n),()=>{s(S)}):()=>{},[S,s,r,n,f]);const D=[],[M,L]=Object(l.b)(u,S),U=Object(d.a)(M,N);if(w&&A&&!x)for(const t of U){if(I.some(e=>Object(v.dd)(e)===t.metric[N]&&(!P.namespaced||Object(v.ed)(e)===t.metric.namespace))&&D.push(Object.assign(Object.assign({},t),{y:e(t.y).string})),5===D.length)break}const B=a.useMemo(()=>{const e=new URLSearchParams;return e.set("query0",j.query),e},[j.query]),F=a.useMemo(()=>t.reduce((e,t)=>(e[Object(h.Hb)(t.model)]=y("console-shared~By {{label}}",{label:t.model.labelKey?y(t.model.labelKey):t.model.label}),e),{}),[t,y]),q=a.useCallback(e=>k(t.find(t=>Object(h.Hb)(t.model)===e)),[t]),$=R&&"admin"===T?"/monitoring/query-browser?"+B.toString():`/dev-monitoring/ns/${n}/metrics?${B.toString()}`;let K;return K=L||x?a.createElement("div",{className:"text-secondary"},y("console-shared~Not available")):A&&M?a.createElement(a.Fragment,null,a.createElement("ul",{className:"co-utilization-card-popover__consumer-list","aria-label":y("console-shared~Top consumer by {{label}}",{label:P.label})},D&&D.map(e=>{const t=String(e.x);return a.createElement(_,{key:t,value:e.y},a.createElement(o.Link,{className:"co-utilization-card-popover__consumer-name",to:Object(p.uc)(P,t,e.metric.namespace)},t))})),a.createElement(o.Link,{to:$},y("console-shared~View more"))):a.createElement("ul",{className:"co-utilization-card-popover__consumer-list"},a.createElement("li",{className:"skeleton-consumer"}),a.createElement("li",{className:"skeleton-consumer"}),a.createElement("li",{className:"skeleton-consumer"}),a.createElement("li",{className:"skeleton-consumer"}),a.createElement("li",{className:"skeleton-consumer"})),a.createElement("div",{className:"co-utilization-card-popover__body"},E&&a.createElement("div",{className:"co-utilization-card-popover__description"},E),O,a.createElement("div",{className:"co-utilization-card-popover__title"},1===t.length?y("console-shared~Top {{label}} consumers",{label:j.model.label.toLowerCase()}):y("console-shared~Top consumers")),t.length>1&&a.createElement(m.b,{className:"co-utilization-card-popover__dropdown",id:"consumer-select",name:"selectConsumerType","aria-label":y("console-shared~Select consumer type"),items:F,onChange:q,selectedKey:Object(h.Hb)(P)}),K)})),_=({children:e,value:t})=>a.createElement("li",{className:"co-utilization-card-popover__consumer-item"},e,a.createElement("div",{className:"co-utilization-card-popover__consumer-value"},t))},5738:function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"d",(function(){return O})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return j}));var a=n(0),r=n(7),s=n(406),i=n(967),o=n(4377),c=n(5791),l=n(1409),u=n(52),d=n(5),p=n(108),m=n(5670),b=n(5734),h=n(517),v=n(5784);const g=({operatorStatus:e,isResolved:t,key:n,Component:r,LoadingComponent:s})=>{const i=r;return t?a.createElement(i,{key:n,operatorStatus:e}):a.createElement(d.c,{key:e.operators[0].metadata.uid,operatorStatus:e,loader:r,LoadingComponent:s})},f=({resources:e,operatorExtensions:t,dynamicOperatorSubsystems:n})=>{const{t:o}=Object(r.useTranslation)(),l=[...t.map((t,n)=>{const r=t.resources.reduce((t,a)=>(t[a.prop]=e[Object(b.a)(a,n).prop],t),{});return a.createElement(s.a,{key:t.title},a.createElement(c.a,{resources:r,getOperatorsWithStatuses:t.getOperatorsWithStatuses,title:t.title,linkTo:t.viewAllLink||Object(d.tc)(t.resources[0].kind),Row:g,Component:t.operatorRowLoader,isResolved:!1}))}),...n.map((t,n)=>{const r=t.resources.reduce((t,a)=>(t[a.prop]=e[Object(b.a)(a,n).prop],t),{});return a.createElement(s.a,{key:t.title},a.createElement(c.a,{resources:r,getOperatorsWithStatuses:t.getOperatorsWithStatuses,title:t.title,linkTo:t.viewAllLink||Object(d.tc)(t.resources[0].kind),Row:g,Component:t.operatorRowLoader,isResolved:!0}))})].reverse();return a.createElement(i.a,{hasGutter:!0},a.createElement(s.a,null,o("public~Operators create, configure, and manage applications by extending the Kubernetes API.")),l)},E=Object(m.a)(({resources:e,watchK8sResource:t,stopWatchK8sResource:n,operatorExtensions:s,dynamicOperatorSubsystems:i})=>{const{t:c}=Object(r.useTranslation)();a.useEffect(()=>(s.forEach((e,n)=>e.resources.forEach(e=>t(Object(b.a)(e,n)))),()=>{s.forEach((e,t)=>e.resources.forEach(e=>n(Object(b.a)(e,t))))}),[t,n,s]);const d=s.map((t,n)=>{const a=t.resources.reduce((t,a)=>(t[a.prop]=e[Object(b.a)(a,n).prop]||{},t),{});if(Object.keys(a).some(e=>a[e].loadError))return{health:u.a.NOT_AVAILABLE};if(Object.keys(a).some(e=>!a[e].loaded))return{health:u.a.LOADING};const r=t.getOperatorsWithStatuses(a);if(!r.length)return{health:u.a.OK};const s=Object(l.a)(r);return{health:s[0].status.health,count:s.length}}),p=Object(l.b)(d,c);return a.createElement(o.default,{title:c("public~Operators"),state:p.health,details:p.detailMessage,popupTitle:c("public~Operator status")},a.createElement(f,{resources:e,operatorExtensions:s,dynamicOperatorSubsystems:i}))}),O=Object(m.a)(({watchURL:e,stopWatchURL:t,urlResults:n,resources:r,watchK8sResource:s,stopWatchK8sResource:i,subsystem:c,models:l})=>{const u=c.additionalResource&&!!l.get(c.additionalResource.kind);a.useEffect(()=>(e(c.url,c.fetch?c.fetch:void 0),u&&s(c.additionalResource),()=>{t(c.url),u&&i(c.additionalResource)}),[e,t,s,i,c,u]);const p=n.getIn([c.url,"data"]),m=n.getIn([c.url,"loadError"]),b=c.additionalResource?r[c.additionalResource.prop]:null,h=c.healthHandler(p,m,b);return a.createElement(o.default,{title:c.title,state:h.state,details:h.message,popupTitle:c.popupTitle,popupBodyContent:c.popupComponent?e=>a.createElement(d.c,{loader:c.popupComponent,healthResult:p,healthResultError:m,k8sResult:b,hide:e}):void 0})}),y=Object(m.a)(({watchK8sResource:e,stopWatchK8sResource:t,resources:n,watchPrometheus:s,stopWatchPrometheusQuery:i,prometheusResults:c,subsystem:l,models:u})=>{const{t:p}=Object(r.useTranslation)(),{infrastructure:m}=a.useContext(v.a),b=l.additionalResource&&!!u.get(l.additionalResource.kind);a.useEffect(()=>(l.queries.forEach(e=>s(e)),b&&e(l.additionalResource),()=>{l.queries.forEach(e=>i(e)),b&&t(l.additionalResource)}),[e,t,s,i,l,b]);const g=a.useMemo(()=>l.queries.map(e=>{const[t,n]=Object(h.b)(c,e);return{response:t,error:n}}),[c,l.queries]),f=l.additionalResource?n[l.additionalResource.prop]:null,E=l.healthHandler(g,p,f,m);return a.createElement(o.default,{title:l.title,state:E.state,details:E.message,popupTitle:l.popupTitle,popupClassname:l.popupClassname,popupKeepOnOutsideClick:l.popupKeepOnOutsideClick,popupBodyContent:l.popupComponent?e=>a.createElement(d.c,{loader:l.popupComponent,responses:g,k8sResult:f,hide:e}):void 0})}),j=({subsystem:e,namespace:t})=>{const{t:n}=Object(r.useTranslation)(),{title:s,resources:i,healthHandler:c,popupComponent:l,popupTitle:u}=e,m=a.useMemo(()=>Object.assign(Object.assign({},i),i.imageManifestVuln&&{imageManifestVuln:Object.assign(Object.assign({},i.imageManifestVuln),{namespace:t})}),[i,t]),b=Object(p.b)(m),h=c(b,n);return a.createElement(o.default,{title:s,state:h.state,details:h.message,popupTitle:u},l&&b&&a.createElement(d.c,Object.assign({loader:l},b,{namespace:t})))}},5744:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l}));var a,r=n(550);!function(e){e.CPU_USAGE="CPU_USAGE",e.CPU_REQUESTS="CPU_REQUESTS",e.MEMORY_USAGE="MEMORY_USAGE",e.MEMORY_REQUESTS="MEMORY_REQUESTS",e.POD_COUNT="POD_COUNT",e.PODS_BY_CPU="PODS_BY_CPU",e.PODS_BY_MEMORY="PODS_BY_MEMORY",e.PODS_BY_FILESYSTEM="PODS_BY_FILESYSTEM",e.PODS_BY_NETWORK_IN="PODS_BY_NETWORK_IN",e.PODS_BY_NETWORK_OUT="PODS_BY_NETWORK_OUT",e.FILESYSTEM_USAGE="FILESYSTEM_USAGE",e.NETWORK_IN_UTILIZATION="NETWORK_IN_UTILIZATION",e.NETWORK_OUT_UTILIZATION="NETWORK_OUT_UTILIZATION",e.NETWORK_UTILIZATION="NETWORK_UTILIZATION"}(a||(a={}));const s={[a.CPU_USAGE]:r.a("namespace:container_cpu_usage:sum{namespace='<%= project %>'}"),[a.CPU_REQUESTS]:r.a('sum(kube_pod_resource_request{resource="cpu", namespace="<%= project %>"}) by (namespace)'),[a.MEMORY_USAGE]:r.a('sum(container_memory_working_set_bytes{namespace=\'<%= project %>\',container="",pod!=""}) BY (namespace)'),[a.MEMORY_REQUESTS]:r.a('sum(kube_pod_resource_request{resource="memory", namespace="<%= project %>"}) by (namespace)'),[a.POD_COUNT]:r.a("count(kube_running_pod_ready{namespace='<%= project %>'}) BY (namespace)"),[a.FILESYSTEM_USAGE]:r.a('sum(pod:container_fs_usage_bytes:sum{container="",pod!="",namespace=\'<%= project %>\'}) BY (namespace)'),[a.NETWORK_IN_UTILIZATION]:r.a('sum(rate(container_network_receive_bytes_total{container="POD",pod!="",namespace=\'<%= project %>\'}[5m])) BY (namespace)'),[a.NETWORK_OUT_UTILIZATION]:r.a('sum(rate(container_network_transmit_bytes_total{container="POD",pod!="",namespace=\'<%= project %>\'}[5m])) BY (namespace)')},i={[a.PODS_BY_CPU]:r.a('topk(25, sort_desc(sum(avg_over_time(pod:container_cpu_usage:sum{container="",pod!="",namespace=\'<%= project %>\'}[5m])) BY (pod, namespace)))'),[a.PODS_BY_MEMORY]:r.a('topk(25, sort_desc(sum(avg_over_time(container_memory_working_set_bytes{container="",pod!="",namespace=\'<%= project %>\'}[5m])) BY (pod, namespace)))'),[a.PODS_BY_FILESYSTEM]:r.a('topk(25, sort_desc(sum(pod:container_fs_usage_bytes:sum{container="",pod!="",namespace=\'<%= project %>\'}) BY (pod, namespace)))'),[a.PODS_BY_NETWORK_IN]:r.a('topk(25, sort_desc(sum(rate(container_network_receive_bytes_total{ container="POD", pod!= "", namespace = \'<%= project %>\'}[5m])) BY (namespace, pod)))'),[a.PODS_BY_NETWORK_OUT]:r.a('topk(25, sort_desc(sum(rate(container_network_transmit_bytes_total{ container="POD", pod!= "", namespace = \'<%= project %>\'}[5m])) BY (namespace, pod)))')},o=e=>({[a.NETWORK_UTILIZATION]:[{query:s[a.NETWORK_IN_UTILIZATION]({project:e}),desc:"in"},{query:s[a.NETWORK_OUT_UTILIZATION]({project:e}),desc:"out"}]}),c=e=>({[a.CPU_USAGE]:s[a.CPU_USAGE]({project:e}),[a.CPU_REQUESTS]:s[a.CPU_REQUESTS]({project:e}),[a.MEMORY_USAGE]:s[a.MEMORY_USAGE]({project:e}),[a.MEMORY_REQUESTS]:s[a.MEMORY_REQUESTS]({project:e}),[a.POD_COUNT]:s[a.POD_COUNT]({project:e}),[a.FILESYSTEM_USAGE]:s[a.FILESYSTEM_USAGE]({project:e})}),l=e=>({[a.PODS_BY_CPU]:i[a.PODS_BY_CPU]({project:e}),[a.PODS_BY_MEMORY]:i[a.PODS_BY_MEMORY]({project:e}),[a.PODS_BY_FILESYSTEM]:i[a.PODS_BY_FILESYSTEM]({project:e}),[a.PODS_BY_NETWORK_IN]:i[a.PODS_BY_NETWORK_IN]({project:e}),[a.PODS_BY_NETWORK_OUT]:i[a.PODS_BY_NETWORK_OUT]({project:e})})},5745:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l}));var a,r=n(550);!function(e){e.MEMORY_TOTAL="MEMORY_TOTAL",e.MEMORY_UTILIZATION="MEMORY_UTILIZATION",e.MEMORY_REQUESTS="MEMORY_REQUESTS",e.NETWORK_UTILIZATION="NETWORK_UTILIZATION",e.NETWORK_IN_UTILIZATION="NETWORK_IN_UTILIZATION",e.NETWORK_OUT_UTILIZATION="NETWORK_OUT_UTILIZATION",e.CPU_UTILIZATION="CPU_UTILIZATION",e.CPU_TOTAL="CPU_TOTAL",e.CPU_REQUESTS="CPU_REQUESTS",e.STORAGE_UTILIZATION="STORAGE_UTILIZATION",e.STORAGE_TOTAL="STORAGE_TOTAL",e.PODS_BY_CPU="PODS_BY_CPU",e.PODS_BY_MEMORY="PODS_BY_MEMORY",e.PODS_BY_STORAGE="PODS_BY_STORAGE",e.PODS_BY_NETWORK_IN="PODS_BY_NETWORK_IN",e.PODS_BY_NETWORK_OUT="PODS_BY_NETWORK_OUT",e.NODES_BY_CPU="NODES_BY_CPU",e.NODES_BY_MEMORY="NODES_BY_MEMORY",e.NODES_BY_STORAGE="NODES_BY_STORAGE",e.NODES_BY_NETWORK_IN="NODES_BY_NETWORK_IN",e.NODES_BY_NETWORK_OUT="NODES_BY_NETWORK_OUT",e.NODES_BY_PODS="NODES_BY_PODS",e.PROJECTS_BY_CPU="PROJECTS_BY_CPU",e.PROJECTS_BY_MEMORY="PROJECTS_BY_MEMORY",e.PROJECTS_BY_STORAGE="PROJECTS_BY_STORAGE",e.PROJECTS_BY_NETWORK_IN="PROJECTS_BY_NETWORK_IN",e.PROJECTS_BY_NETWORK_OUT="PROJECTS_BY_NETWORK_OUT",e.PROJECTS_BY_PODS="PROJECTS_BY_PODS",e.POD_UTILIZATION="POD_UTILIZATION"}(a||(a={}));const s={[a.PODS_BY_CPU]:r.a('\n      topk(25, sort_desc(\n        (\n          sum(avg_over_time(pod:container_cpu_usage:sum{container="",pod!=""}[5m])) BY (pod, namespace)\n          *\n          on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n        )\n        *\n        on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      ))\n    '),[a.PODS_BY_MEMORY]:r.a('\n      topk(25, sort_desc(\n        (\n          sum(avg_over_time(container_memory_working_set_bytes{container="",pod!=""}[5m])) BY (pod, namespace)\n          *\n          on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n        )\n        *\n        on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      ))\n    '),[a.PODS_BY_STORAGE]:r.a('\n      topk(25, sort_desc(\n        (\n          sum(avg_over_time(pod:container_fs_usage_bytes:sum{container="", pod!=""}[5m])) BY (pod, namespace)\n          *\n          on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n        )\n        *\n        on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      ))\n    '),[a.PODS_BY_NETWORK_IN]:r.a('\n      topk(25, sort_desc(\n        (\n          sum(rate(container_network_receive_bytes_total{ container="POD", pod!= ""}[5m])) BY (namespace, pod)\n          *\n          on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n        )\n        *\n        on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      ))\n    '),[a.PODS_BY_NETWORK_OUT]:r.a('\n      topk(25, sort_desc(\n        (\n          sum(rate(container_network_transmit_bytes_total{ container="POD", pod!= ""}[5m])) BY (namespace, pod)\n          *\n          on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n        )\n        *\n        on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      ))\n    '),[a.NODES_BY_CPU]:r.a('\n      topk(25, sort_desc(\n        avg_over_time(instance:node_cpu:rate:sum[5m])\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      ))\n    '),[a.NODES_BY_MEMORY]:r.a('\n      topk(25, sort_desc(\n        (node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes)\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      ))\n    '),[a.NODES_BY_STORAGE]:r.a('\n      topk(25, sort_desc(\n        (\n          sum by (instance) (max by (device, instance) (node_filesystem_size_bytes{device=~"/.*"}))\n          -\n          sum by (instance) (max by (device, instance) (node_filesystem_avail_bytes{device=~"/.*"}))\n        )\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      ))\n    '),[a.NODES_BY_PODS]:r.a('\n      topk(25, sort_desc(\n        sum(avg_over_time(kubelet_running_pods[5m])) BY (node)\n        *\n        on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      ))\n    '),[a.NODES_BY_NETWORK_IN]:r.a('\n      topk(25, sort_desc(\n        sum(instance:node_network_receive_bytes_excluding_lo:rate1m) BY (instance)\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      ))\n    '),[a.NODES_BY_NETWORK_OUT]:r.a('\n      topk(25, sort_desc(\n        sum(instance:node_network_transmit_bytes_excluding_lo:rate1m) BY (instance)\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      ))\n    '),[a.PROJECTS_BY_CPU]:r.a('\n      topk(25, sort_desc(\n        sum by (namespace) (\n          (\n            sum(avg_over_time(pod:container_cpu_usage:sum{container="",pod!=""}[5m])) BY (namespace, pod)\n            *\n            on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n          )\n          *\n          on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n        )\n      ))\n    '),[a.PROJECTS_BY_MEMORY]:r.a('\n      topk(25, sort_desc(\n        sum by (namespace) (\n          (\n            sum(avg_over_time(container_memory_working_set_bytes{container="",pod!=""}[5m])) BY (namespace, pod)\n            *\n            on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n          )\n          *\n          on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n        )\n      ))\n    '),[a.PROJECTS_BY_STORAGE]:r.a('\n      topk(25, sort_desc(\n        sum by (namespace) (\n          (\n            sum(avg_over_time(pod:container_fs_usage_bytes:sum{container="", pod!=""}[5m])) BY (namespace, pod)\n            *\n            on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n          )\n          *\n          on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n        )\n      ))\n    '),[a.PROJECTS_BY_PODS]:r.a('\n      topk(25, sort_desc(\n        count by (namespace) (\n            topk without(uid) (1, kube_running_pod_ready)\n            *\n            ignoring(node,uid) group_right node_namespace_pod:kube_pod_info:\n          *\n          on(node) group_left() (max by (node) (kube_node_role{role=~"<%= nodeType %>"})))\n        ))\n    '),[a.PROJECTS_BY_NETWORK_IN]:r.a('\n      topk(25, sort_desc(\n        sum by (namespace) (\n          (\n            sum(rate(container_network_receive_bytes_total{ container="POD", pod!= ""}[5m])) BY (namespace, pod)\n            *\n            on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n          )\n          *\n          on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n        )\n      ))\n    '),[a.PROJECTS_BY_NETWORK_OUT]:r.a('\n      topk(25, sort_desc(\n        sum by (namespace) (\n          (\n            sum(rate(container_network_transmit_bytes_total{ container="POD", pod!= ""}[5m])) BY (namespace, pod)\n            *\n            on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n          )\n          *\n          on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n        )\n      ))\n    ')},i={[a.MEMORY_TOTAL]:r.a('\n      sum(\n        node_memory_MemTotal_bytes\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    '),[a.MEMORY_UTILIZATION]:r.a('\n      sum(\n        (node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes)\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    '),[a.MEMORY_REQUESTS]:r.a('\n      sum(\n        kube_pod_resource_request{resource="memory"}\n        *\n        on(node) group_left(role) (\n          max by (node) (kube_node_role{role=~"<%= nodeType %>"})\n        )\n      )\n    '),[a.NETWORK_UTILIZATION]:r.a('\n      sum(\n        (\n          instance:node_network_transmit_bytes_excluding_lo:rate1m\n          +\n          instance:node_network_receive_bytes_excluding_lo:rate1m\n        )\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    '),[a.CPU_UTILIZATION]:r.a('\n      sum(\n        1 - sum without (mode) (rate(node_cpu_seconds_total{mode=~"idle|iowait|steal"}[2m]))\n        *\n        on(instance) group_left() (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node","(.*)")\n        )\n      )\n    '),[a.CPU_TOTAL]:r.a('\n      sum(\n        kube_node_status_capacity{resource="cpu",unit="core"}\n        *\n        on(node) group_left(role) (\n          max by (node) (kube_node_role{role=~"<%= nodeType %>"})\n        )\n      )\n    '),[a.CPU_REQUESTS]:r.a('\n      sum(\n        kube_pod_resource_request{resource="cpu"}\n        *\n        on(node) group_left(role) (\n          max by (node) (kube_node_role{role=~"<%= nodeType %>"})\n        )\n      )\n    '),[a.STORAGE_UTILIZATION]:r.a('\n      sum(\n        (\n          max by (device, instance) (node_filesystem_size_bytes{device=~"/.*"})\n          -\n          max by (device, instance) (node_filesystem_free_bytes{device=~"/.*"})\n        )\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    '),[a.STORAGE_TOTAL]:r.a('\n      sum(\n        max by (device, instance) (node_filesystem_size_bytes{device=~"/.*"})\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    '),[a.POD_UTILIZATION]:r.a('\n      count(\n        (\n          topk without(uid) (1, kube_running_pod_ready)\n          *\n          ignoring(node,uid) group_right node_namespace_pod:kube_pod_info:\n        )\n        *\n        on(node) group_left() (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      )\n    '),[a.NETWORK_IN_UTILIZATION]:r.a('\n      sum(\n        instance:node_network_receive_bytes_excluding_lo:rate1m\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    '),[a.NETWORK_OUT_UTILIZATION]:r.a('\n      sum(\n        instance:node_network_transmit_bytes_excluding_lo:rate1m\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    ')},o=e=>({[a.NETWORK_UTILIZATION]:[{query:i[a.NETWORK_IN_UTILIZATION]({nodeType:e}),desc:"in"},{query:i[a.NETWORK_OUT_UTILIZATION]({nodeType:e}),desc:"out"}]}),c=e=>({[a.PODS_BY_CPU]:s[a.PODS_BY_CPU]({nodeType:e}),[a.PODS_BY_MEMORY]:s[a.PODS_BY_MEMORY]({nodeType:e}),[a.PODS_BY_STORAGE]:s[a.PODS_BY_STORAGE]({nodeType:e}),[a.PODS_BY_NETWORK_IN]:s[a.PODS_BY_NETWORK_IN]({nodeType:e}),[a.PODS_BY_NETWORK_OUT]:s[a.PODS_BY_NETWORK_OUT]({nodeType:e}),[a.NODES_BY_CPU]:s[a.NODES_BY_CPU]({nodeType:e}),[a.NODES_BY_MEMORY]:s[a.NODES_BY_MEMORY]({nodeType:e}),[a.NODES_BY_STORAGE]:s[a.NODES_BY_STORAGE]({nodeType:e}),[a.NODES_BY_PODS]:s[a.NODES_BY_PODS]({nodeType:e}),[a.NODES_BY_NETWORK_IN]:s[a.NODES_BY_NETWORK_IN]({nodeType:e}),[a.NODES_BY_NETWORK_OUT]:s[a.NODES_BY_NETWORK_OUT]({nodeType:e}),[a.PROJECTS_BY_CPU]:s[a.PROJECTS_BY_CPU]({nodeType:e}),[a.PROJECTS_BY_MEMORY]:s[a.PROJECTS_BY_MEMORY]({nodeType:e}),[a.PROJECTS_BY_STORAGE]:s[a.PROJECTS_BY_STORAGE]({nodeType:e}),[a.PROJECTS_BY_PODS]:s[a.PROJECTS_BY_PODS]({nodeType:e}),[a.PROJECTS_BY_NETWORK_IN]:s[a.PROJECTS_BY_NETWORK_IN]({nodeType:e}),[a.PROJECTS_BY_NETWORK_OUT]:s[a.PROJECTS_BY_NETWORK_OUT]({nodeType:e})}),l=e=>({[a.CPU_UTILIZATION]:{utilization:i[a.CPU_UTILIZATION]({nodeType:e}),total:i[a.CPU_TOTAL]({nodeType:e}),requests:i[a.CPU_REQUESTS]({nodeType:e})},[a.MEMORY_UTILIZATION]:{utilization:i[a.MEMORY_UTILIZATION]({nodeType:e}),total:i[a.MEMORY_TOTAL]({nodeType:e}),requests:i[a.MEMORY_REQUESTS]({nodeType:e})},[a.STORAGE_UTILIZATION]:{utilization:i[a.STORAGE_UTILIZATION]({nodeType:e}),total:i[a.STORAGE_TOTAL]({nodeType:e})},[a.POD_UTILIZATION]:{utilization:i[a.POD_UTILIZATION]({nodeType:e})}})},5746:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(5807),i=n(5674);n(5712);t.a=({resourceQuota:e})=>{var t,n;const{t:o}=Object(r.useTranslation)(),c=Object.keys(null!==(n=null===(t=e.status)||void 0===t?void 0:t.hard)&&void 0!==n?n:{}).map(t=>{var n;const r=e.status.hard[t],o=null===(n=e.status.used)||void 0===n?void 0:n[t],{label:c,percent:l}=Object(i.a)({resourceName:t,used:o,hard:r});return a.createElement("div",{key:t,className:"co-resource-quota__chart","data-test":"resource-quota-gauge-chart"},a.createElement(s.b,{data:{x:l+"%",y:l},thresholds:[{value:90},{value:101}],title:t,label:c}))});return a.createElement("div",{className:"co-resource-quota-chart-row"},c.length?c:a.createElement(a.Fragment,null,o("console-app~No quota")))}},5747:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(5748),i=n(5674);n(5712);t.a=({appliedClusterResourceQuota:e,namespace:t})=>{var n,o,c,l;const{t:u}=Object(r.useTranslation)(),d=null===(o=null===(n=e.status)||void 0===n?void 0:n.namespaces)||void 0===o?void 0:o.find(e=>e.namespace===t),p=Object.keys(null!==(l=null===(c=null==d?void 0:d.status)||void 0===c?void 0:c.hard)&&void 0!==l?l:{}).map(t=>{var n,r,o,c,l;const u=null===(r=null===(n=e.status.total)||void 0===n?void 0:n.hard)||void 0===r?void 0:r[t],p=null===(c=null===(o=e.status.total)||void 0===o?void 0:o.used)||void 0===c?void 0:c[t],m=null===(l=d.status.used)||void 0===l?void 0:l[t],b=Object(i.b)(u,p),h=100-b,{label:v,percent:g}=Object(i.a)({resourceName:t,used:m,hard:u}),f=b-g;return a.createElement("div",{key:t,className:"co-resource-quota__chart","data-test":"resource-quota-gauge-chart"},a.createElement(s.a,{data:[{x:"Namespace",y:g},{x:"Other namespaces",y:f},{x:"Unused",y:h}],title:t,label:v}))});return a.createElement("div",{className:"co-resource-quota-chart-row"},p.length?p:a.createElement(a.Fragment,null,u("console-app~No quota")))}},5748:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(0),r=n(2232),s=n(6044),i=n(6045),o=n(6046),c=n(6047),l=n(6048),u=n(18),d=n.n(u),p=n(7),m=n(1943),b=n(5);const h=({data:e,query:t="",title:n,ariaChartLinkLabel:u,ariaChartTitle:h,ariaDescription:v,usedLabel:g,label:f,secondaryTitle:E,className:O})=>{var y;const{t:j}=Object(p.useTranslation)(),[k,_]=Object(b.Ic)(),T=g||j("public~used"),R=E||T,S=f||j("No data"),P=e.filter(e=>"Namespace"===e.x);return a.createElement(m.a,{className:d()("graph-wrapper--title-center graph-wrapper--gauge",O),ref:k,title:n},a.createElement(m.b,{query:t,ariaChartLinkLabel:u},a.createElement(r.a,{ariaTitle:h||n,ariaDesc:v,data:e,height:_,padding:0,labels:({datum:{x:e,y:t}})=>j("public~{{x}}: {{y}}%",{x:e,y:t}),width:_,subTitle:R,colorScale:100===(null===(y=P[0])||void 0===y?void 0:y.y)?[s.a.value,i.a.value,o.a.value]:[c.a.value,l.a.value,o.a.value],title:S})))}},5749:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(5674),i=n(119);n(5869);t.a=({hard:e,used:t})=>{const{t:n}=Object(r.useTranslation)(),o=Object.keys(e||{}).reduce((n,a)=>Object(s.b)(e[a],null==t?void 0:t[a])>=100?n+1:n,0);return a.createElement("div",{className:"co-resource-quota__summary"},n("console-shared~{{count}} resource",{count:Object.keys(e||{}).length}),", ",o>0?a.createElement(a.Fragment,null,a.createElement(i.m,null)," ",n("console-shared~{{count}} resource reached quota",{count:o})):n("console-shared~none are at quota"))}},5760:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b}));var a=n(7134),r=n(2328),s=n(7116),i=n(50),o=n(10),c=n(8),l=n(1415),u=n(5586),d=n(5687);const p=e=>a.a(e,e=>r.a(e)||s.a(e)||""===e),m=(e,t,n,a)=>{const r=`${t}-${Object(l.d)(6)}`,s={apiVersion:"tekton.dev/v1alpha1",kind:u.PipelineResourceModel.kind,metadata:{name:r,namespace:n},spec:Object.assign({type:t,params:Object(d.a)(p(e))},a&&{secrets:i.a(a.data,(e,t)=>({fieldName:t,secretKey:t,secretName:a.metadata.name}))})};return Object(c.jb)(u.PipelineResourceModel,s)},b=(e,t,n)=>{const a={apiVersion:"v1",kind:"Secret",metadata:{name:`${t}-secret-${Object(l.d)(6)}`,namespace:n},stringData:p(e)};return Object(c.jb)(o.SecretModel,a)}},5781:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return E}));var a=n(0),r=n(4436),s=n(655),i=n(313),o=n(367),c=n(50),l=n(599),u=n(5797),d=n(5804),p=n(7),m=n(99),b=n(693),h=n(139);const v=(e,t)=>`${e}:${t}`,g=({tag:e,imageStreamName:t,imageStreamNamespace:n,linkToTag:s})=>{const i=r.a(e.dockerImageReference,"@");return a.createElement(a.Fragment,null,a.createElement("li",null,a.createElement("div",{className:"co-images-stream-tag-timeline__item-row"},a.createElement("span",{className:"co-images-stream-tag-timeline__circle-icon"},a.createElement(u.a,null)),a.createElement("div",{className:"co-images-stream-tag-timeline__timestamp"},a.createElement(b.Timestamp,{timestamp:e.created,simple:!0}))),a.createElement("div",{className:"co-images-stream-tag-timeline__item-row"},a.createElement("span",{className:"co-images-stream-tag-timeline__line"}),a.createElement("div",{className:"co-images-stream-tag-timeline__info"},a.createElement(m.ResourceLink,{kind:"ImageStreamTag",name:v(t,e.tag),namespace:n,title:e.tag,linkTo:s}),a.createElement("div",{className:"co-break-all"},"from ",i[0]),a.createElement("div",{className:"co-break-all"},i[1])))))},f=(e,t,n)=>t===s.a(n,t=>t.tag===e),E=({imageStreamTags:e,imageStreamName:t,imageStreamNamespace:n})=>{const{t:r}=Object(p.useTranslation)();if(!i.a(e,"items"))return a.createElement(h.c,{label:r("public~Images")});const s=o.a(c.a(e,({tag:e,items:t})=>c.a(t,({created:t,dockerImageReference:n})=>({tag:e,created:t,dockerImageReference:n})))),u=l.a(s,["created"],["desc"]),m=c.a(u,(e,r)=>a.createElement(g,{key:e.dockerImageReference,tag:e,imageStreamName:t,imageStreamNamespace:n,linkToTag:f(e.tag,r,u)}));return a.createElement(a.Fragment,null,a.createElement("ul",{className:"co-images-stream-tag-timeline"},m,a.createElement("div",null,a.createElement("span",{className:"co-images-stream-tag-timeline__square-icon"},a.createElement(d.a,null)))))}},5784:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(0);const r=a.createContext({infrastructureLoaded:!0,infrastructureError:null})},5790:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i}));var a=n(5724);const r=(e,t)=>{switch(e){case a.a.ReadinessProbe:return{formTitle:t("devconsole~Readiness probe"),formSubtitle:t("devconsole~A readiness probe checks if the Container is ready to handle requests. A failed readiness probe means that a Container should not receive any traffic from a proxy, even if it's running.")};case a.a.LivenessProbe:return{formTitle:t("devconsole~Liveness probe"),formSubtitle:t("devconsole~A liveness probe checks if the Container is still running. If the liveness probe fails the Container is killed.")};case a.a.StartupProbe:return{formTitle:t("devconsole~Startup probe"),formSubtitle:t("devconsole~A startup probe checks if the application within the Container is started. If the startup probe fails the Container is killed.")};default:return}},s={showForm:!1,enabled:!1,modified:!1,data:{failureThreshold:"3",requestType:a.b.HTTPGET,httpGet:{scheme:void 0,path:"/",port:"8080",httpHeaders:[]},tcpSocket:{port:"8080"},exec:{command:[""]},initialDelaySeconds:"0",periodSeconds:"10",timeoutSeconds:"1",successThreshold:"1"}},i={readinessProbe:s,livenessProbe:s,startupProbe:s}},5791:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(0),r=n(363),s=n(7),i=n(14),o=n(1409),c=n(52),l=n(2229);n(5792);const u=({resources:e,getOperatorsWithStatuses:t,title:n,linkTo:u,Row:d,Component:p,isResolved:m})=>{const{t:b}=Object(s.useTranslation)(),h=r.a(e).some(e=>e.loadError),v=t(e),g=Object(o.a)(v).sort((e,t)=>e.operators[0].metadata.name.localeCompare(t.operators[0].metadata.name)),f=g.every(e=>e.status.health===c.a.OK),E=a.useCallback(()=>a.createElement("div",{className:"co-status__operator-skeleton"}),[]);return v.length?a.createElement(l.StatusPopupSection,{firstColumn:a.createElement(a.Fragment,null,a.createElement("span",null,n),a.createElement("span",{className:"text-secondary co-status__operator-detail"}," ",b("console-shared~({{operatorStatusLength}} installed)",{operatorStatusLength:v.length}))),secondColumn:b("console-shared~Status")},h?a.createElement("div",{className:"text-secondary"},b("console-shared~Not available")):!f&&g.map(e=>a.createElement(d,{key:e.operators[0].metadata.uid,Component:p,operatorStatus:e,LoadingComponent:E,isResolved:m})),a.createElement(l.default,{value:b("console-shared~All {{status}}",{status:v[0].status.title.toLowerCase()}),icon:v[0].status.icon},a.createElement(i.Link,{to:u},b("console-shared~View all")))):null}},5792:function(e,t,n){},5793:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return P}));var a=n(0),r=n(22),s=n(31),i=n(14),o=n(7),c=n(69),l=n(13),u=n(192),d=n(434),p=n(295),m=n(5387),b=n(5388),h=n(15),v=n(4375),g=n(4364),f=n(4376),E=n(58),O=n(8),y=n(10),j=n(5738),k=n(108),_=n(206),T=n(1417);const R={kind:Object(O.Hb)(y.ClusterVersionModel),namespaced:!1,name:"version",isList:!1},S=({labelSelector:e})=>{const{t:t}=Object(o.useTranslation)(),n=Object(_.a)(h.O.CLUSTER_VERSION),[s,,c]=Object(T.a)(e),[l,u]=Object(k.a)(n?R:{}),d=Object(h.we)()&&n&&u&&Object(O.db)(l)&&!e;return a.createElement(v.default,{error:!r.a(c)},d&&a.createElement(f.StatusItem,{key:"clusterUpdate",Icon:h.n,message:t("public~A cluster version update is available")},a.createElement(i.Link,{to:"/settings/cluster?showVersions"},t("public~Update cluster"))),s.map(e=>a.createElement(f.default,{key:Object(E.h)(e,e.rule.id),alert:e})))},P=Object(s.connect)(e=>({k8sModels:e.k8s.getIn(["RESOURCES","models"])}))(({k8sModels:e})=>{const t=Object(c.z)(c.f),[n]=Object(l.kc)(l.gb),r=a.useMemo(()=>((e,t)=>e.filter(e=>{if(Object(c.g)(e)||Object(c.d)(e)||Object(l.hb)(e)||Object(l.fb)(e)){const n=e;return!(n.properties.additionalResource&&!n.properties.additionalResource.optional)||!!t.get(n.properties.additionalResource.kind)}return!0}))([...t,...n],e).map(e=>{if(Object(l.Kb)(e)||Object(l.Ib)(e)||Object(l.Jb)(e)){const t=e.properties.popupComponent?{popupComponent:()=>Promise.resolve(e.properties.popupComponent)}:{};return Object.assign(Object.assign({},e),{properties:Object.assign(Object.assign({},e.properties),t)})}return e}),[t,n,e]),s=a.useMemo(()=>r.findIndex(e=>Object(c.c)(e)||Object(l.Hb)(e)),[r]),{t:h}=Object(o.useTranslation)(),v=[];if(r.forEach(t=>{if(Object(c.g)(t)||Object(l.Kb)(t))v.push({title:t.properties.title,Component:a.createElement(j.d,{subsystem:t.properties,models:e})});else if(Object(c.d)(t)||Object(l.Ib)(t)){const{disallowedControlPlaneTopology:n}=t.properties;if((null==n?void 0:n.length)&&n.includes(window.SERVER_FLAGS.controlPlaneTopology))return;v.push({title:t.properties.title,Component:a.createElement(j.b,{subsystem:t.properties,models:e})})}else(Object(c.e)(t)||Object(l.Jb)(t))&&v.push({title:t.properties.title,Component:a.createElement(j.c,{subsystem:t.properties})})}),-1!==s){const e=[],t=[];r.forEach(n=>{Object(l.Hb)(n)?t.push(n.properties):Object(c.c)(n)&&e.push(n.properties)}),v.splice(s,0,{title:"Operators",Component:a.createElement(j.a,{operatorExtensions:e,dynamicOperatorSubsystems:t})})}return a.createElement(u.a,{"data-test-id":"status-card",className:"co-overview-card--gradient",isClickable:!0,isSelectable:!0},a.createElement(d.a,{actions:{actions:a.createElement(a.Fragment,null,a.createElement(i.Link,{to:"/monitoring/alerts","data-test":"status-card-view-alerts"},h("public~View alerts"))),hasNoOffset:!1,className:"co-overview-card__actions"}},a.createElement(p.a,null,h("public~Status"))),a.createElement(g.default,null,a.createElement(m.a,{className:"co-overview-status__health",hasGutter:!0},v.map(e=>a.createElement(b.a,{key:e.title,"data-test":e.title},e.Component)))),a.createElement(S,null))})},5805:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(0),r=n(19),s=n(7),i=n(15),o=n(984),c=n(5851),l=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const u=({openProjectModal:e})=>{const{t:t}=Object(s.useTranslation)(),n=Object(i.Fe)(i.O.CAN_CREATE_NS);return Object(i.Fe)(i.O.CAN_CREATE_PROJECT)?a.createElement(s.Trans,{t:t,ns:"devconsole"}," or ",a.createElement(r.a,{isInline:!0,variant:"link",onClick:e},"create a Project")):n?a.createElement(s.Trans,{t:t,ns:"devconsole"}," or ",a.createElement(r.a,{isInline:!0,variant:"link",onClick:e},"create a Namespace")):null};t.b=e=>{var{onCreate:t,title:n,children:r}=e,s=l(e,["onCreate","title","children"]);const[,u]=Object(i.ue)(),d=Object(o.a)(),p=a.useCallback(()=>{d({onSubmit:e=>{var n;u(null===(n=e.metadata)||void 0===n?void 0:n.name),t&&t(e)}})},[t,u,d]);return a.createElement(c.a,Object.assign({},s,{title:n}),r(p))}},5806:function(e,t,n){"use strict";n.d(t,"b",(function(){return I})),n.d(t,"a",(function(){return A})),n.d(t,"c",(function(){return D}));var a=n(0),r=n(22),s=n(7),i=n(205),o=n(165),c=n(682),l=n(354),u=n(294),d=n(192),p=n(434),m=n(516),b=n(164),h=n(295),v=n(13),g=n(4382),f=n(4365),E=n(762),O=n(5670),y=n(982),j=n(1406),k=n(5745),_=n(10),T=n(517),R=n(108),S=n(8),P=n(4366),N=n(1200),C=n(5856);const w=[C.d,C.e],I=Object(O.a)(({watchPrometheus:e,stopWatchPrometheusQuery:t,prometheusResults:n,utilizationQuery:r,totalQuery:s,title:i,TopConsumerPopover:o,humanizeValue:c,byteDataType:l,namespace:u,isDisabled:d=!1,limitQuery:p,requestQuery:m,setLimitReqState:b})=>{let h,v,f,E,O,y,k,_,R,S=!1;const{duration:P}=Object(N.useUtilizationDuration)();return a.useEffect(()=>{if(!d)return e(r,u,P),s&&e(s,u),p&&e(p,u,P),m&&e(m,u,P),()=>{t(r,P),s&&t(s),p&&t(p,P),m&&t(m,P)}},[e,t,P,r,s,u,d,p,m]),d||([h,v]=Object(T.b)(n,r,P),[f,E]=Object(T.b)(n,s),[y,k]=Object(T.b)(n,p,P),[_,R]=Object(T.b)(n,m,P),O=Object(j.a)(f),S=!h||s&&!f||p&&!y),a.createElement(g.default,{title:i,utilization:h,limit:y,requested:_,error:v||E||k||R,isLoading:S,humanizeValue:c,byteDataType:l,query:[r,p,m],max:O&&O.length?O[0].y:null,TopConsumerPopover:o,setLimitReqState:b})}),A=Object(O.a)(({watchPrometheus:e,stopWatchPrometheusQuery:t,prometheusResults:n,queries:r,title:s,TopConsumerPopovers:i,humanizeValue:o,byteDataType:c,namespace:l,isDisabled:u=!1})=>{const{duration:d}=Object(N.useUtilizationDuration)();a.useEffect(()=>{if(!u)return r.forEach(t=>e(t.query,l,d)),()=>{r.forEach(e=>t(e.query,d))}},[e,t,d,r,l,u]);const p=[];let m=!1,b=!1;return u||r.forEach(e=>{var t;const[a,r]=Object(T.b)(n,e.query,d);return r?(m=!0,!1):a?void p.push((null===(t=Object(j.b)(a,e.desc,null,g.trimSecondsXMutator))||void 0===t?void 0:t[0])||[]):(b=!0,!1)}),a.createElement(g.MultilineUtilizationItem,{title:s,data:p,error:m,isLoading:b,humanizeValue:o,byteDataType:c,queries:r,TopConsumerPopovers:i})}),x=({machineConfigPools:e,onNodeSelect:t,selectedNodes:n})=>{const{t:r}=Object(s.useTranslation)(),[d,p]=a.useState(!1),m=e.sort((e,t)=>{const n=["worker","master"],a=n.indexOf(e.metadata.name),r=n.indexOf(t.metadata.name);return-1===a&&-1===r?e.metadata.name.localeCompare(t.metadata.name):-1===a?1:-1===r?-1:a-r}).map(e=>{const t="master"===e.metadata.name?"control plane":e.metadata.name;return a.createElement(i.a,{hasCheckbox:!0,key:e.metadata.name,value:t,isSelected:n.includes(e.metadata.name)},t)});return a.createElement(l.a,{role:"menu","aria-label":r("public~Filter by Node type"),onSelect:t,isOpen:d,selected:n,onOpenChange:e=>p(e),toggle:e=>a.createElement(o.a,{ref:e,onClick:e=>p(e),variant:"plainText"},r("public~Filter by Node type"),n.length>0&&a.createElement(c.a,{className:"pf-v5-u-ml-sm",isRead:!0},n.length))},a.createElement(u.a,null,m))},D=()=>{const{t:e}=Object(s.useTranslation)(),[t,n]=Object(R.a)({isList:!0,kind:Object(S.Hb)(_.MachineConfigPoolModel)}),[i,o]=a.useState([]),[c]=Object(v.kc)(v.Y),[l]=Object(v.kc)(v.X),u=r.a(i)?".+":i.join("|"),[g,O]=a.useMemo(()=>[Object(k.d)(u),Object(k.b)(u)],[u]);return n&&a.createElement(d.a,{"data-test-id":"utilization-card",isClickable:!0,isSelectable:!0},a.createElement(p.a,{actions:{actions:a.createElement(a.Fragment,null,a.createElement(m.a,null,a.createElement(b.a,null,a.createElement(x,{machineConfigPools:t,onNodeSelect:(e,t)=>{const n="control plane"===t?"master":t;i.includes(n)?o(i.filter(e=>e!==n)):o([...i,n])},selectedNodes:i})),a.createElement(b.a,null,a.createElement(P.UtilizationDurationDropdown,null)))),hasNoOffset:!1,className:void 0}},a.createElement(h.a,{"data-test":"utilization-card__title"},e("public~Cluster utilization"))),a.createElement(f.default,null,a.createElement(C.b.Provider,{value:u},a.createElement(I,{title:e("public~CPU"),utilizationQuery:g[k.a.CPU_UTILIZATION].utilization,totalQuery:g[k.a.CPU_UTILIZATION].total,requestQuery:g[k.a.CPU_UTILIZATION].requests,TopConsumerPopover:C.a,humanizeValue:y.h}),a.createElement(I,{title:e("public~Memory"),utilizationQuery:g[k.a.MEMORY_UTILIZATION].utilization,totalQuery:g[k.a.MEMORY_UTILIZATION].total,requestQuery:g[k.a.MEMORY_UTILIZATION].requests,TopConsumerPopover:C.c,humanizeValue:y.f,byteDataType:E.a.BinaryBytes}),a.createElement(I,{title:e("public~Filesystem"),utilizationQuery:g[k.a.STORAGE_UTILIZATION].utilization,totalQuery:g[k.a.STORAGE_UTILIZATION].total,TopConsumerPopover:C.g,humanizeValue:y.f,byteDataType:E.a.BinaryBytes}),a.createElement(A,{title:e("public~Network transfer"),queries:O[k.a.NETWORK_UTILIZATION],humanizeValue:y.j,TopConsumerPopovers:w}),a.createElement(I,{title:e("public~Pod count"),utilizationQuery:g[k.a.POD_UTILIZATION].utilization,TopConsumerPopover:C.f,humanizeValue:y.k}),c.map(({uid:e,properties:t})=>{var n,r,s;return a.createElement(I,{key:e,title:t.title,utilizationQuery:t.getUtilizationQuery(i),totalQuery:null===(n=t.getTotalQuery)||void 0===n?void 0:n.call(t,i),humanizeValue:t.humanize,TopConsumerPopover:t.TopConsumerPopover,requestQuery:null===(r=t.getRequestQuery)||void 0===r?void 0:r.call(t,i),limitQuery:null===(s=t.getLimitQuery)||void 0===s?void 0:s.call(t,i)})}),l.map(({uid:e,properties:t})=>a.createElement(A,{key:e,title:t.title,queries:t.getUtilizationQueries(i),humanizeValue:t.humanize,TopConsumerPopovers:t.TopConsumerPopovers})))))}},5807:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return g}));var a=n(0),r=n(515),s=n(6028),i=n(6029),o=n(18),c=n.n(o),l=n(7),u=n(1943),d=n(1197),p=n(436),m=n(5),b=n(1406);const h=[{value:67},{value:92}],v=({data:e,error:t,humanize:n=m.ec,invert:o=!1,loading:d,query:p="",remainderLabel:b,themeColor:v=r.a.green,thresholds:g=h,title:f,ariaChartLinkLabel:E,ariaChartTitle:O,usedLabel:y,label:j,secondaryTitle:k,className:_})=>{const{t:T}=Object(l.useTranslation)(),[R,S]=Object(m.Ic)(),P=!t&&!d,N=d?T("Loading"):t,C=y||T("public~used"),w=k||C,I=j||(e?n(e.y).string:void 0)||T("No data");return a.createElement(u.a,{className:c()("graph-wrapper--title-center graph-wrapper--gauge",_),ref:R,title:f},a.createElement(u.b,{query:p,ariaChartLinkLabel:E},a.createElement(s.a,{ariaTitle:O||f,data:g,height:S,padding:0,width:S,y:"value"},a.createElement(i.a,{labels:({datum:{x:e,y:t}})=>e?`${e} ${C}`:`${t} ${b||T("available")}`,data:P?e:{y:0},invert:o,padding:0,subTitle:P?w:"",themeColor:v,thresholds:g,title:N||I}))))},g=({humanize:e=m.ec,invert:t,namespace:n,percent:r=0,query:s,remainderLabel:i,secondaryTitle:o,thresholds:c,title:u,usedLabel:h})=>{const{t:g}=Object(l.useTranslation)(),[f,E,O]=Object(d.usePrometheusPoll)({endpoint:p.a.QUERY,namespace:n,query:s}),[y]=f?Object(b.a)(f,null,e).map(({label:e,y:t})=>({x:e,y:t})):[{x:e(r).string,y:r}];return a.createElement(v,{data:y,error:!!E&&g("No data"),invert:t,label:y.x,loading:O,query:s,remainderLabel:i,secondaryTitle:o,thresholds:c,title:u,usedLabel:h})}},5828:function(e,t,n){},5837:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(8),r=n(5586),s=n(5588),i=n(5760),o=n(5725),c=n(5687),l=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};const u=e=>l(void 0,void 0,void 0,(function*(){const{namespace:t,resources:n}=e,a=n.reduce((e,t,n)=>t.selection===o.a?Object.assign(Object.assign({},e),{[n]:t}):e,{}),r=yield Promise.all(Object.values(a).map(e=>((e,t)=>l(void 0,void 0,void 0,(function*(){const{data:{params:n,secrets:a,type:r}}=e;return a?Object(i.b)(a,r,t).then(e=>Object(i.a)(n,r,t,e)):Object(i.a)(n,r,t)})))(e,t)));if(!r||0===r.length)return e;const s=Object.keys(a);return Object.assign(Object.assign({},e),{resources:n.map((e,t)=>{if(a[t]){const n=s.indexOf(t.toString());return Object.assign(Object.assign({},e),{selection:r[n].metadata.name})}return e})})})),d=(e,t,n,i)=>l(void 0,void 0,void 0,(function*(){let o=e;o=yield u(o),o=(e=>{const{workspaces:t}=e;return t&&0!==t.length?Object.assign(Object.assign({},e),{workspaces:t.filter(e=>e.type!==s.x.NoWorkspace)}):e})(o);const l=yield Object(a.jb)(r.PipelineRunModel,Object(c.e)(t,o,n,i));return Promise.resolve(l)}))},5838:function(e,t,n){"use strict";n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return P}));var a=n(0),r=n(137),s=n(116),i=n(16),o=n(22),c=n(240),l=n(7),u=n(13),d=n(694),p=n(4374),m=n(108),b=n(10),h=n(8),v=n(5853),g=n(5854),f=n(5855),E=n(5858),O=n(5859),y=n(5658),j=n(5860),k=n(5864);const _=[{Card:g.a},{Card:f.a},{Card:k.a}],T=[{Card:v.a},{Card:E.a}],R=[{Card:O.a}],S=(e,t)=>s.a(t,t=>{if("NamespaceDashboard"!==t.spec.location)return!1;const n=i.a(t,"spec.namespaceDashboard.namespaces"),a=i.a(t,"spec.namespaceDashboard.namespaceSelector");return!(!o.a(n)||!o.a(a))||(!!c.a(n,e.metadata.name)||!o.a(a)&&new h.e(a).matches(e))}),P=({obj:e})=>{const{t:t}=Object(l.useTranslation)(),[n]=Object(u.jc)(),[s]=Object(m.a)({isList:!0,kind:Object(h.Hb)(b.ConsoleLinkModel),optional:!0}),i=S(e,s),o={obj:e,namespaceLinks:i},c=!!i.length,v=a.useMemo(()=>c?[{Card:j.a},...R]:R,[c]);return a.createElement(a.Fragment,null,"dev"===n&&a.createElement(r.b,null,a.createElement("title",null,t("public~Project overview"))),a.createElement(y.a.Provider,{value:o},a.createElement(d.default,null,a.createElement(p.default,{mainCards:_,leftCards:T,rightCards:v}))))}},5849:function(e,t,n){"use strict";n.d(t,"f",(function(){return M})),n.d(t,"c",(function(){return L})),n.d(t,"a",(function(){return U})),n.d(t,"d",(function(){return B})),n.d(t,"b",(function(){return $})),n.d(t,"e",(function(){return K})),n.d(t,"h",(function(){return G})),n.d(t,"g",(function(){return H}));var a=n(5596),r=n(599),s=n(22),i=n(117),o=n(225),c=n(16),l=n(313),u=n(5591),d=n(974),p=n(4359),m=n(5),b=n(10),h=n(8),v=n(1402),g=n(5898),f=n(5620),E=n(5850),O=n(5588),y=n(5909),j=n(5944),k=n(5653),_=n(5623),T=n(197),R=n(1941),S=n(5731),P=n(5729),N=n(2221),C=n(761),w=n(5711),I=n(5910),A=n(5723),x=n(5599),D=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};const M=()=>{const e=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e()+e()+e()+e()},L=e=>{const t={metadata:{name:e.name},displayName:e.displayName,description:e.description};return Object(h.jb)(b.ProjectRequestModel,t)},U=(e,t,n,a,i="create",o="")=>{var c,l,u,d;const{name:p,project:{name:m},application:{name:v},labels:g,image:{tag:f},labels:E}=e,O="app.kubernetes.io/name",y=null===(c=e.git)||void 0===c?void 0:c.url,j=null===(l=e.git)||void 0===l?void 0:l.ref,k=null===(d=null===(u=null==a?void 0:a.imageStream)||void 0===u?void 0:u.data)||void 0===d?void 0:d.filter(e=>{var t,n;return(null===(n=null===(t=e.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n[O])===(E[O]||p)}),_=r.a(k,["metadata.resourceVersion"],["desc"]),T=_.length&&_[0]||{},R=t&&t.metadata.name,S=Object(w.a)({name:p,applicationName:v,imageStreamName:R,selectedTag:f}),P=Object.assign(Object.assign({},y&&Object(w.c)(y,j)),Object(w.b)()),N="update"!==i||s.a(T)?p:T.metadata.labels[O],C={apiVersion:"image.openshift.io/v1",kind:"ImageStream",metadata:{name:o||N,namespace:m,labels:Object.assign(Object.assign(Object.assign({},S),g),{[O]:N}),annotations:P}},A=Object(w.h)(T,C);return"update"===i&&(A.metadata.name=T.metadata.name),"update"===i?Object(h.rb)(b.ImageStreamModel,A):Object(h.jb)(b.ImageStreamModel,C,n?I.c:{})},B=(e,t,n,a)=>{const{name:r,application:{name:s},project:{name:i},image:{tag:o},labels:c}=e,l=t&&t.metadata.name,u=Object(w.a)({name:r,applicationName:s,imageStreamName:l,selectedTag:o}),d={apiVersion:"v1",data:{},kind:"Secret",metadata:{name:`${r}-${n}-webhook-secret`,namespace:i,labels:Object.assign(Object.assign({},u),c)},stringData:{WebHookSecretKey:M()},type:p.SecretType.opaque};return Object(h.jb)(b.SecretModel,d,a?I.c:{})},F=(e,t,n,a,r="create",i="")=>{var o,c,l;const{name:d,project:{name:p},application:{name:m},git:{url:v,type:g,ref:f="master",dir:E,secret:O},docker:{dockerfilePath:y},image:{tag:j,imageEnv:k},build:{env:_,triggers:T,strategy:R},labels:S}=e,P=t&&t.metadata.name,N=t&&t.metadata.namespace,C=Object(w.a)({name:d,applicationName:m,imageStreamName:P,selectedTag:j}),A=Object.assign(Object.assign({},Object(w.c)(v,f)),Object(w.b)());let D,M=E;const L=k?Object.keys(k):[],U=L.filter(e=>!!k[e]).map(e=>({name:e,value:k[e]})),B=_.filter(e=>!L.includes(e.name));switch(R){case"Devfile":D=(null===(o=null==a?void 0:a.spec)||void 0===o?void 0:o.strategy)||{dockerStrategy:{env:_,dockerfilePath:y}},M=(null===(l=null===(c=null==a?void 0:a.spec)||void 0===c?void 0:c.source)||void 0===l?void 0:l.contextDir)||E;break;case"Docker":D={dockerStrategy:{env:_,dockerfilePath:y}};break;default:D={sourceStrategy:{env:[...U,...B],from:{kind:"ImageStreamTag",name:`${P}:${j}`,namespace:N}}}}const F={type:x.c[g],[g]:{secretReference:{name:`${d}-${g}-webhook-secret`}}},q=[u.b.UNSURE,u.b.GITEA],$="update"!==r||s.a(a)?d:a.metadata.labels["app.kubernetes.io/name"],K={apiVersion:"build.openshift.io/v1",kind:"BuildConfig",metadata:{name:i||$,namespace:p,labels:Object.assign(Object.assign(Object.assign({},C),S),{"app.kubernetes.io/name":$}),annotations:A},spec:{output:{to:{kind:"ImageStreamTag",name:(i||$)+":latest"}},source:Object.assign({contextDir:M,git:{uri:v,ref:f}},O?{sourceSecret:{name:O}}:{}),strategy:Object.assign({type:R},D),triggers:[{type:"Generic",generic:{secretReference:{name:d+"-generic-webhook-secret"}}},...T.webhook&&!q.includes(g)?[F]:[],...T.image?[{type:"ImageChange",imageChange:{}}]:[],...T.config?[{type:"ConfigChange"}]:[]]}},G=Object(w.h)(a,K);return"update"===r&&(G.metadata.name=a.metadata.name),"update"===r?Object(h.rb)(b.BuildConfigModel,G):Object(h.jb)(b.BuildConfigModel,K,n?I.c:{})},q=(e,t,n,a,r="create")=>{var s;const{name:i,project:{name:o},application:{name:c},image:{ports:l,tag:u},deployment:{env:d,replicas:p,triggers:{image:m}},labels:v,limits:{cpu:g,memory:f},git:{url:E,ref:O},healthChecks:y}=e,j=t&&t.metadata.name,k=t&&(null===(s=t.metadata.labels)||void 0===s?void 0:s[C.s]),_=Object(w.a)({name:i,applicationName:c,imageStreamName:j,selectedTag:u,runtimeIcon:k}),R=i,S=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Object(w.b)()),Object(w.c)(E,O)),Object(w.e)()),{"alpha.image.policy.openshift.io/resolve-names":"*"}),Object(w.g)(i,R,o,m)),P=Object(w.d)(x.k.Kubernetes,i),N=Object(w.f)(a),D={apiVersion:"apps/v1",kind:"Deployment",metadata:{name:i,namespace:o,labels:Object.assign(Object.assign({},_),v),annotations:S},spec:{selector:{matchLabels:{app:i}},replicas:p,template:{metadata:{labels:Object.assign(Object.assign(Object.assign({},N),v),P)},spec:{containers:[Object.assign({name:i,image:i+":latest",ports:l,env:d,resources:Object(T.H)({cpu:g,memory:f})},Object(A.b)(y))]}}}},M=Object(w.h)(a,D);return"update"===r?Object(h.rb)(b.DeploymentModel,M):Object(h.jb)(b.DeploymentModel,M,n?I.c:{})},$=(e,t,n,r,l=!1,u="create",p)=>D(void 0,void 0,void 0,(function*(){var m,R,N,M,$,K,G,Y,V,W,H,z,Q,J,Z,X,ee,te,ne;const{name:ae,project:{name:re},route:{create:se,disable:ie},image:{ports:oe},build:{strategy:ce,triggers:{webhook:le},option:ue},deployment:{triggers:{image:de}},git:{url:pe,type:me,ref:be},pipeline:he,resources:ve}=t,ge=c.a(n,"metadata.name"),fe=null!==(K=null===($=null===(M=null===(N=null===(R=null===(m=null==p?void 0:p.buildConfig)||void 0===m?void 0:m.data)||void 0===R?void 0:R.spec)||void 0===N?void 0:N.source)||void 0===M?void 0:M.git)||void 0===$?void 0:$.uri)&&void 0!==K?K:null===(H=null===(W=null===(V=null===(Y=null===(G=null==p?void 0:p.pipeline)||void 0===G?void 0:G.data)||void 0===Y?void 0:Y.spec)||void 0===V?void 0:V.params)||void 0===W?void 0:W.find(e=>"GIT_REPO"===(null==e?void 0:e.name)))||void 0===H?void 0:H.default;r&&(yield L(t.project));const Ee=[];let Oe="";if(ve===x.k.KnativeService&&fe&&fe!==pe&&(Oe=`${ae}-${Object(T.D)()}`),ce===d.BuildStrategyType.Devfile){if("create"!==u)throw new Error(e("devconsole~Cannot update Devfile resources"));return((e,t,n,a="")=>D(void 0,void 0,void 0,(function*(){const{name:r,project:{name:s},devfile:{devfileSuggestedResources:i,devfileProjectType:o}}=e,c=Object.keys(i).reduce((e,t)=>{var n,a;const c=i[t];return c?Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},c),{metadata:Object.assign(Object.assign({},c.metadata),{annotations:Object.assign(Object.assign({},null===(n=c.metadata)||void 0===n?void 0:n.annotations),{isFromDevfile:"true"}),name:r,namespace:s,labels:Object.assign(Object.assign({},null===(a=c.metadata)||void 0===a?void 0:a.labels),o?{[C.s]:o}:{})})})}):e},{}),l=yield U(e,c.imageStream,t,n,"create",a),u=yield F(e,c.imageStream,t,c.buildResource,"create",a),d=yield B(e,c.imageStream,"generic",t),p=yield q(e,c.imageStream,t,c.deployResource,"create"),m=c.service&&(yield Object(h.jb)(b.ServiceModel,Object(I.b)(e,c.imageStream,c.service),t?I.c:{})),v=c.route&&(yield Object(h.jb)(b.RouteModel,Object(I.a)(e,c.imageStream,c.route),t?I.c:{})),g=[l,u,d,p];return m&&g.push(m),v&&g.push(v),g})))(t,l,p,Oe)}if(he.type===f.a.PAC&&(null===(z=null==t?void 0:t.pipeline)||void 0===z?void 0:z.enabled)){const e=null===(Q=null==t?void 0:t.pac)||void 0===Q?void 0:Q.repository,n=null==t?void 0:t.labels,a=yield Object(k.b)(e,re,n,l);Ee.push(a)}const ye=yield U(t,n,l,p,Oe?"create":u,Oe);if(Ee.push(ye),he.enabled&&he.type!==f.a.PAC){if(!l){const e=yield((e,t)=>D(void 0,void 0,void 0,(function*(){var n,r;const c=[];if(!e)return Promise.resolve([]);const{name:l,git:u,pipeline:d,project:p,docker:m,image:v,build:g,labels:f}=e;let k;const T=null===(n=null==t?void 0:t.metadata)||void 0===n?void 0:n.name;if(s.a(t)||T!==l){if(d.template){k=yield Object(E.a)(l,p.name,u.url,u.ref,u.dir,d,m.dockerfilePath,v.tag,g.env,f),c.push(k);try{const e=yield Object(y.a)(k,u.detectedType);c.push(...e)}catch(e){console.warn("Error occured while creating triggers",e)}}}else k=yield Object(E.d)(t,d.template,l,p.name,u.url,u.ref,u.dir,m.dockerfilePath,v.tag,g.env,f);if(u.secret){const e=yield Object(h.kb)(b.SecretModel,u.secret,p.name),t=a(u.url);e.metadata.annotations=Object(_.s)({key:"git",value:"ssh"===t.protocol?t.resource:`${t.protocol}://${t.resource}`},e.metadata.annotations),yield Object(h.rb)(b.SecretModel,e,p.name);const n=yield Object(h.kb)(b.ServiceAccountModel,O.l,p.name);void 0===i.a(n.secrets,e=>e.name===u.secret)&&(yield Object(_.B)(u.secret,n,!1))}if(o.a(null===(r=null==k?void 0:k.metadata)||void 0===r?void 0:r.labels,"app.kubernetes.io/instance"))try{const e=yield Object(E.b)(k);c.push(e)}catch(e){console.log("Failed to create PipelineRun for import flow",e),Object(j.c)(k.metadata.name,k.metadata.namespace)}return Promise.all(c)})))(t,null===(J=null==p?void 0:p.pipeline)||void 0===J?void 0:J.data);Ee.push(...e)}}else ue===x.a.BUILDS?Ee.push(yield F(t,n,l,null===(Z=null==p?void 0:p.buildConfig)||void 0===Z?void 0:Z.data,Oe?"create":u,Oe)):ue===x.a.SHIPWRIGHT_BUILD&&Ee.push(yield((e,t,n,a,r="create",i="")=>{var o;const{name:c,project:{name:l},application:{name:u},git:{url:p,ref:m="master",dir:b,secret:v},docker:{dockerfilePath:g},image:{tag:f,imageEnv:E},build:{env:O,strategy:y,clusterBuildStrategy:j},labels:k}=e,_=t&&t.metadata.name,T=t&&(null===(o=t.status)||void 0===o?void 0:o.dockerImageRepository),R=Object(w.a)({name:c,applicationName:u,imageStreamName:_,selectedTag:f}),N=Object.assign(Object.assign({},Object(w.c)(p,m)),Object(w.b)()),C=E?Object.keys(E):[],A=C.filter(e=>!!E[e]).map(e=>({name:e,value:E[e]})),x=O.filter(e=>!C.includes(e.name));let D=[];switch(y){case d.BuildStrategyType.Docker:D=[{name:"dockerfile",value:g}];break;case d.BuildStrategyType.Source:D=[{name:"builder-image",value:`${T}:${f}`}]}const M="update"!==r||s.a(a)?c:a.metadata.labels["app.kubernetes.io/name"],L={apiVersion:"shipwright.io/v1beta1",kind:"Build",metadata:{name:i||M,namespace:l,labels:Object.assign(Object.assign(Object.assign({},R),k),{"app.kubernetes.io/name":M}),annotations:N},spec:{source:{type:"Git",git:Object.assign({url:p,revision:m},v?{cloneSecret:v}:{}),contextDir:b},env:[...A,...x],strategy:{name:j,kind:"ClusterBuildStrategy"},paramValues:D,output:{image:`${S.e}/${l}/${i||M}:latest`}}},U=Object(w.h)(a,L);return"update"===r&&(U.metadata.name=a.metadata.name),"update"===r?Object(h.rb)(P.a,U):Object(h.jb)(P.a,L,n?I.c:{})})(t,n,l,null===(X=null==p?void 0:p.shipwrightBuild)||void 0===X?void 0:X.data,Oe?"create":u,Oe));if("create"===u&&(Ee.push(yield B(t,n,"generic",l)),le&&Ee.push(yield B(t,n,me,l))),t.resources===x.k.KnativeService){const e=ye.status.dockerImageRepository,n=(null===(ne=null===(te=null===(ee=null==p?void 0:p.editAppResource)||void 0===ee?void 0:ee.data)||void 0===te?void 0:te.metadata)||void 0===ne?void 0:ne.annotations)||{},a=Object(w.g)(ae,Oe||ae,re,de),r=Object.keys(n).length>0?Object.assign(Object.assign(Object.assign({},n),Object(w.c)(pe,be)),a):Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),Object(w.b)()),Object(w.e)()),Object(w.c)(pe,be)),a),s=Object(g.c)(t,e,ge,void 0,void 0,r,c.a(p,"editAppResource.data"),Oe),i=yield Object(g.b)(t,s,l);return[...yield Promise.all(["update"===u?Object(h.rb)(v.l,s,null,null,l?I.c:{}):Object(h.jb)(v.l,s,l?I.c:{}),...i]),...Ee]}if(t.resources===x.k.Kubernetes?Ee.push(yield q(t,n,l,c.a(p,"editAppResource.data"),u)):t.resources===x.k.OpenShift&&Ee.push(yield((e,t,n,a,r="create")=>{const{name:s,project:{name:i},application:{name:o},image:{ports:c,tag:l},deployment:{env:u,replicas:d,triggers:p},labels:m,limits:{cpu:v,memory:g},git:{url:f,ref:E},healthChecks:O}=e,y=t&&t.metadata.name,j=Object(w.a)({name:s,applicationName:o,imageStreamName:y,selectedTag:l}),k=Object.assign(Object.assign(Object.assign({},Object(w.b)()),Object(w.c)(f,E)),Object(w.e)()),_=Object(w.d)(x.k.OpenShift,s),R=Object(w.f)(a),S={apiVersion:"apps.openshift.io/v1",kind:"DeploymentConfig",metadata:{name:s,namespace:i,labels:Object.assign(Object.assign({},j),m),annotations:k},spec:{selector:_,replicas:d,template:{metadata:{labels:Object.assign(Object.assign(Object.assign({},R),m),_)},spec:{containers:[Object.assign({name:s,image:s+":latest",ports:c,env:u,resources:Object(T.H)({cpu:v,memory:g})},Object(A.b)(O))]}},triggers:[{type:"ImageChange",imageChangeParams:{automatic:p.image,containerNames:[s],from:{kind:"ImageStreamTag",name:s+":latest"}}},...p.config?[{type:"ConfigChange"}]:[]]}},P=Object(w.h)(a,S);return"update"===r?Object(h.rb)(b.DeploymentConfigModel,P):Object(h.jb)(b.DeploymentConfigModel,P,n?I.c:{})})(t,n,l,c.a(p,"editAppResource.data"),u)),!s.a(oe)||ce===d.BuildStrategyType.Docker||ce===d.BuildStrategyType.Source){const e=c.a(p,"service.data"),a=Object(I.b)(t,n,e);"create"===u?Ee.push(yield Object(h.jb)(b.ServiceModel,a,l?I.c:{})):"update"!==u||s.a(e)||Ee.push(yield Object(h.rb)(b.ServiceModel,a));const r=c.a(p,"route.data"),i=Object(I.a)(t,n,r);"update"===u&&ie?Ee.push(yield Object(h.rb)(b.RouteModel,i,re,ae)):se&&Ee.push(yield Object(h.jb)(b.RouteModel,i,l?I.c:{}))}return Ee})),K=e=>e.filter(e=>e.kind===b.DeploymentModel.kind||e.kind===b.DeploymentConfigModel.kind||e.kind===v.l.kind&&e.apiVersion===`${v.l.apiGroup}/${v.l.apiVersion}`),G=(e,t,n,a)=>D(void 0,void 0,void 0,(function*(){const r=n.find(e=>e.properties.id===t),s=(yield r.properties.importRedirectURL())(e);a?m.Vb.push(((e,t)=>{const n=new URL(e,"thismessage:/");return n.search=new URLSearchParams(Object.assign(Object.assign({},Object.fromEntries(n.searchParams)),t?Object.fromEntries(t):{})).toString(),n.toString().replace(n.protocol,"")})(s,a)):m.Vb.push(s)})),Y=(e,t,n)=>{var a;if(e!==x.k.KnativeService&&t){if(t.hostname||t.path||!t.secure)return!0;if(null==t?void 0:t.tls)for(const e in t.tls)if(t.tls.hasOwnProperty(e)){if(["caCertificate","certificate","destinationCACertificate","key"].includes(e)&&t.tls[e])return!0;if("insecureEdgeTerminationPolicy"===e&&"None"!==t.tls[e])return!0;if("termination"===e&&"reencrypt"!==t.tls[e])return!0}return!1}return(null===(a=n.domainMapping)||void 0===a?void 0:a.length)>0},V=(e,t,n)=>{if(e!==x.k.KnativeService&&(null==t?void 0:t.replicas)>1)return!0;const a=null==n?void 0:n.scaling;if(a)for(const e in a)if(a.hasOwnProperty(e)){if(["concurrencylimit","maxpods","minpods"].includes(e)&&a[e])return!0;if("concurrencytarget"===e&&a[e]!==a.defaultConcurrencytarget)return!0;if("concurrencyutilization"===e&&a[e]!==a.defaultConcurrencyutilization)return!0;if("autoscale"===e&&a[e]){const t=a[e];for(const e in t)if(t.hasOwnProperty(e)){if("autoscalewindow"===e&&t[e]!==t.defaultAutoscalewindow)return!0;if("autoscalewindowUnit"===e&&t[e]!==t.defaultAutoscalewindowUnit)return!0}}}return!1},W=e=>{const t=e=>{for(const t in e)if(e.hasOwnProperty(t)){if(["limit","request"].includes(t)&&e[t])return!0;if("limitUnit"===t&&e[t]!==e.defaultLimitUnit)return!0;if("requestUnit"===t&&e[t]!==e.defaultRequestUnit)return!0}return!1};return!(!t(e.cpu)&&!t(e.memory))},H=e=>{var t,n,a,r,i,o,c,u,d,p,m,b,h,v,g,f,E,O,y,j,k,_,T,S,P,C,w,I,A,D,M;if(!e)return{};let L;(null===(t=e.devfile)||void 0===t?void 0:t.devfileContent)&&(L=Object(R.c)(e.devfile.devfileContent));const U=!(null===(n=e.application)||void 0===n?void 0:n.selectedKey)&&(null===(a=e.application)||void 0===a?void 0:a.name)||(null===(r=e.application)||void 0===r?void 0:r.selectedKey)===(null===(i=e.application)||void 0===i?void 0:i.name)?"default":(null===(o=e.application)||void 0===o?void 0:o.selectedKey)===N.b&&(null===(c=e.application)||void 0===c?void 0:c.name)?"custom":"none",B=e.resources===x.k.Kubernetes?"Deployment":e.resources===x.k.OpenShift?"DeploymentConfig":e.resources===x.k.KnativeService&&"Knative Service",F=null===(d=null===(u=e.import)||void 0===u?void 0:u.selectedStrategy)||void 0===d?void 0:d.name;return{useRecommended:(null===(p=e.image)||void 0===p?void 0:p.recommended)===(null===(m=e.image)||void 0===m?void 0:m.selected),recommendedStrategy:null===(h=null===(b=e.import)||void 0===b?void 0:b.recommendedStrategy)||void 0===h?void 0:h.name,recommendedBuilderImage:null===(v=e.image)||void 0===v?void 0:v.recommended,strategy:F,builderImage:null===(g=e.image)||void 0===g?void 0:g.selected,devFileLanguage:(null===(f=null==L?void 0:L.metadata)||void 0===f?void 0:f.projectType)||"",devFileProjectType:(null===(E=null==L?void 0:L.metadata)||void 0===E?void 0:E.language)||"",application:U,resource:B,targetPortChanged:!!(null===(O=e.route)||void 0===O?void 0:O.unknownTargetPort),useRunCommand:!!(null===(j=null===(y=e.image)||void 0===y?void 0:y.imageEnv)||void 0===j?void 0:j.NPM_RUN),useAdvancedOptionsGit:"/"!==e.git.dir||!!e.git.ref||!!e.git.secret,useAdvancedOptionsBuild:(null===(k=e.build)||void 0===k?void 0:k.env.length)>0||l.a(null===(_=e.build)||void 0===_?void 0:_.triggers,e=>!e),useAdvancedOptionsDeployment:"Devfile"!==F&&((null===(T=e.deployment)||void 0===T?void 0:T.env.length)>0||!(null===(P=null===(S=e.deployment)||void 0===S?void 0:S.triggers)||void 0===P?void 0:P.image)),useAdvancedOptionsRoute:Y(e.resources,e.route,e.serverless),useAdvancedOptionsHealthChecks:(null===(w=null===(C=e.healthChecks)||void 0===C?void 0:C.livenessProbe)||void 0===w?void 0:w.enabled)||(null===(A=null===(I=e.healthChecks)||void 0===I?void 0:I.readinessProbe)||void 0===A?void 0:A.enabled)||(null===(M=null===(D=e.healthChecks)||void 0===D?void 0:D.startupProbe)||void 0===M?void 0:M.enabled),useAdvancedOptionsScaling:V(e.resources,e.deployment,e.serverless),useAdvancedOptionsResourceLimits:W(e.limits),useAdvancedOptionsLabels:!s.a(e.labels)}}},5850:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return v})),n.d(t,"d",(function(){return g}));var a=n(640),r=n(499),s=n(8),i=n(5669),o=n(5586),c=n(5588),l=n(5687),u=n(5837),d=(n(5760),function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))});const p=(e,t)=>`image-registry.openshift-image-registry.svc:5000/${t}/${e}`,m=(e,t,n,a,r,s,i,o,c)=>(e||[]).map(e=>{switch(e.name){case"APP_NAME":return Object.assign(Object.assign({},e),{default:t});case"GIT_REPO":return Object.assign(Object.assign({},e),{default:a});case"GIT_REVISION":return Object.assign(Object.assign({},e),{default:r||""});case"PATH_CONTEXT":return Object.assign(Object.assign({},e),{default:s.replace(/^\//,"")||e.default});case"IMAGE_NAME":return Object.assign(Object.assign({},e),{default:p(t,n)});case"DOCKERFILE":return Object.assign(Object.assign({},e),{default:i});case"VERSION":return Object.assign(Object.assign({},e),{default:o||e.default});case"BUILD_ENVS":return Object.assign(Object.assign({},e),{default:c||e.default});default:return e}}),b=e=>{var t,n;return"docker"===(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n[i.j])},h=(e,t,n,r,c,l,u,p,h,v={})=>d(void 0,void 0,void 0,(function*(){var d;const g=a.a(l.template);return g.metadata={name:""+e,namespace:t,labels:Object.assign(Object.assign(Object.assign(Object.assign({},null===(d=g.metadata)||void 0===d?void 0:d.labels),v),{"app.kubernetes.io/instance":e,"app.kubernetes.io/name":e}),!b(g)&&{[i.i]:p})},g.spec.params=g.spec.params&&m(g.spec.params,e,t,n,r,c,u,p,h),Object(s.jb)(o.PipelineModel,g,{ns:t})})),v=e=>d(void 0,void 0,void 0,(function*(){var t,n;const a="true"===(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n["function.knative.dev"]),r=Object.assign(Object.assign({},Object(l.b)(e)),{workspaces:(e.spec.workspaces||[]).map(t=>{var n,r;return Object.assign(Object.assign({},t),{type:c.x.VolumeClaimTemplate,data:a?Object(l.f)(null===(n=null==e?void 0:e.metadata)||void 0===n?void 0:n.name):Object(l.c)(null===(r=null==e?void 0:e.metadata)||void 0===r?void 0:r.name)})}),secretOpen:!1});return Object(u.a)(r,e)})),g=(e,t,n,c,l,u,p,h,v,g,f={})=>d(void 0,void 0,void 0,(function*(){var d;let E=a.a(e);return t?(((e,t)=>{var n,a,r,s;return(null===(n=e.metadata)||void 0===n?void 0:n.labels[i.h])!==(null===(a=t.metadata)||void 0===a?void 0:a.labels[i.h])||(null===(r=e.metadata)||void 0===r?void 0:r.labels[i.i])!==(null===(s=t.metadata)||void 0===s?void 0:s.labels[i.i])})(t,e)&&(E=a.a(t),E.metadata={resourceVersion:e.metadata.resourceVersion,name:""+n,namespace:c,labels:Object.assign(Object.assign(Object.assign(Object.assign({},null===(d=t.metadata)||void 0===d?void 0:d.labels),f),{"app.kubernetes.io/instance":n,"app.kubernetes.io/name":n}),!b(t)&&{[i.i]:v})}),E.spec.params=m(t.spec.params,n,c,l,u,p,h,v,g)):E.metadata.labels=r.a(Object.assign(Object.assign({},E.metadata.labels),f),"app.kubernetes.io/instance"),Object(s.rb)(o.PipelineModel,E,c,n)}))},5851:function(e,t,n){"use strict";var a=n(0),r=n(155),s=n(40),i=n(1945),o=n(5),c=(n(5871),function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n});t.a=e=>{var{badge:t,title:n,children:l,listComponent:u}=e,d=c(e,["badge","title","children","listComponent"]);return a.createElement("div",{className:"odc-project-list-page"},a.createElement(o.Z,{title:n,badge:t},l),a.createElement(r.a,{className:"co-divider"}),a.createElement(s.c,Object.assign({},d,{showTitle:!1,kind:"Project",ListComponent:u||i.ProjectsTable,canCreate:!1,filterLabel:"by name or display name",textFilter:"project-name"})))}},5852:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n(5);const s=()=>Promise.all([n.e(17),n.e(25),n.e(0),n.e(1),n.e(4),n.e(3),n.e(6),n.e(5),n.e(7),n.e(11),n.e(8),n.e(9),n.e(10),n.e(16),n.e(14),n.e(12),n.e(2),n.e(13),n.e(15),n.e(18),n.e(26),n.e(33),n.e(65),n.e(237)]).then(n.bind(null,6058)).then(e=>e.OverviewListPage),i=e=>a.createElement(r.c,Object.assign({loader:s},e))},5853:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(160),r=n(4440),s=n(501),i=n(0),o=n(18),c=n.n(o),l=n(7),u=n(192),d=n(434),p=n(295),m=n(296),b=n(19),h=n(4379),v=n(2239),g=n(15),f=n(5),E=n(10),O=n(5658),y=n(14);const j=()=>{var e,t,n;const{obj:o}=i.useContext(O.a),j=a.a(o.metadata.labels).sort(),k=r.a(j,3),_=s.a(o.metadata.labels,k),T=null===(e=o.metadata.annotations)||void 0===e?void 0:e["openshift.io/description"],R=Object(f.uc)(E.ProjectModel,o.metadata.name)+"/details",S=null===(n=null===(t=o.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n["maistra.io/member-of"],{t:P}=Object(l.useTranslation)();return i.createElement(u.a,{"data-test-id":"details-card",isClickable:!0,isSelectable:!0},i.createElement(d.a,{actions:{actions:i.createElement(i.Fragment,null,i.createElement(y.Link,{to:R,"data-test":"details-card-view-all"},P("public~View all"))),hasNoOffset:!1,className:"co-overview-card__actions"}},i.createElement(p.a,null,P("public~Details"))),i.createElement(m.a,null,i.createElement(h.default,null,i.createElement(v.b,{isLoading:!o,title:P("public~Name")},Object(g.dd)(o)),i.createElement(v.b,{isLoading:!o,title:P("public~Requester")},Object(g.Bd)(o)||i.createElement("span",{className:"text-muted"},P("public~No requester"))),i.createElement(v.b,{isLoading:!o,title:P("public~Labels")},i.createElement("div",{className:"co-project-dashboard__details-labels"},i.createElement(f.L,{kind:E.ProjectModel.kind,labels:_}),j.length>3&&i.createElement(b.a,{variant:"link"},i.createElement(y.Link,{to:R},P("public~View all"))))),i.createElement(v.b,{isLoading:!o,title:P("public~Description")},i.createElement("span",{className:c()({"text-muted":!T,"co-project-dashboard-details-card__description":T})},T||P("public~No description"))),S&&i.createElement(v.b,{isLoading:!o,title:P("public~Service mesh")},i.createElement(g.X,null)," ",P("public~Service mesh enabled")))))}},5854:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(0),r=n(7),s=n(192),i=n(434),o=n(295),c=n(5387),l=n(4364),u=n(15),d=n(139),p=n(69),m=n(5658),b=n(5738),h=n(5793);const v=()=>{var e;const{obj:t}=a.useContext(m.a),n=Object(p.z)(p.f),v=a.useMemo(()=>{return(e=n,e.filter(p.e)).find(e=>"Image Vulnerabilities"===e.properties.title);var e},[n]),{metadata:{name:g}}=t,{t:f}=Object(r.useTranslation)();return a.createElement(s.a,{"data-test-id":"status-card",className:"co-overview-card--gradient"},a.createElement(i.a,null,a.createElement(o.a,null,f("public~Status"))),t?a.createElement(a.Fragment,null,a.createElement(l.default,null,a.createElement(c.a,{className:"co-overview-status__health",hasGutter:!0},a.createElement("div",{className:"co-status-card__health-item","data-test":"project-status"},a.createElement(u.cc,{status:null===(e=t.status)||void 0===e?void 0:e.phase,className:"co-icon-and-text--lg"})),v&&a.createElement(b.c,{subsystem:v.properties,namespace:g}))),a.createElement(h.a,{labelSelector:{namespace:g}})):a.createElement(d.g,null))}},5855:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(0),r=n(7),s=n(192),i=n(434),o=n(295),c=n(4365),l=n(762),u=n(13),d=n(5),p=n(5658),m=n(5744),b=n(5806),h=n(4366),v=n(5857);const g=[v.d,v.e],f=()=>{var e;const{t:t}=Object(r.useTranslation)(),{obj:n}=a.useContext(p.a),f=null===(e=null==n?void 0:n.metadata)||void 0===e?void 0:e.name,[E,O]=a.useMemo(()=>[Object(m.d)(f),Object(m.b)(f)],[f]),[y]=Object(u.kc)(u.Fb);return a.createElement(s.a,{"data-test-id":"utilization-card",isClickable:!0,isSelectable:!0},a.createElement(i.a,{actions:{actions:a.createElement(a.Fragment,null,a.createElement(h.UtilizationDurationDropdown,null)),hasNoOffset:!1,className:void 0}},a.createElement(o.a,null,t("public~Utilization"))),a.createElement(c.default,null,a.createElement(v.f.Provider,{value:f},a.createElement(b.b,{title:t("public~CPU"),humanizeValue:d.Yb,utilizationQuery:E[m.a.CPU_USAGE],requestQuery:E[m.a.CPU_REQUESTS],TopConsumerPopover:v.a,namespace:f}),a.createElement(b.b,{title:t("public~Memory"),humanizeValue:d.Wb,utilizationQuery:E[m.a.MEMORY_USAGE],requestQuery:E[m.a.MEMORY_REQUESTS],byteDataType:l.a.BinaryBytes,TopConsumerPopover:v.c,namespace:f}),a.createElement(b.b,{title:t("public~Filesystem"),humanizeValue:d.Wb,utilizationQuery:E[m.a.FILESYSTEM_USAGE],byteDataType:l.a.BinaryBytes,TopConsumerPopover:v.b,namespace:f}),a.createElement(b.a,{title:t("public~Network transfer"),humanizeValue:d.ac,queries:O[m.a.NETWORK_UTILIZATION],TopConsumerPopovers:g,namespace:f}),a.createElement(b.b,{title:t("public~Pod count"),humanizeValue:d.bc,utilizationQuery:E[m.a.POD_COUNT],namespace:f}),y.map(({uid:e,properties:t})=>{var n,r,s;return a.createElement(b.b,{key:e,title:t.title,humanizeValue:t.humanize,utilizationQuery:t.getUtilizationQuery(f),requestQuery:null===(n=t.getRequestQuery)||void 0===n?void 0:n.call(t,f),limitQuery:null===(r=t.getLimitQuery)||void 0===r?void 0:r.call(t,f),totalQuery:null===(s=t.getTotalQuery)||void 0===s?void 0:s.call(t,f),namespace:f,TopConsumerPopover:t.TopConsumerPopover})}))))}},5856:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"g",(function(){return m})),n.d(t,"f",(function(){return b})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return v}));var a=n(0),r=n(7),s=n(5745),i=n(5735),o=n(10),c=n(5);const l=a.createContext(".+"),u=(e,t,n)=>{const r=a.useContext(l);return a.useMemo(()=>{const a=Object(s.c)(r);return[{query:a[e],model:o.ProjectModel,metric:"namespace"},{query:a[t],model:o.PodModel,metric:"pod"},{query:a[n],model:o.NodeModel,metric:"instance"}]},[n,r,e,t])},d=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(s.a.PROJECTS_BY_CPU,s.a.PODS_BY_CPU,s.a.NODES_BY_CPU);return a.createElement(i.b,{title:t("public~CPU"),current:e,consumers:n,humanize:c.Yb})},p=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(s.a.PROJECTS_BY_MEMORY,s.a.PODS_BY_MEMORY,s.a.NODES_BY_MEMORY);return a.createElement(i.b,{title:t("public~Memory"),current:e,consumers:n,humanize:c.Wb})},m=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(s.a.PROJECTS_BY_STORAGE,s.a.PODS_BY_STORAGE,s.a.NODES_BY_STORAGE);return a.createElement(i.b,{title:t("public~Filesystem"),current:e,consumers:n,humanize:c.Wb})},b=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=a.useContext(l),u=a.useMemo(()=>{const e=Object(s.c)(n);return[{query:e[s.a.PROJECTS_BY_PODS],model:o.ProjectModel,metric:"namespace"},{query:e[s.a.NODES_BY_PODS],model:o.NodeModel,metric:"node"}]},[n]);return a.createElement(i.b,{title:t("public~Pod count"),current:e,consumers:u,humanize:c.bc})},h=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(s.a.PROJECTS_BY_NETWORK_IN,s.a.PODS_BY_NETWORK_IN,s.a.NODES_BY_NETWORK_IN);return a.createElement(i.b,{title:t("public~Network in"),current:e,consumers:n,humanize:c.ac})},v=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(s.a.PROJECTS_BY_NETWORK_OUT,s.a.PODS_BY_NETWORK_OUT,s.a.NODES_BY_NETWORK_OUT);return a.createElement(i.b,{title:t("public~Network out"),current:e,consumers:n,humanize:c.ac})}},5857:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return m})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return h}));var a=n(0),r=n(7),s=n(5735),i=n(5744),o=n(10),c=n(5);const l=a.createContext(""),u=e=>{const t=a.useContext(l);return{consumers:a.useMemo(()=>[{query:Object(i.c)(t)[e],model:o.PodModel,metric:"pod"}],[e,t]),namespace:t}},d=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(i.a.PODS_BY_CPU);return a.createElement(s.b,Object.assign({title:t("public~CPU"),current:e,humanize:c.Yb},n))},p=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(i.a.PODS_BY_MEMORY);return a.createElement(s.b,Object.assign({title:t("public~Memory"),current:e,humanize:c.Wb},n))},m=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(i.a.PODS_BY_FILESYSTEM);return a.createElement(s.b,Object.assign({title:t("public~Filesystem"),current:e,humanize:c.Wb},n))},b=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(i.a.PODS_BY_NETWORK_IN);return a.createElement(s.b,Object.assign({title:t("public~Network in"),current:e,humanize:c.ac},n))},h=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(i.a.PODS_BY_NETWORK_OUT);return a.createElement(s.b,Object.assign({title:t("public~Network out"),current:e,humanize:c.ac},n))}},5858:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var a=n(0),r=n(16),s=n(7),i=n(5670),o=n(406),c=n(192),l=n(434),u=n(295),d=n(296),p=n(967),m=n(10),b=n(4378),h=n(2231),v=n(5),g=n(8),f=n(15),E=n(5658),O=n(69),y=n(13),j=n(108),k=n(198);const _=Object(i.a)(({projectName:e,watchK8sResource:t,stopWatchK8sResource:n,resources:s,model:i,mapper:c,additionalResources:l,additionalDynamicResources:u})=>{var d;a.useEffect(()=>{if(e){const a=((e,t)=>({kind:e.crd?Object(g.Hb)(e):e.kind,isList:!0,prop:"resource",namespace:t}))(i,e);return t(a),l&&l.forEach(n=>t(Object.assign(Object.assign({},n),{namespace:e}))),()=>{n(a),l&&l.forEach(n)}}},[t,n,e,i,l]);const p=r.a(s.resource,"data",[]),m=r.a(s.resource,"loaded"),h=r.a(s.resource,"loadError"),v=l?l.reduce((e,t)=>(e[t.prop]=r.a(s[t.prop],"data"),e),{}):{},f=!l||l.filter(e=>!e.optional).every(e=>r.a(s[e.prop],"loaded")),E=!!l&&l.filter(e=>!e.optional).some(e=>!!r.a(s[e.prop],"loadError")),O=Object(j.b)(u||{}),y=null===(d=Object.values(O).find(e=>e.loadError))||void 0===d?void 0:d.loadError,k=Object.keys(O).every(e=>O[e].loaded);return a.createElement(o.a,null,a.createElement(b.ResourceInventoryItem,{kind:i,isLoading:!(e&&m&&f&&k),namespace:e,error:!!h||E||y,resources:p,additionalResources:v,mapper:c,dataTest:"resource-inventory-item"}))}),T=()=>{const e=Object(O.z)(O.t),[t]=Object(y.kc)(y.mb),[n]=Object(y.kc)(y.Eb),{obj:r}=a.useContext(E.a),i=Object(f.dd)(r),b=Object(v.Dc)({group:m.SecretModel.apiGroup,resource:m.SecretModel.plural,namespace:i,verb:"list"}),{t:g}=Object(s.useTranslation)();return a.createElement(c.a,{"data-test-id":"inventory-card"},a.createElement(l.a,null,a.createElement(u.a,null,g("public~Inventory"))),a.createElement(d.a,null,a.createElement(p.a,{hasGutter:!0},a.createElement(_,{projectName:i,model:m.DeploymentModel}),a.createElement(_,{projectName:i,model:m.DeploymentConfigModel}),a.createElement(_,{projectName:i,model:m.StatefulSetModel}),a.createElement(_,{projectName:i,model:m.PodModel,mapper:h.getPodStatusGroups}),a.createElement(_,{projectName:i,model:m.PersistentVolumeClaimModel,mapper:h.getPVCStatusGroups}),a.createElement(_,{projectName:i,model:m.ServiceModel}),a.createElement(_,{projectName:i,model:m.RouteModel}),a.createElement(_,{projectName:i,model:m.ConfigMapModel}),b&&a.createElement(_,{projectName:i,model:m.SecretModel}),a.createElement(_,{projectName:i,model:m.VolumeSnapshotModel,mapper:h.getVSStatusGroups}),e.map(e=>a.createElement(_,{key:e.properties.model.kind,projectName:i,model:e.properties.model,mapper:e.properties.mapper,additionalResources:e.properties.additionalResources})),t.map(e=>a.createElement(_,{key:e.properties.model.kind,projectName:i,model:e.properties.model,mapper:e.properties.mapper,additionalDynamicResources:e.properties.additionalResources})),n.map(({uid:e,properties:{component:t}})=>a.createElement(k.a,{key:e},a.createElement(o.a,null,a.createElement(t,{projectName:i})))))))}},5859:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(0),r=n(367),s=n(16),i=n(31),o=n(192),c=n(434),l=n(295),u=n(1950),d=n(5670),p=n(10),m=n(69),b=n(13),h=n(5734),v=n(5658),g=n(15),f=n(7),E=n(14);const O=Object(d.a)(({watchK8sResource:e,stopWatchK8sResource:t,resources:n,projectName:r,viewEvents:s})=>(a.useEffect(()=>{if(r){const n=(e=>({isList:!0,kind:p.EventModel.kind,prop:"events",namespace:e}))(r);return e(n),()=>{t(n)}}},[e,t,r]),a.createElement(u.RecentEventsBody,{events:n.events,moreLink:s}))),y=Object(i.connect)(e=>({models:e.k8s.getIn(["RESOURCES","models"])}))(Object(d.a)(({watchK8sResource:e,stopWatchK8sResource:t,resources:n,projectName:i,models:o})=>{const c=Object(m.z)(m.k),[l]=Object(b.kc)(b.lb),d=a.useMemo(()=>[...c,...l].filter(e=>{const t=o.get(e.properties.k8sResource.kind);return t&&t.namespaced}),[c,l,o]);a.useEffect(()=>{if(i)return d.forEach((t,n)=>{e(Object(h.a)(Object.assign(Object.assign({},t.properties.k8sResource),{namespace:i}),n))}),()=>{d.forEach((e,n)=>{t(Object(h.a)(e.properties.k8sResource,n))})}},[e,t,i,d]);const p=a.useMemo(()=>r.a(d.map((e,t)=>s.a(n,[Object(h.a)(e.properties.k8sResource,t).prop,"data"],[]).filter(t=>!e.properties.isActivity||e.properties.isActivity(t)).map(t=>{var n,a,r,s;return{resource:t,timestamp:e.properties.getTimestamp?e.properties.getTimestamp(t):null,loader:null===(a=null===(n=e)||void 0===n?void 0:n.properties)||void 0===a?void 0:a.loader,component:null===(s=null===(r=e)||void 0===r?void 0:r.properties)||void 0===s?void 0:s.component}}))),[d,n]),v=a.useMemo(()=>d.every((e,t)=>s.a(n,[Object(h.a)(e.properties.k8sResource,t).prop,"loaded"])),[d,n]);return a.createElement(u.OngoingActivityBody,{loaded:i&&v&&0!==o.size,resourceActivities:p})})),j=()=>{const{obj:e}=a.useContext(v.a),t=Object(g.dd)(e),n=`/k8s/ns/${t}/events`,{t:r}=Object(f.useTranslation)();return a.createElement(o.a,{"data-test-id":"activity-card",className:"co-overview-card--gradient",isClickable:!0,isSelectable:!0},a.createElement(c.a,{actions:{actions:a.createElement(a.Fragment,null,a.createElement(E.Link,{to:n,"data-test":"view-events-link"},r("public~View events"))),hasNoOffset:!1,className:"co-overview-card__actions"}},a.createElement(l.a,null,r("public~Activity"))),a.createElement(u.default,{className:"co-project-dashboard__activity-body"},a.createElement(y,{projectName:t}),a.createElement(O,{projectName:t,viewEvents:n})))}},5860:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(0),r=n(461),s=n(7),i=n(192),o=n(434),c=n(295),l=n(296),u=n(5861),d=n(5863),p=n(5658);const m=()=>{const{namespaceLinks:e}=a.useContext(p.a),{t:t}=Object(s.useTranslation)();return a.createElement(i.a,{"data-test-id":"launcher-card"},a.createElement(o.a,null,a.createElement(c.a,null,t("public~Launcher"))),a.createElement(l.a,null,a.createElement(u.a,null,r.a(e,"spec.text").map(e=>a.createElement(d.a,{key:e.metadata.uid,consoleLink:e})))))}},5861:function(e,t,n){"use strict";var a=n(0);n(5862);t.a=({children:e})=>a.createElement("div",{className:"co-launcher-card__body"},e)},5862:function(e,t,n){},5863:function(e,t,n){"use strict";var a=n(0),r=n(173);t.a=({consoleLink:e})=>a.createElement(r.a,{additionalClassName:"co-launcher-card__item",href:e.spec.href,text:e.spec.text,dataTestID:"launcher-item"})},5864:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(0),r=n(7),s=n(192),i=n(434),o=n(295),c=n(296),l=n(967),u=n(406),d=n(976),p=n(5865),m=n(5867),b=n(5870),h=n(10),v=n(5658);const g=()=>{const{obj:e}=a.useContext(v.a),[t,n,g]=Object(d.xb)({groupVersionKind:{kind:h.ResourceQuotaModel.kind,version:h.ResourceQuotaModel.apiVersion},namespace:e.metadata.name,isList:!0}),[f,E,O]=Object(d.xb)({groupVersionKind:{kind:h.AppliedClusterResourceQuotaModel.kind,version:h.AppliedClusterResourceQuotaModel.apiVersion,group:h.AppliedClusterResourceQuotaModel.apiGroup},namespace:e.metadata.name,isList:!0}),{t:y}=Object(r.useTranslation)();return a.createElement(s.a,{"data-test-id":"resource-quotas-card"},a.createElement(i.a,null,a.createElement(o.a,null,y("public~ResourceQuotas"))),a.createElement(c.a,null,a.createElement(p.a,{error:!!g,isLoading:!n},t.length?a.createElement(l.a,{hasGutter:!0},t.map(e=>a.createElement(u.a,{key:e.metadata.uid},a.createElement(m.a,{resourceQuota:e})))):void 0)),a.createElement(i.a,null,a.createElement(o.a,null,y("public~AppliedClusterResourceQuotas"))),a.createElement(c.a,null,a.createElement(p.a,{error:!!O,isLoading:!E,noText:y("public~No AppliedClusterResourceQuotas")},f.length?a.createElement(l.a,{hasGutter:!0},f.map(t=>a.createElement(u.a,{key:t.metadata.uid},a.createElement(b.a,{resourceQuota:t,namespace:e.metadata.name})))):void 0)))}},5865:function(e,t,n){"use strict";var a=n(0),r=n(7);n(5866);t.a=({error:e,isLoading:t,noText:n,children:s})=>{let i;const{t:o}=Object(r.useTranslation)();return e?i=a.createElement("div",{className:"text-secondary"},o("console-shared~Not available")):t?i=a.createElement("div",{className:"skeleton-quota"}):a.Children.count(s)||(i=a.createElement("div",{className:"text-secondary"},n||o("console-shared~No ResourceQuotas"))),a.createElement(a.Fragment,null,i||s)}},5866:function(e,t,n){},5867:function(e,t,n){"use strict";var a=n(0),r=n(516),s=n(164),i=n(1921),o=n(5746),c=n(1407),l=n(99),u=n(10),d=n(5749);t.a=({resourceQuota:e})=>{var t,n,p,m,b;const h=Object.keys(null!==(n=null===(t=e.status)||void 0===t?void 0:t.hard)&&void 0!==n?n:{}),[v,g]=a.useState(h.length<=4),f=null===(p=e.spec)||void 0===p?void 0:p.scopes;return a.createElement(a.Fragment,null,a.createElement(r.a,{hasGutter:!0},a.createElement(s.a,{isFilled:!0},a.createElement(i.a,{onToggle:(e,t)=>g(t),isExpanded:v,toggleContent:a.createElement(l.ResourceLink,{groupVersionKind:{kind:u.ResourceQuotaModel.kind,version:u.ResourceQuotaModel.apiVersion},name:e.metadata.name,namespace:e.metadata.namespace,inline:!0,truncate:!0,dataTest:"resource-quota-link"})})),a.createElement(s.a,null,a.createElement(d.a,{hard:null===(m=e.status)||void 0===m?void 0:m.hard,used:null===(b=e.status)||void 0===b?void 0:b.used}))),v&&a.createElement(a.Fragment,null,f&&a.createElement(c.QuotaScopesInline,{scopes:f}),a.createElement(o.a,{resourceQuota:e})))}},5868:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(5748),i=n(5674);n(5712);t.a=({clusterResourceQuota:e})=>{var t,n,o;const{t:c}=Object(r.useTranslation)(),l=Object.keys(null!==(o=null===(n=null===(t=e.status)||void 0===t?void 0:t.total)||void 0===n?void 0:n.hard)&&void 0!==o?o:{}).map(t=>{var n;const r=e.status.total.hard[t],o=null===(n=e.status.total.used)||void 0===n?void 0:n[t],{label:c,percent:l}=Object(i.a)({resourceName:t,used:o,hard:r});return a.createElement("div",{key:t,className:"co-resource-quota__chart","data-test":"resource-quota-gauge-chart"},a.createElement(s.a,{data:[{x:"Used",y:l},{x:"Unused",y:100-l}],title:t,label:c}))});return a.createElement("div",{className:"co-resource-quota-chart-row"},l.length?l:a.createElement(a.Fragment,null,c("console-app~No quota")))}},5869:function(e,t,n){},5870:function(e,t,n){"use strict";var a=n(0),r=n(516),s=n(164),i=n(1921),o=n(5747),c=n(1407),l=n(99),u=n(10),d=n(5749);t.a=({resourceQuota:e,namespace:t})=>{var n,p,m,b,h,v,g,f,E;const O=Object.keys(null!==(m=null===(p=null===(n=e.status)||void 0===n?void 0:n.total)||void 0===p?void 0:p.hard)&&void 0!==m?m:{}),[y,j]=a.useState(O.length<=4),k=null===(h=null===(b=null==e?void 0:e.spec)||void 0===b?void 0:b.quota)||void 0===h?void 0:h.scopes;return a.createElement(a.Fragment,null,a.createElement(r.a,{hasGutter:!0},a.createElement(s.a,{isFilled:!0},a.createElement(i.a,{onToggle:(e,t)=>j(t),isExpanded:y,toggleContent:a.createElement(l.ResourceLink,{groupVersionKind:{kind:u.AppliedClusterResourceQuotaModel.kind,version:u.AppliedClusterResourceQuotaModel.apiVersion,group:u.AppliedClusterResourceQuotaModel.apiGroup},name:e.metadata.name,namespace:t,inline:!0,truncate:!0})})),a.createElement(s.a,null,a.createElement(d.a,{hard:null===(g=null===(v=e.status)||void 0===v?void 0:v.total)||void 0===g?void 0:g.hard,used:null===(E=null===(f=e.status)||void 0===f?void 0:f.total)||void 0===E?void 0:E.used}))),y&&a.createElement(a.Fragment,null,k&&a.createElement(c.QuotaScopesInline,{scopes:k}),a.createElement(o.a,{appliedClusterResourceQuota:e,namespace:t})))}},5871:function(e,t,n){},5898:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return v}));var a=n(22),r=n(499),s=n(5723),i=n(5711),o=n(5591),c=n(8),l=n(76),u=n(2230),d=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};const p={queryParams:{dryRun:"All"}},m=(e,t,n,u,d,p,m,b)=>{var h,v;const{name:g,application:{name:f},project:{name:E},runtimeIcon:O,serverless:{scaling:y},limits:j,route:{unknownTargetPort:k,create:_,defaultUnknownPort:T},labels:R,image:{tag:S},deployment:{env:P,triggers:{image:N}},healthChecks:C,resources:w,formType:I}=e,{fileUpload:A}=e,x=null===(h=null==e?void 0:e.import)||void 0===h?void 0:h.selectedStrategy,D=parseInt(k,10)||T,M=N?c.c.Always:c.c.IfNotPresent,{concurrencylimit:L,concurrencytarget:U,minpods:B,maxpods:F,autoscale:{autoscalewindow:q,autoscalewindowUnit:$},concurrencyutilization:K}=y,{cpu:{request:G,requestUnit:Y,limit:V,limitUnit:W},memory:{request:H,requestUnit:z,limit:Q,limitUnit:J}}=j,Z=Object(i.a)({name:g,applicationName:f,imageStreamName:n,selectedTag:u||S,namespace:d,runtimeIcon:O});if(delete Z.app,A){const e=null==P?void 0:P.findIndex(e=>"JAVA_ARGS"===e.name);-1!==e?""!==A.javaArgs?P[e].value=A.javaArgs:P.splice(e,1):""!==A.javaArgs&&P.push({name:"JAVA_ARGS",value:A.javaArgs})}const X={kind:l.p.kind,apiVersion:`${l.p.apiGroup}/${l.p.apiVersion}`,metadata:{name:g,namespace:E,labels:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Z),R),"serverlessFunction"===I&&{"function.knative.dev":"true"}),!_&&{"networking.knative.dev/visibility":"cluster-local"}),((null===(v=e.pipeline)||void 0===v?void 0:v.enabled)||b)&&{"app.kubernetes.io/name":g}),x&&(null==x?void 0:x.type)===o.c.SERVERLESS_FUNCTION&&{"function.knative.dev":"true"}),annotations:A?Object.assign(Object.assign({},p),{jarFileName:A.name}):p},spec:{template:{metadata:{labels:Object.assign(Object.assign(Object.assign({},Z),R),{"app.kubernetes.io/name":b?e.name:R["app.kubernetes.io/name"]}),annotations:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},U&&{"autoscaling.knative.dev/target":""+U}),B&&{"autoscaling.knative.dev/min-scale":""+B}),F&&{"autoscaling.knative.dev/max-scale":""+F}),q&&{"autoscaling.knative.dev/window":`${q}${$}`}),K&&{"autoscaling.knative.dev/target-utilization-percentage":""+K})},spec:Object.assign(Object.assign({},L&&{containerConcurrency:L}),{containers:[Object.assign(Object.assign(Object.assign({name:g,image:""+t},D&&{ports:[{containerPort:D}]}),{imagePullPolicy:M,securityContext:{allowPrivilegeEscalation:!1,capabilities:{drop:["ALL"]},runAsNonRoot:!0,seccompProfile:{type:"RuntimeDefault"}},env:P,resources:Object.assign(Object.assign({},(V||Q)&&{limits:Object.assign(Object.assign({},V&&{cpu:`${V}${W}`}),Q&&{memory:`${Q}${J}`})}),(G||H)&&{requests:Object.assign(Object.assign({},G&&{cpu:`${G}${Y}`}),H&&{memory:`${H}${z}`})})}),Object(s.b)(C,w))]})}}};let ee={};a.a(m)||(ee=r.a(m,["status","spec.template.metadata.name","spec.template.spec.containers"]));return Object(i.h)(ee||{},X)},b=(e,t,n)=>{const{kind:a,apiVersion:r,metadata:{name:s,namespace:i}}=t;return Object.assign(Object.assign({},n?Object.assign({},n):{kind:l.e.kind,apiVersion:`${l.e.apiGroup}/${l.e.apiVersion}`,metadata:{name:e,namespace:i}}),{spec:{ref:{name:s,kind:a,apiVersion:r}}})},h=(e,t)=>{const{metadata:{name:n,namespace:a}}=e,r=[];return Object(c.kb)(l.e,null,a).then(a=>{const s=a.items;if(!(null==t?void 0:t.length)&&!(null==s?void 0:s.length))return Promise.resolve([]);const i=(o=n,c=t,s.filter(e=>{var t,n;return(null===(n=null===(t=e.spec)||void 0===t?void 0:t.ref)||void 0===n?void 0:n.name)===o}).filter(e=>!(null==c?void 0:c.includes(e.metadata.name))).map(e=>({action:u.d.Delete,resource:e})));var o,c;r.push(...i);const l=t.map(t=>{const n=s.find(e=>e.metadata.name===t);let a;return a=n?{action:u.d.Update,resource:b(t,e,n)}:{action:u.d.Create,resource:b(t,e)},a});return r.push(...l),r}).catch(e=>(console.log("Failed to get domain mapping resources",e),r))},v=(e,t,n)=>d(void 0,void 0,void 0,(function*(){const{serverless:{domainMapping:a=[]}}=e,r=yield h(t,[...new Set(a.map(e=>e.replace(/ *\([^)]*\) */g,"")))]),s=[];return r.length&&r.forEach(({action:e,resource:t})=>{switch(e){case u.d.Create:s.push(Object(c.jb)(l.e,t,n?p:{}));break;case u.d.Update:s.push(Object(c.rb)(l.e,t,null,null,n?p:{}));break;case u.d.Delete:s.push(Object(c.lb)(l.e,t,n?p:{}))}}),s}))},5899:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var a=n(5684),r=n(5586),s=n(5595),i=n(5588);const o=()=>Object(a.a)(r.TektonConfigModel,i.h),c=e=>{if(!e)return i.n.UNSUPPORTED_LEVEL;const{pipeline:t}=e.spec;return t[s.d.METRICS_PIPELINERUN_DURATION_TYPE]===s.b.HISTOGRAM&&t[s.d.METRICS_TASKRUN_DURATION_TYPE]===s.b.HISTOGRAM&&t[s.d.METRICS_PIPELINERUN_LEVEL]===s.c.PIPELINE&&t[s.d.METRICS_TASKRUN_LEVEL]===s.c.TASK?i.n.PIPELINE_TASK_LEVEL:t[s.d.METRICS_PIPELINERUN_DURATION_TYPE]===s.b.LASTVALUE&&t[s.d.METRICS_TASKRUN_DURATION_TYPE]===s.b.LASTVALUE&&t[s.d.METRICS_PIPELINERUN_LEVEL]===s.c.PIPELINERUN&&t[s.d.METRICS_TASKRUN_LEVEL]===s.c.TASKRUN?i.n.PIPELINERUN_TASKRUN_LEVEL:i.n.UNSUPPORTED_LEVEL}},5909:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return b}));var a=n(131),r=n(10),s=n(8),i=n(5586),o=n(5588),c=n(5705),l=n(5687),u=n(5919),d=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(e){s(e)}}function o(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((a=a.apply(e,t||[])).next())}))};const p=(e,t,n=0)=>d(void 0,void 0,void 0,(function*(){var o,c,l,d;const m=yield Object(s.kb)(i.EventListenerModel,e,t),b=null===(o=null==m?void 0:m.status)||void 0===o?void 0:o.configuration.generatedName;try{if(!b)return void(n<3?setTimeout(()=>p(e,t,n+1),500):yield Object(s.jb)(r.RouteModel,Object(u.b)(m),{ns:t}));const a=null===(d=null===(l=null===(c=(yield Object(s.kb)(r.ServiceModel,b,t)).spec)||void 0===c?void 0:c.ports)||void 0===l?void 0:l[0])||void 0===d?void 0:d.name,i=Object(u.b)(m,b,a);yield Object(s.jb)(r.RouteModel,i,{ns:t})}catch(e){Object(a.s)({title:"Error Exposing Route",error:e.message||"Unknown error exposing the Webhook route"})}})),m=(e,t)=>d(void 0,void 0,void 0,(function*(){const{triggerBinding:n}=t,a=e.metadata.namespace,r=Object(l.e)(e,t,null,null,{generateName:!0}),o=n.resource.spec.params.map(({name:e})=>({name:e})),d=Object(u.c)(e,r,o),m=yield Object(c.a)(a),b=Object(u.a)([n.resource],d,m),h={ns:a};let v;try{const e=yield Object(s.jb)(i.TriggerTemplateModel,d,h);v=[e,yield Object(s.jb)(i.EventListenerModel,b,h)]}catch(e){return Promise.reject(e)}return p(b.metadata.name,a),Promise.resolve(v)})),b=(e,t)=>d(void 0,void 0,void 0,(function*(){const n=[],a=t?t+"-push":"github-push",r=yield Object(s.kb)(i.ClusterTriggerBindingModel,a);if(r){const t=Object.assign(Object.assign({},Object(l.b)(e)),{workspaces:(e.spec.workspaces||[]).map(t=>{var n;return Object.assign(Object.assign({},t),{type:o.x.VolumeClaimTemplate,data:Object(l.c)(null===(n=null==e?void 0:e.metadata)||void 0===n?void 0:n.name)})}),triggerBinding:{name:a,resource:r}}),s=yield m(e,t);n.push(...s)}return Promise.resolve(n)}))},5910:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return m}));var a=n(16),r=n(141),s=n(22),i=n(50),o=n(974),c=n(5673),l=n(5711);const u={queryParams:{dryRun:"All"}},d=e=>"isi"in e,p=(e,t,n,u)=>{var p,m,b,h;const{project:{name:v},application:{name:g},name:f,labels:E,image:{ports:O,tag:y},route:{unknownTargetPort:j,defaultUnknownPort:k},resources:_}=e,T=a.a(t,"metadata.name")||a.a(e,"image.name"),R=a.a(e,"git"),S=Object(l.a)({name:f,applicationName:g,imageStreamName:T,selectedTag:y}),P=Object(l.d)(_,f),N=R?Object.assign(Object.assign({},Object(l.c)(R.url,R.ref)),Object(l.b)()):Object(l.b)();let C=O;const w=null===(p=e.build)||void 0===p?void 0:p.strategy;if(w===o.BuildStrategyType.Docker&&j){C=[{containerPort:r.a(j),protocol:"TCP"}]}else if(w!==o.BuildStrategyType.Devfile||s.a(null===(m=null==n?void 0:n.spec)||void 0===m?void 0:m.ports)){if(d(e)){const{isi:{ports:t}}=e;C=t}else if(s.a(C)){C=[{containerPort:k,protocol:"TCP"}]}}else C=[...n.spec.ports.map(e=>({name:e.name,containerPort:e.port,protocol:"TCP"}))];if(j&&!C.some(e=>j===e.containerPort.toString())){const e={containerPort:r.a(j),protocol:"TCP"},t=null===(h=null===(b=null==u?void 0:u.spec)||void 0===b?void 0:b.port)||void 0===h?void 0:h.targetPort;C=[...C.filter(e=>e.containerPort!==k),e],t&&(C=[...C.filter(e=>e.containerPort!==t),e])}const I={kind:"Service",apiVersion:"v1",metadata:{name:f,namespace:v,labels:Object.assign(Object.assign({},S),E),annotations:Object.assign({},N)},spec:{selector:P,ports:i.a(C,e=>({port:e.containerPort,targetPort:e.containerPort,protocol:e.protocol,name:e.name||Object(c.n)(e)}))}};return Object(l.h)(n,I)},m=(e,t,n)=>{var s,i,u,p;const{project:{name:m},application:{name:b},name:h,labels:v,route:{hostname:g,unknownTargetPort:f,defaultUnknownPort:E,secure:O,path:y,tls:j,labels:k},image:{ports:_,tag:T}}=e,R=a.a(t,"metadata.name")||a.a(e,"image.name"),S=a.a(e,"git"),P=Object(l.a)({name:h,applicationName:b,imageStreamName:R,selectedTag:T}),N=S?Object.assign(Object.assign({},Object(l.c)(S.url,S.ref)),Object(l.b)()):Object(l.b)();let C,w=_;if(d(e)){const{isi:{ports:t}}=e;w=t}const I=null===(s=e.build)||void 0===s?void 0:s.strategy;C=I===o.BuildStrategyType.Docker&&f?Object(c.n)({containerPort:r.a(f),protocol:"TCP"}):I===o.BuildStrategyType.Devfile?null===(u=null===(i=null==n?void 0:n.spec)||void 0===i?void 0:i.port)||void 0===u?void 0:u.targetPort:f?Object(c.n)({containerPort:r.a(f),protocol:"TCP"}):Object(c.n)({containerPort:(null===(p=w[0])||void 0===p?void 0:p.containerPort)||E,protocol:"TCP"});const A={kind:"Route",apiVersion:"route.openshift.io/v1",metadata:{name:h,namespace:m,labels:Object.assign(Object.assign(Object.assign({},P),v),k),annotations:N},spec:{to:{kind:"Service",name:h},tls:O?j:null,host:g,path:y,port:{targetPort:C},wildcardPolicy:"None"}};return Object(l.h)(n,A)}},5919:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var a=n(10),r=n(8),s=n(15),i=n(5586),o=n(5588),c=n(5705);const l=(e,t,n)=>({apiVersion:Object(r.n)(i.TriggerTemplateModel),kind:i.TriggerTemplateModel.kind,metadata:{name:`trigger-template-${e.metadata.name}-${Object(s.wd)()}`},spec:{params:n,resourcetemplates:[t]}}),u=(e,t,n)=>{return{apiVersion:Object(r.n)(i.EventListenerModel),kind:i.EventListenerModel.kind,metadata:{name:"event-listener-"+Object(s.wd)()},spec:{serviceAccountName:o.l,triggers:[{bindings:e.map(e=>0===(null==n?void 0:n.major)||1===(null==n?void 0:n.major)&&0===(null==n?void 0:n.minor)?{kind:e.kind,name:e.metadata.name}:{kind:e.kind,ref:e.metadata.name}),template:(a=t.metadata.name,Object(c.b)(n)?{ref:a}:{name:a})}]}};var a},d=(e,t,n=8080)=>{const s=e.metadata.name,o=t||"el-"+s;return{apiVersion:Object(r.n)(a.RouteModel),kind:a.RouteModel.kind,metadata:{name:o,labels:{"app.kubernetes.io/managed-by":i.EventListenerModel.kind,"app.kubernetes.io/part-of":"Triggers",eventlistener:s}},spec:{port:{targetPort:n},to:{kind:"Service",name:o,weight:100}}}}},5944:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c}));var a=n(5588);const r=()=>{var e;try{return JSON.parse(null!==(e=sessionStorage.getItem(a.k))&&void 0!==e?e:"{}")}catch(e){return{}}},s=e=>{var t;return null!==(t=r()[e])&&void 0!==t?t:[]},i=(e,t)=>s(t).includes(e),o=(e,t)=>{if(!e||!t)return;const n=s(t).filter(t=>t!==e);sessionStorage.setItem(a.k,JSON.stringify(Object.assign(Object.assign({},r()),{[t]:n})))},c=(e,t)=>{if(!e||!t)return;const n=r();n[t]||(n[t]=[]),n[t].includes(e)||(n[t].push(e),sessionStorage.setItem(a.k,JSON.stringify(n)))}},6273:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o}));var a=n(461);const r={admin:"Admin",edit:"Edit",view:"View"},s=()=>{if(window.SERVER_FLAGS.projectAccessClusterRoles)return JSON.parse(window.SERVER_FLAGS.projectAccessClusterRoles)},i=(e,t,n)=>e.reduce((e,a)=>{var r;return t.includes(a.roleRef.name)&&(null===(r=a.subjects)||void 0===r?void 0:r.length)>0&&e.push(...((e,t)=>{var n;return null===(n=e.subjects)||void 0===n?void 0:n.map(n=>({roleBindingName:e.metadata.name,subject:Object.assign(Object.assign({},n),{namespace:"ServiceAccount"!==n.kind?t:n.namespace}),role:e.roleRef.name,subjects:e.subjects}))})(a,n)),e},[]),o=e=>{const t=e.map(e=>{var t,n;return{user:null===(t=e.subject)||void 0===t?void 0:t.name,role:e.role,type:null===(n=e.subject)||void 0===n?void 0:n.kind}});return a.a(t,["user"])}},6519:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Create="Create",e.Remove="Remove",e.Patch="Patch"}(a||(a={}))},6784:function(e,t,n){"use strict";var a=n(0),r=n(137),s=n(7),i=n(14),o=n(5),c=n(7222),l=n(7223);t.a=e=>{const{t:t}=Object(s.useTranslation)(),n=Object(i.useParams)(),u=Object(i.useLocation)(),d=n.ns,p=Object(c.a)(),m=u.pathname.includes("project-access");return a.createElement(a.Fragment,null,a.createElement(r.b,null,a.createElement("title",null,t("devconsole~Project access"))),a.createElement(o.C,{resources:[{namespace:d,kind:"RoleBinding",prop:"roleBindings",isList:!0,optional:!0}]},a.createElement(l.a,Object.assign({fullFormView:m,namespace:d,roles:p},e))))}},7222:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n(108),s=n(10),i=n(6273);const o=()=>{const e=Object(i.b)(),t=a.useMemo(()=>e&&e.length?e.reduce((e,t)=>(e[t]={kind:s.ClusterRoleModel.kind,name:t},e),{}):{},[e]),n=Object(r.b)(t);if(!e||0===e.length)return{data:i.a,loaded:!0};return{data:e.reduce((e,t)=>{var a,r,s,i,o;const c=n[t];if(404===(null===(r=null===(a=null==c?void 0:c.loadError)||void 0===a?void 0:a.response)||void 0===r?void 0:r.status))console.warn(`ClusterRole ${t} could not be found and will not be shown in project access options.`);else if((null==c?void 0:c.loaded)&&(null==c?void 0:c.data)){const n=(null===(i=null===(s=c.data.metadata)||void 0===s?void 0:s.annotations)||void 0===i?void 0:i["console.openshift.io/display-name"])||(null===(o=c.data.metadata)||void 0===o?void 0:o.name)||t;e[t]=n}else e[t]=t;return e},{}),loaded:Object.values(n).every(e=>e.loaded||e.loadError)}}},7223:function(e,t,n){"use strict";var a=n(0),r=n(55),s=n(22),i=n(137),o=n(7),c=n(14),l=n(5),u=n(10),d=n(5695),p=n(7224),m=n(6273),b=n(6519),h=n(7225),v=n(7226);t.a=({namespace:e,roleBindings:t,roles:n,fullFormView:g})=>{const{t:f}=Object(o.useTranslation)();if(!t.loaded&&s.a(t.loadError)||!n.loaded)return a.createElement(l.S,null);const E=Object(m.c)(t.data,Object.keys(n.data),e),O=Object(l.Qb)(l.Lb.usingRBAC),y={projectAccess:t.loaded&&E},j=a.createElement(a.Fragment,null,a.createElement(l.Z,{title:g?f("devconsole~Project access"):null,"data-test":"project-access-page"},a.createElement(o.Trans,{t:f,ns:"devconsole"},"Project access allows you to add or remove a user's access to the project. More advanced management of role-based access control appear in ",a.createElement(c.Link,{to:`/k8s/ns/${e}/${u.RoleModel.plural}`},"Roles")," and"," ",a.createElement(c.Link,{to:`/k8s/ns/${e}/${u.RoleBindingModel.plural}`},"Role Bindings"),"."),!Object(l.hc)()&&a.createElement(o.Trans,{t:f,ns:"devconsole"}," ","For more information, see the"," ",a.createElement(l.z,{href:O},"role-based access control documentation"),".")),t.loadError?a.createElement(l.wb,{loaded:t.loaded,loadError:t.loadError}):a.createElement(r.b,{initialValues:y,onSubmit:(t,n)=>{let a=Object(p.a)(y.projectAccess,t.projectAccess),r=Object(p.b)(y.projectAccess,t.projectAccess);const s=Object(p.c)(a,r),{updateRolesWithMultipleSubjects:i,removeRoleSubjectFlag:o}=Object(p.d)(a,r,s);s.length>0&&(a=a.filter(e=>!s.find(t=>e.roleBindingName===t.roleBindingName)),r=r.filter(e=>!s.find(t=>e.roleBindingName===t.roleBindingName))),s.push(...i);const c=[];return s.length>0&&c.push(...Object(p.e)(b.a.Patch,s,e,o)),a.length>0&&c.push(...Object(p.e)(b.a.Create,a,e,o)),r.length>0&&c.push(...Object(p.e)(b.a.Remove,r,e,o)),Promise.all(c).then(()=>{n.resetForm({values:{projectAccess:t.projectAccess},status:{success:f("devconsole~Successfully updated the project access.")}})}).catch(e=>{n.setStatus({submitError:e.message})})},onReset:(e,t)=>{t.resetForm({status:{success:null},values:y})},validationSchema:h.a},e=>a.createElement(v.a,Object.assign({},e,{roles:n.data,roleBindings:y,onCancel:g?l.Vb.goBack:null}))));return g?a.createElement(d.b,{hideApplications:!0,variant:d.a.light,disabled:!0},a.createElement(i.b,null,a.createElement("title",null,f("devconsole~Project access"))),j):j}},7224:function(e,t,n){"use strict";n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return g})),n.d(t,"d",(function(){return f}));var a=n(116),r=n(4387),s=n(57),i=n(2062),o=n(77),c=n(10),l=n(5849),u=n(6519);const d=(e,t)=>{const n=a.a(e,"roleBindingName"),r=a.a(t,e=>n.find(t=>e.roleBindingName===t.roleBindingName));return a.a(n,e=>r.find(t=>e.roleBindingName===t.roleBindingName&&e.subject.name!==t.subject.name&&e.role===t.role))},p=(e,t)=>{const n=a.a(e,"roleBindingName"),r=a.a(t,e=>n.find(t=>e.roleBindingName===t.roleBindingName));return a.a(n,e=>r.find(t=>e.roleBindingName===t.roleBindingName&&(e.subject.kind!==t.subject.kind||e.subject.namespace!==t.subject.namespace)&&e.role===t.role))},m=(e,t)=>[...p(e,t),...d(e,t)],b=(e,t)=>r.a(a.a(t,t=>!e.find(e=>t.subject.name===e.subject.name&&t.subject.kind===e.subject.kind&&t.role===e.role&&t.subject.namespace===e.subject.namespace)),e=>JSON.stringify([e.subject.name,e.subject.kind,e.role])),h=(e,t)=>a.a(e,e=>!t.find(t=>e.subject.name===t.subject.name&&e.subject.kind===t.subject.kind&&e.role===t.role&&e.subject.namespace===t.subject.namespace&&e.roleBindingName===t.roleBindingName)),v=e=>e.map(e=>"ServiceAccount"===e.kind?(delete e.apiGroup,e):(delete e.namespace,e)),g=(e,t,n,a)=>{const r=[];return s.a(t,t=>{const s=e===u.a.Create?(i=t.subject.name,d=t.role,`${i}-${d}-${Object(l.f)()}`):t.roleBindingName;var i,d;const p=e===u.a.Create||e===u.a.Remove?[Object.assign(Object.assign({},"ServiceAccount"===t.subject.kind?t.subject.namespace?{namespace:t.subject.namespace}:{}:{apiGroup:"rbac.authorization.k8s.io"}),{kind:t.subject.kind,name:t.subject.name})]:1===a&&t.subjects.length>0||t.subjects.length>1?v(t.subjects):v([t.subject]),m={apiVersion:"rbac.authorization.k8s.io/v1",kind:"RoleBinding",metadata:{name:s,namespace:n},roleRef:{apiGroup:"rbac.authorization.k8s.io",kind:"ClusterRole",name:t.role},subjects:p};r.push(((e,t)=>{switch(e){case u.a.Create:return Object(o.g)({model:c.RoleBindingModel,data:t});case u.a.Remove:return Object(o.h)({model:c.RoleBindingModel,resource:t});case u.a.Patch:return Object(o.p)({model:c.RoleBindingModel,resource:t,data:[{op:"replace",path:"/subjects",value:t.subjects}]});default:return null}})(e,m))}),r},f=(e,t,n)=>{let a=0;const r=[];return i.a(e,e=>{var n;return(null===(n=e.subjects)||void 0===n?void 0:n.length)>1&&t.find(t=>t.roleBindingName===e.roleBindingName&&t.role===e.role)}),i.a(t,e=>{if(e.subjects.length>1){const t=r.find(t=>t.roleBindingName===e.roleBindingName);if(t){const n=t.subjects.filter(t=>t.name!==e.subject.name);t.subjects=n}else{const t=e.subjects.filter(t=>t.name!==e.subject.name);r.push(Object.assign(Object.assign({},e),{subjects:t})),a=1}return!0}return!1}),i.a(n,e=>{if(e.subjects.length>1){return r.find(t=>t.roleBindingName===e.roleBindingName).subjects.push(e.subject),!0}return!1}),{updateRolesWithMultipleSubjects:r,removeRoleSubjectFlag:a}}},7225:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(689),r=n(359);const s=a.object().shape({projectAccess:a.array().of(a.object().shape({subject:a.object().shape({name:a.string().required(r.a.t("devconsole~Required")),kind:a.string().required(r.a.t("devconsole~Required"))}),role:a.string().required(r.a.t("devconsole~Required"))}))})},7226:function(e,t,n){"use strict";var a=n(0),r=n(1922),s=n(281),i=n(22),o=n(107),c=n(7),l=n(15),u=n(6273);n(7227);const d=({name:e,values:t})=>{var n,r,s;const{t:i}=Object(c.useTranslation)(),o=e.split("."),u=o.length>2&&"ServiceAccount"===(null===(s=null===(r=null===(n=null==t?void 0:t.projectAccess)||void 0===n?void 0:n[null==o?void 0:o[1]])||void 0===r?void 0:r.subject)||void 0===s?void 0:s.kind);return a.createElement("div",null,a.createElement(l.I,{name:e+".kind",title:i("devconsole~Select a type"),items:{Group:"Group",ServiceAccount:"ServiceAccount",User:"User"},fullWidth:!0,className:"odc-project-access-form__subject-kind-dropdown"}),u&&a.createElement(l.sb,{name:e+".namespace",fullWidth:!0}))};t.a=({handleSubmit:e,handleReset:t,isSubmitting:n,status:p,errors:m,dirty:b,roles:h,roleBindings:v,values:g,onCancel:f})=>{const{t:E}=Object(c.useTranslation)(),[O,y]=a.useState(!1),j=!b||!i.a(m)||n;a.useEffect(()=>{o.a(Object(u.d)(v.projectAccess),Object(u.d)(g.projectAccess))?y(!1):y(!0)},[v]);return a.createElement(r.a,{onSubmit:e},a.createElement("div",{className:"co-m-pane__body odc-project-access-form__body"},a.createElement("div",{className:"co-m-pane__form"},a.createElement(l.mb,{name:"projectAccess",addLabel:E("devconsole~Add access"),headers:[E("devconsole~Subject"),E("devconsole~Name"),E("devconsole~Role")],emptyValues:{name:"",role:""}},a.createElement(d,{name:"subject",values:g}),a.createElement(l.ab,{name:"subject.name",type:s.b.text,placeholder:E("devconsole~Name")}),a.createElement(l.I,{dataTest:"role-dropdown",name:"role",title:E("devconsole~Select a role"),items:h,fullWidth:!0})))),a.createElement(l.R,{handleReset:()=>{t(),y(!1)},isSubmitting:n,errorMessage:null==p?void 0:p.submitError,successMessage:!b&&(null==p?void 0:p.success),disableSubmit:O||j,showAlert:O||!j,submitLabel:E("devconsole~Save"),resetLabel:E("devconsole~Reload"),infoTitle:O&&E("devconsole~This list has been updated."),infoMessage:O&&E("devconsole~Click reload to see the new list."),handleCancel:f}))}},7227:function(e,t,n){},8118:function(e,t,n){"use strict";var a=n(0),r=n(137),s=n(7),i=n(14),o=n(5838),c=n(40),l=n(1945),u=n(978),d=n(5),p=n(10),m=n(15),b=n(5695),h=n(6784),v=n(5805),g=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const f=e=>{e===m.c&&d.Vb.push("/project-details/all-namespaces")},E=Object(u.b)(e=>{var{noProjectsAvailable:t}=e,n=g(e,["noProjectsAvailable"]);const{t:r}=Object(s.useTranslation)(),u=Object(i.useParams)().ns,m=Object(d.Dc)({group:p.RoleBindingModel.apiGroup,resource:p.RoleBindingModel.plural,verb:"list",namespace:u}),b=Object(d.Dc)({group:p.RoleBindingModel.apiGroup,resource:p.RoleBindingModel.plural,verb:"create",namespace:u}),f=[{href:"",nameKey:"devconsole~Overview",component:o.a},{href:"details",nameKey:"devconsole~Details",component:l.NamespaceDetails}];return m&&b&&f.push({href:"access",nameKey:"devconsole~Project access",component:h.a}),!t&&u?a.createElement(c.a,Object.assign({},n,{breadcrumbsFor:()=>[],name:u,kind:p.ProjectModel.kind,kindObj:p.ProjectModel,menuActions:l.projectMenuActions,customData:{activeNamespace:u,hideHeading:!0},pages:f})):a.createElement(v.b,{title:r("devconsole~Project Details")},e=>a.createElement(s.Trans,{t:r,ns:"devconsole"},"Select a Project to view its details",a.createElement(v.a,{openProjectModal:e}),"."))});t.a=e=>{const{t:t}=Object(s.useTranslation)();return a.createElement(a.Fragment,null,a.createElement(r.b,null,a.createElement("title",null,t("devconsole~Project Details"))),a.createElement(b.b,{hideApplications:!0,variant:b.a.light,onNamespaceChange:f},a.createElement(E,Object.assign({},e))))}}}]);
//# sourceMappingURL=projects-chunk-8af12ae8d2bae28713ad.min.js.map
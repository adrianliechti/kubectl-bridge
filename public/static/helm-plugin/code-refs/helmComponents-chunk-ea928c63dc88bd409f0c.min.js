(window.webpackJsonp=window.webpackJsonp||[]).push([[170,20,35,44,57,120,126],{1407:function(e,t,n){"use strict";n.r(t),n.d(t,"getQuotaResourceTypes",(function(){return L})),n.d(t,"getACRQResourceUsage",(function(){return F})),n.d(t,"getResourceUsage",(function(){return B})),n.d(t,"UsageIcon",(function(){return K})),n.d(t,"ResourceUsageRow",(function(){return Y})),n.d(t,"QuotaScopesInline",(function(){return H})),n.d(t,"QuotaScopesList",(function(){return G})),n.d(t,"hasComputeResources",(function(){return V})),n.d(t,"ResourceQuotasList",(function(){return J})),n.d(t,"AppliedClusterResourceQuotasList",(function(){return Z})),n.d(t,"quotaType",(function(){return X})),n.d(t,"flatten",(function(){return ee})),n.d(t,"ResourceQuotasPage",(function(){return te})),n.d(t,"AppliedClusterResourceQuotasPage",(function(){return ne})),n.d(t,"ResourceQuotasDetailsPage",(function(){return ae})),n.d(t,"AppliedClusterResourceQuotasDetailsPage",(function(){return re}));var a=n(16),r=n(160),s=n(1120),o=n(460),i=n(839),l=n(0),c=n(18),u=n(14),d=n(54),m=n(5839),p=n(5840),h=n(2248),b=n(2247),v=n(1199),f=n(7),g=n(5747),E=n(5746),y=n(5868),O=n(15),_=n(40),k=n(5),j=n(243),R=n(207),T=n(139),N=n(8),S=n(10),P=n(5674);const{common:C}=k.F.factory,w=[...k.F.getExtensionsActionsForKind(S.ResourceQuotaModel),...C],x=[...k.F.getExtensionsActionsForKind(S.ClusterResourceQuotaModel),...C],I=e=>[...k.F.getExtensionsActionsForKind(S.ClusterResourceQuotaModel),k.F.factory.ModifyLabels,k.F.factory.ModifyAnnotations,(t,n)=>({labelKey:"public~Edit AppliedClusterResourceQuota",href:`/k8s/ns/${e}/${Object(N.Hb)(S.AppliedClusterResourceQuotaModel)}/${n.metadata.name}/yaml`,accessReview:{group:t.apiGroup,resource:t.plural,name:n.metadata.name,namespace:e,verb:"update"}}),k.F.factory.Delete],D=e=>!e.metadata.namespace,A=Object(N.Hb)(S.ClusterResourceQuotaModel),M=Object(N.Hb)(S.AppliedClusterResourceQuotaModel),U=(e,t)=>e.metadata.namespace?w:"ClusterResourceQuota"===e.kind?x:"AppliedClusterResourceQuota"===e.kind?I(t.namespace):void 0,L=e=>{const t=D(e)?a.a(e,"spec.quota.hard"):a.a(e,"spec.hard");return r.a(t).sort()},F=(e,t,n)=>{var a,r,s,o,i,l,c,u,d,m,p,h,b;let v;if(n){v={namespace:null===(s=null===(r=(null===(a=e.status)||void 0===a?void 0:a.namespaces).filter(e=>e.namespace===n)[0])||void 0===r?void 0:r.status)||void 0===s?void 0:s.used[t],cluster:null===(i=null===(o=e.status)||void 0===o?void 0:o.total)||void 0===i?void 0:i.used[t]}}else v={namespace:0,cluster:null===(c=null===(l=e.status)||void 0===l?void 0:l.total)||void 0===c?void 0:c.used[t]};const f=null===(d=null===(u=e.status)||void 0===u?void 0:u.total)||void 0===d?void 0:d.used[t],g=(null===(p=null===(m=e.status)||void 0===m?void 0:m.total)||void 0===p?void 0:p.hard[t])||(null===(b=null===(h=e.spec)||void 0===h?void 0:h.quota)||void 0===b?void 0:b.hard[t]),E=g&&v.namespace?Object(k.Ib)(v.namespace)/Object(k.Ib)(g)*100:0,y=(g&&v.cluster?Object(k.Ib)(v.cluster)/Object(k.Ib)(g)*100:0)-E;return{used:v,totalUsed:f,max:g,percent:{namespace:E,otherNamespaces:y,unused:100-(E+y)}}},B=(e,t)=>{const n=D(e),r=n?["status","total","hard"]:["status","hard"],s=n?["spec","quota","hard"]:["spec","hard"],o=n?["status","total","used"]:["status","used"],i=a.a(e,[...r,t])||a.a(e,[...s,t]),l=a.a(e,[...o,t]);return{used:l,max:i,percent:i&&l?Object(k.Ib)(l)/Object(k.Ib)(i)*100:0}},q=["","","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg",k.F.columnClass],$=["","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg",k.F.columnClass],K=({percent:e})=>{let t=l.createElement(v.a,null);return 0===e?t=l.createElement(m.a,{className:"co-resource-quota-empty"}):e>0&&e<50?t=l.createElement(p.a,{className:"co-resource-quota-almost-empty"}):e>=50&&e<100?t=l.createElement(h.a,{className:"co-resource-quota-almost-full"}):100===e?t=l.createElement(b.a,{className:"co-resource-quota-full"}):e>100&&(t=l.createElement(O.tc,{className:"co-resource-quota-exceeded"})),t},Y=({quota:e,resourceType:t,namespace:n})=>{if(Object(N.Db)(e)===M){const{used:a,totalUsed:r,max:s,percent:o}=F(e,t,n);return l.createElement("div",{className:"row co-m-row"},l.createElement("div",{className:"col-sm-4 col-xs-6 co-break-word"},t),l.createElement("div",{className:"col-sm-2 hidden-xs co-resource-quota-icon"},l.createElement(K,{percent:o.namespace})),l.createElement("div",{className:"col-sm-2 col-xs-2"},a.namespace),l.createElement("div",{className:"col-sm-2 col-xs-2"},r),l.createElement("div",{className:"col-sm-2 col-xs-2"},s))}const{used:a,max:r,percent:s}=B(e,t);return l.createElement("div",{className:"row co-m-row"},l.createElement("div",{className:"col-sm-4 col-xs-6 co-break-word"},t),l.createElement("div",{className:"col-sm-2 hidden-xs co-resource-quota-icon"},l.createElement(K,{percent:s})),l.createElement("div",{className:"col-sm-3 col-xs-3"},a),l.createElement("div",{className:"col-sm-3 col-xs-3"},r))},H=({scopes:e})=>l.createElement("span",null,"(",e.join(", "),")"),G=({scopes:e})=>{const{t:t}=Object(f.useTranslation)(),n={Terminating:{description:t("public~Affects pods that have an active deadline. These pods usually include builds, deployers, and jobs.")},NotTerminating:{description:t("public~Affects pods that do not have an active deadline. These pods usually include your applications.")},BestEffort:{description:t("public~Affects pods that do not have resource limits set. These pods have a best effort quality of service.")},NotBestEffort:{description:t("public~Affects pods that have at least one resource limit set. These pods do not have a best effort quality of service.")}};return e.map(e=>{const t=a.a(n,e);return t?l.createElement("dd",{key:e},l.createElement("div",{className:"co-resource-quota-scope__label"},e),l.createElement("div",{className:"co-resource-quota-scope__description"},t.description)):l.createElement("dd",{key:e,className:"co-resource-quota-scope__label"},e)})},V=e=>s.a(e,["requests.cpu","cpu","limits.cpu","requests.memory","memory","limits.memory"]).length>0,W=({obj:e})=>{var t,n,a,r,s,o,i,d,m;const{t:p}=Object(f.useTranslation)(),h=Object(u.useParams)(),b=L(e),v=null!==(n=null===(t=e.spec)||void 0===t?void 0:t.scopes)&&void 0!==n?n:null===(r=null===(a=e.spec)||void 0===a?void 0:a.quota)||void 0===r?void 0:r.scopes,O=Object(N.Db)(e),_=O===M,j=null==h?void 0:h.ns;let R,T;switch(O){case M:R=p("public~AppliedClusterResourceQuota details"),T=l.createElement(g.a,{appliedClusterResourceQuota:e,namespace:j});break;case A:R=p("public~ClusterResourceQuota details"),T=l.createElement(y.a,{clusterResourceQuota:e});break;default:R=p("public~ResourceQuota details"),T=l.createElement(E.a,{resourceQuota:e})}const P=Object(k.Dc)({group:S.ClusterResourceQuotaModel.apiGroup,resource:S.ClusterResourceQuotaModel.plural,verb:"list"});return l.createElement(l.Fragment,null,l.createElement("div",{className:"co-m-pane__body"},l.createElement(k.ob,{text:R}),T,l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-6"},l.createElement(k.lb,{resource:e},P&&l.createElement(k.r,{label:p("public~ClusterResourceQuota"),obj:e,path:"rq.metadata.name"},l.createElement(k.hb,{kind:A,name:e.metadata.name})),l.createElement(k.r,{label:p("public~Label selector"),obj:e,path:"spec.selector.labels.matchLabels"},l.createElement(k.L,{kind:M,labels:null===(i=null===(o=null===(s=e.spec)||void 0===s?void 0:s.selector)||void 0===o?void 0:o.labels)||void 0===i?void 0:i.matchLabels})),l.createElement(k.r,{label:p("public~Project annotations"),obj:e,path:"spec.selector.annotations"},l.createElement(k.pb,{selector:null===(m=null===(d=e.spec)||void 0===d?void 0:d.selector)||void 0===m?void 0:m.annotations,namespace:j})))),v&&l.createElement("div",{className:"col-sm-6"},l.createElement("dl",{className:"co-m-pane__details"},l.createElement("dt",null,p("public~Scopes")),l.createElement(G,{scopes:v}))))),l.createElement("div",{className:"co-m-pane__body"},l.createElement(k.ob,{text:R,style:{display:"block",marginBottom:"20px"}},l.createElement(k.B,null,l.createElement("p",null,p("public~Requests are the amount of resources you expect to use. These are used when establishing if the cluster can fulfill your Request.")),l.createElement("p",null,p("public~Limits are a maximum amount of a resource you can consume. Applications consuming more than the Limit may be terminated.")),l.createElement("p",null,p("public~A cluster administrator can establish limits on both the amount you can request and your limits with a ResourceQuota.")))),l.createElement("div",{className:"co-m-table-grid co-m-table-grid--bordered"},l.createElement("div",{className:"row co-m-table-grid__head"},l.createElement("div",{className:"col-sm-4 col-xs-6"},p("public~Resource type")),l.createElement("div",{className:"col-sm-2 hidden-xs"},p("public~Capacity")),l.createElement("div",{className:c({"col-sm-2 col-xs-2":_},{"col-sm-3 col-xs-3":!_})},p("public~Used")),_&&l.createElement("div",{className:"col-sm-2 col-xs-2"},p("public~Total used")),l.createElement("div",{className:c({"col-sm-2 col-xs-2":_},{"col-sm-3 col-xs-3":!_})},p("public~Max"))),l.createElement("div",{className:"co-m-table-grid__body"},b.map(t=>l.createElement(Y,{key:t,quota:e,resourceType:t,namespace:j}))))))},z=({obj:e,customData:t})=>{var n,a,r,s,o,i,u,d;const{t:m}=Object(f.useTranslation)(),p=U(e,t);let h;return h=e.kind===S.ResourceQuotaModel.kind?Object.keys((null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.hard)||{}).reduce((t,n)=>{var a,r,s;return Object(P.b)(null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.hard[n],null===(s=null===(r=null==e?void 0:e.status)||void 0===r?void 0:r.used)||void 0===s?void 0:s[n])>=100?t+1:t},0):Object.keys((null===(r=null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.total)||void 0===r?void 0:r.hard)||{}).reduce((t,n)=>{var a,r,s,o,i;return Object(P.b)(null===(r=null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.total)||void 0===r?void 0:r.hard[n],null===(i=null===(o=null===(s=null==e?void 0:e.status)||void 0===s?void 0:s.total)||void 0===o?void 0:o.used)||void 0===i?void 0:i[n])>=100?t+1:t},0),l.createElement(l.Fragment,null,l.createElement(_.k,{className:q[0]},l.createElement(k.hb,{kind:Object(N.Db)(e),name:e.metadata.name,namespace:Object(N.Db)(e)===M?t.namespace:e.metadata.namespace,className:"co-resource-item__resource-name",dataTest:"resource-quota-link"})),l.createElement(_.k,{className:c(q[1],"co-break-word"),columnID:"namespace"},e.metadata.namespace?l.createElement(k.hb,{kind:"Namespace",name:e.metadata.namespace}):m("public~None")),l.createElement(_.k,{className:c(q[2],"co-break-word")},l.createElement(k.L,{kind:M,labels:null===(i=null===(o=null===(s=e.spec)||void 0===s?void 0:s.selector)||void 0===o?void 0:o.labels)||void 0===i?void 0:i.matchLabels})),l.createElement(_.k,{className:c(q[3],"co-break-word")},l.createElement(k.pb,{selector:null===(d=null===(u=e.spec)||void 0===u?void 0:u.selector)||void 0===d?void 0:d.annotations,namespace:t.namespace})),l.createElement(_.k,{className:c(q[4],"co-break-word")},h>0?l.createElement(l.Fragment,null,l.createElement(O.tc,null)," ",m("public~{{count}} resource reached quota",{count:h})):m("public~none are at quota")),l.createElement(_.k,{className:q[5]},l.createElement(k.xb,{timestamp:e.metadata.creationTimestamp})),l.createElement(_.k,{className:q[6]},l.createElement(k.gb,{customData:t,actions:p,kind:Object(N.Db)(e),resource:e})))},Q=({obj:e,customData:t})=>{var n,a,r,s,o,i,u;const{t:d}=Object(f.useTranslation)(),m=U(e,t),p=Object.keys((null===(a=null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.total)||void 0===a?void 0:a.hard)||{}).reduce((t,n)=>{var a,r,s,o,i;return Object(P.b)(null===(r=null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.total)||void 0===r?void 0:r.hard[n],null===(i=null===(o=null===(s=null==e?void 0:e.status)||void 0===s?void 0:s.total)||void 0===o?void 0:o.used)||void 0===i?void 0:i[n])>=100?t+1:t},0);return l.createElement(l.Fragment,null,l.createElement(_.k,{className:$[0]},l.createElement(k.hb,{kind:M,name:e.metadata.name,namespace:t.namespace,className:"co-resource-item__resource-name"})),l.createElement(_.k,{className:c($[1],"co-break-word")},l.createElement(k.L,{kind:M,labels:null===(o=null===(s=null===(r=e.spec)||void 0===r?void 0:r.selector)||void 0===s?void 0:s.labels)||void 0===o?void 0:o.matchLabels})),l.createElement(_.k,{className:c($[2],"co-break-word")},l.createElement(k.pb,{selector:null===(u=null===(i=e.spec)||void 0===i?void 0:i.selector)||void 0===u?void 0:u.annotations,namespace:t.namespace})),l.createElement(_.k,{className:c($[3],"co-break-word")},p>0?l.createElement(l.Fragment,null,l.createElement(O.tc,null)," ",d("public~{{count}} resource reached quota",{count:p})):d("public~none are at quota")),l.createElement(_.k,{className:$[4]},l.createElement(k.xb,{timestamp:e.metadata.creationTimestamp})),l.createElement(_.k,{className:$[5]},l.createElement(k.gb,{customData:t,actions:m,kind:M,resource:e})))},J=e=>{const{t:t}=Object(f.useTranslation)();return l.createElement(_.j,Object.assign({},e,{"aria-label":t("public~ResourceQuotas"),Header:()=>[{title:t("public~Name"),sortField:"metadata.name",transforms:[d.a],props:{className:q[0]}},{title:t("public~Namespace"),sortField:"metadata.namespace",transforms:[d.a],props:{className:q[1]},id:"namespace"},{title:t("public~Label selector"),sortField:"spec.selector.labels.matchLabels",transforms:[d.a],props:{className:q[2]}},{title:t("public~Project annotations"),sortField:"spec.selector.annotations",transforms:[d.a],props:{className:q[3]}},{title:t("public~Status"),props:{className:q[4]},transforms:[d.a]},{title:t("public~Created"),sortField:"metadata.creationTimestamp",transforms:[d.a],props:{className:q[5]}},{title:"",props:{className:q[6]}}],Row:z,virtualize:!0,customData:{namespace:e.namespace}}))},Z=e=>{const{t:t}=Object(f.useTranslation)();return l.createElement(_.j,Object.assign({},e,{"aria-label":t("public~AppliedClusterResourceQuotas"),Header:()=>[{title:t("public~Name"),sortField:"metadata.name",transforms:[d.a],props:{className:$[0]}},{title:t("public~Label selector"),sortField:"spec.selector.labels.matchLabels",transforms:[d.a],props:{className:$[1]}},{title:t("public~Project annotations"),sortField:"spec.selector.annotations",transforms:[d.a],props:{className:$[2]}},{title:t("public~Status"),props:{className:$[3]},transforms:[d.a]},{title:t("public~Created"),sortField:"metadata.creationTimestamp",transforms:[d.a],props:{className:$[4]}},{title:"",props:{className:$[5]}}],Row:Q,virtualize:!0,customData:{namespace:e.namespace}}))},X=e=>{if(e)return e.metadata.namespace?"namespace":"cluster"},ee=e=>o.a(e,e=>i.a(e.data)),te=Object(j.a)(O.O.OPENSHIFT)(({namespace:e,flags:t,mock:n,showTitle:a})=>{const{t:r}=Object(f.useTranslation)(),s=[{kind:"ResourceQuota",namespaced:!0}];let o=null;if(Object(R.c)(t[O.O.OPENSHIFT]))return l.createElement(T.f,null);t[O.O.OPENSHIFT]&&(e?s.push({kind:Object(N.Hb)(S.AppliedClusterResourceQuotaModel),namespaced:!0,namespace:e,optional:!0}):s.push({kind:Object(N.Hb)(S.ClusterResourceQuotaModel),namespaced:!1,optional:!0}),o=[{filterGroupName:r("public~Role"),type:"role-kind",reducer:X,items:[{id:"cluster",title:r("public~Cluster-wide {{resource}}",{resource:r(S.ResourceQuotaModel.labelPluralKey)})},{id:"namespace",title:r("public~Namespace {{resource}}",{resource:r(S.ResourceQuotaModel.labelPluralKey)})}]}]);const i=e||"default",c={model:S.ResourceQuotaModel,namespace:i};return l.createElement(_.i,{canCreate:!0,createAccessReview:c,createButtonText:r("public~Create ResourceQuota"),createProps:{to:`/k8s/ns/${i}/resourcequotas/~new`},ListComponent:J,resources:s,label:r(S.ResourceQuotaModel.labelPluralKey),namespace:e,flatten:ee,title:r(S.ResourceQuotaModel.labelPluralKey),rowFilters:o,mock:n,showTitle:a})}),ne=({namespace:e,mock:t,showTitle:n})=>{const{t:a}=Object(f.useTranslation)(),r=[{kind:Object(N.Hb)(S.AppliedClusterResourceQuotaModel),namespaced:!0,namespace:e,optional:!0}];return l.createElement(_.i,{ListComponent:Z,resources:r,label:a(S.AppliedClusterResourceQuotaModel.labelPluralKey),namespace:e,flatten:ee,title:a(S.AppliedClusterResourceQuotaModel.labelPluralKey),mock:t,showTitle:n})},ae=e=>l.createElement(_.a,Object.assign({},e,{menuActions:w,pages:[k.mc.details(W),k.mc.editYaml()]})),re=e=>{const t=Object(u.useParams)(),n=I(null==t?void 0:t.ns);return l.createElement(_.a,Object.assign({},e,{menuActions:n,pages:[k.mc.details(W),k.mc.editYaml()]}))}},1945:function(e,t,n){"use strict";n.r(t),n.d(t,"deleteModal",(function(){return W})),n.d(t,"NamespacesList",(function(){return re})),n.d(t,"NamespacesPage",(function(){return se})),n.d(t,"projectMenuActions",(function(){return oe})),n.d(t,"ProjectsTable",(function(){return me})),n.d(t,"ProjectList",(function(){return fe})),n.d(t,"ProjectsPage",(function(){return ge})),n.d(t,"PullSecret",(function(){return Ee})),n.d(t,"NamespaceLineCharts",(function(){return ye})),n.d(t,"TopPodsBarChart",(function(){return Oe})),n.d(t,"NamespaceSummary",(function(){return ke})),n.d(t,"NamespaceDetails",(function(){return je})),n.d(t,"NamespacesDetailsPage",(function(){return Te})),n.d(t,"ProjectsDetailsPage",(function(){return Ne}));var a=n(16),r=n(667),s=n(1256),o=n(501),i=n(22),l=n(50),c=n(461),u=n(0),d=n(137),m=n(18),p=n(54),h=n(88),b=n(80),v=n(19),f=n(2244),g=n.n(f),E=n(31),y=n(7),O=n(29),_=n(615),k=n(764),j=n(15),R=n(762),T=n(121),N=n(13),S=n(10),P=n(109),C=n(8),w=n(53),x=n(40),I=n(5),D=n(131),A=n(767),M=n(199),U=n(207),L=n(978),F=n(5852),B=n(5838),q=n(108),$=n(1418),K=n(2249),Y=n(2250),H=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const G=e=>a.a(e,["metadata","annotations","openshift.io/display-name"]),V=()=>[{filterGroupName:O.a.t("public~Requester"),type:"requester",reducer:e=>{var t,n,a;const r=null===(t=e.metadata)||void 0===t?void 0:t.name,s=null===(a=null===(n=e.metadata)||void 0===n?void 0:n.annotations)||void 0===a?void 0:a["openshift.io/requester"];return Object($.b)(s)?j.Hb.ME:Object($.c)(s,r)?j.Hb.USER:Object($.d)({title:r})?j.Hb.SYSTEM:void 0},items:[{id:j.Hb.ME,title:O.a.t("public~Me")},{id:j.Hb.USER,title:O.a.t("public~User")},{id:j.Hb.SYSTEM,title:O.a.t("public~System"),hideIfEmpty:!0}]}],W=(e,t)=>{var n;const{labelKey:a,labelKind:r,weight:s,accessReview:o}=I.F.factory.Delete(e,t);let i,l,c=void 0;return"default"===t.metadata.name?i=e.label+" default cannot be deleted":"Terminating"===(null===(n=t.status)||void 0===n?void 0:n.phase)?i=e.label+" is already terminating":c=()=>Object(D.r)({kind:e,resource:t}),i&&(l=u.createElement("div",{className:"dropdown__disabled"},u.createElement(h.a,{content:i},u.createElement("span",null,O.a.t(a,r))))),{label:l,labelKey:a,labelKind:r,weight:s,callback:c,accessReview:o}},z=[I.F.factory.ModifyLabels,I.F.factory.ModifyAnnotations,I.F.factory.Edit,W],Q=()=>{const e=[{key:"memory",query:'sum by(namespace) (container_memory_working_set_bytes{container="",pod!=""})'},{key:"cpu",query:"namespace:container_cpu_usage:sum"}].map(({key:e,query:t})=>{const n=`${M.g}/api/v1/query?&query=${t}`;return Object(P.c)(n).then(({data:{result:t}})=>t.reduce((t,n)=>{const a=Number(n.value[1]);return r.a(t,[e,n.metric.namespace],a)},{}))});return Promise.all(e).then(e=>s.a({},...e)).catch(console.error)},J=Object.freeze({name:{classes:"",id:"name"},displayName:{classes:"co-break-word",id:"displayName"},status:{classes:"",id:"status"},requester:{classes:"",id:"requester"},memory:{classes:"",id:"memory"},cpu:{classes:"",id:"cpu"},created:{classes:"",id:"created"},description:{classes:"",id:"description"},labels:{classes:"",id:"labels"}}),Z=()=>[{title:O.a.t("public~Name"),id:J.name.id,sortField:"metadata.name",transforms:[p.a],props:{className:J.name.classes}},{title:O.a.t("public~Display name"),id:J.displayName.id,sortField:'metadata.annotations["openshift.io/display-name"]',transforms:[p.a],props:{className:J.displayName.classes}},{title:O.a.t("public~Status"),id:J.status.id,sortField:"status.phase",transforms:[p.a],props:{className:J.status.classes}},{title:O.a.t("public~Requester"),id:J.requester.id,sortField:"metadata.annotations.['openshift.io/requester']",transforms:[p.a],props:{className:J.requester.classes}},{title:O.a.t("public~Memory"),id:J.memory.id,sortFunc:"namespaceMemory",transforms:[p.a],props:{className:J.memory.classes}},{title:O.a.t("public~CPU"),id:J.cpu.id,sortFunc:"namespaceCPU",transforms:[p.a],props:{className:J.cpu.classes}},{title:O.a.t("public~Created"),id:J.created.id,sortField:"metadata.creationTimestamp",transforms:[p.a],props:{className:J.created.classes}},{title:O.a.t("public~Description"),id:J.description.id,sortField:"metadata.annotations.['openshift.io/description']",transforms:[p.a],props:{className:J.description.classes},additional:!0},{title:O.a.t("public~Labels"),id:J.labels.id,sortField:"metadata.labels",transforms:[p.a],props:{className:J.labels.classes},additional:!0},{title:"",props:{className:I.F.columnClass}}];Z.displayName="NamespacesTableHeader";const X=Object(C.Hb)(S.NamespaceModel),ee=()=>new Set(Z().reduce((e,t)=>(t.id&&!t.additional&&e.push(t.id),e),[])),te=({obj:e,customData:{tableColumns:t}})=>{var n,a,r;const{t:s}=Object(y.useTranslation)(),o=Object(E.useSelector)(({UI:e})=>e.getIn(["metrics","namespace"])),i=Object(j.dd)(e),l=Object(j.Bd)(e),c=null===(n=null==o?void 0:o.memory)||void 0===n?void 0:n[i],d=null===(a=null==o?void 0:o.cpu)||void 0===a?void 0:a[i],p=Object(j.Jc)(e),h=e.metadata.labels,b=(null==t?void 0:t.length)>0?new Set(t):ee();return u.createElement(u.Fragment,null,u.createElement(x.k,{className:J.name.classes},u.createElement(I.hb,{kind:"Namespace",name:e.metadata.name})),u.createElement(x.k,{className:J.displayName.classes,columns:b,columnID:J.displayName.id},u.createElement("span",{className:"co-break-word co-line-clamp"},G(e)||u.createElement("span",{className:"text-muted"},s("public~No display name")))),u.createElement(x.k,{className:m(J.status.classes,"co-break-word"),columns:b,columnID:J.status.id},u.createElement(j.cc,{status:null===(r=e.status)||void 0===r?void 0:r.phase})),u.createElement(x.k,{className:m(J.requester.classes,"co-break-word"),columns:b,columnID:J.requester.id},l||u.createElement("span",{className:"text-muted"},s("public~No requester"))),u.createElement(x.k,{className:J.memory.classes,columns:b,columnID:J.memory.id},c?Object(I.Ob)(c)+" MiB":"-"),u.createElement(x.k,{className:J.cpu.classes,columns:b,columnID:J.cpu.id},d?s("public~{{cores}} cores",{cores:Object(I.Pb)(d)}):"-"),u.createElement(x.k,{className:J.created.classes,columns:b,columnID:J.created.id},u.createElement(I.xb,{timestamp:e.metadata.creationTimestamp})),u.createElement(x.k,{className:J.description.classes,columns:b,columnID:J.description.id},u.createElement("span",{className:"co-break-word co-line-clamp"},p||u.createElement("span",{className:"text-muted"},s("public~No description")))),u.createElement(x.k,{className:J.labels.classes,columns:b,columnID:J.labels.id},u.createElement(I.L,{kind:"Namespace",labels:h})),u.createElement(x.k,{className:I.F.columnClass},u.createElement(I.gb,{actions:z,kind:"Namespace",resource:e})))},ne=()=>{const{t:e}=Object(y.useTranslation)();return u.createElement(I.h,{title:e("public~No Namespaces found"),Icon:g.a},e("public~No results were found for the requested Namespaces."))},ae=()=>{const{t:e}=Object(y.useTranslation)();return u.createElement(I.h,{title:e("public~No matching Namespaces"),Icon:g.a},e("public~No results match the filter criteria."))},re=e=>{var t;const{t:n}=Object(y.useTranslation)(),a=Object(E.useDispatch)(),[r]=Object(j.ff)(j.q,j.r,void 0,!0);u.useEffect(()=>{const e=()=>Q().then(e=>a(w.q(e)));e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[a]);const s=(null===(t=null==r?void 0:r[X])||void 0===t?void 0:t.length)>0?new Set(r[X]):null,o=u.useMemo(()=>({tableColumns:null==r?void 0:r[X]}),[r]);return u.createElement(x.j,Object.assign({},e,{activeColumns:s,columnManagementID:X,"aria-label":n("public~Namespaces"),Header:Z,Row:te,customData:o,virtualize:!0,EmptyMsg:ae,NoDataEmptyMsg:ne}))},se=e=>{var t;const{t:n}=Object(y.useTranslation)(),a=Object(K.a)(),[r]=Object(j.ff)(j.q,j.r,void 0,!0),s=(null===(t=null==r?void 0:r[X])||void 0===t?void 0:t.length)>0?new Set(r[X]):ee();return u.createElement(x.c,Object.assign({},e,{rowFilters:V(),ListComponent:re,canCreate:!0,createHandler:()=>a(),columnLayout:{columns:Z().map(e=>o.a(e,["title","additional","id"])),id:X,selectedColumns:s,type:n("public~Namespaces")}}))},oe=[I.F.factory.Edit,W],ie=Object(C.Hb)(S.ProjectModel),le=({showMetrics:e,showActions:t})=>[{title:O.a.t("public~Name"),id:J.name.id,sortField:"metadata.name",transforms:[p.a],props:{className:J.name.classes}},{title:O.a.t("public~Display name"),id:J.displayName.id,sortField:'metadata.annotations["openshift.io/display-name"]',transforms:[p.a],props:{className:J.displayName.classes}},{title:O.a.t("public~Status"),id:J.status.id,sortField:"status.phase",transforms:[p.a],props:{className:J.status.classes}},{title:O.a.t("public~Requester"),id:J.requester.id,sortField:"metadata.annotations.['openshift.io/requester']",transforms:[p.a],props:{className:J.requester.classes}},...e?[{title:O.a.t("public~Memory"),id:J.memory.id,sortFunc:"namespaceMemory",transforms:[p.a],props:{className:J.memory.classes}},{title:O.a.t("public~CPU"),id:J.cpu.id,sortFunc:"namespaceCPU",transforms:[p.a],props:{className:J.cpu.classes}}]:[],{title:O.a.t("public~Created"),id:J.created.id,sortField:"metadata.creationTimestamp",transforms:[p.a],props:{className:J.created.classes}},{title:O.a.t("public~Description"),id:J.description.id,sortField:"metadata.annotations.['openshift.io/description']",transforms:[p.a],props:{className:J.description.classes},additional:!0},{title:O.a.t("public~Labels"),id:J.labels.id,sortField:"metadata.labels",transforms:[p.a],props:{className:J.labels.classes},additional:!0},...t?[{title:"",props:{className:I.F.columnClass}}]:[]],ce=({project:e})=>{const t=Object(E.useDispatch)(),[,n]=Object(j.ff)(j.gb,j.fb),a=new URL(window.location.href),r=new URLSearchParams(a.search),s=a.pathname;r.has("project-name")&&r.delete("project-name");const o={search:"?"+r.toString(),hash:a.hash},i=w.b(e.metadata.name,s,o);return u.createElement("span",{className:"co-resource-item co-resource-item--truncate"},u.createElement(I.fb,{kind:"Project"}),u.createElement(k.Link,{to:i,className:"co-resource-item__resource-name",onClick:a=>{Object(j.Sd)(a)||(n(e.metadata.name),sessionStorage.setItem(j.fb,e.metadata.name),t(T.b(Object(C.Hb)(S.ProjectModel),"project-name","")))}},e.metadata.name))},ue=()=>le({showMetrics:!1,showActions:!1}),de=({obj:e,customData:t={}})=>{var n,a,r;const{t:s}=Object(y.useTranslation)(),o=Object(E.useSelector)(({UI:e})=>e.getIn(["metrics","namespace"])),i=Object(j.dd)(e),l=Object(j.Bd)(e),{ProjectLinkComponent:c,actionsEnabled:d=!0,showMetrics:p,showActions:h,isColumnManagementEnabled:b=!0,tableColumns:v}=t,f=null===(n=null==o?void 0:o.memory)||void 0===n?void 0:n[i],g=null===(a=null==o?void 0:o.cpu)||void 0===a?void 0:a[i],O=Object(j.Jc)(e),_=e.metadata.labels,k=b?(null==v?void 0:v.length)>0?new Set(v):(({showMetrics:e,showActions:t})=>new Set(le({showMetrics:e,showActions:t}).reduce((e,t)=>(t.id&&!t.additional&&e.push(t.id),e),[])))({showMetrics:p,showActions:h}):null;return u.createElement(u.Fragment,null,u.createElement(x.k,{className:J.name.classes},t&&c?u.createElement(c,{project:e}):u.createElement("span",{className:"co-resource-item"},u.createElement(I.hb,{kind:"Project",name:e.metadata.name}))),u.createElement(x.k,{className:J.displayName.classes,columns:k,columnID:J.displayName.id},u.createElement("span",{className:"co-break-word co-line-clamp"},G(e)||u.createElement("span",{className:"text-muted"},s("public~No display name")))),u.createElement(x.k,{className:J.status.classes,columns:k,columnID:J.status.id},u.createElement(j.cc,{status:null===(r=e.status)||void 0===r?void 0:r.phase})),u.createElement(x.k,{className:m(J.requester.classes,"co-break-word"),columns:k,columnID:J.requester.id},l||u.createElement("span",{className:"text-muted"},s("public~No requester"))),p&&u.createElement(u.Fragment,null,u.createElement(x.k,{className:J.memory.classes,columns:k,columnID:J.memory.id},f?Object(I.Ob)(f)+" MiB":"-"),u.createElement(x.k,{className:J.cpu.classes,columns:k,columnID:J.cpu.id},g?s("public~{{cores}} cores",{cores:Object(I.Pb)(g)}):"-")),u.createElement(x.k,{className:J.created.classes,columns:k,columnID:J.created.id},u.createElement(I.xb,{timestamp:e.metadata.creationTimestamp})),b&&u.createElement(u.Fragment,null,u.createElement(x.k,{className:J.description.classes,columns:k,columnID:J.description.id},u.createElement("span",{className:"co-break-word co-line-clamp"},O||u.createElement("span",{className:"text-muted"},s("public~No description")))),u.createElement(x.k,{className:J.labels.classes,columns:k,columnID:J.labels.id},u.createElement(I.L,{labels:_,kind:"Project"}))),d&&u.createElement(x.k,{className:I.F.columnClass},u.createElement(I.gb,{actions:oe,kind:"Project",resource:e})))};de.displayName="ProjectTableRow";const me=e=>{const{t:t}=Object(y.useTranslation)(),n=u.useMemo(()=>({ProjectLinkComponent:ce,actionsEnabled:!1,isColumnManagementEnabled:!1}),[]);return u.createElement(x.j,Object.assign({},e,{"aria-label":t("public~Projects"),Header:ue,Row:de,customData:n,virtualize:!0}))},pe=()=>le({showMetrics:!0,showActions:!0}),he=()=>le({showMetrics:!1,showActions:!0}),be=()=>{const{t:e}=Object(y.useTranslation)(),t=Object(j.Fe)(j.O.CAN_CREATE_NS),n=Object(j.Fe)(j.O.CAN_CREATE_PROJECT),a=t||n;return u.createElement(I.h,{title:e("public~Welcome to OpenShift")},u.createElement(L.a,{canCreate:a}))},ve=()=>{const{t:e}=Object(y.useTranslation)();return u.createElement(I.h,{title:e("public~No matching Projects"),icon:g.a},e("public~No results match the filter criteria."))},fe=e=>{var t,{data:n}=e,a=H(e,["data"]);const{t:r}=Object(y.useTranslation)(),s=Object(E.useDispatch)(),o=Object(j.Fe)(j.O.CAN_GET_NS),[i]=Object(j.ff)(j.q,j.r,void 0,!0),l=Object(j.Ue)()&&o&&window.screen.width>=1200,c=u.useMemo(()=>({showMetrics:l,tableColumns:null==i?void 0:i[ie]}),[l,i]);u.useEffect(()=>{if(l){const e=()=>Q().then(e=>s(w.q(e)));e();const t=setInterval(e,3e4);return()=>clearInterval(t)}},[s,l]);const d=(null===(t=null==i?void 0:i[ie])||void 0===t?void 0:t.length)>0?new Set(i[ie]):null;return Object(U.c)(o)?null:u.createElement(x.j,Object.assign({},a,{activeColumns:d,columnManagementID:ie,"aria-label":r("public~Projects"),data:n,Header:l?pe:he,Row:de,NoDataEmptyMsg:be,EmptyMsg:ve,customData:c,virtualize:!0}))},ge=e=>{var t;const{t:n}=Object(y.useTranslation)(),a=Object(Y.a)(),r=Object(j.Fe)(j.O.CAN_GET_NS),s=Object(j.Fe)(j.O.CAN_CREATE_PROJECT),[i]=Object(j.ff)(j.q,j.r,void 0,!0),l=Object(j.Ue)()&&r&&window.screen.width>=1200,c=l;return u.createElement(x.c,Object.assign({},e,{rowFilters:V(),ListComponent:fe,canCreate:s,createHandler:()=>a(),filterLabel:n("public~by name or display name"),skipAccessReview:!0,textFilter:"project-name",kind:"Project",columnLayout:{columns:le({showMetrics:l,showActions:c}).map(e=>o.a(e,["title","additional","id"])),id:ie,selectedColumns:(null===(t=null==i?void 0:i[ie])||void 0===t?void 0:t.length)>0?new Set(i[ie]):null,type:n("public~Project")}}))},Ee=e=>{const[t,n]=u.useState(!0),[a,r]=u.useState([]),[s,o]=u.useState(!1),{t:i}=Object(y.useTranslation)(),{namespace:l,canViewSecrets:c}=e;u.useEffect(()=>{Object(C.kb)(S.ServiceAccountModel,"default",l.metadata.name,{}).then(e=>{var t;n(!1),r(null!==(t=e.imagePullSecrets)&&void 0!==t?t:[]),o(!1)}).catch(e=>{n(!1),r([]),o(!0),console.error("Error getting default ServiceAccount",e)})},[l.metadata.name]);const d=()=>Object(D.k)({namespace:l,pullSecret:void 0});return u.createElement(u.Fragment,null,u.createElement("dt",null,i("public~Default pull Secret",{count:a.length})),u.createElement("dd",null,t?u.createElement(I.T,null):s?u.createElement(b.a,{variant:"danger",isInline:!0,title:i("Error loading default pull Secrets")}):a.length>0?a.map(e=>u.createElement("div",{key:e.name},u.createElement(I.hb,{kind:"Secret",name:e.name,namespace:l.metadata.name,linkTo:c}))):u.createElement(v.a,{variant:"link",type:"button",isInline:!0,onClick:d},i("public~Not configured"),u.createElement(_.a,{className:"co-icon-space-l pf-v5-c-button-icon--plain"}))))},ye=({ns:e})=>{const{t:t}=Object(y.useTranslation)();return u.createElement("div",{className:"row"},u.createElement("div",{className:"col-md-6 col-sm-12"},u.createElement(M.b,{title:t("public~CPU usage"),humanize:I.Yb,namespace:e.metadata.name,query:`namespace:container_cpu_usage:sum{namespace='${e.metadata.name}'}`})),u.createElement("div",{className:"col-md-6 col-sm-12"},u.createElement(M.b,{title:t("public~Memory usage"),humanize:I.Wb,byteDataType:R.a.BinaryBytes,namespace:e.metadata.name,query:`sum by(namespace) (container_memory_working_set_bytes{namespace="${e.metadata.name}",container="",pod!=""})`})))},Oe=({ns:e})=>{const{t:t}=Object(y.useTranslation)();return u.createElement(M.c,{title:t("public~Memory usage by pod (top 10)"),namespace:e.metadata.name,query:`sort_desc(topk(10, sum by (pod)(container_memory_working_set_bytes{container="",pod!="",namespace="${e.metadata.name}"})))`,humanize:I.Wb,metric:"pod"})},_e=({ns:e})=>{const{t:t}=Object(y.useTranslation)();return Object(j.Ue)()?u.createElement("div",{className:"co-m-pane__body"},u.createElement(I.ob,{text:t("public~Resource usage")}),u.createElement(ye,{ns:e}),u.createElement(Oe,{ns:e})):null},ke=({ns:e})=>{var t,n,a;const{t:r}=Object(y.useTranslation)(),s=G(e),o=Object(j.Jc)(e),i=Object(j.Bd)(e),l=null===(n=null===(t=e.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n["maistra.io/member-of"],c=Object(I.Dc)({group:S.SecretModel.apiGroup,resource:S.SecretModel.plural,verb:"patch",namespace:e.metadata.name});return u.createElement("div",{className:"row"},u.createElement("div",{className:"col-sm-6 col-xs-12"},u.createElement(I.lb,{resource:e,showLabelEditor:"Namespace"===e.kind},u.createElement("dt",null,r("public~Display name")),u.createElement("dd",{className:m({"text-muted":!s})},s||r("public~No display name")),u.createElement("dt",null,r("public~Description")),u.createElement("dd",null,u.createElement("p",{className:m({"text-muted":!o,"co-pre-wrap":o,"co-namespace-summary__description":o})},o||r("public~No description"))),i&&u.createElement("dt",null,"Requester"),i&&u.createElement("dd",null,i))),u.createElement("div",{className:"col-sm-6 col-xs-12"},u.createElement("dl",{className:"co-m-pane__details"},u.createElement(I.r,{label:r("public~Status"),obj:e,path:"status.phase"},u.createElement(j.cc,{status:null===(a=e.status)||void 0===a?void 0:a.phase})),u.createElement(Ee,{namespace:e,canViewSecrets:c}),u.createElement("dt",null,r("public~NetworkPolicies")),u.createElement("dd",null,u.createElement(k.Link,{to:`/k8s/ns/${e.metadata.name}/networkpolicies`},r("public~NetworkPolicies"))),l&&u.createElement(u.Fragment,null,u.createElement("dt",null,r("public~Service mesh")),u.createElement("dd",null,u.createElement(j.X,null)," ",r("public~Service mesh enabled"))))))},je=({obj:e,customData:t})=>{const{t:n}=Object(y.useTranslation)(),[a]=Object(N.jc)(),[r]=Object(q.a)({isList:!0,kind:Object(C.Hb)(S.ConsoleLinkModel),optional:!0}),s=Object(B.b)(e,r);return u.createElement("div",null,"dev"===a&&u.createElement(d.b,null,u.createElement("title",null,n("public~Project details"))),u.createElement("div",{className:"co-m-pane__body"},!(null==t?void 0:t.hideHeading)&&u.createElement(I.ob,{text:n("public~{{kind}} details",{kind:e.kind})}),u.createElement(ke,{ns:e})),"Namespace"===e.kind&&u.createElement(_e,{ns:e}),!i.a(s)&&u.createElement("div",{className:"co-m-pane__body"},u.createElement(I.ob,{text:n("public~Launcher")}),u.createElement("ul",{className:"pf-v5-c-list pf-m-plain"},l.a(c.a(s,"spec.text"),e=>u.createElement("li",{key:e.metadata.uid},u.createElement(I.z,{href:e.spec.href,text:e.spec.text}))))))},Re=({obj:{metadata:e}})=>u.createElement(A.RoleBindingsPage,{createPath:`/k8s/ns/${e.name}/rolebindings/~new`,namespace:e.name,showTitle:!1}),Te=e=>u.createElement(x.a,Object.assign({},e,{menuActions:z,pages:[I.mc.details(je),I.mc.editYaml(),I.mc.roles(Re)]})),Ne=e=>u.createElement(x.a,Object.assign({},e,{menuActions:oe,pages:[{href:"",nameKey:"public~Overview",component:B.a},{href:"details",nameKey:"public~Details",component:je},I.mc.editYaml(),I.mc.workloads(F.a),I.mc.roles(Re)]}))},2231:function(e,t,n){"use strict";n.r(t),n.d(t,"getStatusGroups",(function(){return m})),n.d(t,"getPodStatusGroups",(function(){return p})),n.d(t,"getNodeStatusGroups",(function(){return h})),n.d(t,"getPVCStatusGroups",(function(){return b})),n.d(t,"getPVStatusGroups",(function(){return v})),n.d(t,"getVSStatusGroups",(function(){return f}));var a=n(2233),r=n(2238),s=n(8),o=n(475);const i={[o.a.NOT_MAPPED]:["Running","Succeeded"],[o.a.ERROR]:["CrashLoopBackOff","Failed"],[o.a.PROGRESS]:["Terminating","Pending"],[o.a.WARN]:["Unknown"]},l={[o.a.NOT_MAPPED]:["Bound"],[o.a.ERROR]:["Lost"],[o.a.PROGRESS]:["Pending"]},c={[o.a.NOT_MAPPED]:["Available","Bound"],[o.a.PROGRESS]:["Released"],[o.a.ERROR]:["Failed"]},u={[o.a.NOT_MAPPED]:["Ready"],[o.a.PROGRESS]:["Not Ready"]},d={[o.a.NOT_MAPPED]:["Ready"],[o.a.PROGRESS]:["Pending"],[o.a.ERROR]:["Error"]},m=(e,t,n,a)=>{const r={[o.a.UNKNOWN]:{statusIDs:[],count:0}};return Object.keys(t).forEach(e=>{r[e]={statusIDs:[...t[e]],count:0,filterType:a}}),e.forEach(e=>{const a=n(e),s=Object.keys(t).find(e=>t[e].includes(a))||o.a.UNKNOWN;r[s].count++}),r},p=e=>m(e,i,s.Ab,"pod-status"),h=e=>m(e,u,a.a,"node-status"),b=e=>m(e,l,e=>e.status.phase,"pvc-status"),v=e=>m(e,c,e=>e.status.phase,"pv-status"),f=e=>m(e,d,r.b,"snapshot-status")},4359:function(e,t,n){"use strict";n.r(t);var a=n(5590);n.d(t,"toDefaultSecretType",(function(){return a.d})),n.d(t,"toTypeAbstraction",(function(){return a.e})),n.d(t,"generateSecret",(function(){return a.b})),n.d(t,"determineSecretType",(function(){return a.a})),n.d(t,"getImageSecretKey",(function(){return a.c})),n.d(t,"useSecretTitle",(function(){return a.g})),n.d(t,"useSecretDescription",(function(){return a.f}));var r=n(869);n.d(t,"SecretTypeAbstraction",(function(){return r.c})),n.d(t,"AUTHS_KEY",(function(){return r.a})),n.d(t,"SecretType",(function(){return r.b}));var s=n(5598);n.d(t,"SecretFormWrapper",(function(){return s.a}));var o=n(5604);n.d(t,"PullSecretForm",(function(){return o.a}));var i=n(5606);n.d(t,"PullSecretCredentialEntry",(function(){return i.a}));var l=n(5605);n.d(t,"CreateConfigSubform",(function(){return l.a}));var c=n(5607);n.d(t,"UploadConfigSubform",(function(){return c.a}));var u=n(5608);n.d(t,"WebHookSecretForm",(function(){return u.a}));var d=n(5601);n.d(t,"SourceSecretForm",(function(){return d.a}));var m=n(5602);n.d(t,"BasicAuthSubform",(function(){return m.a}));var p=n(5603);n.d(t,"SSHAuthSubform",(function(){return p.a}));var h=n(5609);n.d(t,"GenericSecretForm",(function(){return h.a}));var b=n(5610);n.d(t,"KeyValueEntryFormWithTranslation",(function(){return b.b})),n.d(t,"KeyValueEntryForm",(function(){return b.a}));var v=n(5636);n.d(t,"SecretLoadingWrapper",(function(){return v.b})),n.d(t,"EditSecret",(function(){return v.a}));var f=n(5637);n.d(t,"CreateSecret",(function(){return f.a}));var g=n(5593);n.d(t,"DroppableFileInput",(function(){return g.a}));var E=n(5600);n.d(t,"SecretSubForm",(function(){return E.a}));n(5638)},5410:function(e,t,n){"use strict";n.r(t),n.d(t,"confirmModal",(function(){return c}));var a=n(0),r=n(7),s=n(21),o=n(118),i=n(5);class l extends i.bb{constructor(e){super(e),this._submit=this._submit.bind(this),this._cancel=this.props.cancel.bind(this)}_submit(e){e.preventDefault(),this.handlePromise(this.props.executeFn(null,{supressNotifications:!0})).then(this.props.close)}render(){const{title:e,titleKey:t,message:n,messageKey:s,btnText:i,btnTextKey:l,cancelText:c,cancelTextKey:u,submitDanger:d}=this.props;return a.createElement(r.Translation,null,r=>a.createElement("form",{onSubmit:this._submit,name:"form",className:"modal-content"},a.createElement(o.d,null,t?r(t):e),a.createElement(o.a,null,s?r(s):n),a.createElement(o.c,{errorMessage:this.state.errorMessage,inProgress:this.state.inProgress,submitText:l?r(l):i||r("Confirm"),cancel:this._cancel,cancelText:u?r(u):c||r("Cancel"),submitDanger:d})))}}l.propTypes={btnText:s.node,btnTextKey:s.string,cancel:s.func.isRequired,cancelText:s.node,cancelTextKey:s.string,close:s.func.isRequired,executeFn:s.func.isRequired,message:s.node,messageKey:s.string,title:s.node,titleKey:s.string,submitDanger:s.bool};const c=Object(o.f)(l)},5586:function(e,t,n){"use strict";n.r(t);var a=n(5622);n.d(t,"PipelineModel",(function(){return a.f})),n.d(t,"PipelineModelV1Beta1",(function(){return a.g})),n.d(t,"PipelineRunModel",(function(){return a.i})),n.d(t,"PipelineRunModelV1Beta1",(function(){return a.j})),n.d(t,"TaskModel",(function(){return a.l})),n.d(t,"TaskModelV1Beta1",(function(){return a.m})),n.d(t,"TaskRunModel",(function(){return a.n})),n.d(t,"TaskRunModelV1Beta1",(function(){return a.o})),n.d(t,"CustomRunModelV1Beta1",(function(){return a.d})),n.d(t,"PipelineResourceModel",(function(){return a.h})),n.d(t,"ClusterTaskModel",(function(){return a.a})),n.d(t,"ConditionModel",(function(){return a.c})),n.d(t,"TriggerBindingModel",(function(){return a.s})),n.d(t,"ClusterTriggerBindingModel",(function(){return a.b})),n.d(t,"TriggerTemplateModel",(function(){return a.t})),n.d(t,"EventListenerModel",(function(){return a.e})),n.d(t,"RepositoryModel",(function(){return a.k})),n.d(t,"TektonConfigModel",(function(){return a.p})),n.d(t,"TektonHubModel",(function(){return a.q})),n.d(t,"TektonResultModel",(function(){return a.r}))},5587:function(e,t,n){"use strict";n(5639);var a=n(5640);n.d(t,"d",(function(){return a.a}));var r=n(5611);n.d(t,"b",(function(){return r.a})),n.d(t,"c",(function(){return r.b})),n.d(t,"e",(function(){return r.c}));var s=n(5641);n.d(t,"a",(function(){return s.a})),n.d(t,"f",(function(){return s.b}))},5588:function(e,t,n){"use strict";var a,r,s,o,i,l,c,u,d;n.d(t,"r",(function(){return a})),n.d(t,"q",(function(){return r})),n.d(t,"v",(function(){return s})),n.d(t,"t",(function(){return o})),n.d(t,"w",(function(){return i})),n.d(t,"u",(function(){return l})),n.d(t,"o",(function(){return c})),n.d(t,"x",(function(){return u})),n.d(t,"p",(function(){return d})),n.d(t,"i",(function(){return m})),n.d(t,"s",(function(){return p})),n.d(t,"m",(function(){return h})),n.d(t,"l",(function(){return b})),n.d(t,"k",(function(){return v})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return E})),n.d(t,"z",(function(){return y})),n.d(t,"y",(function(){return O})),n.d(t,"j",(function(){return _})),n.d(t,"g",(function(){return k})),n.d(t,"h",(function(){return j})),n.d(t,"n",(function(){return R})),n.d(t,"f",(function(){return T})),n.d(t,"d",(function(){return N})),n.d(t,"e",(function(){return S})),function(e){e.triggers="triggers.tekton.dev/eventlistener"}(a||(a={})),function(e){e.user="pipeline.openshift.io/started-by"}(r||(r={})),function(e){e.minVersion=" tekton.dev/pipelines.minVersion",e.tags="tekton.dev/tags",e.categories="tekton.dev/categories",e.installedFrom="openshift.io/installed-from",e.semVersion="openshift.io/sem-version"}(s||(s={})),function(e){e.redhat="Red Hat",e.community="Community",e.tektonHub="TektonHub",e.artifactHub="ArtifactHub"}(o||(o={})),function(e){e.providerType="operator.tekton.dev/provider-type",e.version="app.kubernetes.io/version"}(i||(i={})),function(e){e.pipeline="tekton.dev/pipeline",e.pipelinerun="tekton.dev/pipelineRun",e.taskrun="tekton.dev/taskRun",e.pipelineTask="tekton.dev/pipelineTask"}(l||(l={})),function(e){e.git="git",e.image="image",e.cluster="cluster",e.storage="storage"}(c||(c={})),function(e){e.NoWorkspace="noWorkspace",e.EmptyDirectory="emptyDirectory",e.ConfigMap="configMap",e.Secret="secret",e.PVC="pvc",e.VolumeClaimTemplate="volumeClaimTemplate"}(u||(u={})),function(e){e.Git="git",e.Image="docker"}(d||(d={}));d.Git,d.Image;const m="1.4.0",p="1.6.0",h="1.5.2",b="pipeline",v="bridge/pipeline-run-auto-start-failed",f=275,g=375,E=60,y="pipeline.openshift.io/preferredName",O="chains.tekton.dev/signed",_="openshift-pipelines",k="openshift",j="config";var R;!function(e){e.PIPELINE_TASK_LEVEL="pipeline/task",e.PIPELINERUN_TASKRUN_LEVEL="pipelinerun/taskrun",e.UNSUPPORTED_LEVEL="unsupported",e.UNSIMPLIFIED_METRICS_LEVEL="unsimplified"}(R||(R={}));const T="FLAG_TEKTON_V1_ENABLED",N="PIPELINES_OPERATOR_VERSION_1_16_OR_NEWER",S="PIPELINES_OPERATOR_VERSION_1_17_OR_NEWER"},5589:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"j",(function(){return g})),n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return y})),n.d(t,"f",(function(){return O})),n.d(t,"c",(function(){return _})),n.d(t,"i",(function(){return k})),n.d(t,"k",(function(){return j})),n.d(t,"g",(function(){return R})),n.d(t,"h",(function(){return T})),n.d(t,"m",(function(){return N})),n.d(t,"b",(function(){return S})),n.d(t,"l",(function(){return P}));var a=n(5596),r=n(29),s=n(117),o=n(16),i=n(22),l=n(279),c=n(57),u=n(2222),d=n(8),m=n(975),p=n(5652),h=n(5659),b=n(5625),v=n(1400);const f=["deployments","deploymentConfigs","daemonSets","statefulSets","jobs","cronJobs","pods"],g=({FLAGS:e})=>e.get(m.a),E=e=>{var t,n,a;const r=s.a(e,["metadata.name","che"]);return{cheURL:null===(t=null==r?void 0:r.spec)||void 0===t?void 0:t.href,cheIconURL:null===(a=null===(n=null==r?void 0:r.spec)||void 0===n?void 0:n.applicationMenu)||void 0===a?void 0:a.imageURL}},y=(e,t,n,r)=>{if(!e)return null;const s=((e,t,n)=>{const a=`https://${e.resource}/${e.owner}/${e.name}`;if(!t)return a;const r=n?"/"+n.replace(/^\//,""):"";return e.resource.includes("github")?`${a}/tree/${t}${r}`:e.resource.includes("gitlab")?`${a}/-/tree/${t}${r}`:e.resource.includes("gitea")?`${a}/src/branch/${t}${r}`:e.resource.includes("bitbucket")&&!t.includes("/")?`${a}/src/${t}${r}`:a})(a(e),t,r);return n?`${n}/f?url=${s}&policies.create=peruser`:s},O=(e,t)=>{var n,a;return(null===(a=null===(n=s.a(e,["metadata.name","kiali-namespace-"+t]))||void 0===n?void 0:n.spec)||void 0===a?void 0:a.href)||""},_=(e,t)=>t?e.filter(e=>o.a(e,["metadata","labels","app.kubernetes.io/part-of"])===t):e,k=(e,t)=>t.length>0&&!i.a(t[0].spec)?Object(u.c)(t[0]):null,j=e=>{var t;return e?e.resource||(null===(t=e.resources)||void 0===t?void 0:t.obj):null},R=e=>{var t;return(null===(t=e)||void 0===t?void 0:t.getResource())||j(null==e?void 0:e.getData())},T=e=>e instanceof p.a?e.getResourceKind():Object(d.Db)(j(null==e?void 0:e.getData())),N=(e,t)=>{const n=null==e?void 0:e.getData(),a=R(e);if(!e||!a||!l.a(n.resources))return Promise.reject();const s=[],o=[];s.push(a),e.getType()===h.d&&c.a(n.groupResources,e=>{s.push(e.resource)});for(const e of s){const n=Object(d.vb)(Object(d.Db)(e));if(!n)return Promise.reject(new Error(r.a.t("topology~Unable to update application, invalid resource type: {{kind}}",{kind:e.kind})));o.push(Object(b.c)(n,e,t))}return Promise.all(o)},S=(e,t,n=null)=>e&&t&&e!==t?Object(v.a)(e,t,n):Promise.reject(new Error(r.a.t("topology~Can not create a connection from a node to itself."))),P=e=>{const t=R(e.getSource()),n=R(e.getTarget());return t&&n?Object(v.f)(t,n):Promise.reject()}},5590:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"f",(function(){return b}));var a=n(279),r=n(160),s=n(107),o=n(1404),i=n(7),l=n(869);const c=e=>{switch(e){case l.c.source:return l.b.basicAuth;case l.c.image:return l.b.dockerconfigjson;default:return l.b.opaque}},u=e=>{const{data:t,type:n}=e;switch(n){case l.b.basicAuth:case l.b.sshAuth:return l.c.source;case l.b.dockerconfigjson:case l.b.dockercfg:return l.c.image;default:return(null==t?void 0:t[o.WebHookSecretKey])&&1===a.a(t)?l.c.webhook:l.c.generic}},d=()=>{const e=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e()+e()+e()+e()},m=e=>{const t=r.a(e).sort();return s.a(t,["tls.crt","tls.key"])?l.b.tls:s.a(t,["ca.crt","namespace","service-ca.crt","token"])?l.b.serviceAccountToken:s.a(t,[".dockercfg"])?l.b.dockercfg:s.a(t,[".dockerconfigjson"])?l.b.dockerconfigjson:s.a(t,["password","username"])?l.b.basicAuth:s.a(t,["ssh-privatekey"])?l.b.sshAuth:l.b.opaque},p=e=>{switch(e){case l.b.dockercfg:return".dockercfg";case l.b.dockerconfigjson:return".dockerconfigjson";default:return e}},h=(e,t)=>{const{t:n}=Object(i.useTranslation)();switch(t){case l.c.generic:return n(e?"public~Create key/value secret":"public~Edit key/value secret");case l.c.image:return n(e?"public~Create image pull secret":"public~Edit image pull secret");default:return n(e?"public~Create {{secretType}} secret":"public~Edit {{secretType}} secret",{secretType:t})}},b=e=>{const{t:t}=Object(i.useTranslation)();switch(e){case l.c.generic:return t("public~Key/value secrets let you inject sensitive data into your application as files or environment variables.");case l.c.source:return t("public~Source secrets let you authenticate against a Git server.");case l.c.image:return t("public~Image pull secrets let you authenticate against a private image registry.");case l.c.webhook:return t("public~Webhook secrets let you authenticate a webhook trigger.");default:return null}}},5591:function(e,t,n){"use strict";var a=n(5587);n.d(t,"b",(function(){return a.b})),n.d(t,"c",(function(){return a.c})),n.d(t,"d",(function(){return a.d}));var r=n(5642);n.d(t,"e",(function(){return r.a}));var s=n(5645);n.d(t,"a",(function(){return s.a}))},5592:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(5643),r=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((a=a.apply(e,t||[])).next())}))};class s{constructor(e){this.gitsource=e}detectBuildTypes(){return r(this,void 0,void 0,(function*(){try{const e=yield this.getRepoFileList(),t=Object(a.a)(e.files);if(e.files.includes("package.json")){const e=yield this.getPackageJsonContent();if(Object(a.b)(e))return t.sort((e,t)=>"modern-webapp"===t.buildType?1:"modern-webapp"===e.buildType?-1:0)}return t}catch(e){return[]}}))}}},5593:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(0),r=n(282);const s=e=>a.createElement(r.a,Object.assign({loader:()=>Promise.resolve().then(n.bind(null,2223)).then(e=>e.DroppableFileInput)},e))},5595:function(e,t,n){"use strict";var a=n(5626);n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return a.b})),n.d(t,"d",(function(){return a.c}));n(5627);var r=n(5628);n.d(t,"e",(function(){return r.a}));n(5629),n(5630);var s=n(5631);n.d(t,"f",(function(){return s.a}));var o=n(5632);n.d(t,"a",(function(){return o.a}))},5597:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u}));var a=n(380),r=n(83),s=n(437),o=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((a=a.apply(e,t||[])).next())}))};const i="/api/dev-console/proxy/internet",l=e=>Object.keys(e).reduce((t,n)=>(t[n]=[e[n]],t),{}),c=e=>o(void 0,void 0,void 0,(function*(){const t=yield r.consoleFetchJSON.post(i,e);if(!t.statusCode)throw new Error("Unexpected proxy response: Status code is missing!");if(t.statusCode<200||t.statusCode>=300)throw new s.a("Unexpected status code: "+t.statusCode,t.statusCode,null,t);return t})),u=e=>c(e).then(e=>(e=>{try{JSON.parse(e)}catch(e){return!1}return!0})(e.body)?JSON.parse(e.body):Object(a.safeLoad)(e.body))},5598:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var a=n(501),r=n(838),s=n(2324),o=n(16),i=n(640),l=n(1256),c=n(0),u=n(137),d=n(7),m=n(320),p=n(966),h=n(19),b=n(14),v=n(8),f=n(5),g=n(118),E=n(10),y=n(5590),O=n(5600);const _=e=>{const{isCreate:t,modal:n,onCancel:_}=e,{t:k}=Object(d.useTranslation)(),j=Object(b.useNavigate)(),R=Object(b.useParams)(),T=a.a(e.obj,["metadata","type"]),N=Object(y.d)(e.secretTypeAbstraction),S=r.a({},e.fixed,T,{apiVersion:"v1",data:{},kind:"Secret",metadata:{name:""},type:N}),[P]=c.useState(e.secretTypeAbstraction),[C,w]=c.useState(S),[x,I]=c.useState(!1),[D,A]=c.useState(),[M,U]=c.useState(s.a(o.a(e.obj,"data"),e=>e?m.Base64.decode(e):"")),[L,F]=c.useState({}),[B,q]=c.useState(!1),$=Object(y.g)(t,P),K=Object(y.f)(P),Y=()=>j(`/k8s/ns/${R.ns}/core~v1~Secret`),H=e=>{U(Object.assign({},null==e?void 0:e.stringData)),F(Object.assign({},null==e?void 0:e.base64StringData))},G=e=>{A(e),I(!1)},V=e=>{const t=e.target.value,n=i.a(C);n.metadata.name=t,w(n)},W=n=>{n.preventDefault();const{metadata:a}=C;I(!0);const r=Object.assign(Object.assign({},s.a(M,e=>m.Base64.encode(e))),L),o=l.a({},C,{data:r},t?{type:Object(y.a)(M)}:{});(t?Object(v.jb)(E.SecretModel,o):Object(v.rb)(E.SecretModel,o,a.namespace,o.metadata.name)).then(t=>{I(!1),e.onSave&&e.onSave(t.metadata.name),e.modal||j(Object(f.sc)(t,Object(v.Db)(t)))},e=>{A(e.message),I(!1)})},z=()=>{var n;return c.createElement(c.Fragment,null,c.createElement("fieldset",{disabled:!t},c.createElement("div",{className:"form-group"},c.createElement("label",{className:"control-label co-required",htmlFor:"secret-name"},k("public~Secret name")),c.createElement("div",null,c.createElement("input",{className:"pf-v5-c-form-control",type:"text",onChange:V,value:null===(n=null==C?void 0:C.metadata)||void 0===n?void 0:n.name,"aria-describedby":"secret-name-help",id:"secret-name","data-test":"secret-name",required:!0}),c.createElement("p",{className:"help-block",id:"secret-name-help"},k("public~Unique name of the new secret."))))),c.createElement(O.a,{typeAbstraction:e.secretTypeAbstraction,onChange:H,onError:G,onFormDisable:e=>q(e),stringData:M,secretType:C.type,isCreate:t}))};return n?c.createElement("form",{className:"co-create-secret-form modal-content",onSubmit:W},c.createElement(g.d,null,$),c.createElement(g.a,null,z()),c.createElement(g.c,{errorMessage:D||"",inProgress:x,submitText:k("public~Create"),cancel:_||Y})):c.createElement("div",{className:"co-m-pane__form"},c.createElement(u.a,null,c.createElement("title",null,$)),c.createElement(f.Z,{title:$,helpText:K}),c.createElement("div",{className:"co-m-pane__body"},c.createElement("form",{className:"co-m-pane__body-group co-create-secret-form",onSubmit:W},z(),c.createElement(f.g,{errorMessage:D,inProgress:x},c.createElement(p.a,{className:"pf-v5-c-form"},c.createElement(h.a,{type:"submit","data-test":"save-changes",isDisabled:B,variant:"primary",id:"save-changes"},e.saveButtonText||k("public~Create")),c.createElement(h.a,{type:"button",variant:"secondary",id:"cancel",onClick:_||Y},k("public~Cancel")))))))}},5599:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"k",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"m",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"i",(function(){return m})),n.d(t,"l",(function(){return p})),n.d(t,"n",(function(){return h})),n.d(t,"f",(function(){return b})),n.d(t,"h",(function(){return v})),n.d(t,"b",(function(){return f})),n.d(t,"g",(function(){return g}));var a,r=n(5591),s=n(10);!function(e){e.setAccessLoading="setAccessLoading",e.setLoading="setLoading",e.setSelectedImageStream="setSelectedImageStream"}(a||(a={}));const o={[r.b.GITHUB]:"GitHub",[r.b.GITLAB]:"GitLab",[r.b.GITEA]:"Gitea",[r.b.BITBUCKET]:"Bitbucket",[r.b.UNSURE]:"Other"};var i,l,c,u;!function(e){e.git="git",e.devfile="devfile",e.docker="docker",e.s2i="s2i"}(i||(i={})),function(e){e.OpenShift="openshift",e.Kubernetes="kubernetes",e.KnativeService="knative"}(l||(l={})),function(e){e.BUILDS="BUILDS",e.SHIPWRIGHT_BUILD="SHIPWRIGHT_BUILD",e.PIPELINES="PIPELINES",e.DISABLED="DISABLED"}(c||(c={})),function(e){e["Node.js"]="nodejs",e.Quarkus="quarkus",e.dotnet="dotnet",e.Python="python",e.Go="golang",e.springboot="spring-boot"}(u||(u={}));const d={[l.OpenShift]:s.DeploymentConfigModel.labelKey,[l.Kubernetes]:s.DeploymentModel.labelKey,[l.KnativeService]:"devconsole~Serverless Deployment"},m={[c.BUILDS]:"devconsole~BuildConfig",[c.SHIPWRIGHT_BUILD]:"devconsole~Builds for OpenShift (Shipwright)",[c.PIPELINES]:"devconsole~Build using pipelines",[c.DISABLED]:"devconsole~Disabled"},p={[l.OpenShift]:s.DeploymentConfigModel.kind,[l.Kubernetes]:s.DeploymentModel.kind,[l.KnativeService]:"Service"};var h,b,v,f,g,E;!function(e){e.EDGE="edge",e.PASSTHROUGH="passthrough",e.REENCRYPT="reencrypt"}(h||(h={})),function(e){e.None="None",e.Allow="Allow",e.Redirect="Redirect"}(b||(b={})),function(e){e.None="None",e.Redirect="Redirect"}(v||(v={})),function(e){e.m="millicores",e[""]="cores"}(f||(f={})),function(e){e.Mi="Mi",e.Gi="Gi"}(g||(g={})),function(e){e.GIT="GIT",e.CONTAINER="CONTAINER",e.CATALOG="CATALOG",e.DOCKERFILE="DOCKERFILE",e.DEVFILE="DEVFILE",e.DATABASE="DATABASE",e.EVENTSOURCE="EVENTSOURCE",e.EVENTPUBSUB="EVENTPUBSUB",e.OPERATORBACKED="OPERATORBACKED",e.HELMCHARTS="HELMCHARTS",e.SAMPLES="SAMPLES",e.EVENTCHANNEL="EVENTCHANNEL",e.EVENTBROKER="EVENTBROKER",e.UPLOADJAR="UPLOADJAR"}(E||(E={}))},5600:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(0),r=n(869),s=n(5601),o=n(5604),i=n(5608),l=n(5609),c=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const u=e=>{var{typeAbstraction:t}=e,n=c(e,["typeAbstraction"]);switch(t){case r.c.source:return a.createElement(s.a,Object.assign({},n));case r.c.image:return a.createElement(o.a,Object.assign({},n));case r.c.webhook:return a.createElement(i.a,Object.assign({},n));default:return a.createElement(l.a,Object.assign({},n))}}},5601:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(0),r=n(7),s=n(5),o=n(869),i=n(5602),l=n(5603);class c extends a.Component{constructor(e){super(e),this.state={type:this.props.secretType,stringData:this.props.stringData||{},authType:o.b.basicAuth},this.changeAuthenticationType=this.changeAuthenticationType.bind(this),this.onDataChanged=this.onDataChanged.bind(this)}changeAuthenticationType(e){this.setState({type:e},()=>this.props.onChange(this.state))}onDataChanged(e){this.setState({stringData:Object.assign({},e)},()=>this.props.onChange(this.state))}render(){const{t:e}=this.props,t={[o.b.basicAuth]:e("public~Basic authentication"),[o.b.sshAuth]:e("public~SSH key")};return a.createElement(a.Fragment,null,this.props.isCreate?a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label",htmlFor:"secret-type"},e("public~Authentication type")),a.createElement("div",{className:"co-create-secret__dropdown"},a.createElement(s.t,{items:t,dropDownClassName:"dropdown--full-width",id:"dropdown-selectbox",selectedKey:this.state.authType,onChange:this.changeAuthenticationType}))):null,this.state.type===o.b.basicAuth?a.createElement(i.a,{onChange:this.onDataChanged,stringData:this.state.stringData}):a.createElement(l.a,{onChange:this.onDataChanged,stringData:this.state.stringData}))}}const u=Object(r.withTranslation)()(c)},5602:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n(7);class s extends a.Component{constructor(e){super(e),this.state={username:this.props.stringData.username||"",password:this.props.stringData.password||""},this.changeData=this.changeData.bind(this)}changeData(e){this.setState({[e.target.name]:e.target.value},()=>this.props.onChange(this.state))}render(){const{t:e}=this.props;return a.createElement(a.Fragment,null,a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label",htmlFor:"username"},e("public~Username")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:"username","data-test":"secret-username","aria-describedby":"username-help",type:"text",name:"username",onChange:this.changeData,value:this.state.username}),a.createElement("p",{className:"help-block",id:"username-help"},e("public~Optional username for Git authentication.")))),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label co-required",htmlFor:"password"},e("public~Password or token")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:"password","data-test":"secret-password","aria-describedby":"password-help",type:"password",name:"password",onChange:this.changeData,value:this.state.password,required:!0}),a.createElement("p",{className:"help-block",id:"password-help"},e("public~Password or token for Git authentication. Required if a ca.crt or .gitconfig file is not specified.")))))}}const o=Object(r.withTranslation)()(s)},5603:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n(7),s=n(5593);const o=({onChange:e,stringData:t})=>{const{t:n}=Object(r.useTranslation)();return a.createElement(s.a,{onChange:t=>{const n=t.endsWith("\n")?t:t+"\n";e({"ssh-privatekey":n})},inputFileData:t["ssh-privatekey"]||"",id:"ssh-privatekey",label:n("public~SSH private key"),inputFieldHelpText:n("public~Drag and drop file with your private SSH key here or browse to upload it."),textareaFieldHelpText:n("public~Private SSH key file for Git authentication."),isRequired:!0})}},5604:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(1240),r=n(0),s=n(7),o=n(5),i=n(5590),l=n(869),c=n(5605),u=n(5607);const d=({onChange:e,onError:t,onFormDisable:n,stringData:d,secretType:m,isCreate:p})=>{const[h,b]=r.useState("credentials"),{t:v}=Object(s.useTranslation)(),f=r.useMemo(()=>{var e;try{const t=Object(i.c)(m),n=null!==(e=d[t])&&void 0!==e?e:"{}";return JSON.parse(n)}catch(e){return t("Error parsing secret's data: "+e.message),{}}},[d,m]),g=r.useCallback(t=>{a.a(t)||n(!1);const r=t[l.a]?".dockerconfigjson":".dockercfg";e({stringData:{[r]:JSON.stringify(t)},base64StringData:{}})},[n,onchange]),E={credentials:v("public~Image registry credentials"),"config-file":v("public~Upload configuration file")};return r.createElement(r.Fragment,null,p&&r.createElement("div",{className:"form-group"},r.createElement("label",{className:"control-label",htmlFor:"secret-type"},v("public~Authentication type")),r.createElement("div",{className:"co-create-secret__dropdown"},r.createElement(o.t,{items:E,dropDownClassName:"dropdown--full-width",id:"dropdown-selectbox",selectedKey:h,onChange:b}))),"credentials"===h?r.createElement(c.a,{onChange:g,stringData:f}):r.createElement(u.a,{onChange:g,stringData:f,onDisable:n}))}},5605:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var a=n(22),r=n(840),s=n(4434),o=n(57),i=n(16),l=n(4437),c=n(4436),u=n(501),d=n(50),m=n(279),p=n(0),h=n(7),b=n(320),v=n(19),f=n(408),g=n(407),E=n(869),y=n(5606);class O extends p.Component{constructor(e){var t;super(e),this.state={isDockerconfigjson:a.a(this.props.stringData)||!!this.props.stringData[E.a],secretEntriesArray:this.imageSecretObjectToArray((null===(t=this.props.stringData)||void 0===t?void 0:t[E.a])||this.props.stringData),hasDuplicate:!1},this.onDataChanged=this.onDataChanged.bind(this)}newImageSecretEntry(){return{entry:{address:"",username:"",password:"",email:"",auth:""},uid:r.a()}}imageSecretObjectToArray(e){const t=[];return a.a(e)?s.a(t,this.newImageSecretEntry()):(o.a(e,(e,n)=>{const s=b.Base64.decode(i.a(e,"auth","")),o=a.a(s)?l.a(Array(2),""):c.a(s,":");t.push({entry:{address:n,username:i.a(e,"username",o[0]),password:i.a(e,"password",o[1]),email:i.a(e,"email",""),auth:i.a(e,"auth","")},uid:i.a(e,"uid",r.a())})}),t)}imageSecretArrayToObject(e){const t={};return o.a(e,e=>{t[e.entry.address]=u.a(e.entry,["username","password","auth","email"])}),t}propagateEntryChange(e){const t=this.imageSecretArrayToObject(e);this.props.onChange(this.state.isDockerconfigjson?{[E.a]:t}:t)}onDataChanged(e,t){this.setState(n=>{const a=[...n.secretEntriesArray],r={uid:a[t].uid,entry:e,auth:b.Base64.encode(`${e.username}:${e.password}`)};return a[t]=r,{secretEntriesArray:a}},()=>this.propagateEntryChange(this.state.secretEntriesArray))}removeEntry(e){this.setState(t=>{const n=[...t.secretEntriesArray];return n.splice(e,1),{secretEntriesArray:n}},()=>this.propagateEntryChange(this.state.secretEntriesArray))}addEntry(){this.setState({secretEntriesArray:s.a(this.state.secretEntriesArray,this.newImageSecretEntry())},()=>{this.propagateEntryChange(this.state.secretEntriesArray)})}render(){const{t:e}=this.props,t=d.a(this.state.secretEntriesArray,(t,n)=>{const{uid:a,entry:r}=null!=t?t:{},{address:s,email:o,password:i,username:l}=null!=r?r:{};return p.createElement("div",{className:"co-add-remove-form__entry",key:a},m.a(this.state.secretEntriesArray)>1&&p.createElement("div",{className:"co-add-remove-form__link--remove-entry"},p.createElement(v.a,{onClick:()=>this.removeEntry(n),type:"button",variant:"link","data-test":"remove-entry-button"},p.createElement(f.a,{className:"co-icon-space-r"}),e("public~Remove credentials"))),p.createElement(y.a,{id:n,address:s,email:o,password:i,username:l,onChange:this.onDataChanged}))});return p.createElement(p.Fragment,null,t,p.createElement(v.a,{className:"co-create-secret-form__link--add-entry pf-m-link--align-left",onClick:()=>this.addEntry(),type:"button",variant:"link","data-test":"add-credentials-button"},p.createElement(g.a,{className:"co-icon-space-r"}),e("public~Add credentials")))}}const _=Object(h.withTranslation)()(O)},5606:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n(7),s=n(320);const o=({id:e,address:t,email:n,password:o,username:i,onChange:l})=>{const{t:c}=Object(r.useTranslation)(),u=(a,r)=>{const c=i.trim(),u=o.trim(),d=i&&o?s.Base64.encode(`${c}:${u}`):"";l(Object.assign({address:t,username:i,password:o,email:n,[a]:r},d?{auth:d}:{}),e)},d=e=>u(e.currentTarget.name,e.currentTarget.value.trim()),m=e=>u(e.currentTarget.name,e.currentTarget.value);return a.createElement("div",{className:"co-m-pane__body-group","data-test-id":"create-image-secret-form"},a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label co-required",htmlFor:e+"-address"},c("public~Registry server address")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:e+"-address","aria-describedby":e+"-address-help",type:"text",name:"address",onChange:m,value:t,onBlur:d,"data-test":"image-secret-address",required:!0})),a.createElement("p",{className:"help-block",id:e+"-address-help"},c("public~For example quay.io or docker.io"))),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label co-required",htmlFor:e+"-username"},c("public~Username")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:e+"-username",type:"text",name:"username",onChange:m,value:i,onBlur:d,"data-test":"image-secret-username",required:!0}))),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label co-required",htmlFor:e+"-password"},c("public~Password")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:e+"-password",type:"password",name:"password",onChange:m,value:o,onBlur:d,"data-test":"image-secret-password",required:!0}))),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label",htmlFor:e+"-email"},c("public~Email")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:e+"-email",type:"text",name:"email",onChange:m,value:n,onBlur:d,"data-test":"image-secret-email"}))))}},5607:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(22),r=n(1973),s=n(1240),o=n(0),i=n(7),l=n(5593);class c extends o.Component{constructor(e){super(e),this.state={configFile:a.a(this.props.stringData)?"":JSON.stringify(this.props.stringData),parseError:!1},this.changeData=this.changeData.bind(this),this.onFileChange=this.onFileChange.bind(this)}changeData(e){this.updateState(r.a(JSON.parse,e.target.value),e.target.value)}onFileChange(e){this.updateState(r.a(JSON.parse,e),e)}updateState(e,t){this.setState({configFile:t,parseError:s.a(e)},()=>{this.props.onChange(e),this.props.onDisable(this.state.parseError)})}render(){const{t:e}=this.props;return o.createElement(o.Fragment,null,o.createElement(l.a,{onChange:this.onFileChange,inputFileData:this.state.configFile,id:"docker-config",label:e("public~Configuration file"),inputFieldHelpText:e("public~Upload a .dockercfg or .docker/config.json file."),textareaFieldHelpText:e("public~File with credentials and other configuration for connecting to a secured image registry."),isRequired:!0}),this.state.parseError&&o.createElement("div",{className:"co-create-secret-warning"},e("public~Configuration file should be in JSON format.")))}}const u=Object(i.withTranslation)()(c)},5608:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n(7),s=n(5590);class o extends a.Component{constructor(e){super(e),this.state={stringData:{WebHookSecretKey:this.props.stringData.WebHookSecretKey||""}},this.changeWebHookSecretkey=this.changeWebHookSecretkey.bind(this),this.generateWebHookSecret=this.generateWebHookSecret.bind(this)}changeWebHookSecretkey(e){this.setState({stringData:{WebHookSecretKey:e.target.value}},()=>this.props.onChange(this.state))}generateWebHookSecret(){this.setState({stringData:{WebHookSecretKey:Object(s.b)()}},()=>this.props.onChange(this.state))}render(){const{t:e}=this.props;return a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label co-required",htmlFor:"webhook-secret-key"},e("public~Webhook secret key")),a.createElement("div",{className:"pf-v5-c-input-group"},a.createElement("input",{className:"pf-v5-c-form-control",id:"webhook-secret-key","data-test":"secret-key",type:"text",name:"webhookSecretKey",onChange:this.changeWebHookSecretkey,value:this.state.stringData.WebHookSecretKey,"aria-describedby":"webhook-secret-help",required:!0}),a.createElement("button",{type:"button",onClick:this.generateWebHookSecret,className:"pf-v5-c-button pf-m-tertiary","data-test":"webhook-generate-button"},e("public~Generate"))),a.createElement("p",{className:"help-block",id:"webhook-secret-help"},e("public~Value of the secret will be supplied when invoking the webhook.")))}}const i=Object(r.withTranslation)()(o)},5609:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var a=n(840),r=n(22),s=n(50),o=n(255),i=n(1256),l=n(4434),c=n(279),u=n(0),d=n(7),m=n(320),p=n(19),h=n(408),b=n(407),v=n(973),f=n(5610);class g extends u.Component{constructor(e){super(e),this.state={secretEntriesArray:this.genericSecretObjectToArray(this.props.stringData)},this.onDataChanged=this.onDataChanged.bind(this)}newGenericSecretEntry(){return{entry:{key:"",value:""},uid:a.a()}}genericSecretObjectToArray(e){return r.a(e)?[this.newGenericSecretEntry()]:s.a(e,(e,t)=>{const n=v.isBinary(null,e);return{uid:a.a(),entry:{key:t,value:n?m.Base64.encode(e):e,isBase64:n,isBinary:n}}})}genericSecretArrayToObject(e){return o.a(e,(e,t)=>{var n,a;return i.a(e,{[t.entry.key]:(null===(n=t.entry)||void 0===n?void 0:n.isBase64)||(null===(a=t.entry)||void 0===a?void 0:a.isBinary)?t.entry.value:m.Base64.encode(t.entry.value)})},{})}onDataChanged(e,t){const n=[...this.state.secretEntriesArray],a={uid:n[t].uid,entry:e};n[t]=a,this.setState({secretEntriesArray:n},()=>this.props.onChange({base64StringData:this.genericSecretArrayToObject(this.state.secretEntriesArray)}))}removeEntry(e){const t=[...this.state.secretEntriesArray];t.splice(e,1),this.setState({secretEntriesArray:t},()=>this.props.onChange({base64StringData:this.genericSecretArrayToObject(this.state.secretEntriesArray)}))}addEntry(){this.setState({secretEntriesArray:l.a(this.state.secretEntriesArray,this.newGenericSecretEntry())},()=>this.props.onChange({base64StringData:this.genericSecretArrayToObject(this.state.secretEntriesArray)}))}render(){const{t:e}=this.props,t=s.a(this.state.secretEntriesArray,(t,n)=>u.createElement("div",{className:"co-add-remove-form__entry",key:t.uid},c.a(this.state.secretEntriesArray)>1&&u.createElement("div",{className:"co-add-remove-form__link--remove-entry"},u.createElement(p.a,{type:"button",onClick:()=>this.removeEntry(n),variant:"link","data-test":"remove-entry-button"},u.createElement(h.a,{className:"co-icon-space-r"}),e("public~Remove key/value"))),u.createElement(f.a,{id:n,entry:t.entry,onChange:this.onDataChanged})));return u.createElement(u.Fragment,null,t,u.createElement(p.a,{className:"co-create-secret-form__link--add-entry pf-m-link--align-left",onClick:()=>this.addEntry(),type:"button",variant:"link","data-test":"add-credentials-button"},u.createElement(b.a,{className:"co-icon-space-r"}),e("public~Add key/value")))}}const E=Object(d.withTranslation)()(g)},5610:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var a=n(0),r=n(7),s=n(5593);class o extends a.Component{constructor(e){super(e),this.state={key:e.entry.key,value:e.entry.value,isBinary:e.entry.isBinary},this.onValueChange=this.onValueChange.bind(this),this.onKeyChange=this.onKeyChange.bind(this)}onValueChange(e,t){this.setState({value:e,isBase64:t},()=>this.props.onChange(this.state,this.props.id))}onKeyChange(e){this.setState({key:e.target.value},()=>this.props.onChange(this.state,this.props.id))}render(){const{t:e}=this.props;return a.createElement("div",{className:"co-create-generic-secret__form"},a.createElement("div",{className:"form-group"},a.createElement("label",{className:"control-label co-required",htmlFor:this.props.id+"-key"},e("public~Key")),a.createElement("div",null,a.createElement("input",{className:"pf-v5-c-form-control",id:this.props.id+"-key",type:"text",name:"key",onChange:this.onKeyChange,value:this.state.key,"data-test":"secret-key",required:!0}))),a.createElement("div",{className:"form-group"},a.createElement("div",null,a.createElement(s.a,{onChange:this.onValueChange,inputFileData:this.state.value,id:this.props.id+"-value",label:e("public~Value"),inputFieldHelpText:e("public~Drag and drop file with your value here or browse to upload it."),inputFileIsBinary:this.state.isBinary}))))}}const i=Object(r.withTranslation)()(o)},5611:function(e,t,n){"use strict";var a,r,s;n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),function(e){e[e.NO_AUTH=0]="NO_AUTH",e[e.BASIC_AUTH=1]="BASIC_AUTH",e[e.SSH=2]="SSH",e[e.PERSONAL_ACCESS_TOKEN=3]="PERSONAL_ACCESS_TOKEN",e[e.OAUTH=4]="OAUTH"}(a||(a={})),function(e){e.GITHUB="github",e.BITBUCKET="bitbucket",e.GITLAB="gitlab",e.GITEA="gitea",e.UNSURE="other",e.INVALID=""}(r||(r={})),function(e){e[e.S2I=0]="S2I",e[e.DOCKERFILE=1]="DOCKERFILE",e[e.DEVFILE=2]="DEVFILE",e[e.SERVERLESS_FUNCTION=3]="SERVERLESS_FUNCTION"}(s||(s={}))},5612:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var a=n(5706),r=n(5596),s=n(320),o=n(83),i=n(5597),l=n(5587),c=n(5592),u=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((a=a.apply(e,t||[])).next())}))};class d extends c.a{constructor(t){super(t),this.getAuthProvider=()=>{switch(this.gitsource.secretType){case l.e.PERSONAL_ACCESS_TOKEN:case l.e.BASIC_AUTH:case l.e.OAUTH:return{auth:s.Base64.decode(this.gitsource.secretContent.password)};default:return null}},this.getRepoMetadata=()=>{var e;const{name:t,owner:n,source:a}=r(this.gitsource.url),s=(null===(e=this.gitsource.contextDir)||void 0===e?void 0:e.replace(/\/$/,""))||"";return{repoName:t,owner:n,host:a,defaultBranch:this.gitsource.ref,contextDir:s,devfilePath:this.gitsource.devfilePath,dockerfilePath:this.gitsource.dockerfilePath}},this.isRepoReachable=()=>u(this,void 0,void 0,(function*(){try{if(200===(yield this.client.repos.get({owner:this.metadata.owner,repo:this.metadata.repoName})).status)return l.d.Reachable}catch(e){switch(e.status){case 403:return l.d.RateLimitExceeded;case 404:return l.d.PrivateRepo;case 422:return l.d.InvalidGitTypeSelected;default:return l.d.Unreachable}}return l.d.Unreachable})),this.getRepoBranchList=()=>u(this,void 0,void 0,(function*(){try{const e=yield this.client.repos.listBranches({owner:this.metadata.owner,repo:this.metadata.repoName});return{branches:e.data.map(e=>e.name)}}catch(e){return{branches:[]}}})),this.getRepoFileList=e=>u(this,void 0,void 0,(function*(){try{const t=yield this.client.repos.getContents(Object.assign(Object.assign({owner:this.metadata.owner,repo:this.metadata.repoName},e&&(null==e?void 0:e.specificPath)?{path:`${this.metadata.contextDir}/${e.specificPath}`}:{path:this.metadata.contextDir}),this.metadata.defaultBranch?{ref:this.metadata.defaultBranch}:{}));let n=[];return 200===t.status&&Array.isArray(t.data)&&(n=t.data.map(e=>e.name)),{files:n}}catch(e){return{files:[]}}})),this.getRepoLanguageList=()=>u(this,void 0,void 0,(function*(){try{const e=yield this.client.repos.listLanguages({owner:this.metadata.owner,repo:this.metadata.repoName});return 200===e.status?{languages:Object.keys(e.data)}:{languages:[]}}catch(e){return{languages:[]}}})),this.createRepoWebhook=(e,t,n,a)=>u(this,void 0,void 0,(function*(){const r={Accept:["application/vnd.github+json"],Authorization:["Bearer "+e],"X-GitHub-Api-Version":["2022-11-28"]},s={name:"web",active:!0,config:{url:t,content_type:"json",insecure_ssl:n?"0":"1",secret:a},events:["push","pull_request"]},l="github.com"===this.metadata.host?"https://api.github.com":`https://${this.metadata.host}/api/v3`;return 201===(yield o.consoleFetchJSON.post(i.a,{url:`${l}/repos/${this.metadata.owner}/${this.metadata.repoName}/hooks`,method:"POST",headers:r,body:JSON.stringify(s)})).statusCode})),this.isFilePresent=e=>u(this,void 0,void 0,(function*(){try{return 200===(yield this.client.repos.getContents(Object.assign({owner:this.metadata.owner,repo:this.metadata.repoName,path:e},this.metadata.defaultBranch?{ref:this.metadata.defaultBranch}:{}))).status}catch(e){return!1}})),this.getFileContent=t=>u(this,void 0,void 0,(function*(){try{const n=yield this.client.repos.getContents(Object.assign({owner:this.metadata.owner,repo:this.metadata.repoName,path:t},this.metadata.defaultBranch?{ref:this.metadata.defaultBranch}:{}));return 200===n.status?e.from(n.data.content,"base64").toString():null}catch(e){return null}})),this.isDockerfilePresent=()=>this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`),this.isTektonFolderPresent=()=>this.isFilePresent(this.metadata.contextDir+"/.tekton"),this.getDockerfileContent=()=>this.getFileContent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`),this.isFuncYamlPresent=()=>this.isFilePresent(this.metadata.contextDir+"/func.yaml")||this.isFilePresent(this.metadata.contextDir+"/func.yml"),this.getFuncYamlContent=()=>this.getFileContent(this.metadata.contextDir+"/func.yaml")||this.getFileContent(this.metadata.contextDir+"/func.yml"),this.isDevfilePresent=()=>this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`),this.getDevfileContent=()=>this.getFileContent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`),this.getPackageJsonContent=()=>this.getFileContent(this.metadata.contextDir+"/package.json");const n=this.getAuthProvider();this.metadata=this.getRepoMetadata();const c="github.com"===this.metadata.host?null:`https://${this.metadata.host}/api/v3`;this.client=new a(Object.assign(Object.assign({},n),{baseUrl:c}))}}}).call(this,n(265).Buffer)},5613:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(320),r=n(5707),s=(n(4360),n(83)),o=n(5597),i=n(5587),l=n(5592),c=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((a=a.apply(e,t||[])).next())}))};class u extends l.a{constructor(e){super(e),this.baseURL="https://api.bitbucket.org/2.0",this.isServer=!1,this.getAuthProvider=()=>{switch(this.gitsource.secretType){case i.e.BASIC_AUTH:{const{username:e,password:t}=this.gitsource.secretContent;return{Authorization:"Basic "+a.Base64.encode(`${a.Base64.decode(e)}:${a.Base64.decode(t)}`)}}default:return null}},this.fetchJson=(e,t,n,a)=>c(this,void 0,void 0,(function*(){const r=this.getAuthProvider(),s=Object.assign(Object.assign({Accept:"application/json"},r),n);if(this.isServer)return Object(o.c)(Object.assign({url:e,method:t||"GET",headers:Object(o.d)(s)},a&&{body:JSON.stringify(a)}));const i=yield fetch(e,Object.assign({method:t||"GET",headers:s},a&&{body:JSON.stringify(a)}));if(!i.ok)throw i;return"text/plain"===i.headers.get("Content-Type")?i.text():i.json()})),this.getRepoMetadata=()=>{var e;const{name:t,owner:n,host:a}=r(this.gitsource.url),s=(null===(e=this.gitsource.contextDir)||void 0===e?void 0:e.replace(/\/$/,""))||"";return{repoName:t,owner:n,host:a,defaultBranch:this.gitsource.ref||"HEAD",contextDir:s,devfilePath:this.gitsource.devfilePath,dockerfilePath:this.gitsource.dockerfilePath}},this.isRepoReachable=()=>c(this,void 0,void 0,(function*(){const e=this.isServer?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}`;try{if((yield this.fetchJson(e)).slug===this.metadata.repoName)return i.d.Reachable}catch(e){switch(e.status){case 429:return i.d.RateLimitExceeded;case 403:return i.d.PrivateRepo;case 404:return i.d.ResourceNotFound;default:return i.d.InvalidGitTypeSelected}}return i.d.Unreachable})),this.getRepoBranchList=()=>c(this,void 0,void 0,(function*(){const e=this.isServer?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/branches`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/refs/branches`;try{const t=yield this.fetchJson(e);return{branches:t.values.map(e=>e.name)}}catch(e){return{branches:[]}}})),this.isServerURL=(e,t)=>{let n="";return n=t?e?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/files/${this.metadata.contextDir}/${t}?limit=50&at=${this.metadata.defaultBranch}`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/src/${this.metadata.defaultBranch}/${this.metadata.contextDir}/${t}?pagelen=50`:e?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/files/${this.metadata.contextDir}?limit=50&at=${this.metadata.defaultBranch}`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/src/${this.metadata.defaultBranch}/${this.metadata.contextDir}?pagelen=50`,n},this.getRepoFileList=e=>c(this,void 0,void 0,(function*(){var t;const n=(null==e?void 0:e.specificPath)?this.isServerURL(this.isServer,e.specificPath):this.isServerURL(this.isServer);try{const e=yield this.fetchJson(n);return{files:this.isServer?e.values:(null===(t=e.values)||void 0===t?void 0:t.map(e=>e.path))||[]}}catch(e){return{files:[]}}})),this.getRepoLanguageList=()=>c(this,void 0,void 0,(function*(){const e=this.isServer?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}`;try{return{languages:[(yield this.fetchJson(e)).language]}}catch(e){return{languages:[]}}})),this.createRepoWebhook=(e,t,n)=>c(this,void 0,void 0,(function*(){const a={"Content-Type":["application/json"],Authorization:["Basic "+e]},r={url:t,events:["repo:push","pullrequest:created","pullrequest:updated"],skip_cert_verification:!n,active:!0},i=this.isServer?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/hooks`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/hooks`;return 201===(yield s.consoleFetchJSON.post(o.a,{url:i,method:"POST",headers:a,body:JSON.stringify(r)})).statusCode})),this.isFilePresent=e=>c(this,void 0,void 0,(function*(){const t=e.replace(/^\//,""),n=this.isServer?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/raw/${t}?at=${this.metadata.defaultBranch}`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/src/${this.metadata.defaultBranch}/${t}`;try{return yield this.fetchJson(n),!0}catch(e){return!1}})),this.getFileContent=e=>c(this,void 0,void 0,(function*(){const t=e.replace(/^\//,""),n=this.isServer?`${this.baseURL}/projects/${this.metadata.owner}/repos/${this.metadata.repoName}/raw/${t}?at=${this.metadata.defaultBranch}`:`${this.baseURL}/repositories/${this.metadata.owner}/${this.metadata.repoName}/src/${this.metadata.defaultBranch}/${t}`;try{return yield this.fetchJson(n)}catch(e){return null}})),this.isDockerfilePresent=()=>this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`),this.isTektonFolderPresent=()=>this.isFilePresent(this.metadata.contextDir+"/.tekton"),this.getDockerfileContent=()=>this.getFileContent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`),this.isFuncYamlPresent=()=>this.isFilePresent(this.metadata.contextDir+"/func.yaml")||this.isFilePresent(this.metadata.contextDir+"/func.yml"),this.getFuncYamlContent=()=>this.getFileContent(this.metadata.contextDir+"/func.yaml")||this.getFileContent(this.metadata.contextDir+"/func.yml"),this.isDevfilePresent=()=>this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`),this.getDevfileContent=()=>this.getFileContent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`),this.getPackageJsonContent=()=>this.getFileContent(this.metadata.contextDir+"/package.json"),this.metadata=this.getRepoMetadata(),"bitbucket.org"!==this.metadata.host&&(this.baseURL=`https://${this.metadata.host}/rest/api/1.0`,this.isServer=!0)}}},5614:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(5596),r=n(5708),s=n(29),o=n(320),i=n(83),l=n(5597),c=n(5587),u=n(5592),d=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((a=a.apply(e,t||[])).next())}))};class m extends u.a{constructor(e){super(e),this.getRepo=()=>d(this,void 0,void 0,(function*(){if(this.repo)return Promise.resolve(this.repo);const e=yield this.client.Projects.show(this.metadata.fullName);if(!e)throw new Error(s.a.t("git-service~Unable to find repository"));if(e.path_with_namespace!==this.metadata.fullName)throw new Error(s.a.t("git-service~Repository path {{path}} does not match expected name {{name}}",{path:e.path_with_namespace,name:this.metadata.fullName}));return this.repo=e,Promise.resolve(this.repo)})),this.getAuthProvider=()=>{switch(this.gitsource.secretType){case c.e.PERSONAL_ACCESS_TOKEN:case c.e.OAUTH:case c.e.BASIC_AUTH:return o.Base64.decode(this.gitsource.secretContent.password);default:return null}},this.getProjectId=()=>d(this,void 0,void 0,(function*(){try{return(yield this.getRepo()).id}catch(e){throw e}})),this.isRepoReachable=()=>d(this,void 0,void 0,(function*(){try{return yield this.getRepo(),c.d.Reachable}catch(e){switch(e.status){case 429:return c.d.RateLimitExceeded;case 403:return c.d.PrivateRepo;case 404:return c.d.ResourceNotFound;case 422:return c.d.InvalidGitTypeSelected;default:return c.d.Unreachable}}})),this.getRepoBranchList=()=>d(this,void 0,void 0,(function*(){try{const e=yield this.getProjectId(),t=yield this.client.Branches.all(e);return{branches:t.map(e=>e.name)}}catch(e){return{branches:[]}}})),this.getRepoFileList=e=>d(this,void 0,void 0,(function*(){try{const t=yield this.getProjectId(),n=yield this.client.Repositories.tree(t,Object.assign({},(null==e?void 0:e.specificPath)?{path:this.filePath(e.specificPath)}:{path:this.metadata.contextDir}));return{files:n.reduce((t,n)=>(("blob"===n.type||(null==e?void 0:e.includeFolder)&&"tree"===n.type)&&t.push(n.path),t),[])}}catch(e){return{files:[]}}})),this.getRepoLanguageList=()=>d(this,void 0,void 0,(function*(){try{const e=yield this.getProjectId(),t=yield this.client.Projects.languages(e);return{languages:Object.keys(t)}}catch(e){return{languages:[]}}})),this.createRepoWebhook=(e,t,n,a)=>d(this,void 0,void 0,(function*(){const r=yield this.getProjectId(),s={"Content-Type":["application/json"],"PRIVATE-TOKEN":[e]},o={url:t,push_events:!0,merge_requests_events:!0,enable_ssl_verification:n,token:a};return 201===(yield i.consoleFetchJSON.post(l.a,{url:`${this.metadata.host}/api/v4/projects/${r}/hooks`,method:"POST",headers:s,body:JSON.stringify(o)})).statusCode})),this.isFilePresent=e=>d(this,void 0,void 0,(function*(){var t;try{const n=yield this.getProjectId(),a=this.metadata.defaultBranch||(null===(t=this.repo)||void 0===t?void 0:t.default_branch);return yield this.client.RepositoryFiles.showRaw(n,e,a),!0}catch(e){return!1}})),this.getFileContent=e=>d(this,void 0,void 0,(function*(){var t;try{const n=yield this.getProjectId(),a=this.metadata.defaultBranch||(null===(t=this.repo)||void 0===t?void 0:t.default_branch),r=e.replace(/^\/+/,"");return yield this.client.RepositoryFiles.showRaw(n,r,a)}catch(e){return null}})),this.filePath=e=>this.metadata.contextDir?`${this.metadata.contextDir}/${e}`:e,this.isDockerfilePresent=()=>this.isFilePresent(this.filePath(""+this.metadata.dockerfilePath)),this.isTektonFolderPresent=()=>d(this,void 0,void 0,(function*(){try{const e=yield this.getProjectId(),t=yield this.client.Repositories.tree(e,{path:this.metadata.contextDir});return!!t.find(e=>"tree"===e.type&&".tekton"===e.name)}catch(e){return!1}})),this.getDockerfileContent=()=>this.getFileContent(this.filePath(""+this.metadata.dockerfilePath)),this.isFuncYamlPresent=()=>this.isFilePresent(this.filePath("func.yaml"))||this.isFilePresent(this.filePath("func.yml")),this.getFuncYamlContent=()=>this.getFileContent(this.filePath("func.yaml"))||this.getFileContent(this.filePath("func.yml")),this.isDevfilePresent=()=>this.isFilePresent(this.filePath(""+this.metadata.devfilePath)),this.getDevfileContent=()=>this.getFileContent(this.filePath(""+this.metadata.devfilePath)),this.getPackageJsonContent=()=>this.getFileContent(this.filePath("package.json")),this.metadata=this.getRepoMetadata();const t=this.getAuthProvider();this.client=new r.Gitlab({host:this.metadata.host,token:t}),this.repo=null}getRepoMetadata(){const{name:e,owner:t,resource:n,full_name:r}=a(this.gitsource.url),s=(null==(o=this.gitsource.contextDir)?void 0:o.replace(/^\//,""))||"";var o;return{repoName:e,owner:t,host:"https://"+n,defaultBranch:this.gitsource.ref,fullName:r,contextDir:s,devfilePath:this.gitsource.devfilePath,dockerfilePath:this.gitsource.dockerfilePath}}}},5615:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(5596),r=n(320),s=n(22),o=(n(4360),n(83)),i=n(5597),l=n(5587),c=n(5592),u=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((a=a.apply(e,t||[])).next())}))};class d extends c.a{constructor(e){super(e),this.isServer=!1,this.getAuthProvider=()=>{if(this.gitsource.secretType===l.e.BASIC_AUTH){const{username:e,password:t}=this.gitsource.secretContent;if(!s.a(e)){return{authorization:"Basic "+r.Base64.encode(`${r.Base64.decode(e)}:${r.Base64.decode(t)}`)}}return{Authorization:"token "+r.Base64.decode(t)}}return null},this.fetchJson=(e,t,n,a)=>u(this,void 0,void 0,(function*(){const r=this.getAuthProvider(),s=Object.assign(Object.assign({Accept:"application/json"},r),n);if(this.isServer)return Object(i.c)(Object.assign({allowInsecure:!0,url:e,method:t||"GET",headers:Object(i.d)(s)},a&&{body:JSON.stringify(a)}));const o=yield fetch(e,Object.assign({method:t||"GET",headers:s},a&&{body:JSON.stringify(a)}));if(!o.ok)throw o;return"text/plain"===o.headers.get("Content-Type")?o.text():o.json()})),this.getRepoMetadata=()=>{var e;const{name:t,owner:n,resource:r,full_name:s}=a(this.gitsource.url),o=(null===(e=this.gitsource.contextDir)||void 0===e?void 0:e.replace(/\/$/,""))||"";return{repoName:t,owner:n,host:"https://"+r,defaultBranch:this.gitsource.ref,fullName:s,contextDir:o,devfilePath:this.gitsource.devfilePath,dockerfilePath:this.gitsource.dockerfilePath}},this.isRepoReachable=()=>u(this,void 0,void 0,(function*(){const e=`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}`;try{const t=yield this.fetchJson(e);if((null==t?void 0:t.name)===this.metadata.repoName)return l.d.Reachable}catch(e){return l.d.GiteaRepoUnreachable}return l.d.GiteaRepoUnreachable})),this.getRepoBranchList=()=>u(this,void 0,void 0,(function*(){const e=`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/branches`;try{const t=yield this.fetchJson(e);return{branches:(null==t?void 0:t.map(e=>e.name))||[]}}catch(e){return{branches:[]}}})),this.getRepoFileList=e=>u(this,void 0,void 0,(function*(){const t=(null==e?void 0:e.specificPath)?`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/contents/${this.metadata.contextDir}/${e.specificPath}`:`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/contents/${this.metadata.contextDir}`;try{const e=yield this.fetchJson(t);return{files:(null==e?void 0:e.map(e=>e.name))||[]}}catch(e){return{files:[]}}})),this.getRepoLanguageList=()=>u(this,void 0,void 0,(function*(){const e=`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/languages`;try{const t=yield this.fetchJson(e);return{languages:(null==Object?void 0:Object.keys(t))||[]}}catch(e){return{languages:[]}}})),this.createRepoWebhook=(e,t)=>u(this,void 0,void 0,(function*(){const n={"Content-Type":["application/json"],Authorization:["token "+e]},a={active:!0,authorization_header:"",branch_filter:"*",config:{content_type:"json",url:t},events:["push","pull_request"],type:"gitea"},r=`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/hooks`;return 201===(yield o.consoleFetchJSON.post(i.a,{url:r,method:"POST",headers:n,body:JSON.stringify(a)})).statusCode})),this.isFilePresent=e=>u(this,void 0,void 0,(function*(){const t=e.replace(/^\//,""),n=`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/contents/${t}?ref=${this.metadata.defaultBranch}`;try{return yield this.fetchJson(n),!0}catch(e){return!1}})),this.getFileContent=e=>u(this,void 0,void 0,(function*(){const t=e.replace(/^\//,""),n=`${this.metadata.host}/api/v1/repos/${this.metadata.owner}/${this.metadata.repoName}/raw/${t}?ref=${this.metadata.defaultBranch}`;try{return yield this.fetchJson(n)}catch(e){return console.warn("Error fetching file content",e),null}})),this.isDockerfilePresent=()=>this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`),this.isTektonFolderPresent=()=>this.isFilePresent(this.metadata.contextDir+"/.tekton"),this.getDockerfileContent=()=>this.getFileContent(`${this.metadata.contextDir}/${this.metadata.dockerfilePath}`),this.isFuncYamlPresent=()=>this.isFilePresent(this.metadata.contextDir+"/func.yaml")||this.isFilePresent(this.metadata.contextDir+"/func.yml"),this.getFuncYamlContent=()=>this.getFileContent(this.metadata.contextDir+"/func.yaml")||this.getFileContent(this.metadata.contextDir+"/func.yml"),this.isDevfilePresent=()=>this.isFilePresent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`),this.getDevfileContent=()=>this.getFileContent(`${this.metadata.contextDir}/${this.metadata.devfilePath}`),this.getPackageJsonContent=()=>this.getFileContent(this.metadata.contextDir+"/package.json"),this.metadata=this.getRepoMetadata(),this.metadata.host.includes("gitea.com")||(this.isServer=!0)}}},5616:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(5643),r=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((a=a.apply(e,t||[])).next())}))};const s=[{name:"Maven",type:"java",language:"java",expectedRegexp:/pom.xml/,priority:0},{name:"Gradle",type:"java",language:"java",expectedRegexp:/.*gradle.*/,priority:0},{name:"Golang",type:"golang",language:"go",expectedRegexp:RegExp([".*.\\.go","Gopkg.toml","glide.yaml"].join("|")),priority:0},{name:"Ruby",type:"ruby",language:"ruby",expectedRegexp:RegExp(["Gemfile","Rakefile","config.ru"].join("|")),priority:0},{name:"NodeJS",type:"nodejs",language:"javascript",expectedRegexp:RegExp(["app.json","package.json","gulpfile.js","Gruntfile.js"].join("|")),priority:0},{name:"Modern Web App",type:"modern-webapp",language:"javascript",expectedRegexp:/package\.json/,priority:1,customDetection:e=>r(void 0,void 0,void 0,(function*(){const t=yield e.getPackageJsonContent();return Object(a.b)(t)?["package.json"]:[]}))},{name:"PHP",type:"php",language:"php",expectedRegexp:RegExp(["index.php","composer.json"].join("|")),priority:0},{name:"Python",type:"python",language:"python",expectedRegexp:RegExp(["requirements.txt","setup.py"].join("|")),priority:0},{name:"Perl",type:"perl",language:"perl",expectedRegexp:RegExp(["index.pl","cpanfile"].join("|")),priority:0},{name:"Dotnet",type:"dotnet",language:"C#",expectedRegexp:RegExp(["project.json",".*.csproj"].join("|")),priority:0}],o=e=>r(void 0,void 0,void 0,(function*(){const{files:t}=yield e.getRepoFileList();return(yield Promise.all(s.map(n=>r(void 0,void 0,void 0,(function*(){let a=t.filter(e=>n.expectedRegexp.test(e));return a.length>0&&n.customDetection&&(a=yield n.customDetection(e)),{name:n.name,type:n.type,language:n.language,priority:n.priority,detectedFiles:a}}))))).filter(e=>!!e.detectedFiles.length).sort((e,t)=>t.priority-e.priority)}))},5617:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"f",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"e",(function(){return b})),n.d(t,"i",(function(){return v})),n.d(t,"j",(function(){return f}));var a,r=n(29),s=n(16),o=n(240),i=n(5595);!function(e){e.PipelineRunCancelled="StoppedRunFinally",e.PipelineRunStopped="CancelledRunFinally",e.TaskRunCancelled="TaskRunCancelled",e.Cancelled="Cancelled",e.PipelineRunStopping="PipelineRunStopping",e.PipelineRunPending="PipelineRunPending",e.TaskRunStopping="TaskRunStopping",e.CreateContainerConfigError="CreateContainerConfigError",e.ExceededNodeResources="ExceededNodeResources",e.ExceededResourceQuota="ExceededResourceQuota",e.ConditionCheckFailed="ConditionCheckFailed"}(a||(a={}));const l=e=>{var t;const n=s.a(e,["status","conditions"],[]);if(0===n.length)return null;const r=n.find(e=>"Succeeded"===e.type),o=n.find(e=>"Cancelled"===e.reason);if([a.PipelineRunStopped,a.PipelineRunCancelled].includes(null===(t=e.spec)||void 0===t?void 0:t.status)&&!o)return i.a.Cancelling;if(!r||!r.status)return null;const l="True"===r.status?i.a.Succeeded:"False"===r.status?i.a.Failed:i.a.Running;if(r.reason&&r.reason!==l)switch(r.reason){case a.PipelineRunCancelled:case a.TaskRunCancelled:case a.Cancelled:case a.PipelineRunStopped:return i.a.Cancelled;case a.PipelineRunStopping:case a.TaskRunStopping:return i.a.Failed;case a.CreateContainerConfigError:case a.ExceededNodeResources:case a.ExceededResourceQuota:case a.PipelineRunPending:return i.a.Pending;case a.ConditionCheckFailed:return i.a.Skipped;default:return l}return l},c=e=>{const t=l(e);if(!t)return"-";switch(t){case i.a.Cancelled:return r.a.t("pipelines-plugin~Cancelled");case i.a.Failed:return r.a.t("pipelines-plugin~Failed");case i.a.Succeeded:return r.a.t("pipelines-plugin~Succeeded");case i.a.Pending:return r.a.t("pipelines-plugin~Pending");case i.a.Running:return r.a.t("pipelines-plugin~Running");case i.a.Skipped:return r.a.t("pipelines-plugin~Skipped");case i.a.Cancelling:return r.a.t("pipelines-plugin~Cancelling");default:return t}},u=e=>e.latestRun&&l(e.latestRun)||i.a.Other,d=e=>e.latestRun&&c(e.latestRun)||"-",m=e=>c(e)||"-",p=e=>l(e)||i.a.Other,h=(e,t)=>{var n;if(!e||!e.selected||!e.selected.length)return!0;const a=u(t);return(null===(n=e.selected)||void 0===n?void 0:n.includes(a))||!o.a(e.all,a)},b=(e,t)=>{var n;if(!e||!e.selected||!e.selected.length)return!0;const a=p(t);return(null===(n=e.selected)||void 0===n?void 0:n.includes(a))||!o.a(e.all,a)},v=e=>l(e)||i.a.Other,f=e=>c(e)||"-"},5618:function(e,t,n){"use strict";var a=n(0),r=n(297),s=n(18),o=n.n(s);n(5732);const i={display:"flex",flex:1,flexDirection:"column",margin:"var(--pf-v5-global--spacer--md) 0"};t.a=({title:e,subTitle:t,fullWidth:n,children:s,flexLayout:l,extraMargin:c,dataTest:u,style:d})=>a.createElement("div",{className:o()("pf-v5-c-form",{"co-m-pane__form":!n,"odc-form-section--extra-margin":c}),style:Object.assign(Object.assign({},l?i:{}),d||{}),"data-test":u},e&&a.createElement("h2",{className:"odc-form-section__heading"},e),t&&a.createElement(r.a,null,t),s)},5620:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.PAC="pac",e.PIPELINE="pipeline"}(a||(a={}))},5621:function(e,t,n){"use strict";n.d(t,"f",(function(){return p})),n.d(t,"l",(function(){return h})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return v})),n.d(t,"m",(function(){return f})),n.d(t,"o",(function(){return g})),n.d(t,"n",(function(){return E})),n.d(t,"k",(function(){return y})),n.d(t,"h",(function(){return O})),n.d(t,"g",(function(){return _})),n.d(t,"e",(function(){return k})),n.d(t,"d",(function(){return j})),n.d(t,"b",(function(){return R})),n.d(t,"j",(function(){return T})),n.d(t,"i",(function(){return N}));var a=n(4413),r=n(689),s=n(5),o=n(5620),i=n(2221),l=n(5624),c=n(5599),u=n(5651);const d=/^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$/,m=/^\/.*$/,p=/^((((ssh|git|https?:?):\/\/:?)(([^\s@]+@|[^@]:?)[-\w.]+(:\d\d+:?)?(\/[-\w.~/?[\]!$&'()*+,;=:@%]*:?)?:?))|([^\s@]+@[-\w.]+:[-\w.~/?[\]!$&'()*+,;=:@%]*?:?))$/,h=r.object().shape({name:r.string().matches(/^[a-z0-9]([-a-z0-9]*[a-z0-9])?$/,"Name must consist of lower case alphanumeric characters or '-' and must start and end with an alphanumeric character.").required("Required")}),b=r.object().shape({selectedKey:r.string(),name:r.string().max(63,"Cannot be longer than 63 characters.").when("selectedKey",{is:i.b,then:r.string().required("Required")})}),v=e=>r.object().shape({replicas:r.number().transform(e=>a.a(e)?void 0:e).test(Object(l.b)(e("devconsole~Replicas must be an integer."))).min(0,e("devconsole~Replicas must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Replicas must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})).test({name:"isEmpty",test:e=>void 0!==e,message:e("devconsole~This field cannot be empty.")})}),f=r.string().oneOf([c.k.OpenShift,c.k.Kubernetes,c.k.KnativeService]).required(),g=e=>r.object().when("resources",{is:c.k.KnativeService,then:r.object().shape({scaling:r.object({minpods:r.number().transform(e=>a.a(e)?void 0:e).test(Object(l.b)(e("devconsole~Min Pods must be an integer."))).min(0,e("devconsole~Min Pods must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Min Pods must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})),maxpods:r.number().transform(e=>a.a(e)?void 0:e).test(Object(l.b)(e("devconsole~Max Pods must be an integer."))).min(1,e("devconsole~Max Pods must be greater than or equal to 1.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Max Pods must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})).test({test(e){const{minpods:t}=this.parent;return!e||e>=t},message:e("devconsole~Max Pods must be greater than or equal to Min Pods.")}),concurrencytarget:r.number().transform(e=>a.a(e)?void 0:e).test(Object(l.b)(e("devconsole~Concurrency target must be an integer."))).min(0,e("devconsole~Concurrency target must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Concurrency target must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})),concurrencylimit:r.number().transform(e=>a.a(e)?void 0:e).test(Object(l.b)(e("devconsole~Concurrency limit must be an integer."))).min(0,e("devconsole~Concurrency limit must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Concurrency limit must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})),concurrencyutilization:r.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Concurrency utilization must be between 0 and 100.")).max(100,e("devconsole~Concurrency utilization must be between 0 and 100.")),autoscale:r.object().shape({autoscalewindow:r.number().transform(e=>a.a(e)?void 0:e).test({test(e){if(e){const{autoscalewindowUnit:t}=this.parent,n=((e,t)=>{switch(t){case"m":return 60*e;case"h":return 3600*e;default:return e}})(e,t);return n>=6&&n<=3600}return!0},message:e("devconsole~Autoscale window must be between 6s and 1h.")})})}),domainMapping:r.array().of(r.string().transform(u.f).matches(d,{message:e("devconsole~Domain name must consist of lower-case letters, numbers, periods, and hyphens. It must start and end with a letter or number."),excludeEmptyString:!0}).test("domainname-has-segements",e("devconsole~Domain name must consist of at least two segments separated by dots."),(function(e){return e.split(".").length>=2})))})}),E=e=>r.object().shape({secure:r.boolean(),tls:r.object().when("secure",{is:!0,then:r.object({termination:r.string().required(e("devconsole~Please select a termination type."))})}),hostname:r.string().matches(d,{message:e("devconsole~Hostname must consist of lower-case letters, numbers, periods, and hyphens. It must start and end with a letter or number."),excludeEmptyString:!0}).max(253,e("devconsole~Cannot be longer than 253 characters.")),path:r.string().matches(m,{message:e("devconsole~Path must start with /."),excludeEmptyString:!0}),unknownTargetPort:r.number().typeError(e("devconsole~Port must be an integer.")).integer(e("devconsole~Port must be an integer.")).min(1,e("devconsole~Port must be between 1 and 65535.")).max(65535,e("devconsole~Port must be between 1 and 65535."))}),y=e=>r.object().shape({cpu:r.object().shape({request:r.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Request must be greater than or equal to 0.")).test({test(e){const{requestUnit:t,limit:n,limitUnit:a}=this.parent;return void 0===n||Object(s.Ib)(`${e}${t}`)<=Object(s.Ib)(`${n}${a}`)},message:e("devconsole~CPU request must be less than or equal to limit.")}),requestUnit:r.string(e("devconsole~Unit must be millicores or cores.")).ensure(),limitUnit:r.string(e("devconsole~Unit must be millicores or cores.")).ensure(),limit:r.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Limit must be greater than or equal to 0.")).test({test(e){const{request:t,requestUnit:n,limitUnit:a}=this.parent;return void 0===e||Object(s.Ib)(`${e}${a}`)>=Object(s.Ib)(`${t}${n}`)},message:e("devconsole~CPU limit must be greater than or equal to request.")})}),memory:r.object().shape({request:r.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Request must be greater than or equal to 0.")).test({test(e){const{requestUnit:t,limit:n,limitUnit:a}=this.parent;return void 0===n||Object(s.Ib)(`${e}${t}`)<=Object(s.Ib)(`${n}${a}`)},message:e("devconsole~Memory request must be less than or equal to limit.")}),requestUnit:r.string(e("devconsole~Unit must be Mi or Gi.")),limit:r.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Limit must be greater than or equal to 0.")).test({test(e){const{request:t,requestUnit:n,limitUnit:a}=this.parent;return void 0===e||Object(s.Ib)(`${t}${n}`)<=Object(s.Ib)(`${e}${a}`)},message:e("devconsole~Memory limit must be greater than or equal to request.")}),limitUnit:r.string(e("devconsole~Unit must be Mi or Gi."))})}),O=e=>r.object().when("build",{is:e=>"Source"===e.strategy,then:r.object().shape({selected:r.string().required(e("devconsole~Required")),tag:r.string().required(e("devconsole~Required"))})}),_=e=>r.object().shape({url:r.string().max(2e3,e("devconsole~Please enter a URL that is less then 2000 characters.")).matches(p,e("devconsole~Invalid Git URL.")).required(e("devconsole~Required")),type:r.string().when("showGitType",{is:!0,then:r.string().required(e("devconsole~We failed to detect the Git type. Please choose a Git type."))}),showGitType:r.boolean()}),k=e=>r.object().when("build",{is:e=>"Docker"===e.strategy,then:r.object().shape({containerPort:r.number().test(Object(l.b)(e("devconsole~Container port should be an integer"))),dockerfilePath:r.string().required(e("devconsole~Required"))})}),j=e=>r.object().when("build",{is:e=>"Devfile"===e.strategy,then:r.object().shape({devfilePath:r.string().required(e("devconsole~Required")),devfileContent:r.string().min(1,e("devconsole~Required")).required(e("devconsole~Required")),devfileHasError:r.boolean().oneOf([!1]),devfileSuggestedResources:r.object().required(e("devconsole~Required"))})}),R=r.object().shape({strategy:r.string()}),T=e=>r.object().shape({name:r.string().required(e("devconsole~Required")),image:r.object().required(e("devconsole~Required")),tag:r.string(),status:r.string().required(e("devconsole~Required"))}),N=r.object().when(["enabled","build.option","type"],{is:(e,t,n)=>(e||t===c.a.PIPELINES)&&n!==o.a.PAC,then:r.object().shape({templateSelected:r.string().required()})})},5622:function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"i",(function(){return i})),n.d(t,"j",(function(){return l})),n.d(t,"l",(function(){return c})),n.d(t,"m",(function(){return u})),n.d(t,"n",(function(){return d})),n.d(t,"o",(function(){return m})),n.d(t,"d",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return v})),n.d(t,"s",(function(){return f})),n.d(t,"b",(function(){return g})),n.d(t,"t",(function(){return E})),n.d(t,"e",(function(){return y})),n.d(t,"k",(function(){return O})),n.d(t,"p",(function(){return _})),n.d(t,"q",(function(){return k})),n.d(t,"r",(function(){return j}));var a=n(5654);const r=a.chart_color_green_400.value,s={apiGroup:"tekton.dev",apiVersion:"v1",label:"Pipeline",labelKey:"pipelines-plugin~Pipeline",labelPluralKey:"pipelines-plugin~Pipelines",plural:"pipelines",abbr:"PL",namespaced:!0,kind:"Pipeline",id:"pipeline",labelPlural:"Pipelines",crd:!0,color:r},o={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"Pipeline",labelKey:"pipelines-plugin~Pipeline",labelPluralKey:"pipelines-plugin~Pipelines",plural:"pipelines",abbr:"PL",namespaced:!0,kind:"Pipeline",id:"pipeline",labelPlural:"Pipelines",crd:!0,color:r},i={apiGroup:"tekton.dev",apiVersion:"v1",label:"PipelineRun",labelKey:"pipelines-plugin~PipelineRun",labelPluralKey:"pipelines-plugin~PipelineRuns",plural:"pipelineruns",abbr:"PLR",namespaced:!0,kind:"PipelineRun",id:"pipelinerun",labelPlural:"PipelineRuns",crd:!0,color:r},l={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"PipelineRun",labelKey:"pipelines-plugin~PipelineRun",labelPluralKey:"pipelines-plugin~PipelineRuns",plural:"pipelineruns",abbr:"PLR",namespaced:!0,kind:"PipelineRun",id:"pipelinerun",labelPlural:"PipelineRuns",crd:!0,color:r},c={apiGroup:"tekton.dev",apiVersion:"v1",label:"Task",labelKey:"pipelines-plugin~Task",labelPluralKey:"pipelines-plugin~Tasks",plural:"tasks",abbr:"T",namespaced:!0,kind:"Task",id:"task",labelPlural:"Tasks",crd:!0,color:r},u={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"Task",labelKey:"pipelines-plugin~Task",labelPluralKey:"pipelines-plugin~Tasks",plural:"tasks",abbr:"T",namespaced:!0,kind:"Task",id:"task",labelPlural:"Tasks",crd:!0,color:r},d={apiGroup:"tekton.dev",apiVersion:"v1",label:"TaskRun",labelKey:"pipelines-plugin~TaskRun",labelPluralKey:"pipelines-plugin~TaskRuns",plural:"taskruns",abbr:"TR",namespaced:!0,kind:"TaskRun",id:"taskrun",labelPlural:"TaskRuns",crd:!0,color:r},m={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"TaskRun",labelKey:"pipelines-plugin~TaskRun",labelPluralKey:"pipelines-plugin~TaskRuns",plural:"taskruns",abbr:"TR",namespaced:!0,kind:"TaskRun",id:"taskrun",labelPlural:"TaskRuns",crd:!0,color:r},p={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"CustomRun",labelKey:"pipelines-plugin~CustomRun",labelPluralKey:"pipelines-plugin~CustomRuns",plural:"customruns",abbr:"CR",namespaced:!0,kind:"CustomRun",id:"customrun",labelPlural:"CustomRuns",crd:!0,color:r},h={apiGroup:"tekton.dev",apiVersion:"v1alpha1",label:"PipelineResource",labelKey:"pipelines-plugin~PipelineResource",labelPluralKey:"pipelines-plugin~PipelineResources",plural:"pipelineresources",abbr:"PR",namespaced:!0,kind:"PipelineResource",id:"pipelineresource",labelPlural:"PipelineResources",crd:!0,color:r},b={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"ClusterTask",labelKey:"pipelines-plugin~ClusterTask",labelPluralKey:"pipelines-plugin~ClusterTasks",plural:"clustertasks",abbr:"CT",namespaced:!1,kind:"ClusterTask",id:"clustertask",labelPlural:"ClusterTasks",crd:!0,color:r},v={apiGroup:"tekton.dev",apiVersion:"v1alpha1",label:"Condition",labelKey:"pipelines-plugin~Condition",labelPluralKey:"pipelines-plugin~Conditions",plural:"conditions",abbr:"C",namespaced:!0,kind:"Condition",id:"condition",labelPlural:"Conditions",crd:!0,color:r},f={apiGroup:"triggers.tekton.dev",apiVersion:"v1beta1",label:"TriggerBinding",labelKey:"pipelines-plugin~TriggerBinding",labelPluralKey:"pipelines-plugin~TriggerBindings",plural:"triggerbindings",abbr:"TB",namespaced:!0,kind:"TriggerBinding",id:"triggerbinding",labelPlural:"TriggerBindings",crd:!0,color:r},g={apiGroup:"triggers.tekton.dev",apiVersion:"v1beta1",label:"ClusterTriggerBinding",labelKey:"pipelines-plugin~ClusterTriggerBinding",labelPluralKey:"pipelines-plugin~ClusterTriggerBindings",plural:"clustertriggerbindings",abbr:"CTB",namespaced:!1,kind:"ClusterTriggerBinding",id:"clustertriggerbinding",labelPlural:"ClusterTriggerBindings",crd:!0,color:r},E={apiGroup:"triggers.tekton.dev",apiVersion:"v1beta1",label:"TriggerTemplate",labelKey:"pipelines-plugin~TriggerTemplate",labelPluralKey:"pipelines-plugin~TriggerTemplates",plural:"triggertemplates",abbr:"TT",namespaced:!0,kind:"TriggerTemplate",id:"triggertemplate",labelPlural:"TriggerTemplates",crd:!0,color:r},y={apiGroup:"triggers.tekton.dev",apiVersion:"v1beta1",label:"EventListener",labelKey:"pipelines-plugin~EventListener",labelPluralKey:"pipelines-plugin~EventListeners",plural:"eventlisteners",abbr:"EL",namespaced:!0,kind:"EventListener",id:"eventlistener",labelPlural:"EventListeners",crd:!0,color:r},O={apiGroup:"pipelinesascode.tekton.dev",apiVersion:"v1alpha1",label:"Repository",labelKey:"pipelines-plugin~Repository",labelPluralKey:"pipelines-plugin~Repositories",plural:"repositories",abbr:"R",namespaced:!0,kind:"Repository",id:"repository",labelPlural:"Repositories",crd:!0,color:r},_={apiGroup:"operator.tekton.dev",apiVersion:"v1alpha1",label:"TektonConfig",labelKey:"pipelines-plugin~TektonConfig",labelPluralKey:"pipelines-plugin~TektonConfigs",plural:"tektonconfigs",abbr:"TC",namespaced:!1,kind:"TektonConfig",id:"tektonconfig",labelPlural:"TektonConfigs",crd:!0},k={apiGroup:"operator.tekton.dev",apiVersion:"v1alpha1",label:"TektonHub",labelKey:"pipelines-plugin~TektonHub",labelPluralKey:"pipelines-plugin~TektonHubs",plural:"tektonhubs",abbr:"TH",namespaced:!1,kind:"TektonHub",id:"tektonhub",labelPlural:"TektonHubs",crd:!0},j={apiGroup:"operator.tekton.dev",apiVersion:"v1alpha1",label:"TektonResult",labelKey:"pipelines-plugin~TektonResult",labelPluralKey:"pipelines-plugin~TektonResults",plural:"tektonresults",abbr:"TR",namespaced:!1,kind:"TektonResult",id:"tektonresult",labelPlural:"TektonResults",crd:!0}},5623:function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return R})),n.d(t,"p",(function(){return T})),n.d(t,"h",(function(){return N})),n.d(t,"f",(function(){return S})),n.d(t,"j",(function(){return P})),n.d(t,"m",(function(){return C})),n.d(t,"o",(function(){return w})),n.d(t,"e",(function(){return x})),n.d(t,"v",(function(){return I})),n.d(t,"B",(function(){return D})),n.d(t,"d",(function(){return A})),n.d(t,"s",(function(){return U})),n.d(t,"w",(function(){return L})),n.d(t,"k",(function(){return F})),n.d(t,"l",(function(){return B})),n.d(t,"t",(function(){return q})),n.d(t,"g",(function(){return $})),n.d(t,"x",(function(){return K})),n.d(t,"y",(function(){return Y})),n.d(t,"z",(function(){return H})),n.d(t,"r",(function(){return z})),n.d(t,"u",(function(){return Q})),n.d(t,"q",(function(){return J})),n.d(t,"i",(function(){return Z})),n.d(t,"A",(function(){return X})),n.d(t,"n",(function(){return ee}));var a=n(321),r=n(29),s=n(1557),o=n(117),i=n(16),l=n(22),c=n(640),u=n(1942),d=n(5),m=n(10),p=n(8),h=n(5588),b=n(5650),v=n(5586),f=n(5595),g=n(5635),E=n(5617);const y=e=>e.resources&&e.resources.inputs&&e.resources.inputs.length>0&&!!e.resources.inputs[0].from,O=e=>e.runAfter&&e.runAfter.length>0;var _;!function(e){e.Running="Running",e.Failed="Failed",e.Succeeded="Succeeded",e.Cancelled="Cancelled",e.Other="-"}(_||(_={}));const k={[_.Running]:r.a.t("pipelines-plugin~Running"),[_.Failed]:r.a.t("pipelines-plugin~Failed"),[_.Succeeded]:r.a.t("pipelines-plugin~Succeeded"),[_.Cancelled]:r.a.t("pipelines-plugin~Cancelled"),[_.Other]:r.a.t("pipelines-plugin~Other")};var j;!function(e){e.Git="git",e.PullRequest="pullRequest",e.Image="image",e.Cluster="cluster",e.Storage="storage",e.CloudEvent="cloudEvent"}(j||(j={}));j.Git,j.PullRequest,j.Image,j.Cluster,j.Storage,j.CloudEvent;const R=(e,t,n,r=!1)=>((r?e.spec.finally:e.spec.tasks)||[]).map(e=>{var r;if(!t.status)return e;if(!n||0===n.length)return t.spec.status===E.a.PipelineRunCancelled?s.a(e,{status:{reason:f.a.Cancelled}}):t.spec.status===E.a.PipelineRunPending?s.a(e,{status:{reason:f.a.Idle}}):s.a(e,{status:{reason:f.a.Failed}});const l=o.a(n,t=>t.metadata.labels[h.u.pipelineTask]===e.name),c=null==l?void 0:l.status,u=s.a(e,{status:(null===(r=null==t?void 0:t.status)||void 0===r?void 0:r.taskRuns)?i.a(o.a(t.status.taskRuns,{pipelineTaskName:e.name}),"status"):c});if(u.status&&u.status.completionTime&&u.status.startTime){const e=new Date(u.status.completionTime).getTime()-new Date(u.status.startTime).getTime();u.status.duration=Object(a.a)(e)}return u.status?u.status&&u.status.conditions?u.status.reason=Object(E.d)(u)||f.a.Pending:u.status&&!u.status.reason&&(u.status.reason=f.a.Pending):u.status={reason:f.a.Pending},u}),T=(e,t={apiVersion:"",metadata:{},kind:"PipelineRun",spec:{}},n)=>{var a;const r=[];if(!(null===(a=e.spec)||void 0===a?void 0:a.tasks)||l.a(e.spec.tasks))return r;const s=R(e,t,n);return s.forEach(e=>{y(e)||O(e)||(0===r.length&&r.push([]),r[0].push(e))}),s.forEach(e=>{var t;if(!O(e)&&y(e)){let n=r.length-1;for(let a=0;a<r.length;a++)for(const s of r[a])(null===(t=s.taskRef)||void 0===t?void 0:t.name)!==e.resources.inputs[0].from[0]&&s.name!==e.resources.inputs[0].from[0]||(n=a);const a=r[n+1]?r[n+1]:null;a&&a[0]&&a[0].resources&&a[0].resources.inputs&&a[0].resources.inputs[0]&&a[0].resources.inputs[0].from&&a[0].resources.inputs[0].from[0]&&a[0].resources.inputs[0].from[0]===e.resources.inputs[0].from[0]?a.push(e):r.splice(n+1,0,[e])}}),s.forEach(e=>{var t;if(O(e)){let n=r.length-1;for(let a=0;a<r.length;a++)for(const s of r[a])(null===(t=s.taskRef)||void 0===t?void 0:t.name)!==e.runAfter[0]&&s.name!==e.runAfter[0]||(n=a);const a=r[n+1]?r[n+1]:null;a&&a[0].runAfter&&a[0].runAfter[0]&&a[0].runAfter[0]===e.runAfter[0]?a.push(e):r.splice(n+1,0,[e])}}),r},N=(e,t,n)=>R(e,t,n,!0),S=e=>{if(!e)return d.K;const{state:t,lastState:n}=e;return t.waiting&&!l.a(n)?d.H:t.waiting?d.K:t.terminated?d.J:d.I},P=e=>{if(!e||0===e.length)return{latestPipelineRun:null,status:f.a.PipelineNotStarted};const t=Object(g.b)(e,"creationTimestamp");if(!t)return{latestPipelineRun:null,status:f.a.PipelineNotStarted};let n=Object(E.c)(t);return"-"===n&&(n=f.a.Pending),{latestPipelineRun:t,status:n}},C=e=>e&&e.map(e=>({name:e.name,value:e.default})),w=e=>e&&e.map(e=>Object.assign({name:e.name},e.data)),x=(e,t,n)=>{const a=new Date(e).getTime(),r=((t?new Date(t).getTime():(new Date).getTime())-a)/1e3;return Object(b.g)(r,n)},I=e=>{var t,n,a,r;const s=null!==(n=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.startTime)&&void 0!==n?n:null,o=null!==(r=null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.completionTime)&&void 0!==r?r:null;return!s||!o&&"Running"!==Object(E.d)(e)?"-":x(s,o,!0)},D=(e,t,n)=>{const a=c.a(t);return a.secrets=[...a.secrets,{name:e}],n&&(a.imagePullSecrets=[...a.imagePullSecrets,{name:e}]),Object(p.rb)(m.ServiceAccountModel,a)},A=(e,t,n)=>{Object(p.kb)(m.ServiceAccountModel,h.l,t).then(t=>{void 0===o.a(t.secrets,t=>t.name===e.metadata.name)&&D(e.metadata.name,t,n)}).catch(e=>{Object(u.errorModal)({error:e.message})})},M=(e,t)=>e===h.p.Git?`tekton.dev/${h.p.Git}-${t}`:e===h.p.Image?`tekton.dev/${h.p.Image}-${t}`:null,U=(e,t={})=>{let n=0,a=M(null==e?void 0:e.key,n);if(!a)return t;for(;t[a]&&t[a]!==(null==e?void 0:e.value);)a=M(null==e?void 0:e.key,++n);return Object.assign(Object.assign({},t),{[a]:null==e?void 0:e.value})},L=e=>{switch(e.kind){case v.PipelineModel.kind:case v.TaskModel.kind:case v.EventListenerModel.kind:return"";case v.PipelineRunModel.kind:return"pipeline-runs";case v.PipelineResourceModel.kind:return"pipeline-resources";case v.ConditionModel.kind:return"conditions";case v.TaskRunModel.kind:return"task-runs";case v.ClusterTaskModel.kind:return"cluster-tasks";case v.TriggerTemplateModel.kind:return"trigger-templates";case v.TriggerBindingModel.kind:return"trigger-bindings";case v.ClusterTriggerBindingModel.kind:return"cluster-trigger-bindings";case v.RepositoryModel.kind:return"repositories";default:return null}},F=(e,t,n)=>e.filter(e=>{const{ownerReferences:a=[]}=e.metadata;return a.some(e=>e.name===t&&e.kind===n)}),B=(e,t)=>t.find(t=>t.metadata.name===e.metadata.name),q=(e,t)=>t.filter(t=>!!t.spec.resourcetemplates.find(t=>{var n;return(null===(n=t.spec.pipelineRef)||void 0===n?void 0:n.name)===e.metadata.name})),$=(e,t)=>t.reduce((t,n)=>(n.spec.triggers.filter(t=>e.find(e=>{var n;return(null==e?void 0:e.metadata.name)===(null===(n=null==t?void 0:t.template)||void 0===n?void 0:n.ref)})).length>0&&t.push(n),t),[]),K=e=>"tekton.dev/v1beta1"===e.apiVersion?v.PipelineModelV1Beta1:v.PipelineModel,Y=e=>"tekton.dev/v1beta1"===e.apiVersion?v.PipelineRunModelV1Beta1:v.PipelineRunModel,H=e=>"tekton.dev/v1beta1"===e.apiVersion?v.TaskModelV1Beta1:v.TaskModel;var G,V,W;!function(e){e.KEY="task.results.key",e.TYPE="task.results.type"}(G||(G={})),function(e){e.EXTERNAL_LINK="external-link"}(V||(V={})),function(e){e.IMAGE_REPOSITORY="IMAGE_URL",e.SBOM="LINK_TO_SBOM",e.SCAN_OUTPUT="SCAN_OUTPUT",e.TEST_OUTPUT="TEST_OUTPUT"}(W||(W={}));const z=e=>null==e?void 0:e.find(e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.annotations)||void 0===n?void 0:n[G.KEY])===W.SBOM}),Q=e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.annotations)||void 0===n?void 0:n[G.TYPE])===V.EXTERNAL_LINK},J=e=>{var t,n,a,r;return null===(r=null===(a=(null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.results)||(null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.taskResults))||void 0===a?void 0:a.find(e=>e.name===W.SBOM))||void 0===r?void 0:r.value},Z=e=>{var t,n,a,r;return null===(r=null===(a=(null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.results)||(null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.pipelineResults))||void 0===a?void 0:a.find(e=>e.name===W.IMAGE_REPOSITORY))||void 0===r?void 0:r.value},X=e=>{var t,n;if(!(null===(n=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.conditions)||void 0===n?void 0:n.length))return f.a.Pending;return Object(E.d)(e)},ee=e=>{var t,n,a;const r=null===(a=null===(n=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.conditions)||void 0===n?void 0:n.find(e=>"Succeeded"===(null==e?void 0:e.type)))||void 0===a?void 0:a.message,s=null==r?void 0:r.match(/(\w+)(?::\s*|\s+)(\d+)/g),o={};null==s||s.forEach(e=>{const[t,n]=e.split(/(?::\s*|\s+)/);o[t.trim()]=Number(n.trim())});const i=((null==o?void 0:o.Completed)||0)-((null==o?void 0:o.Failed)||0)-((null==o?void 0:o.Cancelled)||0);return{Running:(null==o?void 0:o.Incomplete)||0,Succeeded:i||0,Cancelled:(null==o?void 0:o.Cancelled)||0,Failed:(null==o?void 0:o.Failed)||0,Skipped:(null==o?void 0:o.Skipped)||0,Completed:(null==o?void 0:o.Completed)||0,Cancelling:(null==o?void 0:o.Cancelled)||0,PipelineNotStarted:0,Pending:0}}},5624:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));const a=e=>({test:e=>null==e||Number.isInteger(e),message:e}),r=/^[a-z]([a-z0-9_]-?)*[a-z0-9]$/},5625:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return _})),n.d(t,"a",(function(){return T}));var a=n(29),r=n(22),s=n(16),o=n(57),i=n(640),l=n(5649),c=n(5),u=n(10),d=n(8),m=n(76),p=n(870),h=n(5586),b=n(5623),v=n(15),f=n(2221),g=n(1400),E=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((a=a.apply(e,t||[])).next())}))};const y=(e,t=e)=>{switch(t){case f.z:case f.b:return"";default:return e}},O=(e,t,n)=>{const a=Object.assign(Object.assign({},t.metadata.labels),{"app.kubernetes.io/part-of":n||void 0});if(!e)return Promise.reject();const s=[{op:r.a(a)?"add":"replace",path:"/metadata/labels",value:a}];return Object(d.pb)(e,t,s)},_=(e,t,n)=>{if(!t)return Promise.reject(new Error(a.a.t("topology~Error: no resource provided to update application for.")));if(!e)return Promise.reject(new Error(a.a.t("topology~Error: invalid resource kind provided for updating application.")));const r=s.a(t,["metadata","labels","app.kubernetes.io/instance"]),i=s.a(t,["metadata","labels","app.kubernetes.io/part-of"]),l=[O(e,t,n)];if(!r)return Promise.all(l);return i&&({"app.kubernetes.io/instance":r}["app.kubernetes.io/part-of"]=i),Object(g.e)(t.metadata.namespace,r,{"app.kubernetes.io/part-of":i}).then(e=>(o.a(e,e=>{o.a(e,e=>{!i&&s.a(e,["metadata","labels","app.kubernetes.io/part-of"])||l.push(O(Object(d.vb)(e.kind),e,n))})}),Promise.all(l)))},k=(e,t={},n)=>E(void 0,void 0,void 0,(function*(){var a,r;try{if(n){const n=yield Object(c.Fb)({group:e.apiGroup,resource:e.plural,verb:"list",namespace:null==t?void 0:t.ns});if(!(null===(a=null==n?void 0:n.status)||void 0===a?void 0:a.allowed))return[]}return yield Object(d.nb)(e,t)}catch(t){if(404===(null===(r=null==t?void 0:t.response)||void 0===r?void 0:r.status))return console.warn(`Ignore that model ${e.plural} was not found:`,t),[];throw console.warn(`Error while loading model ${e.plural}:`,t),t}})),j=(e,t)=>E(void 0,void 0,void 0,(function*(){var n;if(!(yield Object(c.Fb)({group:e.apiGroup,resource:e.plural,verb:"delete",name:t.metadata.name,namespace:t.metadata.namespace})).status.allowed)return console.warn(`User is not allowed to delete resource ${e.plural} ${t.metadata.name}.`),null;try{return yield Object(d.lb)(e,t)}catch(a){if(404===(null===(n=null==a?void 0:a.response)||void 0===n?void 0:n.status))return console.warn(`Resource ${e.plural} ${t.metadata.name} was not found. Ignore this error.`,a),null;throw console.warn(`Error while deleting resource ${e.plural} ${t.metadata.name}:`,a),a}})),R=(e,t)=>E(void 0,void 0,void 0,(function*(){var n,a;const r=null!==(a=null===(n=e.metadata)||void 0===n?void 0:n.annotations)&&void 0!==a?a:{},s=Object(l.c)(r["app.openshift.io/vcs-uri"]),o=yield Object(d.nb)(u.SecretModel,{ns:e.metadata.namespace});let i;if((null==t?void 0:t.length)>0)i=null==t?void 0:t.reduce((t,n)=>{var a,r;return[...t,...(null!==(r=null===(a=n.spec)||void 0===a?void 0:a.triggers)&&void 0!==r?r:[]).reduce((t,n)=>{var a,r;let i;const l=n.generic?"generic":s,c=n.generic||n[s];if(c){const t=null!==(r=null===(a=c.secretReference)||void 0===a?void 0:a.name)&&void 0!==r?r:`${e.metadata.name}-${l}-webhook-secret`;i=o.find(e=>e.metadata.name===t)}return i?[...t,j(u.SecretModel,i)]:t},[])]},[]);else{const t=o.find(t=>t.metadata.name===e.metadata.name+"-generic-webhook-secret"),n=o.find(t=>t.metadata.name===`${e.metadata.name}-${s}-webhook-secret`);i=[j(u.SecretModel,t),j(u.SecretModel,n)]}return i})),T=e=>E(void 0,void 0,void 0,(function*(){const t=[],n=yield k(u.BuildConfigModel,{ns:e.metadata.namespace}),a=yield k(u.BuildModel,{ns:e.metadata.namespace}),s=yield k(h.PipelineModel,{ns:e.metadata.namespace},!0),o=yield k(h.TriggerTemplateModel,{ns:e.metadata.namespace},!0),l=yield k(h.EventListenerModel,{ns:e.metadata.namespace},!0),c=yield Object(p.fetchChannelsCrd)(),f=Object(d.vb)(Object(d.Db)(e)),g={buildConfigs:{data:n,loaded:!0,loadError:null},builds:{data:a,loaded:!0,loadError:null}},E=Object(v.Gc)(e,g),y=!r.a(E),O=Object(b.l)(e,s);let _=[],T=[];const N=[u.ServiceModel,u.RouteModel,u.ImageStreamModel],S=[m.p,u.ImageStreamModel];r.a(O)||(N.push(h.PipelineModel),S.push(h.PipelineModel),_=Object(b.t)(O,o),T=Object(b.g)(_,l));const P=i.a(e),C=(e,n)=>{const a=j(e,n);a&&t.push(a)};y&&E.forEach(e=>{C(u.BuildConfigModel,e)});const w=(e,t)=>{e.forEach(e=>C(e,t))};switch(Object(p.isDynamicEventResourceKind)(Object(d.Db)(e))&&C(Object(d.vb)(Object(d.Db)(e)),e),c.find(t=>t.kind===e.kind)&&C(f,e),_.length>0&&_.forEach(e=>C(h.TriggerTemplateModel,e)),T.length>0&&T.forEach(e=>C(h.EventListenerModel,e)),e.kind){case u.DaemonSetModel.kind:case u.StatefulSetModel.kind:case u.JobModel.kind:case u.CronJobModel.kind:case m.f.kind:C(f,e);break;case u.DeploymentModel.kind:case u.DeploymentConfigModel.kind:C(f,e),w(N,e);break;case m.p.kind:w(S,P);break;case m.b.kind:case m.k.kind:C(f,e)}return y&&t.push(...yield R(e,E)),O&&t.push(...yield R(e)),Promise.all(t)}))},5626:function(e,t,n){"use strict";var a,r,s;n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s})),function(e){e.METRICS_PIPELINERUN_DURATION_TYPE="metrics.pipelinerun.duration-type",e.METRICS_PIPELINERUN_LEVEL="metrics.pipelinerun.level",e.METRICS_TASKRUN_DURATION_TYPE="metrics.taskrun.duration-type",e.METRICS_TASKRUN_LEVEL="metrics.taskrun.level"}(a||(a={})),function(e){e.PIPELINE="pipeline",e.PIPELINERUN="pipelinerun",e.TASK="task",e.TASKRUN="taskrun"}(r||(r={})),function(e){e.HISTOGRAM="histogram",e.LASTVALUE="lastvalue",e.NAMESPACE="namespace"}(s||(s={}))},5627:function(e,t,n){},5628:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={group:"tekton.dev",version:"v1",kind:"PipelineRun"}},5629:function(e,t,n){},5630:function(e,t,n){},5631:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={group:"tekton.dev",version:"v1",kind:"TaskRun"}},5632:function(e,t,n){"use strict";var a,r;n.d(t,"a",(function(){return a})),function(e){e.Cancelling="Cancelling",e.Succeeded="Succeeded",e.Failed="Failed",e.Running="Running",e["In Progress"]="In Progress",e.FailedToStart="FailedToStart",e.PipelineNotStarted="PipelineNotStarted",e.Skipped="Skipped",e.Cancelled="Cancelled",e.Pending="Pending",e.Idle="Idle",e.Other="-"}(a||(a={})),function(e){e.RunCancelled="RunCancelled"}(r||(r={}))},5633:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(5587),r=n(5611),s=n(5616),o=n(5661),i=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((a=a.apply(e,t||[])).next())}))};const l=[{name:"Devfile",type:r.b.DEVFILE,expectedRegexp:/^\.?devfile\.yaml$/,priority:3},{name:"Dockerfile",type:r.b.DOCKERFILE,expectedRegexp:/^(Dockerfile|Containerfile).*/,priority:2},{name:"Serverless Function",type:r.b.SERVERLESS_FUNCTION,expectedRegexp:/^func\.(yaml|yml)$/,priority:1},{name:"Builder Image",type:r.b.S2I,expectedRegexp:/^/,priority:0,customDetection:s.a}],c=(e,t,n=!1)=>i(void 0,void 0,void 0,(function*(){let e,s=[],c=!1,u=null;const d=t?yield t.isRepoReachable():a.d.GitTypeNotDetected;let m,p=[];if(d===a.d.Reachable)try{const{files:a}=yield t.getRepoFileList({includeFolder:!0});e=yield Object(o.b)(n,t),s=yield Promise.all(l.map(e=>i(void 0,void 0,void 0,(function*(){return p=a.filter(t=>e.expectedRegexp.test(t)),p.length>0&&e.customDetection&&(m=yield e.customDetection(t)),{name:e.name,type:e.type,priority:e.priority,detectedFiles:p,detectedCustomData:m}})))),c=!0}catch(e){c=!0,u=e.message}else c=!0;return e||(s=s.filter(e=>e.type!==r.b.SERVERLESS_FUNCTION)),s=s.filter(e=>{var t;return!!e.detectedFiles.length||!!(null===(t=e.detectedCustomData)||void 0===t?void 0:t.length)}).sort((e,t)=>t.priority-e.priority),{loaded:c,loadError:u,repositoryStatus:d,strategies:s}}))},5634:function(e,t,n){"use strict";n.d(t,"i",(function(){return r})),n.d(t,"g",(function(){return s})),n.d(t,"m",(function(){return o})),n.d(t,"j",(function(){return i})),n.d(t,"k",(function(){return l})),n.d(t,"h",(function(){return c})),n.d(t,"l",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return m})),n.d(t,"o",(function(){return p})),n.d(t,"p",(function(){return h})),n.d(t,"n",(function(){return b})),n.d(t,"q",(function(){return v})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return E})),n.d(t,"a",(function(){return y})),n.d(t,"r",(function(){return O}));var a=n(2221);const r="event-source",s="event-sink",o="kafka-sink",i="event-source-kafka",l="event-source-link",c="event-sink-link",u="event-source-kafka-link",d="event-pubsub",m="event-pubsub-link",p="knative-service",h="revision-traffic",b="knative-revision",v="sink-uri",f=a.h,g=100,E=[a.c,a.c,a.c+10,a.c],y=6,O="URI"},5635:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return v})),n.d(t,"f",(function(){return f})),n.d(t,"d",(function(){return g})),n.d(t,"i",(function(){return E})),n.d(t,"h",(function(){return O})),n.d(t,"e",(function(){return _})),n.d(t,"g",(function(){return k})),n.d(t,"c",(function(){return j})),n.d(t,"l",(function(){return T})),n.d(t,"m",(function(){return N})),n.d(t,"j",(function(){return S})),n.d(t,"k",(function(){return P}));var a=n(5699),r=n(1403),s=n(5692),o=n(5691),i=n(5654),l=n(2225),c=n(29),u=n(8),d=n(5588),m=n(5586),p=n(5595),h=n(5617);const b=(e,t)=>{if(!(e&&e.length>0&&t))return null;let n=e[0];if("creationTimestamp"===t)for(let a=1;a<e.length;a++)n=e[a]&&e[a].metadata&&e[a].metadata[t]&&new Date(e[a].metadata[t])>new Date(n.metadata[t])?e[a]:n;else if("startTime"===t||"completionTime"===t)for(let a=1;a<e.length;a++)n=e[a]&&e[a].status&&e[a].status[t]&&new Date(e[a].status[t])>new Date(n.status[t])?e[a]:n;else n=e[e.length-1];return n.status||(n=Object.assign(Object.assign({},n),{status:{pipelineSpec:{tasks:[]}}})),n.status.succeededCondition||(n.status=Object.assign(Object.assign({},n.status),{succeededCondition:""})),n.status.succeededCondition=Object(h.c)(n),n},v=(e,t)=>e.map(e=>{const n=t.filter(t=>{var n;return(null===(n=t.metadata.labels)||void 0===n?void 0:n["tekton.dev/pipeline"])===e.metadata.name});return e.latestRun=b(n,"creationTimestamp"),e}),f=e=>{switch(e){case p.a.Succeeded:return{message:c.a.t("pipelines-plugin~Succeeded"),pftoken:i.chart_color_green_400};case p.a.Failed:return{message:c.a.t("pipelines-plugin~Failed"),pftoken:l.global_danger_color_100};case p.a.FailedToStart:return{message:c.a.t("pipelines-plugin~PipelineRun failed to start"),pftoken:l.global_danger_color_100};case p.a.Running:case p.a["In Progress"]:return{message:c.a.t("pipelines-plugin~Running"),pftoken:o.chart_color_blue_300};case p.a.Skipped:return{message:c.a.t("pipelines-plugin~Skipped"),pftoken:a.chart_color_black_400};case p.a.Cancelled:return{message:c.a.t("pipelines-plugin~Cancelled"),pftoken:r.chart_color_black_500};case p.a.Cancelling:return{message:c.a.t("pipelines-plugin~Cancelling"),pftoken:r.chart_color_black_500};case p.a.Idle:case p.a.Pending:return{message:c.a.t("pipelines-plugin~Pending"),pftoken:s.chart_color_blue_100};default:return{message:c.a.t("pipelines-plugin~PipelineRun not started yet"),pftoken:s.chart_color_blue_100}}},g=e=>{var t,n,a,r,s;const o=(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n[d.u.pipeline])||(null===(a=null==e?void 0:e.metadata)||void 0===a?void 0:a.name),i=(null===(r=null==e?void 0:e.status)||void 0===r?void 0:r.pipelineSpec)||(null===(s=null==e?void 0:e.spec)||void 0===s?void 0:s.pipelineSpec);return o&&i?{apiVersion:Object(u.n)(m.PipelineModel),kind:m.PipelineModel.kind,metadata:{name:o,namespace:e.metadata.namespace},spec:i}:null},E=(e,t,n)=>{var a,r,s,o,i;const l=(e=>{var t,n,a,r;if(!e)return 0;return(null!==(n=((null===(t=e.spec)||void 0===t?void 0:t.tasks)||[]).length)&&void 0!==n?n:0)+(null!==(r=((null===(a=e.spec)||void 0===a?void 0:a.finally)||[]).length)&&void 0!==r?r:0)})(t)-(e=>{var t,n,a,r;if(!e)return 0;return(null!==(n=((null===(t=e.spec)||void 0===t?void 0:t.tasks)||[]).filter(e=>{var t,n;return"Task"!==(null===(t=e.taskRef)||void 0===t?void 0:t.kind)&&"ClusterTask"!==(null===(n=e.taskRef)||void 0===n?void 0:n.kind)}).length)&&void 0!==n?n:0)+(null!==(r=((null===(a=e.spec)||void 0===a?void 0:a.finally)||[]).filter(e=>{var t,n;return"Task"!==(null===(t=e.taskRef)||void 0===t?void 0:t.kind)&&"ClusterTask"!==(null===(n=e.taskRef)||void 0===n?void 0:n.kind)}).length)&&void 0!==r?r:0)})(t),c=()=>{var t;return(null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.taskRuns)?Object.keys(e.status.taskRuns):n?null==n?void 0:n.map(e=>e.metadata.name):[]},u=c().length,d=((null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.skippedTasks)||[]).length,m={PipelineNotStarted:0,Pending:0,Running:0,Succeeded:0,Failed:0,Cancelled:0,Skipped:d};if((null===(r=null==e?void 0:e.status)||void 0===r?void 0:r.taskRuns)||n){c().forEach(t=>{const a=Object(h.c)((null==n?void 0:n.find(e=>e.metadata.name===t))||e.status.taskRuns[t]);"Succeeded"===a?m[p.a.Succeeded]++:"Running"===a?m[p.a.Running]++:"Failed"===a?m[p.a.Failed]++:"Cancelled"===a?m[p.a.Cancelled]++:m[p.a.Pending]++});const t=m[p.a.Failed]>0,a=Object(h.c)(e)===p.a.Cancelled,r=l>=u?l-u-d:l;t||a?m[p.a.Cancelled]+=r:m[p.a.Pending]+=r}else"False"===(null===(i=null===(o=null===(s=null==e?void 0:e.status)||void 0===s?void 0:s.conditions)||void 0===o?void 0:o[0])||void 0===i?void 0:i.status)||(null==e?void 0:e.spec.status)===h.a.PipelineRunCancelled?m[p.a.Cancelled]=l:(null==e?void 0:e.spec.status)===h.a.PipelineRunPending?m[p.a.Pending]+=l:m[p.a.PipelineNotStarted]++;return m},y=e=>e===m.ClusterTaskModel.kind?m.ClusterTaskModel:e===m.TaskModel.kind||void 0===e?m.TaskModel:null,O=e=>(y(e)||m.TaskModel).kind,_=e=>e===m.ClusterTriggerBindingModel.kind?m.ClusterTriggerBindingModel:e===m.TriggerBindingModel.kind||void 0===e?m.TriggerBindingModel:null,k=e=>(_(e)||m.TriggerBindingModel).kind,j=e=>{const t=y(e);return Object(u.Hb)(t)},R=(e,t)=>{const n=t&&E(e,void 0,t);return null==n?void 0:n.Running},T=(e,t)=>!(e&&(R(e,t)>0||Object(h.c)(e)===p.a.Running)),N=(e,t)=>!(e&&((null==t?void 0:t.Running)>0||Object(h.c)(e)===p.a.Running)),S=(e,t)=>!(e&&R(e,t)>0&&Object(h.c)(e)!==p.a.Cancelled),P=(e,t)=>!(e&&(null==t?void 0:t.Running)>0&&Object(h.c)(e)!==p.a.Cancelled)},5636:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return m}));var a=n(22),r=n(0),s=n(7),o=n(14),i=n(5),l=n(869),c=n(5590),u=n(5598);const d=Object(s.withTranslation)()(class extends r.Component{constructor(){super(...arguments),this.state={secretTypeAbstraction:l.c.generic}}componentDidUpdate(){if(!a.a(this.props.obj.data)){const e=Object(c.e)(this.props.obj.data);this.state.secretTypeAbstraction!==e&&this.setState({secretTypeAbstraction:e})}}render(){const{obj:e,fixedKeys:t}=this.props,{secretTypeAbstraction:n}=this.state;if(!n)return r.createElement(i.S,null);const a=null==t?void 0:t.reduce((t,n)=>{var a;return Object.assign(Object.assign({},t),{[n]:(null===(a=e.data)||void 0===a?void 0:a[n])||""})},{});return r.createElement(i.wb,Object.assign({},e),r.createElement(u.a,Object.assign({},this.props,{secretTypeAbstraction:n,obj:e.data,fixed:a})))}}),m=({kind:e})=>{const t=Object(o.useParams)(),{t:n}=Object(s.useTranslation)();return r.createElement(i.C,{resources:[{kind:e,name:t.name,namespace:t.ns,isList:!1,prop:"obj"}]},r.createElement(d,{fixedKeys:["kind","metadata"],saveButtonText:n("public~Save")}))}},5637:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n(14),s=n(5598);const o=()=>{const e=Object(r.useParams)(),t=e.type;return a.createElement(s.a,{fixed:{metadata:{namespace:e.ns}},secretTypeAbstraction:t,isCreate:!0})}},5638:function(e,t,n){},5639:function(e,t,n){},5640:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.Reachable=0]="Reachable",e[e.Unreachable=1]="Unreachable",e[e.RateLimitExceeded=2]="RateLimitExceeded",e[e.GitTypeNotDetected=3]="GitTypeNotDetected",e[e.InvalidGitTypeSelected=4]="InvalidGitTypeSelected",e[e.PrivateRepo=5]="PrivateRepo",e[e.ResourceNotFound=6]="ResourceNotFound",e[e.GiteaRepoUnreachable=7]="GiteaRepoUnreachable"}(a||(a={}))},5641:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return p}));const a={name:"Maven",type:"java",language:"java",expectedRegexps:RegExp(["pom.xml"].join("|")),expectedFiles:["pom.xml"]},r={name:"Gradle",type:"java",language:"java",expectedRegexps:RegExp([".*gradle.*"].join("|")),expectedFiles:["build.gradle","gradlew","gradlew.bat"]},s={name:"Golang",type:"golang",language:"go",expectedRegexps:RegExp([".*.\\.go","Gopkg.toml","glide.yaml"].join("|")),expectedFiles:["main.go","Gopkg.toml","glide.yaml"]},o={name:"Ruby",type:"ruby",language:"ruby",expectedRegexps:RegExp(["Gemfile","Rakefile","config.ru"].join("|")),expectedFiles:["Gemfile","Rakefile","config.ru"]},i={name:"NodeJS",type:"nodejs",language:"javascript",expectedRegexps:RegExp(["app.json","package.json","gulpfile.js","Gruntfile.js"].join("|")),expectedFiles:["app.json","package.json","gulpfile.js","Gruntfile.js"]},l={name:"Modern Web App",type:"modern-webapp",language:"javascript",expectedRegexps:RegExp(["app.json","package.json","gulpfile.js","Gruntfile.js"].join("|")),expectedFiles:["app.json","package.json","gulpfile.js","Gruntfile.js"]},c={name:"PHP",type:"php",language:"php",expectedRegexps:RegExp(["index.php","composer.json"].join("|")),expectedFiles:["index.php","composer.json"]},u={name:"Python",type:"python",language:"python",expectedRegexps:RegExp(["requirements.txt","setup.py"].join("|")),expectedFiles:["requirements.txt","setup.py"]},d={name:"Perl",type:"perl",language:"perl",expectedRegexps:RegExp(["index.pl","cpanfile"].join("|")),expectedFiles:["index.pl","cpanfile"]},m=[{name:"Dotnet",type:"dotnet",language:"C#",expectedRegexps:RegExp(["project.json",".*.csproj"].join("|")),expectedFiles:["project.json","app.csproj"]},s,r,a,i,l,d,c,u,o],p=["react","angular","@angular/core","vue","knockout","knockback"]},5642:function(e,t,n){"use strict";n(5612),n(5613),n(5614),n(5615);var a=n(5644);n.d(t,"a",(function(){return a.a}));n(5592)},5643:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var a=n(5587);function r(e){return a.a.map(t=>{const n=e.filter(e=>t.expectedRegexps.test(e));return{buildType:t.type,language:t.language,files:n}}).filter(e=>e.files.length>0).sort((e,t)=>t.files.length-e.files.length)}function s(e){try{const t=JSON.parse(e);return a.f.some(e=>e in t.dependencies)}catch(e){return!1}}},5644:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(4359),r=n(5587),s=n(5613),o=n(5615),i=n(5612),l=n(5614);function c(e,t,n,c,u,d,m){let p,h;switch(null==u?void 0:u.type){case a.SecretType.basicAuth:p=r.e.BASIC_AUTH,h=u.data;break;case a.SecretType.sshAuth:p=r.e.SSH,h=u["ssh-privatekey"];break;default:p=r.e.NO_AUTH}const b={url:e,ref:n,contextDir:c,secretType:p,secretContent:h,devfilePath:d,dockerfilePath:m};switch(t){case r.b.GITHUB:return new i.a(b);case r.b.BITBUCKET:return new s.a(b);case r.b.GITLAB:return new l.a(b);case r.b.GITEA:return new o.a(b);default:return null}}},5645:function(e,t,n){"use strict";n(5616);var a=n(5646);n.d(t,"a",(function(){return a.a}));n(5633)},5646:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(5709);class r{constructor(e){this.content=e,this.parsedCommands=this.parse()}parse(){let e=[];try{e=Object(a.parse)(this.content)}catch(e){}return e}getContainerPort(){const e=this.parsedCommands.filter(e=>"EXPOSE"===e.name);if(e.length>0){const t=e[0];if(t.args.length>0)return Number(t.args[0])}return null}}},5647:function(e,t,n){"use strict";n.d(t,"e",(function(){return v})),n.d(t,"c",(function(){return f})),n.d(t,"h",(function(){return g})),n.d(t,"a",(function(){return E})),n.d(t,"f",(function(){return y})),n.d(t,"g",(function(){return O})),n.d(t,"j",(function(){return _})),n.d(t,"k",(function(){return k})),n.d(t,"b",(function(){return j})),n.d(t,"i",(function(){return R})),n.d(t,"d",(function(){return T}));var a=n(29),r=n(16),s=n(57),o=n(117),i=n(367),l=n(1401),c=n(10),u=n(8),d=n(5634),m=n(15),p=n(2221),h=n(1400),b=n(5589);const v=(e,t)=>{var n,a,r,s,o,i,l,c;if(!(null==e?void 0:e.builds)&&!(null==e?void 0:e.buildConfigs)&&!(null==e?void 0:e.pipelines))return null;const u=e=>{var t,n,a;return null!==(a=null===(n=null===(t=e.spec)||void 0===t?void 0:t.source)||void 0===n?void 0:n.contextDir)&&void 0!==a?a:null},d=null===(a=null===(n=null==e?void 0:e.builds)||void 0===n?void 0:n.data)||void 0===a?void 0:a.find(e=>e.metadata.name===t);if(d){return u(d)}const m=null===(s=null===(r=null==e?void 0:e.buildConfigs)||void 0===r?void 0:r.data)||void 0===s?void 0:s.find(e=>e.metadata.name===t);if(m){return u(m)}const p=null===(i=null===(o=null==e?void 0:e.pipelines)||void 0===o?void 0:o.data)||void 0===i?void 0:i.find(e=>e.metadata.name===t);if(p){const e=null===(c=null===(l=null==p?void 0:p.spec)||void 0===l?void 0:l.params)||void 0===c?void 0:c.find(e=>"PATH_CONTEXT"===e.name);if(e)return e.default}return null},f=(e,t,n,a,s=!1,o)=>{const{monitoringAlerts:i=[]}=t,c=r.a(e,"metadata.uid"),p=r.a(e,"metadata.labels",{}),h=r.a(e,"metadata.annotations",{}),b=r.a(e,"metadata.name",""),f=v(o,b),g=Object(l.d)("icon-"+p["app.openshift.io/runtime"])||Object(l.d)("icon-"+p["app.kubernetes.io/name"]);return{id:c,name:(null==e?void 0:e.metadata.name)||p["app.kubernetes.io/instance"],type:n,resource:e,resources:Object.assign(Object.assign({},t),{isOperatorBackedService:s}),data:{monitoringAlerts:i,kind:Object(u.Db)(e),editURL:h["app.openshift.io/edit-url"],vcsURI:h["app.openshift.io/vcs-uri"],vcsRef:h["app.openshift.io/vcs-ref"],contextDir:f,builderImage:g||a,isKnativeResource:!(!n||n!==d.i&&n!==d.n&&n!==d.j)||Object(m.Rd)(e,"metadata.labels")}}},g=(e,t,n,a,r,s,o)=>{var i;const l=null==e?void 0:e.metadata.uid,c=null==e?void 0:e.metadata.name,d=null===(i=null==e?void 0:e.metadata.labels)||void 0===i?void 0:i["app.openshift.io/instance"],m=s||Object(u.Db)(e);return Object.assign(Object.assign({id:l,type:t,label:d||c,shape:o,resource:e,resourceKind:m,data:n},r&&r.length&&{children:r}),a||{})},E={width:p.m,height:p.k,group:!1,visible:!0,style:{padding:p.l}},y=(e,t)=>{const n=r.a(e,"metadata.annotations"),i=[];return s.a(Object(h.d)(n),n=>{const s=r.a(o.a(t,e=>{var t,a,r,s,o;let i;if("string"==typeof n)return i=null!==(r=null===(a=null===(t=e.metadata)||void 0===t?void 0:t.labels)||void 0===a?void 0:a["app.kubernetes.io/instance"])&&void 0!==r?r:null===(s=e.metadata)||void 0===s?void 0:s.name,i===n;i=null===(o=e.metadata)||void 0===o?void 0:o.name;const{apiVersion:l,kind:c,name:u}=n,{kind:d,apiVersion:m}=e;let p=i===u&&d===c;return m&&(p=p&&m===l),p}),["metadata","uid"]),l=r.a(e,["metadata","uid"]);s&&i.push({id:`${l}_${s}`,type:p.v,label:a.a.t("topology~Visual connector"),source:l,target:s})}),i},O=e=>{const t=r.a(e,["metadata","labels","app.kubernetes.io/part-of"]);return t?{id:"group:"+t,type:p.u,group:!0,label:t,children:[r.a(e,["metadata","uid"])],width:p.h,height:p.f,data:{},visible:!0,collapsed:!1,style:{padding:p.g}}:null},_=(e,t)=>{var n;if(!e)return;e.children=null===(n=e.children)||void 0===n?void 0:n.filter(e=>!(null==t?void 0:t.find(t=>{var n;return null===(n=t.children)||void 0===n?void 0:n.includes(e)})));const a=t.find(t=>t.group&&t.id===e.id);a?e.children.forEach(t=>{a.children.includes(t)||a.children.push(t),((e,t)=>{var n,a,r,s;((null===(n=t.data)||void 0===n?void 0:n.groupResources)||(null===(a=e.data)||void 0===a?void 0:a.groupResources))&&((null===(r=t.data)||void 0===r?void 0:r.groupResources)||(t.data.groupResources=[]),(null===(s=null==e?void 0:e.data)||void 0===s?void 0:s.groupResources)&&e.data.groupResources.forEach(e=>{t.data.groupResources.includes(e)||t.data.groupResources.push(e)}))})(e,a)}):t.push(e)},k=(e,t)=>{e&&e.length&&e.forEach(e=>{_(e,t)})},j=(e,t,n=[])=>{(null==e?void 0:e.edges)&&t.edges.push(...e.edges),(null==e?void 0:e.nodes)&&(t.nodes.push(...e.nodes.filter(e=>!e.group&&!t.nodes.find(a=>{if(e.id===a.id)return!0;const{resource:r}=e;return!r||!!n.find(e=>e(r,t))}))),k(e.nodes.filter(e=>e.group),t.nodes))},R=(e,t,n=b.a)=>i.a(n.map(n=>e[n]?e[n].data.map(e=>{const a=e.kind||t[n];let r,s=a;return a&&Object(u.eb)(a)&&(s=Object(u.tb)(a),r=Object(u.o)(a)),Object.assign({kind:s,apiVersion:r},e)}):[])),T=e=>({deploymentConfigs:{isList:!0,kind:"DeploymentConfig",namespace:e,optional:!0},deployments:{isList:!0,kind:"Deployment",namespace:e,optional:!0},daemonSets:{isList:!0,kind:"DaemonSet",namespace:e,optional:!0},pods:{isList:!0,kind:"Pod",namespace:e,optional:!0},jobs:{isList:!0,kind:"Job",namespace:e,optional:!0},cronJobs:{isList:!0,kind:"CronJob",namespace:e,optional:!0},statefulSets:{isList:!0,kind:"StatefulSet",namespace:e,optional:!0},services:{isList:!0,kind:"Service",namespace:e,optional:!0},hpas:{isList:!0,kind:c.HorizontalPodAutoscalerModel.kind,namespace:e,optional:!0},buildConfigs:{isList:!0,kind:c.BuildConfigModel.kind,namespace:e,optional:!0}})},5648:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"i",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"h",(function(){return m})),n.d(t,"j",(function(){return p}));var a,r,s,o=n(5591);!function(e){e.REPOSITORY="Repository",e.URL_REPO="RepoUrl",e.URL_ORG="RepoOrg",e.SHA="sha",e.EVENT_TYPE="EventType"}(a||(a={})),function(e){e.SHA_MESSAGE="sha_message",e.SHA_URL="sha_url",e.REPO_URL="repo_url",e.BRANCH="Branch"}(r||(r={})),function(e){e.golang="go",e.nodejs="nodejs",e.python="python",e.java="java"}(s||(s={}));const i={[a.REPOSITORY]:"pipelinesascode.tekton.dev/repository",[a.URL_REPO]:"pipelinesascode.tekton.dev/url-repository",[a.URL_ORG]:"pipelinesascode.tekton.dev/url-org",[a.SHA]:"pipelinesascode.tekton.dev/sha",[a.EVENT_TYPE]:"pipelinesascode.tekton.dev/event-type"},l={[r.SHA_MESSAGE]:"pipelinesascode.tekton.dev/sha-title",[r.SHA_URL]:"pipelinesascode.tekton.dev/sha-url",[r.REPO_URL]:"pipelinesascode.tekton.dev/repo-url",[r.BRANCH]:"pipelinesascode.tekton.dev/branch"};var c;!function(e){e.GITHUB="github",e.WEBHOOK="webhook"}(c||(c={}));const u={gitUrl:"",githubAppAvailable:!1,gitProvider:o.b.INVALID,name:"",method:"github",showOverviewPage:!1,yamlData:"",webhook:{token:"",method:"token",secret:"",url:"",user:"",autoAttach:!1}},d={[o.b.GITHUB]:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token",[o.b.GITLAB]:"https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html",[o.b.BITBUCKET]:"https://support.atlassian.com/bitbucket-cloud/docs/app-passwords/"},m={[o.b.GITHUB]:"https://docs.github.com/en/developers/webhooks-and-events/webhooks/creating-webhooks",[o.b.GITLAB]:"https://docs.gitlab.com/ee/user/project/integrations/webhooks.html#configure-a-webhook-in-gitlab",[o.b.BITBUCKET]:"https://support.atlassian.com/bitbucket-cloud/docs/manage-webhooks/"},p=["github.com","bitbucket.org","gitlab.com"]},5649:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h}));var a=n(2338),r=n(689),s=n(5591),o=n(5653),i=n(15),l=n(5655),c=n(5621);const u=e=>r.object().shape({name:Object(i.Zd)(e),project:c.l,application:c.a,image:Object(c.h)(e),git:Object(c.g)(e),docker:Object(c.e)(e),devfile:Object(c.d)(e),deployment:Object(c.c)(e),serverless:Object(c.o)(e),route:Object(c.n)(e),limits:Object(c.k)(e),build:c.b,resources:c.m,healthChecks:Object(l.a)(e),pac:Object(o.e)(e),pipeline:c.i}),d=(e,t)=>e.startsWith(`https://${t}/`)||e.startsWith(`https://www.${t}/`)||e.includes(`@${t}:`),m=e=>c.f.test(e)?d(e,"github.com")?s.b.GITHUB:d(e,"bitbucket.org")?s.b.BITBUCKET:d(e,"gitlab.com")?s.b.GITLAB:d(e,"gitea.com")||e.includes("gitea")?s.b.GITEA:s.b.UNSURE:s.b.INVALID,p=e=>{if(i.Yd.test(e))return e;const t=a.a(e);return e.match(/^\d/)||t.match(/^\d/)?"ocp-"+t:t},h=e=>{if(!c.f.test(e))return;const t=e.replace(/\/$/,"").split("/").pop();return p(t)}},5650:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"k",(function(){return v})),n.d(t,"f",(function(){return f})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return E})),n.d(t,"h",(function(){return y})),n.d(t,"j",(function(){return O})),n.d(t,"g",(function(){return _})),n.d(t,"b",(function(){return k})),n.d(t,"i",(function(){return j}));var a,r,s=n(321),o=n(29),i=n(550),l=n(50),c=n(16),u=n(384),d=n(4427),m=n(461),p=n(5),h=n(158),b=n(5588);!function(e){e.NUMBER_OF_PIPELINE_RUNS="NUMBER_OF_PIPELINE_RUNS",e.PIPELINE_RUN_DURATION="PIPELINE_RUN_DURATION",e.PIPELINE_RUN_TASK_RUN_DURATION="PIPELINE_RUN_TASK_RUN_DURATION",e.PIPELINE_SUCCESS_RATIO="PIPELINE_SUCCESS_RATIO"}(a||(a={})),function(e){e.TEKTON="tekton",e.TEKTON_PIPELINES_CONTROLLER="tekton_pipelines_controller"}(r||(r={}));const v=(e=r.TEKTON_PIPELINES_CONTROLLER)=>({[b.n.PIPELINE_TASK_LEVEL]:{[a.PIPELINE_SUCCESS_RATIO]:i.a(e+'_pipelinerun_duration_seconds_count{pipeline="<%= name %>",namespace="<%= namespace %>"}'),[a.NUMBER_OF_PIPELINE_RUNS]:i.a(`sum(${e}_pipelinerun_duration_seconds_count{pipeline="<%= name %>",namespace="<%= namespace %>"})`)},[b.n.PIPELINERUN_TASKRUN_LEVEL]:{[a.NUMBER_OF_PIPELINE_RUNS]:i.a(`sum(count by (pipelinerun) (${e}_pipelinerun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"}))`),[a.PIPELINE_RUN_TASK_RUN_DURATION]:i.a(`sum(${e}_pipelinerun_taskrun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"})  by (pipelinerun, task)`),[a.PIPELINE_RUN_DURATION]:i.a(`sum(${e}_pipelinerun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"})  by (pipelinerun)`),[a.PIPELINE_SUCCESS_RATIO]:i.a(`count(sort_desc(${e}_pipelinerun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"})) by(status)`)},[b.n.UNSIMPLIFIED_METRICS_LEVEL]:{[a.NUMBER_OF_PIPELINE_RUNS]:i.a(`sum(count by (pipelinerun) (${e}_pipelinerun_duration_seconds_count{pipeline="<%= name %>",exported_namespace="<%= namespace %>"}))`),[a.PIPELINE_RUN_TASK_RUN_DURATION]:i.a(`sum(${e}_pipelinerun_taskrun_duration_seconds_sum{pipeline="<%= name %>",exported_namespace="<%= namespace %>"})  by (pipelinerun, task)`),[a.PIPELINE_RUN_DURATION]:i.a(`sum(${e}_pipelinerun_duration_seconds_sum{pipeline="<%= name %>",exported_namespace="<%= namespace %>"})  by (pipelinerun)`),[a.PIPELINE_SUCCESS_RATIO]:i.a(`count(sort_desc(${e}_pipelinerun_duration_seconds_count{pipeline="<%= name %>",exported_namespace="<%= namespace %>"})) by(status)`)}}),f=e=>(e<0?"-":"")+(e=>0===e||e>=.001&&e<1e23?Object(p.cc)(e).string:e.toExponential(1))(Math.abs(e)),g=e=>h.b.format(e),E=(e,t,n)=>{const{metric:a,values:r}=e,s=l.a(r,e=>{const t=Number(e[1]);return{x:new Date(new Date(1e3*e[0]).setHours(0,0,0,0)),y:Number.isNaN(t)?null:t,metric:a}}),o=Number(c.a(s,"[0].x")),i=Number(c.a(u.a(s),"x")),m=n/t;return d.a(o,i,m).forEach((e,t)=>{const n=new Date(e);c.a(s,[t,"x"])>n&&s.splice(t,0,{x:n,y:null,metric:a})}),s},y=(e,t,n)=>{var a;const r=(null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.result)||[];return null==r?void 0:r.map(e=>{var a;return null===(a=null==e?void 0:e.values)||void 0===a?void 0:a.map(([a,r])=>{var s,o;return{x:null!==(s=null==t?void 0:t(e))&&void 0!==s?s:new Date(1e3*a),y:null!==(o=null==n?void 0:n(r))&&void 0!==o?o:parseFloat(r),metric:null==e?void 0:e.metric,time:a}})})},O=e=>{const t=[];if(!e)return t;const n=Object(s.b)("1d"),a=Math.round(e/n),r=new Date(Date.now());for(r.setHours(0,0,0,0);t.length-1<a;)t.push(r.getTime()),r.setDate(r.getDate()-1);return t.slice(0,a)},_=(e,t)=>{if(0===e)return o.a.t("pipelines-plugin~less than a sec");let n=Math.round(e),a=0,r=0,s="";return n>=60&&(a=Math.floor(n/60),n%=60),a>=60&&(r=Math.floor(a/60),a%=60),r>0&&(s+=t?o.a.t("pipelines-plugin~{{count}} hour",{count:r}):o.a.t("pipelines-plugin~{{hr}}h",{hr:r}),s+=" "),a>0&&(s+=t?o.a.t("pipelines-plugin~{{count}} minute",{count:a}):o.a.t("pipelines-plugin~{{min}}m",{min:a}),s+=" "),n>0&&(s+=t?o.a.t("pipelines-plugin~{{count}} second",{count:n}):o.a.t("pipelines-plugin~{{sec}}s",{sec:n})),s.trim()},k=()=>({"1d":o.a.t("pipelines-plugin~1 day"),"3d":o.a.t("pipelines-plugin~3 days"),"1w":o.a.t("pipelines-plugin~1 week"),"2w":o.a.t("pipelines-plugin~2 weeks"),"3w":o.a.t("pipelines-plugin~3 weeks"),"4w":o.a.t("pipelines-plugin~4 weeks")}),j=e=>{let t=0;return m.a(e,"x").map(e=>{const n=e.y-t;return t+=e.y,Object.assign(Object.assign({},e),{y:n})})}},5651:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return i})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return d}));var a=n(8),r=n(1402);const s=e=>{const[t,n]=null==e?void 0:e.match(/^[0-9]+|[a-zA-Z]*/g);return{autoscalewindow:Number(t)||"",autoscalewindowUnit:n||"s",defaultAutoscalewindowUnit:n||"s"}},o=/ *\([^)]*\) */g,i=e=>e.replace(o,""),l=(e,t)=>{var n;if(!(null===(n=e.spec)||void 0===n?void 0:n.ref))return null;const{apiVersion:s,kind:o,name:i}=e.spec.ref;return Object(a.n)(r.l)===s&&o===r.l.kind&&i!==t?i:null},c=(e,t)=>[...new Set(null==e?void 0:e.filter(e=>!((null==t?void 0:t.length)>0)||(null==t?void 0:t.includes(i(e)))).map(e=>i(e)))],u=e=>e.some(e=>new RegExp(o).test(e)),d=(e,t=[],n)=>e.filter(e=>u([e])).map(e=>{var a,r;const s=null==t?void 0:t.find(t=>t.metadata.name===i(e));return s&&(null===(r=null===(a=s.spec)||void 0===a?void 0:a.ref)||void 0===r?void 0:r.name)!==n?s:null}).filter(e=>!!e)},5652:function(e,t,n){"use strict";var a=n(5619),r=n(8),s=n(5663);class o extends s.a{constructor(){super(),this.resource=void 0,this.resourceKind=void 0,Object(a.p)(this,{resource:a.q.ref,resourceKind:a.q})}getResource(){return this.resource}setResource(e){this.resource=e}getResourceKind(){return this.resourceKind||Object(r.Db)(this.resource)}setResourceKind(e){this.resourceKind=e}setModel(e){super.setModel(e),"resource"in e&&(this.resource=e.resource),"resourceKind"in e&&(this.resourceKind=e.resourceKind)}}t.a=o},5653:function(e,t,n){"use strict";n.d(t,"g",(function(){return O})),n.d(t,"e",(function(){return k})),n.d(t,"c",(function(){return R})),n.d(t,"b",(function(){return T})),n.d(t,"a",(function(){return N})),n.d(t,"f",(function(){return S})),n.d(t,"d",(function(){return P}));var a=n(5596),r=n(320),s=n(2338),o=n(689),i=n(5621),l=n(5624),c=n(77),u=n(5591),d=n(4359),m=n(10),p=n(15),h=n(5586),b=n(5620),v=n(5656),f=n(5588),g=n(5648),E=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((a=a.apply(e,t||[])).next())}))};const y={dryRun:"All"},O=e=>o.object().shape({name:o.string().matches(p.Yd,{message:e("pipelines-plugin~Name must consist of lower-case letters, numbers and hyphens. It must start with a letter and end with a letter or number."),excludeEmptyString:!0}).required(e("pipelines-plugin~Required")),gitUrl:o.string().matches(i.f,e("pipelines-plugin~Invalid Git URL.")).required(e("pipelines-plugin~Required")),accessToken:o.string(),webhook:o.object().when("gitProvider",{is:u.b.BITBUCKET,then:o.object().shape({user:o.string().matches(l.a,{message:e("pipelines-plugin~Name must consist of lower-case letters, numbers, underscores and hyphens. It must start with a letter and end with a letter or number."),excludeEmptyString:!0}).required(e("pipelines-plugin~Required"))})}).when(["method","gitProvider","gitUrl"],{is:(e,t,n)=>n&&!(t===u.b.GITHUB&&e===u.b.GITHUB),then:o.object().shape({token:o.string().test("oneOfRequired","Required",(function(){return this.parent.token||this.parent.secretRef})),secretRef:o.string().test("oneOfRequired","Required",(function(){return this.parent.token||this.parent.secretRef}))})})}),_=e=>o.object().shape({webhook:o.object().when("gitProvider",{is:u.b.BITBUCKET,then:o.object().shape({user:o.string().matches(p.Yd,{message:e("pipelines-plugin~Name must consist of lower-case letters, numbers and hyphens. It must start with a letter and end with a letter or number."),excludeEmptyString:!0}).required(e("pipelines-plugin~Required"))})}).when(["method","gitProvider","gitUrl"],{is:(e,t,n)=>n&&t&&!(t===u.b.GITHUB&&e===u.b.GITHUB),then:o.object().shape({token:o.string().test("oneOfRequired","Required",(function(){return this.parent.token||this.parent.secretRef})),secretRef:o.string().test("oneOfRequired","Required",(function(){return this.parent.token||this.parent.secretRef}))})})}),k=e=>o.object().shape({repository:o.object().when(["pipelineType","pipelineEnabled"],{is:(e,t)=>e===b.a.PAC&&t,then:_(e)})}),j=(e,t)=>e.startsWith(`https://${t}/`)||e.startsWith(`https://www.${t}/`)||e.includes(`@${t}:`),R=e=>i.f.test(e)?j(e,"github.com")?u.b.GITHUB:j(e,"bitbucket.org")?u.b.BITBUCKET:j(e,"gitlab.com")?u.b.GITLAB:u.b.UNSURE:u.b.INVALID,T=(e,t,n={},s)=>E(void 0,void 0,void 0,(function*(){var o,i,l;const{name:p,gitUrl:b,webhook:{secretObj:v,method:f,token:O,secret:_,user:k}}=e,j=r.Base64.encode(_),T=R(b);let N;O&&"token"===f?N=yield((e,t,n,a,s,o,i)=>E(void 0,void 0,void 0,(function*(){const l={apiVersion:m.SecretModel.apiVersion,kind:m.SecretModel.kind,metadata:{generateName:e+"-token-",namespace:a},type:d.SecretType.opaque,stringData:Object.assign(Object.assign({"provider.token":n},o&&{"webhook.secret":o}),s===u.b.BITBUCKET&&{"webhook.auth":r.Base64.encode(`${t}:${n}`)})};return Object(c.g)({model:m.SecretModel,data:l,ns:a,queryParams:i?y:{}})})))(p,k,O,t,T,_,s):"secret"===f&&v&&(null===(o=null==v?void 0:v.data)||void 0===o?void 0:o["webhook.secret"])!==j&&(yield Object(c.p)({model:m.SecretModel,resource:v,data:[{op:"replace",path:"/data/webhook.secret",value:r.Base64.encode(_)}]}));const S=a(b).source,P=N||v,C={kind:h.RepositoryModel.kind,apiVersion:"pipelinesascode.tekton.dev/v1alpha1",metadata:Object.assign({name:p,namespace:t},n||{}),spec:Object.assign({url:b},P||"github.com"!==S?{git_provider:Object.assign(Object.assign(Object.assign({},g.j.includes(S)?{}:{url:S}),"bitbucket.org"===S?{user:k}:{}),P?{secret:{name:null===(i=null==P?void 0:P.metadata)||void 0===i?void 0:i.name,key:"provider.token"},webhook_secret:{name:null===(l=null==P?void 0:P.metadata)||void 0===l?void 0:l.name,key:"webhook.secret"}}:{})}:{})};return yield Object(c.g)({model:h.RepositoryModel,data:C,ns:t,queryParams:s?y:{}})})),N=(e,t,n)=>E(void 0,void 0,void 0,(function*(){var a,s,o;const{gitUrl:i,webhook:{method:l,token:c,secret:d,url:m,secretObj:p,user:h}}=e,b=R(i),v=Object(u.e)(i,b);let f,g=!0;n&&"false"===(null===(a=null==t?void 0:t.data)||void 0===a?void 0:a["webhook-ssl-verification"])&&(g=!1),f=b===u.b.BITBUCKET?"token"===l?r.Base64.encode(`${h}:${c}`):r.Base64.decode(null===(s=null==p?void 0:p.data)||void 0===s?void 0:s["webhook.auth"]):"token"===l?c:r.Base64.decode(null===(o=null==p?void 0:p.data)||void 0===o?void 0:o["provider.token"]);return yield v.createRepoWebhook(f,m,g,d)})),S=e=>{if(!i.f.test(e))return;const t=e.replace(/\/$/,"").split("/").pop();return n=t,p.Yd.test(n)?"git-"+n:"git-"+s.a(n);var n},P=(e,t)=>E(void 0,void 0,void 0,(function*(){var n;let a;try{const[t]=yield Object(c.n)({model:m.ConfigMapModel,queryParams:{ns:f.g,labelSelector:{matchLabels:{"pipelinesascode.openshift.io/runtime":g.g[e]||e}}}});a=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.template}catch(e){console.log("failed to fetch runtime template:",e)}return null!=a?a:yield(e=>E(void 0,void 0,void 0,(function*(){var t;let n=(e=>`apiVersion: tekton.dev/v1beta1\nkind: PipelineRun\nmetadata:\n  name: ${null!=e?e:"pull_request"}\n  annotations:\n    # The event we are targeting as seen from the webhook payload\n    # this can be an array too, i.e: [pull_request, push]\n    pipelinesascode.tekton.dev/on-event: "[pull_request, push]"\n\n    # The branch or tag we are targeting (ie: main, refs/tags/*)\n    pipelinesascode.tekton.dev/on-target-branch: "main"\n\n    # Fetch the git-clone task from hub, we are able to reference later on it\n    # with taskRef and it will automatically be embedded into our pipeline.\n    pipelinesascode.tekton.dev/task: "git-clone"\n\n    # You can add more tasks in here to reuse, browse the one you like from here\n    # https://hub.tekton.dev/\n    # example:\n    # pipelinesascode.tekton.dev/task-2: "[maven, buildah]"\n\n    # How many runs we want to keep attached to this event\n    pipelinesascode.tekton.dev/max-keep-runs: "5"\nspec:\n  params:\n    # The variable with brackets are special to Pipelines as Code\n    # They will automatically be expanded with the events from Github.\n    - name: repo_url\n      value: "{{ repo_url }}"\n    - name: revision\n      value: "{{ revision }}"\n  pipelineSpec:\n    params:\n      - name: repo_url\n      - name: revision\n    workspaces:\n      - name: source\n      - name: basic-auth\n    tasks:\n      - name: fetch-repository\n        taskRef:\n          name: git-clone\n        workspaces:\n          - name: output\n            workspace: source\n          - name: basic-auth\n            workspace: basic-auth\n        params:\n          - name: url\n            value: $(params.repo_url)\n          - name: revision\n            value: $(params.revision)\n\n      # Customize this task if you like, or just do a taskRef\n      # to one of the hub task.\n      - name: noop-task\n        runAfter:\n          - fetch-repository\n        workspaces:\n          - name: source\n            workspace: source\n        taskSpec:\n          workspaces:\n            - name: source\n          steps:\n            - name: noop-task\n              image: registry.access.redhat.com/ubi9/ubi-micro\n              workingDir: $(workspaces.source.path)\n              script: |\n                exit 0\n  workspaces:\n  - name: source\n    volumeClaimTemplate:\n      spec:\n        accessModes:\n          - ReadWriteOnce\n        resources:\n          requests:\n            storage: 1Gi\n  # This workspace will inject secret to help the git-clone task to be able to\n  # checkout the private repositories\n  - name: basic-auth\n    secret:\n      secretName: "{{ git_auth_secret }}"`)(e);try{const e=yield Object(c.j)({model:m.ConfigMapModel,ns:f.g,name:v.h});(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.template)&&(n=e.data.template)}catch(e){console.log("failed to fetch default template:",e)}return n})))(t)}))},5655:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(689);const r=/^\/.*$/,s=e=>a.object().shape({containerName:a.string(),showForm:a.boolean(),enabled:a.boolean(),modified:a.boolean(),data:a.object().when("showForm",{is:!0,then:a.object().shape({periodSeconds:a.number().integer(e("devconsole~Value must be an integer.")).min(1,e("devconsole~Period must be greater than or equal to 1.")).max(2147483647,e("devconsole~Value is larger than maximum value allowed.")),initialDelaySeconds:a.number().integer(e("devconsole~Value must be an integer.")).min(0,e("devconsole~Initial delay must be greater than or equal to 0.")).max(2147483647,e("devconsole~Value is larger than maximum value allowed.")),failureThreshold:a.number().integer(e("devconsole~Value must be an integer.")).min(1,e("devconsole~Failure threshold must be greater than or equal to 1.")),timeoutSeconds:a.number().integer(e("devconsole~Value must be an integer.")).min(1,e("devconsole~Timeout must be greater than or equal to 1.")).max(2147483647,e("devconsole~Value is larger than maximum value allowed.")),successThreshold:a.number().integer(e("devconsole~Value must be an integer.")).min(1,e("devconsole~Success threshold must be greater than or equal to 1.")).max(2147483647,e("devconsole~Value is larger than maximum value allowed.")),requestType:a.string(),httpGet:a.object().when("requestType",{is:"httpGet",then:a.object({path:a.string().matches(r,{message:e("devconsole~Path must start with /."),excludeEmptyString:!0}),port:a.number().required(e("devconsole~Required"))})}),tcpSocket:a.object().when("requestType",{is:"tcpSocket",then:a.object({port:a.number().required(e("devconsole~Required"))})}),exec:a.object().when("requestType",{is:"command",then:a.object({command:a.array().of(a.string().required(e("devconsole~Required")))})})})})}),o=e=>a.object().shape({readinessProbe:s(e),livenessProbe:s(e),startupProbe:s(e)})},5656:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"h",(function(){return u}));const a="https://github.com/settings/apps/new",r="https://docs.github.com/en/developers/apps/getting-started-with-apps/about-apps#about-github-apps",s="https://api.github.com/app-manifests",o="pipelines-as-code-interceptor",i="pipelines-as-code-secret",l="pipelines-ci-clustername",c="pipelines-as-code-info",u="pipelines-as-code-pipelinerun-generic"},5657:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return i}));const a=e=>"Topology/ComponentFactory"===e.type,r=e=>"Topology/DataModelFactory"===e.type,s=e=>"Topology/CreateConnector"===e.type,o=e=>"Topology/DisplayFilters"===e.type,i=e=>"Topology/Decorator"===e.type},5658:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(0);const r=a.createContext({})},5659:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var a=n(2221);const r="operator-backed-service",s=a.h,o=a.f,i=a.g},5661:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var a=n(447),r=n(1941),s=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((a=a.apply(e,t||[])).next())}))};const o=e=>s(void 0,void 0,void 0,(function*(){var t,n,s;if(!(yield e.isFuncYamlPresent()))return{values:{}};const o=yield e.getFuncYamlContent();try{const e=a.a(o)?Object(r.c)(o):o,i=null===(t=null==e?void 0:e.build)||void 0===t?void 0:t.builder,l=null===(n=null==e?void 0:e.build)||void 0===n?void 0:n.buildEnvs,c=null==e?void 0:e.runtime;return{values:{builder:i,runtime:c,builderEnvs:l,runtimeEnvs:null===(s=null==e?void 0:e.run)||void 0===s?void 0:s.envs}}}catch(e){return{values:{}}}})),i=(e,t)=>s(void 0,void 0,void 0,(function*(){var n,a;if((yield t.isFuncYamlPresent())&&e){const e=yield t.getFuncYamlContent(),s=Object(r.c)(e);if(!(null===(n=null==s?void 0:s.build)||void 0===n?void 0:n.builder)||"s2i"===(null===(a=null==s?void 0:s.build)||void 0===a?void 0:a.builder))return!0}return!1}))},5662:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var a=n(0),r=n(5619),s=n(5589),o=n(5647),i=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((a=a.apply(e,t||[])).next())}))};class l{constructor(e){this.extensions={},this.namespace=void 0,this.model={nodes:[],edges:[]},this.loaded=!1,this.loadError=void 0,this.extensionsLoaded=!1,this.watchedResources={},this.updateWatchedResources=()=>{const e=Object.keys(this.extensions);this.watchedResources=e.reduce((e,t)=>{if(this.extensions[t].resources){const n=this.extensions[t].resources(this.namespace);Object.keys(n).forEach(t=>{e[t]||(e[t]=n[t])})}return e},Object(o.d)(this.namespace))},this.updateExtension=(e,t)=>{this.extensions[e]=Object.assign(Object.assign({},this.extensions[e]||{}),t),this.updateExtensionsLoaded(),this.updateWatchedResources()},this.getWorkloadResources=e=>{const t=this.watchedResources,n=Object.keys(t).reduce((e,n)=>(e[n]=t[n].kind,e),{});return Object(o.i)(e,n,this.workloadKeys)},this.getExtensionModels=e=>i(this,void 0,void 0,(function*(){const t={nodes:[],edges:[]},n=this.dataModelGetters;if(!(null==n?void 0:n.length))return Promise.resolve(t);const a=this.dataModelDepicters,r=this.getWorkloadResources(e),s=n.map(t=>{try{return t(this.namespace,e,r)}catch(e){return console.error("Unable to add some resources to topology",e),null}});return yield Promise.all(s).then(e=>{e.forEach(e=>{if(e)try{Object(o.b)(e,t,a)}catch(e){console.error("Unable to add some resources to topology",e)}})}),Promise.resolve(t)})),this.reconcileModel=(e,t)=>{this.dataModelReconcilers.forEach(n=>{try{n(e,t)}catch(e){console.error("Unable to reconcile some resources in topology",e)}})},this.namespace=e,Object(r.p)(this,{namespace:r.q,model:r.q.ref,loaded:r.q,loadError:r.q,extensionsLoaded:r.q,watchedResources:r.q.ref,isEmptyModel:r.i})}updateExtensionsLoaded(){const e=Object.keys(this.extensions),t=this.extensionsLoaded;this.extensionsLoaded=e.length>1&&e.every(e=>!!this.extensions[e].dataModelGetter&&!!this.extensions[e].dataModelDepicter&&!!this.extensions[e].dataModelReconciler),!t&&this.extensionsLoaded&&this.onExtensionsLoaded&&this.onExtensionsLoaded(this)}getExtensions(){return this.extensions}getExtension(e){return this.extensions[e]}get workloadKeys(){const e=[...s.a];return Object.keys(this.extensions).forEach(t=>{this.extensions[t].workloadKeys&&this.extensions[t].workloadKeys.forEach(t=>{e.includes(t)||e.push(t)})}),e}get prioritizedKeys(){return Object.keys(this.extensions).sort((e,t)=>this.extensions[e].priority-this.extensions[t].priority)}get dataModelGetters(){return this.prioritizedKeys.reduce((e,t)=>(this.extensions[t].dataModelGetter&&e.push(this.extensions[t].dataModelGetter),e),[])}get dataModelDepicters(){return this.prioritizedKeys.reduce((e,t)=>(this.extensions[t].dataModelDepicter&&e.push(this.extensions[t].dataModelDepicter),e),[])}get dataModelReconcilers(){return this.prioritizedKeys.reduce((e,t)=>(this.extensions[t].dataModelReconciler&&e.push(this.extensions[t].dataModelReconciler),e),[])}get isEmptyModel(){var e,t,n;return 0===(null!==(n=null===(t=null===(e=this.model)||void 0===e?void 0:e.nodes)||void 0===t?void 0:t.length)&&void 0!==n?n:0)}}const c=Object(a.createContext)(null)},5663:function(e,t,n){"use strict";var a=n(5585),r=n(5619);const s=(e=a.AnchorEnd.both,t="")=>`${e}:${t}`;class o extends a.BaseElement{constructor(){super(),this.anchors={[s()]:new a.CenterAnchor(this)},this.dimensions=new a.Dimensions,this.dimensionsInitialized=!1,this.positioned=!1,this.uncollapsedCenter=null,this.position=new a.Point,this.group=!1,this.collapsed=!1,this.labelPosition=a.LabelPosition.bottom,this.shape=void 0,this.status=void 0,Object(r.p)(this,{anchors:r.q.shallow,dimensions:r.q.ref,dimensionsInitialized:r.q,position:r.q.ref,nodes:r.i,group:r.q,collapsed:r.q,labelPosition:r.q,shape:r.q,status:r.q,groupBounds:r.i,sourceEdges:r.i,targetEdges:r.i,setDimensions:r.f,setBounds:r.f,setPosition:r.f})}get nodes(){return this.isCollapsed()?[]:this.getChildren().filter(a.isNode)}get groupBounds(){const e=this.getChildren().filter(a.isNode).filter(e=>e.isVisible());if(!e.length)return this.getInternalBounds();let t;e.forEach(e=>{if(Object(a.isNode)(e)){const{padding:n}=e.getStyle(),a=e.getBounds();!e.isGroup()&&n&&a.padding(e.getStyle().padding),t?t.union(a):t=a.clone()}}),t||(t=new a.Rect);const{padding:n}=this.getStyle();return t.padding(n)}get sourceEdges(){return this.getGraph().getEdges().filter(e=>e.getSource()===this)}get targetEdges(){return this.getGraph().getEdges().filter(e=>e.getTarget()===this)}getChildren(){return this.isCollapsed()?super.getChildren().filter(a.isEdge):super.getChildren()}getAllNodeChildren(){return super.getChildren().reduce((e,t)=>(Object(a.isNode)(t)&&e.push(t.isGroup()?t.getAllNodeChildren():t),e),[])}getKind(){return a.ModelKind.node}getInternalBounds(){const{position:e,dimensions:t}=this;return new a.Rect(e.x,e.y,t.width,t.height)}getBounds(){return this.group&&!this.collapsed?this.groupBounds:this.getInternalBounds()}setBounds(e){const{width:t,height:n}=this.dimensions;e.width===t&&e.height===n||(this.dimensions=new a.Dimensions(e.width,e.height));const{x:r,y:s}=this.position;e.x===r&&e.y===s||this.setPosition(new a.Point(e.x,e.y))}getPosition(){return this.isGroup()&&this.getChildren().length&&!this.collapsed?this.getBounds().getCenter():this.position}updateChildrenPositions(e,t){const n=e.x-t.x,r=e.y-t.y;this.getChildren().forEach(e=>{if(Object(a.isNode)(e)){const t=e,s=t.getPosition(),o=new a.Point(s.x+n,s.y+r);t.setPosition(o)}})}setPosition(e){if(this.isGroup()&&this.getChildren().length&&!this.collapsed){const t=this.getBounds().getCenter();this.updateChildrenPositions(e,t)}else{this.position=e,this.positioned=!0;try{this.getController().fireEvent(a.NODE_POSITIONED_EVENT,{node:this})}catch(e){}}}isPositioned(){return this.positioned}getDimensions(){return this.dimensions}setDimensions(e){this.dimensions=e,this.dimensionsInitialized=!0}isDimensionsInitialized(){if(!this.dimensionsInitialized&&this.isGroup()){const e=this.getChildren().filter(a.isNode);if(0===e.length)return this.dimensionsInitialized;e.every(e=>e.isDimensionsInitialized())&&(this.dimensionsInitialized=!0)}return this.dimensionsInitialized}getAnchor(e,t){let n=this.anchors[s(e,t)];return!n&&t&&(n=this.anchors[s(e)]),n||e!==a.AnchorEnd.source&&e!==a.AnchorEnd.target||(n=this.anchors[s(a.AnchorEnd.both,t)],!n&&t&&(n=this.anchors[s(a.AnchorEnd.both)])),n}setAnchor(e,t,n){const a=s(t,n);e?this.anchors[a]=e:delete this.anchors[a]}getNodes(){return this.nodes}isGroup(){return this.group}setGroup(e){this.group=e}isCollapsed(){return this.collapsed}setCollapsed(e){if(e!==this.collapsed){const t=this.getBounds().getCenter();!e&&this.uncollapsedCenter?(this.updateChildrenPositions(t,this.uncollapsedCenter),this.uncollapsedCenter=null,this.collapsed=e):(this.uncollapsedCenter=e?t:null,this.collapsed=e,this.setBounds(this.getBounds().setCenter(t.x,t.y))),this.getController().fireEvent(a.NODE_COLLAPSE_CHANGE_EVENT,{node:this})}}getLabelPosition(){return this.labelPosition}setLabelPosition(e){this.labelPosition=e}getNodeShape(){return this.shape||(this.group?a.NodeShape.rect:a.NodeShape.ellipse)}setNodeShape(e){this.shape=e}getNodeStatus(){return this.status||a.NodeStatus.default}setNodeStatus(e){this.status=e}getSourceEdges(){return this.sourceEdges}getTargetEdges(){return this.targetEdges}isVisible(){return super.isVisible()&&this.isDimensionsInitialized()}setModel(e){let t,n;super.setModel(e),"width"in e&&null!=e.width&&e.width!==this.dimensions.width&&(t||(t=this.dimensions.clone()),t.width=e.width),"height"in e&&null!=e.height&&e.height!==this.dimensions.height&&(t||(t=this.dimensions.clone()),t.height=e.height),t&&this.setDimensions(t),"x"in e&&null!=e.x&&e.x!==this.position.x&&(n||(n=this.position.clone()),n.x=e.x),"y"in e&&null!=e.y&&e.y!==this.position.y&&(n||(n=this.position.clone()),n.y=e.y),n&&this.setPosition(n),"group"in e&&this.setGroup(!!e.group),"labelPosition"in e&&(this.labelPosition=e.labelPosition),"shape"in e&&(this.shape=e.shape),"status"in e&&(this.status=e.status),"collapsed"in e&&this.setCollapsed(!!e.collapsed)}toModel(){return Object.assign(Object.assign({},super.toModel()),{x:this.isPositioned()?this.getPosition().x:void 0,y:this.isPositioned()?this.getPosition().y:void 0,width:this.isDimensionsInitialized()?this.getDimensions().width:void 0,height:this.isDimensionsInitialized()?this.getDimensions().height:void 0,collapsed:this.isCollapsed(),group:this.isGroup(),labelPosition:this.labelPosition,shape:this.shape,status:this.status})}translateToParent(e){if(!this.group||this.isCollapsed()){const{x:t,y:n}=this.getPosition();e.translate(t,n)}}translateFromParent(e){if(!this.group||this.isCollapsed()){const{x:t,y:n}=this.getPosition();e.translate(-t,-n)}}}t.a=o},5670:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(0),r=n(31),s=n(499),o=n(327),i=n(517),l=n(5);const c=e=>({watchURL:(t,n)=>e(Object(i.g)(t,n)),stopWatchURL:t=>e(Object(i.e)(t)),watchPrometheusQuery:(t,n,a)=>e(Object(i.f)(t,n,a)),stopWatchPrometheusQuery:(t,n)=>e(Object(i.d)(t,n))}),u=e=>({[o.a.URL]:e.dashboards.get(o.a.URL),[o.a.PROMETHEUS]:e.dashboards.get(o.a.PROMETHEUS),notificationAlerts:e.observe.get("notificationAlerts")}),d=e=>Object(r.connect)(u,c)(class extends a.Component{constructor(e){super(e),this.urls=[],this.queries=[],this.watchingAlerts=!1,this.watchURL=(e,t)=>{this.urls.push(e),this.props.watchURL(e,t)},this.watchPrometheus=(e,t,n)=>{this.queries.push(Object(i.c)(e,n)),this.props.watchPrometheusQuery(e,t,n)},this.stopWatchPrometheusQuery=(e,t)=>{const n=Object(i.c)(e,t);this.queries=this.queries.filter(e=>e!==n),this.props.stopWatchPrometheusQuery(e,t)},this.watchAlerts=()=>{this.watchingAlerts=!0},this.stopWatchAlerts=()=>{this.watchingAlerts=!1},this.watchK8sResource=e=>{this.setState(t=>({k8sResources:[...t.k8sResources,Object.assign(Object.assign({},e),{optional:!0})]}))},this.stopWatchK8sResource=e=>{this.setState(t=>({k8sResources:t.k8sResources.filter(t=>t.prop!==e.prop)}))},this.getExternalProps=e=>s.a(e,"watchURL","stopWatchURL","watchPrometheusQuery","stopWatchPrometheusQuery","watchAlerts","stopWatchAlerts",o.a.URL,o.a.PROMETHEUS,"notificationAlerts"),this.state={k8sResources:[]}}shouldComponentUpdate(e,t){var n,a,r,s,i,l;const c=this.urls.some(t=>this.props[o.a.URL].getIn([t,"data"])!==e[o.a.URL].getIn([t,"data"])||this.props[o.a.URL].getIn([t,"loadError"])!==e[o.a.URL].getIn([t,"loadError"])),u=this.queries.some(t=>this.props[o.a.PROMETHEUS].getIn([t,"data"])!==e[o.a.PROMETHEUS].getIn([t,"data"])||this.props[o.a.PROMETHEUS].getIn([t,"loadError"])!==e[o.a.PROMETHEUS].getIn([t,"loadError"])),d=(null===(a=null===(n=this.props)||void 0===n?void 0:n.notificationAlerts)||void 0===a?void 0:a.data)!==(null===(r=null==e?void 0:e.notificationAlerts)||void 0===r?void 0:r.data)||(null===(i=null===(s=this.props)||void 0===s?void 0:s.notificationAlerts)||void 0===i?void 0:i.loadError)!==(null===(l=null==e?void 0:e.notificationAlerts)||void 0===l?void 0:l.loadError),m=this.state.k8sResources!==t.k8sResources,p=this.getExternalProps(e),h=this.getExternalProps(this.props);return c||u||m||this.watchingAlerts&&d||Object.keys(p).length!==Object.keys(h).length||Object.keys(p).some(e=>p[e]!==h[e])}render(){return a.createElement(l.C,{resources:this.state.k8sResources},a.createElement(e,Object.assign({watchURL:this.watchURL,stopWatchURL:this.props.stopWatchURL,watchPrometheus:this.watchPrometheus,stopWatchPrometheusQuery:this.stopWatchPrometheusQuery,watchAlerts:this.watchAlerts,stopWatchAlerts:this.stopWatchAlerts,urlResults:this.props[o.a.URL],prometheusResults:this.props[o.a.PROMETHEUS],notificationAlerts:this.props.notificationAlerts,watchK8sResource:this.watchK8sResource,stopWatchK8sResource:this.stopWatchK8sResource},this.getExternalProps(this.props))))}})},5674:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o}));var a=n(5);const r=["configmaps","persistentvolumeclaims","pods","replicationcontrollers","resourcequotas","services","services.loadbalancers","services.nodeports","secrets","openshift.io/imagestreams"],s=(e,t)=>{let n=Object(a.Ib)(t),r=Object(a.Ib)(e);return n&&r||(n=parseInt(n,10),r=parseInt(r,10)),n&&r?n/r*100:0},o=({resourceName:e,used:t,hard:n})=>{const o=e.startsWith("count/")||r.includes(e),i=s(n,t);return{label:o?`${t||0} of ${n}`:Object(a.ec)(i).string,percent:i}}},5695:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a,r=n(0),s=n(18),o=n(1946),i=n(5727);n(5728);!function(e){e.light="light",e.default="default"}(a||(a={}));t.b=({children:e,disabled:t,onNamespaceChange:n,hideProjects:l=!1,hideApplications:c=!1,variant:u=a.default,toolbar:d})=>r.createElement("div",{className:"odc-namespaced-page"},r.createElement(o.NamespaceBar,{isDisabled:t,onNamespaceChange:n,hideProjects:l},!c&&r.createElement(i.a,{disabled:t}),d&&r.createElement("div",{className:"odc-namespaced-page__toolbar"},d)),r.createElement("div",{className:s("odc-namespaced-page__content",{["is-"+u]:u!==a.default})},e))},5704:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(13),o=n(5),i=n(69),l=n(15),c=n(5710),u=n(5647),d=n(5720),m=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};t.a=e=>{var{namespace:t}=e,n=m(e,["namespace"]);const{t:p}=Object(r.useTranslation)(),h=Object(i.z)(d.a),b=Object(i.z)(s.Zb),v=a.useMemo(()=>Object(c.b)(b),[b]),f=a.useMemo(()=>{let e=Object(u.d)(t);return[...h,...v].forEach(n=>{var a,r;const s=null===(r=(a=n.properties).resources)||void 0===r?void 0:r.call(a,t);s&&(e=Object.assign(Object.assign({},s),e))}),Object.keys(e).map(t=>Object.assign(Object.assign({},e[t]),{prop:t}))},[v,h,t]);return a.createElement(o.C,{resources:f},a.createElement(l.Nb,Object.assign({},n,{placeholder:p("topology~Select an application"),dataSelector:["metadata","labels","app.kubernetes.io/part-of"]})))}},5710:function(e,t,n){"use strict";n.d(t,"b",(function(){return d}));var a=n(0),r=n(13),s=n(8),o=n(69),i=n(5657),l=n(5714),c=n(5662),u=n(5715);const d=e=>e.map(e=>Object.assign(Object.assign({},e),{properties:Object.assign(Object.assign({},e.properties),{resources:t=>Object.entries(e.properties.resources||{}).reduce((n,[a,r])=>{const o=((e,t,n,a,r={})=>{if(!a)return Object.assign({namespace:e},r);if(a.version){const t=Object(s.Fb)(a);return Object.assign({namespace:e,kind:t},r)}const o=Object(s.wb)(a.group,a.kind);if(!o)return console.warn(`Plugin "${t.pluginID}": Could not find model (CRD) for group "${a.group}" and kind "${a.kind}" to determinate version. Please add a required flag to the extension to suppress this warning. The resource "${n}" will not be loaded and ignored in the topology view for now:`,t,n,a,r),null;const i=Object(s.Hb)(o);return Object.assign({namespace:e,kind:i},r)})(t,e,a,null==r?void 0:r.model,null==r?void 0:r.opts);return o&&(n[a]=o),n},{})})}));t.a=({namespace:e,children:t})=>{const[n,s]=a.useState(new c.a(e));a.useEffect(()=>{s(new c.a(e))},[e]);const m=Object(o.z)(i.c),p=Object(o.z)(r.Zb),h=a.useMemo(()=>d(p),[p]);return a.createElement(c.b.Provider,{value:n},e&&a.createElement(a.Fragment,null,[...h,...m].map(e=>a.createElement(l.a,{key:e.properties.id,dataModelFactory:e.properties}))),e&&a.createElement(u.a,null),t)}},5712:function(e,t,n){},5714:function(e,t,n){"use strict";var a=n(0),r=n(15),s=n(5662);t.a=({dataModelFactory:e})=>{const t=a.useContext(s.b),{id:n,priority:o,resources:i}=e,l=Object(r.De)(e.workloadKeys),c=a.useRef({priority:o,workloadKeys:l,resources:i});return a.useEffect(()=>{if(!t.getExtension(n)){c.current={priority:o,workloadKeys:l,resources:i},t.updateExtension(n,c.current);const{getDataModel:a,isResourceDepicted:r,getDataModelReconciler:s}=e;a?a().then(e=>{c.current.dataModelGetter=e,t.updateExtension(n,c.current)}).catch(()=>{c.current.dataModelGetter=()=>Promise.resolve({}),t.updateExtension(n,c.current)}):(c.current.dataModelGetter=()=>Promise.resolve({}),t.updateExtension(n,c.current)),r?r().then(e=>{c.current.dataModelDepicter=e,t.updateExtension(n,c.current)}).catch(()=>{c.current.dataModelDepicter=()=>!1,t.updateExtension(n,c.current)}):(c.current.dataModelDepicter=()=>!1,t.updateExtension(n,c.current)),s?s().then(e=>{c.current.dataModelReconciler=e,t.updateExtension(n,c.current)}).catch(()=>{c.current.dataModelReconciler=()=>{},t.updateExtension(n,c.current)}):(c.current.dataModelReconciler=()=>{},t.updateExtension(n,c.current))}},[t,e,n,o,i,l]),null}},5715:function(e,t,n){"use strict";var a=n(0),r=n(5585),s=n(22),o=n(108),i=n(15),l=n(5662),c=n(5716),u=n(5718);t.a=Object(r.observer)(({trafficData:e})=>{const t=a.useContext(l.b),{namespace:n,extensionsLoaded:r,watchedResources:d}=t,[m,p]=a.useState(),h=Object(u.a)(n),b=a.useMemo(()=>n&&r?d:{},[r,d,n]),v=Object(i.Ce)(p,250),f=Object(o.b)(b);return a.useEffect(()=>v(f),[v,f]),a.useEffect(()=>{t.model=null},[n]),a.useEffect(()=>{s.a(m)||Object(c.a)(t,m,e,h).then(e=>{t.loadError=e.loadError,e.loaded&&(t.loaded=!0,t.model=e.model)}).catch(()=>{})},[m,e,t,h]),null})},5716:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(5717);const r=(e,t,n,r)=>{const{extensionsLoaded:s,watchedResources:o}=e;if(!s||!t)return Promise.resolve({loaded:!1,loadError:"",model:null});const i=Object.keys(t).find(e=>(e=>t[e].loadError&&!o[e].optional?t[e].loadError:"")(e));if(i)return Promise.resolve({loaded:!1,loadError:t[i].loadError,model:null});if(!Object.keys(t).every(e=>(e=>t[e].loaded||t[e].loadError&&o[e].optional)(e)))return Promise.resolve({loaded:!1,loadError:"",model:null});const l=e.getWorkloadResources(t),c=e.dataModelDepicters;return e.getExtensionModels(t).then(s=>{const o=Object(a.a)(s,e.namespace,t,l,c,n,r);return e.reconcileModel(o,t),Promise.resolve({loaded:!0,loadError:"",model:o})})}},5717:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(1401),r=n(15),s=n(2221),o=n(5589),i=n(5647);const l=(e,t)=>{const n=e.nodes.filter(({data:e})=>e.nodeType===s.y);return e.edges.reduce((e,{data:a})=>{const{data:r}=n.find(e=>e.data.id===a.source),{data:o}=n.find(e=>e.data.id===a.target),i=t.find(e=>e.metadata.name===r[r.nodeType]),l=t.find(e=>e.metadata.name===o[o.nodeType]);return i&&l?[...e,{id:`${i.metadata.uid}_${l.metadata.uid}`,type:s.x,source:i.metadata.uid,target:l.metadata.uid,data:a.traffic}]:e},[])},c=(e,t,n,c,u,d,m)=>{const p=(e=>{const t={nodes:[],edges:[]};return o.a.forEach(n=>{var o,l;if(null===(l=null===(o=null==e?void 0:e[n])||void 0===o?void 0:o.data)||void 0===l?void 0:l.length){const o={nodes:[],edges:[]};e[n].data.forEach(t=>{const l=Object(r.yc)(n,t,e);if(l){const n=Object(i.c)(t,l,s.y,Object(a.d)("icon-openshift"),void 0,e);o.nodes.push(Object(i.h)(t,s.y,n,i.a)),Object(i.j)(Object(i.g)(t),o.nodes)}}),Object(i.b)(o,t)}}),t})(Object.assign(Object.assign({},n),{monitoringAlerts:m}));return Object(i.b)(p,e,u),(e=>{e.nodes.forEach(t=>{var n,a;t.type===s.u&&(t.children=t.children.filter(t=>e.nodes.find(e=>e.id===t)),t.data.groupResources=null!==(a=null===(n=t.children)||void 0===n?void 0:n.map(t=>e.nodes.find(e=>t===e.id)))&&void 0!==a?a:[])}),e.nodes=e.nodes.filter(e=>e.type!==s.u||e.children.length>0)})(e),((e,t)=>{t.forEach(n=>{e.edges.push(...Object(i.f)(n,t))})})(e,c),((e,t,n)=>{n&&e.edges.push(...l(n,t))})(e,c,d),e}},5718:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n(5719),s=n(58),o=n(15);const i=e=>{const[t,n,i]=Object(r.a)({namespace:e}),l=a.useMemo(()=>{let e;return i||n||(e=Object(s.j)(null==t?void 0:t.data).alerts,e.forEach(e=>{delete e.activeAt,e.rule&&(delete e.rule.evaluationTime,delete e.rule.lastEvaluation,e.rule.alerts&&e.rule.alerts.forEach(e=>{delete e.activeAt}))})),{data:e,loaded:!i,loadError:n}},[n,i,t]);return Object(o.De)(l)}},5719:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(763),r=n(436);const s=({delay:e,namespace:t})=>{const n=Object(r.b)({endpoint:r.a.RULES,namespace:t});return Object(a.useURLPoll)(n,e,t)}},5720:function(e,t,n){"use strict";var a=n(5657);n.d(t,"a",(function(){return a.c}))},5727:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(31),o=n(53),i=n(518),l=n(15),c=n(5704);t.a=Object(s.connect)(e=>({namespace:Object(i.d)(e),application:Object(i.c)(e)}),e=>({onChange:t=>{e(Object(o.k)(t))}}))(({namespace:e,application:t,onChange:n,disabled:s})=>{const{t:o}=Object(r.useTranslation)(),i=o("topology~All applications"),u=o("topology~No application group"),d=t===l.b?i:t===l.mc?u:t,[m,p]=a.useState(d);if(a.useEffect(()=>{s||p(d)},[s,d]),e===l.c)return null;return a.createElement(c.a,{className:"co-namespace-selector",buttonClassName:"pf-m-plain",namespace:e,title:m&&a.createElement("span",{className:"btn-link__title"},m),titlePrefix:o("topology~Application"),allSelectorItem:{allSelectorKey:l.b,allSelectorTitle:i},noneSelectorItem:{noneSelectorKey:l.mc,noneSelectorTitle:u},selectedKey:t||l.b,onChange:(e,t)=>{t===l.b?n(t):n(e)},userSettingsPrefix:l.f,storageKey:l.e,disabled:s})})},5728:function(e,t,n){},5732:function(e,t,n){},5734:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a=(e,t)=>Object.assign(Object.assign({},e),{prop:`${t}-${e.prop}`})},5735:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var a=n(0),r=n(353),s=n(19),o=n(7),i=n(14),l=n(13),c=n(517),u=n(5670),d=n(1406),m=n(5),p=n(980),h=n(108),b=n(8),v=n(15),f=n(30),g=n(119),E=n(2229);n(5828);const y=a.memo(({current:e,title:t,humanize:n,consumers:i,namespace:l,position:c=r.b.top,description:u,children:d})=>{const{t:m}=Object(o.useTranslation)(),[p,h]=a.useState(!1),b=a.useCallback(()=>h(!0),[]),v=a.useCallback(()=>h(!1),[]);return e?a.createElement(r.a,{position:c,headerContent:m("console-shared~{{title}} breakdown",{title:t}),bodyContent:a.createElement(k,{humanize:n,consumers:i,namespace:l,isOpen:p,description:u},d),enableFlip:!0,onShow:b,onHide:v,maxWidth:"21rem"},a.createElement(s.a,{variant:"link",isInline:!0},e)):null});t.b=y;const O=e=>{switch(e){case l.m.ERROR:return a.createElement(g.h,null);case l.m.WARN:return a.createElement(g.m,null);default:return null}},_=({limitState:e,requestedState:t,total:n,limit:r,current:s,available:i,requested:c})=>{const{t:u}=Object(o.useTranslation)();return(!!e&&e!==l.m.OK||!!t&&t!==l.m.OK)&&a.createElement("ul",{className:"co-utilization-card-popover__consumer-list"},a.createElement(E.default,{value:n},u("console-shared~Total capacity")),a.createElement(E.default,{value:r,icon:O(e)},u("console-shared~Total limit")),a.createElement(E.default,{value:s},u("console-shared~Current utilization")),a.createElement(E.default,{value:i},u("console-shared~Current available capacity")),a.createElement(E.default,{value:c,icon:O(t)},u("console-shared~Total requested")))},k=Object(u.a)(a.memo(({humanize:e,consumers:t,namespace:n,watchPrometheus:r,stopWatchPrometheusQuery:s,prometheusResults:u,isOpen:g,description:E,children:y})=>{const{t:O}=Object(o.useTranslation)(),[_,k]=a.useState(t[0]),R=Object(l.jc)()[0],T=Object(v.Fe)(f.A.CAN_GET_NS)&&!!window.SERVER_FLAGS.prometheusBaseURL,{query:N,model:S,metric:P,fieldSelector:C}=_,w=a.useMemo(()=>g?((e,t,n)=>({isList:!0,kind:e.crd?Object(b.Hb)(e):e.kind,fieldSelector:n,namespace:t}))(S,n,C):null,[C,g,S,n]),[x,I,D]=Object(h.a)(w);a.useEffect(()=>g?(r(N,n),()=>{s(N)}):()=>{},[N,s,r,n,g]);const A=[],[M,U]=Object(c.b)(u,N),L=Object(d.a)(M,P);if(w&&I&&!D)for(const t of L){if(x.some(e=>Object(v.dd)(e)===t.metric[P]&&(!S.namespaced||Object(v.ed)(e)===t.metric.namespace))&&A.push(Object.assign(Object.assign({},t),{y:e(t.y).string})),5===A.length)break}const F=a.useMemo(()=>{const e=new URLSearchParams;return e.set("query0",_.query),e},[_.query]),B=a.useMemo(()=>t.reduce((e,t)=>(e[Object(b.Hb)(t.model)]=O("console-shared~By {{label}}",{label:t.model.labelKey?O(t.model.labelKey):t.model.label}),e),{}),[t,O]),q=a.useCallback(e=>k(t.find(t=>Object(b.Hb)(t.model)===e)),[t]),$=T&&"admin"===R?"/monitoring/query-browser?"+F.toString():`/dev-monitoring/ns/${n}/metrics?${F.toString()}`;let K;return K=U||D?a.createElement("div",{className:"text-secondary"},O("console-shared~Not available")):I&&M?a.createElement(a.Fragment,null,a.createElement("ul",{className:"co-utilization-card-popover__consumer-list","aria-label":O("console-shared~Top consumer by {{label}}",{label:S.label})},A&&A.map(e=>{const t=String(e.x);return a.createElement(j,{key:t,value:e.y},a.createElement(i.Link,{className:"co-utilization-card-popover__consumer-name",to:Object(m.uc)(S,t,e.metric.namespace)},t))})),a.createElement(i.Link,{to:$},O("console-shared~View more"))):a.createElement("ul",{className:"co-utilization-card-popover__consumer-list"},a.createElement("li",{className:"skeleton-consumer"}),a.createElement("li",{className:"skeleton-consumer"}),a.createElement("li",{className:"skeleton-consumer"}),a.createElement("li",{className:"skeleton-consumer"}),a.createElement("li",{className:"skeleton-consumer"})),a.createElement("div",{className:"co-utilization-card-popover__body"},E&&a.createElement("div",{className:"co-utilization-card-popover__description"},E),y,a.createElement("div",{className:"co-utilization-card-popover__title"},1===t.length?O("console-shared~Top {{label}} consumers",{label:_.model.label.toLowerCase()}):O("console-shared~Top consumers")),t.length>1&&a.createElement(p.b,{className:"co-utilization-card-popover__dropdown",id:"consumer-select",name:"selectConsumerType","aria-label":O("console-shared~Select consumer type"),items:B,onChange:q,selectedKey:Object(b.Hb)(S)}),K)})),j=({children:e,value:t})=>a.createElement("li",{className:"co-utilization-card-popover__consumer-item"},e,a.createElement("div",{className:"co-utilization-card-popover__consumer-value"},t))},5738:function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"d",(function(){return y})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return _}));var a=n(0),r=n(7),s=n(406),o=n(967),i=n(4377),l=n(5791),c=n(1409),u=n(52),d=n(5),m=n(108),p=n(5670),h=n(5734),b=n(517),v=n(5784);const f=({operatorStatus:e,isResolved:t,key:n,Component:r,LoadingComponent:s})=>{const o=r;return t?a.createElement(o,{key:n,operatorStatus:e}):a.createElement(d.c,{key:e.operators[0].metadata.uid,operatorStatus:e,loader:r,LoadingComponent:s})},g=({resources:e,operatorExtensions:t,dynamicOperatorSubsystems:n})=>{const{t:i}=Object(r.useTranslation)(),c=[...t.map((t,n)=>{const r=t.resources.reduce((t,a)=>(t[a.prop]=e[Object(h.a)(a,n).prop],t),{});return a.createElement(s.a,{key:t.title},a.createElement(l.a,{resources:r,getOperatorsWithStatuses:t.getOperatorsWithStatuses,title:t.title,linkTo:t.viewAllLink||Object(d.tc)(t.resources[0].kind),Row:f,Component:t.operatorRowLoader,isResolved:!1}))}),...n.map((t,n)=>{const r=t.resources.reduce((t,a)=>(t[a.prop]=e[Object(h.a)(a,n).prop],t),{});return a.createElement(s.a,{key:t.title},a.createElement(l.a,{resources:r,getOperatorsWithStatuses:t.getOperatorsWithStatuses,title:t.title,linkTo:t.viewAllLink||Object(d.tc)(t.resources[0].kind),Row:f,Component:t.operatorRowLoader,isResolved:!0}))})].reverse();return a.createElement(o.a,{hasGutter:!0},a.createElement(s.a,null,i("public~Operators create, configure, and manage applications by extending the Kubernetes API.")),c)},E=Object(p.a)(({resources:e,watchK8sResource:t,stopWatchK8sResource:n,operatorExtensions:s,dynamicOperatorSubsystems:o})=>{const{t:l}=Object(r.useTranslation)();a.useEffect(()=>(s.forEach((e,n)=>e.resources.forEach(e=>t(Object(h.a)(e,n)))),()=>{s.forEach((e,t)=>e.resources.forEach(e=>n(Object(h.a)(e,t))))}),[t,n,s]);const d=s.map((t,n)=>{const a=t.resources.reduce((t,a)=>(t[a.prop]=e[Object(h.a)(a,n).prop]||{},t),{});if(Object.keys(a).some(e=>a[e].loadError))return{health:u.a.NOT_AVAILABLE};if(Object.keys(a).some(e=>!a[e].loaded))return{health:u.a.LOADING};const r=t.getOperatorsWithStatuses(a);if(!r.length)return{health:u.a.OK};const s=Object(c.a)(r);return{health:s[0].status.health,count:s.length}}),m=Object(c.b)(d,l);return a.createElement(i.default,{title:l("public~Operators"),state:m.health,details:m.detailMessage,popupTitle:l("public~Operator status")},a.createElement(g,{resources:e,operatorExtensions:s,dynamicOperatorSubsystems:o}))}),y=Object(p.a)(({watchURL:e,stopWatchURL:t,urlResults:n,resources:r,watchK8sResource:s,stopWatchK8sResource:o,subsystem:l,models:c})=>{const u=l.additionalResource&&!!c.get(l.additionalResource.kind);a.useEffect(()=>(e(l.url,l.fetch?l.fetch:void 0),u&&s(l.additionalResource),()=>{t(l.url),u&&o(l.additionalResource)}),[e,t,s,o,l,u]);const m=n.getIn([l.url,"data"]),p=n.getIn([l.url,"loadError"]),h=l.additionalResource?r[l.additionalResource.prop]:null,b=l.healthHandler(m,p,h);return a.createElement(i.default,{title:l.title,state:b.state,details:b.message,popupTitle:l.popupTitle,popupBodyContent:l.popupComponent?e=>a.createElement(d.c,{loader:l.popupComponent,healthResult:m,healthResultError:p,k8sResult:h,hide:e}):void 0})}),O=Object(p.a)(({watchK8sResource:e,stopWatchK8sResource:t,resources:n,watchPrometheus:s,stopWatchPrometheusQuery:o,prometheusResults:l,subsystem:c,models:u})=>{const{t:m}=Object(r.useTranslation)(),{infrastructure:p}=a.useContext(v.a),h=c.additionalResource&&!!u.get(c.additionalResource.kind);a.useEffect(()=>(c.queries.forEach(e=>s(e)),h&&e(c.additionalResource),()=>{c.queries.forEach(e=>o(e)),h&&t(c.additionalResource)}),[e,t,s,o,c,h]);const f=a.useMemo(()=>c.queries.map(e=>{const[t,n]=Object(b.b)(l,e);return{response:t,error:n}}),[l,c.queries]),g=c.additionalResource?n[c.additionalResource.prop]:null,E=c.healthHandler(f,m,g,p);return a.createElement(i.default,{title:c.title,state:E.state,details:E.message,popupTitle:c.popupTitle,popupClassname:c.popupClassname,popupKeepOnOutsideClick:c.popupKeepOnOutsideClick,popupBodyContent:c.popupComponent?e=>a.createElement(d.c,{loader:c.popupComponent,responses:f,k8sResult:g,hide:e}):void 0})}),_=({subsystem:e,namespace:t})=>{const{t:n}=Object(r.useTranslation)(),{title:s,resources:o,healthHandler:l,popupComponent:c,popupTitle:u}=e,p=a.useMemo(()=>Object.assign(Object.assign({},o),o.imageManifestVuln&&{imageManifestVuln:Object.assign(Object.assign({},o.imageManifestVuln),{namespace:t})}),[o,t]),h=Object(m.b)(p),b=l(h,n);return a.createElement(i.default,{title:s,state:b.state,details:b.message,popupTitle:u},c&&h&&a.createElement(d.c,Object.assign({loader:c},h,{namespace:t})))}},5744:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return c}));var a,r=n(550);!function(e){e.CPU_USAGE="CPU_USAGE",e.CPU_REQUESTS="CPU_REQUESTS",e.MEMORY_USAGE="MEMORY_USAGE",e.MEMORY_REQUESTS="MEMORY_REQUESTS",e.POD_COUNT="POD_COUNT",e.PODS_BY_CPU="PODS_BY_CPU",e.PODS_BY_MEMORY="PODS_BY_MEMORY",e.PODS_BY_FILESYSTEM="PODS_BY_FILESYSTEM",e.PODS_BY_NETWORK_IN="PODS_BY_NETWORK_IN",e.PODS_BY_NETWORK_OUT="PODS_BY_NETWORK_OUT",e.FILESYSTEM_USAGE="FILESYSTEM_USAGE",e.NETWORK_IN_UTILIZATION="NETWORK_IN_UTILIZATION",e.NETWORK_OUT_UTILIZATION="NETWORK_OUT_UTILIZATION",e.NETWORK_UTILIZATION="NETWORK_UTILIZATION"}(a||(a={}));const s={[a.CPU_USAGE]:r.a("namespace:container_cpu_usage:sum{namespace='<%= project %>'}"),[a.CPU_REQUESTS]:r.a('sum(kube_pod_resource_request{resource="cpu", namespace="<%= project %>"}) by (namespace)'),[a.MEMORY_USAGE]:r.a('sum(container_memory_working_set_bytes{namespace=\'<%= project %>\',container="",pod!=""}) BY (namespace)'),[a.MEMORY_REQUESTS]:r.a('sum(kube_pod_resource_request{resource="memory", namespace="<%= project %>"}) by (namespace)'),[a.POD_COUNT]:r.a("count(kube_running_pod_ready{namespace='<%= project %>'}) BY (namespace)"),[a.FILESYSTEM_USAGE]:r.a('sum(pod:container_fs_usage_bytes:sum{container="",pod!="",namespace=\'<%= project %>\'}) BY (namespace)'),[a.NETWORK_IN_UTILIZATION]:r.a('sum(rate(container_network_receive_bytes_total{container="POD",pod!="",namespace=\'<%= project %>\'}[5m])) BY (namespace)'),[a.NETWORK_OUT_UTILIZATION]:r.a('sum(rate(container_network_transmit_bytes_total{container="POD",pod!="",namespace=\'<%= project %>\'}[5m])) BY (namespace)')},o={[a.PODS_BY_CPU]:r.a('topk(25, sort_desc(sum(avg_over_time(pod:container_cpu_usage:sum{container="",pod!="",namespace=\'<%= project %>\'}[5m])) BY (pod, namespace)))'),[a.PODS_BY_MEMORY]:r.a('topk(25, sort_desc(sum(avg_over_time(container_memory_working_set_bytes{container="",pod!="",namespace=\'<%= project %>\'}[5m])) BY (pod, namespace)))'),[a.PODS_BY_FILESYSTEM]:r.a('topk(25, sort_desc(sum(pod:container_fs_usage_bytes:sum{container="",pod!="",namespace=\'<%= project %>\'}) BY (pod, namespace)))'),[a.PODS_BY_NETWORK_IN]:r.a('topk(25, sort_desc(sum(rate(container_network_receive_bytes_total{ container="POD", pod!= "", namespace = \'<%= project %>\'}[5m])) BY (namespace, pod)))'),[a.PODS_BY_NETWORK_OUT]:r.a('topk(25, sort_desc(sum(rate(container_network_transmit_bytes_total{ container="POD", pod!= "", namespace = \'<%= project %>\'}[5m])) BY (namespace, pod)))')},i=e=>({[a.NETWORK_UTILIZATION]:[{query:s[a.NETWORK_IN_UTILIZATION]({project:e}),desc:"in"},{query:s[a.NETWORK_OUT_UTILIZATION]({project:e}),desc:"out"}]}),l=e=>({[a.CPU_USAGE]:s[a.CPU_USAGE]({project:e}),[a.CPU_REQUESTS]:s[a.CPU_REQUESTS]({project:e}),[a.MEMORY_USAGE]:s[a.MEMORY_USAGE]({project:e}),[a.MEMORY_REQUESTS]:s[a.MEMORY_REQUESTS]({project:e}),[a.POD_COUNT]:s[a.POD_COUNT]({project:e}),[a.FILESYSTEM_USAGE]:s[a.FILESYSTEM_USAGE]({project:e})}),c=e=>({[a.PODS_BY_CPU]:o[a.PODS_BY_CPU]({project:e}),[a.PODS_BY_MEMORY]:o[a.PODS_BY_MEMORY]({project:e}),[a.PODS_BY_FILESYSTEM]:o[a.PODS_BY_FILESYSTEM]({project:e}),[a.PODS_BY_NETWORK_IN]:o[a.PODS_BY_NETWORK_IN]({project:e}),[a.PODS_BY_NETWORK_OUT]:o[a.PODS_BY_NETWORK_OUT]({project:e})})},5745:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return c}));var a,r=n(550);!function(e){e.MEMORY_TOTAL="MEMORY_TOTAL",e.MEMORY_UTILIZATION="MEMORY_UTILIZATION",e.MEMORY_REQUESTS="MEMORY_REQUESTS",e.NETWORK_UTILIZATION="NETWORK_UTILIZATION",e.NETWORK_IN_UTILIZATION="NETWORK_IN_UTILIZATION",e.NETWORK_OUT_UTILIZATION="NETWORK_OUT_UTILIZATION",e.CPU_UTILIZATION="CPU_UTILIZATION",e.CPU_TOTAL="CPU_TOTAL",e.CPU_REQUESTS="CPU_REQUESTS",e.STORAGE_UTILIZATION="STORAGE_UTILIZATION",e.STORAGE_TOTAL="STORAGE_TOTAL",e.PODS_BY_CPU="PODS_BY_CPU",e.PODS_BY_MEMORY="PODS_BY_MEMORY",e.PODS_BY_STORAGE="PODS_BY_STORAGE",e.PODS_BY_NETWORK_IN="PODS_BY_NETWORK_IN",e.PODS_BY_NETWORK_OUT="PODS_BY_NETWORK_OUT",e.NODES_BY_CPU="NODES_BY_CPU",e.NODES_BY_MEMORY="NODES_BY_MEMORY",e.NODES_BY_STORAGE="NODES_BY_STORAGE",e.NODES_BY_NETWORK_IN="NODES_BY_NETWORK_IN",e.NODES_BY_NETWORK_OUT="NODES_BY_NETWORK_OUT",e.NODES_BY_PODS="NODES_BY_PODS",e.PROJECTS_BY_CPU="PROJECTS_BY_CPU",e.PROJECTS_BY_MEMORY="PROJECTS_BY_MEMORY",e.PROJECTS_BY_STORAGE="PROJECTS_BY_STORAGE",e.PROJECTS_BY_NETWORK_IN="PROJECTS_BY_NETWORK_IN",e.PROJECTS_BY_NETWORK_OUT="PROJECTS_BY_NETWORK_OUT",e.PROJECTS_BY_PODS="PROJECTS_BY_PODS",e.POD_UTILIZATION="POD_UTILIZATION"}(a||(a={}));const s={[a.PODS_BY_CPU]:r.a('\n      topk(25, sort_desc(\n        (\n          sum(avg_over_time(pod:container_cpu_usage:sum{container="",pod!=""}[5m])) BY (pod, namespace)\n          *\n          on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n        )\n        *\n        on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      ))\n    '),[a.PODS_BY_MEMORY]:r.a('\n      topk(25, sort_desc(\n        (\n          sum(avg_over_time(container_memory_working_set_bytes{container="",pod!=""}[5m])) BY (pod, namespace)\n          *\n          on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n        )\n        *\n        on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      ))\n    '),[a.PODS_BY_STORAGE]:r.a('\n      topk(25, sort_desc(\n        (\n          sum(avg_over_time(pod:container_fs_usage_bytes:sum{container="", pod!=""}[5m])) BY (pod, namespace)\n          *\n          on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n        )\n        *\n        on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      ))\n    '),[a.PODS_BY_NETWORK_IN]:r.a('\n      topk(25, sort_desc(\n        (\n          sum(rate(container_network_receive_bytes_total{ container="POD", pod!= ""}[5m])) BY (namespace, pod)\n          *\n          on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n        )\n        *\n        on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      ))\n    '),[a.PODS_BY_NETWORK_OUT]:r.a('\n      topk(25, sort_desc(\n        (\n          sum(rate(container_network_transmit_bytes_total{ container="POD", pod!= ""}[5m])) BY (namespace, pod)\n          *\n          on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n        )\n        *\n        on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      ))\n    '),[a.NODES_BY_CPU]:r.a('\n      topk(25, sort_desc(\n        avg_over_time(instance:node_cpu:rate:sum[5m])\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      ))\n    '),[a.NODES_BY_MEMORY]:r.a('\n      topk(25, sort_desc(\n        (node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes)\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      ))\n    '),[a.NODES_BY_STORAGE]:r.a('\n      topk(25, sort_desc(\n        (\n          sum by (instance) (max by (device, instance) (node_filesystem_size_bytes{device=~"/.*"}))\n          -\n          sum by (instance) (max by (device, instance) (node_filesystem_avail_bytes{device=~"/.*"}))\n        )\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      ))\n    '),[a.NODES_BY_PODS]:r.a('\n      topk(25, sort_desc(\n        sum(avg_over_time(kubelet_running_pods[5m])) BY (node)\n        *\n        on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      ))\n    '),[a.NODES_BY_NETWORK_IN]:r.a('\n      topk(25, sort_desc(\n        sum(instance:node_network_receive_bytes_excluding_lo:rate1m) BY (instance)\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      ))\n    '),[a.NODES_BY_NETWORK_OUT]:r.a('\n      topk(25, sort_desc(\n        sum(instance:node_network_transmit_bytes_excluding_lo:rate1m) BY (instance)\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      ))\n    '),[a.PROJECTS_BY_CPU]:r.a('\n      topk(25, sort_desc(\n        sum by (namespace) (\n          (\n            sum(avg_over_time(pod:container_cpu_usage:sum{container="",pod!=""}[5m])) BY (namespace, pod)\n            *\n            on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n          )\n          *\n          on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n        )\n      ))\n    '),[a.PROJECTS_BY_MEMORY]:r.a('\n      topk(25, sort_desc(\n        sum by (namespace) (\n          (\n            sum(avg_over_time(container_memory_working_set_bytes{container="",pod!=""}[5m])) BY (namespace, pod)\n            *\n            on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n          )\n          *\n          on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n        )\n      ))\n    '),[a.PROJECTS_BY_STORAGE]:r.a('\n      topk(25, sort_desc(\n        sum by (namespace) (\n          (\n            sum(avg_over_time(pod:container_fs_usage_bytes:sum{container="", pod!=""}[5m])) BY (namespace, pod)\n            *\n            on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n          )\n          *\n          on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n        )\n      ))\n    '),[a.PROJECTS_BY_PODS]:r.a('\n      topk(25, sort_desc(\n        count by (namespace) (\n            topk without(uid) (1, kube_running_pod_ready)\n            *\n            ignoring(node,uid) group_right node_namespace_pod:kube_pod_info:\n          *\n          on(node) group_left() (max by (node) (kube_node_role{role=~"<%= nodeType %>"})))\n        ))\n    '),[a.PROJECTS_BY_NETWORK_IN]:r.a('\n      topk(25, sort_desc(\n        sum by (namespace) (\n          (\n            sum(rate(container_network_receive_bytes_total{ container="POD", pod!= ""}[5m])) BY (namespace, pod)\n            *\n            on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n          )\n          *\n          on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n        )\n      ))\n    '),[a.PROJECTS_BY_NETWORK_OUT]:r.a('\n      topk(25, sort_desc(\n        sum by (namespace) (\n          (\n            sum(rate(container_network_transmit_bytes_total{ container="POD", pod!= ""}[5m])) BY (namespace, pod)\n            *\n            on(pod,namespace) group_left(node) (node_namespace_pod:kube_pod_info:)\n          )\n          *\n          on(node) group_left(role) (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n        )\n      ))\n    ')},o={[a.MEMORY_TOTAL]:r.a('\n      sum(\n        node_memory_MemTotal_bytes\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    '),[a.MEMORY_UTILIZATION]:r.a('\n      sum(\n        (node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes)\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    '),[a.MEMORY_REQUESTS]:r.a('\n      sum(\n        kube_pod_resource_request{resource="memory"}\n        *\n        on(node) group_left(role) (\n          max by (node) (kube_node_role{role=~"<%= nodeType %>"})\n        )\n      )\n    '),[a.NETWORK_UTILIZATION]:r.a('\n      sum(\n        (\n          instance:node_network_transmit_bytes_excluding_lo:rate1m\n          +\n          instance:node_network_receive_bytes_excluding_lo:rate1m\n        )\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    '),[a.CPU_UTILIZATION]:r.a('\n      sum(\n        1 - sum without (mode) (rate(node_cpu_seconds_total{mode=~"idle|iowait|steal"}[2m]))\n        *\n        on(instance) group_left() (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node","(.*)")\n        )\n      )\n    '),[a.CPU_TOTAL]:r.a('\n      sum(\n        kube_node_status_capacity{resource="cpu",unit="core"}\n        *\n        on(node) group_left(role) (\n          max by (node) (kube_node_role{role=~"<%= nodeType %>"})\n        )\n      )\n    '),[a.CPU_REQUESTS]:r.a('\n      sum(\n        kube_pod_resource_request{resource="cpu"}\n        *\n        on(node) group_left(role) (\n          max by (node) (kube_node_role{role=~"<%= nodeType %>"})\n        )\n      )\n    '),[a.STORAGE_UTILIZATION]:r.a('\n      sum(\n        (\n          max by (device, instance) (node_filesystem_size_bytes{device=~"/.*"})\n          -\n          max by (device, instance) (node_filesystem_free_bytes{device=~"/.*"})\n        )\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    '),[a.STORAGE_TOTAL]:r.a('\n      sum(\n        max by (device, instance) (node_filesystem_size_bytes{device=~"/.*"})\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    '),[a.POD_UTILIZATION]:r.a('\n      count(\n        (\n          topk without(uid) (1, kube_running_pod_ready)\n          *\n          ignoring(node,uid) group_right node_namespace_pod:kube_pod_info:\n        )\n        *\n        on(node) group_left() (max by (node) (kube_node_role{role=~"<%= nodeType %>"}))\n      )\n    '),[a.NETWORK_IN_UTILIZATION]:r.a('\n      sum(\n        instance:node_network_receive_bytes_excluding_lo:rate1m\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    '),[a.NETWORK_OUT_UTILIZATION]:r.a('\n      sum(\n        instance:node_network_transmit_bytes_excluding_lo:rate1m\n        *\n        on(instance) group_left(role) (\n          label_replace(max by (node) (kube_node_role{role=~"<%= nodeType %>"}), "instance", "$1", "node", "(.*)")\n        )\n      )\n    ')},i=e=>({[a.NETWORK_UTILIZATION]:[{query:o[a.NETWORK_IN_UTILIZATION]({nodeType:e}),desc:"in"},{query:o[a.NETWORK_OUT_UTILIZATION]({nodeType:e}),desc:"out"}]}),l=e=>({[a.PODS_BY_CPU]:s[a.PODS_BY_CPU]({nodeType:e}),[a.PODS_BY_MEMORY]:s[a.PODS_BY_MEMORY]({nodeType:e}),[a.PODS_BY_STORAGE]:s[a.PODS_BY_STORAGE]({nodeType:e}),[a.PODS_BY_NETWORK_IN]:s[a.PODS_BY_NETWORK_IN]({nodeType:e}),[a.PODS_BY_NETWORK_OUT]:s[a.PODS_BY_NETWORK_OUT]({nodeType:e}),[a.NODES_BY_CPU]:s[a.NODES_BY_CPU]({nodeType:e}),[a.NODES_BY_MEMORY]:s[a.NODES_BY_MEMORY]({nodeType:e}),[a.NODES_BY_STORAGE]:s[a.NODES_BY_STORAGE]({nodeType:e}),[a.NODES_BY_PODS]:s[a.NODES_BY_PODS]({nodeType:e}),[a.NODES_BY_NETWORK_IN]:s[a.NODES_BY_NETWORK_IN]({nodeType:e}),[a.NODES_BY_NETWORK_OUT]:s[a.NODES_BY_NETWORK_OUT]({nodeType:e}),[a.PROJECTS_BY_CPU]:s[a.PROJECTS_BY_CPU]({nodeType:e}),[a.PROJECTS_BY_MEMORY]:s[a.PROJECTS_BY_MEMORY]({nodeType:e}),[a.PROJECTS_BY_STORAGE]:s[a.PROJECTS_BY_STORAGE]({nodeType:e}),[a.PROJECTS_BY_PODS]:s[a.PROJECTS_BY_PODS]({nodeType:e}),[a.PROJECTS_BY_NETWORK_IN]:s[a.PROJECTS_BY_NETWORK_IN]({nodeType:e}),[a.PROJECTS_BY_NETWORK_OUT]:s[a.PROJECTS_BY_NETWORK_OUT]({nodeType:e})}),c=e=>({[a.CPU_UTILIZATION]:{utilization:o[a.CPU_UTILIZATION]({nodeType:e}),total:o[a.CPU_TOTAL]({nodeType:e}),requests:o[a.CPU_REQUESTS]({nodeType:e})},[a.MEMORY_UTILIZATION]:{utilization:o[a.MEMORY_UTILIZATION]({nodeType:e}),total:o[a.MEMORY_TOTAL]({nodeType:e}),requests:o[a.MEMORY_REQUESTS]({nodeType:e})},[a.STORAGE_UTILIZATION]:{utilization:o[a.STORAGE_UTILIZATION]({nodeType:e}),total:o[a.STORAGE_TOTAL]({nodeType:e})},[a.POD_UTILIZATION]:{utilization:o[a.POD_UTILIZATION]({nodeType:e})}})},5746:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(5807),o=n(5674);n(5712);t.a=({resourceQuota:e})=>{var t,n;const{t:i}=Object(r.useTranslation)(),l=Object.keys(null!==(n=null===(t=e.status)||void 0===t?void 0:t.hard)&&void 0!==n?n:{}).map(t=>{var n;const r=e.status.hard[t],i=null===(n=e.status.used)||void 0===n?void 0:n[t],{label:l,percent:c}=Object(o.a)({resourceName:t,used:i,hard:r});return a.createElement("div",{key:t,className:"co-resource-quota__chart","data-test":"resource-quota-gauge-chart"},a.createElement(s.b,{data:{x:c+"%",y:c},thresholds:[{value:90},{value:101}],title:t,label:l}))});return a.createElement("div",{className:"co-resource-quota-chart-row"},l.length?l:a.createElement(a.Fragment,null,i("console-app~No quota")))}},5747:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(5748),o=n(5674);n(5712);t.a=({appliedClusterResourceQuota:e,namespace:t})=>{var n,i,l,c;const{t:u}=Object(r.useTranslation)(),d=null===(i=null===(n=e.status)||void 0===n?void 0:n.namespaces)||void 0===i?void 0:i.find(e=>e.namespace===t),m=Object.keys(null!==(c=null===(l=null==d?void 0:d.status)||void 0===l?void 0:l.hard)&&void 0!==c?c:{}).map(t=>{var n,r,i,l,c;const u=null===(r=null===(n=e.status.total)||void 0===n?void 0:n.hard)||void 0===r?void 0:r[t],m=null===(l=null===(i=e.status.total)||void 0===i?void 0:i.used)||void 0===l?void 0:l[t],p=null===(c=d.status.used)||void 0===c?void 0:c[t],h=Object(o.b)(u,m),b=100-h,{label:v,percent:f}=Object(o.a)({resourceName:t,used:p,hard:u}),g=h-f;return a.createElement("div",{key:t,className:"co-resource-quota__chart","data-test":"resource-quota-gauge-chart"},a.createElement(s.a,{data:[{x:"Namespace",y:f},{x:"Other namespaces",y:g},{x:"Unused",y:b}],title:t,label:v}))});return a.createElement("div",{className:"co-resource-quota-chart-row"},m.length?m:a.createElement(a.Fragment,null,u("console-app~No quota")))}},5748:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(0),r=n(2232),s=n(6044),o=n(6045),i=n(6046),l=n(6047),c=n(6048),u=n(18),d=n.n(u),m=n(7),p=n(1943),h=n(5);const b=({data:e,query:t="",title:n,ariaChartLinkLabel:u,ariaChartTitle:b,ariaDescription:v,usedLabel:f,label:g,secondaryTitle:E,className:y})=>{var O;const{t:_}=Object(m.useTranslation)(),[k,j]=Object(h.Ic)(),R=f||_("public~used"),T=E||R,N=g||_("No data"),S=e.filter(e=>"Namespace"===e.x);return a.createElement(p.a,{className:d()("graph-wrapper--title-center graph-wrapper--gauge",y),ref:k,title:n},a.createElement(p.b,{query:t,ariaChartLinkLabel:u},a.createElement(r.a,{ariaTitle:b||n,ariaDesc:v,data:e,height:j,padding:0,labels:({datum:{x:e,y:t}})=>_("public~{{x}}: {{y}}%",{x:e,y:t}),width:j,subTitle:T,colorScale:100===(null===(O=S[0])||void 0===O?void 0:O.y)?[s.a.value,o.a.value,i.a.value]:[l.a.value,c.a.value,i.a.value],title:N})))}},5749:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(5674),o=n(119);n(5869);t.a=({hard:e,used:t})=>{const{t:n}=Object(r.useTranslation)(),i=Object.keys(e||{}).reduce((n,a)=>Object(s.b)(e[a],null==t?void 0:t[a])>=100?n+1:n,0);return a.createElement("div",{className:"co-resource-quota__summary"},n("console-shared~{{count}} resource",{count:Object.keys(e||{}).length}),", ",i>0?a.createElement(a.Fragment,null,a.createElement(o.m,null)," ",n("console-shared~{{count}} resource reached quota",{count:i})):n("console-shared~none are at quota"))}},5784:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(0);const r=a.createContext({infrastructureLoaded:!0,infrastructureError:null})},5791:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(0),r=n(363),s=n(7),o=n(14),i=n(1409),l=n(52),c=n(2229);n(5792);const u=({resources:e,getOperatorsWithStatuses:t,title:n,linkTo:u,Row:d,Component:m,isResolved:p})=>{const{t:h}=Object(s.useTranslation)(),b=r.a(e).some(e=>e.loadError),v=t(e),f=Object(i.a)(v).sort((e,t)=>e.operators[0].metadata.name.localeCompare(t.operators[0].metadata.name)),g=f.every(e=>e.status.health===l.a.OK),E=a.useCallback(()=>a.createElement("div",{className:"co-status__operator-skeleton"}),[]);return v.length?a.createElement(c.StatusPopupSection,{firstColumn:a.createElement(a.Fragment,null,a.createElement("span",null,n),a.createElement("span",{className:"text-secondary co-status__operator-detail"}," ",h("console-shared~({{operatorStatusLength}} installed)",{operatorStatusLength:v.length}))),secondColumn:h("console-shared~Status")},b?a.createElement("div",{className:"text-secondary"},h("console-shared~Not available")):!g&&f.map(e=>a.createElement(d,{key:e.operators[0].metadata.uid,Component:m,operatorStatus:e,LoadingComponent:E,isResolved:p})),a.createElement(c.default,{value:h("console-shared~All {{status}}",{status:v[0].status.title.toLowerCase()}),icon:v[0].status.icon},a.createElement(o.Link,{to:u},h("console-shared~View all")))):null}},5792:function(e,t,n){},5793:function(e,t,n){"use strict";n.d(t,"a",(function(){return N})),n.d(t,"b",(function(){return S}));var a=n(0),r=n(22),s=n(31),o=n(14),i=n(7),l=n(69),c=n(13),u=n(192),d=n(434),m=n(295),p=n(5387),h=n(5388),b=n(15),v=n(4375),f=n(4364),g=n(4376),E=n(58),y=n(8),O=n(10),_=n(5738),k=n(108),j=n(206),R=n(1417);const T={kind:Object(y.Hb)(O.ClusterVersionModel),namespaced:!1,name:"version",isList:!1},N=({labelSelector:e})=>{const{t:t}=Object(i.useTranslation)(),n=Object(j.a)(b.O.CLUSTER_VERSION),[s,,l]=Object(R.a)(e),[c,u]=Object(k.a)(n?T:{}),d=Object(b.we)()&&n&&u&&Object(y.db)(c)&&!e;return a.createElement(v.default,{error:!r.a(l)},d&&a.createElement(g.StatusItem,{key:"clusterUpdate",Icon:b.n,message:t("public~A cluster version update is available")},a.createElement(o.Link,{to:"/settings/cluster?showVersions"},t("public~Update cluster"))),s.map(e=>a.createElement(g.default,{key:Object(E.h)(e,e.rule.id),alert:e})))},S=Object(s.connect)(e=>({k8sModels:e.k8s.getIn(["RESOURCES","models"])}))(({k8sModels:e})=>{const t=Object(l.z)(l.f),[n]=Object(c.kc)(c.gb),r=a.useMemo(()=>((e,t)=>e.filter(e=>{if(Object(l.g)(e)||Object(l.d)(e)||Object(c.hb)(e)||Object(c.fb)(e)){const n=e;return!(n.properties.additionalResource&&!n.properties.additionalResource.optional)||!!t.get(n.properties.additionalResource.kind)}return!0}))([...t,...n],e).map(e=>{if(Object(c.Kb)(e)||Object(c.Ib)(e)||Object(c.Jb)(e)){const t=e.properties.popupComponent?{popupComponent:()=>Promise.resolve(e.properties.popupComponent)}:{};return Object.assign(Object.assign({},e),{properties:Object.assign(Object.assign({},e.properties),t)})}return e}),[t,n,e]),s=a.useMemo(()=>r.findIndex(e=>Object(l.c)(e)||Object(c.Hb)(e)),[r]),{t:b}=Object(i.useTranslation)(),v=[];if(r.forEach(t=>{if(Object(l.g)(t)||Object(c.Kb)(t))v.push({title:t.properties.title,Component:a.createElement(_.d,{subsystem:t.properties,models:e})});else if(Object(l.d)(t)||Object(c.Ib)(t)){const{disallowedControlPlaneTopology:n}=t.properties;if((null==n?void 0:n.length)&&n.includes(window.SERVER_FLAGS.controlPlaneTopology))return;v.push({title:t.properties.title,Component:a.createElement(_.b,{subsystem:t.properties,models:e})})}else(Object(l.e)(t)||Object(c.Jb)(t))&&v.push({title:t.properties.title,Component:a.createElement(_.c,{subsystem:t.properties})})}),-1!==s){const e=[],t=[];r.forEach(n=>{Object(c.Hb)(n)?t.push(n.properties):Object(l.c)(n)&&e.push(n.properties)}),v.splice(s,0,{title:"Operators",Component:a.createElement(_.a,{operatorExtensions:e,dynamicOperatorSubsystems:t})})}return a.createElement(u.a,{"data-test-id":"status-card",className:"co-overview-card--gradient",isClickable:!0,isSelectable:!0},a.createElement(d.a,{actions:{actions:a.createElement(a.Fragment,null,a.createElement(o.Link,{to:"/monitoring/alerts","data-test":"status-card-view-alerts"},b("public~View alerts"))),hasNoOffset:!1,className:"co-overview-card__actions"}},a.createElement(m.a,null,b("public~Status"))),a.createElement(f.default,null,a.createElement(p.a,{className:"co-overview-status__health",hasGutter:!0},v.map(e=>a.createElement(h.a,{key:e.title,"data-test":e.title},e.Component)))),a.createElement(N,null))})},5805:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(0),r=n(19),s=n(7),o=n(15),i=n(984),l=n(5851),c=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const u=({openProjectModal:e})=>{const{t:t}=Object(s.useTranslation)(),n=Object(o.Fe)(o.O.CAN_CREATE_NS);return Object(o.Fe)(o.O.CAN_CREATE_PROJECT)?a.createElement(s.Trans,{t:t,ns:"devconsole"}," or ",a.createElement(r.a,{isInline:!0,variant:"link",onClick:e},"create a Project")):n?a.createElement(s.Trans,{t:t,ns:"devconsole"}," or ",a.createElement(r.a,{isInline:!0,variant:"link",onClick:e},"create a Namespace")):null};t.b=e=>{var{onCreate:t,title:n,children:r}=e,s=c(e,["onCreate","title","children"]);const[,u]=Object(o.ue)(),d=Object(i.a)(),m=a.useCallback(()=>{d({onSubmit:e=>{var n;u(null===(n=e.metadata)||void 0===n?void 0:n.name),t&&t(e)}})},[t,u,d]);return a.createElement(l.a,Object.assign({},s,{title:n}),r(m))}},5806:function(e,t,n){"use strict";n.d(t,"b",(function(){return x})),n.d(t,"a",(function(){return I})),n.d(t,"c",(function(){return A}));var a=n(0),r=n(22),s=n(7),o=n(205),i=n(165),l=n(682),c=n(354),u=n(294),d=n(192),m=n(434),p=n(516),h=n(164),b=n(295),v=n(13),f=n(4382),g=n(4365),E=n(762),y=n(5670),O=n(982),_=n(1406),k=n(5745),j=n(10),R=n(517),T=n(108),N=n(8),S=n(4366),P=n(1200),C=n(5856);const w=[C.d,C.e],x=Object(y.a)(({watchPrometheus:e,stopWatchPrometheusQuery:t,prometheusResults:n,utilizationQuery:r,totalQuery:s,title:o,TopConsumerPopover:i,humanizeValue:l,byteDataType:c,namespace:u,isDisabled:d=!1,limitQuery:m,requestQuery:p,setLimitReqState:h})=>{let b,v,g,E,y,O,k,j,T,N=!1;const{duration:S}=Object(P.useUtilizationDuration)();return a.useEffect(()=>{if(!d)return e(r,u,S),s&&e(s,u),m&&e(m,u,S),p&&e(p,u,S),()=>{t(r,S),s&&t(s),m&&t(m,S),p&&t(p,S)}},[e,t,S,r,s,u,d,m,p]),d||([b,v]=Object(R.b)(n,r,S),[g,E]=Object(R.b)(n,s),[O,k]=Object(R.b)(n,m,S),[j,T]=Object(R.b)(n,p,S),y=Object(_.a)(g),N=!b||s&&!g||m&&!O),a.createElement(f.default,{title:o,utilization:b,limit:O,requested:j,error:v||E||k||T,isLoading:N,humanizeValue:l,byteDataType:c,query:[r,m,p],max:y&&y.length?y[0].y:null,TopConsumerPopover:i,setLimitReqState:h})}),I=Object(y.a)(({watchPrometheus:e,stopWatchPrometheusQuery:t,prometheusResults:n,queries:r,title:s,TopConsumerPopovers:o,humanizeValue:i,byteDataType:l,namespace:c,isDisabled:u=!1})=>{const{duration:d}=Object(P.useUtilizationDuration)();a.useEffect(()=>{if(!u)return r.forEach(t=>e(t.query,c,d)),()=>{r.forEach(e=>t(e.query,d))}},[e,t,d,r,c,u]);const m=[];let p=!1,h=!1;return u||r.forEach(e=>{var t;const[a,r]=Object(R.b)(n,e.query,d);return r?(p=!0,!1):a?void m.push((null===(t=Object(_.b)(a,e.desc,null,f.trimSecondsXMutator))||void 0===t?void 0:t[0])||[]):(h=!0,!1)}),a.createElement(f.MultilineUtilizationItem,{title:s,data:m,error:p,isLoading:h,humanizeValue:i,byteDataType:l,queries:r,TopConsumerPopovers:o})}),D=({machineConfigPools:e,onNodeSelect:t,selectedNodes:n})=>{const{t:r}=Object(s.useTranslation)(),[d,m]=a.useState(!1),p=e.sort((e,t)=>{const n=["worker","master"],a=n.indexOf(e.metadata.name),r=n.indexOf(t.metadata.name);return-1===a&&-1===r?e.metadata.name.localeCompare(t.metadata.name):-1===a?1:-1===r?-1:a-r}).map(e=>{const t="master"===e.metadata.name?"control plane":e.metadata.name;return a.createElement(o.a,{hasCheckbox:!0,key:e.metadata.name,value:t,isSelected:n.includes(e.metadata.name)},t)});return a.createElement(c.a,{role:"menu","aria-label":r("public~Filter by Node type"),onSelect:t,isOpen:d,selected:n,onOpenChange:e=>m(e),toggle:e=>a.createElement(i.a,{ref:e,onClick:e=>m(e),variant:"plainText"},r("public~Filter by Node type"),n.length>0&&a.createElement(l.a,{className:"pf-v5-u-ml-sm",isRead:!0},n.length))},a.createElement(u.a,null,p))},A=()=>{const{t:e}=Object(s.useTranslation)(),[t,n]=Object(T.a)({isList:!0,kind:Object(N.Hb)(j.MachineConfigPoolModel)}),[o,i]=a.useState([]),[l]=Object(v.kc)(v.Y),[c]=Object(v.kc)(v.X),u=r.a(o)?".+":o.join("|"),[f,y]=a.useMemo(()=>[Object(k.d)(u),Object(k.b)(u)],[u]);return n&&a.createElement(d.a,{"data-test-id":"utilization-card",isClickable:!0,isSelectable:!0},a.createElement(m.a,{actions:{actions:a.createElement(a.Fragment,null,a.createElement(p.a,null,a.createElement(h.a,null,a.createElement(D,{machineConfigPools:t,onNodeSelect:(e,t)=>{const n="control plane"===t?"master":t;o.includes(n)?i(o.filter(e=>e!==n)):i([...o,n])},selectedNodes:o})),a.createElement(h.a,null,a.createElement(S.UtilizationDurationDropdown,null)))),hasNoOffset:!1,className:void 0}},a.createElement(b.a,{"data-test":"utilization-card__title"},e("public~Cluster utilization"))),a.createElement(g.default,null,a.createElement(C.b.Provider,{value:u},a.createElement(x,{title:e("public~CPU"),utilizationQuery:f[k.a.CPU_UTILIZATION].utilization,totalQuery:f[k.a.CPU_UTILIZATION].total,requestQuery:f[k.a.CPU_UTILIZATION].requests,TopConsumerPopover:C.a,humanizeValue:O.h}),a.createElement(x,{title:e("public~Memory"),utilizationQuery:f[k.a.MEMORY_UTILIZATION].utilization,totalQuery:f[k.a.MEMORY_UTILIZATION].total,requestQuery:f[k.a.MEMORY_UTILIZATION].requests,TopConsumerPopover:C.c,humanizeValue:O.f,byteDataType:E.a.BinaryBytes}),a.createElement(x,{title:e("public~Filesystem"),utilizationQuery:f[k.a.STORAGE_UTILIZATION].utilization,totalQuery:f[k.a.STORAGE_UTILIZATION].total,TopConsumerPopover:C.g,humanizeValue:O.f,byteDataType:E.a.BinaryBytes}),a.createElement(I,{title:e("public~Network transfer"),queries:y[k.a.NETWORK_UTILIZATION],humanizeValue:O.j,TopConsumerPopovers:w}),a.createElement(x,{title:e("public~Pod count"),utilizationQuery:f[k.a.POD_UTILIZATION].utilization,TopConsumerPopover:C.f,humanizeValue:O.k}),l.map(({uid:e,properties:t})=>{var n,r,s;return a.createElement(x,{key:e,title:t.title,utilizationQuery:t.getUtilizationQuery(o),totalQuery:null===(n=t.getTotalQuery)||void 0===n?void 0:n.call(t,o),humanizeValue:t.humanize,TopConsumerPopover:t.TopConsumerPopover,requestQuery:null===(r=t.getRequestQuery)||void 0===r?void 0:r.call(t,o),limitQuery:null===(s=t.getLimitQuery)||void 0===s?void 0:s.call(t,o)})}),c.map(({uid:e,properties:t})=>a.createElement(I,{key:e,title:t.title,queries:t.getUtilizationQueries(o),humanizeValue:t.humanize,TopConsumerPopovers:t.TopConsumerPopovers})))))}},5807:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return f}));var a=n(0),r=n(515),s=n(6028),o=n(6029),i=n(18),l=n.n(i),c=n(7),u=n(1943),d=n(1197),m=n(436),p=n(5),h=n(1406);const b=[{value:67},{value:92}],v=({data:e,error:t,humanize:n=p.ec,invert:i=!1,loading:d,query:m="",remainderLabel:h,themeColor:v=r.a.green,thresholds:f=b,title:g,ariaChartLinkLabel:E,ariaChartTitle:y,usedLabel:O,label:_,secondaryTitle:k,className:j})=>{const{t:R}=Object(c.useTranslation)(),[T,N]=Object(p.Ic)(),S=!t&&!d,P=d?R("Loading"):t,C=O||R("public~used"),w=k||C,x=_||(e?n(e.y).string:void 0)||R("No data");return a.createElement(u.a,{className:l()("graph-wrapper--title-center graph-wrapper--gauge",j),ref:T,title:g},a.createElement(u.b,{query:m,ariaChartLinkLabel:E},a.createElement(s.a,{ariaTitle:y||g,data:f,height:N,padding:0,width:N,y:"value"},a.createElement(o.a,{labels:({datum:{x:e,y:t}})=>e?`${e} ${C}`:`${t} ${h||R("available")}`,data:S?e:{y:0},invert:i,padding:0,subTitle:S?w:"",themeColor:v,thresholds:f,title:P||x}))))},f=({humanize:e=p.ec,invert:t,namespace:n,percent:r=0,query:s,remainderLabel:o,secondaryTitle:i,thresholds:l,title:u,usedLabel:b})=>{const{t:f}=Object(c.useTranslation)(),[g,E,y]=Object(d.usePrometheusPoll)({endpoint:m.a.QUERY,namespace:n,query:s}),[O]=g?Object(h.a)(g,null,e).map(({label:e,y:t})=>({x:e,y:t})):[{x:e(r).string,y:r}];return a.createElement(v,{data:O,error:!!E&&f("No data"),invert:t,label:O.x,loading:y,query:s,remainderLabel:o,secondaryTitle:i,thresholds:l,title:u,usedLabel:b})}},5828:function(e,t,n){},5838:function(e,t,n){"use strict";n.d(t,"b",(function(){return N})),n.d(t,"a",(function(){return S}));var a=n(0),r=n(137),s=n(116),o=n(16),i=n(22),l=n(240),c=n(7),u=n(13),d=n(694),m=n(4374),p=n(108),h=n(10),b=n(8),v=n(5853),f=n(5854),g=n(5855),E=n(5858),y=n(5859),O=n(5658),_=n(5860),k=n(5864);const j=[{Card:f.a},{Card:g.a},{Card:k.a}],R=[{Card:v.a},{Card:E.a}],T=[{Card:y.a}],N=(e,t)=>s.a(t,t=>{if("NamespaceDashboard"!==t.spec.location)return!1;const n=o.a(t,"spec.namespaceDashboard.namespaces"),a=o.a(t,"spec.namespaceDashboard.namespaceSelector");return!(!i.a(n)||!i.a(a))||(!!l.a(n,e.metadata.name)||!i.a(a)&&new b.e(a).matches(e))}),S=({obj:e})=>{const{t:t}=Object(c.useTranslation)(),[n]=Object(u.jc)(),[s]=Object(p.a)({isList:!0,kind:Object(b.Hb)(h.ConsoleLinkModel),optional:!0}),o=N(e,s),i={obj:e,namespaceLinks:o},l=!!o.length,v=a.useMemo(()=>l?[{Card:_.a},...T]:T,[l]);return a.createElement(a.Fragment,null,"dev"===n&&a.createElement(r.b,null,a.createElement("title",null,t("public~Project overview"))),a.createElement(O.a.Provider,{value:i},a.createElement(d.default,null,a.createElement(m.default,{mainCards:j,leftCards:R,rightCards:v}))))}},5851:function(e,t,n){"use strict";var a=n(0),r=n(155),s=n(40),o=n(1945),i=n(5),l=(n(5871),function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n});t.a=e=>{var{badge:t,title:n,children:c,listComponent:u}=e,d=l(e,["badge","title","children","listComponent"]);return a.createElement("div",{className:"odc-project-list-page"},a.createElement(i.Z,{title:n,badge:t},c),a.createElement(r.a,{className:"co-divider"}),a.createElement(s.c,Object.assign({},d,{showTitle:!1,kind:"Project",ListComponent:u||o.ProjectsTable,canCreate:!1,filterLabel:"by name or display name",textFilter:"project-name"})))}},5852:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n(5);const s=()=>Promise.all([n.e(17),n.e(25),n.e(0),n.e(1),n.e(4),n.e(3),n.e(6),n.e(5),n.e(7),n.e(11),n.e(8),n.e(9),n.e(10),n.e(16),n.e(14),n.e(12),n.e(2),n.e(13),n.e(15),n.e(18),n.e(26),n.e(33),n.e(65),n.e(237)]).then(n.bind(null,6058)).then(e=>e.OverviewListPage),o=e=>a.createElement(r.c,Object.assign({loader:s},e))},5853:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var a=n(160),r=n(4440),s=n(501),o=n(0),i=n(18),l=n.n(i),c=n(7),u=n(192),d=n(434),m=n(295),p=n(296),h=n(19),b=n(4379),v=n(2239),f=n(15),g=n(5),E=n(10),y=n(5658),O=n(14);const _=()=>{var e,t,n;const{obj:i}=o.useContext(y.a),_=a.a(i.metadata.labels).sort(),k=r.a(_,3),j=s.a(i.metadata.labels,k),R=null===(e=i.metadata.annotations)||void 0===e?void 0:e["openshift.io/description"],T=Object(g.uc)(E.ProjectModel,i.metadata.name)+"/details",N=null===(n=null===(t=i.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n["maistra.io/member-of"],{t:S}=Object(c.useTranslation)();return o.createElement(u.a,{"data-test-id":"details-card",isClickable:!0,isSelectable:!0},o.createElement(d.a,{actions:{actions:o.createElement(o.Fragment,null,o.createElement(O.Link,{to:T,"data-test":"details-card-view-all"},S("public~View all"))),hasNoOffset:!1,className:"co-overview-card__actions"}},o.createElement(m.a,null,S("public~Details"))),o.createElement(p.a,null,o.createElement(b.default,null,o.createElement(v.b,{isLoading:!i,title:S("public~Name")},Object(f.dd)(i)),o.createElement(v.b,{isLoading:!i,title:S("public~Requester")},Object(f.Bd)(i)||o.createElement("span",{className:"text-muted"},S("public~No requester"))),o.createElement(v.b,{isLoading:!i,title:S("public~Labels")},o.createElement("div",{className:"co-project-dashboard__details-labels"},o.createElement(g.L,{kind:E.ProjectModel.kind,labels:j}),_.length>3&&o.createElement(h.a,{variant:"link"},o.createElement(O.Link,{to:T},S("public~View all"))))),o.createElement(v.b,{isLoading:!i,title:S("public~Description")},o.createElement("span",{className:l()({"text-muted":!R,"co-project-dashboard-details-card__description":R})},R||S("public~No description"))),N&&o.createElement(v.b,{isLoading:!i,title:S("public~Service mesh")},o.createElement(f.X,null)," ",S("public~Service mesh enabled")))))}},5854:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(0),r=n(7),s=n(192),o=n(434),i=n(295),l=n(5387),c=n(4364),u=n(15),d=n(139),m=n(69),p=n(5658),h=n(5738),b=n(5793);const v=()=>{var e;const{obj:t}=a.useContext(p.a),n=Object(m.z)(m.f),v=a.useMemo(()=>{return(e=n,e.filter(m.e)).find(e=>"Image Vulnerabilities"===e.properties.title);var e},[n]),{metadata:{name:f}}=t,{t:g}=Object(r.useTranslation)();return a.createElement(s.a,{"data-test-id":"status-card",className:"co-overview-card--gradient"},a.createElement(o.a,null,a.createElement(i.a,null,g("public~Status"))),t?a.createElement(a.Fragment,null,a.createElement(c.default,null,a.createElement(l.a,{className:"co-overview-status__health",hasGutter:!0},a.createElement("div",{className:"co-status-card__health-item","data-test":"project-status"},a.createElement(u.cc,{status:null===(e=t.status)||void 0===e?void 0:e.phase,className:"co-icon-and-text--lg"})),v&&a.createElement(h.c,{subsystem:v.properties,namespace:f}))),a.createElement(b.a,{labelSelector:{namespace:f}})):a.createElement(d.g,null))}},5855:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(0),r=n(7),s=n(192),o=n(434),i=n(295),l=n(4365),c=n(762),u=n(13),d=n(5),m=n(5658),p=n(5744),h=n(5806),b=n(4366),v=n(5857);const f=[v.d,v.e],g=()=>{var e;const{t:t}=Object(r.useTranslation)(),{obj:n}=a.useContext(m.a),g=null===(e=null==n?void 0:n.metadata)||void 0===e?void 0:e.name,[E,y]=a.useMemo(()=>[Object(p.d)(g),Object(p.b)(g)],[g]),[O]=Object(u.kc)(u.Fb);return a.createElement(s.a,{"data-test-id":"utilization-card",isClickable:!0,isSelectable:!0},a.createElement(o.a,{actions:{actions:a.createElement(a.Fragment,null,a.createElement(b.UtilizationDurationDropdown,null)),hasNoOffset:!1,className:void 0}},a.createElement(i.a,null,t("public~Utilization"))),a.createElement(l.default,null,a.createElement(v.f.Provider,{value:g},a.createElement(h.b,{title:t("public~CPU"),humanizeValue:d.Yb,utilizationQuery:E[p.a.CPU_USAGE],requestQuery:E[p.a.CPU_REQUESTS],TopConsumerPopover:v.a,namespace:g}),a.createElement(h.b,{title:t("public~Memory"),humanizeValue:d.Wb,utilizationQuery:E[p.a.MEMORY_USAGE],requestQuery:E[p.a.MEMORY_REQUESTS],byteDataType:c.a.BinaryBytes,TopConsumerPopover:v.c,namespace:g}),a.createElement(h.b,{title:t("public~Filesystem"),humanizeValue:d.Wb,utilizationQuery:E[p.a.FILESYSTEM_USAGE],byteDataType:c.a.BinaryBytes,TopConsumerPopover:v.b,namespace:g}),a.createElement(h.a,{title:t("public~Network transfer"),humanizeValue:d.ac,queries:y[p.a.NETWORK_UTILIZATION],TopConsumerPopovers:f,namespace:g}),a.createElement(h.b,{title:t("public~Pod count"),humanizeValue:d.bc,utilizationQuery:E[p.a.POD_COUNT],namespace:g}),O.map(({uid:e,properties:t})=>{var n,r,s;return a.createElement(h.b,{key:e,title:t.title,humanizeValue:t.humanize,utilizationQuery:t.getUtilizationQuery(g),requestQuery:null===(n=t.getRequestQuery)||void 0===n?void 0:n.call(t,g),limitQuery:null===(r=t.getLimitQuery)||void 0===r?void 0:r.call(t,g),totalQuery:null===(s=t.getTotalQuery)||void 0===s?void 0:s.call(t,g),namespace:g,TopConsumerPopover:t.TopConsumerPopover})}))))}},5856:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"g",(function(){return p})),n.d(t,"f",(function(){return h})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return v}));var a=n(0),r=n(7),s=n(5745),o=n(5735),i=n(10),l=n(5);const c=a.createContext(".+"),u=(e,t,n)=>{const r=a.useContext(c);return a.useMemo(()=>{const a=Object(s.c)(r);return[{query:a[e],model:i.ProjectModel,metric:"namespace"},{query:a[t],model:i.PodModel,metric:"pod"},{query:a[n],model:i.NodeModel,metric:"instance"}]},[n,r,e,t])},d=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(s.a.PROJECTS_BY_CPU,s.a.PODS_BY_CPU,s.a.NODES_BY_CPU);return a.createElement(o.b,{title:t("public~CPU"),current:e,consumers:n,humanize:l.Yb})},m=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(s.a.PROJECTS_BY_MEMORY,s.a.PODS_BY_MEMORY,s.a.NODES_BY_MEMORY);return a.createElement(o.b,{title:t("public~Memory"),current:e,consumers:n,humanize:l.Wb})},p=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(s.a.PROJECTS_BY_STORAGE,s.a.PODS_BY_STORAGE,s.a.NODES_BY_STORAGE);return a.createElement(o.b,{title:t("public~Filesystem"),current:e,consumers:n,humanize:l.Wb})},h=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=a.useContext(c),u=a.useMemo(()=>{const e=Object(s.c)(n);return[{query:e[s.a.PROJECTS_BY_PODS],model:i.ProjectModel,metric:"namespace"},{query:e[s.a.NODES_BY_PODS],model:i.NodeModel,metric:"node"}]},[n]);return a.createElement(o.b,{title:t("public~Pod count"),current:e,consumers:u,humanize:l.bc})},b=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(s.a.PROJECTS_BY_NETWORK_IN,s.a.PODS_BY_NETWORK_IN,s.a.NODES_BY_NETWORK_IN);return a.createElement(o.b,{title:t("public~Network in"),current:e,consumers:n,humanize:l.ac})},v=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(s.a.PROJECTS_BY_NETWORK_OUT,s.a.PODS_BY_NETWORK_OUT,s.a.NODES_BY_NETWORK_OUT);return a.createElement(o.b,{title:t("public~Network out"),current:e,consumers:n,humanize:l.ac})}},5857:function(e,t,n){"use strict";n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return b}));var a=n(0),r=n(7),s=n(5735),o=n(5744),i=n(10),l=n(5);const c=a.createContext(""),u=e=>{const t=a.useContext(c);return{consumers:a.useMemo(()=>[{query:Object(o.c)(t)[e],model:i.PodModel,metric:"pod"}],[e,t]),namespace:t}},d=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(o.a.PODS_BY_CPU);return a.createElement(s.b,Object.assign({title:t("public~CPU"),current:e,humanize:l.Yb},n))},m=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(o.a.PODS_BY_MEMORY);return a.createElement(s.b,Object.assign({title:t("public~Memory"),current:e,humanize:l.Wb},n))},p=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(o.a.PODS_BY_FILESYSTEM);return a.createElement(s.b,Object.assign({title:t("public~Filesystem"),current:e,humanize:l.Wb},n))},h=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(o.a.PODS_BY_NETWORK_IN);return a.createElement(s.b,Object.assign({title:t("public~Network in"),current:e,humanize:l.ac},n))},b=({current:e})=>{const{t:t}=Object(r.useTranslation)(),n=u(o.a.PODS_BY_NETWORK_OUT);return a.createElement(s.b,Object.assign({title:t("public~Network out"),current:e,humanize:l.ac},n))}},5858:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var a=n(0),r=n(16),s=n(7),o=n(5670),i=n(406),l=n(192),c=n(434),u=n(295),d=n(296),m=n(967),p=n(10),h=n(4378),b=n(2231),v=n(5),f=n(8),g=n(15),E=n(5658),y=n(69),O=n(13),_=n(108),k=n(198);const j=Object(o.a)(({projectName:e,watchK8sResource:t,stopWatchK8sResource:n,resources:s,model:o,mapper:l,additionalResources:c,additionalDynamicResources:u})=>{var d;a.useEffect(()=>{if(e){const a=((e,t)=>({kind:e.crd?Object(f.Hb)(e):e.kind,isList:!0,prop:"resource",namespace:t}))(o,e);return t(a),c&&c.forEach(n=>t(Object.assign(Object.assign({},n),{namespace:e}))),()=>{n(a),c&&c.forEach(n)}}},[t,n,e,o,c]);const m=r.a(s.resource,"data",[]),p=r.a(s.resource,"loaded"),b=r.a(s.resource,"loadError"),v=c?c.reduce((e,t)=>(e[t.prop]=r.a(s[t.prop],"data"),e),{}):{},g=!c||c.filter(e=>!e.optional).every(e=>r.a(s[e.prop],"loaded")),E=!!c&&c.filter(e=>!e.optional).some(e=>!!r.a(s[e.prop],"loadError")),y=Object(_.b)(u||{}),O=null===(d=Object.values(y).find(e=>e.loadError))||void 0===d?void 0:d.loadError,k=Object.keys(y).every(e=>y[e].loaded);return a.createElement(i.a,null,a.createElement(h.ResourceInventoryItem,{kind:o,isLoading:!(e&&p&&g&&k),namespace:e,error:!!b||E||O,resources:m,additionalResources:v,mapper:l,dataTest:"resource-inventory-item"}))}),R=()=>{const e=Object(y.z)(y.t),[t]=Object(O.kc)(O.mb),[n]=Object(O.kc)(O.Eb),{obj:r}=a.useContext(E.a),o=Object(g.dd)(r),h=Object(v.Dc)({group:p.SecretModel.apiGroup,resource:p.SecretModel.plural,namespace:o,verb:"list"}),{t:f}=Object(s.useTranslation)();return a.createElement(l.a,{"data-test-id":"inventory-card"},a.createElement(c.a,null,a.createElement(u.a,null,f("public~Inventory"))),a.createElement(d.a,null,a.createElement(m.a,{hasGutter:!0},a.createElement(j,{projectName:o,model:p.DeploymentModel}),a.createElement(j,{projectName:o,model:p.DeploymentConfigModel}),a.createElement(j,{projectName:o,model:p.StatefulSetModel}),a.createElement(j,{projectName:o,model:p.PodModel,mapper:b.getPodStatusGroups}),a.createElement(j,{projectName:o,model:p.PersistentVolumeClaimModel,mapper:b.getPVCStatusGroups}),a.createElement(j,{projectName:o,model:p.ServiceModel}),a.createElement(j,{projectName:o,model:p.RouteModel}),a.createElement(j,{projectName:o,model:p.ConfigMapModel}),h&&a.createElement(j,{projectName:o,model:p.SecretModel}),a.createElement(j,{projectName:o,model:p.VolumeSnapshotModel,mapper:b.getVSStatusGroups}),e.map(e=>a.createElement(j,{key:e.properties.model.kind,projectName:o,model:e.properties.model,mapper:e.properties.mapper,additionalResources:e.properties.additionalResources})),t.map(e=>a.createElement(j,{key:e.properties.model.kind,projectName:o,model:e.properties.model,mapper:e.properties.mapper,additionalDynamicResources:e.properties.additionalResources})),n.map(({uid:e,properties:{component:t}})=>a.createElement(k.a,{key:e},a.createElement(i.a,null,a.createElement(t,{projectName:o})))))))}},5859:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var a=n(0),r=n(367),s=n(16),o=n(31),i=n(192),l=n(434),c=n(295),u=n(1950),d=n(5670),m=n(10),p=n(69),h=n(13),b=n(5734),v=n(5658),f=n(15),g=n(7),E=n(14);const y=Object(d.a)(({watchK8sResource:e,stopWatchK8sResource:t,resources:n,projectName:r,viewEvents:s})=>(a.useEffect(()=>{if(r){const n=(e=>({isList:!0,kind:m.EventModel.kind,prop:"events",namespace:e}))(r);return e(n),()=>{t(n)}}},[e,t,r]),a.createElement(u.RecentEventsBody,{events:n.events,moreLink:s}))),O=Object(o.connect)(e=>({models:e.k8s.getIn(["RESOURCES","models"])}))(Object(d.a)(({watchK8sResource:e,stopWatchK8sResource:t,resources:n,projectName:o,models:i})=>{const l=Object(p.z)(p.k),[c]=Object(h.kc)(h.lb),d=a.useMemo(()=>[...l,...c].filter(e=>{const t=i.get(e.properties.k8sResource.kind);return t&&t.namespaced}),[l,c,i]);a.useEffect(()=>{if(o)return d.forEach((t,n)=>{e(Object(b.a)(Object.assign(Object.assign({},t.properties.k8sResource),{namespace:o}),n))}),()=>{d.forEach((e,n)=>{t(Object(b.a)(e.properties.k8sResource,n))})}},[e,t,o,d]);const m=a.useMemo(()=>r.a(d.map((e,t)=>s.a(n,[Object(b.a)(e.properties.k8sResource,t).prop,"data"],[]).filter(t=>!e.properties.isActivity||e.properties.isActivity(t)).map(t=>{var n,a,r,s;return{resource:t,timestamp:e.properties.getTimestamp?e.properties.getTimestamp(t):null,loader:null===(a=null===(n=e)||void 0===n?void 0:n.properties)||void 0===a?void 0:a.loader,component:null===(s=null===(r=e)||void 0===r?void 0:r.properties)||void 0===s?void 0:s.component}}))),[d,n]),v=a.useMemo(()=>d.every((e,t)=>s.a(n,[Object(b.a)(e.properties.k8sResource,t).prop,"loaded"])),[d,n]);return a.createElement(u.OngoingActivityBody,{loaded:o&&v&&0!==i.size,resourceActivities:m})})),_=()=>{const{obj:e}=a.useContext(v.a),t=Object(f.dd)(e),n=`/k8s/ns/${t}/events`,{t:r}=Object(g.useTranslation)();return a.createElement(i.a,{"data-test-id":"activity-card",className:"co-overview-card--gradient",isClickable:!0,isSelectable:!0},a.createElement(l.a,{actions:{actions:a.createElement(a.Fragment,null,a.createElement(E.Link,{to:n,"data-test":"view-events-link"},r("public~View events"))),hasNoOffset:!1,className:"co-overview-card__actions"}},a.createElement(c.a,null,r("public~Activity"))),a.createElement(u.default,{className:"co-project-dashboard__activity-body"},a.createElement(O,{projectName:t}),a.createElement(y,{projectName:t,viewEvents:n})))}},5860:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(0),r=n(461),s=n(7),o=n(192),i=n(434),l=n(295),c=n(296),u=n(5861),d=n(5863),m=n(5658);const p=()=>{const{namespaceLinks:e}=a.useContext(m.a),{t:t}=Object(s.useTranslation)();return a.createElement(o.a,{"data-test-id":"launcher-card"},a.createElement(i.a,null,a.createElement(l.a,null,t("public~Launcher"))),a.createElement(c.a,null,a.createElement(u.a,null,r.a(e,"spec.text").map(e=>a.createElement(d.a,{key:e.metadata.uid,consoleLink:e})))))}},5861:function(e,t,n){"use strict";var a=n(0);n(5862);t.a=({children:e})=>a.createElement("div",{className:"co-launcher-card__body"},e)},5862:function(e,t,n){},5863:function(e,t,n){"use strict";var a=n(0),r=n(173);t.a=({consoleLink:e})=>a.createElement(r.a,{additionalClassName:"co-launcher-card__item",href:e.spec.href,text:e.spec.text,dataTestID:"launcher-item"})},5864:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(0),r=n(7),s=n(192),o=n(434),i=n(295),l=n(296),c=n(967),u=n(406),d=n(976),m=n(5865),p=n(5867),h=n(5870),b=n(10),v=n(5658);const f=()=>{const{obj:e}=a.useContext(v.a),[t,n,f]=Object(d.xb)({groupVersionKind:{kind:b.ResourceQuotaModel.kind,version:b.ResourceQuotaModel.apiVersion},namespace:e.metadata.name,isList:!0}),[g,E,y]=Object(d.xb)({groupVersionKind:{kind:b.AppliedClusterResourceQuotaModel.kind,version:b.AppliedClusterResourceQuotaModel.apiVersion,group:b.AppliedClusterResourceQuotaModel.apiGroup},namespace:e.metadata.name,isList:!0}),{t:O}=Object(r.useTranslation)();return a.createElement(s.a,{"data-test-id":"resource-quotas-card"},a.createElement(o.a,null,a.createElement(i.a,null,O("public~ResourceQuotas"))),a.createElement(l.a,null,a.createElement(m.a,{error:!!f,isLoading:!n},t.length?a.createElement(c.a,{hasGutter:!0},t.map(e=>a.createElement(u.a,{key:e.metadata.uid},a.createElement(p.a,{resourceQuota:e})))):void 0)),a.createElement(o.a,null,a.createElement(i.a,null,O("public~AppliedClusterResourceQuotas"))),a.createElement(l.a,null,a.createElement(m.a,{error:!!y,isLoading:!E,noText:O("public~No AppliedClusterResourceQuotas")},g.length?a.createElement(c.a,{hasGutter:!0},g.map(t=>a.createElement(u.a,{key:t.metadata.uid},a.createElement(h.a,{resourceQuota:t,namespace:e.metadata.name})))):void 0)))}},5865:function(e,t,n){"use strict";var a=n(0),r=n(7);n(5866);t.a=({error:e,isLoading:t,noText:n,children:s})=>{let o;const{t:i}=Object(r.useTranslation)();return e?o=a.createElement("div",{className:"text-secondary"},i("console-shared~Not available")):t?o=a.createElement("div",{className:"skeleton-quota"}):a.Children.count(s)||(o=a.createElement("div",{className:"text-secondary"},n||i("console-shared~No ResourceQuotas"))),a.createElement(a.Fragment,null,o||s)}},5866:function(e,t,n){},5867:function(e,t,n){"use strict";var a=n(0),r=n(516),s=n(164),o=n(1921),i=n(5746),l=n(1407),c=n(99),u=n(10),d=n(5749);t.a=({resourceQuota:e})=>{var t,n,m,p,h;const b=Object.keys(null!==(n=null===(t=e.status)||void 0===t?void 0:t.hard)&&void 0!==n?n:{}),[v,f]=a.useState(b.length<=4),g=null===(m=e.spec)||void 0===m?void 0:m.scopes;return a.createElement(a.Fragment,null,a.createElement(r.a,{hasGutter:!0},a.createElement(s.a,{isFilled:!0},a.createElement(o.a,{onToggle:(e,t)=>f(t),isExpanded:v,toggleContent:a.createElement(c.ResourceLink,{groupVersionKind:{kind:u.ResourceQuotaModel.kind,version:u.ResourceQuotaModel.apiVersion},name:e.metadata.name,namespace:e.metadata.namespace,inline:!0,truncate:!0,dataTest:"resource-quota-link"})})),a.createElement(s.a,null,a.createElement(d.a,{hard:null===(p=e.status)||void 0===p?void 0:p.hard,used:null===(h=e.status)||void 0===h?void 0:h.used}))),v&&a.createElement(a.Fragment,null,g&&a.createElement(l.QuotaScopesInline,{scopes:g}),a.createElement(i.a,{resourceQuota:e})))}},5868:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(5748),o=n(5674);n(5712);t.a=({clusterResourceQuota:e})=>{var t,n,i;const{t:l}=Object(r.useTranslation)(),c=Object.keys(null!==(i=null===(n=null===(t=e.status)||void 0===t?void 0:t.total)||void 0===n?void 0:n.hard)&&void 0!==i?i:{}).map(t=>{var n;const r=e.status.total.hard[t],i=null===(n=e.status.total.used)||void 0===n?void 0:n[t],{label:l,percent:c}=Object(o.a)({resourceName:t,used:i,hard:r});return a.createElement("div",{key:t,className:"co-resource-quota__chart","data-test":"resource-quota-gauge-chart"},a.createElement(s.a,{data:[{x:"Used",y:c},{x:"Unused",y:100-c}],title:t,label:l}))});return a.createElement("div",{className:"co-resource-quota-chart-row"},c.length?c:a.createElement(a.Fragment,null,l("console-app~No quota")))}},5869:function(e,t,n){},5870:function(e,t,n){"use strict";var a=n(0),r=n(516),s=n(164),o=n(1921),i=n(5747),l=n(1407),c=n(99),u=n(10),d=n(5749);t.a=({resourceQuota:e,namespace:t})=>{var n,m,p,h,b,v,f,g,E;const y=Object.keys(null!==(p=null===(m=null===(n=e.status)||void 0===n?void 0:n.total)||void 0===m?void 0:m.hard)&&void 0!==p?p:{}),[O,_]=a.useState(y.length<=4),k=null===(b=null===(h=null==e?void 0:e.spec)||void 0===h?void 0:h.quota)||void 0===b?void 0:b.scopes;return a.createElement(a.Fragment,null,a.createElement(r.a,{hasGutter:!0},a.createElement(s.a,{isFilled:!0},a.createElement(o.a,{onToggle:(e,t)=>_(t),isExpanded:O,toggleContent:a.createElement(c.ResourceLink,{groupVersionKind:{kind:u.AppliedClusterResourceQuotaModel.kind,version:u.AppliedClusterResourceQuotaModel.apiVersion,group:u.AppliedClusterResourceQuotaModel.apiGroup},name:e.metadata.name,namespace:t,inline:!0,truncate:!0})})),a.createElement(s.a,null,a.createElement(d.a,{hard:null===(f=null===(v=e.status)||void 0===v?void 0:v.total)||void 0===f?void 0:f.hard,used:null===(E=null===(g=e.status)||void 0===g?void 0:g.total)||void 0===E?void 0:E.used}))),O&&a.createElement(a.Fragment,null,k&&a.createElement(l.QuotaScopesInline,{scopes:k}),a.createElement(i.a,{appliedClusterResourceQuota:e,namespace:t})))}},5871:function(e,t,n){},5897:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return l}));const a={apiVersion:{"ui:widget":"hidden","ui:options":{label:!1}},kind:{"ui:widget":"hidden","ui:options":{label:!1}},spec:{"ui:options":{label:!1}},status:{"ui:widget":"hidden","ui:options":{label:!1}},"ui:order":["metadata","spec","*"]},r=["object","array"],s=["number","integer"],o=1e3,i=10**6,l=10**9},5914:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"u",(function(){return f})),n.d(t,"r",(function(){return E})),n.d(t,"g",(function(){return y})),n.d(t,"f",(function(){return O})),n.d(t,"e",(function(){return _})),n.d(t,"c",(function(){return k})),n.d(t,"m",(function(){return j})),n.d(t,"l",(function(){return R})),n.d(t,"j",(function(){return T})),n.d(t,"i",(function(){return N})),n.d(t,"b",(function(){return S})),n.d(t,"o",(function(){return P})),n.d(t,"p",(function(){return w})),n.d(t,"h",(function(){return x})),n.d(t,"n",(function(){return I})),n.d(t,"t",(function(){return D})),n.d(t,"k",(function(){return A})),n.d(t,"q",(function(){return M})),n.d(t,"d",(function(){return U})),n.d(t,"s",(function(){return L}));var a=n(230),r=n(380),s=n(255),o=n(22),i=n(7122),l=n(16),c=n(109),u=n(8),d=n(15),m=n(6165),p=n(5966);const h={[p.c.Deployed]:"Deployed",[p.c.Failed]:"Failed",[p.c.PendingInstall]:"PendingInstall",[p.c.PendingUpgrade]:"PendingUpgrade",[p.c.PendingRollback]:"PendingRollback",[p.c.Other]:"Other"},b=[p.c.Deployed,p.c.Failed,p.c.PendingInstall,p.c.PendingUpgrade,p.c.PendingRollback,p.c.Other],v=["unknown","uninstalled","superseded","uninstalling"],f=e=>e?e.split("-").map(e=>Object(d.te)(e)).join(""):"Unknown",g=e=>v.includes(e.info.status)?p.c.Other:e.info.status,E=e=>[{filterGroupName:e("helm-plugin~Status"),type:"helm-release-status",reducer:g,items:b.map(e=>({id:e,title:h[e]}))}],y=(e,t)=>e.filter(e=>v.includes(e.info.status)?t.includes(p.c.Other):t.includes(e.info.status)),O=(e,t)=>e.filter(e=>a(t,e.name)),_=(e,t)=>{const n=`/api/helm/releases?ns=${e}&limitInfo=${t||!1}`;return Object(c.c)(n)},k=(e,t)=>{const n=`/api/helm/release?ns=${e}&name=${t}`;return Object(c.c)(n)},j=(e,t,n)=>{const a=e.find(e=>e.version===t&&e.repoName===n);return null==a?void 0:a.urls[0]},R=(e,t)=>{var n;const a=null==e?void 0:e.find(e=>e.metadata.name===t);return(null===(n=null==a?void 0:a.spec)||void 0===n?void 0:n.name)?a.spec.name:t?Object(d.te)(t):null},T=(e,t,n)=>{const a=n.toLowerCase().split(" ").join("-");return Object.keys(e).find(e=>e.includes(`${t}--${a}`))},N=(e,t,n,a,r,o)=>{var i,l;if(t&&n){const r=R(a,n),s=T(e,t,n);return null!==(l=null===(i=null==e?void 0:e[s])||void 0===i?void 0:i.map(e=>Object.assign(Object.assign({},e),{repoName:r})))&&void 0!==l?l:[]}return s.a(e,(e,n,s)=>{const i=s.split("--").pop(),l=R(a,i);return n.forEach(n=>{var a,s;(n.name===t||r&&o&&(null===(a=null==n?void 0:n.annotations)||void 0===a?void 0:a[m.a])===r&&(null===(s=null==n?void 0:n.annotations)||void 0===s?void 0:s[m.b])===o)&&e.push(Object.assign(Object.assign({},n),{repoName:l}))}),e},[])},S=(e,t,n,a)=>{let r=e.split("--")[0];return t&&(r+=n("helm-plugin~ / App Version {{appVersion}}",{appVersion:t})),a&&(r+=n("helm-plugin~ (Provided by {{chartRepoName}})",{chartRepoName:Object(d.te)(a)})),r},P=(e,t)=>s.a(e,(e,n)=>(e[`${n.version}--${n.repoName}`]=S(n.version,n.appVersion,t,n.repoName),e),{}),C=(e,t,n)=>{switch(e){case p.a.topology:return"/topology/ns/"+t;case p.a.list:return"/helm-releases/ns/"+t;case p.a.details:return`/helm-releases/ns/${t}/release/${n}`;default:return"/helm-releases/ns/"+t}},w=(e,t,n,a,r,s,o)=>{switch(e){case p.b.Create:return{type:p.b.Create,title:a("helm-plugin~Create Helm Release"),subTitle:{form:a("helm-plugin~The Helm Release can be created by completing the form. Default values may be provided by the Helm chart authors."),yaml:a("helm-plugin~The Helm Release can be created by manually entering YAML or JSON definitions.")},helmReleaseApi:`/api/helm/chart?url=${encodeURIComponent(s)}&namespace=${n}&indexEntry=${encodeURIComponent(o)}`,fetch:c.c.post,redirectURL:C(p.a.topology,n,t)};case p.b.Upgrade:return{type:p.b.Upgrade,title:a("helm-plugin~Upgrade Helm Release"),subTitle:{form:a("helm-plugin~Upgrade by selecting a new chart version or manually changing the form values."),yaml:a("helm-plugin~Upgrade by selecting a new chart version or manually changing YAML.")},helmReleaseApi:`/api/helm/release?ns=${n}&name=${t}`,fetch:c.c.put,redirectURL:C(r,n,t)};case p.b.Rollback:return{type:p.b.Rollback,title:a("helm-plugin~Rollback Helm Release"),subTitle:"",helmReleaseApi:`/api/helm/release/history?ns=${n}&name=${t}`,fetch:c.c.patch,redirectURL:C(r,n,t)};default:return}},x=e=>Object.keys(e).reduce((t,n)=>(o.a(e[n].data)||t.push(e[n].data),t),[]),I=e=>{var t;const n=null===(t=null==e?void 0:e.files)||void 0===t?void 0:t.find(e=>"ordered-values.yaml"===e.name),a=n?atob(n.data):"";return a||(o.a(null==e?void 0:e.values)?"":Object(r.safeDump)(null==e?void 0:e.values))},D=e=>{if(!e||!e.manifest)return[];return Object(r.loadAll)(e.manifest,null,{schema:r.DEFAULT_SAFE_SCHEMA,json:!0}).filter(Boolean)},A=e=>{var t,n;const a=null===(t=null==e?void 0:e.files)||void 0===t?void 0:t.find(e=>"README.md"===e.name);return null!==(n=(null==a?void 0:a.data)&&atob(null==a?void 0:a.data))&&void 0!==n?n:""},M=e=>({Create:e("helm-plugin~Create"),Upgrade:e("helm-plugin~Upgrade"),Rollback:e("helm-plugin~Rollback")}),U=(e,t)=>{const n=`/api/helm/release/history?ns=${t}&name=${e}`;return Object(c.c)(n)},L=e=>!!e.find(e=>d.qc.includes(i.a(l.a(Object(u.vb)(Object(u.Db)(e)),"labelPlural"))))},5955:function(e,t,n){"use strict";n.d(t,"e",(function(){return N})),n.d(t,"g",(function(){return S})),n.d(t,"f",(function(){return P})),n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return w})),n.d(t,"a",(function(){return A})),n.d(t,"d",(function(){return U}));var a=n(5764),r=n(61),s=n(1031),o=n(22),i=n(50),l=n(1120),c=n(160),u=n(400),d=n(7130),m=n(113),p=n(107),h=n(460),b=n(313),v=n(255),f=n(373),g=n(4413),E=n(447),y=n(4439),O=n(70),_=n(4438),k=n(640),j=n(5897),R=n(6036);const T=["allOf","anyOf","oneOf"],N=e=>{var t;return(null!==(t=s.a(e))&&void 0!==t?t:[]).map(e=>/^\d+$/.test(e)?"items":e)},S=(e,t,n)=>{var r;const s=Object(a.getUiOptions)(null!=t?t:{});return[null===(r=null==s?void 0:s.label)||void 0===r||r,(null==s?void 0:s.title)||(null==e?void 0:e.title)||n]},P=(e,t,n)=>{var r;return(null===(r=Object(a.getUiOptions)(null!=t?t:{}))||void 0===r?void 0:r.description)||(null==e?void 0:e.description)||n},C=e=>[...o.a(e)?[{title:"Empty Schema",message:"Schema is empty."}]:[],...i.a(l.a(c.a(e),T),e=>({title:"Unsupported Property",message:`Cannot generate form fields for JSON schema with ${e} property.`}))],w=(e={},t={})=>{var n;if(C(e).length>0)return!0;const r=null!==(n=Object(a.getSchemaType)(e))&&void 0!==n?n:"",s=!(null==t?void 0:t["ui:field"])&&!(null==t?void 0:t["ui:widget"]);switch(r){case R.a.array:return s&&w(e.items,null==t?void 0:t.items);case R.a.object:return s&&u.a(null==e?void 0:e.properties,(e,n)=>w(e,null==t?void 0:t[n]));case R.a.boolean:case R.a.integer:case R.a.number:case R.a.string:return!1;default:return s}},x=(e,t)=>{var n,a;return Number(null!==(a=null!==(n=null==e?void 0:e["ui:sortOrder"])&&void 0!==n?n:d.a(c.a(e).map(n=>!n.includes(":")&&m.a(null==e?void 0:e[n])?x(null==e?void 0:e[n],t):t)))&&void 0!==a?a:t)},I=(e,t)=>{if(!m.a(e))return[];const{"ui:dependency":n}=e;return[...n&&p.a(n.controlFieldPath.slice(0,-1),null!=t?t:[])?[n.controlFieldName]:[],...h.a(e,e=>I(e,t))]},D=(e,t,n,a)=>{var r;const s=(null!==(r=null==t?void 0:t.required)&&void 0!==r?r:[]).includes(e),o=null==n?void 0:n[e],i=I(o,a),l=b.a(n,({"ui:dependency":t})=>p.a(null==t?void 0:t.controlFieldPath,[...null!=a?a:[],e])),u=x(o,c.a(null==t?void 0:t.properties).length),d=l?u*j.f:0,m=d+u;return(null==i?void 0:i.length)?Math.max(...i.map(e=>D(e,t,n,a)))+m:(s||o||d?0:1/0)-(s?j.a:0)-(o?j.e:0)+m},A=(e,t,n)=>{switch(Object(a.getSchemaType)(null!=e?e:{})){case R.a.array:return(()=>{const a=A(null==e?void 0:e.items,null==t?void 0:t.items,[...null!=n?n:[],"items"]);return o.a(a)?{}:{items:a}})();case R.a.object:return(()=>{var a,s;const i=c.a(null!==(a=null==e?void 0:e.properties)&&void 0!==a?a:{});if(o.a(i))return{};const l=r.Set(i).sortBy(a=>D(a,e,t,null!=n?n:[])).toJS();return Object.assign(Object.assign({},l.length>1&&{"ui:order":l}),v.a(null!==(s=null==e?void 0:e.properties)&&void 0!==s?s:{},(e,a,r)=>{const s=A(a,null==t?void 0:t[r],[...null!=n?n:[],r]);return o.a(s)?e:Object.assign(Object.assign({},e),{[r]:s})},{}))})();default:return{}}},M=(e,t)=>{const n=(e,n)=>((e,n)=>f.a(e)||g.a(e)||E.a(e)&&o.a(e)||m.a(e)&&o.a(M(e,null==t?void 0:t[n])))(e,n)&&!(e=>!f.a(e)&&o.a(e))(null==t?void 0:t[n]);return y.a(e,(t,a)=>{n(t,a)&&delete e[a]}),O.a(e)&&_.a(e,void 0),e},U=(e,t)=>M(k.a(e),t)},5962:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(1416),r=n(380);const s=e=>{const t=new Blob([e],{type:"text/yaml;charset=utf-8"});let n="k8s-object.yaml";try{const t=Object(r.safeLoad)(e);t.kind&&(n=`${t.kind.toLowerCase()}-${t.metadata.name}.yaml`)}catch(e){console.error("Could not parse YAML file:",e)}Object(a.saveAs)(t,n)}},5966:function(e,t,n){"use strict";var a,r,s;n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s})),function(e){e.Deployed="deployed",e.Failed="failed",e.PendingInstall="pending-install",e.PendingUpgrade="pending-upgrade",e.PendingRollback="pending-rollback",e.Other="other"}(a||(a={})),function(e){e.Create="Create",e.Upgrade="Upgrade",e.Rollback="Rollback"}(r||(r={})),function(e){e.details="details",e.list="list",e.topology="topology"}(s||(s={}))},6036:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.string="string",e.number="number",e.integer="integer",e.boolean="boolean",e.null="null",e.array="array",e.object="object"}(a||(a={}))},6165:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return l}));const a="charts.openshift.io/name",r="charts.openshift.io/providerType",s="charts.openshift.io/provider",o="charts.openshift.io/supportURL";var i;!function(e){e.redhat="redhat",e.partner="partner",e.community="community"}(i||(i={}));const l={community:"helm-plugin~Community",partner:"helm-plugin~Partner",redhat:"helm-plugin~Red Hat"}},6422:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return o}));const a="OPENSHIFT_HELM",r="HELM_CHARTS_CATALOG_TYPE",s="HelmChart",o="helm"},7416:function(e,t,n){"use strict";var a=n(0),r=n(156),s=n(405),o=n(564),i=n(355),l=n(873),c=n(7);t.a=()=>{const{t:e}=Object(c.useTranslation)();return a.createElement(r.a,{variant:r.b.full},a.createElement(s.a,{titleText:a.createElement(a.Fragment,null,e("helm-plugin~No release notes available")),icon:a.createElement(o.a,{icon:l.a}),headingLevel:"h2"}),a.createElement(i.a,null,e("helm-plugin~Release notes are not available for this Helm Chart.")))}},7417:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(1411),o=n(284),i=n(7418);t.a=({obj:e,customData:t})=>{const{t:n}=Object(r.useTranslation)();return a.createElement("div",{className:"co-m-pane__body"},a.createElement(o.c,{text:n("helm-plugin~Helm Release details")}),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-6"},a.createElement(s.b,{resource:e,customPathName:"metadata.labels.name"})),a.createElement("div",{className:"col-sm-6"},a.createElement(i.a,{helmRelease:t,obj:e}))))}},7418:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(5),o=n(15),i=n(5914);t.a=({obj:e,helmRelease:t})=>{var n,l;const{t:c}=Object(r.useTranslation)();if(!t)return null;const{chart:{metadata:{name:u,version:d,appVersion:m}},info:{last_deployed:p}}=t,{metadata:{labels:{version:h}}}=e;return a.createElement("dl",{className:"co-m-pane__details"},a.createElement("dt",null,c("helm-plugin~Status")),a.createElement("dd",{"data-test":"helm-release-status-details"},a.createElement(o.cc,{status:Object(i.u)(null===(n=null==t?void 0:t.info)||void 0===n?void 0:n.status),title:i.a[null===(l=null==t?void 0:t.info)||void 0===l?void 0:l.status]})),a.createElement("dt",null,c("helm-plugin~Chart name")),a.createElement("dd",null,u),a.createElement("dt",null,c("helm-plugin~Chart version")),a.createElement("dd",null,d),a.createElement("dt",null,c("helm-plugin~App version")),a.createElement("dd",null,m||"-"),a.createElement("dt",null,c("helm-plugin~Revision")),a.createElement("dd",null,h),a.createElement("dt",null,c("helm-plugin~Updated")),a.createElement("dd",null,a.createElement(s.xb,{timestamp:p})))}},7419:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(5),o=n(8157);t.a=()=>{const{t:e}=Object(r.useTranslation)();return a.createElement("div",null,a.createElement(s.Z,{title:e("helm-plugin~Helm Releases")}),a.createElement(o.a,null))}},776:function(e,t,n){"use strict";n.r(t);var a=n(1206);n.d(t,"NamespaceRedirect",(function(){return a.a}));var r=n(8126);n.d(t,"HelmInstallUpgradePage",(function(){return r.a}));var s=n(8152);n.d(t,"HelmReleaseRollbackPage",(function(){return s.a}));var o=n(8154);n.d(t,"HelmReleaseDetailsPage",(function(){return o.a}));var i=n(7419);n.d(t,"HelmReleaseListPage",(function(){return i.a}));var l=n(8159);n.d(t,"HelmChartRepositoryForm",(function(){return l.a}));var c=n(8161);n.d(t,"ProjectHelmChartRepositoryListPage",(function(){return c.a}));var u=n(8164);n.d(t,"HelmChartRepositoryListPage",(function(){return u.a}));var d=n(8165);n.d(t,"HelmTabbedPage",(function(){return d.a}))},8126:function(e,t,n){"use strict";var a=n(0),r=n(55),s=n(380),o=n(22),i=n(137),l=n(7),c=n(14),u=n(5695),d=n(109),m=n(5),p=n(5955),h=n(614),b=n(6165),v=n(5966),f=n(5914),g=n(9342),E=n(9343),y=n(9344),O=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((a=a.apply(e,t||[])).next())}))};t.a=()=>{var e,t,n,_,k,j;const R=Object(c.useLocation)(),T=Object(c.useParams)(),N=new URLSearchParams(R.search),S=T.ns||N.get("preselected-ns"),P=N.get("chartURL"),C=N.get("indexEntry"),w=T.releaseName||"",x=N.get("chartName"),I=N.get("chartRepoName"),D=N.get("actionOrigin"),{t:A}=Object(l.useTranslation)(),[M,U]=a.useState(null),[L,F]=a.useState(""),[B,q]=a.useState(""),[$,K]=a.useState(""),[Y,H]=a.useState(""),[G,V]=a.useState(!1),[W,z]=a.useState(null),[Q,J]=a.useState(""),[Z,X]=a.useState(),[ee,te]=a.useState(),ne=P?v.b.Create:v.b.Upgrade,ae=a.useMemo(()=>Object(f.p)(ne,w,S,A,D,P,C),[ne,D,C,P,w,S,A]);a.useEffect(()=>{let e=!1;return O(void 0,void 0,void 0,(function*(){var t;let n,a=null;try{n=yield Object(d.c)(ae.helmReleaseApi)}catch(e){a=e}if(e)return;const r=(null==n?void 0:n.chart)||n,i=Object(f.n)(r),l=(o.a(null==n?void 0:n.config)?"":Object(s.safeDump)(null==n?void 0:n.config))||i,c=null!==(t=(null==n?void 0:n.config)||(null==r?void 0:r.values))&&void 0!==t?t:{},u=(null==r?void 0:r.schema)&&JSON.parse(atob(null==r?void 0:r.schema));J(l),X(c),te(u),F(null==r?void 0:r.metadata.name),q(null==r?void 0:r.metadata.version),K(null==r?void 0:r.metadata.appVersion),H(Object(f.k)(r)),V(!!l),U(r),z(a)})),()=>{e=!0}},[ae.helmReleaseApi,ne]);const re={releaseName:w||x||"",chartURL:P,chartIndexEntry:C,chartName:L,chartRepoName:I||"",appVersion:$,chartVersion:B,chartReadme:Y,yamlData:Q,formData:Z,formSchema:ee,editorType:ee?h.b.Form:h.b.YAML};if(!M&&!W)return a.createElement(m.S,null);const se=null!==(n=null===(t=null===(e=null==M?void 0:M.metadata)||void 0===e?void 0:e.annotations)||void 0===t?void 0:t[b.a])&&void 0!==n?n:"",oe=null!==(j=null===(k=null===(_=null==M?void 0:M.metadata)||void 0===_?void 0:_.annotations)||void 0===k?void 0:k[b.b])&&void 0!==j?j:"",ie=a.createElement(E.a,{chart:M});return a.createElement(u.b,{variant:u.a.light,disabled:!0,hideApplications:!0},a.createElement(i.a,null,a.createElement("title",null,ae.title)),a.createElement(r.b,{initialValues:re,onSubmit:(e,t)=>{const{releaseName:n,chartURL:a,chartIndexEntry:r,yamlData:o,formData:i,editorType:l}=e;let c;if(l===h.b.Form)try{const e=Object(p.d)(i);if(!e)return t.setStatus({submitError:A("helm-plugin~Errors in the form data.")}),Promise.resolve();c=e}catch(e){return t.setStatus({submitError:A("helm-plugin~Invalid Form Schema - {{errorText}}",{errorText:e.toString()})}),Promise.resolve()}else if(o)try{c=Object(s.safeLoad)(o)}catch(e){return t.setStatus({submitError:A("helm-plugin~Invalid YAML - {{errorText}}",{errorText:e.toString()})}),Promise.resolve()}const u=Object.assign(Object.assign(Object.assign({namespace:S,name:n},a?{chart_url:a}:{}),C?{indexEntry:C}:{indexEntry:r}),c?{values:c}:{});return ae.fetch("/api/helm/release/async",u,null,-1).then(e=>O(void 0,void 0,void 0,(function*(){var t,a;let r,s=ae.redirectURL;try{r=yield Object(f.c)(S,n)}catch(e){console.error("Could not fetch the helm release",e)}const o=Object(f.t)(r);if(Object(f.s)(o)){const n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.uid;s=(null===(a=null==r?void 0:r.info)||void 0===a?void 0:a.notes)?`${ae.redirectURL}?selectId=${n}&selectTab=${A("helm-plugin~Release notes")}`:ae.redirectURL}else s=`/helm-releases/ns/${S}/release/${n}`;m.Vb.push(s)}))).catch(e=>{t.setStatus({submitError:e.message})})},onReset:m.Vb.goBack,validationSchema:Object(g.a)(ne,A)},e=>a.createElement(y.a,Object.assign({},e,{chartHasValues:G,chartMetaDescription:ie,helmActionConfig:ae,onVersionChange:U,chartError:W,namespace:S,chartIndexEntry:C,annotatedName:se,providerName:oe}))))}},8152:function(e,t,n){"use strict";var a=n(0),r=n(55),s=n(137),o=n(7),i=n(14),l=n(5695),c=n(5),u=n(5966),d=n(5914),m=n(9347),p=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((a=a.apply(e,t||[])).next())}))};t.a=()=>{const{t:e}=Object(o.useTranslation)(),{releaseName:t,ns:n}=Object(i.useParams)(),h=Object(c.Tb)("actionOrigin"),[b,v]=a.useState(null),f=a.useMemo(()=>Object(d.p)(u.b.Rollback,t,n,e,h),[h,n,t,e]);a.useEffect(()=>{let e=!1;return p(void 0,void 0,void 0,(function*(){let a;try{a=yield Object(d.d)(t,n)}catch(e){}e||(null==a?void 0:a.length)>0&&v(a)})),()=>{e=!0}},[n,t]);return a.createElement(l.b,{variant:l.a.light,disabled:!0,hideApplications:!0},a.createElement(s.b,null,a.createElement("title",null,f.title)),a.createElement(r.b,{initialValues:{revision:-1},onSubmit:(e,a)=>{const r={namespace:n,name:t,version:e.revision};return f.fetch("/api/helm/release",r,null,-1).then(()=>{c.Vb.push(f.redirectURL)}).catch(e=>{a.setStatus({submitError:e.message})})},onReset:c.Vb.goBack},e=>a.createElement(m.a,Object.assign({},e,{releaseName:t,releaseHistory:b,helmActionConfig:f}))))}},8153:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a=n(54);const r={input:n(5).F.columnClass,revision:"pf-v5-u-w-8-on-xl pf-v5-u-w-25-on-xs",updated:"pf-v5-u-w-16-on-xl pf-v5-u-w-25-on-lg pf-v5-u-w-40-on-xs",status:"pf-m-hidden pf-m-visible-on-lg pf-v5-u-w-8-on-xl pf-v5-u-w-16-on-lg",chartName:"pf-m-hidden pf-m-visible-on-xl",chartVersion:"pf-m-hidden pf-m-visible-on-xl",appVersion:"pf-m-hidden pf-m-visible-on-xl",description:"pf-m-hidden pf-m-visible-on-xl"};t.a=e=>()=>[{title:"",props:{className:r.input}},{title:e("helm-plugin~Revision"),sortField:"version",transforms:[a.a],props:{className:r.revision}},{title:e("helm-plugin~Updated"),sortField:"info.last_deployed",transforms:[a.a],props:{className:r.updated}},{title:e("helm-plugin~Status"),sortField:"info.status",transforms:[a.a],props:{className:r.status}},{title:e("helm-plugin~Chart name"),sortField:"chart.metadata.name",transforms:[a.a],props:{className:r.chartName}},{title:e("helm-plugin~Chart version"),sortField:"chart.metadata.version",transforms:[a.a],props:{className:r.chartVersion}},{title:e("helm-plugin~App version"),sortField:"chart.metadata.appVersion",transforms:[a.a],props:{className:r.appVersion}},{title:e("helm-plugin~Description"),props:{className:r.description}}]},8154:function(e,t,n){"use strict";var a=n(0),r=n(5695),s=n(5),o=n(15),i=n(9349);const l=e=>{e===o.c?s.Vb.push("/helm-releases/all-namespaces"):s.Vb.push("/helm-releases/ns/:ns")};t.a=()=>a.createElement(r.b,{variant:r.a.light,hideApplications:!0,onNamespaceChange:l},a.createElement(i.a,null))},8155:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a=n(54);const r={revision:"",updated:"",status:"pf-m-hidden pf-m-visible-on-lg",chartName:"pf-m-hidden pf-m-visible-on-xl",chartVersion:"pf-m-hidden pf-m-visible-on-xl",appVersion:"pf-m-hidden pf-m-visible-on-xl",description:"pf-m-hidden pf-m-visible-on-xl",kebab:n(5).F.columnClass};t.a=e=>()=>[{title:e("helm-plugin~Revision"),sortField:"version",transforms:[a.a],props:{className:r.revision}},{title:e("helm-plugin~Updated"),sortField:"info.last_deployed",transforms:[a.a],props:{className:r.updated}},{title:e("helm-plugin~Status"),sortField:"info.status",transforms:[a.a],props:{className:r.status}},{title:e("helm-plugin~Chart name"),sortField:"chart.metadata.name",transforms:[a.a],props:{className:r.chartName}},{title:e("helm-plugin~Chart version"),sortField:"chart.metadata.version",transforms:[a.a],props:{className:r.chartVersion}},{title:e("helm-plugin~App version"),sortField:"chart.metadata.appVersion",transforms:[a.a],props:{className:r.appVersion}},{title:e("helm-plugin~Description"),props:{className:r.description}},{title:"",props:{className:r.kebab}}]},8156:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a=n(54);const r={name:"",type:"",status:"pf-m-hidden pf-m-visible-on-md",created:"pf-m-hidden pf-m-visible-on-lg"};t.a=e=>()=>[{title:e("helm-plugin~Name"),sortField:"metadata.name",transforms:[a.a],props:{className:r.name}},{title:e("helm-plugin~Type"),sortField:"kind",transforms:[a.a],props:{className:r.type}},{title:e("helm-plugin~Status"),sortField:"status.phase",transforms:[a.a],props:{className:r.status}},{title:e("helm-plugin~Created"),sortField:"metadata.creationTimestamp",transforms:[a.a],props:{className:r.created}}]},8157:function(e,t,n){"use strict";var a=n(0),r=n(156),s=n(405),o=n(564),i=n(611),l=n(612),c=n(469),u=n(137),d=n(7),m=n(14),p=n(1401),h=n(5),b=n(108),v=n(10),f=n(15),g=n(6422),E=n(5914),y=n(8158),O=n(9356);n(9357);const _=e=>({id:e.name});t.a=()=>{var e;const{t:t}=Object(d.useTranslation)(),n=Object(m.useParams)().ns,k=a.useRef(0),[j,R]=a.useState(!1),[T,N]=a.useState(),[S,P]=a.useState([]),C=a.useMemo(()=>({isList:!0,namespace:n,kind:v.SecretModel.kind,namespaced:!0,optional:!0,selector:{matchLabels:{owner:"helm"},matchExpressions:[{key:"status",operator:"NotEquals",values:["superseded"]}]},partialMetadata:!0}),[n]),[w,x,I]=Object(b.a)(C),D=null!==(e=null==w?void 0:w.length)&&void 0!==e?e:0;if(a.useEffect(()=>{R(!1),k.current=0},[n]),a.useEffect(()=>{let e=!1;return x&&!I&&(0===D?(N(null),R(!0),P([])):D!==k.current&&(R(!1),Object(E.e)(n,!0).then(t=>{e||(P(t),R(!0),N(null))}).catch(n=>{e||(R(!0),N(n.message||t("helm-plugin~Unable to load Helm Releases")))})),k.current=D),()=>{e=!0}},[n,D,I,x,t]),I||T)return a.createElement(h.wb,{loaded:!0,loadError:I||T,label:t("helm-plugin~Helm Releases")});return a.createElement(a.Fragment,null,a.createElement(u.b,null,a.createElement("title",null,t("helm-plugin~Helm Releases"))),a.createElement(f.D,{resources:S,loaded:x&&j&&D===k.current,EmptyMsg:()=>{const e=Object(f.Nd)(g.d),c={pathname:"/catalog/ns/"+n,search:"?catalogType=HelmChart"};return a.createElement(r.a,{variant:r.b.full},a.createElement(s.a,{titleText:a.createElement(a.Fragment,null,t("helm-plugin~No Helm Releases found")),icon:a.createElement(o.a,{icon:()=>a.createElement("img",{className:"odc-helm-release__empty-list__image",src:Object(p.d)("icon-helm"),alt:""})}),headingLevel:"h3"}),a.createElement(i.a,null,e?a.createElement(l.a,null,a.createElement(m.Link,{to:c},t("helm-plugin~Browse the catalog to discover available Helm Charts"))):null))},queryArg:"rowFilter-helm-release-status",textFilter:"name",rowFilters:Object(E.r)(t),sortBy:"name",sortOrder:c.a.asc,rowFilterReducer:E.g,textFilterReducer:E.f,ResourceRow:O.a,resourceHeader:Object(y.a)(t),getRowProps:_}))}},8158:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a=n(54);const r={name:"",revision:"",updated:"",status:"pf-m-hidden pf-m-visible-on-lg",chartName:"pf-m-hidden pf-m-visible-on-xl",chartVersion:"pf-m-hidden pf-m-visible-on-xl",appVersion:"pf-m-hidden pf-m-visible-on-xl pf-v5-u-w-8-on-xl",kebab:n(5).F.columnClass};t.a=e=>()=>[{title:e("helm-plugin~Name"),sortField:"name",transforms:[a.a],props:{className:r.name}},{title:e("helm-plugin~Revision"),sortField:"version",transforms:[a.a],props:{className:r.revision}},{title:e("helm-plugin~Updated"),sortField:"info.last_deployed",transforms:[a.a],props:{className:r.updated}},{title:e("helm-plugin~Status"),sortField:"info.status",transforms:[a.a],props:{className:r.status}},{title:e("helm-plugin~Chart name"),sortField:"chart.metadata.name",transforms:[a.a],props:{className:r.chartName}},{title:e("helm-plugin~Chart version"),sortField:"chart.metadata.version",transforms:[a.a],props:{className:r.chartVersion}},{title:e("helm-plugin~App version"),sortField:"chart.metadata.appVersion",transforms:[a.a],props:{className:r.appVersion}},{title:"",props:{className:r.kebab}}]},8159:function(e,t,n){"use strict";var a=n(0),r=n(137),s=n(7),o=n(14),i=n(5695),l=n(13),c=n(1951),u=n(8),d=n(15),m=n(9358);t.a=()=>{const{t:e}=Object(s.useTranslation)(),t=Object(o.useParams)(),n=Object(d.Ve)().get("kind"),p=!!t.name,h=p&&n&&Object(u.tb)(n)===c.a.kind,[b]=Object(l.hc)({group:c.a.apiGroup,resource:c.a.plural,verb:"create"}),[v]=Object(l.hc)({group:c.b.apiGroup,resource:c.b.plural,verb:"create"}),f=()=>a.createElement(a.Fragment,null,a.createElement(r.b,{"data-test":`form-title ${p?"Edit":"Create"} Helm Chart Repository`},a.createElement("title",null,e(p?"helm-plugin~Edit Helm Chart Repository":"helm-plugin~Create Helm Chart Repository"))),a.createElement(m.a,{showScopeType:b&&v,existingRepoName:t.name}));return h?f():a.createElement(i.b,{variant:i.a.light,hideApplications:!0,disabled:!0},f())}},8160:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c}));var a=n(499),r=n(77),s=n(8),o=n(1951);const i=e=>{var t,n,r,s,o,i,l,c,u,d,m,p,h,b,v,f,g,E,y,O;return{scope:null==e?void 0:e.kind,repoName:null!==(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.name)&&void 0!==n?n:"",repoDisplayName:null!==(s=null===(r=null==e?void 0:e.spec)||void 0===r?void 0:r.name)&&void 0!==s?s:"",ca:null!==(c=null===(l=null===(i=null===(o=null==e?void 0:e.spec)||void 0===o?void 0:o.connectionConfig)||void 0===i?void 0:i.ca)||void 0===l?void 0:l.name)&&void 0!==c?c:"",disabled:null!==(d=null===(u=null==e?void 0:e.spec)||void 0===u?void 0:u.disabled)&&void 0!==d&&d,tlsClientConfig:null!==(b=null===(h=null===(p=null===(m=null==e?void 0:e.spec)||void 0===m?void 0:m.connectionConfig)||void 0===p?void 0:p.tlsClientConfig)||void 0===h?void 0:h.name)&&void 0!==b?b:"",repoDescription:null!==(f=null===(v=null==e?void 0:e.spec)||void 0===v?void 0:v.description)&&void 0!==f?f:"",repoUrl:null!==(y=null===(E=null===(g=null==e?void 0:e.spec)||void 0===g?void 0:g.connectionConfig)||void 0===E?void 0:E.url)&&void 0!==y?y:"",metadata:null!==(O=a.a(null==e?void 0:e.metadata,["name","namespace"]))&&void 0!==O?O:{}}},l=(e,t)=>{const{repoName:n,ca:a,disabled:r,tlsClientConfig:s,repoDescription:i,repoUrl:l,metadata:c,scope:u,repoDisplayName:d}=e;return{apiVersion:"ProjectHelmChartRepository"===u?`${o.b.apiGroup}/${o.b.apiVersion}`:`${o.a.apiGroup}/${o.a.apiVersion}`,kind:u,metadata:Object.assign(Object.assign(Object.assign({},n?{name:n}:{name:""}),"ProjectHelmChartRepository"===u?{namespace:t}:{}),c),spec:Object.assign(Object.assign(Object.assign({connectionConfig:Object.assign(Object.assign({url:l},a?{ca:{name:a}}:{}),s?{tlsClientConfig:{name:s}}:{})},i?{description:i}:{}),r?{disabled:r}:{}),d?{name:d}:{})}},c=(e,t)=>({apiVersion:t?`${Object(r.c)(t).group}/${Object(r.c)(t).version}`:`${o.b.apiGroup}/${o.b.apiVersion}`,kind:t?Object(s.tb)(t):o.b.kind,metadata:Object.assign({name:""},t===Object(s.Hb)(o.b)?{namespace:e}:{}),spec:{connectionConfig:{url:""},name:""}})},8161:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(40),o=n(8),i=n(1951),l=n(8162);t.a=e=>{const{t:t}=Object(r.useTranslation)(),n={to:`/ns/${e.namespace||"default"}/helmchartrepositories/~new/form?kind=${Object(o.Hb)(i.b)}`};return a.createElement(s.c,Object.assign({},e,{canCreate:!0,createProps:n,"aria-label":t("helm-plugin~Project Helm Chart Repositories"),kind:Object(o.Hb)(i.b),ListComponent:l.a}))}},8162:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(40),o=n(9362),i=n(8163);t.a=e=>{const{t:t}=Object(r.useTranslation)();return a.createElement(s.j,Object.assign({},e,{Header:Object(i.a)(t),Row:o.a,virtualize:!0}))}},8163:function(e,t,n){"use strict";var a=n(54),r=n(18),s=n(5);const o=["","","","",r("pf-m-hidden","pf-m-visible-on-xl"),r("pf-m-hidden","pf-m-visible-on-xl"),s.F.columnClass];t.a=e=>()=>[{title:e("helm-plugin~Name"),sortField:"metadata.name",transforms:[a.a],props:{className:o[0]}},{title:e("helm-plugin~Display Name"),sortField:"spec.name",transforms:[a.a],props:{className:o[1]}},{title:e("helm-plugin~Namespace"),sortField:"metadata.namespace",transforms:[a.a],props:{className:o[2]}},{title:e("helm-plugin~Disabled"),sortField:"spec.disabled",transforms:[a.a],props:{className:o[3]}},{title:e("helm-plugin~Repo URL"),sortField:"spec.connectionConfig.url",transforms:[a.a],props:{className:o[4]}},{title:e("helm-plugin~Created"),sortField:"metadata.creationTimestamp",transforms:[a.a],props:{className:o[5]}},{title:"",props:{className:o[6]}}]},8164:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(40),o=n(8),i=n(1951),l=n(8162);t.a=e=>{const{t:t}=Object(r.useTranslation)(),n={to:`/ns/${e.namespace||"default"}/helmchartrepositories/~new/form?kind=${Object(o.Hb)(i.a)}&actionOrigin=search`};return a.createElement(s.c,Object.assign({},e,{"aria-label":t("helm-plugin~Helm Chart Repositories"),canCreate:!0,createProps:n,kind:Object(o.Hb)(i.a),ListComponent:l.a}))}},8165:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(14),o=n(5695),i=n(5805),l=n(13),c=n(978),u=n(5),d=n(15),m=n(1951),p=n(8157),h=n(7419),b=n(9363);const v=Object(c.b)(()=>{const{t:e}=Object(r.useTranslation)(),{ns:t}=Object(s.useParams)(),n=Object(d.Fe)("HELM_CHARTS_CATALOG_TYPE"),[o,c]=[!1,!1],[v,f]=Object(l.hc)({group:m.b.apiGroup,resource:m.b.plural,verb:"create",namespace:t}),[g,E]=Object(l.hc)({group:m.a.apiGroup,resource:m.a.plural,verb:"create"}),[y,O]=Object(l.hc)({group:m.b.apiGroup,resource:m.b.plural,verb:"update",namespace:t}),[_,k]=Object(l.hc)({group:m.a.apiGroup,resource:m.a.plural,verb:"update"}),[j,R]=Object(l.hc)({group:m.b.apiGroup,resource:m.b.plural,verb:"list",namespace:t}),[T,N]=Object(l.hc)({group:m.a.apiGroup,resource:m.a.plural,verb:"list"}),S={helmRelease:{label:n?e("helm-plugin~Helm Release"):null,onSelection:()=>`/catalog/ns/${t}?catalogType=HelmChart`},projectHelmChartRepository:{label:v||g?e("helm-plugin~Repository"):null,onSelection:()=>`/ns/${t}/helmchartrepositories/~new/form`}},P=[{href:"",nameKey:"helm-plugin~Helm Releases",component:p.a},{href:"repositories",nameKey:"helm-plugin~Repositories",component:b.a,pageData:{showTitle:o,canCreate:c}}];return f||O||E||k||R||N?a.createElement(u.S,null):t?j&&v&&y||T&&g&&_?a.createElement(d.ob,{pages:P,title:e("helm-plugin~Helm"),menuActions:S,telemetryPrefix:"Helm"}):a.createElement(h.a,null):a.createElement(i.b,{title:e("helm-plugin~Helm")},t=>a.createElement(r.Trans,{t:e,ns:"helm-plugin"},"Select a Project to view its details",a.createElement(i.a,{openProjectModal:t}),"."))});t.a=e=>a.createElement(o.b,{variant:o.a.light,hideApplications:!0},a.createElement(v,Object.assign({},e)))},9342:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(689),r=n(15),s=n(5966);const o=(e,t)=>{switch(e){case s.b.Create:return a.object().shape({releaseName:Object(r.Zd)(t)});case s.b.Upgrade:return a.object().shape({chartVersion:a.string().required(t("helm-plugin~Required"))});default:return null}}},9343:function(e,t,n){"use strict";var a=n(0),r=n(663),s=n(7),o=n(1401);t.a=({chart:e})=>{var t,n,i,l,c,u,d;const{t:m}=Object(s.useTranslation)(),p=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.version,h=r.a(null===(n=null==e?void 0:e.metadata)||void 0===n?void 0:n.name),b=(null===(i=null==e?void 0:e.metadata)||void 0===i?void 0:i.icon)||Object(o.d)("icon-helm"),v=null===(u=null===(c=null===(l=null==e?void 0:e.metadata)||void 0===l?void 0:l.maintainers)||void 0===c?void 0:c[0])||void 0===u?void 0:u.name;return a.createElement("div",{style:{marginBottom:"30px"}},a.createElement("div",{className:"co-clusterserviceversion-logo"},a.createElement("div",{className:"co-clusterserviceversion-logo__icon"},a.createElement("span",{className:"co-catalog-item-icon__bg"},a.createElement("img",{className:"co-catalog-item-icon__img co-catalog-item-icon__img--large",src:b,alt:h,"aria-hidden":!0}))),a.createElement("div",{className:"co-clusterserviceversion-logo__name"},a.createElement("h1",{className:"co-clusterserviceversion-logo__name__clusterserviceversion"},h),v&&a.createElement("span",{className:"co-clusterserviceversion-logo__name__provider text-muted"},m("helm-plugin~{{chartVersion}} provided by {{provider}}",{chartVersion:p||"",provider:v})))),null===(d=null==e?void 0:e.metadata)||void 0===d?void 0:d.description)}},9344:function(e,t,n){"use strict";var a=n(0),r=n(19),s=n(80),o=n(379),i=n(184),l=n(281),c=n(22),u=n(447),d=n(7),m=n(5618),p=n(1205),h=n(15),b=n(5955),v=n(5966),f=n(5914),g=n(9345),E=n(9346);t.a=({chartHasValues:e,errors:t,handleSubmit:n,handleReset:y,status:O,isSubmitting:_,helmActionConfig:k,values:j,dirty:R,chartMetaDescription:T,onVersionChange:N,chartError:S,namespace:P,chartIndexEntry:C,annotatedName:w,providerName:x})=>{const{t:I}=Object(d.useTranslation)(),D=a.useContext(p.a),{chartName:A,chartVersion:M,chartReadme:U,formData:L,formSchema:F,editorType:B}=j,{type:q,title:$,subTitle:K}=k,Y=q===v.b.Upgrade&&!R||_||!c.a(t)||!!S,H=a.useMemo(()=>Object(b.a)(F,{}),[F]),G=L&&F&&a.createElement(h.K,{name:"formData",schema:F,uiSchema:H,formDescription:T}),V=e&&a.createElement(h.C,{name:"yamlData",label:I("helm-plugin~Helm Release"),schema:F,showSamples:!1,onSave:n}),W=u.a(K)?K:null==K?void 0:K[B],z=U&&a.createElement(d.Trans,{t:I,ns:"helm-plugin"},"For more information on the chart, refer to this"," ",a.createElement(r.a,{type:"button",variant:"link","data-test-id":"helm-readme-modal",onClick:()=>Object(E.a)({readme:U,modalClassName:"modal-lg",theme:D}),isInline:!0},"README")),Q=a.createElement(a.Fragment,null,e&&a.createElement(a.Fragment,null,W,"  "),z);return a.createElement(h.P,{onSubmit:n},a.createElement(h.Q,{flexLayout:!0},a.createElement(h.S,{title:$,helpText:Q,marginBottom:"lg"}),S&&a.createElement(s.a,{variant:"danger",isInline:!0,title:I("helm-plugin~Helm Chart cannot be installed")},I("helm-plugin~The Helm Chart is currently unavailable. {{chartError}}",{chartError:S})),a.createElement(m.a,{fullWidth:!0},a.createElement(o.a,{hasGutter:!0},a.createElement(i.a,{xl:7,lg:8,md:12},a.createElement(h.ab,{type:l.b.text,name:"releaseName",label:I("helm-plugin~Release name"),helpText:I("helm-plugin~A unique name for the Helm Release."),required:!0,isDisabled:!!S||q===v.b.Upgrade})),a.createElement(i.a,{xl:5,lg:4,md:12},a.createElement(g.a,{chartName:A,chartVersion:M,helmAction:q,onVersionChange:N,namespace:P,chartIndexEntry:C,annotatedName:w,providerName:x})))),!S&&(F||e?a.createElement(h.fc,{name:"editorType",formContext:{name:"formData",editor:G,isDisabled:!F},yamlContext:{name:"yamlData",editor:V},lastViewUserSettingKey:"helm.installUgradeForm.editor.lastView",prune:b.d,noMargin:!0}):a.createElement(s.a,{variant:"info",title:I("helm-plugin~Helm release is not configurable since the Helm Chart doesn't define any values."),isInline:!0}))),a.createElement(h.R,{handleReset:y,errorMessage:null==O?void 0:O.submitError,isSubmitting:_,submitLabel:Object(f.q)(I)[q],disableSubmit:Y,resetLabel:I("helm-plugin~Cancel"),sticky:!0}))}},9345:function(e,t,n){"use strict";var a=n(0),r=n(184),s=n(873),o=n(55),i=n(380),l=n(107),c=n(22),u=n(160),d=n(7),m=n(109),p=n(5410),h=n(108),b=n(8),v=n(15),f=n(614),g=n(1951),E=n(5966),y=n(5914),O=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((a=a.apply(e,t||[])).next())}))};t.a=({chartVersion:e,chartName:t,helmAction:n,onVersionChange:_,namespace:k,chartIndexEntry:j,annotatedName:R,providerName:T})=>{const{t:N}=Object(d.useTranslation)(),{setFieldValue:S,values:{chartRepoName:P,yamlData:C,formData:w,appVersion:x},setFieldTouched:I}=Object(o.f)(),[D,A]=a.useState({}),[M,U]=a.useState([]),[L,F]=a.useState(""),[B,q]=a.useState(),[$,K]=a.useState({}),Y={isList:!0,kind:Object(b.Hb)(g.a)},[H]=Object(h.a)(Y);a.useEffect(()=>{F(C),q(w)},[]),a.useEffect(()=>{let e=!1;return O(void 0,void 0,void 0,(function*(){let n;try{const e=yield Object(m.b)("/api/helm/charts/index.yaml?namespace="+k),t=yield e.text();n=Object(i.safeLoad)(t)}catch(t){if(e)return}if(e)return;const a=Object(y.i)(null==n?void 0:n.entries,t,P,H,R,T);j||S("chartIndexEntry",Object(y.j)(null==n?void 0:n.entries,t,a[0].repoName)),K(null==n?void 0:n.entries),U(a),A(Object(y.o)(a,N))})),()=>{e=!0}},[t,P,H,N,k,j,S,R,T]);const G=e=>{const[n,a]=e.split("--"),r=Object(y.m)(M,n,a),s=Object(y.j)($,t,a);S("chartVersion",e),S("chartURL",r),Object(m.c)(`/api/helm/chart?url=${encodeURIComponent(r)}&namespace=${k}&indexEntry=${encodeURIComponent(s)}`).then(e=>{_(e);const t=Object(y.k)(e),n=Object(y.n)(e),a=null==e?void 0:e.values,r=(null==e?void 0:e.schema)&&JSON.parse(atob(null==e?void 0:e.schema)),s=r?f.b.Form:f.b.YAML;S("editorType",s),S("formSchema",r),S("yamlData",n),S("formData",a),S("chartReadme",t),F(n),q(a)}).catch(e=>{console.error(`Could not fetch helm chart with chart URL ${r}:`,e)})},V=c.a(D)||1===u.a(D).length,W=n===E.b.Upgrade&&N("helm-plugin~Select the version to upgrade to."),z=c.a(D)&&!e?N("helm-plugin~No versions available"):D[""+e]||Object(y.b)(e,x,N,Object(y.l)(H,P));return a.createElement(r.a,{span:6},a.createElement(v.I,{name:"chartVersion",label:N("helm-plugin~Chart version"),items:D,helpText:V?"":W,disabled:V,title:z,onChange:t=>{if(t!==e){!l.a(L,C)||!l.a(B,w)?(n=()=>G(t),r=e,o=t,Object(p.confirmModal)({title:N("helm-plugin~Change chart version?"),message:a.createElement(a.Fragment,null,a.createElement("p",null,a.createElement(d.Trans,{t:N,ns:"helm-plugin"},"Are you sure you want to change the chart version from"," ",a.createElement("strong",null,{currentVersion:r})," to ",a.createElement("strong",null,{newVersion:o}),"?"," ")),a.createElement("p",null,a.createElement(s.a,{color:"var(--pf-v5-global--info-color--100)"})," ",a.createElement(d.Trans,{t:N,ns:"helm-plugin"},"All data entered for version ",a.createElement("strong",null,{currentVersion:r})," will be reset"))),submitDanger:!1,btnText:N("helm-plugin~Proceed"),cancelText:N("helm-plugin~Cancel"),executeFn:()=>(n(),Promise.resolve()),cancel:()=>{S("chartVersion",r),I("chartVersion",!1)}})):G(t)}var n,r,o},required:!0,fullWidth:!0}))}},9346:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(0),r=n(7),s=n(40),o=n(2237);const i=({readme:e,theme:t,close:n})=>{const{t:i}=Object(r.useTranslation)();return a.createElement("div",{className:"modal-content"},a.createElement(s.h,{close:n},i("helm-plugin~README")),a.createElement(s.e,null,a.createElement(o.SyncMarkdownView,{content:e,theme:t})))},l=Object(s.m)(i)},9347:function(e,t,n){"use strict";var a=n(0),r=n(1922),s=n(219),o=n(469),i=n(22),l=n(7),c=n(40),u=n(15),d=n(5914),m=n(8153),p=n(9348);const h=e=>({id:e.revision});t.a=({errors:e,handleSubmit:t,handleReset:n,status:b,isSubmitting:v,dirty:f,releaseHistory:g,releaseName:E,helmActionConfig:y})=>{const{t:O}=Object(l.useTranslation)(),{type:_,title:k}=y,j=a.createElement(l.Trans,{t:O,ns:"helm-plugin"},"Select the version to rollback ",a.createElement("strong",{style:{color:"var(--pf-v5-global--Color--100)"}},{releaseName:E})," to, from the table below:");return a.createElement(r.a,{onSubmit:t},a.createElement(u.Q,null,a.createElement(u.S,{title:k,helpText:j}),a.createElement(s.a,{fieldId:"revision-list-field",label:O("helm-plugin~Revision history"),isRequired:!0},a.createElement(c.j,{data:g,defaultSortField:"version",defaultSortOrder:o.a.desc,"aria-label":O("helm-plugin~CustomResources"),Header:Object(m.a)(O),Row:p.a,loaded:!!g,virtualize:!0,getRowProps:h}))),a.createElement(u.R,{handleReset:n,errorMessage:null==b?void 0:b.submitError,isSubmitting:v,submitLabel:Object(d.q)(O)[_],disableSubmit:v||!f||!i.a(e),resetLabel:O("helm-plugin~Cancel"),sticky:!0}))}},9348:function(e,t,n){"use strict";var a=n(0),r=n(40),s=n(5),o=n(15),i=n(5914),l=n(8153);t.a=({obj:e})=>a.createElement(a.Fragment,null,a.createElement(r.k,{className:l.b.input},a.createElement(o.Kb,{value:e.version,name:"revision"})),a.createElement(r.k,{className:l.b.revision},e.version),a.createElement(r.k,{className:l.b.updated},a.createElement(s.xb,{timestamp:e.info.last_deployed})),a.createElement(r.k,{className:l.b.status},a.createElement(o.cc,{status:Object(i.u)(e.info.status),title:i.a[e.info.status]})),a.createElement(r.k,{className:l.b.chartName},e.chart.metadata.name),a.createElement(r.k,{className:l.b.chartVersion},e.chart.metadata.version),a.createElement(r.k,{className:l.b.appVersion},e.chart.metadata.appVersion||"-"),a.createElement(r.k,{className:l.b.description},e.info.description))},9349:function(e,t,n){"use strict";var a=n(0),r=n(682),s=n(22),o=n(599),i=n(7),l=n(14),c=n(765),u=n(40),d=n(5),m=n(108),p=n(10),h=n(15),b=n(5966),v=n(5914),f=n(9350),g=n(9352),E=n(7417),y=n(9353),O=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((a=a.apply(e,t||[])).next())}))};const _=({helmRelease:e,secrets:t})=>{var n,m,O,_;const{t:k}=Object(i.useTranslation)(),{ns:j}=Object(l.useParams)(),R=Object(l.useLocation)();if(e.loadError)return a.createElement(d.wb,{loadError:e.loadError});if(e.loaded&&t.loadError)return a.createElement(d.wb,{loadError:t.loadError});if(!e.loaded||!t.loaded)return a.createElement(d.S,null);if(!e.data||s.a(t.data))return a.createElement(c.ErrorPage404,null);const T=o.a(t.data,e=>Number(e.metadata.labels.version),"desc"),N=null===(n=e.data)||void 0===n?void 0:n.name,S=T[0],P=null==S?void 0:S.metadata.name,C=null===(O=null===(m=null==S?void 0:S.metadata)||void 0===m?void 0:m.labels)||void 0===O?void 0:O.status,w=a.createElement(a.Fragment,null,N,a.createElement(r.a,{isRead:!0,style:{verticalAlign:"middle",marginLeft:"var(--pf-v5-global--spacer--md)"}},a.createElement(h.cc,{status:Object(v.u)(C),title:v.a[C]}))),x={release:{name:N,namespace:j,version:null===(_=e.data)||void 0===_?void 0:_.version,info:{status:C}},actionOrigin:b.a.details},I=a.createElement(h.j,{context:{"helm-actions":x}},({actions:e,options:t,loaded:n})=>n&&a.createElement(h.h,{actions:e,options:t,variant:h.i.DROPDOWN}));return a.createElement(u.a,{kindObj:p.SecretModel,customActionMenu:I,name:P,namespace:j,customData:e.data,breadcrumbsFor:()=>[{name:k("helm-plugin~Helm Releases"),path:"/helm-releases/ns/"+j},{name:k("helm-plugin~Helm Release details"),path:""+R.pathname}],title:w,kind:"Secret",pages:[d.mc.details(E.a),{href:"resources",nameKey:"helm-plugin~Resources",component:y.a},{href:"history",nameKey:"helm-plugin~Revision history",component:f.a},{href:"releasenotes",nameKey:"helm-plugin~Release notes",component:g.a}],customKind:"HelmRelease"})};t.a=()=>{const e=Object(l.useParams)(),t=e.ns,n=e.name,[r,s]=a.useState(),[o,i]=a.useState(),[c,u,d]=Object(m.a)(r?{namespace:t,groupVersionKind:{version:"v1",kind:p.SecretModel.kind},selector:{matchLabels:{name:r.name}},isList:!0}:{isList:!0});a.useEffect(()=>{let e=!0;return u&&O(void 0,void 0,void 0,(function*(){try{const a=yield Object(v.c)(t,n);e&&s(a)}catch(e){console.log("Error while loading helm release",e),i(e)}})),()=>{e=!1}},[t,n,c,u]);const h={loaded:!(!r&&!o),loadError:o,data:r},b={loaded:u,loadError:d,data:c};return a.createElement(_,{helmRelease:h,secrets:b})}},9350:function(e,t,n){"use strict";var a=n(0),r=n(469),s=n(7),o=n(14),i=n(5),l=n(15),c=n(5914),u=n(8155),d=n(9351);const m=e=>({id:e.revision});t.a=({obj:e,customData:t})=>{const n=Object(o.useParams)(),p=n.ns,h=n.name,[b,v]=a.useState(!1),[f,g]=a.useState(),[E,y]=a.useState([]),O=Object(l.De)(e),{t:_}=Object(s.useTranslation)();a.useEffect(()=>{let e=!1;return Object(c.d)(h,p).then(t=>{e||(g(null),v(!0),y(t))}).catch(t=>{e||(v(!0),g(t.message||_("helm-plugin~Unable to load Helm Release history")))}),()=>{e=!0}},[h,p,O,_]);const k=null==E?void 0:E.length,j=null==t?void 0:t.version,R=a.useMemo(()=>({totalRevisions:k,latestHelmReleaseVersion:j}),[j,k]);return f?a.createElement(i.wb,{loaded:!0,loadError:f,label:_("helm-plugin~Helm Release history")}):a.createElement(l.D,{resources:E,loaded:b,sortBy:"version",sortOrder:r.a.desc,customData:R,ResourceRow:d.a,resourceHeader:Object(u.a)(_),getRowProps:m})}},9351:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(109),o=n(40),i=n(131),l=n(5),c=n(15),u=n(5914),d=n(8155);const m=(e,t,n,o)=>{const l=a.createElement(r.Trans,{t:o,ns:"helm-plugin"},"Are you sure you want to rollback ",a.createElement("strong",null,{releaseName:e})," to"," ",a.createElement("strong",null,"Revision ",{revision:n}),"?"),c={namespace:t,name:e,version:n},u=()=>s.c.patch("/api/helm/release",c);return{id:"helm-rollback-modal-action",label:o("helm-plugin~Rollback to Revision {{revision}}",{revision:n}),cta:()=>{Object(i.n)({title:o("helm-plugin~Rollback"),btnText:o("helm-plugin~Rollback"),message:l,executeFn:u})}}},p=({obj:e})=>{const{t:t}=Object(r.useTranslation)(),n=[m(e.name,e.namespace,e.version,t)];return a.createElement(c.h,{actions:n})};t.a=({obj:e,customData:t})=>a.createElement(a.Fragment,null,a.createElement(o.k,{className:d.b.revision},e.version),a.createElement(o.k,{className:d.b.updated},a.createElement(l.xb,{timestamp:e.info.last_deployed})),a.createElement(o.k,{className:d.b.status},a.createElement(c.cc,{status:Object(u.u)(e.info.status),title:u.a[e.info.status]})),a.createElement(o.k,{className:d.b.chartName},e.chart.metadata.name),a.createElement(o.k,{className:d.b.chartVersion},e.chart.metadata.version),a.createElement(o.k,{className:d.b.appVersion},e.chart.metadata.appVersion),a.createElement(o.k,{className:d.b.description},e.info.description),a.createElement(o.k,{className:d.b.kebab},(null==t?void 0:t.totalRevisions)>1&&(null==t?void 0:t.latestHelmReleaseVersion)!==e.version&&a.createElement(p,{obj:e})))},9352:function(e,t,n){"use strict";var a=n(0),r=n(2237),s=n(7416);t.a=({customData:e})=>{var t,n;const o=null!==(n=null===(t=null==e?void 0:e.info)||void 0===t?void 0:t.notes)&&void 0!==n?n:"";return o?a.createElement("div",{className:"co-m-pane__body"},a.createElement(r.SyncMarkdownView,{content:o})):a.createElement(s.a,null)}},9353:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(14),o=n(40),i=n(8),l=n(5914),c=n(9354);t.a=({customData:e})=>{const{t:t}=Object(r.useTranslation)(),n=Object(s.useParams)().ns,u=Object(l.t)(e).map(e=>{const t=Object(i.Db)(e),a=Object(i.vb)(t);return Object.assign(Object.assign({},a.namespaced?{namespace:n}:{}),{kind:a.crd?Object(i.Hb)(a):a.kind,name:e.metadata.name,prop:`${e.metadata.name}-${e.kind.toLowerCase()}`,isList:!1,optional:!0})});return a.createElement(o.i,{filterLabel:t("helm-plugin~Resources by name"),resources:u,flatten:l.h,label:t("helm-plugin~Resources"),ListComponent:c.a})}},9354:function(e,t,n){"use strict";var a=n(0),r=n(7),s=n(40),o=n(5),i=n(8156),l=n(9355);t.a=e=>{const{t:t}=Object(r.useTranslation)();return a.createElement(s.j,Object.assign({},e,{"aria-label":t("helm-plugin~Resources"),defaultSortField:"kind",Header:Object(i.a)(t),Row:l.a,EmptyMsg:()=>a.createElement(o.h,{title:t("helm-plugin~No resources found")}),virtualize:!0}))}},9355:function(e,t,n){"use strict";var a=n(0),r=n(16),s=n(7),o=n(14),i=n(40),l=n(5),c=n(8),u=n(15),d=n(8156);const m=({resource:e})=>{var t;const{t:n}=Object(s.useTranslation)(),i=Object(c.Db)(e);return(null===(t=e.status)||void 0===t?void 0:t.replicas)?a.createElement(o.Link,{to:Object(l.tc)(i,e.metadata.name,e.metadata.namespace)+"/pods",title:n("helm-plugin~Pods")},e.status.replicas||0," of ",e.spec.replicas," pods"):a.createElement(u.cc,{status:r.a(e.status,"phase","Created")})};t.a=({obj:e})=>{const t=Object(c.Db)(e);return a.createElement(a.Fragment,null,a.createElement(i.k,{className:d.b.name},a.createElement(l.hb,{kind:t,name:e.metadata.name,namespace:e.metadata.namespace})),a.createElement(i.k,{className:d.b.type},e.kind),a.createElement(i.k,{className:d.b.status},a.createElement(m,{resource:e})),a.createElement(i.k,{className:d.b.created},a.createElement(l.xb,{timestamp:e.metadata.creationTimestamp})))}},9356:function(e,t,n){"use strict";var a=n(0),r=n(14),s=n(40),o=n(5),i=n(15),l=n(5966),c=n(5914),u=n(8158);t.a=({obj:e})=>{const t={release:e,actionOrigin:l.a.list};return a.createElement(a.Fragment,null,a.createElement(s.k,{className:u.b.name},a.createElement(o.fb,{kind:"Helm Release"}),a.createElement(r.Link,{to:`/helm-releases/ns/${e.namespace}/release/${e.name}`,title:e.name,className:"co-resource-item__resource-name"},e.name)),a.createElement(s.k,{className:u.b.revision},e.version),a.createElement(s.k,{className:u.b.updated},a.createElement(o.xb,{timestamp:e.info.last_deployed})),a.createElement(s.k,{className:u.b.status},a.createElement(i.cc,{status:Object(c.u)(e.info.status),title:c.a[e.info.status]})),a.createElement(s.k,{className:u.b.chartName},e.chart.metadata.name),a.createElement(s.k,{className:u.b.chartVersion},e.chart.metadata.version),a.createElement(s.k,{className:u.b.appVersion},e.chart.metadata.appVersion||"-"),a.createElement(s.k,{className:u.b.kebab},a.createElement(i.hb,{context:{"helm-actions":t}})))}},9357:function(e,t,n){},9358:function(e,t,n){"use strict";var a=n(0),r=n(55),s=n(380),o=n(22),i=n(7),l=n(77),c=n(6422),u=n(765),d=n(5),m=n(108),p=n(8),h=n(15),b=n(614),v=n(172),f=n(1941),g=n(1951),E=n(9359),y=n(8160),O=n(9361),_=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function o(e){try{l(a.next(e))}catch(e){s(e)}}function i(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((a=a.apply(e,t||[])).next())}))};t.a=({showScopeType:e,existingRepoName:t})=>{const n=Object(h.Ve)(),k=n.get("kind"),j=!!t,R=n.get("actionOrigin"),{t:T}=Object(i.useTranslation)(),[N]=Object(h.ue)(),S=Object(v.a)(),P=Object(h.Nd)(c.d),[C,w,x]=Object(m.a)(j?Object.assign({groupVersionKind:{group:"helm.openshift.io",version:"v1beta1",kind:k?Object(p.tb)(k):g.a.kind},name:t},k&&Object(p.tb)(k)===g.b.kind?{namespace:N}:{}):null),I=a.useMemo(()=>w&&o.a(x)&&!o.a(C)?C:Object(y.c)(N,k),[x,w,C,N,k]),D=a.useMemo(()=>({editorType:b.b.Form,yamlData:Object(f.b)(j?C:I,"yamlData",{skipInvalid:!0}),formData:Object(y.a)(j?C:I)}),[j,C,I]),A=()=>d.Vb.goBack();return j&&w&&!C?a.createElement(u.ErrorPage404,null):a.createElement(d.wb,{loaded:w,loadError:x,data:D,label:I.kind},a.createElement(r.b,{initialValues:D,validationSchema:Object(O.a)(T),onSubmit:(e,n)=>_(void 0,void 0,void 0,(function*(){var a,r;let o;if(e.editorType===b.b.YAML)try{o=Object(s.safeLoad)(e.yamlData),o&&"ProjectHelmChartRepository"===o.kind&&!(null===(a=null==o?void 0:o.metadata)||void 0===a?void 0:a.namespace)&&(o.metadata.namespace=N)}catch(e){return n.setStatus({submitSuccess:"",submitError:T("helm-plugin~Invalid YAML - {{err}}",{err:e})}),null}else o=Object(y.b)(e.formData,N);const i=j?Object(l.r)({model:Object(p.vb)(Object(p.Db)(o)),data:o,name:t}):Object(l.g)({model:Object(p.vb)(Object(p.Db)(o)),data:o}),c=R&&P?`/catalog/ns/${null!==(r=o.metadata.namespace)&&void 0!==r?r:N}?catalogType=HelmChart`:o.kind===g.b.kind?`/k8s/ns/${o.metadata.namespace}/${Object(p.Db)(o)}/${o.metadata.name}`:`/k8s/cluster/${Object(p.Db)(o)}/${o.metadata.name}`;return i.then(()=>{var t;S("Helm Chart Repository",{helmChartRepositoryScope:(null===(t=e.formData)||void 0===t?void 0:t.scope)===g.b.kind?"namespace":"cluster"}),n.setStatus({submitError:"",submitSuccess:T("helm-plugin~{{hcr}} has been created",{hcr:o.kind})}),d.Vb.push(c)}).catch(e=>{n.setStatus({submitSuccess:"",submitError:(null==e?void 0:e.message)||T("helm-plugin~Unknown error submitting")})})})),enableReinitialize:!0},n=>a.createElement(E.a,Object.assign({},n,{namespace:N,handleCancel:A,showScopeType:e,existingRepo:t&&C}))))}},9359:function(e,t,n){"use strict";var a=n(0),r=n(22),s=n(7),o=n(15),i=n(5962),l=n(614),c=n(1941),u=n(1951),d=n(9360),m=n(8160);t.a=({namespace:e,errors:t,handleSubmit:n,handleCancel:p,status:h,isSubmitting:b,dirty:v,showScopeType:f,values:{editorType:g,formData:E,yamlData:y},existingRepo:O})=>{const{t:_}=Object(s.useTranslation)(),k=a.createElement(d.a,{showScopeType:f,existingRepo:O}),j=a.createElement(o.C,{name:"yamlData",model:E.scope===u.b.kind?u.b:u.a,showSamples:!O,onSave:n}),R=f||E.scope!==u.b.kind?O?_("helm-plugin~Edit {{label}}",{label:O.kind}):_("helm-plugin~Create Helm Chart Repository"):_(O?"helm-plugin~Edit ProjectHelmChartRepository":"helm-plugin~Create ProjectHelmChartRepository"),T=f||E.scope!==u.b.kind?O?O.kind===u.b.kind?_("helm-plugin~Update helm chart repository in the namespace."):_("helm-plugin~Update the helm chart repository."):_("helm-plugin~Add helm chart repository."):_(O?"helm-plugin~Update helm chart repository in the namespace.":"helm-plugin~Add helm chart repository in the namespace.");return a.createElement(o.P,{onSubmit:n},a.createElement(o.Q,{flexLayout:!0},a.createElement(o.S,{title:R,helpText:T}),a.createElement(o.fc,{name:"editorType",formContext:{name:"formData",editor:k,sanitizeTo:e=>Object(m.a)(e)},yamlContext:{name:"yamlData",editor:j,sanitizeTo:()=>Object(c.b)(Object(m.b)(E,e),"yamlData",{skipInvalid:!0})},lastViewUserSettingKey:"helm-plugin.createHelmChartRepository.editor.lastView",noMargin:!0})),a.createElement(o.R,{errorMessage:null==h?void 0:h.submitError,successMessage:null==h?void 0:h.submitSuccess,isSubmitting:b,submitLabel:_(O?"helm-plugin~Save":"helm-plugin~Create"),disableSubmit:(g===l.b.YAML?!v:!v||!r.a(t))||b,handleCancel:p,handleDownload:g===l.b.YAML&&(()=>Object(i.a)(y)),sticky:!0}))}},9360:function(e,t,n){"use strict";var a=n(0),r=n(281),s=n(55),o=n(230),i=n(7),l=n(5618),c=n(5),u=n(10),d=n(15);t.a=({showScopeType:e,existingRepo:t})=>{const{t:n}=Object(i.useTranslation)(),{values:{formData:m}}=Object(s.f)(),p=(e,t)=>{var n;return o(e,null===(n=null==t?void 0:t.props)||void 0===n?void 0:n.name)};return a.createElement(l.a,null,e&&!t&&a.createElement(d.Lb,{name:"formData.scope",label:n("helm-plugin~Scope type"),options:[{label:n("helm-plugin~Namespaced scoped  (ProjectHelmChartRepository)"),value:"ProjectHelmChartRepository",children:n("helm-plugin~Add Helm Chart Repository in the selected namespace."),isChecked:"ProjectHelmChartRepository"===m.scope},{label:n("helm-plugin~Cluster scoped (HelmChartRepository)"),value:"HelmChartRepository",children:n("helm-plugin~Add Helm Chart Repository at the cluster level and in all namespaces."),isChecked:"HelmChartRepository"===m.scope}]}),a.createElement(d.ab,{type:r.b.text,name:"formData.repoName",label:n("helm-plugin~Name"),helpText:t?null:n("helm-plugin~A unique name for the Helm Chart repository."),isDisabled:!!t,required:!0}),a.createElement(d.ab,{type:r.b.text,name:"formData.repoDisplayName",label:n("helm-plugin~Display name"),helpText:n("helm-plugin~A display name for the Helm Chart repository.")}),a.createElement(d.ab,{type:r.b.text,name:"formData.repoDescription",label:n("helm-plugin~Description"),helpText:n("helm-plugin~A description for the Helm Chart repository.")}),a.createElement(d.A,{name:"formData.disabled",label:n("helm-plugin~Disable usage of the repo in the developer catalog.")}),a.createElement(d.ab,{type:r.b.text,name:"formData.repoUrl",label:n("helm-plugin~URL"),helpText:n("helm-plugin~Helm Chart repository URL."),required:!0}),a.createElement(c.x,{textExpanded:n("helm-plugin~Hide advanced options"),textCollapsed:n("helm-plugin~Show advanced options")},a.createElement(l.a,null,a.createElement("p",{className:"pf-v5-c-form__helper-text"},n("helm-plugin~Add credentials and custom certificate authority (CA) certificates to connect to private helm chart repository.")),a.createElement(d.Ob,{name:"formData.ca",label:n("helm-plugin~CA certificate"),resources:[{isList:!0,kind:u.ConfigMapModel.kind,namespace:"openshift-config",optional:!0,prop:u.ConfigMapModel.id}],dataSelector:["metadata","name"],fullWidth:!0,placeholder:n("helm-plugin~Select ConfigMap"),showBadge:!0,autocompleteFilter:p}),a.createElement(d.Ob,{name:"formData.tlsClientConfig",label:n("helm-plugin~TLS Client config"),resources:[{isList:!0,kind:u.SecretModel.kind,namespace:"openshift-config",optional:!0,prop:u.SecretModel.id}],dataSelector:["metadata","name"],fullWidth:!0,placeholder:n("helm-plugin~Select Secret"),showBadge:!0,autocompleteFilter:p}))))}},9361:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(689),r=n(15),s=n(614);const o=/^https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,}/,i=e=>a.object().shape({repoName:a.string().matches(r.Yd,{message:e("helm-plugin~Name must consist of lower-case letters, numbers and hyphens. It must start with a letter and end with a letter or number."),excludeEmptyString:!0}).max(100,e("helm-plugin~The repository name cannot exceed than 100 characters.")).required(e("helm-plugin~Required")),repoDescription:a.string().max(2048,e("helm-plugin~The repository name cannot exceed than 2048 characters.")),repoUrl:a.string().matches(o,{message:e("helm-plugin~Invalid Repo URL.")}).max(2048,e("helm-plugin~Please enter a URL that is less then 2048 characters.")).required(e("helm-plugin~Required"))}),l=e=>a.mixed().test({test:t=>a.object({editorType:a.string().oneOf(Object.values(s.b)),yamlData:a.string(),formData:a.mixed().when("editorType",{is:s.b.Form,then:i(e)})}).validate(t,{abortEarly:!1})})},9362:function(e,t,n){"use strict";var a=n(0),r=n(18),s=n(7),o=n(4443),i=n(40),l=n(5),c=n(8),u=n(1951);const d=["","","","",r("pf-m-hidden","pf-m-visible-on-xl"),r("pf-m-hidden","pf-m-visible-on-xl"),l.F.columnClass];t.a=({obj:e})=>{var t,n,r,m;const{t:p}=Object(s.useTranslation)(),h=Object(c.Db)(e),b={[h]:e};return a.createElement(a.Fragment,null,a.createElement(i.k,{className:d[0]},a.createElement(l.hb,{kind:h,name:e.metadata.name,namespace:e.metadata.namespace})),a.createElement(i.k,{className:d[1]},(null===(t=e.spec)||void 0===t?void 0:t.name)?e.spec.name:"-"),a.createElement(i.k,{className:d[2]},e.kind===u.b.kind?a.createElement(l.hb,{kind:"Namespace",name:e.metadata.namespace}):p("helm-plugin~All Namespaces")),a.createElement(i.k,{className:d[3]},(null===(n=e.spec)||void 0===n?void 0:n.disabled)?p("helm-plugin~True"):p("helm-plugin~False")),a.createElement(i.k,{className:d[4]},(null===(m=null===(r=e.spec)||void 0===r?void 0:r.connectionConfig)||void 0===m?void 0:m.url)?a.createElement(l.z,{href:e.spec.connectionConfig.url,text:e.spec.connectionConfig.url,additionalClassName:"co-external-link--block"}):"-"),a.createElement(i.k,{className:d[5]},a.createElement(l.xb,{timestamp:e.metadata.creationTimestamp})),a.createElement(i.k,{className:l.F.columnClass},a.createElement(o.LazyActionMenu,{context:b})))}},9363:function(e,t,n){"use strict";var a=n(0),r=n(16),s=n(4434),o=n(137),i=n(7),l=n(14),c=n(13),u=n(40),d=n(8),m=n(1951),p=n(9364);t.a=()=>{const{t:e}=Object(i.useTranslation)(),{ns:t}=Object(l.useParams)(),[n]=Object(c.hc)({group:m.b.apiGroup,resource:m.b.plural,verb:"list",namespace:t}),[h]=Object(c.hc)({group:m.a.apiGroup,resource:m.a.plural,verb:"list"}),[b]=Object(c.hc)({group:m.b.apiGroup,resource:m.b.plural,verb:"update",namespace:t}),[v]=Object(c.hc)({group:m.a.apiGroup,resource:m.a.plural,verb:"update"});let f=[];n&&b&&h&&v?f=[{prop:"helmChartRepository",kind:Object(d.Hb)(m.a),namespaced:!1,isList:!0},{prop:"projectHelmChartRepository",kind:Object(d.Hb)(m.b),namespaced:!0,namespace:t,isList:!0}]:n&&b?f=[{prop:"projectHelmChartRepository",kind:Object(d.Hb)(m.b),namespaced:!0,namespace:t,isList:!0}]:h&&v&&(f=[{prop:"helmChartRepository",kind:Object(d.Hb)(m.a),namespaced:!1,isList:!0}]);return a.createElement(a.Fragment,null,a.createElement(o.b,null,a.createElement("title",null,e("helm-plugin~Helm Repositories"))),a.createElement(u.i,{namespace:t,flatten:e=>{const t=r.a(null==e?void 0:e.projectHelmChartRepository,"data",[]),n=r.a(null==e?void 0:e.helmChartRepository,"data",[]);return s.a(t,n)},resources:f,label:e("helm-plugin~Repositories"),ListComponent:p.a}))}},9364:function(e,t,n){"use strict";var a=n(0),r=n(156),s=n(405),o=n(7),i=n(40),l=n(8163),c=n(9365);t.a=e=>{const{t:t}=Object(o.useTranslation)();return a.createElement(i.j,Object.assign({},e,{EmptyMsg:()=>a.createElement(r.a,{variant:r.b.lg},a.createElement(s.a,{titleText:a.createElement(a.Fragment,null,t("helm-plugin~No repositories found")),headingLevel:"h4"})),"aria-label":t("helm-plugin~Helm Chart Repositories"),Header:Object(l.a)(t),Row:c.a,virtualize:!0}))}},9365:function(e,t,n){"use strict";var a=n(0),r=n(18),s=n(7),o=n(4443),i=n(40),l=n(5),c=n(8),u=n(1951);const d=Object(c.Hb)(u.a),m=Object(c.Hb)(u.b),p=["","","","",r("pf-m-hidden","pf-m-visible-on-xl"),r("pf-m-hidden","pf-m-visible-on-xl"),l.F.columnClass];t.a=({obj:e})=>{var t,n,r,h,b;const{t:v}=Object(s.useTranslation)(),f={[Object(c.Db)(e)]:e};return a.createElement(a.Fragment,null,a.createElement(i.k,{className:p[0]},a.createElement(l.hb,{kind:e.kind===u.a.kind?d:m,name:e.metadata.name,namespace:null===(t=e.metadata)||void 0===t?void 0:t.namespace})),a.createElement(i.k,{className:p[1]},(null===(n=e.spec)||void 0===n?void 0:n.name)?e.spec.name:"-"),a.createElement(i.k,{className:p[2]},e.metadata.namespace?a.createElement(l.hb,{kind:"Namespace",name:e.metadata.namespace}):v("helm-plugin~All Namespaces")),a.createElement(i.k,{className:p[3]},(null===(r=e.spec)||void 0===r?void 0:r.disabled)?v("helm-plugin~True"):v("helm-plugin~False")),a.createElement(i.k,{className:p[4]},(null===(b=null===(h=e.spec)||void 0===h?void 0:h.connectionConfig)||void 0===b?void 0:b.url)?a.createElement(l.z,{href:e.spec.connectionConfig.url,text:e.spec.connectionConfig.url,additionalClassName:"co-external-link--block"}):"-"),a.createElement(i.k,{className:p[5]},a.createElement(l.xb,{timestamp:e.metadata.creationTimestamp})),a.createElement(i.k,{className:l.F.columnClass},a.createElement(o.LazyActionMenu,{context:f})))}}}]);
//# sourceMappingURL=helmComponents-chunk-ea928c63dc88bd409f0c.min.js.map
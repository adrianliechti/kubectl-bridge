(window.webpackJsonp=window.webpackJsonp||[]).push([[166],{5532:function(e,t,a){"use strict";a.r(t),a.d(t,"AddGooglePage",(function(){return b}));var r=a(0),n=a(137),c=a(7),l=a(14),o=a(966),i=a(19),s=a(10),u=a(8),d=a(5),m=a(5957),p=a(5958);const b=()=>{const e=Object(l.useNavigate)(),[t,a]=r.useState(!1),[b,g]=r.useState(""),[h,v]=r.useState("google"),[f,E]=r.useState(""),[y,N]=r.useState(""),[O,j]=r.useState(""),{t:S}=Object(c.useTranslation)(),q=e=>(a(!0),e.then(e=>(e=>(a(!1),g(""),e))(e),e=>(e=>{const t=e.message||S("public~An error occurred. Please try again.");return a(!1),g(t),Promise.reject(t)})(e))),A=(e,t,a)=>{const r={name:h,type:"Google",mappingMethod:"claim",google:{hostedDomain:O,clientID:f,clientSecret:{name:t}}};return q(Object(m.a)(e,r,a))},C=S("public~Add Identity Provider: Google");return r.createElement("div",{className:"co-m-pane__form"},r.createElement(n.a,null,r.createElement("title",null,C)),r.createElement(d.Z,{title:C,helpText:S("public~You can use Google integration for users authenticating with Google credentials.")}),r.createElement("div",{className:"co-m-pane__body"},r.createElement("form",{onSubmit:t=>{t.preventDefault(),g(""),q(Object(m.b)()).then(t=>{A(t,m.c.secret,!0).then(()=>(()=>{const e={apiVersion:"v1",kind:"Secret",metadata:{generateName:"google-client-secret-",namespace:"openshift-config"},stringData:{clientSecret:y}};return q(Object(u.jb)(s.SecretModel,e))})().then(e=>A(t,e.metadata.name)).then(()=>{Object(m.d)(e)})).catch(e=>{g(e)})})},name:"form",className:"co-m-pane__body-group"},r.createElement(p.a,{value:h,onChange:e=>v(e.currentTarget.value)}),r.createElement("div",{className:"form-group"},r.createElement("label",{className:"control-label co-required",htmlFor:"client-id"},S("public~Client ID")),r.createElement("input",{className:"pf-v5-c-form-control",type:"text",onChange:e=>E(e.currentTarget.value),value:f,id:"client-id",required:!0})),r.createElement("div",{className:"form-group"},r.createElement("label",{className:"control-label co-required",htmlFor:"client-secret"},S("public~Client secret")),r.createElement("input",{className:"pf-v5-c-form-control",type:"password",onChange:e=>N(e.currentTarget.value),value:y,id:"client-secret",required:!0})),r.createElement("div",{className:"form-group"},r.createElement("label",{className:"control-label co-required",htmlFor:"hosted-domain"},S("public~Hosted domain")),r.createElement("input",{className:"pf-v5-c-form-control",type:"text",onChange:e=>j(e.currentTarget.value),value:O,id:"hosted-domain","aria-describedby":"idp-hosted-domain-help",required:!0}),r.createElement("p",{className:"help-block",id:"idp-hosted-domain-help"},S("public~Restrict users to a Google App domain."))),r.createElement(d.g,{errorMessage:b,inProgress:t},r.createElement(o.a,{className:"pf-v5-c-form"},r.createElement(i.a,{type:"submit",variant:"primary","data-test-id":"add-idp"},S("public~Add")),r.createElement(i.a,{type:"button",variant:"secondary",onClick:()=>e(-1)},S("public~Cancel")))))))}},5957:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return u}));var r=a(22),n=a(10),c=a(8),l=a(5);const o=()=>Object(c.kb)(n.OAuthModel,"cluster"),i=(e,t,a)=>{const l=r.a(e.spec.identityProviders)?{op:"add",path:"/spec/identityProviders",value:[t]}:{op:"add",path:"/spec/identityProviders/-",value:t};return Object(c.pb)(n.OAuthModel,e,[l],a?{queryParams:{dryRun:"All"}}:{})},s=e=>{e(Object(l.uc)(n.OAuthModel,"cluster")+"?idpAdded=true")},u={secret:"secret-name",ca:"ca-name"}},5958:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a(0),n=a(7);const c=({value:e,onChange:t})=>{const{t:a}=Object(n.useTranslation)();return r.createElement("div",{className:"form-group"},r.createElement("label",{className:"control-label co-required",htmlFor:"idp-name"},a("public~Name")),r.createElement("input",{className:"pf-v5-c-form-control",type:"text",onChange:t,value:e,"aria-describedby":"idp-name-help",id:"idp-name",required:!0}),r.createElement("p",{className:"help-block",id:"idp-name-help"},a("public~Unique name of the new identity provider. This cannot be changed later.")))}}}]);
//# sourceMappingURL=google-idp-form-chunk-1a0e24cc12e91b69a2ff.min.js.map
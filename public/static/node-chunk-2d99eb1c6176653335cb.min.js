(window.webpackJsonp=window.webpackJsonp||[]).push([[220,92],{11810:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(1),a(320),a(1257),a(2934),a(3);const s=(e,t)=>e.filter(e=>e.spec.username===t).sort((e,t)=>new Date(t.metadata.creationTimestamp).getTime()-new Date(e.metadata.creationTimestamp).getTime()),n=e=>{var t,a;return!(null===(a=null===(t=e.status)||void 0===t?void 0:t.conditions)||void 0===a?void 0:a.some(e=>["Approved","Denied"].includes(e.type)))},c=(e=[],t)=>{const a=s(e,"system:node:"+t.metadata.name);return a.length&&n(a[0])?a[0]:null}},11811:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return o}));var s=a(2233),n=(a(877),a(1944),a(7557));const c="serverCSR",o=({node:e,nodeMaintenance:t,csr:a})=>((e,t)=>e?{status:c,title:Object(s.a)(t)}:null)(a,e)||Object(n.a)(t)||{status:Object(s.a)(e)}},5416:function(e,t,a){"use strict";a.r(t),a.d(t,"approveCSR",(function(){return h})),a.d(t,"denyCSR",(function(){return v})),a.d(t,"useNodeActions",(function(){return E}));var s=a(0),n=a(7),c=a(83),o=a(77),l=a(5),i=a(10),r=a(8),d=a(15),u=a(5722),m=a(6271),p=a(6518);const b=(e,t)=>{var a;const s=Object.assign(Object.assign({},e),{status:Object.assign(Object.assign({},e.status||{}),{conditions:[{lastUpdateTime:(new Date).toISOString(),message:`This CSR was ${t.toLowerCase()} via OpenShift Console`,reason:"OpenShiftConsoleCSRApprove",status:"True",type:t},...(null===(a=e.status)||void 0===a?void 0:a.conditions)||[]]})});return Object(o.r)({data:s,model:i.CertificateSigningRequestModel,path:"approval"})},h=e=>b(e,"Approved"),v=e=>b(e,"Denied"),E=e=>{const[t,a]=Object(c.useK8sModel)(Object(r.Db)(e)),{t:o}=Object(n.useTranslation)();return[s.useMemo(()=>{const a=[];Object(d.Td)(e)?a.push({id:"mark-as-schedulable",label:o("console-app~Mark as schedulable"),cta:()=>Object(m.a)(e),accessReview:Object(l.Eb)(t,e,"patch")}):a.push({id:"mark-as-unschedulable",label:o("console-app~Mark as unschedulable"),cta:()=>Object(p.a)({resource:e}),accessReview:Object(l.Eb)(t,e,"patch")});const n=s.createElement("p",null,o("console-app~This action cannot be undone. Deleting a node will instruct Kubernetes that the node is down or unrecoverable and delete all pods scheduled to that node. If the node is still running but unresponsive and the node is deleted, stateful workloads and persistent volumes may suffer corruption or data loss. Only delete a node that you have confirmed is completely stopped and cannot be restored."));return a.push(...Object(u.b)(t,e,n)),a},[t,e,o]),!a,void 0]}},5519:function(e,t,a){"use strict";a.r(t),a.d(t,"getBMNStatusGroups",(function(){return u}));var s=a(475),n=a(416),c=a(1415),o=a(696),l=a(1944),i=a(11810),r=a(11811);const d={[s.a.PROGRESS]:["Not Ready",r.a],[s.a.NOT_MAPPED]:["Ready"],"node-maintenance":Object.keys(o.x)},u=(e,{maintenances:t,csrs:a,kvAlphaMaintenances:o,kvBetaMaintenances:u})=>{const m={[s.a.NOT_MAPPED]:{statusIDs:["ready"],count:0,filterType:"bare-metal-node-status"},[s.a.PROGRESS]:{statusIDs:["notReady","approval"],count:0,filterType:"bare-metal-node-status"},"node-maintenance":{statusIDs:["maintenance"],count:0,filterType:"bare-metal-node-status"}},p=Object(c.b)(t,l.v),b=Object(c.b)(o,l.v),h=Object(c.b)(u,l.v);return e.forEach(e=>{const t=Object(n.d)(e),c=p[t]||h[t]||b[t],o=Object(i.a)(a,e),{status:l}=Object(r.b)({node:e,nodeMaintenance:c,csr:o}),u=Object.keys(d).find(e=>d[e].includes(l))||s.a.NOT_MAPPED;m[u].count++}),m}},5547:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(54),c=a(667),o=a(1256),l=a(499),i=a(501),r=a(7),d=a(31),u=a(2341),m=a(53),p=a(109),b=a(1204),h=a(1202),v=a(1203),E=a(1952),y=a(334),O=a(199),f=a(436),j=a(5),g=a(108),R=a(10),N=a(8),D=a(15),w=a(1959),k=a(2310),T=a(6880),S=a(7567),C=a(6881),P=a(6782),M=a(6882),_=function(e,t,a,s){return new(a||(a=Promise))((function(n,c){function o(e){try{i(s.next(e))}catch(e){c(e)}}function l(e){try{i(s.throw(e))}catch(e){c(e)}}function i(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}i((s=s.apply(e,t||[])).next())}))},I=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a};const A=Object.freeze({name:{classes:"",id:"name"},status:{classes:"",id:"status"},role:{classes:"",id:"role"},pods:{classes:"",id:"pods"},memory:{classes:"",id:"memory"},cpu:{classes:"",id:"cpu"},architecture:{classes:"",id:"architecture"},filesystem:{classes:"",id:"filesystem"},created:{classes:"",id:"created"},instanceType:{classes:"",id:"instanceType"},machine:{classes:"",id:"machine"},labels:{classes:"",id:"labels"},zone:{classes:"",id:"zone"},uptime:{classes:"",id:"uptime"}}),U=Object(N.Hb)(R.NodeModel),x=e=>[{title:e("console-app~Name"),id:A.name.id,sort:"metadata.name",transforms:[n.a],props:{className:A.name.classes}},{title:e("console-app~Status"),id:A.status.id,sort:Object(D.re)(D.he,"False"),transforms:[n.a],props:{className:A.status.classes}},{title:e("console-app~Roles"),id:A.role.id,sort:Object(D.re)(D.ie,""),transforms:[n.a],props:{className:A.role.classes}},{title:e("console-app~Pods"),id:A.pods.id,sort:Object(D.re)(D.ge,0),transforms:[n.a],props:{className:A.pods.classes}},{title:e("console-app~Memory"),id:A.memory.id,sort:Object(D.re)(D.fe,0),transforms:[n.a],props:{className:A.memory.classes}},{title:e("console-app~CPU"),id:A.cpu.id,sort:Object(D.re)(D.be,0),transforms:[n.a],props:{className:A.cpu.classes}},{title:e("console-app~Architecture"),id:A.architecture.id,sort:Object(D.re)(D.ae,""),transforms:[n.a],props:{className:A.architecture.classes},additional:!0},{title:e("console-app~Filesystem"),id:A.filesystem.id,sort:Object(D.re)(D.ce,0),transforms:[n.a],props:{className:A.filesystem.classes}},{title:e("console-app~Created"),id:A.created.id,sort:"metadata.creationTimestamp",transforms:[n.a],props:{className:A.created.classes}},{title:e("console-app~Instance type"),id:A.instanceType.id,sort:Object(D.re)(D.de,""),transforms:[n.a],props:{className:A.instanceType.classes}},{title:e("console-app~Machine"),id:A.machine.id,sort:Object(D.re)(D.ee,""),transforms:[n.a],props:{className:A.machine.classes},additional:!0},{title:e("console-app~Labels"),id:A.labels.id,sort:"metadata.labels",transforms:[n.a],props:{className:A.labels.classes},additional:!0},{title:e("console-app~Zone"),id:A.zone.id,sort:Object(D.re)(D.ke,""),transforms:[n.a],props:{className:A.zone.classes},additional:!0},{title:e("console-app~Uptime"),id:A.uptime.id,sort:Object(D.re)(D.je,""),transforms:[n.a],props:{className:A.uptime.classes},additional:!0},{title:"",id:"",props:{className:j.F.columnClass}}],q=({obj:e,activeColumnIDs:t,rowData:a})=>{var n,c,o,l,i,u,m,p,b,h;const{t:v}=Object(r.useTranslation)(),E=Object(d.useSelector)(({UI:e})=>e.getIn(["metrics","node"])),O=Object(D.dd)(e),f=Object(D.Jd)(e),g=null===(n=null==E?void 0:E.usedMemory)||void 0===n?void 0:n[O],w=null===(c=null==E?void 0:E.totalMemory)||void 0===c?void 0:c[O],k=Number.isFinite(g)&&Number.isFinite(w)?`${Object(j.Wb)(g).string} / ${Object(j.Wb)(w).string}`:"-",P=null===(o=null==E?void 0:E.cpu)||void 0===o?void 0:o[O],M=null===(l=null==E?void 0:E.totalCPU)||void 0===l?void 0:l[O],_=Number.isFinite(P)&&Number.isFinite(M)?v("console-app~{{formattedCores}} cores / {{totalCores}} cores",{formattedCores:Object(j.Pb)(P),totalCores:M}):"-",I=null===(i=null==E?void 0:E.usedStorage)||void 0===i?void 0:i[O],U=Object(D.gd)(e),x=null===(u=null==E?void 0:E.totalStorage)||void 0===u?void 0:u[O],q=Number.isFinite(I)&&Number.isFinite(x)?`${Object(j.Wb)(I).string} / ${Object(j.Wb)(x).string}`:"-",L=null!==(p=null===(m=null==E?void 0:E.pods)||void 0===m?void 0:m[O])&&void 0!==p?p:"-",[z,W]=Object(D.jd)(e),K=null===(b=e.metadata.labels)||void 0===b?void 0:b["beta.kubernetes.io/instance-type"],F=Object(D.Pc)(e),H=null===(h=e.metadata.labels)||void 0===h?void 0:h["topology.kubernetes.io/zone"],$={[Object(N.Db)(e)]:e};return s.createElement(s.Fragment,null,s.createElement(y.TableData,{className:A.name.classes,id:A.name.id,activeColumnIDs:t},s.createElement(j.hb,{groupVersionKind:{kind:R.NodeModel.kind,version:R.NodeModel.apiVersion},name:O,title:f})),s.createElement(y.TableData,{className:A.status.classes,id:A.status.id,activeColumnIDs:t},s.createElement(C.a,{node:e,statusExtensions:a})),s.createElement(y.TableData,{className:A.role.classes,id:A.role.id,activeColumnIDs:t},s.createElement(S.a,{node:e})),s.createElement(y.TableData,{className:A.pods.classes,id:A.pods.id,activeColumnIDs:t},L),s.createElement(y.TableData,{className:A.memory.classes,id:A.memory.id,activeColumnIDs:t},k),s.createElement(y.TableData,{className:A.cpu.classes,id:A.cpu.id,activeColumnIDs:t},_),s.createElement(y.TableData,{className:A.architecture.classes,id:A.architecture.id,activeColumnIDs:t},U),s.createElement(y.TableData,{className:A.filesystem.classes,id:A.filesystem.id,activeColumnIDs:t},q),s.createElement(y.TableData,{className:A.created.classes,id:A.created.id,activeColumnIDs:t},s.createElement(j.xb,{timestamp:e.metadata.creationTimestamp})),s.createElement(y.TableData,{className:A.instanceType.classes,id:A.instanceType.id,activeColumnIDs:t},K||"-"),s.createElement(y.TableData,{className:A.machine.classes,id:A.machine.id,activeColumnIDs:t},z&&W?s.createElement(j.hb,{groupVersionKind:{kind:R.MachineModel.kind,version:R.MachineModel.apiVersion,group:R.MachineModel.apiGroup},name:z,namespace:W}):"-"),s.createElement(y.TableData,{className:A.labels.classes,id:A.labels.id,activeColumnIDs:t},s.createElement(j.L,{kind:"Node",labels:F})),s.createElement(y.TableData,{className:A.zone.classes,id:A.zone.id,activeColumnIDs:t},H),s.createElement(y.TableData,{className:A.uptime.classes,id:A.uptime.id,activeColumnIDs:t},s.createElement(T.a,{obj:e})),s.createElement(y.TableData,{className:j.F.columnClass,activeColumnIDs:t,id:""},s.createElement(D.hb,{context:$})))},L=O.g&&window.innerWidth>1200,z=({obj:e,activeColumnIDs:t})=>{const a=l.a(e,["metadata.originalName"]);return a.metadata.name=e.metadata.originalName,s.createElement(s.Fragment,null,s.createElement(y.TableData,{className:A.name.classes,id:A.name.id,activeColumnIDs:t},e.metadata.name),s.createElement(y.TableData,{className:A.status.classes,id:A.status.id,activeColumnIDs:t},s.createElement(P.c,{csr:Object.assign(Object.assign({},a),{metadata:Object.assign(Object.assign({},a.metadata),{name:e.metadata.originalName})}),title:"Discovered"})),s.createElement(y.TableData,{className:A.role.classes,id:A.role.id,activeColumnIDs:t},"-"),s.createElement(y.TableData,{className:A.pods.classes,id:A.pods.id,activeColumnIDs:t},"-"),s.createElement(y.TableData,{className:A.memory.classes,id:A.memory.id,activeColumnIDs:t},"-"),s.createElement(y.TableData,{className:A.cpu.classes,id:A.cpu.id,activeColumnIDs:t},"-"),s.createElement(y.TableData,{className:A.architecture.classes,id:A.architecture.id,activeColumnIDs:t},"-"),s.createElement(y.TableData,{className:A.filesystem.classes,id:A.filesystem.id,activeColumnIDs:t},"-"),s.createElement(y.TableData,{className:A.created.classes,id:A.created.id,activeColumnIDs:t},s.createElement(j.xb,{timestamp:e.metadata.creationTimestamp})),s.createElement(y.TableData,{className:A.instanceType.classes,id:A.instanceType.id,activeColumnIDs:t},"-"),s.createElement(y.TableData,{className:A.machine.classes,id:A.machine.id,activeColumnIDs:t},"-"),s.createElement(y.TableData,{className:A.labels.classes,id:A.labels.id,activeColumnIDs:t},s.createElement(j.L,{kind:"Node",labels:Object(D.Pc)(e)})),s.createElement(y.TableData,{className:A.zone.classes,id:A.zone.id,activeColumnIDs:t},"-"),s.createElement(y.TableData,{className:A.uptime.classes,id:A.uptime.id,activeColumnIDs:t},"-"),s.createElement(y.TableData,{className:j.F.columnClass,activeColumnIDs:t,id:""}))},W=e=>{var{obj:t}=e,a=I(e,["obj"]);return Object(k.c)(t)?s.createElement(z,Object.assign({obj:t},a)):s.createElement(q,Object.assign({obj:t},a))},K=e=>{const{t:t}=Object(r.useTranslation)(),a=s.useMemo(()=>x(t),[t]),[n,c]=Object(E.useActiveColumns)({columns:a,showNamespaceOverride:!1,columnManagementID:U}),o=Object(M.a)();return c&&s.createElement(y.default,Object.assign({},e,{"aria-label":t("public~Nodes"),label:t("public~Nodes"),columns:n,Row:W,rowData:o}))};t.default=({selector:e})=>{var t;const a=Object(d.useDispatch)(),[n,,l]=Object(D.ff)(D.q,D.r,void 0,!0),[E,y,O]=Object(g.a)({groupVersionKind:{kind:"Node",version:"v1"},isList:!0,selector:e}),[j,R,N]=Object(g.a)({groupVersionKind:{group:"certificates.k8s.io",kind:"CertificateSigningRequest",version:"v1"},isList:!0});s.useEffect(()=>{const e=()=>_(void 0,void 0,void 0,(function*(){try{const e=yield(()=>{const e=[{key:"usedMemory",query:"sum by (instance) (node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes)"},{key:"totalMemory",query:"sum by (instance) (node_memory_MemTotal_bytes)"},{key:"usedStorage",query:'sum by (instance) ((max by (device, instance) (node_filesystem_size_bytes{device=~"/.*"})) - (max by (device, instance) (node_filesystem_free_bytes{device=~"/.*"}))) or sum by (instance) ((max by (volume, instance) (windows_logical_disk_size_bytes)) - (max by (volume, instance) (windows_logical_disk_free_bytes)))'},{key:"totalStorage",query:'sum by (instance) (max by (device, instance) (node_filesystem_size_bytes{device=~"/.*"})) or sum by (instance) (max by (volume, instance) (windows_logical_disk_size_bytes))'},{key:"cpu",query:"sum by(instance) (instance:node_cpu:rate:sum)"},{key:"totalCPU",query:"sum by(instance) (instance:node_num_cpu:sum)"},{key:"pods",query:"sum by(node)(kubelet_running_pods)"}].map(({key:e,query:t})=>{const a=Object(f.b)({endpoint:f.a.QUERY,query:t});return Object(p.c)(a).then(({data:{result:t}})=>t.reduce((t,a)=>{const s=Number(a.value[1]);return c.a(t,[e,a.metric.instance||a.metric.node],s)},{}))});return Promise.all(e).then(e=>o.a({},...e))})();a(Object(m.r)(e))}catch(e){console.error("Error fetching node metrics: ",e)}}));if(e(),L){const t=setInterval(e,3e4);return()=>clearInterval(t)}return()=>{}},[a]);const{t:T}=Object(r.useTranslation)(),S=s.useMemo(()=>[...Object(k.a)(j).filter(e=>!E.some(t=>t.metadata.name===e.metadata.name)),...E],[j,E]),C=s.useMemo(()=>(e=>[{filterGroupName:e("console-app~Status"),type:"node-status",reducer:e=>Object(k.c)(e)?"Discovered":Object(w.a)(e),items:[{id:"Ready",title:e("console-app~Ready")},{id:"Not Ready",title:e("console-app~Not Ready")},{id:"Discovered",title:e("console-app~Discovered")}],filter:(e,t)=>{var a,s,n;return!(null===(a=e.selected)||void 0===a?void 0:a.length)||(Object(k.c)(t)?null===(s=e.selected)||void 0===s?void 0:s.includes("Discovered"):null===(n=e.selected)||void 0===n?void 0:n.includes(Object(w.a)(t)))}},{filterGroupName:e("console-app~Roles"),type:"node-role",isMatch:(e,t)=>!Object(k.c)(e)&&Object(D.ld)(e,t),items:[{id:"control-plane",title:e("console-app~control-plane")},{id:"worker",title:e("console-app~worker")}],filter:(e,t)=>{var a,s;if(!(null===(a=e.selected)||void 0===a?void 0:a.length))return!0;if(Object(k.c)(t))return!1;const n=Object(D.md)(t);return null===(s=e.selected)||void 0===s?void 0:s.some(e=>n.includes(e))}},{filterGroupName:e("console-app~Architecture"),type:"cpu-arch",reducer:e=>Object(k.c)(e)?"":Object(D.gd)(e),items:[{id:"amd64",title:"amd64"},{id:"ppc64le",title:"ppc64le"},{id:"arm64",title:"arm64"},{id:"s390x",title:"s390x"}],filter:(e,t)=>{var a,s;return!(null===(a=e.selected)||void 0===a?void 0:a.length)||!Object(k.c)(t)&&(null===(s=e.selected)||void 0===s?void 0:s.includes(Object(D.gd)(t)))}}])(T),[T]),[P,M,I]=Object(b.useListPageFilter)(S,C),A=y&&R,q=O||N,z=s.useMemo(()=>x(T),[T]);return l&&s.createElement(s.Fragment,null,s.createElement(v.default,{title:T("public~Nodes")}),s.createElement(u.r,null,s.createElement(h.default,{data:P,loaded:A,rowFilters:C,onFilterChange:I,columnLayout:{columns:z.map(e=>i.a(e,["title","additional","id"])),id:U,selectedColumns:(null===(t=null==n?void 0:n[U])||void 0===t?void 0:t.length)>0?new Set(n[U]):null,type:"Node"}}),s.createElement(K,{data:M,unfilteredData:P,loaded:A,loadError:q})))}},5670:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var s=a(0),n=a(31),c=a(499),o=a(327),l=a(517),i=a(5);const r=e=>({watchURL:(t,a)=>e(Object(l.g)(t,a)),stopWatchURL:t=>e(Object(l.e)(t)),watchPrometheusQuery:(t,a,s)=>e(Object(l.f)(t,a,s)),stopWatchPrometheusQuery:(t,a)=>e(Object(l.d)(t,a))}),d=e=>({[o.a.URL]:e.dashboards.get(o.a.URL),[o.a.PROMETHEUS]:e.dashboards.get(o.a.PROMETHEUS),notificationAlerts:e.observe.get("notificationAlerts")}),u=e=>Object(n.connect)(d,r)(class extends s.Component{constructor(e){super(e),this.urls=[],this.queries=[],this.watchingAlerts=!1,this.watchURL=(e,t)=>{this.urls.push(e),this.props.watchURL(e,t)},this.watchPrometheus=(e,t,a)=>{this.queries.push(Object(l.c)(e,a)),this.props.watchPrometheusQuery(e,t,a)},this.stopWatchPrometheusQuery=(e,t)=>{const a=Object(l.c)(e,t);this.queries=this.queries.filter(e=>e!==a),this.props.stopWatchPrometheusQuery(e,t)},this.watchAlerts=()=>{this.watchingAlerts=!0},this.stopWatchAlerts=()=>{this.watchingAlerts=!1},this.watchK8sResource=e=>{this.setState(t=>({k8sResources:[...t.k8sResources,Object.assign(Object.assign({},e),{optional:!0})]}))},this.stopWatchK8sResource=e=>{this.setState(t=>({k8sResources:t.k8sResources.filter(t=>t.prop!==e.prop)}))},this.getExternalProps=e=>c.a(e,"watchURL","stopWatchURL","watchPrometheusQuery","stopWatchPrometheusQuery","watchAlerts","stopWatchAlerts",o.a.URL,o.a.PROMETHEUS,"notificationAlerts"),this.state={k8sResources:[]}}shouldComponentUpdate(e,t){var a,s,n,c,l,i;const r=this.urls.some(t=>this.props[o.a.URL].getIn([t,"data"])!==e[o.a.URL].getIn([t,"data"])||this.props[o.a.URL].getIn([t,"loadError"])!==e[o.a.URL].getIn([t,"loadError"])),d=this.queries.some(t=>this.props[o.a.PROMETHEUS].getIn([t,"data"])!==e[o.a.PROMETHEUS].getIn([t,"data"])||this.props[o.a.PROMETHEUS].getIn([t,"loadError"])!==e[o.a.PROMETHEUS].getIn([t,"loadError"])),u=(null===(s=null===(a=this.props)||void 0===a?void 0:a.notificationAlerts)||void 0===s?void 0:s.data)!==(null===(n=null==e?void 0:e.notificationAlerts)||void 0===n?void 0:n.data)||(null===(l=null===(c=this.props)||void 0===c?void 0:c.notificationAlerts)||void 0===l?void 0:l.loadError)!==(null===(i=null==e?void 0:e.notificationAlerts)||void 0===i?void 0:i.loadError),m=this.state.k8sResources!==t.k8sResources,p=this.getExternalProps(e),b=this.getExternalProps(this.props);return r||d||m||this.watchingAlerts&&u||Object.keys(p).length!==Object.keys(b).length||Object.keys(p).some(e=>p[e]!==b[e])}render(){return s.createElement(i.C,{resources:this.state.k8sResources},s.createElement(e,Object.assign({watchURL:this.watchURL,stopWatchURL:this.props.stopWatchURL,watchPrometheus:this.watchPrometheus,stopWatchPrometheusQuery:this.stopWatchPrometheusQuery,watchAlerts:this.watchAlerts,stopWatchAlerts:this.stopWatchAlerts,urlResults:this.props[o.a.URL],prometheusResults:this.props[o.a.PROMETHEUS],notificationAlerts:this.props.notificationAlerts,watchK8sResource:this.watchK8sResource,stopWatchK8sResource:this.stopWatchK8sResource},this.getExternalProps(this.props))))}})},5722:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return i}));var s=a(29),n=a(131),c=a(5),o=a(8);const l={Delete:(e,t,a,o)=>({id:"delete-resource",label:s.a.t("console-app~Delete {{kind}}",{kind:e.kind}),cta:()=>Object(n.q)({kind:e,resource:t,message:o}),accessReview:Object(c.Eb)(e,t,"delete")}),Edit:(e,t)=>({id:"edit-resource",label:s.a.t("console-app~Edit {{kind}}",{kind:e.kind}),cta:{href:Object(c.sc)(t,e.crd?Object(o.Hb)(e):e.kind)+"/yaml"},accessReview:Object(c.Eb)(e,t,"update")}),ModifyLabels:(e,t)=>({id:"edit-labels",label:s.a.t("console-app~Edit labels"),cta:()=>Object(n.v)({kind:e,resource:t,blocking:!0}),accessReview:Object(c.Eb)(e,t,"patch")}),ModifyAnnotations:(e,t)=>({id:"edit-annotations",label:s.a.t("console-app~Edit annotations"),cta:()=>Object(n.b)({kind:e,resource:t,blocking:!0}),accessReview:Object(c.Eb)(e,t,"patch")}),ModifyCount:(e,t)=>({id:"edit-pod-count",label:s.a.t("console-app~Edit Pod count"),cta:()=>Object(n.l)({resourceKind:e,resource:t}),accessReview:Object(c.Eb)(e,t,"patch","scale")}),ModifyPodSelector:(e,t)=>({id:"edit-pod-selector",label:s.a.t("console-app~Edit Pod selector"),cta:()=>Object(n.x)({kind:e,resource:t,blocking:!0}),accessReview:Object(c.Eb)(e,t,"patch")}),ModifyTolerations:(e,t)=>({id:"edit-toleration",label:s.a.t("console-app~Edit tolerations"),cta:()=>Object(n.D)({resourceKind:e,resource:t,modalClassName:"modal-lg"}),accessReview:Object(c.Eb)(e,t,"patch")}),AddStorage:(e,t)=>({id:"add-storage",label:s.a.t("console-app~Add storage"),cta:{href:Object(c.sc)(t,e.crd?Object(o.Hb)(e):e.kind)+"/attach-storage"},accessReview:Object(c.Eb)(e,t,"patch")})},i=(e,t,a)=>[l.ModifyLabels(e,t),l.ModifyAnnotations(e,t),l.Edit(e,t),l.Delete(e,t,void 0,a)]},5735:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var s=a(0),n=a(353),c=a(19),o=a(7),l=a(14),i=a(13),r=a(517),d=a(5670),u=a(1406),m=a(5),p=a(980),b=a(108),h=a(8),v=a(15),E=a(30),y=a(119),O=a(2229);a(5828);const f=s.memo(({current:e,title:t,humanize:a,consumers:l,namespace:i,position:r=n.b.top,description:d,children:u})=>{const{t:m}=Object(o.useTranslation)(),[p,b]=s.useState(!1),h=s.useCallback(()=>b(!0),[]),v=s.useCallback(()=>b(!1),[]);return e?s.createElement(n.a,{position:r,headerContent:m("console-shared~{{title}} breakdown",{title:t}),bodyContent:s.createElement(R,{humanize:a,consumers:l,namespace:i,isOpen:p,description:d},u),enableFlip:!0,onShow:h,onHide:v,maxWidth:"21rem"},s.createElement(c.a,{variant:"link",isInline:!0},e)):null});t.b=f;const j=e=>{switch(e){case i.m.ERROR:return s.createElement(y.h,null);case i.m.WARN:return s.createElement(y.m,null);default:return null}},g=({limitState:e,requestedState:t,total:a,limit:n,current:c,available:l,requested:r})=>{const{t:d}=Object(o.useTranslation)();return(!!e&&e!==i.m.OK||!!t&&t!==i.m.OK)&&s.createElement("ul",{className:"co-utilization-card-popover__consumer-list"},s.createElement(O.default,{value:a},d("console-shared~Total capacity")),s.createElement(O.default,{value:n,icon:j(e)},d("console-shared~Total limit")),s.createElement(O.default,{value:c},d("console-shared~Current utilization")),s.createElement(O.default,{value:l},d("console-shared~Current available capacity")),s.createElement(O.default,{value:r,icon:j(t)},d("console-shared~Total requested")))},R=Object(d.a)(s.memo(({humanize:e,consumers:t,namespace:a,watchPrometheus:n,stopWatchPrometheusQuery:c,prometheusResults:d,isOpen:y,description:O,children:f})=>{const{t:j}=Object(o.useTranslation)(),[g,R]=s.useState(t[0]),D=Object(i.jc)()[0],w=Object(v.Fe)(E.A.CAN_GET_NS)&&!!window.SERVER_FLAGS.prometheusBaseURL,{query:k,model:T,metric:S,fieldSelector:C}=g,P=s.useMemo(()=>y?((e,t,a)=>({isList:!0,kind:e.crd?Object(h.Hb)(e):e.kind,fieldSelector:a,namespace:t}))(T,a,C):null,[C,y,T,a]),[M,_,I]=Object(b.a)(P);s.useEffect(()=>y?(n(k,a),()=>{c(k)}):()=>{},[k,c,n,a,y]);const A=[],[U,x]=Object(r.b)(d,k),q=Object(u.a)(U,S);if(P&&_&&!I)for(const t of q){if(M.some(e=>Object(v.dd)(e)===t.metric[S]&&(!T.namespaced||Object(v.ed)(e)===t.metric.namespace))&&A.push(Object.assign(Object.assign({},t),{y:e(t.y).string})),5===A.length)break}const L=s.useMemo(()=>{const e=new URLSearchParams;return e.set("query0",g.query),e},[g.query]),z=s.useMemo(()=>t.reduce((e,t)=>(e[Object(h.Hb)(t.model)]=j("console-shared~By {{label}}",{label:t.model.labelKey?j(t.model.labelKey):t.model.label}),e),{}),[t,j]),W=s.useCallback(e=>R(t.find(t=>Object(h.Hb)(t.model)===e)),[t]),K=w&&"admin"===D?"/monitoring/query-browser?"+L.toString():`/dev-monitoring/ns/${a}/metrics?${L.toString()}`;let F;return F=x||I?s.createElement("div",{className:"text-secondary"},j("console-shared~Not available")):_&&U?s.createElement(s.Fragment,null,s.createElement("ul",{className:"co-utilization-card-popover__consumer-list","aria-label":j("console-shared~Top consumer by {{label}}",{label:T.label})},A&&A.map(e=>{const t=String(e.x);return s.createElement(N,{key:t,value:e.y},s.createElement(l.Link,{className:"co-utilization-card-popover__consumer-name",to:Object(m.uc)(T,t,e.metric.namespace)},t))})),s.createElement(l.Link,{to:K},j("console-shared~View more"))):s.createElement("ul",{className:"co-utilization-card-popover__consumer-list"},s.createElement("li",{className:"skeleton-consumer"}),s.createElement("li",{className:"skeleton-consumer"}),s.createElement("li",{className:"skeleton-consumer"}),s.createElement("li",{className:"skeleton-consumer"}),s.createElement("li",{className:"skeleton-consumer"})),s.createElement("div",{className:"co-utilization-card-popover__body"},O&&s.createElement("div",{className:"co-utilization-card-popover__description"},O),f,s.createElement("div",{className:"co-utilization-card-popover__title"},1===t.length?j("console-shared~Top {{label}} consumers",{label:g.model.label.toLowerCase()}):j("console-shared~Top consumers")),t.length>1&&s.createElement(p.b,{className:"co-utilization-card-popover__dropdown",id:"consumer-select",name:"selectConsumerType","aria-label":j("console-shared~Select consumer type"),items:z,onChange:W,selectedKey:Object(h.Hb)(T)}),F)})),N=({children:e,value:t})=>s.createElement("li",{className:"co-utilization-card-popover__consumer-item"},e,s.createElement("div",{className:"co-utilization-card-popover__consumer-value"},t))},5828:function(e,t,a){},6271:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return l}));var s=a(225),n=a(10),c=a(8);const o=e=>{const t=s.a(e,"spec.unschedulable")?"replace":"add";return Object(c.pb)(n.NodeModel,e,[{op:t,path:"/spec/unschedulable",value:!0}])},l=e=>{const t=s.a(e,"spec.unschedulable")?"replace":"add";return Object(c.pb)(n.NodeModel,e,[{op:t,path:"/spec/unschedulable",value:!1}])}},6518:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));const s=e=>a.e(118).then(a.bind(null,7569)).then(t=>t.default(e))},6782:function(e,t,a){"use strict";a.d(t,"d",(function(){return j})),a.d(t,"a",(function(){return g})),a.d(t,"b",(function(){return N}));var s=a(0),n=a(967),c=a(406),o=a(516),l=a(164),i=a(19),r=a(80),d=a(1921),u=a(6023),m=a(7),p=a(13),b=a(5),h=a(10),v=a(15),E=a(2310),y=a(5416),O=function(e,t,a,s){return new(a||(a=Promise))((function(n,c){function o(e){try{i(s.next(e))}catch(e){c(e)}}function l(e){try{i(s.throw(e))}catch(e){c(e)}}function i(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}i((s=s.apply(e,t||[])).next())}))},f=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a};const j=(e,t)=>{var a,s;return!(!(null===(a=t.csrs)||void 0===a?void 0:a.loaded)||(null===(s=t.csrs)||void 0===s?void 0:s.loadError))&&!!Object(E.b)(t.csrs.data,e)},g=({csr:e,serverCSR:t,onPatch:a})=>{const{t:d}=Object(m.useTranslation)(),[u,p]=s.useState(!1),[v,E]=s.useState(),f=t=>O(void 0,void 0,void 0,(function*(){E(null),p(!0);try{yield t?Object(y.approveCSR)(e):Object(y.denyCSR)(e),null==a||a()}catch(a){E(`${e.metadata.name} ${t?"approval":"denial"} failed - ${a}`)}finally{p(!1)}})),j=d("console-app~This node has requested to join the cluster. After approving its certificate signing request the node will begin running workloads."),g=d("console-app~This node has a pending server certificate signing request. Approve the request to enable all networking functionality on this node.");return s.createElement(n.a,{hasGutter:!0},s.createElement(c.a,null,t?g:j),s.createElement(c.a,null,s.createElement("div",null,s.createElement("b",null,d("console-app~Request"))),s.createElement("div",null,s.createElement(b.hb,{name:e.metadata.name,groupVersionKind:{kind:h.CertificateSigningRequestModel.kind,version:h.CertificateSigningRequestModel.apiVersion,group:h.CertificateSigningRequestModel.apiGroup}}))),s.createElement(c.a,null,s.createElement("div",null,s.createElement("b",null,d("console-app~Created"))),s.createElement("div",null,s.createElement(b.xb,{timestamp:e.metadata.creationTimestamp}))),s.createElement(c.a,null,s.createElement(o.a,{hasGutter:!0},s.createElement(l.a,null,s.createElement(i.a,{variant:"link",onMouseUp:()=>f(!0),isDisabled:u,isInline:!0},d("console-app~Approve"))),s.createElement(l.a,null,s.createElement(i.a,{variant:"link",onMouseUp:()=>f(!1),isDisabled:u,isInline:!0},d("console-app~Deny"))))),v&&s.createElement(c.a,null,s.createElement(r.a,{variant:"danger",isInline:!0,title:v})))},R=({title:e})=>{const{t:t}=Object(m.useTranslation)();return s.createElement(p.A,{title:e||t("console-app~Approval required"),icon:s.createElement(u.a,null)})},N=({node:e,resources:t})=>{const[a,n]=s.useState(!0),c=Object(E.b)(t.csrs.data,e);return s.createElement(d.a,{isExpanded:a,onToggle:(e,t)=>n(t),toggleContent:s.createElement(R,null)},s.createElement(g,{csr:c,serverCSR:!0}))};t.c=e=>{var{title:t}=e,a=f(e,["title"]);const{t:n}=Object(m.useTranslation)(),[c,o]=s.useState(!1);return s.createElement(s.Fragment,null,s.createElement(p.q,{title:n("console-app~Certificate approval required"),statusBody:s.createElement(R,{title:t}),isVisible:c,shouldClose:()=>o(!1),shouldOpen:()=>o(!0)},s.createElement(g,Object.assign({},a,{onPatch:()=>o(!1)}))),s.createElement(v.Wb,{status:n("console-app~Approval required")}))}},6880:function(e,t,a){"use strict";var s=a(0),n=a(5),c=a(15);t.a=({obj:e})=>s.createElement(n.xb,{timestamp:Object(c.nd)(e)})},6881:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));var s=a(0),n=a(967),c=a(406),o=a(663),l=a(7),i=a(13),r=a(5),d=a(15),u=a(5735),m=a(198),p=a(1312),b=a(2233),h=a(6882);const v=Object.freeze({[p.d.DISK_PRESSURE]:"available disk capacity is low",[p.d.MEM_PRESSURE]:"available memory is low",[p.d.PID_PRESSURE]:"CPU is running a large number of processes"}),E=Object.freeze({[p.d.DISK_PRESSURE]:r.Wb,[p.d.MEM_PRESSURE]:r.Wb,[p.d.PID_PRESSURE]:r.bc}),y=e=>e.status.conditions.filter(({status:e,type:t})=>{return"True"===e&&(a=t,[p.d.DISK_PRESSURE,p.d.MEM_PRESSURE,p.d.PID_PRESSURE].includes(a));var a}).map(({type:e})=>e),O=({node:e,className:t,statusExtensions:a})=>{var r;const{t:h}=Object(l.useTranslation)(),{popoverContent:O,secondaryStatuses:f}=s.useMemo(()=>a(e),[a,e]),j=s.createElement(d.cc,{status:Object(b.a)(e),className:t});return s.createElement(s.Fragment,null,O.length?s.createElement(i.q,{title:h("console-app~Node status"),statusBody:j},s.createElement(n.a,null,O.map(({content:e,uid:t})=>s.createElement(m.a,{key:t},s.createElement(c.a,null,e))))):j,s.createElement(d.Wb,{status:f}),null===(r=y(e))||void 0===r?void 0:r.map(t=>s.createElement("div",{key:t},s.createElement(u.b,{title:o.a(t),current:o.a(t),consumers:p.e[t](e.metadata.name),humanize:E[t],description:h("console-app~This node's {{conditionDescription}}. Performance may be degraded.",{conditionDescription:v[t]})}))))};t.b=({node:e,className:t})=>{const a=Object(h.a)();return s.createElement(O,{node:e,className:t,statusExtensions:a})}},6882:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var s=a(0),n=a(13),c=a(108);const o=()=>{const[e]=Object(n.kc)(n.Ab),t=s.useMemo(()=>{const t={};return e.forEach(({properties:e,uid:a})=>{e.resources&&Object.keys(e.resources).forEach(s=>{t[`${a}-${s}`]=e.resources[s]})}),t},[e]),a=Object(c.b)(t);return s.useCallback(t=>{const n=[],c=[];return e.forEach(({properties:{PopoverContent:e,title:o,isActive:l,resources:i},uid:r,pluginID:d,type:u})=>{const m={};i&&Object.keys(i).forEach(e=>{m[e]=a[`${r}-${e}`]});try{l(t,m)&&(n.push({content:s.createElement(e,{node:t,resources:m}),uid:r}),c.push(o))}catch(e){console.error(`Extension ${d}, ${u} failed:`,e)}}),{popoverContent:n,secondaryStatuses:c}},[a,e])}},7557:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var s=a(1216),n=a(696),c=a(1944);const o=e=>e?Object(s.b)(e)?{status:n.w,titleKey:n.x[n.w]}:"Succeeded"===Object(c.x)(e)?{status:n.y,titleKey:n.x[n.y]}:{status:n.v,titleKey:n.x[n.v]}:null},7567:function(e,t,a){"use strict";var s=a(0),n=a(15);t.a=({node:e})=>s.createElement(s.Fragment,null,Object(n.md)(e).sort().join(", ")||n.E)}}]);
//# sourceMappingURL=node-chunk-2d99eb1c6176653335cb.min.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[176],{5533:function(e,t,a){"use strict";a.r(t),a.d(t,"DroppableFileInput",(function(){return b})),a.d(t,"AddHTPasswdPage",(function(){return h}));var n=a(0),r=a(137),s=a(7),c=a(14),i=a(966),l=a(19),d=a(10),o=a(8),u=a(5),p=a(5957),m=a(5958);const b=e=>n.createElement(u.c,Object.assign({loader:()=>Promise.resolve().then(a.bind(null,2223)).then(e=>e.DroppableFileInput)},e)),h=()=>{const e=Object(c.useNavigate)(),[t,a]=n.useState(!1),[h,f]=n.useState(""),[v,g]=n.useState("htpasswd"),[w,y]=n.useState(""),{t:E}=Object(s.useTranslation)(),P=e=>(a(!0),e.then(e=>(e=>(a(!1),f(""),e))(e),e=>(e=>{const t=e.message||E("public~An error occurred. Please try again.");return a(!1),f(t),Promise.reject(t)})(e))),O=(e,t,a)=>{const n={name:v,type:"HTPasswd",mappingMethod:"claim",htpasswd:{fileData:{name:t}}};return P(Object(p.a)(e,n,a))},j=E("public~Add Identity Provider: HTPasswd");return n.createElement("div",{className:"co-m-pane__form"},n.createElement(r.a,null,n.createElement("title",null,j)),n.createElement(u.Z,{title:j,helpText:E("public~HTPasswd validates usernames and passwords against a flat file generated using the htpasswd command.")}),n.createElement("div",{className:"co-m-pane__body"},n.createElement("form",{onSubmit:t=>{t.preventDefault(),w?(f(""),P(Object(p.b)()).then(t=>{O(t,p.c.secret,!0).then(()=>(()=>{const e={apiVersion:"v1",kind:"Secret",metadata:{generateName:"htpasswd-",namespace:"openshift-config"},stringData:{htpasswd:w}};return P(Object(o.jb)(d.SecretModel,e))})().then(e=>O(t,e.metadata.name)).then(()=>{Object(p.d)(e)})).catch(e=>{f(e)})})):f(E("public~You must specify an HTPasswd file."))},name:"form",className:"co-m-pane__body-group"},n.createElement(m.a,{value:v,onChange:e=>g(e.currentTarget.value)}),n.createElement("div",{className:"form-group"},n.createElement(b,{onChange:e=>y(e),inputFileData:w,id:"htpasswd-file",label:E("public~HTPasswd file"),inputFieldHelpText:E("public~Upload an HTPasswd file created using the htpasswd command."),isRequired:!0,hideContents:!0})),n.createElement(u.g,{errorMessage:h,inProgress:t},n.createElement(i.a,{className:"pf-v5-c-form"},n.createElement(l.a,{type:"submit",variant:"primary"},E("public~Add")),n.createElement(l.a,{type:"button",variant:"secondary",onClick:()=>e(-1)},E("public~Cancel")))))))}},5957:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return d})),a.d(t,"c",(function(){return o}));var n=a(22),r=a(10),s=a(8),c=a(5);const i=()=>Object(s.kb)(r.OAuthModel,"cluster"),l=(e,t,a)=>{const c=n.a(e.spec.identityProviders)?{op:"add",path:"/spec/identityProviders",value:[t]}:{op:"add",path:"/spec/identityProviders/-",value:t};return Object(s.pb)(r.OAuthModel,e,[c],a?{queryParams:{dryRun:"All"}}:{})},d=e=>{e(Object(c.uc)(r.OAuthModel,"cluster")+"?idpAdded=true")},o={secret:"secret-name",ca:"ca-name"}},5958:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(0),r=a(7);const s=({value:e,onChange:t})=>{const{t:a}=Object(r.useTranslation)();return n.createElement("div",{className:"form-group"},n.createElement("label",{className:"control-label co-required",htmlFor:"idp-name"},a("public~Name")),n.createElement("input",{className:"pf-v5-c-form-control",type:"text",onChange:t,value:e,"aria-describedby":"idp-name-help",id:"idp-name",required:!0}),n.createElement("p",{className:"help-block",id:"idp-name-help"},a("public~Unique name of the new identity provider. This cannot be changed later.")))}}}]);
//# sourceMappingURL=htpasswd-idp-form-chunk-e5d04cd42842f316139d.min.js.map
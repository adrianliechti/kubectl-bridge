(window.webpackJsonp=window.webpackJsonp||[]).push([[186],{5511:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(5),l=a(7465),r=a(6337),i=a(7459);t.default=({item:e})=>n.createElement("div",{className:"overview__sidebar-pane-body"},n.createElement(s.Jb,{item:e}),(e=>{const{obj:t,ksroutes:a,revisions:s,configurations:c}=e;return n.createElement(n.Fragment,null,n.createElement(r.a,{revisions:s,service:t}),n.createElement(i.a,{ksroutes:a,resource:t}),n.createElement(l.a,{configurations:c}))})(e))},5934:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(0),s=a(116),l=a(313),r=a(108),i=a(10),c=a(8),o=a(15);const u=(e,t)=>{const[a,u]=n.useState(!1),[m,d]=n.useState(""),[v,p]=n.useState([]),b=Object(o.De)(Array.isArray(e)?e:[e]),E=n.useMemo(()=>({deployments:{isList:!0,kind:"Deployment",namespace:t},replicaSets:{isList:!0,kind:"ReplicaSet",namespace:t},pods:{isList:!0,kind:"Pod",namespace:t}}),[t]),g=Object(r.b)(E),f=n.useCallback(e=>{var t;const a=Object.keys(e).find(t=>e[t].loadError);if(a)d(null===(t=e[a].loadError)||void 0===t?void 0:t.message);else if(Object.keys(e).length>0&&Object.keys(e).every(t=>e[t].loaded)){const t=b.reduce((t,a)=>{var n;const r=s.a(null===(n=null==e?void 0:e.deployments)||void 0===n?void 0:n.data,({metadata:{ownerReferences:e}})=>l.a(e,{uid:a,controller:!0}));if(null==r?void 0:r[0]){const a=Object.assign(Object.assign({},r[0]),{apiVersion:Object(c.n)(i.DeploymentModel),kind:i.DeploymentModel.kind});t.push(...Object(o.xd)(a,e))}return t},[]);u(!0),d(null),p(t)}},[b]),k=Object(o.Ce)(f,250);return n.useEffect(()=>{k(g)},[k,g]),Object(o.De)({loaded:a,loadError:m,pods:v})}},6167:function(e,t,a){"use strict";var n=a(0),s=a(6139),l=a(5);t.a=({urls:e=[],title:t})=>e.length>0&&n.createElement(n.Fragment,null,t&&n.createElement("span",{className:"text-muted"},t,": "),e.map(e=>(null==e?void 0:e.endsWith("svc.cluster.local"))?n.createElement(s.a,{isReadOnly:!0,hoverTip:"Copy",clickTip:"Copied"},e):n.createElement(l.A,{key:e,link:e,text:e,additionalClassName:"co-external-link--block"})))},6337:function(e,t,a){"use strict";var n=a(0),s=a(19),l=a(7146),r=a(117),i=a(461),c=a(4434),o=a(22),u=a(50),m=a(7),d=a(14),v=a(5),p=a(8),b=a(76),E=a(2267),g=a(6338);a(6340);t.a=({revisions:e,service:t,hideSectionHeading:a})=>{var f,k,N;const{t:j}=Object(m.useTranslation)(),h=Object(v.Dc)({group:b.p.apiGroup,resource:b.p.plural,namespace:t.metadata.namespace,verb:"update"}),O=null===(f=t.metadata)||void 0===f?void 0:f.namespace,y=null===(k=t.status)||void 0===k?void 0:k.traffic,x=null===(N=t.metadata)||void 0===N?void 0:N.name,R=n.useMemo(()=>{if(!e||!e.length)return[];const[t,a]=l.a(e,e=>{var t;return!!y&&r.a(y,{revisionName:null===(t=e.metadata)||void 0===t?void 0:t.name})}).map(e=>i.a(e,["metadata.creationTimestamp"]));return t.length<3?c.a(t,a.slice(0,3-t.length)):t},[e,y]);return n.createElement(n.Fragment,null,!a&&n.createElement(v.ub,{text:j("knative-plugin~Revisions"),className:"revision-overview-list"},(null==e?void 0:e.length)>3&&n.createElement(d.Link,{className:"sidebar__section-view-all",to:(()=>{const e="/search/ns/"+O,t="serving.knative.dev/service="+x,a=new URLSearchParams;return a.append("kind",Object(p.Hb)(b.n)),a.append("q",t),`${e}?${a.toString()}`})()},j("knative-plugin~View all ({{revLength}})",{revLength:e.length})),h&&n.createElement(s.a,{variant:"secondary",onClick:()=>Object(E.e)({obj:t}),isDisabled:!(e&&e.length)},j("knative-plugin~Set traffic distribution"))),o.a(e)?n.createElement("span",{className:"text-muted"},j("knative-plugin~No Revisions found for this resource.")):n.createElement("ul",{className:"list-group"},u.a(R,e=>n.createElement(g.a,{key:e.metadata.uid,revision:e,service:t}))))}},6338:function(e,t,a){"use strict";var n=a(0),s=a(270),l=a(5),r=a(8),i=a(15),c=a(76),o=a(1412),u=a(5934),m=a(6167);a(6339);t.a=({revision:e,service:t})=>{var a,d,v,p;const{metadata:{name:b,namespace:E}}=e,{pods:g}=Object(u.a)(e.metadata.uid,E),f=null==g?void 0:g[0],k=(null===(d=null===(a=null==f?void 0:f.obj)||void 0===a?void 0:a.metadata.ownerReferences)||void 0===d?void 0:d[0])||{},N=(null===(p=null===(v=null==f?void 0:f.obj)||void 0===v?void 0:v.status)||void 0===p?void 0:p.availableReplicas)||"0",{urls:j=[],percent:h}=Object(o.j)(b,t);return n.createElement("li",{className:"list-group-item"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-sm-8 col-xs-9"},n.createElement(l.hb,{kind:Object(r.Hb)(c.n),name:b,namespace:E})),h&&n.createElement("span",{className:"col-sm-4 col-xs-3 pf-v5-u-text-align-right"},h)),k.name&&n.createElement("div",{className:"odc-revision-deployment-list"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-sm-8 col-xs-9"},n.createElement(l.hb,{kind:k.kind,name:k.name,namespace:E})),n.createElement("div",{className:"col-sm-4 col-xs-3"},n.createElement("div",{className:"odc-revision-deployment-list__pod"},n.createElement(i.Bb,{standalone:!0,data:f?f.pods:[],size:25,innerRadius:8,outerRadius:12,title:N,titleComponent:n.createElement(s.a,{style:{fontSize:"10px"}}),showTooltip:!1})))),j.length>0&&n.createElement("div",{className:"row"},n.createElement("div",{className:"col-sm-12"},n.createElement(m.a,{urls:j})))))}},6339:function(e,t,a){},6340:function(e,t,a){},7459:function(e,t,a){"use strict";var n=a(0),s=a(22),l=a(50),r=a(7),i=a(5),c=a(76),o=a(7460),u=a(7461),m=a(7463);t.a=({ksroutes:e,resource:t})=>{const{t:a}=Object(r.useTranslation)();return n.createElement(n.Fragment,null,n.createElement(i.ub,{text:a("knative-plugin~Routes")}),s.a(e)?n.createElement("span",{className:"text-muted"},a("knative-plugin~No Routes found for this resource.")):n.createElement("ul",{className:"list-group"},l.a(e,e=>{const a=Object(o.a)(e,t);if(t.kind===c.p.kind)return n.createElement(u.a,{key:e.metadata.uid,route:e});if(a.length>0){const{urls:s,percent:l}=Object(o.b)(e,t);return n.createElement(m.a,{key:e.metadata.uid,uniqueRoutes:s,totalPercent:l,routeLink:a[0]})}return null})))}},7460:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}));var n=a(8),s=a(76);const l=e=>t=>Object(n.Db)(e)===Object(n.Hb)(s.p)||Object(n.Db)(e)===Object(n.Hb)(s.n)&&t.revisionName===e.metadata.name,r=(e,t)=>{if(!e.status)return[];const{metadata:{name:a,namespace:n},status:{url:s="",traffic:r=[{revisionName:t.metadata.name}]}}=e;return r.filter(l(t)).map((e,t)=>({uid:`${e.revisionName}-${(null==e?void 0:e.tag)?null==e?void 0:e.tag:"tag"}-${t}`,url:s,percent:e.percent?e.percent+"%":"",name:a,namespace:n}))},i=(e,t)=>{if(!e.status)return[];const{status:{traffic:a=[{revisionName:t.metadata.name}]}}=e,n=a.filter(l(t)).reduce((e,t)=>(t.url&&e.urls.push(t.url),e.percent+=t.percent?t.percent:0,e),{urls:[],percent:0});return Object.assign(Object.assign({},n),{percent:n.percent?n.percent+"%":""})}},7461:function(e,t,a){"use strict";var n=a(0),s=a(7462);t.a=({route:e})=>n.createElement(n.Fragment,null,n.createElement(s.a,{ksroute:e}))},7462:function(e,t,a){"use strict";var n=a(0),s=a(6139),l=a(7),r=a(5),i=a(8),c=a(132),o=a(76);t.a=({ksroute:e})=>{var t,a,u;const{t:m}=Object(l.useTranslation)(),{metadata:{name:d,namespace:v},status:p}=e,b="cluster-local"===(null===(a=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.labels)||void 0===a?void 0:a[c.Y]);return n.createElement("li",{className:"list-group-item"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-xs-12"},n.createElement(r.hb,{kind:Object(i.Hb)(o.o),name:d,namespace:v}),(null===(u=null==p?void 0:p.url)||void 0===u?void 0:u.length)>0&&n.createElement(n.Fragment,null,n.createElement("span",{className:"text-muted"},m("knative-plugin~Location:")," "),b?n.createElement(s.a,{isReadOnly:!0,hoverTip:"Copy",clickTip:"Copied"},p.url):n.createElement(r.A,{link:p.url,text:p.url,additionalClassName:"co-external-link--block"})))))}},7463:function(e,t,a){"use strict";var n=a(0),s=a(7),l=a(5),r=a(8),i=a(76),c=a(6167);t.a=({routeLink:{url:e,name:t,namespace:a,percent:o},totalPercent:u,uniqueRoutes:m})=>{const{t:d}=Object(s.useTranslation)();return n.createElement("li",{className:"list-group-item"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-xs-10"},n.createElement(l.hb,{kind:Object(r.Hb)(i.o),name:t,namespace:a})),o.length>0&&n.createElement("span",{className:"col-xs-2 pf-v5-u-text-align-right"},u||o)),e.length>0&&n.createElement(c.a,{urls:[e],title:d("knative-plugin~Location")}),(null==m?void 0:m.length)>0&&n.createElement(c.a,{urls:m,title:d("knative-plugin~Unique Route")}))}},7465:function(e,t,a){"use strict";var n=a(0),s=a(22),l=a(50),r=a(7),i=a(5),c=a(7466);t.a=({configurations:e})=>{const{t:t}=Object(r.useTranslation)();return n.createElement(n.Fragment,null,n.createElement(i.ub,{text:t("knative-plugin~Configurations")}),s.a(e)?n.createElement("span",{className:"text-muted"},t("knative-plugin~No configurations found for this resource.")):n.createElement("ul",{className:"list-group"},l.a(e,e=>n.createElement(c.a,{key:e.metadata.uid,configuration:e}))))}},7466:function(e,t,a){"use strict";var n=a(0),s=a(7),l=a(5),r=a(8),i=a(76);t.a=({configuration:{metadata:{name:e,namespace:t},status:{latestCreatedRevisionName:a,latestReadyRevisionName:c}}})=>{const{t:o}=Object(s.useTranslation)();return n.createElement("li",{className:"list-group-item"},n.createElement(l.hb,{kind:Object(r.Hb)(i.d),name:e,namespace:t}),n.createElement("span",{className:"text-muted"},o("knative-plugin~Latest created Revision name:")," "),n.createElement("span",null,a),n.createElement("br",null),n.createElement("span",{className:"text-muted"},o("knative-plugin~Latest ready Revision name:")," "),n.createElement("span",null,c))}}}]);
//# sourceMappingURL=knative-overview-chunk-5f399571f7c165f89f34.min.js.map
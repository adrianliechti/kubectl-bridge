(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{11743:function(e,t,n){"use strict";var l=n(0),a=n(7),i=n(40),c=n(336),r=n(6877),o=n(11744),s=n(11745);n(11748);t.a=({appGroups:e,emptyStateMsg:t})=>{const{t:n}=Object(a.useTranslation)(),[u,m]=l.useState(""),p=null==e?void 0:e.filter(({name:e})=>Object(c.b)(u,e)),d=(null==e?void 0:e.some(({sync_status:e})=>e))||!1;return l.createElement("div",{className:"gop-gitops-list"},!t&&e?l.createElement(l.Fragment,null,l.createElement("div",{className:"co-m-pane__filter-row"},l.createElement(i.l,{value:u,label:n("gitops-plugin~by name"),onChange:(e,t)=>m(t)})),l.createElement(i.j,{data:p,"aria-label":n("gitops-plugin~Environments table"),Header:Object(o.a)(d),Row:s.a,loaded:!t,virtualize:!0})):l.createElement(r.a,{emptyStateMsg:t}))}},11744:function(e,t,n){"use strict";var l=n(54),a=n(18),i=n(359);const c=[a("pf-m-width-20"),a("pf-m-width-30"),a("pf-m-hidden","pf-m-visible-on-md","pf-m-width-20"),a("pf-m-hidden","pf-m-visible-on-lg","pf-m-width-30")];t.a=e=>()=>[{title:i.a.t("gitops-plugin~Application name"),sortField:"name",transforms:[l.a],props:{className:c[0]}},{title:i.a.t("gitops-plugin~Git repository"),sortField:"gitRepository",transforms:[l.a],props:{className:c[1]}},{title:e?i.a.t("gitops-plugin~Environment status"):i.a.t("gitops-plugin~Environment"),sortField:"environments",transforms:[l.a],props:{className:c[2]}},{title:i.a.t("gitops-plugin~Last deployment"),sortField:"lastDeployment",transforms:[l.a],props:{className:c[3]}}]},11745:function(e,t,n){"use strict";var l=n(0),a=n(241),i=n(516),c=n(164),r=n(130),o=n(18),s=n(7),u=n(14),m=n(5901),p=n(40),d=n(5),f=n(15),v=n(11746);n(11747);const E=[o("pf-m-width-20"),o("pf-m-width-30"),o("pf-m-hidden","pf-m-visible-on-md","pf-m-width-20"),o("pf-m-hidden","pf-m-visible-on-lg","pf-m-width-30")],g=(e,t)=>(n,l,a)=>t===l?[...n,e[a]]:n;t.a=e=>{const{obj:t}=e,{name:n,sync_status:h=[],environments:y,last_deployed:b=[],repo_url:w}=t,{t:$}=Object(s.useTranslation)(),S=h.reduce(g(y,"Synced"),[]),N=h.reduce(g(y,"OutOfSync"),[]),O=h.reduce(g(y,"Unknown"),[]),k=b.reduce((e,t)=>e<t?t:e,""),j=k?y[b.indexOf(k)]:"";return l.createElement(l.Fragment,null,l.createElement(p.k,{className:E[0]},l.createElement(u.Link,{to:`/environments/${t.name}/overview?url=${t.repo_url}`,title:n},n)),l.createElement(p.k,{className:o(E[1])},l.createElement(d.z,{href:w,additionalClassName:"co-break-all"},l.createElement("span",{style:{marginRight:"var(--pf-v5-global--spacer--xs)"}},Object(m.a)(w,12,$)),l.createElement("span",{style:{marginRight:"var(--pf-v5-global--spacer--xs)"}},w))),l.createElement(p.k,{className:o(E[2],"pf-v5-u-text-nowrap")},h.length>0?l.createElement(a.a,{className:"gop-gitops-syncStatus"},l.createElement(v.a,{tooltip:S.map(e=>l.createElement(i.a,{className:"gop-gitops-tooltip-text",hasGutter:!0,key:`${n}-${e}`},l.createElement(c.a,null,l.createElement(f.X,null)),l.createElement(c.a,{isFilled:!0},e),l.createElement(c.a,null,$("gitops-plugin~Synced")))),count:S.length,icon:"check"}),l.createElement(v.a,{tooltip:N.map(e=>l.createElement(i.a,{className:"gop-gitops-tooltip-text",hasGutter:!0,key:`${n}-${e}`},l.createElement(c.a,null,l.createElement(f.tc,null)),l.createElement(c.a,{isFilled:!0},e),l.createElement(c.a,null,$("gitops-plugin~OutOfSync")))),count:N.length,icon:"exclamation"}),l.createElement(v.a,{tooltip:O.map(e=>l.createElement(i.a,{className:"gop-gitops-tooltip-text",hasGutter:!0,key:`${n}-${e}`},l.createElement(c.a,null,l.createElement(f.W,null)),l.createElement(c.a,{isFilled:!0},e),l.createElement(c.a,null,$("gitops-plugin~Unknown")))),count:O.length,icon:"unknown"})):l.createElement("span",null,y.join(", "))),l.createElement(p.k,{className:E[3]},""!==k?l.createElement(a.a,null,l.createElement(r.a,{className:"gop-gitops-lastDeploymentTime",spacer:{default:"spacerXs"}},l.createElement("span",null,l.createElement(d.xb,{timestamp:k}))),l.createElement(r.a,null,"(",j,")")):l.createElement("span",null,"-")))}},11746:function(e,t,n){"use strict";var l=n(0),a=n(241),i=n(130),c=n(88),r=n(15);t.a=({tooltip:e,count:t,icon:n})=>{let o;return o="check"===n?l.createElement(r.X,null):"exclamation"===n?l.createElement(r.tc,null):l.createElement(r.W,null),l.createElement(a.a,{flex:{default:"flex_1"}},l.createElement(i.a,null,t>0?l.createElement(c.a,{isContentLeftAligned:!0,content:l.createElement("div",null,e)},l.createElement("div",null,o," ",t)):l.createElement("div",null,o," ",t)))}},11747:function(e,t,n){},11748:function(e,t,n){},11749:function(e,t,n){},5508:function(e,t,n){"use strict";n.r(t);var l=n(0),a=n(137),i=n(7),c=n(5),r=n(108),o=n(10),s=n(15),u=n(11743),m=n(6442),p=n(7551),d=(n(11749),function(e,t,n,l){return new(n||(n=Promise))((function(a,i){function c(e){try{o(l.next(e))}catch(e){i(e)}}function r(e){try{o(l.throw(e))}catch(e){i(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}o((l=l.apply(e,t||[])).next())}))});const f={isList:!0,kind:o.ProjectModel.kind,optional:!0};t.default=()=>{const[e,t]=l.useState(null),[n,o]=l.useState(null),[v,E,g]=Object(r.a)(f),[h,y]=Object(p.a)(),b=Object(m.f)(h,y),{t:w}=Object(i.useTranslation)();return l.useEffect(()=>{let e=!1;return d(void 0,void 0,void 0,(function*(){if(E){const n=!g&&Object(m.e)(v)||[],[l,a]=yield Object(m.a)(b,n,w);if(e)return;t(l),o(a)}})),()=>{e=!0}},[b,v,g,E,w]),l.createElement(l.Fragment,null,l.createElement(a.b,null,l.createElement("title",null,w("gitops-plugin~Environments"))),l.createElement(c.Z,{title:w("gitops-plugin~Environments"),badge:l.createElement(s.H,null)}),e||n?l.createElement(l.Fragment,null,l.createElement(c.Z,{className:"co-catalog-page__description"},w("gitops-plugin~Select an application to view the environment it's deployed in.")),l.createElement(u.a,{appGroups:e,emptyStateMsg:n})):l.createElement(c.S,null))}},5778:function(e,t,n){"use strict";var l=n(0);t.a=({style:e,topology:t})=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:t?"0 20 650 587":"0 20 650 450",fill:"currentColor","aria-hidden":"true",role:"img",width:"1em",height:"1em",style:e},l.createElement("path",{d:"m395.9 484.2-126.9-61c-12.5-6-17.9-21.2-11.8-33.8l61-126.9c6-12.5 21.2-17.9 33.8-11.8 17.2 8.3 27.1 13 27.1 13l-.1-109.2 16.7-.1.1 117.1s57.4 24.2 83.1 40.1c3.7 2.3 10.2 6.8 12.9 14.4 2.1 6.1 2 13.1-1 19.3l-61 126.9c-6.2 12.7-21.4 18.1-33.9 12z",style:{fill:"#fff"}}),l.createElement("path",{d:"M622.7 149.8c-4.1-4.1-9.6-4-9.6-4s-117.2 6.6-177.9 8c-13.3.3-26.5.6-39.6.7v117.2c-5.5-2.6-11.1-5.3-16.6-7.9 0-36.4-.1-109.2-.1-109.2-29 .4-89.2-2.2-89.2-2.2s-141.4-7.1-156.8-8.5c-9.8-.6-22.5-2.1-39 1.5-8.7 1.8-33.5 7.4-53.8 26.9C-4.9 212.4 6.6 276.2 8 285.8c1.7 11.7 6.9 44.2 31.7 72.5 45.8 56.1 144.4 54.8 144.4 54.8s12.1 28.9 30.6 55.5c25 33.1 50.7 58.9 75.7 62 63 0 188.9-.1 188.9-.1s12 .1 28.3-10.3c14-8.5 26.5-23.4 26.5-23.4S547 483 565 451.5c5.5-9.7 10.1-19.1 14.1-28 0 0 55.2-117.1 55.2-231.1-1.1-34.5-9.6-40.6-11.6-42.6zM125.6 353.9c-25.9-8.5-36.9-18.7-36.9-18.7S69.6 321.8 60 295.4c-16.5-44.2-1.4-71.2-1.4-71.2s8.4-22.5 38.5-30c13.8-3.7 31-3.1 31-3.1s7.1 59.4 15.7 94.2c7.2 29.2 24.8 77.7 24.8 77.7s-26.1-3.1-43-9.1zm300.3 107.6s-6.1 14.5-19.6 15.4c-5.8.4-10.3-1.2-10.3-1.2s-.3-.1-5.3-2.1l-112.9-55s-10.9-5.7-12.8-15.6c-2.2-8.1 2.7-18.1 2.7-18.1L322 273s4.8-9.7 12.2-13c.6-.3 2.3-1 4.5-1.5 8.1-2.1 18 2.8 18 2.8L467.4 315s12.6 5.7 15.3 16.2c1.9 7.4-.5 14-1.8 17.2-6.3 15.4-55 113.1-55 113.1z",style:{fill:"currentColor"}}),l.createElement("path",{d:"M326.8 380.1c-8.2.1-15.4 5.8-17.3 13.8-1.9 8 2 16.3 9.1 20 7.7 4 17.5 1.8 22.7-5.4 5.1-7.1 4.3-16.9-1.8-23.1l24-49.1c1.5.1 3.7.2 6.2-.5 4.1-.9 7.1-3.6 7.1-3.6 4.2 1.8 8.6 3.8 13.2 6.1 4.8 2.4 9.3 4.9 13.4 7.3.9.5 1.8 1.1 2.8 1.9 1.6 1.3 3.4 3.1 4.7 5.5 1.9 5.5-1.9 14.9-1.9 14.9-2.3 7.6-18.4 40.6-18.4 40.6-8.1-.2-15.3 5-17.7 12.5-2.6 8.1 1.1 17.3 8.9 21.3 7.8 4 17.4 1.7 22.5-5.3 5-6.8 4.6-16.3-1.1-22.6 1.9-3.7 3.7-7.4 5.6-11.3 5-10.4 13.5-30.4 13.5-30.4.9-1.7 5.7-10.3 2.7-21.3-2.5-11.4-12.6-16.7-12.6-16.7-12.2-7.9-29.2-15.2-29.2-15.2s0-4.1-1.1-7.1c-1.1-3.1-2.8-5.1-3.9-6.3 4.7-9.7 9.4-19.3 14.1-29-4.1-2-8.1-4-12.2-6.1-4.8 9.8-9.7 19.7-14.5 29.5-6.7-.1-12.9 3.5-16.1 9.4-3.4 6.3-2.7 14.1 1.9 19.8l-24.6 50.4z",style:{fill:"currentColor"}}))},5901:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var l=n(0),a=n(5932),i=n(4373),c=n(5931),r=n(5933),o=n(5591),s=n(5902),u=n(5778),m=n(5649);const p=(e,t,n,p,d)=>{if(p&&e)return d?l.createElement("image",{xlinkHref:d,width:t,height:t}):l.createElement(s.a,{style:{fontSize:t}});switch(Object(m.c)(e)){case o.b.INVALID:return null;case o.b.GITHUB:return l.createElement(c.a,{style:{fontSize:t},title:n("devconsole~Edit source code")});case o.b.BITBUCKET:return l.createElement(a.a,{style:{fontSize:t},title:n("devconsole~Edit source code")});case o.b.GITLAB:return l.createElement(r.a,{style:{fontSize:t},title:n("devconsole~Edit source code")});case o.b.GITEA:return l.createElement(u.a,{style:{fontSize:t},topology:!0});default:return l.createElement(i.a,{style:{fontSize:t},title:n("devconsole~Edit source code")})}}},5902:function(e,t,n){"use strict";var l=n(0);t.a=({style:e})=>l.createElement("svg",{height:"1em",width:"1em",version:"1.1",viewBox:"0 0 47 57",style:e},l.createElement("g",{fillRule:"evenodd",stroke:"none",strokeWidth:"1",fill:"none"},l.createElement("path",{d:"M0.032227,30.88l-0.032227-17.087,23.853-13.793,23.796,13.784-14.691,8.51-9.062-5.109-23.864,13.695z",fill:"#fdb940"}),l.createElement("path",{d:"M0,43.355l23.876,13.622,23.974-13.937v-16.902l-23.974,13.506-23.876-13.506v17.217z",fill:"#525c86"})))},6442:function(e,t,n){"use strict";n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"c",(function(){return v}));var l=n(547),a=n(22),i=n(461),c=n(367),r=n(50),o=n(109),s=function(e,t,n,l){return new(n||(n=Promise))((function(a,i){function c(e){try{o(l.next(e))}catch(e){i(e)}}function r(e){try{o(l.throw(e))}catch(e){i(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}o((l=l.apply(e,t||[])).next())}))};const u=e=>l.a(e.filter(e=>{var t,n;return!!(null===(n=null===(t=e.metadata)||void 0===t?void 0:t.annotations)||void 0===n?void 0:n["app.openshift.io/vcs-uri"])}).map(e=>{var t,n;return null===(n=null===(t=e.metadata)||void 0===t?void 0:t.annotations)||void 0===n?void 0:n["app.openshift.io/vcs-uri"]})),m=(e,t)=>s(void 0,void 0,void 0,(function*(){var n;let l;try{const e="/api/gitops/applications";l=yield Object(o.c)(`${e}?url=${t}`)}catch(n){try{l=yield Object(o.c)(`${e}&url=${t}`)}catch(e){}}return null!==(n=null==l?void 0:l.applications)&&void 0!==n?n:[]})),p=(e,t,n)=>s(void 0,void 0,void 0,(function*(){let l=null,o=null;if(e)if(a.a(t))l=n("gitops-plugin~No GitOps manifest URLs found");else{try{o=i.a(c.a(yield Promise.all(r.a(t,t=>m(e,t)))),["name"])}catch(e){return l=n("gitops-plugin~Error cannot retrieve applications"),[o,l]}a.a(o)&&(l=n("gitops-plugin~No Application groups found"))}return[o,l]})),d=(e,t,n,l)=>s(void 0,void 0,void 0,(function*(){let a;try{a=yield Object(o.c)(`${e}/${n}${l}`)}catch(e){try{a=yield Object(o.c)(`${t}/${n}${l}`)}catch(e){throw e}}return a})),f=(e,t)=>e&&t?`/api/gitops/pipelines?secretNS=${e}&secretName=${t}`:void 0,v=(e,t,n,l)=>t&&n?`/application/${e}?secretNS=${t}&secretName=${n}&url=${l}&app=${e}`:void 0},6877:function(e,t,n){"use strict";var l=n(0),a=n(156),i=n(405),c=n(564),r=n(355),o=n(8379);n(7550);t.a=({emptyStateMsg:e})=>l.createElement(a.a,{variant:a.b.full},l.createElement(i.a,{icon:l.createElement(c.a,{icon:o.a})}),l.createElement(r.a,null,e))},7550:function(e,t,n){},7551:function(e,t,n){"use strict";var l=n(7156),a=n(31),i=n(518);t.a=()=>{var e,t;const{user:n}=Object(a.useSelector)(i.e),c=l.a(null!==(t=null===(e=null==n?void 0:n.metadata)||void 0===e?void 0:e.name)&&void 0!==t?t:"",/[^a-zA-Z0-9-]/g,"");return c?[`pipelines-${c}-github`,c+"-github-token"]:[]}}}]);
//# sourceMappingURL=gitops-plugin-list-page-chunk-bbc01c3648090413c62e.min.js.map
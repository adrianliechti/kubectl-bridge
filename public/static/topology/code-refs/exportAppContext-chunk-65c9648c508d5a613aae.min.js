(window.webpackJsonp=window.webpackJsonp||[]).push([[300],{4479:function(t,o,e){"use strict";e.r(o),e.d(o,"ExportAppContext",(function(){return p})),e.d(o,"ExportAppContextProvider",(function(){return b})),e.d(o,"useExportAppFormToast",(function(){return m}));var a=e(0),s=e(80),n=e(22),d=e(499),r=e(7),c=e(91),i=e(108),l=e(15),u=e(2242);const p=a.createContext({}),b=p.Provider,m=()=>{const t=Object(l.df)(),{t:o}=Object(r.useTranslation)(),[e,p]=a.useState({}),[b,m,f]=Object(l.ef)(l.nc+".exportApp",{},!0),v=a.useMemo(()=>{if(!f||n.a(b))return{};return Object.keys(b).reduce((t,o)=>{const{groupVersionKind:e,name:a,namespace:s}=b[o];return t[o]={groupVersionKind:e||Object(c.b)(u.ExportModel),name:a,namespace:s,namespaced:!0,isList:!1,optional:!0},t},{})},[b,f]),w=Object(i.b)(v),k=a.useCallback(o=>{const a=e[o];a&&(t.removeToast(a.toastId),p(d.a(e,o)))},[e,t]),x=a.useCallback(t=>{f&&m(d.a(b,t))},[b,f,m]);a.useEffect(()=>{if(w){Object.keys(w).forEach(t=>{var o,e;404===(null===(e=null===(o=w[t].loadError)||void 0===o?void 0:o.response)||void 0===e?void 0:e.status)&&(k(t),x(t))})}},[k,x,w]);const E=a.useCallback((e,a,n)=>{const d=t.addToast({variant:s.b.info,title:o("topology~Export application"),content:o("topology~All the resources are exported successfully from {{namespace}}. Click below to download it.",{namespace:e}),dismissible:!0,actions:[{dismiss:!0,label:o("topology~Download"),callback:()=>{k(n),x(n),window.open(a,"_blank")},component:"a",dataTest:"download-export"}],onClose:()=>x(n)});p(t=>Object.assign(Object.assign({},t),{[n]:{toastId:d}}))},[k,x,o,t]);a.useEffect(()=>{if(f){Object.keys(b).forEach(t=>{var o,a,s;const n=w[t].loaded&&!w[t].loadError&&w[t].data&&b[t].uid===w[t].data.metadata.uid;n&&(null===(o=w[t].data.status)||void 0===o?void 0:o.completed)&&(null===(a=w[t].data.status)||void 0===a?void 0:a.route)&&!e[t]?E(w[t].data.metadata.namespace,w[t].data.status.route,t):n&&!(null===(s=w[t].data.status)||void 0===s?void 0:s.completed)&&e[t]&&k(t)})}},[w,b,f,E,e,k])}}}]);
//# sourceMappingURL=exportAppContext-chunk-65c9648c508d5a613aae.min.js.map
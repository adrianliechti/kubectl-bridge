(window.webpackJsonp=window.webpackJsonp||[]).push([[180],{5510:function(e,t,i){"use strict";i.r(t),i.d(t,"InsightsPopup",(function(){return f}));var n=i(0),s=i(270),l=i(2232),a=i(1128),r=i(967),o=i(406),c=i(4397),u=i(7),d=i(765),m=i(5),p=i(947),g=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i};const h=({x:e,y:t,datum:i})=>{const s=p.h[i.id];return n.createElement(s,{x:e,y:t-5,fill:p.e[i.id]})},b=e=>{var{clusterID:t}=e,i=g(e,["clusterID"]);return n.createElement(m.z,{href:`https://console.redhat.com/openshift/insights/advisor/clusters/${t}?total_risk=${p.i[i.datum.id]+1}`},n.createElement(s.a,Object.assign({},i,{style:{fill:"var(--pf-v5-global--link--Color)"}})))},v=e=>n.createElement(s.a,Object.assign({},e,{style:{fill:"var(--pf-v5-chart-color-black-500)"}})),f=({responses:e,k8sResult:t})=>{var i,g,f,E,y,O,x;const[{response:j,error:w},{response:I,error:k},{response:D}]=e,{t:T}=Object(u.useTranslation)(),z=Object(p.g)(j),C=Object(p.f)(I),N=(null===(f=null===(g=null===(i=t)||void 0===i?void 0:i.data)||void 0===g?void 0:g.spec)||void 0===f?void 0:f.clusterID)||"",$=Object.entries(z).sort(([e],[t])=>p.i[t]-p.i[e]),A=Object.values(z).reduce((e,t)=>e+t,0),P=Object(p.d)(z)||!j||!I,S=Object(p.c)(z)||w||k,V=!!C.Disabled,F=Object(m.Qb)(m.Lb.usingInsights),G={low:"insights-plugin~low",moderate:"insights-plugin~moderate",important:"insights-plugin~important",critical:"insights-plugin~critical"},J=1e3*parseInt((null===(x=null===(O=null===(y=null===(E=null==D?void 0:D.data)||void 0===E?void 0:E.result)||void 0===y?void 0:y[0])||void 0===O?void 0:O.value)||void 0===x?void 0:x[1])||"0",10);return Object(p.b)(C)?n.createElement(d.ErrorState,null):n.createElement(r.a,{hasGutter:!0},n.createElement(o.a,null,T("insights-plugin~Last refresh"),": ",n.createElement(m.xb,{timestamp:J,simple:!0})),n.createElement(o.a,{className:"text-muted"},T("insights-plugin~Insights Advisor identifies and prioritizes risks to security, performance, availability, and stability of your clusters.")),S?n.createElement(o.a,{className:"text-muted"},T("insights-plugin~Temporarily unavailable.")):V?n.createElement(o.a,{className:"text-muted"},T("insights-plugin~Disabled.")):P?n.createElement(o.a,{className:"text-muted"},T("insights-plugin~Waiting for results.")):n.createElement(o.a,null,n.createElement("div",null,n.createElement(l.a,{innerRadius:67,ariaTitle:"Insights recommendations chart",ariaDesc:"Donut chart that shows Insights recommendations divided by severities",data:$.map(([e,t])=>({x:""+c.a(T(G[e])),y:t})),title:""+A,subTitle:T("insights-plugin~Total issue",{count:A}),legendOrientation:"vertical",width:320,height:180,radius:80,colorScale:p.a,subTitleComponent:n.createElement(v,null),constrainToVisibleArea:!0,legendComponent:n.createElement(a.a,{title:T("insights-plugin~Total risk"),titleComponent:n.createElement(s.a,{dx:13,dy:-10,style:{fontWeight:"bold",fontSize:"14px"}}),data:$.map(([e,t])=>({name:`${t} ${c.a(T(G[e]))}`,id:e})),dataComponent:n.createElement(h,null),labelComponent:n.createElement(b,{clusterID:N}),x:-10,rowGutter:-3}),padding:{bottom:0,left:135,right:10,top:0},labels:({datum:e})=>`${e.x}: ${e.y}`,padAngle:0})),N?n.createElement(n.Fragment,null,n.createElement("h6",{className:"pf-v5-c-title pf-m-md"},T("insights-plugin~Fixable issues")),n.createElement("div",null,n.createElement(m.z,{href:"https://console.redhat.com/openshift/insights/advisor/clusters/"+N,text:T("insights-plugin~View all recommendations in Insights Advisor")}))):n.createElement("div",null,n.createElement(m.z,{href:"https://console.redhat.com/openshift/insights/advisor",text:T("insights-plugin~View more in Insights Advisor")}))),(P||V||S)&&!Object(m.hc)()&&n.createElement(m.z,{href:F,text:T("insights-plugin~More about Insights")}))};f.displayName="InsightsPopup"}}]);
//# sourceMappingURL=insights-plugin-chunk-2197994bc288aaf7fab5.min.js.map
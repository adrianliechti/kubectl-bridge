(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{5676:function(e,t,n){"use strict";n.d(t,"w",(function(){return a})),n.d(t,"m",(function(){return l})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"x",(function(){return s})),n.d(t,"u",(function(){return c})),n.d(t,"q",(function(){return d})),n.d(t,"r",(function(){return u})),n.d(t,"p",(function(){return p})),n.d(t,"o",(function(){return m})),n.d(t,"C",(function(){return g})),n.d(t,"B",(function(){return v})),n.d(t,"k",(function(){return f})),n.d(t,"v",(function(){return b})),n.d(t,"l",(function(){return h})),n.d(t,"i",(function(){return E})),n.d(t,"j",(function(){return y})),n.d(t,"A",(function(){return k})),n.d(t,"t",(function(){return O})),n.d(t,"s",(function(){return S})),n.d(t,"y",(function(){return T})),n.d(t,"n",(function(){return w})),n.d(t,"z",(function(){return I})),n.d(t,"a",(function(){return j})),n.d(t,"g",(function(){return x})),n.d(t,"h",(function(){return C})),n.d(t,"e",(function(){return N})),n.d(t,"f",(function(){return _}));const a=25,l=5,i=9,r=9,o=4,s=120,c=30,d=30,u=20,p=10,m=15,g=10,v=25,f=32,b=12,h=30,E=40,y=35,k=40,O=300,S=45;var T,w,I,j;!function(e){e.TASK_NODE="task",e.CUSTOM_TASK_NODE="custom-task",e.SPACER_NODE="spacer",e.LOADING_NODE="loading",e.TASK_LIST_NODE="task-list",e.BUILDER_NODE="builder",e.INVALID_TASK_LIST_NODE="invalid-task-list",e.FINALLY_NODE="finally-node",e.BUILDER_FINALLY_NODE="builder-finally-node",e.FINALLY_GROUP="finally-group",e.EDGE="edge"}(T||(T={})),function(e){e.INTEGRAL_SHAPE="integral-shape",e.STRAIGHT="line"}(w||(w={})),function(e){e.DAGRE_BUILDER="dagre-builder",e.DAGRE_BUILDER_SPACED="dagre-builder-spaced",e.DAGRE_VIEWER="dagre-viewer",e.DAGRE_VIEWER_SPACED="dagre-viewer-spaced"}(I||(I={})),function(e){e.BEFORE="in-run-after",e.AFTER="has-run-after",e.PARALLEL="shared-parallel"}(j||(j={}));const R={nodesep:20,ranksep:a,edgesep:50,ranker:"longest-path",rankdir:"LR",marginx:20,marginy:20},x=Object.assign({},R),C=Object.assign(Object.assign({},x),{ranksep:a+v}),N=Object.assign(Object.assign({},R),{ranksep:a+2*i,nodesep:20+i,marginx:R.marginx+2*i,marginy:R.marginy+2*i}),_=Object.assign(Object.assign({},N),{ranksep:a+v+2*i});var D;!function(e){e.CUSTOM_TASK="CustomTask"}(D||(D={}))},5730:function(e,t,n){"use strict";var a=n(0),l=n(6024),i=n(5585);t.a=({id:e,dx:t=0,dy:n=1,stdDeviation:r=2,floodColor:o=l.global_palette_black_1000.value,floodOpacity:s=.2})=>window.navigator.userAgent.includes("Edge")?a.createElement(i.SVGDefs,{id:e},a.createElement("filter",{id:e,x:`-${12.5*r}%`,y:`-${12.5*r}%`,width:100+25*r+"%",height:100+25*r+"%"},a.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:r}),a.createElement("feOffset",{dx:t,dy:n,result:"offsetblur"}),a.createElement("feFlood",{floodColor:o,floodOpacity:s}),a.createElement("feComposite",{in2:"offsetblur",operator:"in"}),a.createElement("feMerge",null,a.createElement("feMergeNode",null),a.createElement("feMergeNode",{in:"SourceGraphic"})))):a.createElement(i.SVGDefs,{id:e},a.createElement("filter",{id:e,x:`-${12.5*r}%`,y:`-${12.5*r}%`,width:100+25*r+"%",height:100+25*r+"%"},a.createElement("feDropShadow",{dx:t,dy:n,stdDeviation:r,floodColor:o,floodOpacity:s})))},5774:function(e,t,n){"use strict";var a=n(0),l=n(5585),i=n(1401),r=n(5730);const o="SvgTypedIconDropShadowFilterId";t.a=a.forwardRef(({className:e,x:t,y:n,width:s,height:c,iconClass:d,icon:u,padding:p=4},m)=>{const[g,v]=Object(l.useSize)([]);let f=0,b=0;return g&&({width:f,height:b}=g),a.createElement("g",{className:e},a.createElement(r.a,{id:o}),a.createElement("circle",{key:"circle-"+o,ref:m,filter:Object(l.createSvgIdUrl)(o),cx:t-f/2,cy:n+b/2,r:f/2+p}),u?a.createElement("g",{ref:v},a.createElement("foreignObject",{key:"image-"+o,x:t-f+4,y:n,width:s,height:c},u)):a.createElement("g",{ref:v},a.createElement("image",{key:"image-"+o,x:t-f,y:n,width:s,height:c,xlinkHref:Object(i.d)(d)||d,filter:Object(l.createSvgIdUrl)(o)})))})},5778:function(e,t,n){"use strict";var a=n(0);t.a=({style:e,topology:t})=>a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:t?"0 20 650 587":"0 20 650 450",fill:"currentColor","aria-hidden":"true",role:"img",width:"1em",height:"1em",style:e},a.createElement("path",{d:"m395.9 484.2-126.9-61c-12.5-6-17.9-21.2-11.8-33.8l61-126.9c6-12.5 21.2-17.9 33.8-11.8 17.2 8.3 27.1 13 27.1 13l-.1-109.2 16.7-.1.1 117.1s57.4 24.2 83.1 40.1c3.7 2.3 10.2 6.8 12.9 14.4 2.1 6.1 2 13.1-1 19.3l-61 126.9c-6.2 12.7-21.4 18.1-33.9 12z",style:{fill:"#fff"}}),a.createElement("path",{d:"M622.7 149.8c-4.1-4.1-9.6-4-9.6-4s-117.2 6.6-177.9 8c-13.3.3-26.5.6-39.6.7v117.2c-5.5-2.6-11.1-5.3-16.6-7.9 0-36.4-.1-109.2-.1-109.2-29 .4-89.2-2.2-89.2-2.2s-141.4-7.1-156.8-8.5c-9.8-.6-22.5-2.1-39 1.5-8.7 1.8-33.5 7.4-53.8 26.9C-4.9 212.4 6.6 276.2 8 285.8c1.7 11.7 6.9 44.2 31.7 72.5 45.8 56.1 144.4 54.8 144.4 54.8s12.1 28.9 30.6 55.5c25 33.1 50.7 58.9 75.7 62 63 0 188.9-.1 188.9-.1s12 .1 28.3-10.3c14-8.5 26.5-23.4 26.5-23.4S547 483 565 451.5c5.5-9.7 10.1-19.1 14.1-28 0 0 55.2-117.1 55.2-231.1-1.1-34.5-9.6-40.6-11.6-42.6zM125.6 353.9c-25.9-8.5-36.9-18.7-36.9-18.7S69.6 321.8 60 295.4c-16.5-44.2-1.4-71.2-1.4-71.2s8.4-22.5 38.5-30c13.8-3.7 31-3.1 31-3.1s7.1 59.4 15.7 94.2c7.2 29.2 24.8 77.7 24.8 77.7s-26.1-3.1-43-9.1zm300.3 107.6s-6.1 14.5-19.6 15.4c-5.8.4-10.3-1.2-10.3-1.2s-.3-.1-5.3-2.1l-112.9-55s-10.9-5.7-12.8-15.6c-2.2-8.1 2.7-18.1 2.7-18.1L322 273s4.8-9.7 12.2-13c.6-.3 2.3-1 4.5-1.5 8.1-2.1 18 2.8 18 2.8L467.4 315s12.6 5.7 15.3 16.2c1.9 7.4-.5 14-1.8 17.2-6.3 15.4-55 113.1-55 113.1z",style:{fill:"currentColor"}}),a.createElement("path",{d:"M326.8 380.1c-8.2.1-15.4 5.8-17.3 13.8-1.9 8 2 16.3 9.1 20 7.7 4 17.5 1.8 22.7-5.4 5.1-7.1 4.3-16.9-1.8-23.1l24-49.1c1.5.1 3.7.2 6.2-.5 4.1-.9 7.1-3.6 7.1-3.6 4.2 1.8 8.6 3.8 13.2 6.1 4.8 2.4 9.3 4.9 13.4 7.3.9.5 1.8 1.1 2.8 1.9 1.6 1.3 3.4 3.1 4.7 5.5 1.9 5.5-1.9 14.9-1.9 14.9-2.3 7.6-18.4 40.6-18.4 40.6-8.1-.2-15.3 5-17.7 12.5-2.6 8.1 1.1 17.3 8.9 21.3 7.8 4 17.4 1.7 22.5-5.3 5-6.8 4.6-16.3-1.1-22.6 1.9-3.7 3.7-7.4 5.6-11.3 5-10.4 13.5-30.4 13.5-30.4.9-1.7 5.7-10.3 2.7-21.3-2.5-11.4-12.6-16.7-12.6-16.7-12.2-7.9-29.2-15.2-29.2-15.2s0-4.1-1.1-7.1c-1.1-3.1-2.8-5.1-3.9-6.3 4.7-9.7 9.4-19.3 14.1-29-4.1-2-8.1-4-12.2-6.1-4.8 9.8-9.7 19.7-14.5 29.5-6.7-.1-12.9 3.5-16.1 9.4-3.4 6.3-2.7 14.1 1.9 19.8l-24.6 50.4z",style:{fill:"currentColor"}}))},5834:function(e,t,n){"use strict";n.d(t,"d",(function(){return E})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return O})),n.d(t,"a",(function(){return S})),n.d(t,"m",(function(){return w})),n.d(t,"o",(function(){return I})),n.d(t,"e",(function(){return j})),n.d(t,"f",(function(){return R})),n.d(t,"g",(function(){return x})),n.d(t,"i",(function(){return C})),n.d(t,"h",(function(){return L})),n.d(t,"n",(function(){return B})),n.d(t,"j",(function(){return F})),n.d(t,"l",(function(){return G})),n.d(t,"k",(function(){return U}));var a=n(5654),l=n(5585),i=n(367),r=n(547),o=n(926),s=n(4425),c=n(359),d=n(5595),u=n(5635),p=n(5623),m=n(5676),g=n(6284);const v=(e,t,n)=>(a,l)=>Object.assign(Object.assign({id:a,label:(null==l?void 0:l.label)||a,runAfterTasks:(null==l?void 0:l.runAfterTasks)||[]},l&&{data:l}),{height:null!=n?n:m.u,width:null!=t?t:m.x,type:e}),f=v(m.y.TASK_NODE),b=v(m.y.CUSTOM_TASK_NODE),h=v(m.y.SPACER_NODE,0),E=v(m.y.TASK_LIST_NODE),y=v(m.y.INVALID_TASK_LIST_NODE),k=v(m.y.BUILDER_NODE),O=v(m.y.LOADING_NODE),S=(e,t)=>v(m.y.BUILDER_FINALLY_NODE,t,e),T=(e,t)=>v(e,t.width,t.height)(t.id,t),w=e=>{const t=e.reduce((e,t,n)=>{const{data:{task:{runAfter:a}}}=t;if(a&&a.length>1){const l=[...a].sort((e,t)=>e.localeCompare(t)).reduce((e,t)=>`${e}|${t}`);Array.isArray(e[l])||(e[l]=[]),e[l].push({node:t,runAfter:a,atIndex:n})}return e},{}),n=Object.values(t).filter(e=>e.length>1);if(0===n.length)return e;const a=[],l={};return n.forEach(e=>{const{runAfter:t}=e[0],n=e.map(e=>e.node.id),i="parallel-"+n.join("-");n.forEach(e=>{Array.isArray(l[e])||(l[e]=[]),l[e].push(i)}),a.push(h(i,{task:{name:i,runAfter:t}}))}),e.forEach(e=>{const t=l[e.id];if(t&&t.length>0){const{data:{task:n},type:l}=e,i=(e=>{switch(e){case m.y.TASK_LIST_NODE:return E;case m.y.BUILDER_NODE:return k;case m.y.SPACER_NODE:return h;case m.y.LOADING_NODE:return O;case m.y.INVALID_TASK_LIST_NODE:return y;case m.y.CUSTOM_TASK_NODE:return b;case m.y.TASK_NODE:default:return f}})(l);a.push(i(e.id,Object.assign(Object.assign({},e.data),{task:Object.assign(Object.assign({},n),{runAfter:t})})))}else a.push(e)}),a},I=(e,t,n,a,l)=>e.map((e,i)=>k(e.name,{error:a(i),task:e,selected:l.includes(e.name),onNodeSelection:()=>{n(e)},onAddNode:n=>{t(e,n)}})),j=e=>i.a(e.map(e=>{const{data:{task:{name:t,runAfter:n=[]}}}=e;return 0===n.length?null:n.map(e=>({id:`${e}~to~${t}`,type:"edge",source:e,target:t}))})).filter(e=>!!e),R=(e,t)=>e*m.u+(e-1)*m.r+(t?0:m.u+m.r)+2*m.q,x=e=>{const t=e>0?m.B:0;return m.x+2*m.q+t},C=e=>{const t=r.a(e.reduce((e,{data:{task:{runAfter:t}}})=>t?e.concat(t):e,[]));return o.a(e.map(e=>e.id),t)},N=(e,t="0.8rem RedHatText")=>{if(!e||0===e.length)return 0;const n=document.createElement("canvas").getContext("2d");if(!n)return e.length;n.font=t;const{width:a}=n.measureText(e);return a},_=e=>{const t=/(?:(?:\$\(tasks.))([a-z0-9_-]+)(?:.results+)(?:[.^\w]+\))/g;let n;const a=[];for(;null!==(n=t.exec(e));)n.index===t.lastIndex&&t.lastIndex++,n&&(a.includes(n[1])||a.push(n[1]));return a},D=e=>Object.assign(Object.assign({},e),{height:1,width:1}),P=e=>{var t;if(e.when)return(e=>{switch(e){case l.RunStatus.Succeeded:case l.RunStatus.Failed:return l.WhenStatus.Met;case l.RunStatus.Skipped:case l.RunStatus["In Progress"]:case l.RunStatus.Idle:return l.WhenStatus.Unmet;default:return}})(null===(t=e.status)||void 0===t?void 0:t.reason)},L=(e,t={apiVersion:"",metadata:{},kind:"PipelineRun",spec:{}},n)=>{var a,o;if(!e)return null;const c=i.a(Object(p.p)(e,t,n)),d=new g.a;null==c||c.forEach(e=>{d.addEdges(e.name,e,"",e.runAfter||[])});const u=[],v={};d.topologicalSort(e=>{v[e.level]?v[e.level]=Math.max(v[e.level],N(e.name)):v[e.level]=N(e.name)}),d.topologicalSort(n=>{var a,i,o,c,p;const g=[],f=n.data,b=[];f.params&&f.params.forEach(e=>{Array.isArray(e.value)?e.value.forEach(e=>{b.push(..._(e))}):b.push(..._(e.value))}),(null==f?void 0:f.when)&&f.when.forEach(({input:e,values:t})=>{t&&(b.push(..._(e)),t.forEach(e=>{b.push(..._(e))}))});const h=r.a([...n.dependancyNames]);if(h&&h.forEach(e=>{var t;const a=d.vertices.get(e);(a.level-n.level<=1||(null===(t=n.data.runAfter)||void 0===t?void 0:t.includes(a.name)))&&g.push(e)}),b.length>0){const e=b.map(e=>d.vertices.get(e)),t=s.a(e,e=>e.level);e.filter(e=>e.level===t.level).forEach(e=>{n.dependancyNames.includes(e.name)&&(e.level-n.level<=1||0===n.dependancyNames.length)&&g.push(e.name)})}const E=(null===(a=Object.keys(t.spec))||void 0===a?void 0:a.length)>0?m.i:0,y=null===(o=null===(i=null==t?void 0:t.status)||void 0===i?void 0:i.skippedTasks)||void 0===o?void 0:o.some(e=>e.name===f.name);var k;u.push(T((k=null===(c=null==f?void 0:f.taskRef)||void 0===c?void 0:c.kind)&&"Task"!==k&&"ClusterTask"!==k?m.y.CUSTOM_TASK_NODE:m.y.TASK_NODE,{id:n.name,label:n.name,width:v[n.level]+2*m.v+m.l+E,runAfterTasks:g,status:y?l.RunStatus.Skipped:null===(p=n.data.status)||void 0===p?void 0:p.reason,whenStatus:P(n.data),task:n.data,pipeline:e,pipelineRun:t}))});const f=Object(p.c)(e,t,n,!0),b=(null===(a=f.sort((e,t)=>t.name.length-e.name.length)[0])||void 0===a?void 0:a.name)||"",h=f.map(n=>{var a,i,r;const o=null===(i=null===(a=null==t?void 0:t.status)||void 0===a?void 0:a.skippedTasks)||void 0===i?void 0:i.some(e=>e.name===n.name);return T(m.y.FINALLY_NODE,{id:n.name,label:n.name,width:N(b)+2*m.v+2*m.j,height:m.k,runAfterTasks:[],status:o?l.RunStatus.Skipped:null===(r=n.status)||void 0===r?void 0:r.reason,whenStatus:P(n),task:n,pipeline:e,pipelineRun:t})}),E=h.length?[{id:"finally-group-id",type:m.y.FINALLY_GROUP,children:h.map(e=>e.id),group:!0,style:{padding:m.j}}]:[],y=Object(l.getSpacerNodes)([...u,...h],m.y.SPACER_NODE,[m.y.FINALLY_NODE]).map(D),k=Object(l.getEdgesFromNodes)([...u,...y,...h],m.y.SPACER_NODE,m.y.EDGE,m.y.EDGE,[m.y.FINALLY_NODE],m.y.EDGE);return{graph:{id:((null===(o=null==t?void 0:t.metadata)||void 0===o?void 0:o.name)||e.metadata.name)+"-graph",type:l.ModelKind.graph,layout:m.z.DAGRE_VIEWER,scaleExtent:[.5,1]},nodes:[...u,...y,...h,...E],edges:k}},A=e=>{var t;return(null===(t=null==e?void 0:e.when)||void 0===t?void 0:t.length)>0},B=e=>e.some(e=>A(e.data.task)),F=e=>{switch(e){case m.z.DAGRE_BUILDER:return m.e;case m.z.DAGRE_VIEWER:return m.g;case m.z.DAGRE_VIEWER_SPACED:return m.h;case m.z.DAGRE_BUILDER_SPACED:return m.f;default:return null}},G=(e,t,n)=>{let l,i;switch(l=t?e===d.a.Failed?a.chart_color_green_400.value:Object(u.f)(e).pftoken.value:n?"var(--pf-v5-global--BackgroundColor--light-100)":"var(--pf-v5-global--BackgroundColor--200)",e){case d.a.Succeeded:case d.a.Failed:i=c.a.t("pipelines-plugin~When expression was met");break;case d.a.Skipped:i=c.a.t("pipelines-plugin~When expression was not met");break;default:i=c.a.t("pipelines-plugin~When expression")}return{tooltipContent:i,diamondColor:l}},U=e=>{switch(e){case d.a.Succeeded:case d.a.Failed:return c.a.t("pipelines-plugin~When expression was met");case d.a.Skipped:return c.a.t("pipelines-plugin~When expression was not met");default:return c.a.t("pipelines-plugin~When expression")}}},5885:function(e,t,n){},5925:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),l=n(5585),i=n(18),r=n.n(i),o=n(16),s=n(8);n(5885);const c=a.forwardRef(({kind:e,x:t,y:n,leftJustified:i},c)=>{const{kindAbbr:d,kindStr:u,kindColor:p}=function(e){const t=Object(s.vb)(e),n=Object(o.a)(t,"kind",e),a=Object(o.a)(t,"color",void 0);return{kindStr:n,kindAbbr:t&&t.abbr||Object(s.ub)(n),kindColor:a}}(e),[m,g]=Object(l.useSize)([]);let v=null,f=0,b=0,h=0,E=0;return m&&(({height:E,width:h}=m),f=E/2,b=E/14,E+=2*b,v=a.createElement("rect",{fill:p,ref:c,x:t-(i?0:f+h/2),width:m.width+2*f,y:n-(i?0:b+m.height/2),height:E,rx:E/2,ry:E/2})),a.createElement("g",{className:r()("odc-resource-icon",{["odc-resource-icon-"+u.toLowerCase()]:!p}),"data-test":"icon "+u.toLowerCase()},v,a.createElement("title",null,u),a.createElement("text",{ref:g,x:t+(i?f+h/2:0),y:n+(i?(b+E)/2:0),textAnchor:"middle",dy:"0.35em"},d))})},5998:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(0),l=n(88),i=n(5585),r=n(18),o=n(16),s=n(14),c=n(5),d=n(8),u=n(206),p=n(6066),m=n(5586),g=n(5595),v=n(5635),f=n(5588),b=n(5676),h=n(6283),E=n(6068),y=n(6069),k=n(6050);n(6287);const O=({pipelineRunName:e,task:t,namespace:n,pipelineRunStatus:l,disableTooltip:i,selected:r,isSkipped:o,width:s,height:p,isFinallyTask:v})=>{var b,h;const E=Object(u.a)(f.e),y=t.status||{duration:"",reason:g.a.Idle};l!==g.a.Failed&&l!==g.a.Cancelled||(null===(b=t.status)||void 0===b?void 0:b.reason)!==g.a.Idle&&(null===(h=t.status)||void 0===h?void 0:h.reason)!==g.a.Pending||(y.reason=g.a.Cancelled),o&&(y.reason=g.a.Skipped);const k=a.createElement(S,{pipelineRunName:e,name:t.name||"",task:t.taskSpec&&{data:{spec:t.taskSpec}},namespace:n,status:y,isPipelineRun:!!l,disableVisualizationTooltip:i,selected:r,width:s,height:p,isFinallyTask:v,pipelineTask:t});if(i||t.taskSpec)return k;let O;return O=E||t.taskRef.kind!==m.ClusterTaskModel.kind?[{kind:Object(d.Hb)(m.TaskModel),name:t.taskRef.name,namespace:n,prop:"task"}]:[{kind:Object(d.Hb)(m.ClusterTaskModel),name:t.taskRef.name,prop:"task"}],a.createElement(c.C,{resources:O},k)},S=({pipelineRunName:e,namespace:t,task:n,status:d,name:u,isPipelineRun:f,disableVisualizationTooltip:O,selected:S,width:w,height:I,isFinallyTask:j,pipelineTask:R})=>{var x,C,N,_;const D=((null===(C=null===(x=null==n?void 0:n.data)||void 0===x?void 0:x.spec)||void 0===C?void 0:C.steps)||[]).map(e=>Object(E.a)(e,d)),P=f&&!!d&&!!d.reason,L=u||o.a(n,["metadata","name"],""),A=a.useRef(),B=a.useRef(),F=e?`${Object(c.uc)(m.PipelineRunModel,e,t)}/logs/${u}`:void 0,G=(null==d?void 0:d.reason)!==g.a.Idle&&(null==d?void 0:d.reason)!==g.a.Pending&&(null==d?void 0:d.reason)!==g.a.Cancelled&&!!F,U=(null===(N=null==R?void 0:R.when)||void 0===N?void 0:N.length)>0,M=(null===(_=null==R?void 0:R.runAfter)||void 0===_?void 0:_.length)>0,H=d?Object(v.f)(d.reason).pftoken.value:Object(v.f)(g.a.Cancelled).pftoken.value,[V,K]=Object(i.useHover)(),$=a.useMemo(()=>Object(c.Bc)(L,{length:P?11:14,truncateEnd:!0}),[L,P]),z=a.createElement("text",{ref:A,x:P?30:w/2,y:I/2+1,className:r("odc-pipeline-vis-task-text",{"is-text-center":!f,"is-linked":G})},$);let W=a.createElement("g",{ref:K},a.createElement(p.a,{dy:1,id:"SvgTaskDropShadowFilterId"}),a.createElement("rect",{filter:V?Object(i.createSvgIdUrl)("SvgTaskDropShadowFilterId"):"",width:w,height:I,rx:15,className:r("odc-pipeline-vis-task",{"is-selected":S,"is-linked":G})}),L!==$&&O?a.createElement(l.a,{triggerRef:A,content:L},z):z,P&&a.createElement(a.Fragment,null,a.createElement("svg",{width:30,height:30,viewBox:"-5 -4 20 20",style:{color:H}},a.createElement("g",{className:r({"fa-spin odc-pipeline-vis-task--icon-spin":d.reason===g.a.Running,"odc-pipeline-vis-task--icon-stop":d.reason!==g.a.Running})},a.createElement(k.b,{status:d.reason,disableSpin:!0}))),a.createElement(T,{steps:D,x:30,y:23,width:w/2+15})));O||(W=a.createElement(a.Fragment,null,a.createElement(l.a,{triggerRef:B,position:"bottom",enableFlip:!1,content:a.createElement(y.a,{isSpecOverview:!f,taskName:L,steps:D,isFinallyTask:j})},a.createElement("g",{ref:B},W))));const q=a.createElement(a.Fragment,null,U&&a.createElement(h.a,{width:b.C,height:b.C,appendLine:!M&&!j,isPipelineRun:f,status:d.reason,enableTooltip:!0,leftOffset:O&&!j?3:2,isFinallyTask:j}),W);return G?a.createElement(s.Link,{to:F},a.createElement("g",{"data-test":"task "+L},q)):q},T=({steps:e,x:t,y:n,width:l})=>{if(0===e.length)return null;const i=l/e.length;return a.createElement("g",null,e.map((e,l)=>a.createElement("rect",{key:e.name,x:t+i*l,y:n,width:i-2,height:2,fill:Object(v.f)(e.status).pftoken.value})))}},5999:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return b}));var a=n(5585),l=n(5676);const i=(...e)=>e.filter(e=>!!e).join(" "),r=(e,t)=>e.x<t.x,o=(e,t)=>e.y<t.y,s=(e,t)=>e.y>t.y,c=e=>`${e.x},${e.y}`,d=e=>"M "+c(e),u=e=>"L "+c(e),p=(e,t)=>`Q ${c(e)} ${c(t)}`,m=8,g=10,v=(e,t,n)=>{if(o(e,n)){const a=r(e,t)&&o(t,n),l=o(e,t)&&r(t,n);if(a)return i(u(t.clone().translate(-m,0)),p(t,t.clone().translate(0,g)));if(l)return i(u(t.clone().translate(0,-g)),p(t,t.clone().translate(m,0)))}else{const a=r(e,t)&&s(t,n),l=s(e,t)&&r(t,n);if(a)return i(u(t.clone().translate(-m,0)),p(t,t.clone().translate(0,-g)));if(l)return i(u(t.clone().translate(0,g)),p(t,t.clone().translate(m,0)))}return""},f=(e,t)=>i(d(e),u(t)),b=(e,t)=>{let n=null,r=null;if(e.y!==t.y){const i=Math.floor(e.x+l.w/2),o=new a.Point(i,e.y),s=new a.Point(i,t.y);n=v(e,o,s),r=v(o,s,t)}return i(d(e),n,r,u(t))}},6e3:function(e,t,n){"use strict";var a=n(0),l=n(88),i=n(6407),r=n(2225),o=n(5676);n(6288);t.a=({errorStr:e,x:t,y:n})=>{const s=a.useRef();return a.createElement(l.a,{triggerRef:s,content:e},a.createElement("g",{ref:s,className:"odc-error-node-decorator",transform:`translate(${t}, ${n})`},a.createElement("circle",{cx:0,cy:0,r:o.d,fill:r.global_danger_color_100.value}),a.createElement("g",{transform:"translate(-5, -6)"},a.createElement(i.a,{color:"white"}))))}},6049:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return h}));var a=n(5585),l=n(6282),i=n(6296),r=n(5676),o=n(6297),s=n(6300),c=n(6302),d=n(6304),u=n(6305),p=n(6307),m=n(6074),g=n(6073),v=n(5834);const f=(e,t)=>{switch(e){case a.ModelKind.graph:return a.GraphComponent;case a.ModelKind.edge:return p.a;case a.ModelKind.node:switch(t){case r.y.TASK_NODE:return g.a;case r.y.SPACER_NODE:return a.SpacerNode;case r.y.TASK_LIST_NODE:return m.a;case r.y.INVALID_TASK_LIST_NODE:return c.a;case r.y.BUILDER_NODE:return i.a;case r.y.FINALLY_NODE:return s.a;case r.y.BUILDER_FINALLY_NODE:return l.a;case r.y.LOADING_NODE:return d.a;default:return}default:return}},b=(e,t)=>{switch(e){case a.ModelKind.graph:return Object(a.withPanZoom)()(a.GraphComponent);case a.ModelKind.edge:return a.TaskEdge;case a.ModelKind.node:switch(t){case r.y.TASK_NODE:case r.y.FINALLY_NODE:return u.a;case r.y.CUSTOM_TASK_NODE:return o.a;case r.y.FINALLY_GROUP:return a.DefaultTaskGroup;case r.y.SPACER_NODE:return a.SpacerNode;default:return}default:return}},h=(e,t)=>{switch(e){case r.z.DAGRE_BUILDER:case r.z.DAGRE_BUILDER_SPACED:return new a.DagreLayout(t,Object.assign({linkDistance:0,nodeDistance:0,groupDistance:0,collideDistance:0,simulationSpeed:0,chargeStrength:0,allowDrag:!1,layoutOnDrag:!1},Object(v.j)(e)));case r.z.DAGRE_VIEWER:return new a.PipelineDagreLayout(t,{nodesep:25});default:return}}},6050:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return f}));var a=n(0),l=n(6270),i=n(476),r=n(5797),o=n(244),s=n(1208),c=n(1196),d=n(18),u=n(782),p=n(5595),m=n(5635),g=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n};const v=e=>{var{status:t,disableSpin:n}=e,m=g(e,["status","disableSpin"]);switch(t){case p.a["In Progress"]:case p.a.Running:return a.createElement(c.a,Object.assign({},m,{className:d({"fa-spin":!n})}));case p.a.Succeeded:return a.createElement(i.a,Object.assign({},m));case p.a.Failed:return a.createElement(o.a,Object.assign({},m));case p.a.Idle:case p.a.Pending:return a.createElement(s.a,Object.assign({},m));case p.a.Cancelled:return a.createElement(u.d,Object.assign({},m));case p.a.Skipped:return a.createElement(l.a,Object.assign({},m));default:return a.createElement(r.a,Object.assign({},m))}},f=e=>{var{status:t}=e,n=g(e,["status"]);return a.createElement("div",{style:{color:t?Object(m.f)(t).pftoken.value:Object(m.f)(p.a.Cancelled).pftoken.value}},a.createElement(v,Object.assign({status:t},n)))}},6066:function(e,t,n){"use strict";n(6067),n(5774);var a=n(5730);n.d(t,"a",(function(){return a.a}));n(5925)},6067:function(e,t,n){"use strict";n(0),n(5585),n(5),n(15),n(5774),n(5730),n(5925)},6068:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a,l=n(5595),i=n(5623);!function(e){e.Completed="Completed"}(a||(a={}));const r=(e,t)=>(t.steps||[]).find(t=>t.name===e.name||t.name==="step-"+e.name),o=e=>e?e.terminated?Object(i.e)(e.terminated.startedAt,e.terminated.finishedAt):e.running?Object(i.e)(e.running.startedAt):"":"",s=(e,t)=>{let n=l.a.PipelineNotStarted,i=null;if(t&&t.reason)if(t.reason===l.a["In Progress"]){const s=r(e,t);s?s.terminated?(n=s.terminated.reason===a.Completed?l.a.Succeeded:l.a.Failed,i=o(s)):s.running?(n=l.a["In Progress"],i=o(s)):s.waiting&&(n=l.a.Pending):n=l.a.Pending}else n=t.reason,i=o(r(e,t))||t.duration;else n=l.a.Cancelled;return{duration:i,name:e.name,status:n}}},6069:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(0),l=n(18),i=n.n(l),r=n(7),o=n(5595),s=n(5635),c=n(6050);n(6286);const d=({status:e})=>{const t={height:18,width:18},n=a.createElement(c.b,Object.assign({status:e},t));return e===o.a.Succeeded||e===o.a.Failed?a.createElement("div",{style:{color:Object(s.f)(e).pftoken.value}},a.createElement("svg",Object.assign({},t),a.createElement("circle",{className:"odc-pipeline-visualization-step-list__icon-backdrop",cx:9,cy:9,r:8}),n)):n},u=({isSpecOverview:e,taskName:t,steps:n,isFinallyTask:l,hideHeader:o})=>{const{t:s}=Object(r.useTranslation)();return a.createElement("div",{className:"odc-pipeline-visualization-step-list"},!o&&a.createElement("div",{className:"odc-pipeline-visualization-step-list__task-name"},t),l&&a.createElement("div",{className:"odc-pipeline-visualization-step-list__task-type"},s("pipelines-plugin~Finally task")),n.map(({duration:t,name:n,status:l})=>a.createElement("div",{className:i()("odc-pipeline-visualization-step-list__step",{"odc-pipeline-visualization-step-list__step--task-run":!e}),key:n},e?a.createElement("span",{className:"odc-pipeline-visualization-step-list__bullet"},"â€¢"):a.createElement("div",{className:"odc-pipeline-visualization-step-list__icon"},a.createElement(d,{status:l})),a.createElement("div",{className:"odc-pipeline-visualization-step-list__name"},n),!e&&a.createElement("div",{className:"odc-pipeline-visualization-step-list__duration"},t))))}},6070:function(e,t,n){"use strict";var a=n(0),l=n(88),i=n(29),r=n(5),o=n(5676),s=n(6289);n(6291);t.a=({width:e,height:t,name:n})=>{const c=a.useRef(),d=a.useMemo(()=>Object(r.Bc)(n,{length:10,truncateEnd:!0}),[n]);return a.createElement("g",null,a.createElement("rect",{width:e,height:t,rx:15,className:"opp-pipeline-vis-loading-node"}),a.createElement("g",null,a.createElement(s.a,{x:0,y:o.c/4,content:i.a.t("pipelines-plugin~Installing")})),a.createElement(l.a,{triggerRef:c,content:n},a.createElement("text",{ref:c,className:"opp-pipeline-vis-loading-node__name",x:e/2,y:t/2+1},d)))}},6071:function(e,t,n){"use strict";var a=n(0),l=n(88),i=n(1001),r=n(5676);n(6292);t.a=({x:e,y:t,onClick:n,tooltip:o,tooltipPosition:s})=>{const c=a.useRef();return a.createElement(l.a,{triggerRef:c,content:o,position:s},a.createElement("g",{className:"odc-plus-node-decorator",onClick:n,transform:`translate(${e}, ${t})`,ref:c},a.createElement("circle",{cx:0,cy:0,r:r.c,className:"odc-plus-node-decorator__circle"}),a.createElement("g",{transform:"translate(-6, -6)"},a.createElement(i.a,{color:"white"}))))}},6072:function(e,t,n){"use strict";var a=n(0),l=n(88),i=n(5585),r=n(18),o=n(7),s=n(5),c=n(5676),d=n(6293);t.a=({width:e,height:t,unselectedText:n,onRemoveTask:u,onNewTask:p,onTaskSearch:m})=>{const{t:g}=Object(o.useTranslation)(),v=a.useRef(null),f=a.useRef(),[b,h]=Object(i.useHover)(),E=n||g("pipelines-plugin~Add task"),y=a.useMemo(()=>Object(s.Bc)(E,{length:10,truncateEnd:!0}),[E]),k=a.createElement("text",{x:e/2,y:t/2+1,className:"odc-task-list-node__render-text",ref:f},y);return a.createElement(a.Fragment,null,a.createElement("g",{"data-test":"task-list",ref:h,className:"odc-task-list-node__trigger",onClick:e=>{e.stopPropagation(),m(p)}},a.createElement("rect",{ref:v,className:r("odc-task-list-node__trigger-background"),width:e,height:t}),a.createElement("g",null,a.createElement("rect",{className:b?"odc-task-list-node__trigger-underline--hover":"odc-task-list-node__trigger-underline",y:t,width:e,height:b?2:1}),u&&b&&a.createElement("g",null,a.createElement(d.a,{removeCallback:u,x:120,y:c.c/4,content:g("pipelines-plugin~Delete task")})),E!==y?a.createElement(l.a,{content:E,triggerRef:f},k):k)))}},6073:function(e,t,n){"use strict";var a=n(0),l=n(5585),i=n(5617),r=n(5998);t.a=Object(l.observer)(({element:e,disableTooltip:t})=>{var n,l,o,s;const{height:c,width:d}=e.getBounds(),{pipeline:u,pipelineRun:p,task:m,selected:g}=e.getData(),v=null===(l=null===(n=null==p?void 0:p.status)||void 0===n?void 0:n.skippedTasks)||void 0===l?void 0:l.some(e=>e.name===m.name);return a.createElement(r.a,{pipelineRunName:null===(o=null==p?void 0:p.metadata)||void 0===o?void 0:o.name,task:m,pipelineRunStatus:p&&Object(i.c)(p),namespace:null===(s=null==u?void 0:u.metadata)||void 0===s?void 0:s.namespace,disableTooltip:t,selected:g,width:d,height:c,isSkipped:v})})},6074:function(e,t,n){"use strict";var a=n(0),l=n(5585),i=n(6072);n(6303);t.a=Object(l.observer)(({element:e,unselectedText:t})=>{const{height:n=30,width:l=120}={},{onNewTask:r=(()=>{}),onTaskSearch:o=(()=>{}),onRemoveTask:s=(()=>{})}=e.getData()||{};return a.createElement(i.a,{width:l,height:n,unselectedText:t,onRemoveTask:s,onNewTask:r,onTaskSearch:o})})},6075:function(e,t,n){"use strict";var a=n(0),l=n(281),i=n(88),r=n(219),o=n(6139),s=n(297),c=n(319),d=n(157),u=n(867),p=n(318),m=n(19),g=n(1921),v=n(72),f=n(1963),b=n(55),h=n(230),E=n(320),y=n(16),k=n(7),O=n(5849),S=n(5618),T=n(5591),w=n(5),I=n(10),j=n(15),R=n(5648),x=n(6313);t.a=({pac:e,formContextField:t})=>{const[n]=Object(j.ue)(),{values:C,setFieldValue:N}=Object(b.f)(),_=t?t+".":"",{gitProvider:D,webhook:P}=y.a(C,t)||C,[L,A]=a.useState(""),[B,F]=a.useState(""),{t:G}=Object(k.useTranslation)();a.useEffect(()=>{var t;const n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t["controller-url"];n&&(A(n),N(_+"webhook.url",n))},[_,e,N]);const U=[{isList:!0,kind:I.SecretModel.kind,prop:I.SecretModel.id,namespace:n}];return a.createElement(S.a,{fullWidth:!_,extraMargin:!0},D&&D===T.b.BITBUCKET?a.createElement(j.ab,{label:G("pipelines-plugin~Bitbucket username"),name:_+"webhook.user",type:l.b.text,required:!0}):null,a.createElement(j.Lb,{name:_+"webhook.method",label:G("pipelines-plugin~Secret"),labelIcon:a.createElement(i.a,{position:"right",content:a.createElement("p",null,G("pipelines-plugin~The secret is required to set the Build status and to attach the webhook to the Git repository."))},a.createElement(f.a,null)),required:!0,options:[{value:"token",label:G("pipelines-plugin~Git access token"),activeChildren:a.createElement(j.ab,{name:_+"webhook.token",type:l.b.text,helpText:a.createElement(()=>{let e;switch(D){case T.b.GITHUB:e=a.createElement(k.Trans,{t:G,ns:"pipelines-plugin"},"Use your GitHub Personal token. Use this"," ",a.createElement("a",{href:R.a[T.b.GITHUB],target:"_blank",rel:"noopener noreferrer"},"link")," ","to create a ",a.createElement("b",null,"classic")," token with ",a.createElement("b",null,"repo")," & ",a.createElement("b",null,"admin:repo_hook")," scopes and give your token an expiration, i.e 30d.");break;case T.b.GITLAB:e=a.createElement(k.Trans,{t:G,ns:"pipelines-plugin"},"Use your Gitlab Personal access token. Use this"," ",a.createElement("a",{href:R.a[T.b.GITLAB],target:"_blank",rel:"noopener noreferrer"},"link")," ","to create a token with ",a.createElement("b",null,"api")," scope. Select the role as ",a.createElement("b",null,"Maintainer/Owner"),". Give your token an expiration i.e 30d.");break;case T.b.BITBUCKET:e=a.createElement(k.Trans,{t:G,ns:"pipelines-plugin"},"Use your Bitbucket App password. Use this"," ",a.createElement("a",{href:R.a[T.b.BITBUCKET],target:"_blank",rel:"noopener noreferrer"},"link")," ","to create a token with ",a.createElement("b",null,"Read and Write "),"scopes in"," ",a.createElement("b",null,"Account, Workspace membership, Projects, Issues, Pull requests and Webhooks"),".");break;default:e=a.createElement(k.Trans,{t:G,ns:"pipelines-plugin"},"Use your Git Personal token. Create a token with repo, public_repo & admin:repo_hook scopes and give your token an expiration, i.e 30d.")}return a.createElement("div",{"data-test":C.gitProvider+"-helptext"},e)},null),required:!0})},{value:"secret",label:G("pipelines-plugin~Git access token secret"),activeChildren:a.createElement(j.Ob,{helpText:G("pipelines-plugin~Secret with the Git access token for pulling pipeline and tasks from your Git repository."),name:_+"webhook.secretRef",resources:U,dataSelector:["metadata","name"],placeholder:G("pipelines-plugin~Select a secret"),autocompleteFilter:(e,t)=>{var n;return h(e,null===(n=null==t?void 0:t.props)||void 0===n?void 0:n.name)},fullWidth:!0,showBadge:!0,onChange:(e,t,n)=>{if(n&&n.data){N(_+"webhook.secretObj",n);const e=null==n?void 0:n.data["webhook.secret"];e&&F(E.Base64.decode(e))}}})}]}),(null==P?void 0:P.url)&&a.createElement(r.a,{fieldId:"test",label:G("pipelines-plugin~Webhook URL")},a.createElement(o.a,{isReadOnly:!0,name:_+"webhook.url",hoverTip:"Copy",clickTip:"Copied",style:{flex:"1"}},L),a.createElement(s.a,null,a.createElement(c.a,null,a.createElement(d.a,null,G("pipelines-plugin~We have detected a URL that can be used to configure the webhook. It will be created and attached to the Git repository."))))),D&&D!==T.b.BITBUCKET?a.createElement(r.a,{fieldId:"webhook-secret-clipboard",label:G("pipelines-plugin~Webhook secret")},a.createElement(u.a,{style:{display:"flex"}},a.createElement(p.a,null,a.createElement(o.a,{name:_+"webhook.secret",hoverTip:"Copy",clickTip:"Copied",style:{flex:"1"},onChange:(e,t)=>{N(_+"webhook.secret",t)}},B)),a.createElement(p.a,null,a.createElement(m.a,{"data-test":"generate-secret",variant:"control",onClick:()=>{F(Object(O.f)())}},G("pipelines-plugin~Generate"))))):null,D&&D!==T.b.UNSURE?a.createElement(a.Fragment,null,a.createElement(g.a,{toggleText:(e=>{switch(e){case T.b.GITHUB:return G("pipelines-plugin~See GitHub events");case T.b.GITLAB:return G("pipelines-plugin~See Gitlab events");case T.b.BITBUCKET:return G("pipelines-plugin~See BitBucket events");default:return G("pipelines-plugin~See Git events")}})(D)},a.createElement(r.a,{label:G("pipelines-plugin~Events triggering the webhook: "),fieldId:"repo-permissions"},a.createElement(v.a,{component:v.b.small},a.createElement(x.a,{formContextField:t})))),a.createElement(w.z,{text:G("pipelines-plugin~Read more about setting up webhook"),href:R.h[D]})):null)}},6076:function(e,t,n){},6107:function(e,t,n){"use strict";var a=n(0),l=n(87),i=n(281),r=n(80),o=n(55),s=n(22),c=n(16),d=n(7),u=n(13),p=n(5591),m=n(5633),g=n(53),v=n(974),f=n(1402),b=n(15),h=n(2221),E=n(5900),y=n(5673),k=n(5911),O=n(5649),S=n(5618),T=n(6148),w=n(6151),I=n(6153),j=function(e,t,n,a){return new(n||(n=Promise))((function(l,i){function r(e){try{s(a.next(e))}catch(e){i(e)}}function o(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}s((a=a.apply(e,t||[])).next())}))};t.a=({title:e,formContextField:t,builderImages:n,defaultSample:R,showSample:x=!!R,formType:C,importType:N,imageStreamName:_,autoFocus:D=!0})=>{const{t:P}=Object(d.useTranslation)(),L=a.useRef(),{dirty:A,isSubmitting:B,values:F,touched:G,errors:U,status:M,setFieldValue:H,setFieldTouched:V}=Object(o.f)(),K=Object(b.Fe)(f.c),[$,z]=Object(u.hc)({group:f.l.apiGroup,resource:f.l.plural,namespace:Object(g.c)(),verb:"create"}),W=t?t+".":"",q=a.useCallback((e,t,n)=>{H(`${W}${e}`,t,n)},[W,H]),Y=a.useCallback((e,t,n)=>{V(`${W}${e}`,t,n)},[W,V]),J=t?c.a(F,t):F,Z=t?c.a(G,t,{}):G,Q=t?c.a(U,t,{}):U,X=c.a(F,"formReloadCount"),{url:ee,dir:te,ref:ne}=R||{},ae=a.useMemo(()=>ee?{annotations:{sampleRepo:ee,sampleContextDir:null!=te?te:"./",sampleRef:null!=ne?ne:""}}:null,[ee,te,ne]),le=Object(s.a)(J.image.tagObj)?ae:J.image.tagObj,ie=x&&Object(y.i)(le),{name:re,application:{name:oe}={},image:{selected:se}={},git:{dir:ce,type:de}={}}=Z,{git:{url:ue}={}}=Q,[pe,me]=a.useState(l.d.default),[ge,ve]=a.useState(),fe=a.useCallback(e=>j(void 0,void 0,void 0,(function*(){if(q("image.isRecommending",!1),ue)return q("image.recommended",""),void q("image.couldNotRecommend",!0);const t=n&&(null==e?void 0:e.find(({type:e})=>e&&n.hasOwnProperty(e)));t&&t.type?(q("image.couldNotRecommend",!1),q("image.recommended",t.type)):(q("image.couldNotRecommend",!0),q("image.recommended",""))})),[n,ue,q]),be=a.useCallback((e,t)=>j(void 0,void 0,void 0,(function*(){var n;if(ue)return q("devfile.devfileContent",null),void q("devfile.devfileHasError",!0);if("devfile"!==N&&!(null===(n=J.devfile)||void 0===n?void 0:n.devfileSourceUrl)){q("devfile.devfilePath",e),q("docker.dockerfilePath","Dockerfile");const n=Object(p.e)(J.git.url,t,J.git.ref,J.git.dir,J.git.secretResource,e),a=n&&(yield n.getDevfileContent());a?(q("devfile.devfileContent",a),q("devfile.devfileHasError",!1)):(q("devfile.devfileContent",null),q("devfile.devfileHasError",!0))}})),[ue,N,q,J.devfile,J.git.dir,J.git.ref,J.git.secretResource,J.git.url]),he=a.useCallback((e,t,a)=>j(void 0,void 0,void 0,(function*(){var i,r,o,s;if(K&&z)return;if(B||(null==M?void 0:M.submitError))return;if(me(l.d.default),q("git.validated",l.d.default),q("git.isUrlValidating",!0),ue)return q("git.showGitType",!1),Y("git.type",!1),void q("git.isUrlValidating",!1);const c=Object(O.c)(e),d=c===p.b.UNSURE,u="sample"!==C&&Object(O.b)(e);c!==J.git.detectedType&&q("git.detectedType",c),d&&!J.git.showGitType&&q("git.showGitType",!0),!d&&J.git.showGitType&&q("git.showGitType",!1);const g=d&&J.git.showGitType?J.git.type:c;g!==J.git.type&&(Y("git.type",!1,!1),q("git.type",g));const b=Object(p.e)(e,g,t,a,J.git.secretResource,null===(i=J.devfile)||void 0===i?void 0:i.devfilePath,null===(r=J.docker)||void 0===r?void 0:r.dockerfilePath),E=yield Object(m.a)(e,b,K&&$),{loaded:y,loadError:k,repositoryStatus:S,strategies:T}=E;if(ve(S),S!==p.d.Reachable)return me(l.d.warning),q("git.validated",l.d.warning),q("git.isUrlValidating",!1),q("import",{loaded:!1,loadError:null,strategies:[],selectedStrategy:{name:"Builder Image",type:p.c.S2I,priority:0,detectedFiles:[]},recommendedStrategy:null,showEditImportStrategy:!0}),void q("build.strategy",v.BuildStrategyType.Source);if(u&&!re&&!J.name&&q("name",u),u&&"edit"!==J.formType&&!J.application.name&&J.application.selectedKey!==h.z&&q("application.name",u+"-app"),"devfile"===N||_||"edit"===J.formType)return me(l.d.success),q("git.validated",l.d.success),q("git.isUrlValidating",!1),"devfile"===N&&q("build.strategy",v.BuildStrategyType.Devfile),"devfile"===N&&!(null===(o=J.devfile)||void 0===o?void 0:o.devfileContent)&&q("import.recommendedStrategy",T[0]),void("edit"===J.formType&&J.build.strategy===v.BuildStrategyType.Source&&fe(null===(s=null==T?void 0:T.find(e=>e.type===p.c.S2I))||void 0===s?void 0:s.detectedCustomData));if(q("import.loaded",y),q("import.loadError",k),q("import.strategies",T),T.length>0?(q("import.showEditImportStrategy",!1),q("import.selectedStrategy",T[0]),q("import.recommendedStrategy",T[0])):(q("import.selectedStrategy",{name:"Devfile",type:p.c.DEVFILE,priority:2,detectedFiles:[]}),q("import.recommendedStrategy",null),q("import.showEditImportStrategy",!0)),q("import.strategyChanged",!1),T.length>0)switch(T[0].type){case p.c.S2I:q("build.strategy",v.BuildStrategyType.Source),n&&(q("image.isRecommending",!0),fe(T[0].detectedCustomData));break;case p.c.DEVFILE:q("build.strategy",v.BuildStrategyType.Devfile),be(T[0].detectedFiles[0],g);break;case p.c.DOCKERFILE:q("build.strategy",v.BuildStrategyType.Docker),q("docker.dockerfilePath",T[0].detectedFiles[0]),q("docker.dockerfileHasError",!1);break;case p.c.SERVERLESS_FUNCTION:q("build.strategy",f.k.ServerlessFunction)}me(l.d.success),q("git.validated",l.d.success),q("git.isUrlValidating",!1)})),[B,M,q,ue,C,J.git.detectedType,J.git.showGitType,J.git.type,J.git.secretResource,J.devfile,J.docker,J.name,J.formType,J.application.name,J.application.selectedKey,J.build.strategy,K,$,z,re,N,_,Y,fe,n,be]),Ee=Object(b.Ce)(he),ye=a.useCallback(()=>{if(K&&z)return;const e=ie,t=Object(y.h)(le),n=Object(y.g)(le);q("git.url",ie,!1),q("git.ref",t,!1),q("git.dir",n,!1),Y("git.url",!0,!0),Ee(e,t,n)},[Ee,ie,Y,q,le,K,z]);a.useEffect(()=>{(!A||ce||de||X||J.git.secretResource)&&J.git.url&&Ee(J.git.url,J.git.ref,J.git.dir)},[A,B,ce,X,Ee,J.git.url,J.git.ref,J.git.dir,J.git.type,J.git.secretResource,de]);const ke=a.useMemo(()=>{if(J.git.isUrlValidating)return P("devconsole~Validating")+"...";if(pe===l.d.success)return P("devconsole~Validated");if(pe===l.d.warning)switch(ge){case p.d.RateLimitExceeded:return P("devconsole~Rate limit exceeded");case p.d.GitTypeNotDetected:return P("devconsole~URL is valid but a git type could not be identified. Please select a git type from the options below");case p.d.PrivateRepo:return P("devconsole~If this is a private repository, enter a source Secret in advanced Git options");case p.d.ResourceNotFound:return P("devconsole~Requested repository does not exist");case p.d.InvalidGitTypeSelected:return P("devconsole~The selected git type might not be valid or the repository is private. Please try selecting another git type or enter a source Secret in advanced Git options");case p.d.GiteaRepoUnreachable:return P("devconsole~The Gitea repository is unreachable. The repository might be private or does not exist");default:return P("devconsole~URL is valid but cannot be reached")}return P("devconsole~Repository URL to build and deploy your code from")},[P,J.git.isUrlValidating,pe,ge]),Oe=a.useCallback(()=>{se||(q("image.selected",""),q("image.tag","")),J.image.recommended&&q("image.recommended",""),J.image.couldNotRecommend&&q("image.couldNotRecommend",!1),"edit"!==J.formType?(!re&&q("name",""),!J.application.isInContext&&J.application.selectedKey!==h.z&&!oe&&q("application.name","")):J.application.selectedKey!==h.z&&J.application.selectedKey===h.b&&!oe&&q("application.name","")},[q,J.formType,J.image.recommended,J.image.couldNotRecommend,J.application.selectedKey,J.application.isInContext,oe,se,re]);return Object(b.Ge)(J.git.url),a.useEffect(()=>{var e;if(z)return;D&&(null===(e=L.current)||void 0===e||e.focus());const{sampleName:t,repository:n}=Object(k.d)();if(null==n?void 0:n.url){const e=Object(O.b)(n.url);q("name",e,!1),q("application.name",e+"-app",!1),q("git.url",n.url,!1),n.revision&&q("git.ref",n.revision,!1),n.contextDir&&q("git.dir",n.contextDir,!1),Y("git.url",!0,!0),Ee(n.url,n.revision,n.contextDir)}t?Object(k.e)(t).then(e=>{var a,l,i,r;if(Object(E.b)(e.spec.source)){const{gitImport:t}=e.spec.source;if(!(null==n?void 0:n.url)){const e=Object(O.b)(n.url);q("name",e,!1),q("application.name",e+"-app",!1),q("git.url",t.repository.url,!1),n.revision&&q("git.ref",n.revision,!1),n.contextDir&&q("git.dir",n.contextDir,!1),Y("git.url",!0,!0),Ee(t.repository.url,t.repository.revision,t.repository.contextDir)}(null===(a=null==t?void 0:t.service)||void 0===a?void 0:a.targetPort)&&8080!==(null===(l=null==t?void 0:t.service)||void 0===l?void 0:l.targetPort)&&q("route.unknownTargetPort",t.service.targetPort.toString(),!1)}else console.error(`Unsupported ConsoleSample "${t}" source type ${null===(r=null===(i=e.spec)||void 0===i?void 0:i.source)||void 0===r?void 0:r.type}`)}).catch(e=>{console.error(`Error while loading ConsoleSample "${t}":`,e)}):"sample"===C&&ie&&ye()},[z]),a.createElement(S.a,{title:null!=e?e:P("devconsole~Git")},a.createElement(b.ab,{ref:L,type:i.b.text,name:W+"git.url",label:P("devconsole~Git Repo URL"),helpText:ke,helpTextInvalid:ke,validated:pe,onBlur:e=>{const t=e.target.value.trim();e.target.value!==t&&(q("git.url",t),Ee(t,J.git.ref,J.git.dir))},onChange:e=>{Oe(),Ee(e.target.value.trim(),J.git.ref,J.git.dir)},"data-test-id":"git-form-input-url",required:!0,isDisabled:"sample"===C&&ie}),"sample"!==C&&ie&&a.createElement(I.a,{onClick:ye}),J.git.showGitType&&a.createElement(a.Fragment,null,a.createElement(w.a,{fieldPrefix:W}),J.git.type===p.b.UNSURE&&a.createElement(r.a,{isInline:!0,variant:"info",title:P("devconsole~Defaulting Git type to other")},P("devconsole~We failed to detect the Git type."))),"sample"!==C&&a.createElement(T.a,{formContextField:t}))}},6148:function(e,t,n){"use strict";var a=n(0),l=n(281),i=n(55),r=n(7),o=n(5),s=n(15),c=n(5618),d=n(6149);t.a=({formContextField:e})=>{const t=e?e+".":"",{t:n}=Object(r.useTranslation)(),{setFieldValue:u,setFieldTouched:p}=Object(i.f)(),m=Object(s.Ce)(e=>u(t+"git.ref",e.target.value)),g=Object(s.Ce)(e=>{u(t+"git.dir",e.target.value),p(t+"git.dir")});return a.createElement(o.x,{textExpanded:n("devconsole~Hide advanced Git options"),textCollapsed:n("devconsole~Show advanced Git options"),dataTest:"advanced-git-options"},a.createElement(c.a,null,a.createElement(s.ab,{type:l.b.text,name:t+"git.ref",label:n("devconsole~Git reference"),helpText:n("devconsole~Optional branch, tag, or commit."),onChange:m}),a.createElement(s.ab,{type:l.b.text,name:t+"git.dir",label:n("devconsole~Context dir"),helpText:n("devconsole~Optional subdirectory for the source code, used as a context directory for build."),onChange:g}),a.createElement(d.a,{formContextField:e})))}},6149:function(e,t,n){"use strict";var a=n(0),l=n(219),i=n(297),r=n(319),o=n(157),s=n(55),c=n(16),d=n(7),u=n(4359),p=n(108),m=n(10),g=n(15),v=n(6150),f=n(5961);t.a=({formContextField:e})=>{const t=e?e+".":"",{t:n}=Object(d.useTranslation)(),{values:b,setFieldValue:h}=Object(s.f)(),E=c.a(b,t+"project.name"),y=c.a(b,t+"git.secret"),[k,O,S]=Object(p.a)(E&&y?{kind:m.SecretModel.kind,namespace:E,name:y,optional:!0,isList:!1}:null),T=e=>{h(t+"git.secret",e)};return a.useEffect(()=>{O&&!S&&y&&k&&h(t+"git.secretResource",k)},[O,S,y,k,h,t]),a.createElement(a.Fragment,null,a.createElement(l.a,{fieldId:Object(g.Kc)("source-secret","dropdown"),label:n("devconsole~Source Secret")},a.createElement(v.a,{dropDownClassName:"dropdown--full-width",menuClassName:"dropdown-menu--text-wrap",namespace:E,actionItems:[{actionTitle:n("devconsole~Create new Secret"),actionKey:"create-source-secret"},{actionTitle:n("devconsole~No Secret"),actionKey:"clear-source-secret"}],selectedKey:y,title:y,onChange:e=>{"create-source-secret"===e?(h(t+"git.secret",y),Object(f.a)({namespace:E,save:T,secretType:u.SecretTypeAbstraction.source})):"clear-source-secret"===e?(h(t+"git.secret",""),h(t+"git.secretResource",{})):h(t+"git.secret",e)}}),a.createElement(i.a,null,a.createElement(r.a,null,a.createElement(o.a,null,n("devconsole~Secret with credentials for pulling your source code."))))))}},6150:function(e,t,n){"use strict";var a=n(0),l=n(7),i=n(1423),r=n(10),o=n(15);t.a=e=>{const{t:t}=Object(l.useTranslation)(),n=[{isList:!0,namespace:e.namespace,kind:r.SecretModel.kind,prop:"secrets"}];return a.createElement(i.a,{resources:n},a.createElement(o.Nb,Object.assign({},e,{placeholder:t("devconsole~Select Secret name"),resourceFilter:e=>"kubernetes.io/basic-auth"===e.type||"kubernetes.io/ssh-auth"===e.type,dataSelector:["metadata","name"]})))}},6151:function(e,t,n){"use strict";var a=n(0),l=n(219),i=n(241),r=n(130),o=n(7304),s=n(5931),c=n(5933),d=n(5932),u=n(4373),p=n(55),m=n(16),g=n(7),v=n(5591),f=n(5778),b=n(5599);n(6152);t.a=({fieldPrefix:e})=>{const{values:t,setFieldValue:n,setFieldTouched:h}=Object(p.f)(),{t:E}=Object(g.useTranslation)(),y=t=>{n(e+"git.type",t,!1),h(e+"git.type",!0,!1)},k=m.a(t,e+"git.type");return a.createElement(a.Fragment,null,a.createElement(l.a,{label:E("devconsole~Git type"),isRequired:!0,id:"git-type"},a.createElement(i.a,{spaceItems:{default:"spaceItemsSm"}},a.createElement(r.a,null,a.createElement(o.a,{className:"odc-git-type-selector",title:b.c[v.b.GITHUB],icon:a.createElement(s.a,null),onClick:()=>y(v.b.GITHUB),isSelected:k===v.b.GITHUB,id:"git-type-github"})),a.createElement(r.a,null,a.createElement(o.a,{className:"odc-git-type-selector",title:b.c[v.b.GITLAB],icon:a.createElement(c.a,null),onClick:()=>y(v.b.GITLAB),isSelected:k===v.b.GITLAB,id:"git-type-gitlab"})),a.createElement(r.a,null,a.createElement(o.a,{className:"odc-git-type-selector",title:b.c[v.b.BITBUCKET],icon:a.createElement(d.a,null),onClick:()=>y(v.b.BITBUCKET),isSelected:k===v.b.BITBUCKET,id:"git-type-bitbucket"})),a.createElement(r.a,null,a.createElement(o.a,{className:"odc-git-type-selector",title:b.c[v.b.GITEA],icon:a.createElement(f.a,null),onClick:()=>y(v.b.GITEA),isSelected:k===v.b.GITEA,id:"git-type-gitea"})),a.createElement(r.a,null,a.createElement(o.a,{className:"odc-git-type-selector",title:b.c[v.b.UNSURE],icon:a.createElement(u.a,null),onClick:()=>y(v.b.UNSURE),isSelected:k===v.b.UNSURE,id:"git-type-other"})))))}},6152:function(e,t,n){},6153:function(e,t,n){"use strict";var a=n(0),l=n(297),i=n(19),r=n(6215),o=n(7);t.a=e=>{const{t:t}=Object(o.useTranslation)();return a.createElement(l.a,null,a.createElement(i.a,Object.assign({},e,{type:"button",variant:i.d.link,isInline:!0}),t("devconsole~Try sample")," ",a.createElement(r.a,null)))}},6211:function(e,t,n){"use strict";var a=n(0),l=n(80),i=n(7),r=n(6049),o=n(6212),s=n(5834);n(6310);t.a=({pipeline:e,pipelineRun:t,taskRuns:n})=>{const{t:c}=Object(i.useTranslation)();let d;const u=Object(s.h)(e,t,n);return d=!u||0===u.nodes.length&&0===u.edges.length?a.createElement(l.a,{variant:"info",isInline:!0,title:c("pipelines-plugin~This Pipeline has no tasks to visualize.")}):a.createElement(o.a,{"data-test":"pipeline-visualization",componentFactory:r.b,model:u,showControlBar:!0}),a.createElement("div",{className:"odc-pipeline-visualization"},d)}},6212:function(e,t,n){"use strict";var a=n(0),l=n(18),i=n(6308),r=(n(6309),function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n});t.a=a.memo(e=>{var{builder:t,model:n,componentFactory:o}=e,s=r(e,["builder","model","componentFactory"]);return a.createElement("div",{className:l("odc-pipeline-topology-graph",{builder:t}),"data-test":s["data-test"]||"pipeline-topology-graph"},a.createElement(i.a,Object.assign({model:n,componentFactory:o,noScrollbar:t},s)))})},6282:function(e,t,n){"use strict";var a=n(0),l=n(5585),i=n(7),r=n(5998),o=n(5676),s=n(5999),c=n(6e3),d=n(6070),u=n(6071),p=n(6072);n(6295);t.a=Object(l.observer)(({element:e})=>{const{t:t}=Object(i.useTranslation)(),{width:n,height:m}=e.getBounds(),{task:g,namespace:v}=e.getData(),{addNewFinallyListNode:f,finallyTasks:b=[],finallyListTasks:h=[],finallyLoadingTasks:E=[],finallyInvalidListTasks:y=[],onTaskSearch:k=(()=>{})}=g,O=b.length+h.length+E.length+y.length,S=o.u+o.u/2,T=o.q+o.B,w=o.u+o.r,I=o.q+o.q/2+(0===O?0:o.B),j=({taskIndex:e})=>a.createElement("path",{className:"opp-builder-finally-node__task-connectors",d:S+e*w===m/2?Object(s.b)(new l.Point(T,m/2),new l.Point(0,m/2)):Object(s.a)(new l.Point(0,m/2),new l.Point(T,S+e*w))});return a.createElement("g",{"data-test":"builder-finally-node"},a.createElement("rect",{className:"opp-builder-finally-node",width:n,height:m,rx:"20",ry:"20"}),b.map((e,t)=>a.createElement("g",{key:e.name},a.createElement(j,{taskIndex:t}),a.createElement("g",{"data-test":"finally-task-node "+e.name,transform:`translate(${T}, ${o.u*t+o.r*t+o.q})`,onClick:e.onTaskSelection},a.createElement(r.a,{task:e,namespace:v,disableTooltip:!0,selected:e.selected,width:o.x,height:o.u,isFinallyTask:!0}),e.error&&a.createElement(c.a,{x:o.c/2,y:o.d/4,errorStr:e.error})))),E.map((e,t)=>a.createElement("g",{key:e.name,"data-test":"finally-loading-task-list-node "+e.name},a.createElement(j,{taskIndex:t+b.length}),a.createElement("g",{transform:`translate(${T},\n          ${o.u*(t+b.length)+o.r*(t+b.length)+o.q})`},a.createElement(d.a,{width:o.x,height:o.u,name:e.name,key:e.name})))),y.map((e,n)=>a.createElement("g",{key:e.name,"data-test":"finally-invalid-task-list-node "+e.name},a.createElement(j,{taskIndex:n+b.length+E.length}),a.createElement("g",{transform:`translate(${T},\n              ${o.u*(n+b.length+E.length)+o.r*(n+b.length+E.length)+o.q})`},a.createElement(p.a,{width:o.x,height:o.u,onRemoveTask:e.onRemoveTask,onNewTask:e.convertList,onTaskSearch:k,unselectedText:e.name}),a.createElement(c.a,{x:o.d/2,y:o.d/4,errorStr:t("pipelines-plugin~Task does not exist")})))),h.map((e,t)=>a.createElement("g",{key:e.name,"data-test":"finally-task-list-node "+e.name},a.createElement(j,{taskIndex:t+b.length+E.length+y.length}),a.createElement("g",{transform:`translate(${T},\n              ${o.u*(t+b.length+E.length+y.length)+o.r*(t+b.length+E.length+y.length)+o.q})`},a.createElement(p.a,{width:o.x,height:o.u,onRemoveTask:e.onRemoveTask,onNewTask:e.convertList,onTaskSearch:k})))),a.createElement("g",{transform:`translate(${I}, ${O*o.u+(O-1)*o.r+o.u+o.p+o.q})`,style:{cursor:"pointer"},onClick:f},a.createElement("g",null,a.createElement(u.a,{x:0,y:o.p-o.o,tooltip:t("pipelines-plugin~Add finally task")}),a.createElement("text",{x:o.o,"data-test":"add-finally-node",className:"opp-builder-finally-node__text"},t("pipelines-plugin~Add finally task")))))})},6283:function(e,t,n){"use strict";var a=n(0),l=n(88),i=n(5676),r=n(5834);n(6285);t.a=({width:e,height:t,enableTooltip:n,appendLine:o=!1,status:s,leftOffset:c=2,isFinallyTask:d,isPipelineRun:u})=>{const p=a.useRef(),{tooltipContent:m,diamondColor:g}=Object(r.l)(s,u,d),v=Math.round(e*Math.sin(45))+Math.round(t*Math.cos(45)),f=a.createElement("g",{transform:`translate(-${e*c}, ${i.u/2-v/2})`,ref:p},a.createElement("rect",{"data-test":"diamond-decorator",className:"opp-when-expression-decorator-diamond",width:e,height:t,fill:g,stroke:u?g:"var(--pf-v5-global--BorderColor--light-100)"}),o&&a.createElement("line",{x1:v/2,y1:v/2,x2:e*c,y2:v/2,stroke:"var(--pf-v5-global--BorderColor--light-100)"}));return n?a.createElement(l.a,{triggerRef:p,position:"bottom",enableFlip:!1,content:a.createElement("div",{"data-test":"when-expression-tooltip"},m)},f):f}},6284:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));class a{constructor(){this.names=[],this.vertices=new Map}visit(e,t,n,a){const{name:l}=e,i=e.dependancy,r=e.dependancyNames,o=r.length;if(n||(n=new Map),a||(a=[]),!n.has(l)){a.push(l),n.set(l,!0);for(let e=0;e<o;e++)this.visit(i[r[e]],t,n,a);t(e,a),a.pop()}}map(e,t){this.addVertex(e).data=t}addVertex(e){if(!e)return null;if(this.vertices.has(e))return this.vertices.get(e);const t={name:e,level:0,dependancy:{},dependancyNames:[],hasOutgoing:!1,data:{}};return this.vertices.set(e,t),this.names.push(e),t}addEdge(e,t){if(!e||!t||e===t)return;const n=this.addVertex(e),a=this.addVertex(t);if(a.dependancy[e])return;this.visit(n,(e,n)=>{if(e.name===t)throw new Error(`cycle detected: ${n.reverse().join(" --\x3e ")} --\x3e ${t}`);e.level=n.length}),n.hasOutgoing=!0,a.dependancy[e]=n,a.dependancyNames.push(e)}addEdges(e,t,n,a){this.map(e,t),n&&("string"==typeof n?this.addEdge(e,n):n.forEach(t=>this.addEdge(e,t))),a&&("string"==typeof a?this.addEdge(a,e):a.forEach(t=>this.addEdge(t,e)))}topologicalSort(e){const t=new Map,{vertices:n}=this,{names:a}=this,l=a.length;for(let i=0;i<l;i++){const l=n.get(a[i]);l.hasOutgoing||this.visit(l,e,t)}}printGraph(){const e=[];return this.topologicalSort((t,n)=>{t.data.stage=this.names.length-n.length,e.push(t.name)}),console.log(e.join(" --\x3e ")),e.join(" --\x3e ")}}},6285:function(e,t,n){},6286:function(e,t,n){},6287:function(e,t,n){},6288:function(e,t,n){},6289:function(e,t,n){"use strict";var a=n(0),l=n(88),i=n(874),r=n(5676);n(6290);t.a=({content:e,x:t,y:n})=>{const o=a.useRef();return a.createElement(l.a,{triggerRef:o,content:e},a.createElement("g",{ref:o,className:"opp-installing-node-decorator",transform:`translate(${t}, ${n})`,onClick:e=>{e.stopPropagation()}},a.createElement("circle",{cx:0,cy:0,r:r.d,className:"opp-installing-node-decorator__circle"}),a.createElement("g",{transform:"translate(-5, -7)"},a.createElement(i.a,{className:"fa-spin"}))))}},6290:function(e,t,n){},6291:function(e,t,n){},6292:function(e,t,n){},6293:function(e,t,n){"use strict";var a=n(0),l=n(88),i=n(6262),r=n(8013),o=n(5676);n(6294);t.a=({content:e,x:t,y:n,removeCallback:s=(()=>{})})=>{const c=a.useRef();return a.createElement(l.a,{triggerRef:c,content:e},a.createElement("g",{ref:c,className:"opp-remove-node-decorator",transform:`translate(${t}, ${n})`,onClick:e=>{e.stopPropagation(),s()},"data-id":"delete-task"},a.createElement("circle",{cx:0,cy:0,r:o.d,fill:r.a.value}),a.createElement("g",{transform:"translate(-6, -6)"},a.createElement(i.a,{color:"white"}))))}},6294:function(e,t,n){},6295:function(e,t,n){},6296:function(e,t,n){"use strict";var a=n(0),l=n(88),i=n(5585),r=n(7),o=n(5676),s=n(6e3),c=n(6071),d=n(6073);t.a=Object(i.observer)(({element:e})=>{const{t:t}=Object(r.useTranslation)(),[n,u]=Object(i.useHover)(),{width:p,height:m}=e.getBounds(),g=e.getData(),{error:v,onAddNode:f,onNodeSelection:b}=g;return a.createElement("g",{className:"odc-builder-node","data-test":"builder-node "+g.task.name,ref:u},a.createElement("rect",{x:2*-o.c,y:0,width:p+4*o.c,height:m+2*o.c,fill:"transparent"}),a.createElement("g",{onClick:()=>b(g)},a.createElement(d.a,{element:e,disableTooltip:!0}),v&&a.createElement(s.a,{x:o.d/2,y:o.d/4,errorStr:v})),a.createElement("g",{style:{display:n?"block":"none"}},a.createElement(c.a,{"data-test":"add-after",x:p+o.c+o.b,y:m/2,tooltip:t("pipelines-plugin~Add a sequential task after this task"),onClick:()=>f(o.a.AFTER)}),a.createElement(c.a,{"data-test":"add-before",x:-o.c-o.b,y:m/2,tooltip:t("pipelines-plugin~Add a sequential task before this task"),onClick:()=>f(o.a.BEFORE)}),a.createElement(c.a,{"data-test":"add-parallel",x:p/2,y:m+o.c+o.b,tooltip:t("pipelines-plugin~Add a parallel task"),tooltipPosition:l.b.bottom,onClick:()=>f(o.a.PARALLEL)})))})},6297:function(e,t,n){"use strict";var a=n(0),l=n(88),i=n(6299),r=n.n(i),o=n(6408),s=n(5585),c=n(18),d=n(16),u=n(7),p=n(14),m=n(83),g=n(695),v=n(5),f=n(5586),b=n(6066);n(6298);const h=({pipelineRunName:e,namespace:t,task:n,name:i,disableVisualizationTooltip:m,width:g,height:h,customTask:E})=>{var y;const{t:k}=Object(u.useTranslation)(),O=!!e,S=i||d.a(n,["metadata","name"],""),T=a.useRef(),w=a.useRef(),I=""+Object(v.uc)(f.CustomRunModelV1Beta1,null===(y=null==E?void 0:E.metadata)||void 0===y?void 0:y.name,t),j=!!I,[R,x]=Object(s.useHover)(),C=a.useMemo(()=>Object(v.Bc)(S,{length:O?11:14,truncateEnd:!0}),[S,O]),N=a.createElement("text",{ref:T,x:O?30:g/2,y:h/2+1,className:c("odc-pipeline-vis-task-text",{"is-text-center":!e,"is-linked":j})},C);let _=a.createElement("g",{ref:x},a.createElement(b.a,{dy:1,id:"SvgTaskDropShadowFilterId"}),a.createElement("rect",{filter:R?Object(s.createSvgIdUrl)("SvgTaskDropShadowFilterId"):"",width:g,height:h,rx:5,className:c("odc-pipeline-vis-task",{"is-selected":!!e&&R,"is-linked":!!e&&j}),style:{stroke:o.global_palette_black_500.value}}),S!==C&&m?a.createElement(l.a,{triggerRef:T,content:S},N):N,O&&a.createElement(a.Fragment,null,a.createElement("svg",{width:30,height:30,viewBox:"-10 -7 30 30",style:{color:o.global_palette_black_500.value}},a.createElement(r.a,null))));return m||(_=a.createElement(l.a,{triggerRef:w,position:"bottom",enableFlip:!1,content:k("pipelines-plugin~Custom Task")},a.createElement("g",{ref:w},_))),a.createElement("g",{className:c("odc-pipeline-topology__task-node",{"is-link":j})},j?a.createElement(p.Link,{to:I},_):_)};t.a=a.memo(Object(s.observer)(({element:e,disableTooltip:t})=>{var n,l,i,r,o;const{height:s,width:c}=e.getBounds(),{pipeline:d,pipelineRun:u,task:p}=e.getData(),v=`${null===(n=null==u?void 0:u.metadata)||void 0===n?void 0:n.name}-${null==p?void 0:p.name}`,b={customRun:{groupVersionKind:Object(m.getGroupVersionKindForModel)(f.CustomRunModelV1Beta1),name:v,namespace:null===(l=null==d?void 0:d.metadata)||void 0===l?void 0:l.namespace,prop:"task"}},E=Object(g.d)(b);return a.createElement(h,{pipelineRunName:null===(i=null==u?void 0:u.metadata)||void 0===i?void 0:i.name,name:p.name||"",task:p.taskSpec&&{data:{spec:p.taskSpec}},namespace:null===(r=null==d?void 0:d.metadata)||void 0===r?void 0:r.namespace,disableVisualizationTooltip:t,width:c,height:s,customTask:null===(o=E.customRun)||void 0===o?void 0:o.data})}))},6298:function(e,t,n){},6300:function(e,t,n){"use strict";var a=n(0),l=n(5585),i=n(5617),r=n(5998),o=n(5676),s=n(5999);n(6301);t.a=Object(l.observer)(({element:e})=>{const{task:t,pipeline:n,pipelineRun:c}=e.getData(),{width:d,height:u}=e.getBounds(),p=o.u+o.u/2,m=o.q+o.B,g=o.u+o.r,{finallyTasks:v=[]}=t;return a.createElement("g",{transform:"translate(0.5, 0.5)","data-test":"finally-node"},a.createElement("rect",{className:"opp-finally-node",strokeWidth:1,width:d,height:u,rx:"20",ry:"20"}),v.map((e,t)=>{var d,v,f,b;return a.createElement("g",{key:e.name,"data-test":"finally-task-node "+e.name},a.createElement("path",{className:"opp-finally-node__connector",d:p+t*g===u/2?Object(s.b)(new l.Point(m,u/2),new l.Point(0,u/2)):Object(s.a)(new l.Point(0,u/2),new l.Point(m,p+t*g))}),a.createElement("g",{transform:`translate(${m}, ${o.u*t+o.r*t+o.q})`},a.createElement(r.a,{pipelineRunName:null===(d=null==c?void 0:c.metadata)||void 0===d?void 0:d.name,task:e,pipelineRunStatus:c&&Object(i.c)(c),namespace:null===(v=null==n?void 0:n.metadata)||void 0===v?void 0:v.namespace,selected:e.selected,width:o.x,height:o.u,isFinallyTask:!0,isSkipped:null===(b=null===(f=null==c?void 0:c.status)||void 0===f?void 0:f.skippedTasks)||void 0===b?void 0:b.some(t=>t.name===e.name)})))}))})},6301:function(e,t,n){},6302:function(e,t,n){"use strict";var a=n(0),l=n(5585),i=n(7),r=n(5676),o=n(6e3),s=n(6074);t.a=Object(l.observer)(({element:e})=>{const{t:t}=Object(i.useTranslation)(),{task:{name:n}}=e.getData();return a.createElement("g",null,a.createElement(s.a,{element:e,unselectedText:n}),a.createElement(o.a,{x:r.d/2,y:r.d/4,errorStr:t("pipelines-plugin~Task does not exist")}))})},6303:function(e,t,n){},6304:function(e,t,n){"use strict";var a=n(0),l=n(5585),i=n(6070);t.a=Object(l.observer)(({element:e})=>{const{height:t,width:n}=e.getBounds(),{task:{name:l}}=e.getData();return a.createElement(i.a,Object.assign({},{width:n,height:t,name:l}))})},6305:function(e,t,n){"use strict";var a=n(0),l=n(88),i=n(5585),r=n(18),o=n.n(r),s=n(5668),c=n(14),d=n(83),u=n(5),p=n(8),m=n(206),g=n(5586),v=n(5595),f=n(5617),b=n(5588),h=n(6068),E=n(6069),y=n(5676),k=n(5834),O=(n(6306),function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n});t.a=a.memo(Object(s.a)(e=>{var t,n,r,s,S,T,w,I,j,R,x,C,N,_,D,P,L,A,{element:B,onContextMenu:F,contextMenuOpen:G}=e,U=O(e,["element","onContextMenu","contextMenuOpen"]);const M=B.getData(),[H,V]=Object(i.useHover)(),K=a.useRef(),$=Object(i.useDetailsLevel)(),z=Object(m.a)(b.e),W=B.getType()===y.y.FINALLY_NODE;let q;z||(null===(n=null===(t=M.task)||void 0===t?void 0:t.taskRef)||void 0===n?void 0:n.kind)!==g.ClusterTaskModel.kind?(null===(r=M.task)||void 0===r?void 0:r.taskRef)&&(q={kind:Object(p.Hb)(g.TaskModel),name:M.task.taskRef.name,namespace:M.pipeline.metadata.namespace,prop:"task"}):q={kind:Object(p.Hb)(g.ClusterTaskModel),name:M.task.taskRef.name,prop:"task"};const[Y]=Object(d.useK8sWatchResource)(q),J=Y&&Object.keys(Y).length?Y:M.task,Z=(null===(s=null==J?void 0:J.status)||void 0===s?void 0:s.steps)||(null===(S=null==J?void 0:J.spec)||void 0===S?void 0:S.steps)||(null===(T=null==J?void 0:J.taskSpec)||void 0===T?void 0:T.steps)||[],Q=M.pipelineRun&&Object(f.c)(M.pipelineRun),X=!(!J||!(null===(j=null===(I=null===(w=M.pipelineRun)||void 0===w?void 0:w.status)||void 0===I?void 0:I.skippedTasks)||void 0===j?void 0:j.some(e=>e.name===M.task.name,e=>e.name===J.name))),ee=(null===(R=M.task)||void 0===R?void 0:R.status)||{duration:"",reason:v.a.Idle};Q!==v.a.Failed&&Q!==v.a.Cancelled||(null===(C=null===(x=M.task)||void 0===x?void 0:x.status)||void 0===C?void 0:C.reason)!==v.a.Idle&&(null===(_=null===(N=M.task)||void 0===N?void 0:N.status)||void 0===_?void 0:_.reason)!==v.a.Pending||(ee.reason=v.a.Cancelled),X&&(ee.reason=v.a.Skipped);const te=Z.map(e=>Object(h.a)(e,ee)),{pipelineRun:ne}=M,ae=te.filter(({status:e})=>e===v.a.Succeeded).length,le=te.length>0&&M.status?`${ae}/${te.length}`:null,ie=a.useMemo(()=>{const e=Object.assign({},M);return Object.keys(e).forEach(t=>{void 0===e[t]&&delete e[t]}),e},[M]),re=!(!M.taskIconClass&&!M.taskIcon),oe=Object(k.k)(null===(P=null===(D=M.task)||void 0===D?void 0:D.status)||void 0===P?void 0:P.reason),se=M.whenStatus?a.createElement(i.WhenDecorator,{element:B,status:M.whenStatus,leftOffset:re?i.DEFAULT_WHEN_OFFSET+.75*(B.getBounds().height-4):i.DEFAULT_WHEN_OFFSET,toolTip:oe}):null,{name:ce,namespace:de}=null==ne?void 0:ne.metadata,ue=ce?`${Object(u.uc)(g.PipelineRunModel,ce,de)}/logs?taskName=${B.getLabel()}`:void 0,pe=M.status!==v.a.Idle&&M.status!==v.a.Pending&&M.status!==v.a.Cancelled&&M.status!==v.a.Skipped&&!!ue,me=a.createElement(i.TaskNode,Object.assign({className:"odc-pipeline-topology__task-node",element:B,onContextMenu:M.showContextMenu?F:void 0,contextMenuOpen:G,scaleNode:(H||G)&&$!==i.ScaleDetailsLevel.high,hideDetailsAtMedium:!0},ie,U,{badge:le,truncateLength:null===(A=null===(L=B.getData())||void 0===L?void 0:L.label)||void 0===A?void 0:A.length}),se),ge=o()("odc-pipeline-topology__task-node",{"is-link":pe});return a.createElement(i.Layer,{id:$!==i.ScaleDetailsLevel.high&&(H||G)?i.TOP_LAYER:i.DEFAULT_LAYER},a.createElement("g",{"data-test":"task "+B.getLabel(),className:ge,ref:V},a.createElement(l.a,{enableFlip:!0,triggerRef:K,content:a.createElement(E.a,{isSpecOverview:!M.status,taskName:B.getLabel(),steps:te,isFinallyTask:W})},a.createElement("g",{ref:K},pe?a.createElement(c.Link,{to:ue},me):me))))}))},6306:function(e,t,n){},6307:function(e,t,n){"use strict";var a=n(0),l=n(5999);t.a=({element:e})=>{const t=e.getStartPoint(),n=e.getEndPoint(),i=e.getSource(),r=e.getTarget();return a.createElement("path",{d:Object(l.a)(t.clone().translate(i.getBounds().width/2-1,0),n.clone().translate(-r.getBounds().width/2,0)),stroke:"var(--pf-v5-global--BorderColor--light-100)",fill:"none",transform:"translate(0.5,0.5)"})}},6308:function(e,t,n){"use strict";var a=n(0),l=n(5585),i=n(2246),r=n(5676),o=n(6049),s=n(5834);t.a=({model:e,componentFactory:t,showControlBar:n=!1,noScrollbar:c=!1})=>{const[d,u]=a.useState(null),[p,m]=a.useState(null),[g,v]=a.useState(null),f=a.useRef(null),b=e.graph.layout,h=a.useCallback(e=>{const t=e.map(e=>e.getBounds()),n=Math.floor(t.map(e=>e.width).reduce((e,t)=>Math.max(e,t),0)),a=Math.floor(t.map(e=>e.height).reduce((e,t)=>Math.max(e,t),0)),l=t.find(e=>e.height===a),i=Math.floor(t.map(e=>e.x).reduce((e,t)=>Math.max(e,t),0)),o=Math.floor(t.map(e=>e.y).reduce((e,t)=>Math.max(e,t),0));let c=0,d=0;b&&(c=Object(s.j)(b).marginx||0,d=Object(s.j)(b).marginy||0);const u=l.y+a+r.m+2*d,p=o+r.u+r.m+2*d;m({height:Math.max(u,p)+r.A,width:Math.max(i+n+r.m+2*c,r.t)})},[m,b]);if(a.useEffect(()=>{if(null===d){const n=new l.Visualization;n.registerLayoutFactory(o.c),n.registerComponentFactory(t),n.fromModel(e),n.addEventListener(l.GRAPH_POSITION_CHANGE_EVENT,()=>{f.current=n.getGraph().toModel()}),n.addEventListener(l.GRAPH_LAYOUT_END_EVENT,()=>{h(n.getGraph().getNodes())}),u(n)}else{const t=f.current;t&&(e.graph=t),d.fromModel(e),d.getGraph().layout()}},[d,e,h,t]),a.useEffect(()=>{if(e&&d){const t=f.current;t&&(e.graph=t),d.fromModel(e)}},[e,d]),!d)return null;return a.createElement(i.a,{bounds:!0,onResize:e=>{var t;v(null===(t=e.bounds)||void 0===t?void 0:t.width)}},({measureRef:e})=>{return a.createElement("div",{ref:e},a.createElement("div",{style:{height:c?null==p?void 0:p.height:Math.min(r.s/100*window.innerHeight,null==p?void 0:p.height),width:c?null==p?void 0:p.width:Math.min(null==p?void 0:p.width,g)}},a.createElement(l.VisualizationProvider,{controller:d},n?a.createElement(l.TopologyView,{controlBar:(t=d,a.createElement(l.TopologyControlBar,{controlButtons:Object(l.createTopologyControlButtons)(Object.assign(Object.assign({},l.defaultControlButtonsOptions),{zoomInCallback:Object(l.action)(()=>{t.getGraph().scaleBy(4/3)}),zoomOutCallback:Object(l.action)(()=>{t.getGraph().scaleBy(.75)}),fitToScreenCallback:Object(l.action)(()=>{t.getGraph().fit(80)}),resetViewCallback:Object(l.action)(()=>{t.getGraph().reset(),t.getGraph().layout()}),legend:!1}))}))},a.createElement(l.VisualizationSurface,null)):a.createElement(l.VisualizationSurface,null))));var t})}},6309:function(e,t,n){},6310:function(e,t,n){},6311:function(e,t,n){"use strict";var a=n(0),l=n(72),i=n(219),r=n(241),o=n(130),s=n(7304),c=n(55),d=n(16),u=n(7),p=n(5618),m=n(5648),g=n(6312),v=n(6075);t.a=({pac:e,formContextField:t})=>{const{values:n,setFieldValue:f}=Object(c.f)(),b=t?t+".":"",{method:h}=d.a(n,t)||n,{t:E}=Object(u.useTranslation)();return a.createElement(a.Fragment,null,a.createElement(l.a,null,E("pipelines-plugin~A GitHub App is already set up for this cluster. To use it, install the GitHub app on your personal account or GitHub organization.")),a.createElement("br",null),a.createElement(p.a,{extraMargin:!0},a.createElement(i.a,{fieldId:"method"},a.createElement(r.a,null,a.createElement(o.a,{span:3},a.createElement(s.a,{"data-test":"github",title:E("pipelines-plugin~Use GitHub App"),onClick:()=>f(b+"method",m.b.GITHUB),isSelected:h===m.b.GITHUB})),a.createElement(o.a,{span:3},a.createElement(s.a,{"data-test":"webhook",title:E("pipelines-plugin~Setup a webhook"),onClick:()=>f(b+"method",m.b.WEBHOOK),isSelected:h===m.b.WEBHOOK}))))),a.createElement(p.a,{fullWidth:h===m.b.WEBHOOK||!b},h===m.b.GITHUB&&a.createElement(g.a,{pac:e}),h===m.b.WEBHOOK&&a.createElement(v.a,{pac:e,formContextField:t})))}},6312:function(e,t,n){"use strict";var a=n(0),l=n(72),i=n(7);t.a=({pac:e})=>{var t,n;const{t:r}=Object(i.useTranslation)(),o=null!==(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t["app-link"])&&void 0!==n?n:"";return a.createElement(l.a,null,a.createElement(i.Trans,{t:r,ns:"pipelines-plugin"},"Use"," ",a.createElement("a",{target:"_blank",href:o,rel:"noopener noreferrer"},o)," ","link to install the GitHub Application to your repositories in your organisation/account."))}},6313:function(e,t,n){"use strict";var a=n(0),l=n(1399),i=n(970),r=n(55),o=n(16),s=n(7),c=n(5591);t.a=({formContextField:e})=>{const{t:t}=Object(s.useTranslation)(),{values:n}=Object(r.f)(),{gitProvider:d}=o.a(n,e)||n;let u;switch(d){case c.b.GITHUB:u=a.createElement(l.a,null,a.createElement(i.a,null,t("pipelines-plugin~Commit comments")),a.createElement(i.a,null,t("pipelines-plugin~Issue comments")),a.createElement(i.a,null,t("pipelines-plugin~Pull request")),a.createElement(i.a,null,t("pipelines-plugin~Pushes")));break;case c.b.GITLAB:u=a.createElement(l.a,null,a.createElement(i.a,null,t("pipelines-plugin~Merge request Events")),a.createElement(i.a,null,t("pipelines-plugin~Push Events")));break;case c.b.BITBUCKET:u=a.createElement(l.a,null,a.createElement(i.a,null,t("pipelines-plugin~Repository: Push")),a.createElement(i.a,null,t("pipelines-plugin~Pull Request: Created")),a.createElement(i.a,null,t("pipelines-plugin~Pull Request: Updated")),a.createElement(i.a,null,t("pipelines-plugin~Pull Request: Comment Created")));break;default:u=null}return u}},6406:function(e,t,n){"use strict";var a=n(0),l=n(80),i=n(55),r=n(7),o=n(5618),s=n(761),c=n(53),d=n(5),u=n(243),p=n(5669),m=n(5586),g=n(6539);n(6542);t.a=Object(u.a)(p.d,s.d)(({flags:e,builderImages:t,existingPipeline:n})=>{const{t:u}=Object(r.useTranslation)(),{values:v,setFieldValue:f}=Object(i.f)();a.useEffect(()=>{e[p.d]&&!e[s.d]&&f("pipeline.enabled",!0)},[f,e]);const b=(()=>{const e=Object(d.Dc)({group:m.PipelineModel.apiGroup,resource:m.PipelineModel.plural,namespace:p.b,verb:"list"}),t=Object(d.Dc)({group:m.PipelineModel.apiGroup,resource:m.PipelineModel.plural,namespace:Object(c.c)(),verb:"create"});return e&&t})();return e[p.d]&&b?a.createElement(o.a,null,v.image.selected||"Docker"===v.build.strategy?a.createElement(g.a,{builderImages:t,existingPipeline:n}):a.createElement(l.a,{isInline:!0,variant:"info",title:u("pipelines-plugin~Select a Builder Image and resource to see if there is a pipeline template available for this runtime.")})):null})},6539:function(e,t,n){"use strict";var a=n(0),l=n(80),i=n(88),r=n(1921),o=n(55),s=n(29),c=n(22),d=n(7),u=n(5599),p=n(5591),m=n(5),g=n(8),v=n(5669),f=n(15),b=n(5586),h=n(6211),E=n(5620),y=n(6540),k=(n(6076),function(e,t,n,a){return new(n||(n=Promise))((function(l,i){function r(e){try{s(a.next(e))}catch(e){i(e)}}function o(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}s((a=a.apply(e,t||[])).next())}))});const O=(e,t,n)=>{const a=s.a.t("pipelines-plugin~The pipeline template for Dockerfiles is not available at this time.");return e?a:s.a.t("pipelines-plugin~There are no pipeline templates available for {{builderImage}} and {{resourceType}} combination.",{builderImage:t,resourceType:n})};t.a=({builderImages:e,existingPipeline:t})=>{var n;const{t:s}=Object(d.useTranslation)(),[S,T]=a.useState(!1),[w,I]=a.useState(!1),[j,R]=a.useState(!1),[x,C]=a.useState(!1),[N,_]=a.useState([]),D=a.useRef({}),P=Object(f.Fe)(v.e),{values:{import:{recommendedStrategy:L,selectedStrategy:A},git:{url:B,type:F,ref:G,dir:U,secretResource:M},pipeline:H,image:V,build:{option:K,strategy:$},resources:z},setFieldValue:W,setFieldTouched:q}=Object(o.f)(),Y="Docker"===$,J=!c.a(t),Z="ServerlessFunction"===$,Q=e=>e.map(e=>{var t;return null===(t=e.metadata)||void 0===t?void 0:t.name}).sort().join(","),X=a.useCallback(()=>k(void 0,void 0,void 0,(function*(){const e=B&&Object(p.e)(B,F,G,U,M),t=[p.b.GITEA];e&&!t.includes(F)&&P&&(yield e.isTektonFolderPresent())?(I(!0),W("pipeline.enabled",!0),W("pipeline.type",E.a.PAC),W("pac.repository.gitUrl",B),W("pac.pipelineType",E.a.PAC),W("pac.pipelineEnabled",!0)):(W("pipeline.type",E.a.PIPELINE),W("pac.repository.gitUrl",""),W("pac.pipelineType",E.a.PIPELINE),W("pac.pipelineEnabled",!1)),R(!0)})),[B,F,G,U,M,P,W]);a.useEffect(()=>{D.current={}},[A]),a.useEffect(()=>{W("pac.pipelineEnabled",!!H.enabled),setTimeout(()=>{q("pipeline.enabled",!0)},0)},[H.enabled,W,q]),a.useEffect(()=>{K===u.a.PIPELINES&&(W("pipeline.enabled",!0),W("pac.pipelineEnabled",!0))},[K,W]),a.useEffect(()=>{let e=!1;const n={[v.h]:V.selected},a={"pipeline.openshift.io/strategy":"docker"},l={[v.g]:V.selected};let i;i=Y?a:Z?l:n;return k(void 0,void 0,void 0,(function*(){var n;let a=null;if(D.current[V.selected]&&(null===(n=D.current[V.selected])||void 0===n?void 0:n.length)||(a=yield Object(g.nb)(b.PipelineModel,{ns:v.b,labelSelector:i})),e)return;a&&(D.current[V.selected]=a);const l=D.current[V.selected]||[],r=[...l.filter(e=>{var t,n;return(null===(n=null===(t=e.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n["pipeline.openshift.io/type"])===z}),...l.filter(e=>{var t,n;return!(null===(n=null===(t=e.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n["pipeline.openshift.io/type"])})];Q(N)!==Q(r)&&_(r);const o=r[0];J?(W("pipeline.template",t),W("pipeline.templateSelected",t.metadata.name),T(!1)):H.templateSelected&&N.some(e=>e.metadata.name===H.templateSelected)?(W("pipeline.template",N.find(e=>e.metadata.name===H.templateSelected)),T(!1)):o?(W("pipeline.template",o),W("pipeline.templateSelected",o.metadata.name),T(!1)):(W("pipeline.template",null),W("pipeline.templateSelected",""),T(!0))})),J||j||X(),()=>{e=!0}},[z,L,V.selected,Y,W,H.templateSelected,N,J,t,X,Z,j]);const ee=a.useMemo(()=>{const e={};for(const t of N){const{name:n}=t.metadata;e[n]=n}return H.templateSelected&&(e[H.templateSelected]=H.templateSelected),e},[H.templateSelected,N]);if(S){const t=(null===(n=null==e?void 0:e[V.selected])||void 0===n?void 0:n.title)||s("pipelines-plugin~this Builder Image"),i=s(u.j[z]);return a.createElement(l.a,{isInline:!0,variant:"info",title:O(Y,t,i)})}return H.template?a.createElement(a.Fragment,null,K!==u.a.PIPELINES&&a.createElement(f.A,{label:s("pipelines-plugin~Add pipeline"),name:"pipeline.enabled",isDisabled:J}),H.enabled&&w&&a.createElement(a.Fragment,null,a.createElement("span",{className:"pf-c-form__label-text"},s("pipelines-plugin~Pipeline")),a.createElement(f.Lb,{className:"odc-pipeline-section-pac__radio-intent",name:"pipeline.type",onChange:e=>{return W("pac.pipelineType",t=e),W("pipeline.type",t),void setTimeout(()=>{q("pipeline.type",!0)},0);var t},options:[{value:E.a.PAC,label:a.createElement(a.Fragment,null,s("pipelines-plugin~Build, deploy and configure a Pipeline Repository"),"  ",a.createElement(i.a,{position:"right",content:a.createElement("p",null,s("pipelines-plugin~Automatically configure a new Pipeline Repository for your Git repository. This will automatically trigger new PipelineRuns on new commits or Pull Requests based on your configuration in your source code."))},a.createElement(f.o,null))),activeChildren:a.createElement(y.a,null)},{value:E.a.PIPELINE,label:a.createElement(a.Fragment,null,s("pipelines-plugin~Use Pipeline from this cluster"),"  ",a.createElement(i.a,{position:"right",content:a.createElement("p",null,s('pipelines-plugin~Use an installed Pipeline from your cluster to build and deploy your component. Pipelines are from "openshift" namespace that support the relevant runtime are shown below.'))},a.createElement(f.o,null))),activeChildren:a.createElement(a.Fragment,null,a.createElement(f.I,{name:"pipeline.templateSelected",title:ee[H.templateSelected],items:ee,disabled:J,fullWidth:!0}),a.createElement("br",null),a.createElement(r.a,{toggleText:`${s(x?"pipelines-plugin~Hide":"pipelines-plugin~Show")} ${s("pipelines-plugin~pipeline visualization")}`,isExpanded:x,onToggle:()=>C(!x)},x&&a.createElement(h.a,{pipeline:H.template})))}]})),H.enabled&&!w&&a.createElement(a.Fragment,null,a.createElement(f.I,{name:"pipeline.templateSelected",title:ee[H.templateSelected],items:ee,disabled:J,label:s("pipelines-plugin~Pipeline"),fullWidth:!0}),a.createElement(r.a,{toggleText:`${s(x?"pipelines-plugin~Hide":"pipelines-plugin~Show")} ${s("pipelines-plugin~pipeline visualization")}`,isExpanded:x,onToggle:()=>C(!x)},x&&a.createElement(h.a,{pipeline:H.template})))):a.createElement(m.T,null)}},6540:function(e,t,n){"use strict";var a=n(0),l=n(55),i=n(7),r=n(5591),o=n(5),s=n(6105),c=n(5653),d=n(6311),u=n(6075),p=n(5648),m=n(6541);n(6076);t.a=()=>{const{t:e}=Object(i.useTranslation)(),[t,n]=a.useState(!1),{values:g,setFieldValue:v}=Object(l.f)(),{git:{url:f,type:b}}=g,[h,E]=Object(s.a)();return a.useEffect(()=>{E&&h&&h.data["app-link"]?(n(!0),v("pac.repository.githubAppAvailable",!0),v("pac.repository.method",p.b.GITHUB)):v("pac.repository.method",p.b.WEBHOOK)},[h,E,v]),a.useEffect(()=>{v("pac.repository.gitUrl",f),v("name",Object(c.f)(f)),v("pac.repository.gitProvider",b)},[v,f,b]),a.useEffect(()=>{v("pac.repository.name",g.name)},[v,g.name]),h?a.createElement(a.Fragment,null,a.createElement(o.x,{textCollapsed:e("pipelines-plugin~View details"),textExpanded:e("pipelines-plugin~Hide details")},a.createElement(m.a,null)),t&&b===r.b.GITHUB?a.createElement("div",{className:"odc-pipeline-section-pac__config-type"},a.createElement(d.a,{pac:h,formContextField:"pac.repository"})):a.createElement(u.a,{pac:h,formContextField:"pac.repository"})):a.createElement(o.R,null)}},6541:function(e,t,n){"use strict";var a=n(0),l=n(6139),i=n(55),r=n(7),o=n(5599),s=n(5618),c=n(324);n(6076);t.a=()=>{const{t:e}=Object(r.useTranslation)(),[t]=Object(c.useActiveNamespace)(),{values:{name:n,resources:d}}=Object(i.f)(),u=o.j[d]?e(o.j[d]):"";return a.createElement(s.a,null,a.createElement("div",{className:"odc-pipeline-section-pac__info-panel"},a.createElement("div",{className:"odc-pipeline-section-pac__info-text"},a.createElement(r.Trans,{t:e,ns:"pipelines-plugin",values:{translatedResourceName:u,name:n}},"Once your Pipeline Repository is configured, in order to update your"," ",{translatedResourceName:u}," ",a.createElement("code",{className:"co-code"},{name:n})," automatically, update the following in your ",a.createElement("code",{className:"co-code"},".tekton")," PipelineRun:")),a.createElement("ul",null,a.createElement("li",null,a.createElement("strong",null," ",u,": "),a.createElement(l.a,{variant:l.b.inlineCompact},n)),a.createElement("li",{className:"odc-pipeline-section-pac__clipboard"},a.createElement("strong",null,e("pipelines-plugin~Internal image registry:"),"  "),a.createElement(l.a,{variant:l.b.inlineCompact},"image-registry.openshift-image-registry.svc:5000/",t,"/",n)))))}},6542:function(e,t,n){},6790:function(e,t,n){"use strict";var a=n(0),l=n(55),i=n(5591),r=n(5618),o=n(7307),s=n(6154),c=function(e,t,n,a){return new(n||(n=Promise))((function(l,i){function r(e){try{s(a.next(e))}catch(e){i(e)}}function o(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}s((a=a.apply(e,t||[])).next())}))};t.a=({builderImages:e,existingPipeline:t})=>{const{values:{image:n,import:{showEditImportStrategy:d,strategies:u,recommendedStrategy:p}},setFieldValue:m}=Object(l.f)(),g=a.useCallback(t=>c(void 0,void 0,void 0,(function*(){m("image.isRecommending",!1);const n=e&&(null==t?void 0:t.find(({type:t})=>t&&e.hasOwnProperty(t)));n&&n.type?(m("image.couldNotRecommend",!1),m("image.recommended",n.type)):(m("image.couldNotRecommend",!0),m("image.recommended",""))})),[e,m]);return a.useEffect(()=>{if(e&&p&&p.type!==i.c.S2I){const e=u.find(e=>e.type===i.c.S2I);e&&(m("image.isRecommending",!0),m("import.selectedStrategy.detectedCustomData",e.detectedCustomData),g(e.detectedCustomData)),n.selected?m("import.strategyChanged",!0):m("import.strategyChanged",!1)}},[e,g,n.selected,p,m,u]),e?a.createElement(a.Fragment,null,a.createElement(r.a,{fullWidth:!0,style:d?{}:{display:"none"}},a.createElement(o.a,{loadingImageStream:!e,builderImages:e,existingPipeline:t})),e[n.selected]&&n.tag&&a.createElement(r.a,null,a.createElement(s.a,{selectedBuilderImage:e[n.selected],selectedImageTag:n.tag}))):null}},6791:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(0),l=n(1921),i=n(55),r=n(7),o=n(5591),s=n(974),c=n(5),d=n(5669),u=n(15),p=n(6216),m=n(7312),g=n(6323),v=n(5599),f=n(5618),b=n(7313),h=n(7314),E=function(e,t,n,a){return new(n||(n=Promise))((function(l,i){function r(e){try{s(a.next(e))}catch(e){i(e)}}function o(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}s((a=a.apply(e,t||[])).next())}))};const y=({values:e,appResources:t})=>{var n,y,k,O,S,T,w,I,j,R,x,C,N,_;const{t:D}=Object(r.useTranslation)(),{project:{name:P},build:{option:L,env:A},image:{selected:B,tag:F},import:{selectedStrategy:G,knativeFuncLoaded:U}}=e,{setFieldValue:M}=Object(i.f)(),H=Object(u.Fe)(d.e),[V]=Object(p.b)(),[K,$]=Object(g.a)(B,F),z=a.useMemo(()=>{var e,n,a,l,i,r,c,d,u,p;if(G.type===o.c.SERVERLESS_FUNCTION)return A;if(L===v.a.BUILDS){const o=Object(s.getStrategyType)(null===(l=null===(a=null===(n=null===(e=null==t?void 0:t.buildConfig)||void 0===e?void 0:e.data)||void 0===n?void 0:n.spec)||void 0===a?void 0:a.strategy)||void 0===l?void 0:l.type);return((null===(d=null===(c=null===(r=((null===(i=null==t?void 0:t.buildConfig)||void 0===i?void 0:i.data)||{metadata:{namespace:P}}).spec)||void 0===r?void 0:r.strategy)||void 0===c?void 0:c[o])||void 0===d?void 0:d.env)||[]).filter(e=>!K.some(t=>t.key===e.name))}if(L===v.a.SHIPWRIGHT_BUILD){return((null===(p=((null===(u=null==t?void 0:t.shipwrightBuild)||void 0===u?void 0:u.data)||{metadata:{namespace:P}}).spec)||void 0===p?void 0:p.env)||[]).filter(e=>!K.some(t=>t.key===e.name))}return[]},[null===(n=null==t?void 0:t.buildConfig)||void 0===n?void 0:n.data,null===(y=null==t?void 0:t.shipwrightBuild)||void 0===y?void 0:y.data,A,L,K,P,G.type]),W=Object(u.Ce)(()=>{const{git:t,formType:n}=e||{};if("edit"!==n&&(null==t?void 0:t.url)){const e=Object(o.e)(null==t?void 0:t.url,null==t?void 0:t.type,null==t?void 0:t.ref,null==t?void 0:t.dir,null==t?void 0:t.secretResource),n=()=>E(void 0,void 0,void 0,(function*(){const t=yield null==e?void 0:e.isTektonFolderPresent();H&&t&&M("build.option",v.a.PIPELINES)}));e&&n()}},2e3);return a.useEffect(()=>{W()},[null===(k=null==e?void 0:e.git)||void 0===k?void 0:k.url,H,M,W]),a.useEffect(()=>{var t;"edit"===(null==e?void 0:e.formType)&&(null===(t=null==e?void 0:e.pipeline)||void 0===t?void 0:t.enabled)&&M("build.option",v.a.PIPELINES),"edit"===(null==e?void 0:e.formType)&&e.build.option===v.a.BUILDS&&M("build.option",v.a.BUILDS),"edit"===(null==e?void 0:e.formType)&&e.build.option===v.a.SHIPWRIGHT_BUILD&&M("build.option",v.a.SHIPWRIGHT_BUILD)},[e,M]),a.useEffect(()=>{var t;"edit"!==(null==e?void 0:e.formType)&&(null===(t=e.pipeline)||void 0===t?void 0:t.enabled)&&e.build.option!==v.a.PIPELINES&&(M("pipeline.enabled",!1),M("pac.pipelineEnabled",!1))},[M,null===(O=e.pipeline)||void 0===O?void 0:O.enabled,null===(S=e.build)||void 0===S?void 0:S.option,e.formType]),a.useEffect(()=>{var t,n,a,l;"edit"!==(null==e?void 0:e.formType)&&((null===(n=null===(t=null==e?void 0:e.import)||void 0===t?void 0:t.selectedStrategy)||void 0===n?void 0:n.type)!==o.c.DEVFILE&&Object(p.a)(null===(l=null===(a=null==e?void 0:e.import)||void 0===a?void 0:a.selectedStrategy)||void 0===l?void 0:l.type,V)?M("build.option",v.a.SHIPWRIGHT_BUILD):M("build.option",v.a.BUILDS))},[M,null===(w=null===(T=null==e?void 0:e.import)||void 0===T?void 0:T.selectedStrategy)||void 0===w?void 0:w.type,V,null==e?void 0:e.formType]),a.createElement(f.a,{title:D("devconsole~Build")},a.createElement(b.a,{isDisabled:"edit"===(null==e?void 0:e.formType),importStrategy:null===(j=null===(I=null==e?void 0:e.import)||void 0===I?void 0:I.selectedStrategy)||void 0===j?void 0:j.type}),(null===(R=e.build)||void 0===R?void 0:R.option)===v.a.SHIPWRIGHT_BUILD&&a.createElement(h.a,{formType:null==e?void 0:e.formType,importStrategy:null===(C=null===(x=null==e?void 0:e.import)||void 0===x?void 0:x.selectedStrategy)||void 0===C?void 0:C.type}),e.isi||(null===(N=e.pipeline)||void 0===N?void 0:N.enabled)?null:a.createElement(l.a,{toggleText:D("devconsole~Show advanced Build option")},(null===(_=e.build)||void 0===_?void 0:_.option)===v.a.BUILDS&&a.createElement(m.a,{showHeader:!1}),(G.type===o.c.SERVERLESS_FUNCTION?null!=U&&U:$)?a.createElement(u.M,{name:"build.env",label:D("devconsole~Environment variables (build and runtime)"),obj:{metadata:{namespace:P}},envs:z}):a.createElement(c.S,null)))}},7307:function(e,t,n){"use strict";var a=n(0),l=n(80),i=n(219),r=n(55),o=n(22),s=n(160),c=n(7),d=n(5),u=n(5669),p=n(15);const m=e=>a.createElement(a.Fragment,null,a.createElement(l.a,{isInline:!0,variant:"info",title:e}),a.createElement("br",null));t.a=({loadingImageStream:e,builderImages:t,existingPipeline:n})=>{var g,v,f;const{t:b}=Object(c.useTranslation)(),{values:{pipeline:h,image:E},setFieldValue:y,setFieldTouched:k,validateForm:O}=Object(r.f)(),{selected:S,recommended:T,isRecommending:w,couldNotRecommend:I,tag:j}=E,[R,x]=a.useState(!1),C=!o.a(n);a.useEffect(()=>{var e,n,a;S&&!j&&(y("image.tag",null!==(a=null===(n=null===(e=null==t?void 0:t[S])||void 0===e?void 0:e.recentTag)||void 0===n?void 0:n.name)&&void 0!==a?a:""),k("image.tag",!0))},[S,y,k,t,j]);const N=Object(p.Kc)("image.name","selector"),_=(null===(g=null==t?void 0:t[S])||void 0===g?void 0:g.title)||b("devconsole~this Builder Image"),D=h.template?(null===(v=h.template.metadata)||void 0===v?void 0:v.labels[u.h])!==(null===(f=null==n?void 0:n.metadata)||void 0===f?void 0:f.labels[u.h])&&m(b("devconsole~Changing to this builder image will update your associated Pipeline and remove any customization you may have applied.")):m(b("devconsole~There are no supported pipelines available for {{builderImage}}. Changing to this builder image will disconnect your associated Pipeline.",{builderImage:_}));return 1===s.a(t).length?a.createElement(p.cb,{itemList:t,name:"image.selected",loadingItems:e,recommended:T}):a.createElement(i.a,{fieldId:N,label:b("devconsole~Builder Image")},w&&!T&&a.createElement(a.Fragment,null,a.createElement(d.T,null)," ",b("devconsole~Detecting recommended Builder Images...")),(I||T&&!t.hasOwnProperty(T))&&a.createElement(a.Fragment,null,a.createElement(l.a,{variant:"warning",title:b("devconsole~Unable to detect the Builder Image."),isInline:!0},b("devconsole~Select the most appropriate one from the list to continue.")),a.createElement("br",null)),R&&D,a.createElement(p.cb,{itemList:t,name:"image.selected",loadingItems:e,recommended:E.recommended,onSelect:()=>{y("image.tag","",!1),k("image.tag",!0),C&&x(!0),O()}}))}},7312:function(e,t,n){"use strict";var a=n(0),l=n(55),i=n(7),r=n(15),o=n(5618);t.a=({showHeader:e})=>{var t,n,s;const{t:c}=Object(i.useTranslation)(),{values:{build:d}}=Object(l.f)();return a.createElement(o.a,{title:e&&c("devconsole~Build configuration"),extraMargin:!0},"boolean"==typeof(null===(t=null==d?void 0:d.triggers)||void 0===t?void 0:t.webhook)&&a.createElement(r.A,{name:"build.triggers.webhook",label:c("devconsole~Configure a webhook build trigger")}),"boolean"==typeof(null===(n=null==d?void 0:d.triggers)||void 0===n?void 0:n.image)&&a.createElement(r.A,{name:"build.triggers.image",label:c("devconsole~Automatically build a new Image when the Builder Image changes")}),"boolean"==typeof(null===(s=null==d?void 0:d.triggers)||void 0===s?void 0:s.config)&&a.createElement(r.A,{name:"build.triggers.config",label:c("devconsole~Launch the first build when the build configuration is created")}))}},7313:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(0),l=n(55),i=n(1992),r=n(7),o=n(5587),s=n(53),c=n(5),d=n(5669),u=n(5586),p=n(15),m=n(761),g=n(6216),v=n(5599);const f=({isDisabled:e,importStrategy:t})=>{const{t:n}=Object(r.useTranslation)(),{setFieldValue:f}=Object(l.f)(),b=Object(p.Fe)(m.d),h=Object(g.c)(),[E,y]=Object(g.b)(),k=Object(p.Fe)(d.d),O=(()=>{const e=Object(c.Dc)({group:u.PipelineModel.apiGroup,resource:u.PipelineModel.plural,namespace:d.b,verb:"list"}),t=Object(c.Dc)({group:u.PipelineModel.apiGroup,resource:u.PipelineModel.plural,namespace:Object(s.c)(),verb:"create"});return e&&t})(),S=a.useMemo(()=>{const e=[];return h&&Object(g.a)(t,E)&&e.push({label:n(v.i[v.a.SHIPWRIGHT_BUILD]),value:v.a.SHIPWRIGHT_BUILD,description:n("devconsole~Shipwright is an extensible framework for building container images on OpenShift Container Platform cluster.")}),b&&e.push({label:n(v.i[v.a.BUILDS]),value:v.a.BUILDS,description:n("devconsole~Build configuration describes build definitions used for transforming source code into a runnable container image.")}),k&&O&&t!==o.c.DEVFILE&&e.push({label:n(v.i[v.a.PIPELINES]),value:v.a.PIPELINES,description:n("devconsole~Build using pipeline describes a process for transforming source code into a runnable container image. Pipelines support can be added using Red Hat OpenShift Pipelines Operator.")}),e},[b,h,k,O,E,t,n]),T=a.useCallback(e=>{const t=i.a(v.i,t=>n(t)===e);f("build.option",t)},[f,"build.option",n]);return y?a.createElement(p.Zb,{name:"build.option",label:n("devconsole~Build option"),options:S,onChange:T,isDisabled:e,getLabelFromValue:e=>n(v.i[e]),helpText:a.createElement("p",{className:"pf-c-form__helper-text"},a.createElement(r.Trans,{t:n,ns:"devconsole"},"Build option to use for transforming source code into a runnable container image.")),toggleOnSelection:!0}):a.createElement(c.T,null)}},7314:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(0),l=n(55),i=n(1992),r=n(7),o=n(6216),s=n(5591),c=n(5),d=n(15),u=n(5786);const p=({formType:e,importStrategy:t})=>{const{t:n}=Object(r.useTranslation)(),[p,m]=Object(o.b)(),{setFieldValue:g}=Object(l.f)(),v=a.useMemo(()=>{const e=[];return p.buildah&&t===s.c.DOCKERFILE&&e.push({label:n(u.c[u.a.BUILDAH]),value:u.a.BUILDAH}),p.s2i&&t===s.c.S2I&&e.push({label:n(u.c[u.a.S2I]),value:u.a.S2I}),e},[p,t,n]);a.useEffect(()=>{"edit"!==e&&(t===s.c.S2I?g("build.clusterBuildStrategy",u.a.S2I):t===s.c.DOCKERFILE&&g("build.clusterBuildStrategy",u.a.BUILDAH))},[g,t,e]);const f=a.useCallback(e=>{const t=i.a(u.c,t=>n(t)===e);g("build.clusterBuildStrategy",t)},[g,n]);return m?a.createElement(d.Zb,{"data-test-id":"cluster-build-strategy-field",name:"build.clusterBuildStrategy",label:n("devconsole~Cluster Build Strategy"),onChange:f,isDisabled:"edit"===e,ariaLabel:n("devconsole~Cluster Build Strategy"),placeholderText:n("devconsole~Select Cluster Build Strategy"),helpText:n("devconsole~Cluster Build Strategies define a shared group of steps, needed to fullfil the application build process."),getLabelFromValue:e=>n(u.c[e]),options:v,toggleOnSelection:!0}):a.createElement(c.T,null)}}}]);
//# sourceMappingURL=git-import-form~source-to-image-form-chunk-e6daaab85831bd2c7437.min.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[261],{11901:function(e,t,n){"use strict";var r=n(0),s=n(22),o=n(7),i=n(6146),a=n(118);t.a=({handleSubmit:e,cancel:t,isSubmitting:n,status:c,errors:u})=>{const{t:l}=Object(o.useTranslation)();return r.createElement("form",{className:"modal-content",onSubmit:e},r.createElement(a.d,null,l("console-app~Edit resource limits")),r.createElement(a.a,null,r.createElement(i.a,{hideTitle:!0})),r.createElement(a.c,{submitDisabled:!s.a(u)||n,inProgress:n,errorMessage:null==c?void 0:c.submitError,submitText:l("console-app~Save"),cancel:t}))}},5618:function(e,t,n){"use strict";var r=n(0),s=n(297),o=n(18),i=n.n(o);n(5732);const a={display:"flex",flex:1,flexDirection:"column",margin:"var(--pf-v5-global--spacer--md) 0"};t.a=({title:e,subTitle:t,fullWidth:n,children:o,flexLayout:c,extraMargin:u,dataTest:l,style:m})=>r.createElement("div",{className:i()("pf-v5-c-form",{"co-m-pane__form":!n,"odc-form-section--extra-margin":u}),style:Object.assign(Object.assign({},c?a:{}),m||{}),"data-test":l},e&&r.createElement("h2",{className:"odc-form-section__heading"},e),t&&r.createElement(s.a,null,t),o)},5620:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.PAC="pac",e.PIPELINE="pipeline"}(r||(r={}))},5621:function(e,t,n){"use strict";n.d(t,"f",(function(){return b})),n.d(t,"l",(function(){return h})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return g})),n.d(t,"m",(function(){return p})),n.d(t,"o",(function(){return f})),n.d(t,"n",(function(){return q})),n.d(t,"k",(function(){return E})),n.d(t,"h",(function(){return j})),n.d(t,"g",(function(){return w})),n.d(t,"e",(function(){return y})),n.d(t,"d",(function(){return x})),n.d(t,"b",(function(){return S})),n.d(t,"j",(function(){return P})),n.d(t,"i",(function(){return R}));var r=n(4413),s=n(689),o=n(5),i=n(5620),a=n(2221),c=n(5624),u=n(5599),l=n(5651);const m=/^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$/,d=/^\/.*$/,b=/^((((ssh|git|https?:?):\/\/:?)(([^\s@]+@|[^@]:?)[-\w.]+(:\d\d+:?)?(\/[-\w.~/?[\]!$&'()*+,;=:@%]*:?)?:?))|([^\s@]+@[-\w.]+:[-\w.~/?[\]!$&'()*+,;=:@%]*?:?))$/,h=s.object().shape({name:s.string().matches(/^[a-z0-9]([-a-z0-9]*[a-z0-9])?$/,"Name must consist of lower case alphanumeric characters or '-' and must start and end with an alphanumeric character.").required("Required")}),v=s.object().shape({selectedKey:s.string(),name:s.string().max(63,"Cannot be longer than 63 characters.").when("selectedKey",{is:a.b,then:s.string().required("Required")})}),g=e=>s.object().shape({replicas:s.number().transform(e=>r.a(e)?void 0:e).test(Object(c.b)(e("devconsole~Replicas must be an integer."))).min(0,e("devconsole~Replicas must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Replicas must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})).test({name:"isEmpty",test:e=>void 0!==e,message:e("devconsole~This field cannot be empty.")})}),p=s.string().oneOf([u.k.OpenShift,u.k.Kubernetes,u.k.KnativeService]).required(),f=e=>s.object().when("resources",{is:u.k.KnativeService,then:s.object().shape({scaling:s.object({minpods:s.number().transform(e=>r.a(e)?void 0:e).test(Object(c.b)(e("devconsole~Min Pods must be an integer."))).min(0,e("devconsole~Min Pods must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Min Pods must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})),maxpods:s.number().transform(e=>r.a(e)?void 0:e).test(Object(c.b)(e("devconsole~Max Pods must be an integer."))).min(1,e("devconsole~Max Pods must be greater than or equal to 1.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Max Pods must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})).test({test(e){const{minpods:t}=this.parent;return!e||e>=t},message:e("devconsole~Max Pods must be greater than or equal to Min Pods.")}),concurrencytarget:s.number().transform(e=>r.a(e)?void 0:e).test(Object(c.b)(e("devconsole~Concurrency target must be an integer."))).min(0,e("devconsole~Concurrency target must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Concurrency target must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})),concurrencylimit:s.number().transform(e=>r.a(e)?void 0:e).test(Object(c.b)(e("devconsole~Concurrency limit must be an integer."))).min(0,e("devconsole~Concurrency limit must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Concurrency limit must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})),concurrencyutilization:s.number().transform(e=>r.a(e)?void 0:e).min(0,e("devconsole~Concurrency utilization must be between 0 and 100.")).max(100,e("devconsole~Concurrency utilization must be between 0 and 100.")),autoscale:s.object().shape({autoscalewindow:s.number().transform(e=>r.a(e)?void 0:e).test({test(e){if(e){const{autoscalewindowUnit:t}=this.parent,n=((e,t)=>{switch(t){case"m":return 60*e;case"h":return 3600*e;default:return e}})(e,t);return n>=6&&n<=3600}return!0},message:e("devconsole~Autoscale window must be between 6s and 1h.")})})}),domainMapping:s.array().of(s.string().transform(l.f).matches(m,{message:e("devconsole~Domain name must consist of lower-case letters, numbers, periods, and hyphens. It must start and end with a letter or number."),excludeEmptyString:!0}).test("domainname-has-segements",e("devconsole~Domain name must consist of at least two segments separated by dots."),(function(e){return e.split(".").length>=2})))})}),q=e=>s.object().shape({secure:s.boolean(),tls:s.object().when("secure",{is:!0,then:s.object({termination:s.string().required(e("devconsole~Please select a termination type."))})}),hostname:s.string().matches(m,{message:e("devconsole~Hostname must consist of lower-case letters, numbers, periods, and hyphens. It must start and end with a letter or number."),excludeEmptyString:!0}).max(253,e("devconsole~Cannot be longer than 253 characters.")),path:s.string().matches(d,{message:e("devconsole~Path must start with /."),excludeEmptyString:!0}),unknownTargetPort:s.number().typeError(e("devconsole~Port must be an integer.")).integer(e("devconsole~Port must be an integer.")).min(1,e("devconsole~Port must be between 1 and 65535.")).max(65535,e("devconsole~Port must be between 1 and 65535."))}),E=e=>s.object().shape({cpu:s.object().shape({request:s.number().transform(e=>r.a(e)?void 0:e).min(0,e("devconsole~Request must be greater than or equal to 0.")).test({test(e){const{requestUnit:t,limit:n,limitUnit:r}=this.parent;return void 0===n||Object(o.Ib)(`${e}${t}`)<=Object(o.Ib)(`${n}${r}`)},message:e("devconsole~CPU request must be less than or equal to limit.")}),requestUnit:s.string(e("devconsole~Unit must be millicores or cores.")).ensure(),limitUnit:s.string(e("devconsole~Unit must be millicores or cores.")).ensure(),limit:s.number().transform(e=>r.a(e)?void 0:e).min(0,e("devconsole~Limit must be greater than or equal to 0.")).test({test(e){const{request:t,requestUnit:n,limitUnit:r}=this.parent;return void 0===e||Object(o.Ib)(`${e}${r}`)>=Object(o.Ib)(`${t}${n}`)},message:e("devconsole~CPU limit must be greater than or equal to request.")})}),memory:s.object().shape({request:s.number().transform(e=>r.a(e)?void 0:e).min(0,e("devconsole~Request must be greater than or equal to 0.")).test({test(e){const{requestUnit:t,limit:n,limitUnit:r}=this.parent;return void 0===n||Object(o.Ib)(`${e}${t}`)<=Object(o.Ib)(`${n}${r}`)},message:e("devconsole~Memory request must be less than or equal to limit.")}),requestUnit:s.string(e("devconsole~Unit must be Mi or Gi.")),limit:s.number().transform(e=>r.a(e)?void 0:e).min(0,e("devconsole~Limit must be greater than or equal to 0.")).test({test(e){const{request:t,requestUnit:n,limitUnit:r}=this.parent;return void 0===e||Object(o.Ib)(`${t}${n}`)<=Object(o.Ib)(`${e}${r}`)},message:e("devconsole~Memory limit must be greater than or equal to request.")}),limitUnit:s.string(e("devconsole~Unit must be Mi or Gi."))})}),j=e=>s.object().when("build",{is:e=>"Source"===e.strategy,then:s.object().shape({selected:s.string().required(e("devconsole~Required")),tag:s.string().required(e("devconsole~Required"))})}),w=e=>s.object().shape({url:s.string().max(2e3,e("devconsole~Please enter a URL that is less then 2000 characters.")).matches(b,e("devconsole~Invalid Git URL.")).required(e("devconsole~Required")),type:s.string().when("showGitType",{is:!0,then:s.string().required(e("devconsole~We failed to detect the Git type. Please choose a Git type."))}),showGitType:s.boolean()}),y=e=>s.object().when("build",{is:e=>"Docker"===e.strategy,then:s.object().shape({containerPort:s.number().test(Object(c.b)(e("devconsole~Container port should be an integer"))),dockerfilePath:s.string().required(e("devconsole~Required"))})}),x=e=>s.object().when("build",{is:e=>"Devfile"===e.strategy,then:s.object().shape({devfilePath:s.string().required(e("devconsole~Required")),devfileContent:s.string().min(1,e("devconsole~Required")).required(e("devconsole~Required")),devfileHasError:s.boolean().oneOf([!1]),devfileSuggestedResources:s.object().required(e("devconsole~Required"))})}),S=s.object().shape({strategy:s.string()}),P=e=>s.object().shape({name:s.string().required(e("devconsole~Required")),image:s.object().required(e("devconsole~Required")),tag:s.string(),status:s.string().required(e("devconsole~Required"))}),R=s.object().when(["enabled","build.option","type"],{is:(e,t,n)=>(e||t===u.a.PIPELINES)&&n!==i.a.PAC,then:s.object().shape({templateSelected:s.string().required()})})},5624:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));const r=e=>({test:e=>null==e||Number.isInteger(e),message:e}),s=/^[a-z]([a-z0-9_]-?)*[a-z0-9]$/},5651:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return m}));var r=n(8),s=n(1402);const o=e=>{const[t,n]=null==e?void 0:e.match(/^[0-9]+|[a-zA-Z]*/g);return{autoscalewindow:Number(t)||"",autoscalewindowUnit:n||"s",defaultAutoscalewindowUnit:n||"s"}},i=/ *\([^)]*\) */g,a=e=>e.replace(i,""),c=(e,t)=>{var n;if(!(null===(n=e.spec)||void 0===n?void 0:n.ref))return null;const{apiVersion:o,kind:i,name:a}=e.spec.ref;return Object(r.n)(s.l)===o&&i===s.l.kind&&a!==t?a:null},u=(e,t)=>[...new Set(null==e?void 0:e.filter(e=>!((null==t?void 0:t.length)>0)||(null==t?void 0:t.includes(a(e)))).map(e=>a(e)))],l=e=>e.some(e=>new RegExp(i).test(e)),m=(e,t=[],n)=>e.filter(e=>l([e])).map(e=>{var r,s;const o=null==t?void 0:t.find(t=>t.metadata.name===a(e));return o&&(null===(s=null===(r=o.spec)||void 0===r?void 0:r.ref)||void 0===s?void 0:s.name)!==n?o:null}).filter(e=>!!e)},5732:function(e,t,n){},6018:function(e,t,n){"use strict";n.r(t),n.d(t,"resourceLimitsModal",(function(){return h}));var r=n(0),s=n(55),o=n(7),i=n(689),a=n(5621),c=n(40),u=n(8),l=n(15),m=n(11901);const d=e=>i.object().shape({limits:Object(a.k)(e)}),b=e=>{const{t:t}=Object(o.useTranslation)(),n={limits:Object(l.Rc)(e.resource),container:e.resource.spec.template.spec.containers[0].name};return r.createElement(s.b,{initialValues:n,onSubmit:(t,n)=>{const{limits:{cpu:r,memory:s}}=t,o=Object(l.Cd)({cpu:r,memory:s});return Object(u.pb)(e.model,e.resource,[{op:"replace",path:"/spec/template/spec/containers/0/resources",value:o}]).then(()=>{e.close()}).catch(e=>{n.setStatus({submitError:e})})},validationSchema:d(t)},t=>r.createElement(m.a,Object.assign({},t,e)))},h=Object(c.m)(e=>r.createElement(b,Object.assign({},e)))},6146:function(e,t,n){"use strict";var r=n(0),s=n(55),o=n(7),i=n(5),a=n(10),c=n(15),u=n(5599),l=n(5618);t.a=({hideTitle:e})=>{const{t:t}=Object(o.useTranslation)(),{values:{container:n}}=Object(s.f)();return r.createElement(l.a,{title:!e&&t("devconsole~Resource limit"),subTitle:t("devconsole~Resource limits control how much CPU and memory a container will consume on a node."),fullWidth:!0},n&&r.createElement("span",null,t("devconsole~Container"),"  ",r.createElement(i.fb,{kind:a.ContainerModel.kind})," ",n),r.createElement("div",{className:"co-section-heading-tertiary"},t("devconsole~CPU")),r.createElement(c.Pb,{name:"limits.cpu.request",label:t("devconsole~Request"),unitName:"limits.cpu.requestUnit",unitOptions:u.b,helpText:t("devconsole~The minimum amount of CPU the Container is guaranteed.")}),r.createElement(c.Pb,{name:"limits.cpu.limit",label:t("devconsole~Limit"),unitName:"limits.cpu.limitUnit",unitOptions:u.b,helpText:t("devconsole~The maximum amount of CPU the Container is allowed to use when running.")}),r.createElement("div",{className:"co-section-heading-tertiary"},t("devconsole~Memory")),r.createElement(c.Pb,{name:"limits.memory.request",label:t("devconsole~Request"),unitName:"limits.memory.requestUnit",unitOptions:u.g,helpText:t("devconsole~The minimum amount of Memory the Container is guaranteed.")}),r.createElement(c.Pb,{name:"limits.memory.limit",label:t("devconsole~Limit"),unitName:"limits.memory.limitUnit",unitOptions:u.g,helpText:t("devconsole~The maximum amount of Memory the Container is allowed to use when running.")}))}}}]);
//# sourceMappingURL=resource-limits-modal-chunk-2bd067ebd999dce5b2ec.min.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[260],{5537:function(e,t,a){"use strict";a.r(t),a.d(t,"AddRequestHeaderPage",(function(){return b}));var r=a(0),n=a(137),l=a(7),c=a(14),i=a(966),s=a(19),o=a(10),u=a(8),m=a(5),d=a(5957),p=a(5958),h=a(6040);const b=()=>{const e=Object(c.useNavigate)(),[t,a]=r.useState(!1),[b,f]=r.useState(""),[g,v]=r.useState("request-header"),[E,y]=r.useState(""),[N,C]=r.useState(""),[q,T]=r.useState([]),[O,P]=r.useState([]),[A,R]=r.useState([]),[j,k]=r.useState([]),[S,_]=r.useState([]),[w,x]=r.useState(""),{t:U}=Object(l.useTranslation)(),L=e=>(a(!0),e.then(e=>(e=>(a(!1),f(""),e))(e),e=>(e=>{const t=e.message||U("public~An error occurred. Please try again.");return a(!1),f(t),Promise.reject(t)})(e))),M=(e,t,a)=>{const r={name:g,type:"RequestHeader",mappingMethod:"claim",requestHeader:{loginURL:N,challengeURL:E,clientCommonNames:q,headers:O,preferredUsernameHeaders:A,nameHeaders:j,emailHeaders:S,ca:{name:t}}};return L(Object(d.a)(e,r,a))},H=U("public~Add Identity Provider: Request Header");return r.createElement("div",{className:"co-m-pane__form"},r.createElement(n.a,null,r.createElement("title",null,H)),r.createElement(m.Z,{title:H,helpText:U("public~Use request header to identify users from request header values. It is typically used in combination with an authenticating proxy, which sets the request header value.")}),r.createElement("div",{className:"co-m-pane__body"},r.createElement("form",{onSubmit:t=>{t.preventDefault(),w?(f(""),L(Object(d.b)()).then(t=>{M(t,d.c.ca,!0).then(()=>(()=>{if(!w)return Promise.resolve(null);const e={apiVersion:"v1",kind:"ConfigMap",metadata:{generateName:"request-header-ca-",namespace:"openshift-config"},data:{"ca.crt":w}};return L(Object(u.jb)(o.ConfigMapModel,e))})().then(e=>M(t,e.metadata.name)).then(()=>{Object(d.d)(e)})).catch(e=>{f(e)})})):f(U("public~You must specify a CA File."))},name:"form",className:"co-m-pane__body-group"},r.createElement(p.a,{value:g,onChange:e=>v(e.currentTarget.value)}),r.createElement("div",{className:"co-form-section__separator"}),r.createElement("h3",{className:"co-required"},U("public~URLs")),r.createElement("p",{className:"co-m-pane__explanation"},U("public~At least one URL must be provided.")),r.createElement("div",{className:"form-group"},r.createElement("label",{className:"control-label",htmlFor:"challenge-url"},U("public~Challenge URL")),r.createElement("input",{className:"pf-v5-c-form-control",type:"url",onChange:e=>y(e.currentTarget.value),value:E,id:"challenge-url","aria-describedby":"challenge-url-help"}),r.createElement("div",{className:"help-block",id:"challenge-url-help"},U("public~The URL to redirect unauthenticated requests from OAuth clients which expect interactive logins."))),r.createElement("div",{className:"form-group"},r.createElement("label",{className:"control-label",htmlFor:"login-url"},U("public~Login URL")),r.createElement("input",{className:"pf-v5-c-form-control",type:"url",onChange:e=>C(e.currentTarget.value),value:N,id:"login-url","aria-describedby":"login-url-help"}),r.createElement("div",{className:"help-block",id:"login-url-help"},U("public~The URL to redirect unauthenticated requests from OAuth clients which expect WWW-Authenticate challenges."))),r.createElement("div",{className:"co-form-section__separator"}),r.createElement("h3",null,U("public~More options")),r.createElement(h.a,{value:w,onChange:e=>x(e),isRequired:!0}),r.createElement(m.P,{label:U("public~Client common names"),onChange:e=>T(e),helpText:U("public~The set of common names to require a match from.")}),r.createElement(m.P,{label:U("public~Headers"),onChange:e=>P(e),helpText:U("public~The set of headers to check for identity information."),required:!0}),r.createElement(m.P,{label:U("public~Preferred username headers"),onChange:e=>R(e),helpText:U("public~The set of headers to check for the preferred username.")}),r.createElement(m.P,{label:U("public~Name headers"),onChange:e=>k(e),helpText:U("public~The set of headers to check for the display name.")}),r.createElement(m.P,{label:U("public~Email headers"),onChange:e=>_(e),helpText:U("public~The set of headers to check for the email address.")}),r.createElement(m.g,{errorMessage:b,inProgress:t},r.createElement(i.a,{className:"pf-v5-c-form"},r.createElement(s.a,{type:"submit",variant:"primary"},U("public~Add")),r.createElement(s.a,{type:"button",variant:"secondary",onClick:()=>e(-1)},U("public~Cancel")))))))}},5957:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return u}));var r=a(22),n=a(10),l=a(8),c=a(5);const i=()=>Object(l.kb)(n.OAuthModel,"cluster"),s=(e,t,a)=>{const c=r.a(e.spec.identityProviders)?{op:"add",path:"/spec/identityProviders",value:[t]}:{op:"add",path:"/spec/identityProviders/-",value:t};return Object(l.pb)(n.OAuthModel,e,[c],a?{queryParams:{dryRun:"All"}}:{})},o=e=>{e(Object(c.uc)(n.OAuthModel,"cluster")+"?idpAdded=true")},u={secret:"secret-name",ca:"ca-name"}},5958:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a(0),n=a(7);const l=({value:e,onChange:t})=>{const{t:a}=Object(n.useTranslation)();return r.createElement("div",{className:"form-group"},r.createElement("label",{className:"control-label co-required",htmlFor:"idp-name"},a("public~Name")),r.createElement("input",{className:"pf-v5-c-form-control",type:"text",onChange:t,value:e,"aria-describedby":"idp-name-help",id:"idp-name",required:!0}),r.createElement("p",{className:"help-block",id:"idp-name-help"},a("public~Unique name of the new identity provider. This cannot be changed later.")))}},6040:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a(0),n=a(7),l=a(5);const c=e=>r.createElement(l.c,Object.assign({loader:()=>Promise.resolve().then(a.bind(null,2223)).then(e=>e.DroppableFileInput)},e)),i=({value:e,onChange:t,isRequired:a=!1})=>{const{t:l}=Object(n.useTranslation)();return r.createElement("div",{className:"form-group"},r.createElement(c,{onChange:t,inputFileData:e,id:"idp-file-input",label:l("public~CA file"),isRequired:a,hideContents:!0}))}}}]);
//# sourceMappingURL=request-header-idp-form-chunk-aa40ba0d95dea95dc19b.min.js.map
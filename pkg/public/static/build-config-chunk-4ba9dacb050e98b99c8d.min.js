(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{4498:function(e,t,a){"use strict";a.r(t),a.d(t,"BuildConfigsDetails",(function(){return k})),a.d(t,"BuildConfigsDetailsPage",(function(){return C})),a.d(t,"BuildConfigsList",(function(){return D})),a.d(t,"BuildConfigsPage",(function(){return F}));var i=a(0),l=a(7),n=a(14),s=a(18),c=a(54),r=a(8),o=a(415),d=a(40),u=a(131),m=a(5),p=a(974),b=a(409),v=a(10),g=a(137),f=a(108),B=a(15),E=a(2109);const y=(e,t)=>({labelKey:"public~Start build",callback:()=>Object(o.d)(t).then(e=>Object(n.redirect)(Object(m.sc)(e,Object(r.Db)(e)))).catch(e=>{const t=e.message;Object(u.s)({error:t})}),accessReview:{group:e.apiGroup,resource:e.plural,subresource:"instantiate",name:t.metadata.name,namespace:t.metadata.namespace,verb:"create"}}),N=e=>[y,(t,a)=>((e,t,a)=>({labelKey:"public~Start last run",callback:()=>Object(o.b)(a).then(e=>Object(n.redirect)(Object(m.sc)(e,Object(r.Db)(e)))).catch(e=>{const t=e.message;Object(u.s)({error:t})}),hidden:!a,accessReview:{group:e.apiGroup,resource:e.plural,subresource:"instantiate",name:t.metadata.name,namespace:t.metadata.namespace,verb:"create"}}))(t,a,e),...m.F.getExtensionsActionsForKind(v.BuildConfigModel),...m.F.factory.common],k=({obj:e})=>{const t=e.spec.strategy.type===p.BuildStrategyType.JenkinsPipeline,{t:a}=Object(l.useTranslation)();return i.createElement(i.Fragment,null,i.createElement("div",{className:"co-m-pane__body"},t&&i.createElement(p.PipelineBuildStrategyAlert,{obj:e}),i.createElement(m.ob,{text:a("public~BuildConfig details")}),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-sm-6"},i.createElement(m.lb,{resource:e})),i.createElement("div",{className:"col-sm-6"},i.createElement(m.f,{resource:e})))),i.createElement(m.Bb,{resource:e}),i.createElement(m.e,{resource:e}))},j=[m.mc.details(k),m.mc.editYaml(),m.mc.builds(({obj:e})=>i.createElement(p.BuildsPage,{namespace:e.metadata.namespace,showTitle:!1,selector:{"openshift.io/build-config.name":e.metadata.name}})),m.mc.envEditor(p.BuildEnvironmentComponent),m.mc.events(b.ResourceEventStream)],C=e=>{const t=Object(r.Hb)(v.BuildModel),[a,l,n]=Object(f.a)({kind:t,namespace:e.namespace,selector:{matchLabels:{"openshift.io/build-config.name":e.name}},isList:!0}),s=l&&!n?(e=>e.reduce((e,t)=>{var a;const i=new Date(null===(a=null==e?void 0:e.metadata)||void 0===a?void 0:a.creationTimestamp).getTime();return new Date(t.metadata.creationTimestamp).getTime()>i?t:e},e[0]))(a):null,c=N(s);return i.createElement(d.a,Object.assign({},e,{kind:"BuildConfig",menuActions:c,pages:j,customData:s}))};C.displayName="BuildConfigsDetailsPage";const T=["","","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg",m.F.columnClass],w=({obj:e})=>{var t,a,l,n,c,r;const o=null==e?void 0:e.latestBuild,u=N(o);return i.createElement(i.Fragment,null,i.createElement(d.k,{className:T[0]},i.createElement(m.hb,{kind:"BuildConfig",name:e.metadata.name,namespace:e.metadata.namespace})),i.createElement(d.k,{className:s(T[1],"co-break-word"),columnID:"namespace"},i.createElement(m.hb,{kind:"Namespace",name:e.metadata.namespace})),i.createElement(d.k,{className:T[2]},o?i.createElement(m.hb,{kind:"Build",name:null===(t=o.metadata)||void 0===t?void 0:t.name,namespace:null===(a=o.metadata)||void 0===a?void 0:a.namespace}):"-"),i.createElement(d.k,{className:T[3]},o?i.createElement(B.cc,{status:null===(l=o.status)||void 0===l?void 0:l.phase}):"-"),i.createElement(d.k,{className:T[4]},o?i.createElement(m.xb,{timestamp:null===(n=o.metadata)||void 0===n?void 0:n.creationTimestamp}):"-"),i.createElement(d.k,{className:T[5]},Object(E.a)(null===(c=null==o?void 0:o.status)||void 0===c?void 0:c.startTimestamp,null===(r=null==o?void 0:o.status)||void 0===r?void 0:r.completionTimestamp)),i.createElement(d.k,{className:T[6]},i.createElement(m.gb,{actions:u,kind:"BuildConfig",resource:e})))},h=e=>e.spec.strategy.type,O=e=>{var t,a;return(null===(a=null===(t=null==e?void 0:e.latestBuild)||void 0===t?void 0:t.status)||void 0===a?void 0:a.phase)||"Unknown"},D=e=>{const{t:t}=Object(l.useTranslation)(),a=()=>[{title:t("public~Name"),sortField:"metadata.name",transforms:[c.a],props:{className:T[0]}},{title:t("public~Namespace"),sortField:"metadata.namespace",transforms:[c.a],props:{className:T[1]},id:"namespace"},{title:t("public~Last run"),transforms:[c.a],sortField:"latestBuild.metadata.name",props:{className:T[2]}},{title:t("public~Last run status"),transforms:[c.a],sortField:"latestBuild.status.phase",props:{className:T[3]}},{title:t("public~Last run time"),transforms:[c.a],sortField:"latestBuild.status.completionTimestamp",props:{className:T[4]}},{title:t("public~Last run duration"),transforms:[c.a],sortFunc:"latestRunDuration",props:{className:T[5]}},{title:"",props:{className:T[6]}}];a.displayName="BuildConfigsTableHeader";const n=Object(r.Hb)(v.BuildModel),[s,o,u]=Object(f.a)({kind:n,namespace:e.namespace,isList:!0}),m=i.useMemo(()=>({builds:{latestByBuildName:s.reduce((e,t)=>{var a;const i=null===(a=t.metadata.labels)||void 0===a?void 0:a["openshift.io/build-config.name"];return e[`${i}-${t.metadata.namespace}`]&&!((e,t)=>{var a,i;const l=new Date(null===(a=null==t?void 0:t.metadata)||void 0===a?void 0:a.creationTimestamp);return new Date(null===(i=null==e?void 0:e.metadata)||void 0===i?void 0:i.creationTimestamp).getTime()-l.getTime()>0})(t,e[`${i}-${t.metadata.namespace}`])||(e[`${i}-${t.metadata.namespace}`]=t),e},{}),loaded:o,error:u}}),[s,o,u]),p=e.data?e.data.map(e=>(e.latestBuild=m.builds.latestByBuildName[`${e.metadata.name}-${e.metadata.namespace}`],e)):[];return i.createElement(d.j,Object.assign({},e,{data:p,"aria-label":t("public~BuildConfigs"),Header:a,Row:w,customSorts:{latestRunDuration:e=>{var t,a,i,l;return Object(E.a)(null===(a=null===(t=null==e?void 0:e.latestBuild)||void 0===t?void 0:t.status)||void 0===a?void 0:a.startTimestamp,null===(l=null===(i=null==e?void 0:e.latestBuild)||void 0===i?void 0:i.status)||void 0===l?void 0:l.completionTimestamp)}},virtualize:!0}))};D.displayName="BuildConfigsList";const F=e=>{var t,a;const{t:s}=Object(l.useTranslation)(),c=Object(n.useParams)(),r=[{id:p.BuildStrategyType.Docker,title:s("public~Docker")},{id:p.BuildStrategyType.Devfile,title:s("public~Devfile")},{id:p.BuildStrategyType.JenkinsPipeline,title:s("public~JenkinsPipeline")},{id:p.BuildStrategyType.Source,title:s("public~Source")},{id:p.BuildStrategyType.Custom,title:s("public~Custom")}],o=[{id:"New",title:s("public~New")},{id:"Pending",title:s("public~Pending")},{id:"Running",title:s("public~Running")},{id:"Complete",title:s("public~Complete")},{id:"Failed",title:s("public~Failed")},{id:"Error",title:s("public~Error")},{id:"Cancelled",title:s("public~Cancelled")},{id:"Unknown",title:s("public~Unknown")}],u=[{filterGroupName:s("public~Build strategy"),type:"build-strategy",reducer:h,items:r},{filterGroupName:s("public~Build status"),type:"build-run-status",reducer:O,items:o,filter:(e,t)=>{var a,i,l,n;const s=null!==(l=null===(i=null===(a=null==t?void 0:t.latestBuild)||void 0===a?void 0:a.status)||void 0===i?void 0:i.phase)&&void 0!==l?l:"Unknown";return!(null===(n=e.selected)||void 0===n?void 0:n.length)||s&&e.selected.includes(s)}}],m={to:`/k8s/ns/${(null!==(t=e.namespace)&&void 0!==t?t:null==c?void 0:c.ns)||"default"}/buildconfigs/~new/form`};return i.createElement(i.Fragment,null,i.createElement(g.b,null,i.createElement("title",null,s("public~BuildConfigs"))),i.createElement(d.c,Object.assign({},e,{title:s("public~BuildConfigs"),kind:"BuildConfig",ListComponent:D,canCreate:null===(a=e.canCreate)||void 0===a||a,createProps:m,filterLabel:e.filterLabel,rowFilters:u})))};F.displayName="BuildConfigsListPage"}}]);
//# sourceMappingURL=build-config-chunk-4ba9dacb050e98b99c8d.min.js.map
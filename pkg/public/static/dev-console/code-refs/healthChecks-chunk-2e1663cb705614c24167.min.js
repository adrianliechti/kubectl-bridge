(window.webpackJsonp=window.webpackJsonp||[]).push([[148,44],{4362:function(e,t,n){"use strict";n.r(t),n.d(t,"getAnnotationTags",(function(){return L})),n.d(t,"getBuilderTags",(function(){return q})),n.d(t,"getBuilderTagsSortedByVersion",(function(){return B})),n.d(t,"getMostRecentBuilderTag",(function(){return D})),n.d(t,"isBuilder",(function(){return G})),n.d(t,"ExampleDockerCommandPopover",(function(){return K})),n.d(t,"ImageStreamsDetails",(function(){return H})),n.d(t,"ImageStreamsDetailsPage",(function(){return Y})),n.d(t,"ImageStreamsList",(function(){return Z})),n.d(t,"buildPhase",(function(){return Q})),n.d(t,"ImageStreamsPage",(function(){return ee}));var a=n(0),i=n(7),r=n(16),o=n(240),s=n(2050),l=n(116),c=n(1533),u=n(22),d=n(225),p=n(7187),m=n(117),v=n(50),b=n(283),g=n(18),f=n(54),h=n(353),k=n(19),E=n(80),T=n(979),P=n(10),y=n(40),O=n(5),R=n(1198),S=n(1414),j=n(173),C=n(981),I=n(284),_=n(1413),N=n(1948),w=n(99),U=n(1411),x=n(693),A=n(5781),M=n(15);const L=e=>r.a(e,"annotations.tags","").split(/\s*,\s*/),q=e=>{const t=(e=>{const t=r.a(e,"status.tags");return s.a(t,"tag")})(e);return l.a(e.spec.tags,e=>(e=>{const t=L(e);return o.a(t,"builder")&&!o.a(t,"hidden")})(e)&&t[e.name])},B=e=>q(e).sort(({name:e},{name:t})=>{const n=b.coerce(e),a=b.coerce(t);return n||a?n?a?b.rcompare(n,a):-1:1:e.localeCompare(t)}),D=e=>{const t=B(e);return c.a(t)},G=e=>!u.a(q(e)),{common:$}=C.a.factory,F=[...C.a.getExtensionsActionsForKind(P.ImageStreamModel),...$],V=({imageStream:e,specTag:t,statusTag:n})=>{const o=r.a(e,"status"),s=r.a(n,["items",0]),l=r.a(t,"from"),c="ImageStreamTag"===r.a(t,"from.kind"),u=r.a(s,"image"),p=r.a(s,"created"),m=d.a(e,["metadata","annotations","openshift.io/image.dockerRepositoryCheck"]),{t:v}=Object(i.useTranslation)();return a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-2 col-sm-4 col-xs-4 co-break-word"},a.createElement(w.ResourceLink,{kind:"ImageStreamTag",name:Object(A.b)(e.metadata.name,n.tag),namespace:e.metadata.namespace,title:n.tag,linkTo:!!u})),a.createElement("span",{className:"col-md-3 col-sm-4 col-xs-8 co-break-all"},l&&c&&a.createElement(w.ResourceLink,{kind:"ImageStreamTag",name:l.name,namespace:e.metadata.namespace,title:l.name}),l&&!c&&a.createElement(a.Fragment,null,l.name),!l&&a.createElement("span",{className:"text-muted"},v("public~pushed image"))),a.createElement("span",{className:"col-md-4 col-sm-4 hidden-xs co-break-all"},!o&&m&&a.createElement(a.Fragment,null,a.createElement(M.tc,null)," ",v("public~Unable to resolve")),!o&&!m&&!l&&a.createElement(a.Fragment,null,v("public~Not synced yet")),!o&&!m&&l&&a.createElement(a.Fragment,null,v("public~Unresolved")),o&&u&&a.createElement(a.Fragment,null,u),o&&!u&&a.createElement(a.Fragment,null,a.createElement(M.tc,null)," ",v("public~There is no image associated with this tag"))),a.createElement("div",{className:"col-md-3 hidden-sm hidden-xs"},p&&a.createElement(x.Timestamp,{timestamp:p}),!p&&"-"))},K=({imageStream:e,tag:t})=>{const n=r.a(e,"status.publicDockerImageRepository"),{t:o}=Object(i.useTranslation)();if(!n)return null;const s=`docker push ${n}:${t||"<tag>"}`,l=`docker pull ${n}:${t||"<tag>"}`;return a.createElement(h.a,{headerContent:a.createElement(a.Fragment,null,o("public~Image registry commands")),className:"co-example-docker-command__popover",minWidth:"600px",bodyContent:a.createElement("div",null,a.createElement("p",null,o("public~Create a new ImageStreamTag by pushing an image to this ImageStream with the desired tag.")),a.createElement("br",null),a.createElement("p",null,o("public~Authenticate to the internal registry")),a.createElement(R.a,{value:"oc registry login"}),a.createElement("br",null),a.createElement("p",null,o("public~Push an image to this ImageStream")),a.createElement(R.a,{value:s}),a.createElement("br",null),a.createElement("p",null,o("public~Pull an image from this ImageStream")),a.createElement(R.a,{value:l}),a.createElement("br",null),a.createElement("p",null,a.createElement(i.Trans,{t:o,ns:"public"},"Red Hat Enterprise Linux users may use the equivalent ",a.createElement("strong",null,"podman")," ","commands."," "),a.createElement(j.a,{href:O.p,text:o("public~Learn more.")})))},a.createElement(k.a,{className:"hidden-sm hidden-xs",type:"button",variant:"link"},a.createElement(T.a,{className:"co-icon-space-r"}),o("public~Do you need to work with this ImageStream outside of the web console?")))},H=({obj:e})=>{const{t:t}=Object(i.useTranslation)(),n=r.a(e,"status.dockerImageRepository"),o=r.a(e,"status.publicDockerImageRepository"),l=r.a(e,"status.tags.length"),c=s.a(e.spec.tags,"name"),d=p.a(e.status.tags,(n,a)=>{const i=m.a(a.conditions,e=>"ImportSuccess"===e.type&&"False"===e.status);i&&n.push(t("public~Unable to sync image for tag {{tag}}. {{message}}",{tag:`${e.metadata.name}:${a.tag}`,message:i.message}))});return a.createElement("div",null,a.createElement("div",{className:"co-m-pane__body"},!u.a(d)&&a.createElement(S.a,{variant:E.b.warning,alerts:v.a(d,(e,t)=>a.createElement(a.Fragment,{key:t},e))}),a.createElement(I.c,{text:t("public~ImageStream details")}),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6"},a.createElement(U.b,{resource:e},n&&a.createElement("dt",null,t("public~Image repository")),n&&a.createElement("dd",null,n),o&&a.createElement("dt",null,t("public~Public image repository")),o&&a.createElement("dd",null,o),a.createElement("dt",null,t("public~Image count")),a.createElement("dd",null,l||0)),a.createElement(K,{imageStream:e})))),a.createElement("div",{className:"co-m-pane__body"},a.createElement(I.c,{text:t("public~Tags")}),u.a(e.status.tags)?a.createElement("span",{className:"text-muted"},t("public~No tags")):a.createElement("div",{className:"row"},a.createElement("div",{className:"co-m-table-grid co-m-table-grid--bordered"},a.createElement("div",{className:"row co-m-table-grid__head"},a.createElement("div",{className:"col-md-2 col-sm-4 col-xs-4"},t("public~Name")),a.createElement("div",{className:"col-md-3 col-sm-4 col-xs-8"},t("public~From")),a.createElement("div",{className:"col-md-4 col-sm-4 hidden-xs"},t("public~Identifier")),a.createElement("div",{className:"col-md-3 hidden-sm hidden-xs"},t("public~Last updated"))),a.createElement("div",{className:"co-m-table-grid__body"},v.a(e.status.tags,t=>a.createElement(V,{key:t.tag,imageStream:e,specTag:c[t.tag],statusTag:t})))))))},z=({obj:e})=>{const t=r.a(e,"status.tags");return a.createElement(A.a,{imageStreamTags:t,imageStreamName:e.metadata.name,imageStreamNamespace:e.metadata.namespace})};z.displayName="ImageStreamHistory";const W=[N.navFactory.details(H),N.navFactory.editYaml(),N.navFactory.history(z)],Y=e=>a.createElement(y.a,Object.assign({},e,{kind:"ImageStream",menuActions:F,pages:W}));Y.displayName="ImageStreamsDetailsPage";const X=["","","pf-m-hidden pf-m-visible-on-md","pf-m-hidden pf-m-visible-on-lg",C.a.columnClass],J=({obj:e})=>a.createElement(a.Fragment,null,a.createElement(y.k,{className:X[0]},a.createElement(w.ResourceLink,{kind:"ImageStream",name:e.metadata.name,namespace:e.metadata.namespace})),a.createElement(y.k,{className:g(X[1],"co-break-word"),columnID:"namespace"},a.createElement(w.ResourceLink,{kind:"Namespace",name:e.metadata.namespace})),a.createElement(y.k,{className:X[2]},a.createElement(_.a,{kind:"ImageStream",labels:e.metadata.labels})),a.createElement(y.k,{className:X[3]},a.createElement(x.Timestamp,{timestamp:e.metadata.creationTimestamp})),a.createElement(y.k,{className:X[4]},a.createElement(C.d,{actions:F,kind:"ImageStream",resource:e}))),Z=e=>{const{t:t}=Object(i.useTranslation)(),n=()=>[{title:t("public~Name"),sortField:"metadata.name",transforms:[f.a],props:{className:X[0]}},{title:t("public~Namespace"),sortField:"metadata.namespace",transforms:[f.a],props:{className:X[1]},id:"namespace"},{title:t("public~Labels"),sortField:"metadata.labels",transforms:[f.a],props:{className:X[2]}},{title:t("public~Created"),sortField:"metadata.creationTimestamp",transforms:[f.a],props:{className:X[3]}},{title:"",props:{className:X[4]}}];return n.displayName="ImageStreamsTableHeader",a.createElement(y.j,Object.assign({},e,{"aria-label":t("public~ImageStreams"),Header:n,Row:J,virtualize:!0}))};Z.displayName="ImageStreamsList";const Q=e=>e.status.phase,ee=e=>{const{t:t}=Object(i.useTranslation)();return a.createElement(y.c,Object.assign({},e,{title:t("public~ImageStreams"),kind:"ImageStream",ListComponent:Z,canCreate:!0}))};ee.displayName="ImageStreamsListPage"},5447:function(e,t,n){"use strict";n.r(t);var a=n(8121);n.d(t,"HealthChecksPage",(function(){return a.a}))},5586:function(e,t,n){"use strict";n.r(t);var a=n(5622);n.d(t,"PipelineModel",(function(){return a.f})),n.d(t,"PipelineModelV1Beta1",(function(){return a.g})),n.d(t,"PipelineRunModel",(function(){return a.i})),n.d(t,"PipelineRunModelV1Beta1",(function(){return a.j})),n.d(t,"TaskModel",(function(){return a.l})),n.d(t,"TaskModelV1Beta1",(function(){return a.m})),n.d(t,"TaskRunModel",(function(){return a.n})),n.d(t,"TaskRunModelV1Beta1",(function(){return a.o})),n.d(t,"CustomRunModelV1Beta1",(function(){return a.d})),n.d(t,"PipelineResourceModel",(function(){return a.h})),n.d(t,"ClusterTaskModel",(function(){return a.a})),n.d(t,"ConditionModel",(function(){return a.c})),n.d(t,"TriggerBindingModel",(function(){return a.s})),n.d(t,"ClusterTriggerBindingModel",(function(){return a.b})),n.d(t,"TriggerTemplateModel",(function(){return a.t})),n.d(t,"EventListenerModel",(function(){return a.e})),n.d(t,"RepositoryModel",(function(){return a.k})),n.d(t,"TektonConfigModel",(function(){return a.p})),n.d(t,"TektonHubModel",(function(){return a.q})),n.d(t,"TektonResultModel",(function(){return a.r}))},5588:function(e,t,n){"use strict";var a,i,r,o,s,l,c,u,d;n.d(t,"r",(function(){return a})),n.d(t,"q",(function(){return i})),n.d(t,"v",(function(){return r})),n.d(t,"t",(function(){return o})),n.d(t,"w",(function(){return s})),n.d(t,"u",(function(){return l})),n.d(t,"o",(function(){return c})),n.d(t,"x",(function(){return u})),n.d(t,"p",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"s",(function(){return m})),n.d(t,"m",(function(){return v})),n.d(t,"l",(function(){return b})),n.d(t,"k",(function(){return g})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return k})),n.d(t,"z",(function(){return E})),n.d(t,"y",(function(){return T})),n.d(t,"j",(function(){return P})),n.d(t,"g",(function(){return y})),n.d(t,"h",(function(){return O})),n.d(t,"n",(function(){return R})),n.d(t,"f",(function(){return S})),n.d(t,"d",(function(){return j})),n.d(t,"e",(function(){return C})),function(e){e.triggers="triggers.tekton.dev/eventlistener"}(a||(a={})),function(e){e.user="pipeline.openshift.io/started-by"}(i||(i={})),function(e){e.minVersion=" tekton.dev/pipelines.minVersion",e.tags="tekton.dev/tags",e.categories="tekton.dev/categories",e.installedFrom="openshift.io/installed-from",e.semVersion="openshift.io/sem-version"}(r||(r={})),function(e){e.redhat="Red Hat",e.community="Community",e.tektonHub="TektonHub",e.artifactHub="ArtifactHub"}(o||(o={})),function(e){e.providerType="operator.tekton.dev/provider-type",e.version="app.kubernetes.io/version"}(s||(s={})),function(e){e.pipeline="tekton.dev/pipeline",e.pipelinerun="tekton.dev/pipelineRun",e.taskrun="tekton.dev/taskRun",e.pipelineTask="tekton.dev/pipelineTask"}(l||(l={})),function(e){e.git="git",e.image="image",e.cluster="cluster",e.storage="storage"}(c||(c={})),function(e){e.NoWorkspace="noWorkspace",e.EmptyDirectory="emptyDirectory",e.ConfigMap="configMap",e.Secret="secret",e.PVC="pvc",e.VolumeClaimTemplate="volumeClaimTemplate"}(u||(u={})),function(e){e.Git="git",e.Image="docker"}(d||(d={}));d.Git,d.Image;const p="1.4.0",m="1.6.0",v="1.5.2",b="pipeline",g="bridge/pipeline-run-auto-start-failed",f=275,h=375,k=60,E="pipeline.openshift.io/preferredName",T="chains.tekton.dev/signed",P="openshift-pipelines",y="openshift",O="config";var R;!function(e){e.PIPELINE_TASK_LEVEL="pipeline/task",e.PIPELINERUN_TASKRUN_LEVEL="pipelinerun/taskrun",e.UNSUPPORTED_LEVEL="unsupported",e.UNSIMPLIFIED_METRICS_LEVEL="unsimplified"}(R||(R={}));const S="FLAG_TEKTON_V1_ENABLED",j="PIPELINES_OPERATOR_VERSION_1_16_OR_NEWER",C="PIPELINES_OPERATOR_VERSION_1_17_OR_NEWER"},5595:function(e,t,n){"use strict";var a=n(5626);n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return a.b})),n.d(t,"d",(function(){return a.c}));n(5627);var i=n(5628);n.d(t,"e",(function(){return i.a}));n(5629),n(5630);var r=n(5631);n.d(t,"f",(function(){return r.a}));var o=n(5632);n.d(t,"a",(function(){return o.a}))},5617:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"g",(function(){return v})),n.d(t,"e",(function(){return b})),n.d(t,"i",(function(){return g})),n.d(t,"j",(function(){return f}));var a,i=n(29),r=n(16),o=n(240),s=n(5595);!function(e){e.PipelineRunCancelled="StoppedRunFinally",e.PipelineRunStopped="CancelledRunFinally",e.TaskRunCancelled="TaskRunCancelled",e.Cancelled="Cancelled",e.PipelineRunStopping="PipelineRunStopping",e.PipelineRunPending="PipelineRunPending",e.TaskRunStopping="TaskRunStopping",e.CreateContainerConfigError="CreateContainerConfigError",e.ExceededNodeResources="ExceededNodeResources",e.ExceededResourceQuota="ExceededResourceQuota",e.ConditionCheckFailed="ConditionCheckFailed"}(a||(a={}));const l=e=>{var t;const n=r.a(e,["status","conditions"],[]);if(0===n.length)return null;const i=n.find(e=>"Succeeded"===e.type),o=n.find(e=>"Cancelled"===e.reason);if([a.PipelineRunStopped,a.PipelineRunCancelled].includes(null===(t=e.spec)||void 0===t?void 0:t.status)&&!o)return s.a.Cancelling;if(!i||!i.status)return null;const l="True"===i.status?s.a.Succeeded:"False"===i.status?s.a.Failed:s.a.Running;if(i.reason&&i.reason!==l)switch(i.reason){case a.PipelineRunCancelled:case a.TaskRunCancelled:case a.Cancelled:case a.PipelineRunStopped:return s.a.Cancelled;case a.PipelineRunStopping:case a.TaskRunStopping:return s.a.Failed;case a.CreateContainerConfigError:case a.ExceededNodeResources:case a.ExceededResourceQuota:case a.PipelineRunPending:return s.a.Pending;case a.ConditionCheckFailed:return s.a.Skipped;default:return l}return l},c=e=>{const t=l(e);if(!t)return"-";switch(t){case s.a.Cancelled:return i.a.t("pipelines-plugin~Cancelled");case s.a.Failed:return i.a.t("pipelines-plugin~Failed");case s.a.Succeeded:return i.a.t("pipelines-plugin~Succeeded");case s.a.Pending:return i.a.t("pipelines-plugin~Pending");case s.a.Running:return i.a.t("pipelines-plugin~Running");case s.a.Skipped:return i.a.t("pipelines-plugin~Skipped");case s.a.Cancelling:return i.a.t("pipelines-plugin~Cancelling");default:return t}},u=e=>e.latestRun&&l(e.latestRun)||s.a.Other,d=e=>e.latestRun&&c(e.latestRun)||"-",p=e=>c(e)||"-",m=e=>l(e)||s.a.Other,v=(e,t)=>{var n;if(!e||!e.selected||!e.selected.length)return!0;const a=u(t);return(null===(n=e.selected)||void 0===n?void 0:n.includes(a))||!o.a(e.all,a)},b=(e,t)=>{var n;if(!e||!e.selected||!e.selected.length)return!0;const a=m(t);return(null===(n=e.selected)||void 0===n?void 0:n.includes(a))||!o.a(e.all,a)},g=e=>l(e)||s.a.Other,f=e=>c(e)||"-"},5618:function(e,t,n){"use strict";var a=n(0),i=n(297),r=n(18),o=n.n(r);n(5732);const s={display:"flex",flex:1,flexDirection:"column",margin:"var(--pf-v5-global--spacer--md) 0"};t.a=({title:e,subTitle:t,fullWidth:n,children:r,flexLayout:l,extraMargin:c,dataTest:u,style:d})=>a.createElement("div",{className:o()("pf-v5-c-form",{"co-m-pane__form":!n,"odc-form-section--extra-margin":c}),style:Object.assign(Object.assign({},l?s:{}),d||{}),"data-test":u},e&&a.createElement("h2",{className:"odc-form-section__heading"},e),t&&a.createElement(i.a,null,t),r)},5620:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.PAC="pac",e.PIPELINE="pipeline"}(a||(a={}))},5621:function(e,t,n){"use strict";n.d(t,"f",(function(){return m})),n.d(t,"l",(function(){return v})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"m",(function(){return f})),n.d(t,"o",(function(){return h})),n.d(t,"n",(function(){return k})),n.d(t,"k",(function(){return E})),n.d(t,"h",(function(){return T})),n.d(t,"g",(function(){return P})),n.d(t,"e",(function(){return y})),n.d(t,"d",(function(){return O})),n.d(t,"b",(function(){return R})),n.d(t,"j",(function(){return S})),n.d(t,"i",(function(){return j}));var a=n(4413),i=n(689),r=n(5),o=n(5620),s=n(2221),l=n(5624),c=n(5599),u=n(5651);const d=/^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$/,p=/^\/.*$/,m=/^((((ssh|git|https?:?):\/\/:?)(([^\s@]+@|[^@]:?)[-\w.]+(:\d\d+:?)?(\/[-\w.~/?[\]!$&'()*+,;=:@%]*:?)?:?))|([^\s@]+@[-\w.]+:[-\w.~/?[\]!$&'()*+,;=:@%]*?:?))$/,v=i.object().shape({name:i.string().matches(/^[a-z0-9]([-a-z0-9]*[a-z0-9])?$/,"Name must consist of lower case alphanumeric characters or '-' and must start and end with an alphanumeric character.").required("Required")}),b=i.object().shape({selectedKey:i.string(),name:i.string().max(63,"Cannot be longer than 63 characters.").when("selectedKey",{is:s.b,then:i.string().required("Required")})}),g=e=>i.object().shape({replicas:i.number().transform(e=>a.a(e)?void 0:e).test(Object(l.b)(e("devconsole~Replicas must be an integer."))).min(0,e("devconsole~Replicas must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Replicas must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})).test({name:"isEmpty",test:e=>void 0!==e,message:e("devconsole~This field cannot be empty.")})}),f=i.string().oneOf([c.k.OpenShift,c.k.Kubernetes,c.k.KnativeService]).required(),h=e=>i.object().when("resources",{is:c.k.KnativeService,then:i.object().shape({scaling:i.object({minpods:i.number().transform(e=>a.a(e)?void 0:e).test(Object(l.b)(e("devconsole~Min Pods must be an integer."))).min(0,e("devconsole~Min Pods must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Min Pods must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})),maxpods:i.number().transform(e=>a.a(e)?void 0:e).test(Object(l.b)(e("devconsole~Max Pods must be an integer."))).min(1,e("devconsole~Max Pods must be greater than or equal to 1.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Max Pods must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})).test({test(e){const{minpods:t}=this.parent;return!e||e>=t},message:e("devconsole~Max Pods must be greater than or equal to Min Pods.")}),concurrencytarget:i.number().transform(e=>a.a(e)?void 0:e).test(Object(l.b)(e("devconsole~Concurrency target must be an integer."))).min(0,e("devconsole~Concurrency target must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Concurrency target must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})),concurrencylimit:i.number().transform(e=>a.a(e)?void 0:e).test(Object(l.b)(e("devconsole~Concurrency limit must be an integer."))).min(0,e("devconsole~Concurrency limit must be greater than or equal to 0.")).max(Number.MAX_SAFE_INTEGER,e("devconsole~Concurrency limit must be lesser than or equal to {{maxSafeInteger}}.",{maxSafeInteger:Number.MAX_SAFE_INTEGER})),concurrencyutilization:i.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Concurrency utilization must be between 0 and 100.")).max(100,e("devconsole~Concurrency utilization must be between 0 and 100.")),autoscale:i.object().shape({autoscalewindow:i.number().transform(e=>a.a(e)?void 0:e).test({test(e){if(e){const{autoscalewindowUnit:t}=this.parent,n=((e,t)=>{switch(t){case"m":return 60*e;case"h":return 3600*e;default:return e}})(e,t);return n>=6&&n<=3600}return!0},message:e("devconsole~Autoscale window must be between 6s and 1h.")})})}),domainMapping:i.array().of(i.string().transform(u.f).matches(d,{message:e("devconsole~Domain name must consist of lower-case letters, numbers, periods, and hyphens. It must start and end with a letter or number."),excludeEmptyString:!0}).test("domainname-has-segements",e("devconsole~Domain name must consist of at least two segments separated by dots."),(function(e){return e.split(".").length>=2})))})}),k=e=>i.object().shape({secure:i.boolean(),tls:i.object().when("secure",{is:!0,then:i.object({termination:i.string().required(e("devconsole~Please select a termination type."))})}),hostname:i.string().matches(d,{message:e("devconsole~Hostname must consist of lower-case letters, numbers, periods, and hyphens. It must start and end with a letter or number."),excludeEmptyString:!0}).max(253,e("devconsole~Cannot be longer than 253 characters.")),path:i.string().matches(p,{message:e("devconsole~Path must start with /."),excludeEmptyString:!0}),unknownTargetPort:i.number().typeError(e("devconsole~Port must be an integer.")).integer(e("devconsole~Port must be an integer.")).min(1,e("devconsole~Port must be between 1 and 65535.")).max(65535,e("devconsole~Port must be between 1 and 65535."))}),E=e=>i.object().shape({cpu:i.object().shape({request:i.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Request must be greater than or equal to 0.")).test({test(e){const{requestUnit:t,limit:n,limitUnit:a}=this.parent;return void 0===n||Object(r.Ib)(`${e}${t}`)<=Object(r.Ib)(`${n}${a}`)},message:e("devconsole~CPU request must be less than or equal to limit.")}),requestUnit:i.string(e("devconsole~Unit must be millicores or cores.")).ensure(),limitUnit:i.string(e("devconsole~Unit must be millicores or cores.")).ensure(),limit:i.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Limit must be greater than or equal to 0.")).test({test(e){const{request:t,requestUnit:n,limitUnit:a}=this.parent;return void 0===e||Object(r.Ib)(`${e}${a}`)>=Object(r.Ib)(`${t}${n}`)},message:e("devconsole~CPU limit must be greater than or equal to request.")})}),memory:i.object().shape({request:i.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Request must be greater than or equal to 0.")).test({test(e){const{requestUnit:t,limit:n,limitUnit:a}=this.parent;return void 0===n||Object(r.Ib)(`${e}${t}`)<=Object(r.Ib)(`${n}${a}`)},message:e("devconsole~Memory request must be less than or equal to limit.")}),requestUnit:i.string(e("devconsole~Unit must be Mi or Gi.")),limit:i.number().transform(e=>a.a(e)?void 0:e).min(0,e("devconsole~Limit must be greater than or equal to 0.")).test({test(e){const{request:t,requestUnit:n,limitUnit:a}=this.parent;return void 0===e||Object(r.Ib)(`${t}${n}`)<=Object(r.Ib)(`${e}${a}`)},message:e("devconsole~Memory limit must be greater than or equal to request.")}),limitUnit:i.string(e("devconsole~Unit must be Mi or Gi."))})}),T=e=>i.object().when("build",{is:e=>"Source"===e.strategy,then:i.object().shape({selected:i.string().required(e("devconsole~Required")),tag:i.string().required(e("devconsole~Required"))})}),P=e=>i.object().shape({url:i.string().max(2e3,e("devconsole~Please enter a URL that is less then 2000 characters.")).matches(m,e("devconsole~Invalid Git URL.")).required(e("devconsole~Required")),type:i.string().when("showGitType",{is:!0,then:i.string().required(e("devconsole~We failed to detect the Git type. Please choose a Git type."))}),showGitType:i.boolean()}),y=e=>i.object().when("build",{is:e=>"Docker"===e.strategy,then:i.object().shape({containerPort:i.number().test(Object(l.b)(e("devconsole~Container port should be an integer"))),dockerfilePath:i.string().required(e("devconsole~Required"))})}),O=e=>i.object().when("build",{is:e=>"Devfile"===e.strategy,then:i.object().shape({devfilePath:i.string().required(e("devconsole~Required")),devfileContent:i.string().min(1,e("devconsole~Required")).required(e("devconsole~Required")),devfileHasError:i.boolean().oneOf([!1]),devfileSuggestedResources:i.object().required(e("devconsole~Required"))})}),R=i.object().shape({strategy:i.string()}),S=e=>i.object().shape({name:i.string().required(e("devconsole~Required")),image:i.object().required(e("devconsole~Required")),tag:i.string(),status:i.string().required(e("devconsole~Required"))}),j=i.object().when(["enabled","build.option","type"],{is:(e,t,n)=>(e||t===c.a.PIPELINES)&&n!==o.a.PAC,then:i.object().shape({templateSelected:i.string().required()})})},5622:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return o})),n.d(t,"i",(function(){return s})),n.d(t,"j",(function(){return l})),n.d(t,"l",(function(){return c})),n.d(t,"m",(function(){return u})),n.d(t,"n",(function(){return d})),n.d(t,"o",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"h",(function(){return v})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"s",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"t",(function(){return k})),n.d(t,"e",(function(){return E})),n.d(t,"k",(function(){return T})),n.d(t,"p",(function(){return P})),n.d(t,"q",(function(){return y})),n.d(t,"r",(function(){return O}));var a=n(5654);const i=a.chart_color_green_400.value,r={apiGroup:"tekton.dev",apiVersion:"v1",label:"Pipeline",labelKey:"pipelines-plugin~Pipeline",labelPluralKey:"pipelines-plugin~Pipelines",plural:"pipelines",abbr:"PL",namespaced:!0,kind:"Pipeline",id:"pipeline",labelPlural:"Pipelines",crd:!0,color:i},o={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"Pipeline",labelKey:"pipelines-plugin~Pipeline",labelPluralKey:"pipelines-plugin~Pipelines",plural:"pipelines",abbr:"PL",namespaced:!0,kind:"Pipeline",id:"pipeline",labelPlural:"Pipelines",crd:!0,color:i},s={apiGroup:"tekton.dev",apiVersion:"v1",label:"PipelineRun",labelKey:"pipelines-plugin~PipelineRun",labelPluralKey:"pipelines-plugin~PipelineRuns",plural:"pipelineruns",abbr:"PLR",namespaced:!0,kind:"PipelineRun",id:"pipelinerun",labelPlural:"PipelineRuns",crd:!0,color:i},l={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"PipelineRun",labelKey:"pipelines-plugin~PipelineRun",labelPluralKey:"pipelines-plugin~PipelineRuns",plural:"pipelineruns",abbr:"PLR",namespaced:!0,kind:"PipelineRun",id:"pipelinerun",labelPlural:"PipelineRuns",crd:!0,color:i},c={apiGroup:"tekton.dev",apiVersion:"v1",label:"Task",labelKey:"pipelines-plugin~Task",labelPluralKey:"pipelines-plugin~Tasks",plural:"tasks",abbr:"T",namespaced:!0,kind:"Task",id:"task",labelPlural:"Tasks",crd:!0,color:i},u={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"Task",labelKey:"pipelines-plugin~Task",labelPluralKey:"pipelines-plugin~Tasks",plural:"tasks",abbr:"T",namespaced:!0,kind:"Task",id:"task",labelPlural:"Tasks",crd:!0,color:i},d={apiGroup:"tekton.dev",apiVersion:"v1",label:"TaskRun",labelKey:"pipelines-plugin~TaskRun",labelPluralKey:"pipelines-plugin~TaskRuns",plural:"taskruns",abbr:"TR",namespaced:!0,kind:"TaskRun",id:"taskrun",labelPlural:"TaskRuns",crd:!0,color:i},p={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"TaskRun",labelKey:"pipelines-plugin~TaskRun",labelPluralKey:"pipelines-plugin~TaskRuns",plural:"taskruns",abbr:"TR",namespaced:!0,kind:"TaskRun",id:"taskrun",labelPlural:"TaskRuns",crd:!0,color:i},m={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"CustomRun",labelKey:"pipelines-plugin~CustomRun",labelPluralKey:"pipelines-plugin~CustomRuns",plural:"customruns",abbr:"CR",namespaced:!0,kind:"CustomRun",id:"customrun",labelPlural:"CustomRuns",crd:!0,color:i},v={apiGroup:"tekton.dev",apiVersion:"v1alpha1",label:"PipelineResource",labelKey:"pipelines-plugin~PipelineResource",labelPluralKey:"pipelines-plugin~PipelineResources",plural:"pipelineresources",abbr:"PR",namespaced:!0,kind:"PipelineResource",id:"pipelineresource",labelPlural:"PipelineResources",crd:!0,color:i},b={apiGroup:"tekton.dev",apiVersion:"v1beta1",label:"ClusterTask",labelKey:"pipelines-plugin~ClusterTask",labelPluralKey:"pipelines-plugin~ClusterTasks",plural:"clustertasks",abbr:"CT",namespaced:!1,kind:"ClusterTask",id:"clustertask",labelPlural:"ClusterTasks",crd:!0,color:i},g={apiGroup:"tekton.dev",apiVersion:"v1alpha1",label:"Condition",labelKey:"pipelines-plugin~Condition",labelPluralKey:"pipelines-plugin~Conditions",plural:"conditions",abbr:"C",namespaced:!0,kind:"Condition",id:"condition",labelPlural:"Conditions",crd:!0,color:i},f={apiGroup:"triggers.tekton.dev",apiVersion:"v1beta1",label:"TriggerBinding",labelKey:"pipelines-plugin~TriggerBinding",labelPluralKey:"pipelines-plugin~TriggerBindings",plural:"triggerbindings",abbr:"TB",namespaced:!0,kind:"TriggerBinding",id:"triggerbinding",labelPlural:"TriggerBindings",crd:!0,color:i},h={apiGroup:"triggers.tekton.dev",apiVersion:"v1beta1",label:"ClusterTriggerBinding",labelKey:"pipelines-plugin~ClusterTriggerBinding",labelPluralKey:"pipelines-plugin~ClusterTriggerBindings",plural:"clustertriggerbindings",abbr:"CTB",namespaced:!1,kind:"ClusterTriggerBinding",id:"clustertriggerbinding",labelPlural:"ClusterTriggerBindings",crd:!0,color:i},k={apiGroup:"triggers.tekton.dev",apiVersion:"v1beta1",label:"TriggerTemplate",labelKey:"pipelines-plugin~TriggerTemplate",labelPluralKey:"pipelines-plugin~TriggerTemplates",plural:"triggertemplates",abbr:"TT",namespaced:!0,kind:"TriggerTemplate",id:"triggertemplate",labelPlural:"TriggerTemplates",crd:!0,color:i},E={apiGroup:"triggers.tekton.dev",apiVersion:"v1beta1",label:"EventListener",labelKey:"pipelines-plugin~EventListener",labelPluralKey:"pipelines-plugin~EventListeners",plural:"eventlisteners",abbr:"EL",namespaced:!0,kind:"EventListener",id:"eventlistener",labelPlural:"EventListeners",crd:!0,color:i},T={apiGroup:"pipelinesascode.tekton.dev",apiVersion:"v1alpha1",label:"Repository",labelKey:"pipelines-plugin~Repository",labelPluralKey:"pipelines-plugin~Repositories",plural:"repositories",abbr:"R",namespaced:!0,kind:"Repository",id:"repository",labelPlural:"Repositories",crd:!0,color:i},P={apiGroup:"operator.tekton.dev",apiVersion:"v1alpha1",label:"TektonConfig",labelKey:"pipelines-plugin~TektonConfig",labelPluralKey:"pipelines-plugin~TektonConfigs",plural:"tektonconfigs",abbr:"TC",namespaced:!1,kind:"TektonConfig",id:"tektonconfig",labelPlural:"TektonConfigs",crd:!0},y={apiGroup:"operator.tekton.dev",apiVersion:"v1alpha1",label:"TektonHub",labelKey:"pipelines-plugin~TektonHub",labelPluralKey:"pipelines-plugin~TektonHubs",plural:"tektonhubs",abbr:"TH",namespaced:!1,kind:"TektonHub",id:"tektonhub",labelPlural:"TektonHubs",crd:!0},O={apiGroup:"operator.tekton.dev",apiVersion:"v1alpha1",label:"TektonResult",labelKey:"pipelines-plugin~TektonResult",labelPluralKey:"pipelines-plugin~TektonResults",plural:"tektonresults",abbr:"TR",namespaced:!1,kind:"TektonResult",id:"tektonresult",labelPlural:"TektonResults",crd:!0}},5623:function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return R})),n.d(t,"p",(function(){return S})),n.d(t,"h",(function(){return j})),n.d(t,"f",(function(){return C})),n.d(t,"j",(function(){return I})),n.d(t,"m",(function(){return _})),n.d(t,"o",(function(){return N})),n.d(t,"e",(function(){return w})),n.d(t,"v",(function(){return U})),n.d(t,"B",(function(){return x})),n.d(t,"d",(function(){return A})),n.d(t,"s",(function(){return L})),n.d(t,"w",(function(){return q})),n.d(t,"k",(function(){return B})),n.d(t,"l",(function(){return D})),n.d(t,"t",(function(){return G})),n.d(t,"g",(function(){return $})),n.d(t,"x",(function(){return F})),n.d(t,"y",(function(){return V})),n.d(t,"z",(function(){return K})),n.d(t,"r",(function(){return Y})),n.d(t,"u",(function(){return X})),n.d(t,"q",(function(){return J})),n.d(t,"i",(function(){return Z})),n.d(t,"A",(function(){return Q})),n.d(t,"n",(function(){return ee}));var a=n(321),i=n(29),r=n(1557),o=n(117),s=n(16),l=n(22),c=n(640),u=n(1942),d=n(5),p=n(10),m=n(8),v=n(5588),b=n(5650),g=n(5586),f=n(5595),h=n(5635),k=n(5617);const E=e=>e.resources&&e.resources.inputs&&e.resources.inputs.length>0&&!!e.resources.inputs[0].from,T=e=>e.runAfter&&e.runAfter.length>0;var P;!function(e){e.Running="Running",e.Failed="Failed",e.Succeeded="Succeeded",e.Cancelled="Cancelled",e.Other="-"}(P||(P={}));const y={[P.Running]:i.a.t("pipelines-plugin~Running"),[P.Failed]:i.a.t("pipelines-plugin~Failed"),[P.Succeeded]:i.a.t("pipelines-plugin~Succeeded"),[P.Cancelled]:i.a.t("pipelines-plugin~Cancelled"),[P.Other]:i.a.t("pipelines-plugin~Other")};var O;!function(e){e.Git="git",e.PullRequest="pullRequest",e.Image="image",e.Cluster="cluster",e.Storage="storage",e.CloudEvent="cloudEvent"}(O||(O={}));O.Git,O.PullRequest,O.Image,O.Cluster,O.Storage,O.CloudEvent;const R=(e,t,n,i=!1)=>((i?e.spec.finally:e.spec.tasks)||[]).map(e=>{var i;if(!t.status)return e;if(!n||0===n.length)return t.spec.status===k.a.PipelineRunCancelled?r.a(e,{status:{reason:f.a.Cancelled}}):t.spec.status===k.a.PipelineRunPending?r.a(e,{status:{reason:f.a.Idle}}):r.a(e,{status:{reason:f.a.Failed}});const l=o.a(n,t=>t.metadata.labels[v.u.pipelineTask]===e.name),c=null==l?void 0:l.status,u=r.a(e,{status:(null===(i=null==t?void 0:t.status)||void 0===i?void 0:i.taskRuns)?s.a(o.a(t.status.taskRuns,{pipelineTaskName:e.name}),"status"):c});if(u.status&&u.status.completionTime&&u.status.startTime){const e=new Date(u.status.completionTime).getTime()-new Date(u.status.startTime).getTime();u.status.duration=Object(a.a)(e)}return u.status?u.status&&u.status.conditions?u.status.reason=Object(k.d)(u)||f.a.Pending:u.status&&!u.status.reason&&(u.status.reason=f.a.Pending):u.status={reason:f.a.Pending},u}),S=(e,t={apiVersion:"",metadata:{},kind:"PipelineRun",spec:{}},n)=>{var a;const i=[];if(!(null===(a=e.spec)||void 0===a?void 0:a.tasks)||l.a(e.spec.tasks))return i;const r=R(e,t,n);return r.forEach(e=>{E(e)||T(e)||(0===i.length&&i.push([]),i[0].push(e))}),r.forEach(e=>{var t;if(!T(e)&&E(e)){let n=i.length-1;for(let a=0;a<i.length;a++)for(const r of i[a])(null===(t=r.taskRef)||void 0===t?void 0:t.name)!==e.resources.inputs[0].from[0]&&r.name!==e.resources.inputs[0].from[0]||(n=a);const a=i[n+1]?i[n+1]:null;a&&a[0]&&a[0].resources&&a[0].resources.inputs&&a[0].resources.inputs[0]&&a[0].resources.inputs[0].from&&a[0].resources.inputs[0].from[0]&&a[0].resources.inputs[0].from[0]===e.resources.inputs[0].from[0]?a.push(e):i.splice(n+1,0,[e])}}),r.forEach(e=>{var t;if(T(e)){let n=i.length-1;for(let a=0;a<i.length;a++)for(const r of i[a])(null===(t=r.taskRef)||void 0===t?void 0:t.name)!==e.runAfter[0]&&r.name!==e.runAfter[0]||(n=a);const a=i[n+1]?i[n+1]:null;a&&a[0].runAfter&&a[0].runAfter[0]&&a[0].runAfter[0]===e.runAfter[0]?a.push(e):i.splice(n+1,0,[e])}}),i},j=(e,t,n)=>R(e,t,n,!0),C=e=>{if(!e)return d.K;const{state:t,lastState:n}=e;return t.waiting&&!l.a(n)?d.H:t.waiting?d.K:t.terminated?d.J:d.I},I=e=>{if(!e||0===e.length)return{latestPipelineRun:null,status:f.a.PipelineNotStarted};const t=Object(h.b)(e,"creationTimestamp");if(!t)return{latestPipelineRun:null,status:f.a.PipelineNotStarted};let n=Object(k.c)(t);return"-"===n&&(n=f.a.Pending),{latestPipelineRun:t,status:n}},_=e=>e&&e.map(e=>({name:e.name,value:e.default})),N=e=>e&&e.map(e=>Object.assign({name:e.name},e.data)),w=(e,t,n)=>{const a=new Date(e).getTime(),i=((t?new Date(t).getTime():(new Date).getTime())-a)/1e3;return Object(b.g)(i,n)},U=e=>{var t,n,a,i;const r=null!==(n=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.startTime)&&void 0!==n?n:null,o=null!==(i=null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.completionTime)&&void 0!==i?i:null;return!r||!o&&"Running"!==Object(k.d)(e)?"-":w(r,o,!0)},x=(e,t,n)=>{const a=c.a(t);return a.secrets=[...a.secrets,{name:e}],n&&(a.imagePullSecrets=[...a.imagePullSecrets,{name:e}]),Object(m.rb)(p.ServiceAccountModel,a)},A=(e,t,n)=>{Object(m.kb)(p.ServiceAccountModel,v.l,t).then(t=>{void 0===o.a(t.secrets,t=>t.name===e.metadata.name)&&x(e.metadata.name,t,n)}).catch(e=>{Object(u.errorModal)({error:e.message})})},M=(e,t)=>e===v.p.Git?`tekton.dev/${v.p.Git}-${t}`:e===v.p.Image?`tekton.dev/${v.p.Image}-${t}`:null,L=(e,t={})=>{let n=0,a=M(null==e?void 0:e.key,n);if(!a)return t;for(;t[a]&&t[a]!==(null==e?void 0:e.value);)a=M(null==e?void 0:e.key,++n);return Object.assign(Object.assign({},t),{[a]:null==e?void 0:e.value})},q=e=>{switch(e.kind){case g.PipelineModel.kind:case g.TaskModel.kind:case g.EventListenerModel.kind:return"";case g.PipelineRunModel.kind:return"pipeline-runs";case g.PipelineResourceModel.kind:return"pipeline-resources";case g.ConditionModel.kind:return"conditions";case g.TaskRunModel.kind:return"task-runs";case g.ClusterTaskModel.kind:return"cluster-tasks";case g.TriggerTemplateModel.kind:return"trigger-templates";case g.TriggerBindingModel.kind:return"trigger-bindings";case g.ClusterTriggerBindingModel.kind:return"cluster-trigger-bindings";case g.RepositoryModel.kind:return"repositories";default:return null}},B=(e,t,n)=>e.filter(e=>{const{ownerReferences:a=[]}=e.metadata;return a.some(e=>e.name===t&&e.kind===n)}),D=(e,t)=>t.find(t=>t.metadata.name===e.metadata.name),G=(e,t)=>t.filter(t=>!!t.spec.resourcetemplates.find(t=>{var n;return(null===(n=t.spec.pipelineRef)||void 0===n?void 0:n.name)===e.metadata.name})),$=(e,t)=>t.reduce((t,n)=>(n.spec.triggers.filter(t=>e.find(e=>{var n;return(null==e?void 0:e.metadata.name)===(null===(n=null==t?void 0:t.template)||void 0===n?void 0:n.ref)})).length>0&&t.push(n),t),[]),F=e=>"tekton.dev/v1beta1"===e.apiVersion?g.PipelineModelV1Beta1:g.PipelineModel,V=e=>"tekton.dev/v1beta1"===e.apiVersion?g.PipelineRunModelV1Beta1:g.PipelineRunModel,K=e=>"tekton.dev/v1beta1"===e.apiVersion?g.TaskModelV1Beta1:g.TaskModel;var H,z,W;!function(e){e.KEY="task.results.key",e.TYPE="task.results.type"}(H||(H={})),function(e){e.EXTERNAL_LINK="external-link"}(z||(z={})),function(e){e.IMAGE_REPOSITORY="IMAGE_URL",e.SBOM="LINK_TO_SBOM",e.SCAN_OUTPUT="SCAN_OUTPUT",e.TEST_OUTPUT="TEST_OUTPUT"}(W||(W={}));const Y=e=>null==e?void 0:e.find(e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.annotations)||void 0===n?void 0:n[H.KEY])===W.SBOM}),X=e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.annotations)||void 0===n?void 0:n[H.TYPE])===z.EXTERNAL_LINK},J=e=>{var t,n,a,i;return null===(i=null===(a=(null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.results)||(null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.taskResults))||void 0===a?void 0:a.find(e=>e.name===W.SBOM))||void 0===i?void 0:i.value},Z=e=>{var t,n,a,i;return null===(i=null===(a=(null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.results)||(null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.pipelineResults))||void 0===a?void 0:a.find(e=>e.name===W.IMAGE_REPOSITORY))||void 0===i?void 0:i.value},Q=e=>{var t,n;if(!(null===(n=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.conditions)||void 0===n?void 0:n.length))return f.a.Pending;return Object(k.d)(e)},ee=e=>{var t,n,a;const i=null===(a=null===(n=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.conditions)||void 0===n?void 0:n.find(e=>"Succeeded"===(null==e?void 0:e.type)))||void 0===a?void 0:a.message,r=null==i?void 0:i.match(/(\w+)(?::\s*|\s+)(\d+)/g),o={};null==r||r.forEach(e=>{const[t,n]=e.split(/(?::\s*|\s+)/);o[t.trim()]=Number(n.trim())});const s=((null==o?void 0:o.Completed)||0)-((null==o?void 0:o.Failed)||0)-((null==o?void 0:o.Cancelled)||0);return{Running:(null==o?void 0:o.Incomplete)||0,Succeeded:s||0,Cancelled:(null==o?void 0:o.Cancelled)||0,Failed:(null==o?void 0:o.Failed)||0,Skipped:(null==o?void 0:o.Skipped)||0,Completed:(null==o?void 0:o.Completed)||0,Cancelling:(null==o?void 0:o.Cancelled)||0,PipelineNotStarted:0,Pending:0}}},5624:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));const a=e=>({test:e=>null==e||Number.isInteger(e),message:e}),i=/^[a-z]([a-z0-9_]-?)*[a-z0-9]$/},5626:function(e,t,n){"use strict";var a,i,r;n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r})),function(e){e.METRICS_PIPELINERUN_DURATION_TYPE="metrics.pipelinerun.duration-type",e.METRICS_PIPELINERUN_LEVEL="metrics.pipelinerun.level",e.METRICS_TASKRUN_DURATION_TYPE="metrics.taskrun.duration-type",e.METRICS_TASKRUN_LEVEL="metrics.taskrun.level"}(a||(a={})),function(e){e.PIPELINE="pipeline",e.PIPELINERUN="pipelinerun",e.TASK="task",e.TASKRUN="taskrun"}(i||(i={})),function(e){e.HISTOGRAM="histogram",e.LASTVALUE="lastvalue",e.NAMESPACE="namespace"}(r||(r={}))},5627:function(e,t,n){},5628:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={group:"tekton.dev",version:"v1",kind:"PipelineRun"}},5629:function(e,t,n){},5630:function(e,t,n){},5631:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={group:"tekton.dev",version:"v1",kind:"TaskRun"}},5632:function(e,t,n){"use strict";var a,i;n.d(t,"a",(function(){return a})),function(e){e.Cancelling="Cancelling",e.Succeeded="Succeeded",e.Failed="Failed",e.Running="Running",e["In Progress"]="In Progress",e.FailedToStart="FailedToStart",e.PipelineNotStarted="PipelineNotStarted",e.Skipped="Skipped",e.Cancelled="Cancelled",e.Pending="Pending",e.Idle="Idle",e.Other="-"}(a||(a={})),function(e){e.RunCancelled="RunCancelled"}(i||(i={}))},5635:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return g})),n.d(t,"f",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"i",(function(){return k})),n.d(t,"h",(function(){return T})),n.d(t,"e",(function(){return P})),n.d(t,"g",(function(){return y})),n.d(t,"c",(function(){return O})),n.d(t,"l",(function(){return S})),n.d(t,"m",(function(){return j})),n.d(t,"j",(function(){return C})),n.d(t,"k",(function(){return I}));var a=n(5699),i=n(1403),r=n(5692),o=n(5691),s=n(5654),l=n(2225),c=n(29),u=n(8),d=n(5588),p=n(5586),m=n(5595),v=n(5617);const b=(e,t)=>{if(!(e&&e.length>0&&t))return null;let n=e[0];if("creationTimestamp"===t)for(let a=1;a<e.length;a++)n=e[a]&&e[a].metadata&&e[a].metadata[t]&&new Date(e[a].metadata[t])>new Date(n.metadata[t])?e[a]:n;else if("startTime"===t||"completionTime"===t)for(let a=1;a<e.length;a++)n=e[a]&&e[a].status&&e[a].status[t]&&new Date(e[a].status[t])>new Date(n.status[t])?e[a]:n;else n=e[e.length-1];return n.status||(n=Object.assign(Object.assign({},n),{status:{pipelineSpec:{tasks:[]}}})),n.status.succeededCondition||(n.status=Object.assign(Object.assign({},n.status),{succeededCondition:""})),n.status.succeededCondition=Object(v.c)(n),n},g=(e,t)=>e.map(e=>{const n=t.filter(t=>{var n;return(null===(n=t.metadata.labels)||void 0===n?void 0:n["tekton.dev/pipeline"])===e.metadata.name});return e.latestRun=b(n,"creationTimestamp"),e}),f=e=>{switch(e){case m.a.Succeeded:return{message:c.a.t("pipelines-plugin~Succeeded"),pftoken:s.chart_color_green_400};case m.a.Failed:return{message:c.a.t("pipelines-plugin~Failed"),pftoken:l.global_danger_color_100};case m.a.FailedToStart:return{message:c.a.t("pipelines-plugin~PipelineRun failed to start"),pftoken:l.global_danger_color_100};case m.a.Running:case m.a["In Progress"]:return{message:c.a.t("pipelines-plugin~Running"),pftoken:o.chart_color_blue_300};case m.a.Skipped:return{message:c.a.t("pipelines-plugin~Skipped"),pftoken:a.chart_color_black_400};case m.a.Cancelled:return{message:c.a.t("pipelines-plugin~Cancelled"),pftoken:i.chart_color_black_500};case m.a.Cancelling:return{message:c.a.t("pipelines-plugin~Cancelling"),pftoken:i.chart_color_black_500};case m.a.Idle:case m.a.Pending:return{message:c.a.t("pipelines-plugin~Pending"),pftoken:r.chart_color_blue_100};default:return{message:c.a.t("pipelines-plugin~PipelineRun not started yet"),pftoken:r.chart_color_blue_100}}},h=e=>{var t,n,a,i,r;const o=(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n[d.u.pipeline])||(null===(a=null==e?void 0:e.metadata)||void 0===a?void 0:a.name),s=(null===(i=null==e?void 0:e.status)||void 0===i?void 0:i.pipelineSpec)||(null===(r=null==e?void 0:e.spec)||void 0===r?void 0:r.pipelineSpec);return o&&s?{apiVersion:Object(u.n)(p.PipelineModel),kind:p.PipelineModel.kind,metadata:{name:o,namespace:e.metadata.namespace},spec:s}:null},k=(e,t,n)=>{var a,i,r,o,s;const l=(e=>{var t,n,a,i;if(!e)return 0;return(null!==(n=((null===(t=e.spec)||void 0===t?void 0:t.tasks)||[]).length)&&void 0!==n?n:0)+(null!==(i=((null===(a=e.spec)||void 0===a?void 0:a.finally)||[]).length)&&void 0!==i?i:0)})(t)-(e=>{var t,n,a,i;if(!e)return 0;return(null!==(n=((null===(t=e.spec)||void 0===t?void 0:t.tasks)||[]).filter(e=>{var t,n;return"Task"!==(null===(t=e.taskRef)||void 0===t?void 0:t.kind)&&"ClusterTask"!==(null===(n=e.taskRef)||void 0===n?void 0:n.kind)}).length)&&void 0!==n?n:0)+(null!==(i=((null===(a=e.spec)||void 0===a?void 0:a.finally)||[]).filter(e=>{var t,n;return"Task"!==(null===(t=e.taskRef)||void 0===t?void 0:t.kind)&&"ClusterTask"!==(null===(n=e.taskRef)||void 0===n?void 0:n.kind)}).length)&&void 0!==i?i:0)})(t),c=()=>{var t;return(null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.taskRuns)?Object.keys(e.status.taskRuns):n?null==n?void 0:n.map(e=>e.metadata.name):[]},u=c().length,d=((null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.skippedTasks)||[]).length,p={PipelineNotStarted:0,Pending:0,Running:0,Succeeded:0,Failed:0,Cancelled:0,Skipped:d};if((null===(i=null==e?void 0:e.status)||void 0===i?void 0:i.taskRuns)||n){c().forEach(t=>{const a=Object(v.c)((null==n?void 0:n.find(e=>e.metadata.name===t))||e.status.taskRuns[t]);"Succeeded"===a?p[m.a.Succeeded]++:"Running"===a?p[m.a.Running]++:"Failed"===a?p[m.a.Failed]++:"Cancelled"===a?p[m.a.Cancelled]++:p[m.a.Pending]++});const t=p[m.a.Failed]>0,a=Object(v.c)(e)===m.a.Cancelled,i=l>=u?l-u-d:l;t||a?p[m.a.Cancelled]+=i:p[m.a.Pending]+=i}else"False"===(null===(s=null===(o=null===(r=null==e?void 0:e.status)||void 0===r?void 0:r.conditions)||void 0===o?void 0:o[0])||void 0===s?void 0:s.status)||(null==e?void 0:e.spec.status)===v.a.PipelineRunCancelled?p[m.a.Cancelled]=l:(null==e?void 0:e.spec.status)===v.a.PipelineRunPending?p[m.a.Pending]+=l:p[m.a.PipelineNotStarted]++;return p},E=e=>e===p.ClusterTaskModel.kind?p.ClusterTaskModel:e===p.TaskModel.kind||void 0===e?p.TaskModel:null,T=e=>(E(e)||p.TaskModel).kind,P=e=>e===p.ClusterTriggerBindingModel.kind?p.ClusterTriggerBindingModel:e===p.TriggerBindingModel.kind||void 0===e?p.TriggerBindingModel:null,y=e=>(P(e)||p.TriggerBindingModel).kind,O=e=>{const t=E(e);return Object(u.Hb)(t)},R=(e,t)=>{const n=t&&k(e,void 0,t);return null==n?void 0:n.Running},S=(e,t)=>!(e&&(R(e,t)>0||Object(v.c)(e)===m.a.Running)),j=(e,t)=>!(e&&((null==t?void 0:t.Running)>0||Object(v.c)(e)===m.a.Running)),C=(e,t)=>!(e&&R(e,t)>0&&Object(v.c)(e)!==m.a.Cancelled),I=(e,t)=>!(e&&(null==t?void 0:t.Running)>0&&Object(v.c)(e)!==m.a.Cancelled)},5648:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"g",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"i",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"j",(function(){return m}));var a,i,r,o=n(5591);!function(e){e.REPOSITORY="Repository",e.URL_REPO="RepoUrl",e.URL_ORG="RepoOrg",e.SHA="sha",e.EVENT_TYPE="EventType"}(a||(a={})),function(e){e.SHA_MESSAGE="sha_message",e.SHA_URL="sha_url",e.REPO_URL="repo_url",e.BRANCH="Branch"}(i||(i={})),function(e){e.golang="go",e.nodejs="nodejs",e.python="python",e.java="java"}(r||(r={}));const s={[a.REPOSITORY]:"pipelinesascode.tekton.dev/repository",[a.URL_REPO]:"pipelinesascode.tekton.dev/url-repository",[a.URL_ORG]:"pipelinesascode.tekton.dev/url-org",[a.SHA]:"pipelinesascode.tekton.dev/sha",[a.EVENT_TYPE]:"pipelinesascode.tekton.dev/event-type"},l={[i.SHA_MESSAGE]:"pipelinesascode.tekton.dev/sha-title",[i.SHA_URL]:"pipelinesascode.tekton.dev/sha-url",[i.REPO_URL]:"pipelinesascode.tekton.dev/repo-url",[i.BRANCH]:"pipelinesascode.tekton.dev/branch"};var c;!function(e){e.GITHUB="github",e.WEBHOOK="webhook"}(c||(c={}));const u={gitUrl:"",githubAppAvailable:!1,gitProvider:o.b.INVALID,name:"",method:"github",showOverviewPage:!1,yamlData:"",webhook:{token:"",method:"token",secret:"",url:"",user:"",autoAttach:!1}},d={[o.b.GITHUB]:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token",[o.b.GITLAB]:"https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html",[o.b.BITBUCKET]:"https://support.atlassian.com/bitbucket-cloud/docs/app-passwords/"},p={[o.b.GITHUB]:"https://docs.github.com/en/developers/webhooks-and-events/webhooks/creating-webhooks",[o.b.GITLAB]:"https://docs.gitlab.com/ee/user/project/integrations/webhooks.html#configure-a-webhook-in-gitlab",[o.b.BITBUCKET]:"https://support.atlassian.com/bitbucket-cloud/docs/manage-webhooks/"},m=["github.com","bitbucket.org","gitlab.com"]},5649:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return v}));var a=n(2338),i=n(689),r=n(5591),o=n(5653),s=n(15),l=n(5655),c=n(5621);const u=e=>i.object().shape({name:Object(s.Zd)(e),project:c.l,application:c.a,image:Object(c.h)(e),git:Object(c.g)(e),docker:Object(c.e)(e),devfile:Object(c.d)(e),deployment:Object(c.c)(e),serverless:Object(c.o)(e),route:Object(c.n)(e),limits:Object(c.k)(e),build:c.b,resources:c.m,healthChecks:Object(l.a)(e),pac:Object(o.e)(e),pipeline:c.i}),d=(e,t)=>e.startsWith(`https://${t}/`)||e.startsWith(`https://www.${t}/`)||e.includes(`@${t}:`),p=e=>c.f.test(e)?d(e,"github.com")?r.b.GITHUB:d(e,"bitbucket.org")?r.b.BITBUCKET:d(e,"gitlab.com")?r.b.GITLAB:d(e,"gitea.com")||e.includes("gitea")?r.b.GITEA:r.b.UNSURE:r.b.INVALID,m=e=>{if(s.Yd.test(e))return e;const t=a.a(e);return e.match(/^\d/)||t.match(/^\d/)?"ocp-"+t:t},v=e=>{if(!c.f.test(e))return;const t=e.replace(/\/$/,"").split("/").pop();return m(t)}},5650:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"k",(function(){return g})),n.d(t,"f",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return k})),n.d(t,"h",(function(){return E})),n.d(t,"j",(function(){return T})),n.d(t,"g",(function(){return P})),n.d(t,"b",(function(){return y})),n.d(t,"i",(function(){return O}));var a,i,r=n(321),o=n(29),s=n(550),l=n(50),c=n(16),u=n(384),d=n(4427),p=n(461),m=n(5),v=n(158),b=n(5588);!function(e){e.NUMBER_OF_PIPELINE_RUNS="NUMBER_OF_PIPELINE_RUNS",e.PIPELINE_RUN_DURATION="PIPELINE_RUN_DURATION",e.PIPELINE_RUN_TASK_RUN_DURATION="PIPELINE_RUN_TASK_RUN_DURATION",e.PIPELINE_SUCCESS_RATIO="PIPELINE_SUCCESS_RATIO"}(a||(a={})),function(e){e.TEKTON="tekton",e.TEKTON_PIPELINES_CONTROLLER="tekton_pipelines_controller"}(i||(i={}));const g=(e=i.TEKTON_PIPELINES_CONTROLLER)=>({[b.n.PIPELINE_TASK_LEVEL]:{[a.PIPELINE_SUCCESS_RATIO]:s.a(e+'_pipelinerun_duration_seconds_count{pipeline="<%= name %>",namespace="<%= namespace %>"}'),[a.NUMBER_OF_PIPELINE_RUNS]:s.a(`sum(${e}_pipelinerun_duration_seconds_count{pipeline="<%= name %>",namespace="<%= namespace %>"})`)},[b.n.PIPELINERUN_TASKRUN_LEVEL]:{[a.NUMBER_OF_PIPELINE_RUNS]:s.a(`sum(count by (pipelinerun) (${e}_pipelinerun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"}))`),[a.PIPELINE_RUN_TASK_RUN_DURATION]:s.a(`sum(${e}_pipelinerun_taskrun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"})  by (pipelinerun, task)`),[a.PIPELINE_RUN_DURATION]:s.a(`sum(${e}_pipelinerun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"})  by (pipelinerun)`),[a.PIPELINE_SUCCESS_RATIO]:s.a(`count(sort_desc(${e}_pipelinerun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"})) by(status)`)},[b.n.UNSIMPLIFIED_METRICS_LEVEL]:{[a.NUMBER_OF_PIPELINE_RUNS]:s.a(`sum(count by (pipelinerun) (${e}_pipelinerun_duration_seconds_count{pipeline="<%= name %>",exported_namespace="<%= namespace %>"}))`),[a.PIPELINE_RUN_TASK_RUN_DURATION]:s.a(`sum(${e}_pipelinerun_taskrun_duration_seconds_sum{pipeline="<%= name %>",exported_namespace="<%= namespace %>"})  by (pipelinerun, task)`),[a.PIPELINE_RUN_DURATION]:s.a(`sum(${e}_pipelinerun_duration_seconds_sum{pipeline="<%= name %>",exported_namespace="<%= namespace %>"})  by (pipelinerun)`),[a.PIPELINE_SUCCESS_RATIO]:s.a(`count(sort_desc(${e}_pipelinerun_duration_seconds_count{pipeline="<%= name %>",exported_namespace="<%= namespace %>"})) by(status)`)}}),f=e=>(e<0?"-":"")+(e=>0===e||e>=.001&&e<1e23?Object(m.cc)(e).string:e.toExponential(1))(Math.abs(e)),h=e=>v.b.format(e),k=(e,t,n)=>{const{metric:a,values:i}=e,r=l.a(i,e=>{const t=Number(e[1]);return{x:new Date(new Date(1e3*e[0]).setHours(0,0,0,0)),y:Number.isNaN(t)?null:t,metric:a}}),o=Number(c.a(r,"[0].x")),s=Number(c.a(u.a(r),"x")),p=n/t;return d.a(o,s,p).forEach((e,t)=>{const n=new Date(e);c.a(r,[t,"x"])>n&&r.splice(t,0,{x:n,y:null,metric:a})}),r},E=(e,t,n)=>{var a;const i=(null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.result)||[];return null==i?void 0:i.map(e=>{var a;return null===(a=null==e?void 0:e.values)||void 0===a?void 0:a.map(([a,i])=>{var r,o;return{x:null!==(r=null==t?void 0:t(e))&&void 0!==r?r:new Date(1e3*a),y:null!==(o=null==n?void 0:n(i))&&void 0!==o?o:parseFloat(i),metric:null==e?void 0:e.metric,time:a}})})},T=e=>{const t=[];if(!e)return t;const n=Object(r.b)("1d"),a=Math.round(e/n),i=new Date(Date.now());for(i.setHours(0,0,0,0);t.length-1<a;)t.push(i.getTime()),i.setDate(i.getDate()-1);return t.slice(0,a)},P=(e,t)=>{if(0===e)return o.a.t("pipelines-plugin~less than a sec");let n=Math.round(e),a=0,i=0,r="";return n>=60&&(a=Math.floor(n/60),n%=60),a>=60&&(i=Math.floor(a/60),a%=60),i>0&&(r+=t?o.a.t("pipelines-plugin~{{count}} hour",{count:i}):o.a.t("pipelines-plugin~{{hr}}h",{hr:i}),r+=" "),a>0&&(r+=t?o.a.t("pipelines-plugin~{{count}} minute",{count:a}):o.a.t("pipelines-plugin~{{min}}m",{min:a}),r+=" "),n>0&&(r+=t?o.a.t("pipelines-plugin~{{count}} second",{count:n}):o.a.t("pipelines-plugin~{{sec}}s",{sec:n})),r.trim()},y=()=>({"1d":o.a.t("pipelines-plugin~1 day"),"3d":o.a.t("pipelines-plugin~3 days"),"1w":o.a.t("pipelines-plugin~1 week"),"2w":o.a.t("pipelines-plugin~2 weeks"),"3w":o.a.t("pipelines-plugin~3 weeks"),"4w":o.a.t("pipelines-plugin~4 weeks")}),O=e=>{let t=0;return p.a(e,"x").map(e=>{const n=e.y-t;return t+=e.y,Object.assign(Object.assign({},e),{y:n})})}},5651:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return d}));var a=n(8),i=n(1402);const r=e=>{const[t,n]=null==e?void 0:e.match(/^[0-9]+|[a-zA-Z]*/g);return{autoscalewindow:Number(t)||"",autoscalewindowUnit:n||"s",defaultAutoscalewindowUnit:n||"s"}},o=/ *\([^)]*\) */g,s=e=>e.replace(o,""),l=(e,t)=>{var n;if(!(null===(n=e.spec)||void 0===n?void 0:n.ref))return null;const{apiVersion:r,kind:o,name:s}=e.spec.ref;return Object(a.n)(i.l)===r&&o===i.l.kind&&s!==t?s:null},c=(e,t)=>[...new Set(null==e?void 0:e.filter(e=>!((null==t?void 0:t.length)>0)||(null==t?void 0:t.includes(s(e)))).map(e=>s(e)))],u=e=>e.some(e=>new RegExp(o).test(e)),d=(e,t=[],n)=>e.filter(e=>u([e])).map(e=>{var a,i;const r=null==t?void 0:t.find(t=>t.metadata.name===s(e));return r&&(null===(i=null===(a=r.spec)||void 0===a?void 0:a.ref)||void 0===i?void 0:i.name)!==n?r:null}).filter(e=>!!e)},5653:function(e,t,n){"use strict";n.d(t,"g",(function(){return T})),n.d(t,"e",(function(){return y})),n.d(t,"c",(function(){return R})),n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return j})),n.d(t,"f",(function(){return C})),n.d(t,"d",(function(){return I}));var a=n(5596),i=n(320),r=n(2338),o=n(689),s=n(5621),l=n(5624),c=n(77),u=n(5591),d=n(4359),p=n(10),m=n(15),v=n(5586),b=n(5620),g=n(5656),f=n(5588),h=n(5648),k=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function o(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}))};const E={dryRun:"All"},T=e=>o.object().shape({name:o.string().matches(m.Yd,{message:e("pipelines-plugin~Name must consist of lower-case letters, numbers and hyphens. It must start with a letter and end with a letter or number."),excludeEmptyString:!0}).required(e("pipelines-plugin~Required")),gitUrl:o.string().matches(s.f,e("pipelines-plugin~Invalid Git URL.")).required(e("pipelines-plugin~Required")),accessToken:o.string(),webhook:o.object().when("gitProvider",{is:u.b.BITBUCKET,then:o.object().shape({user:o.string().matches(l.a,{message:e("pipelines-plugin~Name must consist of lower-case letters, numbers, underscores and hyphens. It must start with a letter and end with a letter or number."),excludeEmptyString:!0}).required(e("pipelines-plugin~Required"))})}).when(["method","gitProvider","gitUrl"],{is:(e,t,n)=>n&&!(t===u.b.GITHUB&&e===u.b.GITHUB),then:o.object().shape({token:o.string().test("oneOfRequired","Required",(function(){return this.parent.token||this.parent.secretRef})),secretRef:o.string().test("oneOfRequired","Required",(function(){return this.parent.token||this.parent.secretRef}))})})}),P=e=>o.object().shape({webhook:o.object().when("gitProvider",{is:u.b.BITBUCKET,then:o.object().shape({user:o.string().matches(m.Yd,{message:e("pipelines-plugin~Name must consist of lower-case letters, numbers and hyphens. It must start with a letter and end with a letter or number."),excludeEmptyString:!0}).required(e("pipelines-plugin~Required"))})}).when(["method","gitProvider","gitUrl"],{is:(e,t,n)=>n&&t&&!(t===u.b.GITHUB&&e===u.b.GITHUB),then:o.object().shape({token:o.string().test("oneOfRequired","Required",(function(){return this.parent.token||this.parent.secretRef})),secretRef:o.string().test("oneOfRequired","Required",(function(){return this.parent.token||this.parent.secretRef}))})})}),y=e=>o.object().shape({repository:o.object().when(["pipelineType","pipelineEnabled"],{is:(e,t)=>e===b.a.PAC&&t,then:P(e)})}),O=(e,t)=>e.startsWith(`https://${t}/`)||e.startsWith(`https://www.${t}/`)||e.includes(`@${t}:`),R=e=>s.f.test(e)?O(e,"github.com")?u.b.GITHUB:O(e,"bitbucket.org")?u.b.BITBUCKET:O(e,"gitlab.com")?u.b.GITLAB:u.b.UNSURE:u.b.INVALID,S=(e,t,n={},r)=>k(void 0,void 0,void 0,(function*(){var o,s,l;const{name:m,gitUrl:b,webhook:{secretObj:g,method:f,token:T,secret:P,user:y}}=e,O=i.Base64.encode(P),S=R(b);let j;T&&"token"===f?j=yield((e,t,n,a,r,o,s)=>k(void 0,void 0,void 0,(function*(){const l={apiVersion:p.SecretModel.apiVersion,kind:p.SecretModel.kind,metadata:{generateName:e+"-token-",namespace:a},type:d.SecretType.opaque,stringData:Object.assign(Object.assign({"provider.token":n},o&&{"webhook.secret":o}),r===u.b.BITBUCKET&&{"webhook.auth":i.Base64.encode(`${t}:${n}`)})};return Object(c.g)({model:p.SecretModel,data:l,ns:a,queryParams:s?E:{}})})))(m,y,T,t,S,P,r):"secret"===f&&g&&(null===(o=null==g?void 0:g.data)||void 0===o?void 0:o["webhook.secret"])!==O&&(yield Object(c.p)({model:p.SecretModel,resource:g,data:[{op:"replace",path:"/data/webhook.secret",value:i.Base64.encode(P)}]}));const C=a(b).source,I=j||g,_={kind:v.RepositoryModel.kind,apiVersion:"pipelinesascode.tekton.dev/v1alpha1",metadata:Object.assign({name:m,namespace:t},n||{}),spec:Object.assign({url:b},I||"github.com"!==C?{git_provider:Object.assign(Object.assign(Object.assign({},h.j.includes(C)?{}:{url:C}),"bitbucket.org"===C?{user:y}:{}),I?{secret:{name:null===(s=null==I?void 0:I.metadata)||void 0===s?void 0:s.name,key:"provider.token"},webhook_secret:{name:null===(l=null==I?void 0:I.metadata)||void 0===l?void 0:l.name,key:"webhook.secret"}}:{})}:{})};return yield Object(c.g)({model:v.RepositoryModel,data:_,ns:t,queryParams:r?E:{}})})),j=(e,t,n)=>k(void 0,void 0,void 0,(function*(){var a,r,o;const{gitUrl:s,webhook:{method:l,token:c,secret:d,url:p,secretObj:m,user:v}}=e,b=R(s),g=Object(u.e)(s,b);let f,h=!0;n&&"false"===(null===(a=null==t?void 0:t.data)||void 0===a?void 0:a["webhook-ssl-verification"])&&(h=!1),f=b===u.b.BITBUCKET?"token"===l?i.Base64.encode(`${v}:${c}`):i.Base64.decode(null===(r=null==m?void 0:m.data)||void 0===r?void 0:r["webhook.auth"]):"token"===l?c:i.Base64.decode(null===(o=null==m?void 0:m.data)||void 0===o?void 0:o["provider.token"]);return yield g.createRepoWebhook(f,p,h,d)})),C=e=>{if(!s.f.test(e))return;const t=e.replace(/\/$/,"").split("/").pop();return n=t,m.Yd.test(n)?"git-"+n:"git-"+r.a(n);var n},I=(e,t)=>k(void 0,void 0,void 0,(function*(){var n;let a;try{const[t]=yield Object(c.n)({model:p.ConfigMapModel,queryParams:{ns:f.g,labelSelector:{matchLabels:{"pipelinesascode.openshift.io/runtime":h.g[e]||e}}}});a=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.template}catch(e){console.log("failed to fetch runtime template:",e)}return null!=a?a:yield(e=>k(void 0,void 0,void 0,(function*(){var t;let n=(e=>`apiVersion: tekton.dev/v1beta1\nkind: PipelineRun\nmetadata:\n  name: ${null!=e?e:"pull_request"}\n  annotations:\n    # The event we are targeting as seen from the webhook payload\n    # this can be an array too, i.e: [pull_request, push]\n    pipelinesascode.tekton.dev/on-event: "[pull_request, push]"\n\n    # The branch or tag we are targeting (ie: main, refs/tags/*)\n    pipelinesascode.tekton.dev/on-target-branch: "main"\n\n    # Fetch the git-clone task from hub, we are able to reference later on it\n    # with taskRef and it will automatically be embedded into our pipeline.\n    pipelinesascode.tekton.dev/task: "git-clone"\n\n    # You can add more tasks in here to reuse, browse the one you like from here\n    # https://hub.tekton.dev/\n    # example:\n    # pipelinesascode.tekton.dev/task-2: "[maven, buildah]"\n\n    # How many runs we want to keep attached to this event\n    pipelinesascode.tekton.dev/max-keep-runs: "5"\nspec:\n  params:\n    # The variable with brackets are special to Pipelines as Code\n    # They will automatically be expanded with the events from Github.\n    - name: repo_url\n      value: "{{ repo_url }}"\n    - name: revision\n      value: "{{ revision }}"\n  pipelineSpec:\n    params:\n      - name: repo_url\n      - name: revision\n    workspaces:\n      - name: source\n      - name: basic-auth\n    tasks:\n      - name: fetch-repository\n        taskRef:\n          name: git-clone\n        workspaces:\n          - name: output\n            workspace: source\n          - name: basic-auth\n            workspace: basic-auth\n        params:\n          - name: url\n            value: $(params.repo_url)\n          - name: revision\n            value: $(params.revision)\n\n      # Customize this task if you like, or just do a taskRef\n      # to one of the hub task.\n      - name: noop-task\n        runAfter:\n          - fetch-repository\n        workspaces:\n          - name: source\n            workspace: source\n        taskSpec:\n          workspaces:\n            - name: source\n          steps:\n            - name: noop-task\n              image: registry.access.redhat.com/ubi9/ubi-micro\n              workingDir: $(workspaces.source.path)\n              script: |\n                exit 0\n  workspaces:\n  - name: source\n    volumeClaimTemplate:\n      spec:\n        accessModes:\n          - ReadWriteOnce\n        resources:\n          requests:\n            storage: 1Gi\n  # This workspace will inject secret to help the git-clone task to be able to\n  # checkout the private repositories\n  - name: basic-auth\n    secret:\n      secretName: "{{ git_auth_secret }}"`)(e);try{const e=yield Object(c.j)({model:p.ConfigMapModel,ns:f.g,name:g.h});(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.template)&&(n=e.data.template)}catch(e){console.log("failed to fetch default template:",e)}return n})))(t)}))},5655:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(689);const i=/^\/.*$/,r=e=>a.object().shape({containerName:a.string(),showForm:a.boolean(),enabled:a.boolean(),modified:a.boolean(),data:a.object().when("showForm",{is:!0,then:a.object().shape({periodSeconds:a.number().integer(e("devconsole~Value must be an integer.")).min(1,e("devconsole~Period must be greater than or equal to 1.")).max(2147483647,e("devconsole~Value is larger than maximum value allowed.")),initialDelaySeconds:a.number().integer(e("devconsole~Value must be an integer.")).min(0,e("devconsole~Initial delay must be greater than or equal to 0.")).max(2147483647,e("devconsole~Value is larger than maximum value allowed.")),failureThreshold:a.number().integer(e("devconsole~Value must be an integer.")).min(1,e("devconsole~Failure threshold must be greater than or equal to 1.")),timeoutSeconds:a.number().integer(e("devconsole~Value must be an integer.")).min(1,e("devconsole~Timeout must be greater than or equal to 1.")).max(2147483647,e("devconsole~Value is larger than maximum value allowed.")),successThreshold:a.number().integer(e("devconsole~Value must be an integer.")).min(1,e("devconsole~Success threshold must be greater than or equal to 1.")).max(2147483647,e("devconsole~Value is larger than maximum value allowed.")),requestType:a.string(),httpGet:a.object().when("requestType",{is:"httpGet",then:a.object({path:a.string().matches(i,{message:e("devconsole~Path must start with /."),excludeEmptyString:!0}),port:a.number().required(e("devconsole~Required"))})}),tcpSocket:a.object().when("requestType",{is:"tcpSocket",then:a.object({port:a.number().required(e("devconsole~Required"))})}),exec:a.object().when("requestType",{is:"command",then:a.object({command:a.array().of(a.string().required(e("devconsole~Required")))})})})})}),o=e=>a.object().shape({readinessProbe:r(e),livenessProbe:r(e),startupProbe:r(e)})},5656:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"h",(function(){return u}));const a="https://github.com/settings/apps/new",i="https://docs.github.com/en/developers/apps/getting-started-with-apps/about-apps#about-github-apps",r="https://api.github.com/app-manifests",o="pipelines-as-code-interceptor",s="pipelines-as-code-secret",l="pipelines-ci-clustername",c="pipelines-as-code-info",u="pipelines-as-code-pipelinerun-generic"},5669:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"h",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return c})),n.d(t,"k",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"l",(function(){return v}));const a="OPENSHIFT_PIPELINE",i="OPENSHIFT_PIPELINE_AS_CODE",r="OPENSHIFT_PIPELINE_CONDITION",o="openshift",s="pipeline.openshift.io/runtime",l="pipeline.openshift.io/runtime-version",c="pipeline.openshift.io/strategy",u="pipeline.preferredPipelinePageTab",d="function.knative.dev/runtime",p="https://artifacthub.io/api/v1",m="resource.deleted.in.k8s",v="resource.loaded.from.tektonResults"},5673:function(e,t,n){"use strict";n.d(t,"m",(function(){return v})),n.d(t,"i",(function(){return b})),n.d(t,"h",(function(){return g})),n.d(t,"g",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"n",(function(){return k})),n.d(t,"p",(function(){return E})),n.d(t,"o",(function(){return T})),n.d(t,"k",(function(){return P})),n.d(t,"j",(function(){return y})),n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return R})),n.d(t,"l",(function(){return S})),n.d(t,"d",(function(){return j})),n.d(t,"f",(function(){return C})),n.d(t,"c",(function(){return I}));var a=n(255),i=n(745),r=n(117),o=n(384),s=n(1533),l=n(70),c=n(22),u=n(283),d=n(1401),p=n(4362),m=n(10);const v=["app.kubernetes.io/name","app.openshift.io/runtime"],b=e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.annotations)||void 0===t?void 0:t.sampleRepo)&&void 0!==n?n:""},g=e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.annotations)||void 0===t?void 0:t.sampleRef)&&void 0!==n?n:""},f=e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.annotations)||void 0===t?void 0:t.sampleContextDir)&&void 0!==n?n:""},h=e=>{var t,n,r,o,s,l;return(e=>a.a(e,(e,t,n)=>{const a=n.split("/");1===a.length&&a.push("tcp");const r=parseInt(a[0],10);return i.a(r)?e.push({containerPort:r,protocol:a[1].toUpperCase()}):console.warn("Unrecognized image port format",n),e},[]))((null===(r=null===(n=null===(t=null==e?void 0:e.image)||void 0===t?void 0:t.dockerImageMetadata)||void 0===n?void 0:n.Config)||void 0===r?void 0:r.ExposedPorts)||(null===(l=null===(s=null===(o=null==e?void 0:e.image)||void 0===o?void 0:o.dockerImageMetadata)||void 0===s?void 0:s.ContainerConfig)||void 0===l?void 0:l.ExposedPorts))},k=e=>`${e.containerPort}-${e.protocol}`.toLowerCase(),E=e=>e.replace(/(-|^)([^-]?)/g,(e,t,n)=>(t&&" ")+n.toUpperCase()),T=e=>(Array.isArray(e)?e:[e]).filter(e=>Object(p.isBuilder)(e)).reduce((e,t)=>{var n,a,i;const r=Object(p.getBuilderTagsSortedByVersion)(t),o=Object(p.getMostRecentBuilderTag)(t),{name:s}=t.metadata,l=null===(a=null===(n=null==t?void 0:t.metadata)||void 0===n?void 0:n.annotations)||void 0===a?void 0:a["openshift.io/display-name"],c=null===(i=null==o?void 0:o.annotations)||void 0===i?void 0:i.description,u=t.metadata.namespace,m=l&&l.length<14?l:E(s),v=Object(d.e)(o),b=Object(d.d)(v);return e[s]={obj:t,name:s,displayName:l,description:c,title:m,iconUrl:b,tags:r,recentTag:o,imageStreamNamespace:u},e},{}),P=(e,t,n)=>{var a,i;const o=r.a(e,{name:t});return[o,null!==(i=null===(a=null==o?void 0:o.annotations)||void 0===a?void 0:a["openshift.io/display-name"])&&void 0!==i?i:n]},y=e=>{if(!e)return;const t=o.a(e.split("/"));return s.a(t.split(/[^a-z0-9-]/))};var O,R;!function(e){e.External="external",e.Internal="internal"}(O||(O={})),function(e){e.Openshift="openshift"}(R||(R={}));const S=e=>({External:{value:O.External,label:e("devconsole~Image name from external registry")},Internal:{value:O.Internal,label:e("devconsole~Image stream tag from internal registry")}}),j=e=>(e&&!c.a(e)?(e=>l.a(e.status.tags)&&e.status.tags.length?e.status.tags.sort(({tag:e},{tag:t})=>{const n=u.coerce(e),a=u.coerce(t);return n||a?n?a?u.rcompare(n,a):-1:1:e.localeCompare(t)}):[])(e):[]).reduce((e,{tag:t})=>(e[t]=t,e),{}),C=()=>[{isList:!0,kind:m.ProjectModel.kind,prop:m.ProjectModel.id}],I=e=>{const t=[];return e&&t.push({isList:!0,kind:m.ImageStreamModel.kind,prop:m.ImageStreamModel.id,namespace:e}),t}},5687:function(e,t,n){"use strict";n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"f",(function(){return f})),n.d(t,"b",(function(){return k})),n.d(t,"a",(function(){return E})),n.d(t,"e",(function(){return T}));var a=n(225),i=n(16),r=n(499),o=n(1557),s=n(53),l=n(15),c=n(5669),u=n(5586),d=n(5623),p=n(5588),m=n(5725);const v=e=>{var t;return e.metadata.generateName?e.metadata.generateName:(null===(t=e.metadata.name)||void 0===t?void 0:t.replace(/-[a-z0-9]{5,6}$/,""))+"-"},b=(e=null,t,n)=>{var m,b,g,f,h,k;if(!e&&!t)return console.error("Missing parameters, unable to create new PipelineRun"),null;const E=((e,t)=>{var n,a,i;return e?e.metadata.name:t?null!==(a=null===(n=t.spec.pipelineRef)||void 0===n?void 0:n.name)&&void 0!==a?a:(null===(i=t.metadata.annotations)||void 0===i?void 0:i[p.z])||t.metadata.name:null})(e,t),T=null==t?void 0:t.spec.workspaces,P=null==t?void 0:t.spec.params,y=null==e?void 0:e.spec.params,O=P||Object(d.m)(y),R=o.a({},null===(m=null==e?void 0:e.metadata)||void 0===m?void 0:m.annotations,null===(b=null==t?void 0:t.metadata)||void 0===b?void 0:b.annotations,{[p.q.user]:Object(s.d)()},!(null==t?void 0:t.spec.pipelineRef)&&!(null===(g=null==t?void 0:t.metadata.annotations)||void 0===g?void 0:g[p.z])&&{[p.z]:E});delete R["kubectl.kubernetes.io/last-applied-configuration"],delete R["tekton.dev/v1beta1TaskRuns"],delete R["results.tekton.dev/log"],delete R["results.tekton.dev/record"],delete R["results.tekton.dev/result"],delete R[c.c],delete R[c.l];return(e=>{let t=e;if(a.a(t,"spec.serviceAccount")){const e=i.a(t,"spec.serviceAccount");t=r.a(t,["spec.serviceAccount"]),t=o.a(t,{spec:{serviceAccountName:e}})}return t})({apiVersion:e?e.apiVersion:t.apiVersion,kind:u.PipelineRunModel.kind,metadata:Object.assign(Object.assign({},(null==n?void 0:n.generateName)?{generateName:E+"-"}:{name:void 0!==(null===(f=null==t?void 0:t.metadata)||void 0===f?void 0:f.name)?`${v(t)}${Object(l.wd)()}`:`${E}-${Object(l.wd)()}`}),{annotations:R,namespace:e?e.metadata.namespace:t.metadata.namespace,labels:o.a({},null===(h=null==e?void 0:e.metadata)||void 0===h?void 0:h.labels,null===(k=null==t?void 0:t.metadata)||void 0===k?void 0:k.labels,((null==t?void 0:t.spec.pipelineRef)||e)&&{"tekton.dev/pipeline":E})}),spec:Object.assign(Object.assign(Object.assign(Object.assign({},(null==t?void 0:t.spec)||{}),((null==t?void 0:t.spec.pipelineRef)||e)&&{pipelineRef:{name:E}}),O&&{params:O}),{workspaces:T,status:null})})},g=e=>({volumeClaimTemplate:{metadata:{labels:{[p.u.pipeline]:e}},spec:{accessModes:["ReadWriteOnce"],resources:{requests:{storage:"1Gi"}}}}}),f=e=>({volumeClaimTemplate:{metadata:{finalizers:["kubernetes.io/pvc-protection"],labels:{[p.u.pipeline]:e,"boson.dev/function":"true","function.knative.dev":"true","function.knative.dev/name":e}},spec:{accessModes:["ReadWriteOnce"],resources:{requests:{storage:"1Gi"}},storageClassName:"gp3-csi",volumeMode:"Filesystem"}}}),h=e=>t=>{let n={type:p.x.EmptyDirectory,data:{emptyDir:{}}};return e&&(n={type:p.x.PVC,data:{persistentVolumeClaim:{claimName:e}}}),t.optional&&(n={type:p.x.NoWorkspace,data:{}}),Object.assign(Object.assign({},t),n)},k=(e,t=!1,n="")=>{const{metadata:{namespace:a},spec:{params:i,resources:r}}=e;return{namespace:a,parameters:(i||[]).map(e=>Object.assign(Object.assign({},e),{value:e.default})),resources:(r||[]).map(e=>({name:e.name,selection:t?m.a:"",data:Object.assign(Object.assign({},m.b[e.type]),{type:e.type})})),workspaces:(e.spec.workspaces||[]).map(h(n))}},E=e=>Object.keys(e).map(t=>({name:t,value:e[t]})),T=(e,t,n,a,i)=>{const{parameters:r,workspaces:o}=t,s={metadata:{annotations:a,labels:n},spec:{pipelineRef:{name:e.metadata.name},params:r.map(({name:e,value:t})=>({name:e,value:t})),workspaces:Object(d.o)(o)}};return b(e,s,i)}},5723:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var a=n(141),i=n(225),r=n(22),o=n(5599),s=n(5790),l=n(5724);const c=(e,t)=>{var n;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e.failureThreshold&&{failureThreshold:a.a(e.failureThreshold)}),e.successThreshold&&{successThreshold:a.a(e.successThreshold)}),e.requestType===l.b.ContainerCommand&&{exec:e.exec}),e.requestType===l.b.HTTPGET&&{httpGet:Object.assign(Object.assign({},e[e.requestType]),{scheme:(null===(n=e[e.requestType])||void 0===n?void 0:n.scheme)?e[e.requestType].scheme[0]:"HTTP",port:t===o.k.KnativeService?0:a.a(e.httpGet.port)})}),e.requestType===l.b.TCPSocket&&{tcpSocket:{port:t===o.k.KnativeService?0:a.a(e.tcpSocket.port)}}),e.initialDelaySeconds&&{initialDelaySeconds:a.a(e.initialDelaySeconds)}),e.periodSeconds&&{periodSeconds:a.a(e.periodSeconds)}),e.timeoutSeconds&&{timeoutSeconds:a.a(e.timeoutSeconds)})},u=e=>{var t,n,a,r,o,s,c,u;return Object.assign(Object.assign(Object.assign(Object.assign({},e),{requestType:(u=e,i.a(u,l.b.HTTPGET)?l.b.HTTPGET:i.a(u,l.b.TCPSocket)?l.b.TCPSocket:i.a(u,"exec.command")?l.b.ContainerCommand:""),failureThreshold:(null===(t=e.failureThreshold)||void 0===t?void 0:t.toString())||"",successThreshold:(null===(n=e.successThreshold)||void 0===n?void 0:n.toString())||"",initialDelaySeconds:(null===(a=e.initialDelaySeconds)||void 0===a?void 0:a.toString())||"",periodSeconds:(null===(r=e.periodSeconds)||void 0===r?void 0:r.toString())||"",timeoutSeconds:(null===(o=e.timeoutSeconds)||void 0===o?void 0:o.toString())||""}),e.httpGet&&{httpGet:Object.assign(Object.assign({},e.httpGet),{port:(null===(s=e.httpGet.port)||void 0===s?void 0:s.toString())||"",scheme:"HTTP"===e.httpGet.scheme?void 0:["HTTPS"]})}),e.tcpSocket&&{tcpSocket:{port:(null===(c=e.tcpSocket.port)||void 0===c?void 0:c.toString())||""}})},d=(e,t=0)=>{var n,a,i,o,c,d,p,m,v,b;const g=null!==(o=null===(i=null===(a=null===(n=null==e?void 0:e.spec)||void 0===n?void 0:n.template)||void 0===a?void 0:a.spec)||void 0===i?void 0:i.containers)&&void 0!==o?o:[],f=null!==(d=null===(c=null==g?void 0:g[t])||void 0===c?void 0:c[l.a.ReadinessProbe])&&void 0!==d?d:{},h=null!==(m=null===(p=null==g?void 0:g[t])||void 0===p?void 0:p[l.a.LivenessProbe])&&void 0!==m?m:{},k=null!==(b=null===(v=null==g?void 0:g[t])||void 0===v?void 0:v[l.a.StartupProbe])&&void 0!==b?b:{};return{readinessProbe:{showForm:!1,modified:!1,enabled:!r.a(f),data:r.a(f)?s.b.data:Object.assign({},u(f))},livenessProbe:{showForm:!1,modified:!1,enabled:!r.a(h),data:r.a(h)?s.b.data:Object.assign({},u(h))},startupProbe:{showForm:!1,modified:!1,enabled:!r.a(k),data:r.a(k)?s.b.data:Object.assign({},u(k))}}},p=(e,t)=>{const{readinessProbe:n,livenessProbe:a,startupProbe:i}=e;return Object.assign(Object.assign(Object.assign({},n.enabled?{readinessProbe:c(n.data,t)}:{}),a.enabled?{livenessProbe:c(a.data,t)}:{}),t!==o.k.KnativeService&&(null==i?void 0:i.enabled)?{startupProbe:c(i.data)}:{})}},5724:function(e,t,n){"use strict";var a,i;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),function(e){e.ReadinessProbe="readinessProbe",e.LivenessProbe="livenessProbe",e.StartupProbe="startupProbe"}(a||(a={})),function(e){e.HTTPGET="httpGet",e.ContainerCommand="command",e.TCPSocket="tcpSocket"}(i||(i={}))},5725:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var a=n(5588);const i="#CREATE_PIPELINE_RESOURCE#",r={[a.o.git]:{params:{url:"",revision:""}},[a.o.image]:{params:{url:""}},[a.o.storage]:{params:{type:"",location:"",dir:""}},[a.o.cluster]:{params:{name:"",url:"",username:"",password:"",insecure:""},secrets:{cadata:"",token:""}}}},5732:function(e,t,n){},5760:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return v}));var a=n(7134),i=n(2328),r=n(7116),o=n(50),s=n(10),l=n(8),c=n(1415),u=n(5586),d=n(5687);const p=e=>a.a(e,e=>i.a(e)||r.a(e)||""===e),m=(e,t,n,a)=>{const i=`${t}-${Object(c.d)(6)}`,r={apiVersion:"tekton.dev/v1alpha1",kind:u.PipelineResourceModel.kind,metadata:{name:i,namespace:n},spec:Object.assign({type:t,params:Object(d.a)(p(e))},a&&{secrets:o.a(a.data,(e,t)=>({fieldName:t,secretKey:t,secretName:a.metadata.name}))})};return Object(l.jb)(u.PipelineResourceModel,r)},v=(e,t,n)=>{const a={apiVersion:"v1",kind:"Secret",metadata:{name:`${t}-secret-${Object(c.d)(6)}`,namespace:n},stringData:p(e)};return Object(l.jb)(s.SecretModel,a)}},5781:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return k}));var a=n(0),i=n(4436),r=n(655),o=n(313),s=n(367),l=n(50),c=n(599),u=n(5797),d=n(5804),p=n(7),m=n(99),v=n(693),b=n(139);const g=(e,t)=>`${e}:${t}`,f=({tag:e,imageStreamName:t,imageStreamNamespace:n,linkToTag:r})=>{const o=i.a(e.dockerImageReference,"@");return a.createElement(a.Fragment,null,a.createElement("li",null,a.createElement("div",{className:"co-images-stream-tag-timeline__item-row"},a.createElement("span",{className:"co-images-stream-tag-timeline__circle-icon"},a.createElement(u.a,null)),a.createElement("div",{className:"co-images-stream-tag-timeline__timestamp"},a.createElement(v.Timestamp,{timestamp:e.created,simple:!0}))),a.createElement("div",{className:"co-images-stream-tag-timeline__item-row"},a.createElement("span",{className:"co-images-stream-tag-timeline__line"}),a.createElement("div",{className:"co-images-stream-tag-timeline__info"},a.createElement(m.ResourceLink,{kind:"ImageStreamTag",name:g(t,e.tag),namespace:n,title:e.tag,linkTo:r}),a.createElement("div",{className:"co-break-all"},"from ",o[0]),a.createElement("div",{className:"co-break-all"},o[1])))))},h=(e,t,n)=>t===r.a(n,t=>t.tag===e),k=({imageStreamTags:e,imageStreamName:t,imageStreamNamespace:n})=>{const{t:i}=Object(p.useTranslation)();if(!o.a(e,"items"))return a.createElement(b.c,{label:i("public~Images")});const r=s.a(l.a(e,({tag:e,items:t})=>l.a(t,({created:t,dockerImageReference:n})=>({tag:e,created:t,dockerImageReference:n})))),u=c.a(r,["created"],["desc"]),m=l.a(u,(e,i)=>a.createElement(f,{key:e.dockerImageReference,tag:e,imageStreamName:t,imageStreamNamespace:n,linkToTag:h(e.tag,i,u)}));return a.createElement(a.Fragment,null,a.createElement("ul",{className:"co-images-stream-tag-timeline"},m,a.createElement("div",null,a.createElement("span",{className:"co-images-stream-tag-timeline__square-icon"},a.createElement(d.a,null)))))}},5786:function(e,t,n){"use strict";var a,i;n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return r})),function(e){e.PENDING="Pending",e.RUNNING="Running",e.SUCCEEDED="Succeeded",e.FAILED="Failed",e.UNKNOWN="Unknown"}(a||(a={})),function(e){e.BUILDAH="buildah",e.S2I="source-to-image",e.UNKNOWN="unknown"}(i||(i={}));const r={[i.BUILDAH]:"shipwright-plugin~Buildah",[i.S2I]:"shipwright-plugin~Source-to-Image",[i.UNKNOWN]:"shipwright-plugin~Unknown"}},5790:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o}));var a=n(5724);const i=(e,t)=>{switch(e){case a.a.ReadinessProbe:return{formTitle:t("devconsole~Readiness probe"),formSubtitle:t("devconsole~A readiness probe checks if the Container is ready to handle requests. A failed readiness probe means that a Container should not receive any traffic from a proxy, even if it's running.")};case a.a.LivenessProbe:return{formTitle:t("devconsole~Liveness probe"),formSubtitle:t("devconsole~A liveness probe checks if the Container is still running. If the liveness probe fails the Container is killed.")};case a.a.StartupProbe:return{formTitle:t("devconsole~Startup probe"),formSubtitle:t("devconsole~A startup probe checks if the application within the Container is started. If the startup probe fails the Container is killed.")};default:return}},r={showForm:!1,enabled:!1,modified:!1,data:{failureThreshold:"3",requestType:a.b.HTTPGET,httpGet:{scheme:void 0,path:"/",port:"8080",httpHeaders:[]},tcpSocket:{port:"8080"},exec:{command:[""]},initialDelaySeconds:"0",periodSeconds:"10",timeoutSeconds:"1",successThreshold:"1"}},o={readinessProbe:r,livenessProbe:r,startupProbe:r}},5837:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(8),i=n(5586),r=n(5588),o=n(5760),s=n(5725),l=n(5687),c=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function o(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}))};const u=e=>c(void 0,void 0,void 0,(function*(){const{namespace:t,resources:n}=e,a=n.reduce((e,t,n)=>t.selection===s.a?Object.assign(Object.assign({},e),{[n]:t}):e,{}),i=yield Promise.all(Object.values(a).map(e=>((e,t)=>c(void 0,void 0,void 0,(function*(){const{data:{params:n,secrets:a,type:i}}=e;return a?Object(o.b)(a,i,t).then(e=>Object(o.a)(n,i,t,e)):Object(o.a)(n,i,t)})))(e,t)));if(!i||0===i.length)return e;const r=Object.keys(a);return Object.assign(Object.assign({},e),{resources:n.map((e,t)=>{if(a[t]){const n=r.indexOf(t.toString());return Object.assign(Object.assign({},e),{selection:i[n].metadata.name})}return e})})})),d=(e,t,n,o)=>c(void 0,void 0,void 0,(function*(){let s=e;s=yield u(s),s=(e=>{const{workspaces:t}=e;return t&&0!==t.length?Object.assign(Object.assign({},e),{workspaces:t.filter(e=>e.type!==r.x.NoWorkspace)}):e})(s);const c=yield Object(a.jb)(i.PipelineRunModel,Object(l.e)(t,s,n,o));return Promise.resolve(c)}))},5850:function(e,t,n){"use strict";n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return f}));var a=n(640),i=n(499),r=n(8),o=n(5669),s=n(5586),l=n(5588),c=n(5687),u=n(5837),d=(n(5760),function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function o(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}))});const p=(e,t)=>`image-registry.openshift-image-registry.svc:5000/${t}/${e}`,m=(e,t,n,a,i,r,o,s,l)=>(e||[]).map(e=>{switch(e.name){case"APP_NAME":return Object.assign(Object.assign({},e),{default:t});case"GIT_REPO":return Object.assign(Object.assign({},e),{default:a});case"GIT_REVISION":return Object.assign(Object.assign({},e),{default:i||""});case"PATH_CONTEXT":return Object.assign(Object.assign({},e),{default:r.replace(/^\//,"")||e.default});case"IMAGE_NAME":return Object.assign(Object.assign({},e),{default:p(t,n)});case"DOCKERFILE":return Object.assign(Object.assign({},e),{default:o});case"VERSION":return Object.assign(Object.assign({},e),{default:s||e.default});case"BUILD_ENVS":return Object.assign(Object.assign({},e),{default:l||e.default});default:return e}}),v=e=>{var t,n;return"docker"===(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n[o.j])},b=(e,t,n,i,l,c,u,p,b,g={})=>d(void 0,void 0,void 0,(function*(){var d;const f=a.a(c.template);return f.metadata={name:""+e,namespace:t,labels:Object.assign(Object.assign(Object.assign(Object.assign({},null===(d=f.metadata)||void 0===d?void 0:d.labels),g),{"app.kubernetes.io/instance":e,"app.kubernetes.io/name":e}),!v(f)&&{[o.i]:p})},f.spec.params=f.spec.params&&m(f.spec.params,e,t,n,i,l,u,p,b),Object(r.jb)(s.PipelineModel,f,{ns:t})})),g=e=>d(void 0,void 0,void 0,(function*(){var t,n;const a="true"===(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n["function.knative.dev"]),i=Object.assign(Object.assign({},Object(c.b)(e)),{workspaces:(e.spec.workspaces||[]).map(t=>{var n,i;return Object.assign(Object.assign({},t),{type:l.x.VolumeClaimTemplate,data:a?Object(c.f)(null===(n=null==e?void 0:e.metadata)||void 0===n?void 0:n.name):Object(c.c)(null===(i=null==e?void 0:e.metadata)||void 0===i?void 0:i.name)})}),secretOpen:!1});return Object(u.a)(i,e)})),f=(e,t,n,l,c,u,p,b,g,f,h={})=>d(void 0,void 0,void 0,(function*(){var d;let k=a.a(e);return t?(((e,t)=>{var n,a,i,r;return(null===(n=e.metadata)||void 0===n?void 0:n.labels[o.h])!==(null===(a=t.metadata)||void 0===a?void 0:a.labels[o.h])||(null===(i=e.metadata)||void 0===i?void 0:i.labels[o.i])!==(null===(r=t.metadata)||void 0===r?void 0:r.labels[o.i])})(t,e)&&(k=a.a(t),k.metadata={resourceVersion:e.metadata.resourceVersion,name:""+n,namespace:l,labels:Object.assign(Object.assign(Object.assign(Object.assign({},null===(d=t.metadata)||void 0===d?void 0:d.labels),h),{"app.kubernetes.io/instance":n,"app.kubernetes.io/name":n}),!v(t)&&{[o.i]:g})}),k.spec.params=m(t.spec.params,n,l,c,u,p,b,g,f)):k.metadata.labels=i.a(Object.assign(Object.assign({},k.metadata.labels),h),"app.kubernetes.io/instance"),Object(r.rb)(s.PipelineModel,k,l,n)}))},5903:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return v}));var a=n(0),i=n(640),r=n(655),o=n(499),s=n(5),l=n(8),c=n(5929),u=n(5723),d=n(5724);const p=(e,t,n)=>{const{healthChecks:{readinessProbe:a,livenessProbe:s,startupProbe:l},containerName:p,healthChecks:m}=e,v=i.a(t),b=r.a(v.spec.template.spec.containers,["name",p]);return v.spec.template.spec.containers[b]=Object.assign(Object.assign({},n),Object(u.b)(m,Object(c.k)(t))),a.enabled||(v.spec.template.spec.containers[b]=o.a(v.spec.template.spec.containers[b],""+d.a.ReadinessProbe)),s.enabled||(v.spec.template.spec.containers[b]=o.a(v.spec.template.spec.containers[b],""+d.a.LivenessProbe)),l.enabled||(v.spec.template.spec.containers[b]=o.a(v.spec.template.spec.containers[b],""+d.a.StartupProbe)),v},m=Object(a.createContext)({viewOnly:!1}),v=e=>{const t=Object(l.vb)(Object(l.Db)(e));return!Object(s.Dc)({group:t.apiGroup,resource:t.plural,name:e.metadata.name,namespace:e.metadata.namespace,verb:"update"})}},5929:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"g",(function(){return w})),n.d(t,"k",(function(){return A})),n.d(t,"f",(function(){return M})),n.d(t,"n",(function(){return L})),n.d(t,"b",(function(){return q})),n.d(t,"j",(function(){return B})),n.d(t,"l",(function(){return F})),n.d(t,"d",(function(){return V})),n.d(t,"m",(function(){return K})),n.d(t,"h",(function(){return H})),n.d(t,"c",(function(){return W})),n.d(t,"e",(function(){return Y})),n.d(t,"i",(function(){return X}));var a,i=n(117),r=n(16),o=n(148),s=n(499),l=n(22),c=n(225),u=n(4436),d=n(599),p=n(5591),m=n(974),v=n(1401),b=n(10),g=n(8),f=n(1402),h=n(5620),k=n(5850),E=n(5648),T=n(5669),P=n(15),y=n(5786),O=n(2221),R=n(5673),S=n(5723),j=n(6032),C=n(5599),I=n(5649),_=n(5651),N=n(6010);!function(e){e.Git="Import from Git",e.Dockerfile="Import from Dockerfile",e.Container="Deploy Image",e.JarUpload="Upload JAR file"}(a||(a={}));const w=e=>{switch(e){case a.Git:return"devconsole~Import from Git";case a.Dockerfile:return"devconsole~Import from Dockerfile";case a.Container:return"devconsole~Deploy Image";case a.JarUpload:return"devconsole~Upload JAR file";default:return e}};var U;!function(e){e.Git="Git",e.Binary="Binary"}(U||(U={}));const x=e=>{var t,n;return null===(n=null===(t=null==e?void 0:e.spec)||void 0===t?void 0:t.source)||void 0===n?void 0:n.type},A=e=>{switch(e.kind){case b.DeploymentConfigModel.kind:return C.k.OpenShift;case b.DeploymentModel.kind:return C.k.Kubernetes;case Object(g.Db)(e)===Object(g.Hb)(f.l)?f.l.kind:"":return C.k.KnativeService;default:return null}},M=(e,t)=>{switch(e){case m.BuildStrategyType.Source:return t===U.Binary?a.JarUpload:a.Git;case m.BuildStrategyType.Docker:return a.Dockerfile;default:return a.Container}},L=(e,t)=>{switch(e){case m.BuildStrategyType.Source:return t===U.Binary?N.b:I.d;case m.BuildStrategyType.Docker:return I.d;default:return j.a}},q=(e,t,n)=>!!i.a(e,e=>{var a;return n===b.DeploymentConfigModel.kind&&"ImageChange"===t?e.type===t&&(null===(a=e.imageChangeParams)||void 0===a?void 0:a.automatic):e.type===t}),B=e=>{var t,n,a,i,r,s,l,c;const{metadata:u,spec:d}=e,p=null!==(a=null===(n=null===(t=null==d?void 0:d.template)||void 0===t?void 0:t.spec)||void 0===n?void 0:n.containers)&&void 0!==a?a:[],m=null!==(l=null===(s=null===(r=null===(i=null==p?void 0:p[0])||void 0===i?void 0:i.ports)||void 0===r?void 0:r[0])||void 0===s?void 0:s.containerPort)&&void 0!==l?l:"";return{create:"cluster-local"!==(null===(c=null==u?void 0:u.labels)||void 0===c?void 0:c[f.i]),unknownTargetPort:o.a(m),targetPort:o.a(m),defaultUnknownPort:8080}},D=(e,t)=>{const n=r.a(t,"metadata.labels",{}),a=r.a(e,"metadata.labels",{});return s.a(a,["app","app.kubernetes.io/instance","app.openshift.io/runtime","app.kubernetes.io/part-of","app.openshift.io/runtime-version","app.openshift.io/runtime-namespace","networking.knative.dev/visibility",...Object.keys(n)])},G=(e,t)=>{var n,a,i,s;let u={disable:!l.a(e),create:!l.a(e),targetPort:r.a(e,"spec.port.targetPort",""),unknownTargetPort:o.a(null===(s=null===(i=null===(a=null===(n=null==e?void 0:e.spec)||void 0===n?void 0:n.port)||void 0===a?void 0:a.targetPort)||void 0===i?void 0:i.split("-"))||void 0===s?void 0:s[0])||"",defaultUnknownPort:8080,path:r.a(e,"spec.path",""),hostname:r.a(e,"spec.host",""),secure:c.a(e,"spec.tls.termination"),tls:{termination:r.a(e,"spec.tls.termination",null),insecureEdgeTerminationPolicy:r.a(e,"spec.tls.insecureEdgeTerminationPolicy",null),caCertificate:r.a(e,"spec.tls.caCertificate",""),certificate:r.a(e,"spec.tls.certificate",""),destinationCACertificate:r.a(e,"spec.tls.destinationCACertificate",""),key:r.a(e,"spec.tls.key","")},labels:D(e,t)};return A(t)===C.k.KnativeService&&(u=Object.assign(Object.assign({},u),B(t))),u},$=(e,t,n,a)=>{const i=((e,t,n)=>e?C.a.BUILDS:t?C.a.SHIPWRIGHT_BUILD:n?C.a.PIPELINES:C.a.DISABLED)(e,t,n);let o,s,l;if(i===C.a.BUILDS)o=r.a(e,"spec.strategy.type","");else if(i===C.a.SHIPWRIGHT_BUILD)switch(s=r.a(t,"spec.strategy.name",""),s){case y.a.BUILDAH:o=m.BuildStrategyType.Docker;break;case y.a.S2I:o=m.BuildStrategyType.Source;break;default:o=""}if(i===C.a.BUILDS)switch(o){case m.BuildStrategyType.Source:l=r.a(e,"spec.strategy.sourceStrategy");break;case m.BuildStrategyType.Docker:l=r.a(e,"spec.strategy.dockerStrategy");break;default:l={env:[]}}else i===C.a.SHIPWRIGHT_BUILD&&(l=r.a(t,"spec"));const c=r.a(e,"spec.triggers");return{env:(null==l?void 0:l.env)||[],triggers:{webhook:q(c,C.c[a]),image:q(c,"ImageChange"),config:q(c,"ConfigChange")},strategy:o||(Object(k.c)(n)?m.BuildStrategyType.Docker:m.BuildStrategyType.Source),source:{type:x(e)},option:i,clusterBuildStrategy:s}},F=e=>{let t={scaling:{minpods:"",maxpods:"",concurrencytarget:"",concurrencylimit:"",autoscale:{autoscalewindow:"",autoscalewindowUnit:"s",defaultAutoscalewindowUnit:"s"},concurrencyutilization:""},domainMapping:[]};if(A(e)===C.k.KnativeService){const{spec:{template:{metadata:n,spec:a}}}=e,i=null==n?void 0:n.annotations,r=(null==i?void 0:i[f.d])||"",{autoscalewindow:o,autoscalewindowUnit:s,defaultAutoscalewindowUnit:l}=Object(_.b)(r);t={scaling:{minpods:(null==i?void 0:i[f.h])||"",maxpods:(null==i?void 0:i[f.g])||"",concurrencytarget:(null==i?void 0:i[f.e])||"",concurrencylimit:(null==a?void 0:a.containerConcurrency)||"",autoscale:{autoscalewindow:o,autoscalewindowUnit:s,defaultAutoscalewindowUnit:l},concurrencyutilization:(null==i?void 0:i[f.f])||""},domainMapping:[]}}return t},V=e=>{var t,n,a,i,r,o,s,l,c,u,d,p,m,v;const b={env:[],replicas:1,triggers:{image:!0,config:!0}},f=null===(i=null===(a=null===(n=null===(t=e.spec)||void 0===t?void 0:t.template)||void 0===n?void 0:n.spec)||void 0===a?void 0:a.containers)||void 0===i?void 0:i.find(t=>{var n;return[e.metadata.name,null===(n=e.metadata.labels)||void 0===n?void 0:n["app.kubernetes.io/name"]].includes(t.name)}),h=null!==(r=null==f?void 0:f.env)&&void 0!==r?r:[];switch(A(e)){case C.k.KnativeService:return Object.assign(Object.assign({},b),{env:h,triggers:{image:(null==f?void 0:f.imagePullPolicy)===g.c.Always}});case C.k.OpenShift:{const t=null===(o=e.spec)||void 0===o?void 0:o.triggers;return{env:h,triggers:{image:q(t,"ImageChange",e.kind),config:q(t,"ConfigChange")},replicas:null!==(l=null===(s=e.spec)||void 0===s?void 0:s.replicas)&&void 0!==l?l:1}}case C.k.Kubernetes:{const t=null===(p=JSON.parse(null!==(d=null===(u=null===(c=e.metadata)||void 0===c?void 0:c.annotations)||void 0===u?void 0:u["image.openshift.io/triggers"])&&void 0!==d?d:"[]"))||void 0===p?void 0:p[0];return{env:h,triggers:{image:"false"===(null==t?void 0:t.paused)},replicas:null!==(v=null===(m=e.spec)||void 0===m?void 0:m.replicas)&&void 0!==v?v:1}}default:return b}},K=e=>{const t=r.a(e,"metadata.labels",{});return s.a(t,["app","app.kubernetes.io/instance","app.openshift.io/runtime","app.kubernetes.io/part-of","app.openshift.io/runtime-version","app.openshift.io/runtime-namespace","networking.knative.dev/visibility"])},H=e=>{var t,n;const a=null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n["app.openshift.io/runtime"];return{runtimeIcon:a&&Object(v.g)(a)?a:null}},z=(e,t,n)=>{var a,i,o,s,c,d,p,m,v,b,g,f,h,k,E;if(l.a(e)&&l.a(t)&&l.a(n))return{};const P=u.a(null!==(c=null===(s=null===(o=null===(i=null===(a=null==e?void 0:e.spec)||void 0===a?void 0:a.strategy)||void 0===i?void 0:i.sourceStrategy)||void 0===o?void 0:o.from)||void 0===s?void 0:s.name)&&void 0!==c?c:"",":"),y=l.a(e)?l.a(t)?(e=>{var t,n,a,i,r,o,s;const l=null===(t=null==e?void 0:e.spec)||void 0===t?void 0:t.params,c=null!==(a=null===(n=null==l?void 0:l.find(e=>"GIT_REPO"===(null==e?void 0:e.name)))||void 0===n?void 0:n.default)&&void 0!==a?a:"";return{url:c,ref:null!==(r=null===(i=null==l?void 0:l.find(e=>"GIT_REVISION"===(null==e?void 0:e.name)))||void 0===i?void 0:i.default)&&void 0!==r?r:"",dir:null!==(s=null===(o=null==l?void 0:l.find(e=>"PATH_CONTEXT"===(null==e?void 0:e.name)))||void 0===o?void 0:o.default)&&void 0!==s?s:"/",type:Object(I.c)(c),showGitType:!1,secret:"",isUrlValidating:!1}})(n):(e=>{var t,n,a,i;const o=null!==(i=null===(a=null===(n=null===(t=null==e?void 0:e.spec)||void 0===t?void 0:t.source)||void 0===n?void 0:n.git)||void 0===a?void 0:a.url)&&void 0!==i?i:"";return{url:o,type:Object(I.c)(o),ref:r.a(e,"spec.source.git.revision",""),dir:r.a(e,"spec.source.contextDir",""),showGitType:!1,secret:r.a(e,"spec.source.git.cloneSecret",""),isUrlValidating:!1}})(t):(e=>{var t,n,a,i;const o=null!==(i=null===(a=null===(n=null===(t=null==e?void 0:e.spec)||void 0===t?void 0:t.source)||void 0===n?void 0:n.git)||void 0===a?void 0:a.uri)&&void 0!==i?i:"";return{url:o,type:Object(I.c)(o),ref:r.a(e,"spec.source.git.ref",""),dir:r.a(e,"spec.source.contextDir",""),showGitType:!1,secret:r.a(e,"spec.source.sourceSecret.name",""),isUrlValidating:!1}})(e);return{git:y,docker:{dockerfilePath:(null===(m=null===(p=null===(d=null==e?void 0:e.spec)||void 0===d?void 0:d.strategy)||void 0===p?void 0:p.dockerStrategy)||void 0===m?void 0:m.dockerfilePath)||(null===(g=null===(b=null===(v=null==n?void 0:n.spec)||void 0===v?void 0:v.params)||void 0===b?void 0:b.find(e=>"DOCKERFILE"===(null==e?void 0:e.name)))||void 0===g?void 0:g.default)||"Dockerfile"},image:{selected:(null===(h=null===(f=null==n?void 0:n.metadata)||void 0===f?void 0:f.labels)||void 0===h?void 0:h[T.h])||P[0]||"",recommended:"",tag:(null===(E=null===(k=null==n?void 0:n.metadata)||void 0===k?void 0:k.labels)||void 0===E?void 0:E[T.i])||P[1]||"",tagObj:{},ports:[],isRecommending:!1,couldNotRecommend:!1},build:$(e,t,n,y.type)}},W={searchTerm:"",registry:"external",allowInsecureRegistry:!1,imageStream:{image:"",tag:"",namespace:""},isi:{name:"",image:{},tag:"",status:{metadata:{},status:""},ports:[]},image:{name:"",image:{},tag:"",status:{metadata:{},status:""},ports:[]},build:{env:[],triggers:{},strategy:""},isSearchingForImage:!1},Y=e=>{const t=r.a(e,"spec.template.spec.containers[0].image",null);return l.a(e)||!t?W:Object.assign(Object.assign({},W),{searchTerm:t,registry:R.b.External,imageStream:Object.assign({},W.imageStream)})},X=(e,t,n)=>{var a,i,o,s,c;const u=null===(a=e.editAppResource)||void 0===a?void 0:a.data,m=null===(i=e.route)||void 0===i?void 0:i.data,v=null===(o=e.buildConfig)||void 0===o?void 0:o.data,b=null===(s=e.shipwrightBuild)||void 0===s?void 0:s.data,g=null===(c=e.pipeline)||void 0===c?void 0:c.data,k=((e,t,n,a,i)=>{const o=r.a(e,'metadata.labels["app.kubernetes.io/part-of"]');return{formType:"edit",name:a,application:{name:o||"",selectedKey:o||O.z},project:{name:i},route:G(t,e),resources:A(e),serverless:F(e),pipeline:{enabled:!l.a(n),type:h.a.PIPELINE},pac:{pacHasError:!1,repository:Object.assign({},E.i)},deployment:V(e),labels:K(e),limits:Object(P.Rc)(e),healthChecks:Object(S.a)(e),import:{showEditImportStrategy:!0,selectedStrategy:{name:"",type:p.c.S2I,priority:0,detectedFiles:[]}}}})(u,m,g,t,n),T=z(v,b,g);let y={},j={},C={},I={};return l.a(T)?(j=H(u),C=(e=>{var t,n,a,i,r,o;const s=null===(t=null==e?void 0:e.imageStream)||void 0===t?void 0:t.data;if(l.a(s))return{};const c=d.a(s,["metadata.resourceVersion"],["desc"]),u=null===(i=null===(a=null===(n=null==c?void 0:c[0])||void 0===n?void 0:n.spec)||void 0===a?void 0:a.tags)||void 0===i?void 0:i[0],p=null===(r=null==u?void 0:u.from)||void 0===r?void 0:r.name,m=(null===(o=null==u?void 0:u.importPolicy)||void 0===o?void 0:o.insecure)||!1;return Object.assign(Object.assign({},W),{searchTerm:p,registry:"external",allowInsecureRegistry:m,imageStream:Object.assign({},W.imageStream)})})(e),I=l.a(C)?(e=>{const t=r.a(e,'metadata.labels["app.openshift.io/runtime-namespace"]',""),n=r.a(e,'metadata.labels["app.openshift.io/runtime"]',""),a=r.a(e,'metadata.labels["app.openshift.io/runtime-version"]',"");return Object.assign(Object.assign({},W),{registry:R.b.Internal,imageStream:{image:n,tag:a,namespace:t}})})(u):{},!l.a(C)||r.a(I,"imageStream.tag")||r.a(I,"imageStream.image")||(null==u?void 0:u.kind)===f.l.kind&&(I={},C=Y(u))):x(v)===U.Binary&&(y=((e,t)=>{var n,a,i,r,o,s,l,c,u,d,p;const m=e.metadata.name,v=null!==(i=null===(a=null===(n=t.metadata)||void 0===n?void 0:n.annotations)||void 0===a?void 0:a.jarFileName)&&void 0!==i?i:"",b=null!==(p=null===(d=null===(u=null===(c=null===(l=null===(s=null===(o=null===(r=e.spec)||void 0===r?void 0:r.template)||void 0===o?void 0:o.spec)||void 0===s?void 0:s.containers)||void 0===l?void 0:l.find(e=>e.name===m))||void 0===c?void 0:c.env)||void 0===u?void 0:u.find(e=>"JAVA_ARGS"===e.name))||void 0===d?void 0:d.value)&&void 0!==p?p:"";return Object.assign({fileUpload:{name:v,value:"",javaArgs:b}},H(e))})(u,v)),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},k),j),y),T),C),I)}},6010:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d}));var a=n(2338),i=n(689),r=n(15),o=n(5655),s=n(5621);const l=/\.(jar)$/i,c=e=>i.object().shape({name:i.string().matches(l,{message:e("devconsole~Must be a JAR file.")}).max(253,e("devconsole~Cannot be longer than 253 characters.")).required(e("devconsole~Required")),javaArgs:i.string()}),u=e=>i.object().shape({name:Object(r.Zd)(e),fileUpload:c(e),project:s.l,application:s.a,image:Object(s.h)(e),deployment:Object(s.c)(e),serverless:Object(s.o)(e),route:Object(s.n)(e),limits:Object(s.k)(e),build:s.b,resources:s.m,healthChecks:Object(o.a)(e)}),d=e=>{if(l.test(e))return a.a(e.split(".").shift())}},6032:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(689),i=n(15),r=n(5655),o=n(5621);const s=e=>a.object().shape({project:o.l,application:o.a,name:Object(i.Zd)(e),isi:Object(o.j)(e),serverless:Object(o.o)(e),deployment:Object(o.c)(e),route:Object(o.n)(e),limits:Object(o.k)(e),resources:o.m,healthChecks:Object(r.a)(e)})},6140:function(e,t,n){"use strict";var a=n(0),i=n(5599),r=n(5618),o=n(5724),s=n(6141);t.a=({title:e,resourceType:t})=>a.createElement(r.a,{title:e},a.createElement(s.a,{probeType:o.a.ReadinessProbe}),a.createElement(s.a,{probeType:o.a.LivenessProbe}),t!==i.k.KnativeService&&a.createElement(s.a,{probeType:o.a.StartupProbe}))},6141:function(e,t,n){"use strict";var a=n(0),i=n(19),r=n(88),o=n(408),s=n(407),l=n(55),c=n(7),u=n(15),d=n(5790),p=n(5903),m=n(6142);n(6145);t.a=({probeType:e})=>{var t;const{t:n}=Object(c.useTranslation)(),{values:{healthChecks:v},setFieldValue:b}=Object(l.f)(),{viewOnly:g}=a.useContext(p.a),[f,h]=a.useState(),k=()=>{b(`healthChecks.${e}.showForm`,!0),h(null==v?void 0:v[e].data)},E=()=>{var t;b("healthChecks."+e,d.b),(null===(t=null==v?void 0:v[e])||void 0===t?void 0:t.modified)?b(`healthChecks.${e}.modified`,!1):b(`healthChecks.${e}.modified`,!0)},T=()=>{var t;(null===(t=null==v?void 0:v[e])||void 0===t?void 0:t.enabled)?(b(`healthChecks.${e}.showForm`,!1),b(`healthChecks.${e}.data`,f)):b("healthChecks."+e,d.b),b(`healthChecks.${e}.modified`,!1)},P=()=>{b(`healthChecks.${e}.showForm`,!1),b(`healthChecks.${e}.enabled`,!0),b(`healthChecks.${e}.modified`,!0)},y=()=>{b(`healthChecks.${e}.showForm`,!0)};return a.createElement(a.Fragment,null,a.createElement("div",{className:"co-section-heading-tertiary odc-heath-check-probe__formTitle"},Object(d.a)(e,n).formTitle,(null===(t=null==v?void 0:v[e])||void 0===t?void 0:t.enabled)&&a.createElement(i.a,{className:"pf-m-link--align-left",variant:i.d.link,onClick:k},"  ",`${n(g?"devconsole~View":"devconsole~Edit")} ${n("devconsole~Probe")}`)),a.createElement("div",{className:"pf-v5-c-form__helper-text"},Object(d.a)(e,n).formSubtitle),a.createElement("div",{className:"co-toolbar__group co-toolbar__group--left"},(()=>{var t,l;return(null===(t=null==v?void 0:v[e])||void 0===t?void 0:t.showForm)?a.createElement(m.a,{onSubmit:P,onClose:T,probeType:e}):(null===(l=null==v?void 0:v[e])||void 0===l?void 0:l.enabled)?a.createElement(a.Fragment,null,a.createElement(i.a,{className:"odc-heath-check-probe__successButton",variant:i.d.plain,isInline:!0,onClick:k},a.createElement("span",{className:"odc-heath-check-probe__successText"},a.createElement(u.X,null)," ",n("devconsole~{{healthCheckProbeAdded}} added",{healthCheckProbeAdded:Object(d.a)(e,n).formTitle}))),!g&&a.createElement(r.a,{content:n("devconsole~Remove"),position:"right"},a.createElement(i.a,{className:"pf-m-plain--align-left",variant:i.d.plain,onClick:E},a.createElement(o.a,null)))):g?n("devconsole~No {{noHealthCheckProbe}}",{noHealthCheckProbe:Object(d.a)(e,n).formTitle}):a.createElement(i.a,{className:"pf-m-link--align-left",variant:i.d.link,onClick:y,icon:a.createElement(s.a,null)},n("devconsole~Add {{addHealthCheckProbe}}",{addHealthCheckProbe:Object(d.a)(e,n).formTitle}))})()))}},6142:function(e,t,n){"use strict";var a=n(0),i=n(281),r=n(2220),o=n(55),s=n(22),l=n(7),c=n(15),u=n(5618),d=n(5724),p=n(5903),m=n(6143);n(6144);t.a=({onSubmit:e,onClose:t,probeType:n})=>{var v,b,g;const{t:f}=Object(l.useTranslation)(),{values:{healthChecks:h},errors:k}=Object(o.f)(),{viewOnly:E}=a.useContext(p.a),T={httpGet:f("devconsole~HTTP GET"),command:f("devconsole~Container command"),tcpSocket:f("devconsole~TCP socket")};return a.createElement("div",{className:"odc-heath-check-probe-form"},a.createElement(u.a,null,a.createElement(c.I,{name:`healthChecks.${n}.data.requestType`,label:f("devconsole~Type"),items:T,title:d.b.HTTPGET,disabled:E,fullWidth:!0}),((e,t)=>{switch(e){case d.b.HTTPGET:return a.createElement(m.b,{probeType:t});case d.b.ContainerCommand:return a.createElement(m.a,{probeType:t});case d.b.TCPSocket:return a.createElement(m.c,{probeType:t});default:return null}})(null===(b=null===(v=null==h?void 0:h[n])||void 0===v?void 0:v.data)||void 0===b?void 0:b.requestType,n),a.createElement(c.ab,{type:i.b.text,name:`healthChecks.${n}.data.failureThreshold`,label:f("devconsole~Failure threshold"),style:{maxWidth:"100%"},helpText:f("devconsole~How many times the probe will try starting or restarting before giving up."),isDisabled:E}),a.createElement(c.ab,{type:i.b.text,name:`healthChecks.${n}.data.successThreshold`,label:f("devconsole~Success threshold"),style:{maxWidth:"100%"},helpText:f("devconsole~How many consecutive successes for the probe to be considered successful after having failed."),isDisabled:E}),a.createElement(c.bb,{type:i.b.text,name:`healthChecks.${n}.data.initialDelaySeconds`,label:f("devconsole~Initial delay"),helpText:f("devconsole~How long to wait after the Container starts before checking its health."),afterInput:a.createElement(r.a,null,f("devconsole~seconds")),style:{maxWidth:"100%"},isDisabled:E}),a.createElement(c.bb,{type:i.b.text,name:`healthChecks.${n}.data.periodSeconds`,label:f("devconsole~Period"),helpText:f("devconsole~How often to perform the probe."),afterInput:a.createElement(r.a,null,f("devconsole~seconds")),style:{maxWidth:"100%"},isDisabled:E}),a.createElement(c.bb,{type:i.b.text,name:`healthChecks.${n}.data.timeoutSeconds`,label:f("devconsole~Timeout"),helpText:f("devconsole~How long to wait for the probe to finish, if the time is exceeded, the probe is considered failed."),afterInput:a.createElement(r.a,null,f("devconsole~seconds")),style:{maxWidth:"100%"},isDisabled:E})),a.createElement(c.g,{onSubmit:E?void 0:e,onClose:t,isDisabled:!s.a(null===(g=null==k?void 0:k.healthChecks)||void 0===g?void 0:g[n])}))}},6143:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return k}));var a=n(0),i=n(281),r=n(219),o=n(55),s=n(22),l=n(363),c=n(839),u=n(113),d=n(7),p=n(1949),m=n(15),v=n(5599),b=n(5903);const g=(e,t,n,r)=>t===v.k.KnativeService?a.createElement(m.ab,{type:i.b.text,name:"knative-port",label:r("devconsole~Port"),placeholder:"0",isDisabled:!0}):a.createElement(m.ab,{type:i.b.text,name:e,label:r("devconsole~Port"),isDisabled:n,required:!0}),f=({probeType:e})=>{var t,n,v;const{t:f}=Object(d.useTranslation)(),{values:{healthChecks:h,resources:k},setFieldValue:E}=Object(o.f)(),{viewOnly:T}=a.useContext(b.a),P=null===(v=null===(n=null===(t=null==h?void 0:h[e])||void 0===t?void 0:t.data)||void 0===n?void 0:n.httpGet)||void 0===v?void 0:v.httpHeaders,y=s.a(P)?[["",""]]:P.map(e=>l.a(e)),[O,R]=a.useState(y),S=`healthChecks.${e}.data.httpGet.port`,j=a.useCallback(({nameValuePairs:t})=>{const n=c.a(t.map(([e,t])=>u.a(t)?{name:e,valueFrom:t}:t.length?{name:e,value:t}:null));R(t),E(`healthChecks.${e}.data.httpGet.httpHeaders`,n)},[E,e]);return a.createElement(a.Fragment,null,a.createElement(m.A,{name:`healthChecks.${e}.data.httpGet.scheme`,label:f("devconsole~Use HTTPS"),value:"HTTPS",isDisabled:T}),a.createElement(r.a,{fieldId:Object(m.Kc)(`healthChecks.${e}.data.httpGet.httpHeaders`,"name-value"),name:`healthChecks.${e}.data.httpGet.httpHeaders`,label:f("devconsole~HTTP Headers")},a.createElement(p.NameValueEditor,{nameValuePairs:O,valueString:f("devconsole~Value"),nameString:f("devconsole~Header name"),addString:f("devconsole~Add header"),readOnly:T,allowSorting:!1,updateParentData:j})),a.createElement(m.ab,{type:i.b.text,name:`healthChecks.${e}.data.httpGet.path`,label:f("devconsole~Path"),placeholder:"/",isDisabled:T}),g(S,k,T,f))},h=({probeType:e})=>{const{t:t}=Object(d.useTranslation)(),{values:{resources:n}}=Object(o.f)(),{viewOnly:i}=a.useContext(b.a);return g(`healthChecks.${e}.data.tcpSocket.port`,n,i,t)},k=({probeType:e})=>{var t,n,i;const{t:r}=Object(d.useTranslation)(),{values:{healthChecks:s}}=Object(o.f)(),{viewOnly:l}=a.useContext(b.a),c=(null===(i=null===(n=null===(t=null==s?void 0:s[e])||void 0===t?void 0:t.data)||void 0===n?void 0:n.exec)||void 0===i?void 0:i.command)||[""];return a.createElement(m.lc,{name:`healthChecks.${e}.data.exec.command`,label:r("devconsole~Command"),addLabel:r("devconsole~Add command"),placeholder:r("devconsole~argument"),helpText:r("devconsole~The command to run inside the Container."),required:!0,disableDeleteRow:1===c.length,isReadOnly:l})}},6144:function(e,t,n){},6145:function(e,t,n){},8121:function(e,t,n){"use strict";var a=n(0),i=n(14),r=n(5),o=n(9238);t.a=()=>{const{ns:e,kind:t,name:n,containerName:s}=Object(i.useParams)(),l=[{kind:t,namespace:e,isList:!1,name:n,prop:"resource"}];return a.createElement(r.C,{resources:l},a.createElement(o.a,{currentContainer:s}))}},9238:function(e,t,n){"use strict";var a=n(0),i=n(55),r=n(22),o=n(117),s=n(655),l=n(7),c=n(689),u=n(5),d=n(8),p=n(5929),m=n(9239),v=n(5723),b=n(5655),g=n(5903);t.a=({resource:e,currentContainer:t})=>{const{t:n}=Object(l.useTranslation)();if(!e.loaded&&r.a(e.loadError))return a.createElement(u.S,null);if(e.loadError)return a.createElement(u.wb,{loaded:e.loaded,loadError:e.loadError});const f=o.a(e.data.spec.template.spec.containers,e=>e.name===t);if(r.a(f))return a.createElement("div",{className:"pf-v5-u-text-align-center"},n("devconsole~Container not found"));const h=s.a(e.data.spec.template.spec.containers,["name",t]),k={healthChecks:Object(v.a)(e.data,h),containerName:f.name,resources:Object(p.k)(e.data)};return a.createElement(i.b,{initialValues:k,validationSchema:c.object().shape({healthChecks:Object(b.a)(n)}),onSubmit:(t,n)=>{const a=Object(g.b)(t,e.data,f);return Object(d.rb)(Object(d.vb)(Object(d.Db)(e.data)),a).then(()=>{n.setStatus({error:""}),u.Vb.goBack()}).catch(e=>{n.setStatus({errors:e})})},onReset:u.Vb.goBack},n=>a.createElement(m.a,Object.assign({resource:e.data,currentContainer:t},n)))}},9239:function(e,t,n){"use strict";var a=n(0),i=n(19),r=n(1922),o=n(566),s=n(400),l=n(2050),c=n(655),u=n(279),d=n(22),p=n(137),m=n(7),v=n(5),b=n(10),g=n(8),f=n(15),h=n(5929),k=n(5723),E=n(5903),T=n(6140);n(9240);t.a=({resource:e,currentContainer:t,handleSubmit:n,handleReset:P,errors:y,status:O,isSubmitting:R,setFieldValue:S,values:j,dirty:C})=>{var I,_,N,w,U;const x=Object(E.c)(e),{t:A}=Object(m.useTranslation)(),[M,L]=a.useState(t),q=null===(N=null===(_=null===(I=null==e?void 0:e.spec)||void 0===I?void 0:I.template)||void 0===_?void 0:_.spec)||void 0===N?void 0:N.containers,B=s.a(q,e=>e.readinessProbe||e.livenessProbe||e.startupProbe),D=l.a(q,"name"),G=A(B?"devconsole~Edit health checks":"devconsole~Add health checks"),{kind:$,metadata:{name:F,namespace:V}}=e,K=Object(g.Db)(e),H=Object(g.vb)(K).crd?K:$,z=s.a(j.healthChecks,{modified:!1}),W=Object(v.Qb)(v.Lb.applicationHealth);return a.createElement(E.a.Provider,{value:{viewOnly:x}},a.createElement(p.b,null,a.createElement("title",null,G)),a.createElement(v.Z,{title:a.createElement(a.Fragment,null,G,!Object(v.hc)()&&a.createElement(i.a,{variant:"link",component:"a",href:W,target:"_blank"},A("devconsole~Learn more")," ",a.createElement(o.a,null)))}),a.createElement(r.a,{onSubmit:x?void 0:n},a.createElement("div",{className:"odc-add-health-checks__body"},a.createElement("p",{className:"odc-add-health-checks__paragraph"},a.createElement(m.Trans,{t:A,ns:"devconsole"},"Health checks for"," ",a.createElement(v.hb,{kind:Object(g.Db)(e),name:F,namespace:V,title:F,inline:!0}))),a.createElement("p",{className:"odc-add-health-checks__paragraph"},A("devconsole~Container"),"  ",u.a(q)>1?a.createElement(v.j,{currentKey:M,containers:D,onChange:t=>{const n=c.a(e.spec.template.spec.containers,["name",t]);L(t),S("containerName",t),S("healthChecks",Object(k.a)(e,n)),v.Vb.replace(`/k8s/ns/${V}/${H}/${F}/containers/${t}/health-checks`)}}):a.createElement(v.hb,{kind:b.ContainerModel.kind,name:q[0].name,linkTo:!1,inline:!0})),a.createElement("br",null),a.createElement(T.a,{resourceType:Object(h.k)(e)})),a.createElement(f.R,{handleReset:P,errorMessage:O&&(null===(U=null===(w=null==O?void 0:O.errors)||void 0===w?void 0:w.json)||void 0===U?void 0:U.message),isSubmitting:R,submitLabel:A(B?"devconsole~Save":"devconsole~Add"),disableSubmit:z||!C||!d.a(y)||R,resetLabel:A("devconsole~Cancel"),hideSubmit:x})))}},9240:function(e,t,n){}}]);
//# sourceMappingURL=healthChecks-chunk-2e1663cb705614c24167.min.js.map
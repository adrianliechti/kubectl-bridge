(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{1985:function(e,t,a){"use strict";a.r(t),a.d(t,"APIExplorerPage",(function(){return $})),a.d(t,"APIResourcePage",(function(){return ae}));var l=a(0),n=a(764),c=a(14),r=a(31),s=a(420),o=a(22),i=a(50),u=a(461),m=a(1533),p=a(57),d=a(7204),b=a(599),E=a(137),v=a(230),g=a(969),f=a(1193),h=a(5377),j=a(204),w=a(88),N=a(1236),O=a(54),y=a(7),k=a(29),S=a(15),A=a(627),_=a(784),P=a(5),I=a(10),F=a(8),R=a(243),T=a(1436),x=a(872),D=a(40),C=a(336),G=a(986),K=a(6691),V=a(69),U=a(13),H=a(289);const L=Object(r.connect)(e=>({activeNamespace:e.UI.get("activeNamespace")}))(({activeNamespace:e,model:t})=>{const{t:a}=Object(y.useTranslation)(),n=((e,t)=>{const a=Object(F.Hb)(t);return t.namespaced?e===S.c?"/api-resource/all-namespaces/"+a:`/api-resource/ns/${e}/${a}`:"/api-resource/cluster/"+a})(e,t);return l.createElement("span",{className:"co-resource-item"},l.createElement("span",{className:"co-resource-icon--fixed-width hidden-xs"},l.createElement(P.fb,{kind:Object(F.Hb)(t)})),l.createElement(c.Link,{to:n,className:"co-resource-item__resource-name"},t.labelKey?a(t.labelKey):t.kind))}),M=()=>{const{t:e}=Object(y.useTranslation)();return l.createElement(P.u,{label:e("public~API resources")})},q=({value:e})=>{if(!e)return l.createElement(l.Fragment,null,"-");const[t,...a]=e.split(".");return o.a(a)?l.createElement(l.Fragment,null,e):l.createElement("span",{className:"co-break-word"},t,l.createElement("span",{className:"text-muted"},".",a.join(".")))},z=["pf-v5-u-w-25-on-2xl","pf-v5-u-w-16-on-2xl","pf-v5-u-w-16-on-lg pf-v5-u-w-10-on-2xl","pf-m-hidden pf-m-visible-on-xl pf-v5-u-w-16-on-lg","pf-m-hidden pf-m-visible-on-lg"],B=({componentProps:{data:e}})=>i.a(e,e=>[{title:l.createElement(L,{model:e}),props:{className:z[0]}},{title:l.createElement("span",{className:"co-select-to-copy"},l.createElement(q,{value:e.apiGroup})),props:{className:z[1]}},{title:e.apiVersion,props:{className:z[2]}},{title:e.namespaced?k.a.t("public~true"):k.a.t("public~false"),props:{className:z[3]}},{title:l.createElement("div",{className:"co-line-clamp"},Object(F.U)(e)),props:{className:z[4]}}]),Z=Object(s.compose)(n.withRouter,Object(r.connect)(({k8s:e})=>({models:e.getIn(["RESOURCES","models"])})))(({models:e,location:t})=>{const a="#all#",n=new URLSearchParams(t.search),c=n.has("g")?n.get("g"):a,r=n.get("v")||a,s=n.get("q")||"",o=n.get("s")||a,{t:i}=Object(y.useTranslation)(),m=[...e.reduce((e,{apiGroup:t})=>t?e.add(t):e,new Set)].sort(),p=m.reduce((e,t)=>(e[t]=l.createElement(q,{value:t}),e),{[a]:i("public~All groups"),"":i("public~No group")}),[d]=Object(A.a)(),b=d?C.a:C.b,E=new Set;m.length&&E.add(m[0]);const w=[...e.reduce((e,{apiVersion:t})=>e.add(t),new Set)].sort(),k=w.reduce((e,t)=>(e[t]=t,e),{[a]:i("public~All versions")}),S=new Set;w.length&&S.add(w[0]);const _={[a]:i("public~All scopes"),cluster:i("public~Cluster"),namespace:i("public~Namespace")},I=new Set(["cluster"]),F=e.filter(({kind:e,apiGroup:t,apiVersion:l,namespaced:n})=>(c===a||(t||"")===c)&&((r===a||l===r)&&(("cluster"!==o||!n)&&(!("namespace"===o&&!n)&&(!s||b(s,e)))))),R=u.a(F.toArray(),[({apiGroup:e})=>e||"1","apiVersion","kind"]),T=(e,t)=>{t===a?Object(P.qc)(e):Object(P.wc)(e,t)};return l.createElement(l.Fragment,null,l.createElement("div",{className:"co-m-pane__body co-m-pane__body--no-top-margin"},l.createElement(g.a,{className:"co-toolbar-no-padding pf-m-toggle-group-container"},l.createElement(f.a,null,l.createElement(h.a,{toggleIcon:l.createElement(N.a,null),breakpoint:"md"},l.createElement(j.a,null,l.createElement(P.t,{autocompleteFilter:(e,t,l)=>l!==a&&v(e,l),items:p,onChange:e=>T("g",e),selectedKey:c,spacerBefore:E,title:p[c],dropDownClassName:"dropdown--full-width"})),l.createElement(j.a,null,l.createElement(P.t,{items:k,onChange:e=>T("v",e),selectedKey:r,spacerBefore:S,title:k[r],dropDownClassName:"dropdown--full-width"})),l.createElement(j.a,null,l.createElement(P.t,{items:_,onChange:e=>T("s",e),selectedKey:o,spacerBefore:I,title:_[o],dropDownClassName:"dropdown--full-width"}))),l.createElement(j.a,null,l.createElement(D.l,{value:s,label:i("public~by kind"),onChange:(e,t)=>{var a;(a=t)?Object(P.wc)("q",a):Object(P.qc)("q")}})))),l.createElement(D.j,{EmptyMsg:M,Header:()=>[{title:i("public~Kind"),sortField:"kind",transforms:[O.a],props:{className:z[0]}},{title:i("public~Group"),sortField:"apiGroup",transforms:[O.a],props:{className:z[1]}},{title:i("public~Version"),sortField:"apiVersion",transforms:[O.a],props:{className:z[2]}},{title:i("public~Namespaced"),sortField:"namespaced",transforms:[O.a],props:{className:z[3]}},{title:i("public~Description"),props:{className:z[4]}}],Rows:B,"aria-label":i("public~API resources"),data:R,loaded:!!e.size,virtualize:!1})))});Z.displayName="APIResourcesList";const $=()=>{const{t:e}=Object(y.useTranslation)(),t=e("public~API Explorer");return l.createElement(l.Fragment,null,l.createElement(E.a,null,l.createElement("title",null,t)),l.createElement(P.Z,{title:t}),l.createElement(Z,null))};$.displayName="APIExplorerPage";const J=({customData:{kindObj:e}})=>{const{kind:t,apiGroup:a,apiVersion:n,namespaced:c,verbs:r,shortNames:s}=e,o=Object(F.U)(e),{t:i}=Object(y.useTranslation)();return l.createElement("div",{className:"co-m-pane__body"},l.createElement("dl",{className:"co-m-pane__details"},l.createElement("dt",null,i("public~Kind")),l.createElement("dd",null,t),l.createElement("dt",null,i("public~API group")),l.createElement("dd",{className:"co-select-to-copy"},a||"-"),l.createElement("dt",null,i("public~API version")),l.createElement("dd",null,n),l.createElement("dt",null,i("public~Namespaced")),l.createElement("dd",null,i(c?"public~true":"public~false")),l.createElement("dt",null,i("public~Verbs")),l.createElement("dd",null,r.join(", ")),s&&l.createElement(l.Fragment,null,l.createElement("dt",null,l.createElement(w.a,{content:i("public~Short names can be used to match this resource on the CLI.")},l.createElement("span",null,i("public~Short names")))),l.createElement("dd",null,s.join(", "))),o&&l.createElement(l.Fragment,null,l.createElement("dt",null,i("public~Description")),l.createElement("dd",{className:"co-break-word co-pre-wrap"},l.createElement(P.N,null,o)))))},Q=()=>document.getElementById("content-scrollable").scrollTop=0,W=({customData:{kindObj:e}})=>l.createElement("div",{className:"co-m-pane__body"},l.createElement(K.a,{kindObj:e,scrollTop:Q})),X=({customData:{kindObj:e,namespace:t}})=>{const a=Object(V.z)(V.v),n=Object(V.z)(U.Nb),c=Object(G.b)(a,n).get(Object(F.Hb)(e),()=>Promise.resolve(x.c)),r=e.namespaced?t:void 0;return l.createElement(P.c,{loader:c,namespace:r,kind:e.crd?Object(F.Hb)(e):e.kind,showTitle:!1,autoFocus:!1})},Y=({value:e})=>{const[t,...a]=e.split(":");return"system"!==t||o.a(a)?l.createElement(l.Fragment,null,e):l.createElement(l.Fragment,null,l.createElement("span",{className:"text-muted"},t,":"),a.join(":"))},ee=()=>{const{t:e}=Object(y.useTranslation)();return l.createElement(P.u,{label:e("public~Subjects")})},te=({customData:{kindObj:e,namespace:t}})=>{const{apiGroup:a,apiVersion:n,namespaced:c,plural:r,verbs:s}=e,[o,u]=l.useState(m.a(s)),[E,g]=l.useState(""),[f,h]=l.useState(!0),[j,w]=l.useState(!0),[N,k]=l.useState(!1),[S,A]=l.useState(),[_,R]=l.useState(),{t:x}=Object(y.useTranslation)();if(l.useEffect(()=>{R(null);const e=t?I.LocalResourceAccessReviewsModel:I.ResourceAccessReviewsModel,l={apiVersion:Object(F.n)(e),kind:e.kind,namespace:t,resourceAPIVersion:n,resourceAPIGroup:a,resource:r,verb:o};Object(F.jb)(e,l,{ns:t}).then(A).catch(R)},[a,n,r,t,o]),_)return l.createElement(P.Q,{label:x("public~Access review")},_.message);if(!S)return l.createElement(P.S,null);const C=[],G=[];p.a(S.users,e=>{e.startsWith("system:serviceaccount:")?G.push({name:e,type:"ServiceAccount"}):C.push({name:e,type:"User"})});const K=i.a(S.groups,e=>({name:e,type:"Group"})),V=d.a(s,s),U=[...f?C:[],...j?K:[],...N?G:[]],H=f&&j&&N,L=S.users.length+S.groups.length,M=U.length,q=U.filter(({name:e})=>v(E,e)),z=b.a(q,["type","name"],["asc","asc"]),B=e=>{switch(e){case"User":return x("public~User");case"Group":return x("public~Group");case"ServiceAccount":return x("public~ServiceAccount");default:return e}};return l.createElement(l.Fragment,null,l.createElement("div",{className:"co-m-pane__filter-bar"},l.createElement("div",{className:"co-m-pane__filter-bar-group"},l.createElement(P.t,{items:V,onChange:e=>u(e),selectedKey:o,titlePrefix:x("public~Verb")})),l.createElement("div",{className:"co-m-pane__filter-bar-group co-m-pane__filter-bar-group--filter"},l.createElement(D.l,{defaultValue:E,label:x("public~by subject"),onChange:(e,t)=>g(t)}))),l.createElement("div",{className:"co-m-pane__body"},l.createElement(T.b,{allSelected:H,itemCount:L,selectedCount:M,onSelectAll:e=>{e.preventDefault(),h(!0),w(!0),k(!0)}},l.createElement(T.a,{title:x("public~User"),active:f,number:C.length,toggle:e=>{e.preventDefault(),h(!f)}}),l.createElement(T.a,{title:x("public~Group"),active:j,number:K.length,toggle:e=>{e.preventDefault(),w(!j)}}),l.createElement(T.a,{title:x("public~ServiceAccount"),active:N,number:G.length,toggle:e=>{e.preventDefault(),k(!N)}})),l.createElement("p",{className:"co-m-pane__explanation"},c&&t&&x("public~The following subjects can {{verb}} {{plural}} in namespace {{ namespace }}",{verb:o,plural:r,namespace:t}),c&&!t&&x("public~The following subjects can {{verb}} {{plural}} in all namespaces",{verb:o,plural:r}),!c&&x("public~The following subjects can {{verb}} {{plural}} at the cluster scope",{verb:o,plural:r})),l.createElement(D.j,{EmptyMsg:ee,Header:()=>[{title:x("public~Subject"),sortField:"name",transforms:[O.a]},{title:x("public~Type"),sortField:"type",transforms:[O.a]}],Rows:()=>i.a(U,e=>[{title:l.createElement("span",{className:"co-break-word co-select-to-copy"},l.createElement(Y,{value:e.name}))},{title:B(e.type)}]),"aria-label":x("public~API resources"),data:z,loaded:!0,virtualize:!1})))},ae=Object(r.connect)(({k8s:e})=>({k8s:e}))(Object(R.a)(S.O.OPENSHIFT)(e=>{const t=Object(c.useParams)(),a=Object(c.useLocation)(),n=e.kind||(null==t?void 0:t.plural),r=Object(H.a)(e.k8s,n),s=e.k8s.getIn(["RESOURCES","inFlight"]),i=(null==r?void 0:r.namespaced)?t.ns:void 0,{t:u}=Object(y.useTranslation)(),m=Object(P.Dc)({group:i?I.LocalResourceAccessReviewsModel.apiGroup:I.ResourceAccessReviewsModel.apiGroup,resource:i?I.LocalResourceAccessReviewsModel.plural:I.ResourceAccessReviewsModel.plural,namespace:i,verb:"create"});if(!r)return s?l.createElement(P.S,null):l.createElement("div",{className:"co-m-pane__body"},l.createElement(P.Z,{title:u("public~404: Not found"),centerText:!0}));const p=[{name:u("public~Explore"),path:"/api-explorer"},{name:u("public~Resource details"),path:a.pathname}],d=[{href:"",nameKey:"public~Details",component:J},{href:"schema",nameKey:"public~Schema",component:W}];(o.a(r.verbs)||r.verbs.includes("list"))&&d.push({href:"instances",nameKey:"public~Instances",component:X}),e.flags[S.O.OPENSHIFT]&&m&&d.push({href:"access",nameKey:"public~Access review",component:te});const b={telemetryPrefix:null==r?void 0:r.kind,titlePrefix:Object(S.Id)(null==r?void 0:r.kind)};return l.createElement(l.Fragment,null,l.createElement(_.a.Provider,{value:b},l.createElement(P.nb,null),l.createElement(P.Z,{title:l.createElement("div",{"data-test-id":"api-explorer-resource-title"},r.label),breadcrumbs:p,detail:!0}),l.createElement(P.E,{pages:d,customData:{kindObj:r,namespace:i},noStatusBox:!0})))}))},6691:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var l=a(0),n=a(16),c=a(384),r=a(50),s=a(4440),o=a(225),i=a(22),u=a(868),m=a(435),p=a(19),d=a(563),b=a(7),E=a(13),v=a(8),g=a(5);const f=e=>{var t;const[a,f]=l.useState([]),{kindObj:h,schema:j}=e,{t:w}=Object(b.useTranslation)(),[N,O]=l.useState(null);if(l.useEffect(()=>{h?Object(v.s)().then(e=>{O(e)}).catch(e=>{console.error("Could not fetch swagger definitions",e)}):j&&O({"custom-schema":j})},[h,j]),!h&&!j)return null;if(!N)return null;const y=c.a(a),k=y?y.path:[h?Object(v.D)(h,N):"custom-schema"],S=n.a(N,k),A=(null==S?void 0:S.properties)||(null===(t=null==S?void 0:S.items)||void 0===t?void 0:t.properties)||(null==S?void 0:S.definitions),_=y?null==y?void 0:y.description:null==S?void 0:S.description,P=new Set((null==S?void 0:S.required)||[]),I=(null==h?void 0:h.labelKey)?w(h.labelKey):null==h?void 0:h.kind,F=a.length?[h?I:w("public~Schema"),...r.a(a,"name")]:[];return l.createElement(l.Fragment,null,!i.a(F)&&l.createElement(u.a,{className:"co-breadcrumb co-break-word"},F.map((e,t)=>{const n=t===F.length-1;return l.createElement(m.a,{key:t,isActive:n},n?e:l.createElement(p.a,{type:"button",onClick:e=>((e,t)=>{e.preventDefault(),f(s.a(a,t))})(e,t),isInline:!0,variant:"link"},e))})),l.createElement(d.a,null,_&&l.createElement("p",{className:"co-break-word co-pre-wrap"},l.createElement(g.N,null,_)),i.a(A)?l.createElement(g.u,{label:w("public~Properties")}):l.createElement("ul",{className:"co-resource-sidebar-list pf-v5-c-list"},r.a(A,(t,c)=>{const r=(e=>{const t=h?S.items?Object(v.Z)(N,[...k,"items"],e,!0):Object(v.Z)(N,k,e,!0):[...k,"properties",e],a=n.a(N,t);return o.a(a,"properties")||o.a(a,"items.properties")?t:null})(c),s=t.type||(e=>n.a(N,[e,"format"])||n.a(N,[e,"type"]))((e=>{const t=e.$ref||n.a(e,"items.$ref"),a=/^#\/definitions\//;return t&&a.test(t)?t.replace(a,""):null})(t)),i=Array.isArray(s)?s.join(" "):s;return l.createElement("li",{key:c,className:"co-resource-sidebar-item"},l.createElement("h5",{className:"co-resource-sidebar-item__header co-break-word"},l.createElement(E.e,{value:c})," ",l.createElement("small",null,l.createElement("span",{className:"co-break-word"},i),P.has(c)&&l.createElement(l.Fragment,null," – required"))),t.description&&l.createElement("p",{className:"co-break-word co-pre-wrap"},l.createElement(g.N,null,t.description)),r&&l.createElement(p.a,{type:"button",onClick:l=>((t,l,n,c)=>{t.preventDefault(),f([...a,{name:l,description:n,path:c}]),e.scrollTop&&e.scrollTop()})(l,c,t.description,r),isInline:!0,variant:"link"},w("public~View details")))}))))}}}]);
//# sourceMappingURL=api-explorer-chunk-0b721cf44d9603080854.min.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[216,120],{5410:function(e,t,n){"use strict";n.r(t),n.d(t,"confirmModal",(function(){return c}));var a=n(0),s=n(7),i=n(21),r=n(118),l=n(5);class o extends l.bb{constructor(e){super(e),this._submit=this._submit.bind(this),this._cancel=this.props.cancel.bind(this)}_submit(e){e.preventDefault(),this.handlePromise(this.props.executeFn(null,{supressNotifications:!0})).then(this.props.close)}render(){const{title:e,titleKey:t,message:n,messageKey:i,btnText:l,btnTextKey:o,cancelText:c,cancelTextKey:u,submitDanger:m}=this.props;return a.createElement(s.Translation,null,s=>a.createElement("form",{onSubmit:this._submit,name:"form",className:"modal-content"},a.createElement(r.d,null,t?s(t):e),a.createElement(r.a,null,i?s(i):n),a.createElement(r.c,{errorMessage:this.state.errorMessage,inProgress:this.state.inProgress,submitText:o?s(o):l||s("Confirm"),cancel:this._cancel,cancelText:u?s(u):c||s("Cancel"),submitDanger:m})))}}o.propTypes={btnText:i.node,btnTextKey:i.string,cancel:i.func.isRequired,cancelText:i.node,cancelTextKey:i.string,close:i.func.isRequired,executeFn:i.func.isRequired,message:i.node,messageKey:i.string,title:i.node,titleKey:i.string,submitDanger:i.bool};const c=Object(r.f)(o)},5451:function(e,t,n){"use strict";n.r(t),n.d(t,"useNodeMaintenanceActions",(function(){return u}));var a=n(0),s=n(7),i=n(108),r=n(2260),l=n(1944),o=n(6847),c=n(6609);const u=e=>{const{t:t}=Object(s.useTranslation)(),[n]=Object(r.a)(),[u,m,d]=Object(i.a)({isList:!0,groupVersionKind:{kind:n.kind,version:n.apiVersion,group:n.apiGroup},namespaced:!1});return[a.useMemo(()=>{const n=Object(l.a)(u,e.metadata.name);let a={id:"start-node-maintenance",label:t("metal3-plugin~Start Maintenance"),cta:()=>Object(o.a)({nodeName:e.metadata.name}),insertBefore:"edit-labels"};return n&&(a={id:"stop-node-maintenance",label:t("metal3-plugin~Stop Maintenance"),cta:()=>Object(c.a)(n,t),insertBefore:"edit-labels"}),[a]},[u,e.metadata.name,t]),m,d]}},6609:function(e,t,n){"use strict";var a=n(0),s=n(7),i=n(5410),r=n(8),l=n(177),o=n(1944);t.a=(e,t)=>{const n=Object(o.z)(e),c=n?`(${n})`:"",u=Object(o.v)(e);return Object(i.confirmModal)({title:t("metal3-plugin~Stop maintenance"),message:a.createElement(s.Trans,{t:t,ns:"metal3-plugin"},"Are you sure you want to stop maintenance ",a.createElement("strong",null,c)," on node"," ",a.createElement("strong",null,u),"?"),btnText:t("metal3-plugin~Stop maintenance"),executeFn:()=>Object(r.lb)((e=>e.apiVersion===`${l.e.apiGroup}/${l.e.apiVersion}`?l.e:e.apiVersion===`${l.d.apiGroup}/${l.d.apiVersion}`?l.d:l.c)(e),e)})}},6847:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(0),s=n(967),i=n(406),r=n(219),l=n(281),o=n(80),c=n(7),u=n(40),m=n(5),d=n(108),b=n(8),p=n(2260),g=n(7469),h=n(177);const f={kind:Object(b.Hb)(h.b),namespaced:!1,isList:!0},E=Object(m.Oc)(e=>{var t,n;const{t:m}=Object(c.useTranslation)(),{nodeName:b,inProgress:h,errorMessage:E,handlePromise:O,close:j,cancel:v}=e,[T]=Object(p.a)(),[x,w]=a.useState(""),[y,M]=Object(d.a)(f),N=null==y?void 0:y[0],K="HEALTH_OK"===(null===(n=null===(t=null==N?void 0:N.status)||void 0===t?void 0:t.ceph)||void 0===n?void 0:n.health),k=m("metal3-plugin~Start Maintenance");return a.createElement("form",{onSubmit:e=>{e.preventDefault();const t=Object(g.a)(b,x,T);return O(t,j)},name:"form",className:"modal-content"},a.createElement(u.h,null,k),a.createElement(u.e,null,a.createElement(s.a,{hasGutter:!0},a.createElement(i.a,null,m("metal3-plugin~All managed workloads will be moved off of this node. New workloads and data will not be added to this node until maintenance is stopped.")),a.createElement(i.a,null,a.createElement(c.Trans,{ns:"metal3-plugin"},"If the node does not exit maintenance within ",a.createElement("strong",null,"30 minutes"),", the cluster will automatically rebuild the node","'","s data using replicated copies")),a.createElement(i.a,null,a.createElement(r.a,{label:"Reason",fieldId:"node-maintenance-reason"},a.createElement(l.a,{type:"text",id:"node-maintenance-reason",value:x,onChange:(e,t)=>w(t)}))),!!N&&!K&&a.createElement(i.a,null,a.createElement(o.a,{variant:"warning",title:m("metal3-plugin~The Ceph storage cluster is not in a healthy state."),isInline:!0},m("metal3-plugin~Maintenance should not be started until the health of the storage cluster is restored."))))),a.createElement(u.g,{submitDisabled:!M,errorMessage:E,inProgress:h,submitText:k,cancel:v}))}),O=Object(u.m)(E)},7469:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(8),s=n(7470);const i=(e,t,n)=>Object(a.jb)(n,Object(s.a)({nodeName:e,reason:t,model:n}))},7470:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(8);const s=({generateName:e,nodeName:t,reason:n,model:s})=>({apiVersion:Object(a.n)(s),kind:s.kind,metadata:{generateName:(e||t)+"-"},spec:{nodeName:t,reason:n}})}}]);
//# sourceMappingURL=nodeActions-chunk-ba362e935a86f68246cd.min.js.map
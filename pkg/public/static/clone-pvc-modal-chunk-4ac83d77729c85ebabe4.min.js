(window.webpackJsonp=window.webpackJsonp||[]).push([[104,283],{11536:function(e,t,a){},4381:function(e,t,a){"use strict";a.r(t),a.d(t,"StorageClassReference",(function(){return u})),a.d(t,"isDefaultClass",(function(){return v})),a.d(t,"StorageClassList",(function(){return f})),a.d(t,"StorageClassPage",(function(){return E})),a.d(t,"StorageClassDetailsPage",(function(){return g}));var l=a(0),n=a(16),s=a(499),c=a(54),o=a(7),r=a(18),i=a(40),d=a(5),m=a(10);const u="StorageClass",{common:p}=d.F.factory,b=[...d.F.getExtensionsActionsForKind(m.StorageClassModel),...p],v=e=>{const t=n.a(e,"metadata.annotations")||{};return"true"===t["storageclass.kubernetes.io/is-default-class"]||"true"===t["storageclass.beta.kubernetes.io/is-default-class"]},O=["pf-v5-u-w-42-on-md","pf-v5-u-w-42-on-md","pf-m-hidden pf-m-visible-on-md pf-v5-u-w-16-on-md",d.F.columnClass],y=({obj:e})=>{const{t:t}=Object(o.useTranslation)();return l.createElement(l.Fragment,null,l.createElement("div",{className:"co-m-pane__body"},l.createElement(d.ob,{text:t("public~StorageClass details")}),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-6"},l.createElement(d.lb,{resource:e},l.createElement(d.r,{label:t("public~Provisioner"),obj:e,path:"provisioner"}))),l.createElement("div",{className:"col-sm-6"},l.createElement("dl",{className:"co-m-pane__details"},l.createElement(d.r,{label:t("public~Reclaim policy"),obj:e,path:"reclaimPolicy"}),l.createElement("dt",null,t("public~Default class")),l.createElement("dd",null,v(e)?t("public~True"):t("public~False")),l.createElement(d.r,{label:t("public~Volume binding mode"),obj:e,path:"volumeBindingMode"}))))))},R=({obj:e})=>{const{t:t}=Object(o.useTranslation)();return l.createElement(l.Fragment,null,l.createElement(i.k,{className:r(O[0],"co-break-word")},l.createElement(d.hb,{kind:u,name:e.metadata.name},v(e)&&l.createElement("span",{className:"small text-muted co-resource-item__help-text"},"â€“ ",t("public~Default")))),l.createElement(i.k,{className:r(O[1],"co-break-word")},e.provisioner),l.createElement(i.k,{className:O[2]},e.reclaimPolicy||"-"),l.createElement(i.k,{className:O[3]},l.createElement(d.gb,{actions:b,kind:u,resource:e})))},f=e=>{const{t:t}=Object(o.useTranslation)();return l.createElement(i.j,Object.assign({},e,{"aria-label":t("public~StorageClasses"),Header:()=>[{title:t("public~Name"),sortField:"metadata.name",transforms:[c.a],props:{className:O[0]}},{title:t("public~Provisioner"),sortField:"provisioner",transforms:[c.a],props:{className:O[1]}},{title:t("public~Reclaim policy"),sortField:"reclaimPolicy",transforms:[c.a],props:{className:O[2]}},{title:"",props:{className:O[3]}}],Row:R,virtualize:!0}))};f.displayName="StorageClassList";const E=e=>{const{t:t}=Object(o.useTranslation)();return l.createElement(i.c,Object.assign({},s.a(e,"mock"),{title:t("public~StorageClasses"),kind:u,ListComponent:f,canCreate:!0,filterLabel:e.filterLabel,createProps:{to:"/k8s/cluster/storageclasses/~new/form"},createButtonText:t("public~Create StorageClass")}))},g=e=>{const t=[d.mc.details(Object(d.Kb)(y)),d.mc.editYaml()];return l.createElement(i.a,Object.assign({},e,{kind:u,menuActions:b,pages:t}))};g.displayName="StorageClassDetailsPage"},5483:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a(219),s=a(281),c=a(297),o=a(319),r=a(157),i=a(7),d=a(40),m=a(436),u=a(1197),p=a(1406),b=a(5907),v=a(5),O=a(5684),y=a(6093),R=a(10),f=a(8),E=a(15),g=a(1216),h=a(6092);a(11536);const W=Object(v.Oc)(e=>{var t,a,W,k;const{t:C}=Object(i.useTranslation)(),{close:M,cancel:S,resource:N,handlePromise:j,errorMessage:P,inProgress:_}=e,{name:F,namespace:B}=null==N?void 0:N.metadata,w=Object(v.Ib)(Object(g.C)(N)),x=v.Mc.split(Object(v.Xb)(w).string),T=Object(v.Wb)(w).string,[q,z]=l.useState(F+"-clone"),[D,V]=l.useState(x[0]||""),[K,L]=l.useState(null===(a=null===(t=null==N?void 0:N.spec)||void 0===t?void 0:t.accessModes)||void 0===a?void 0:a[0]),[I,U]=l.useState(x[1]||"Ti"),[A,G]=l.useState(!0),X=Object(h.b)(N,"title"),[$,H]=l.useState(""),[J,Y]=l.useState(""),[Q,Z,ee]=Object(O.a)(R.StorageClassModel,null===(W=null==N?void 0:N.spec)||void 0===W?void 0:W.storageClassName),te=`kubelet_volume_stats_used_bytes{persistentvolumeclaim='${F}'}`,[ae,le,ne]=Object(u.usePrometheusPoll)({endpoint:m.a.QUERY,query:te,namespace:B}),se=Object(p.a)(ae,null,v.Wb),ce=(null===(k=null==se?void 0:se[0])||void 0===k?void 0:k.label)||"-";return l.createElement("form",{onSubmit:e=>{e.preventDefault();const t={apiVersion:R.PersistentVolumeClaimModel.apiVersion,kind:R.PersistentVolumeClaimModel.kind,metadata:{name:q,namespace:N.metadata.namespace},spec:{storageClassName:$,dataSource:{name:F,kind:R.PersistentVolumeClaimModel.kind,apiGroup:""},resources:{requests:{storage:`${D}${I}`}},volumeMode:N.spec.volumeMode,accessModes:[K]}};return j(Object(f.jb)(R.PersistentVolumeClaimModel,t),e=>{M(),v.Vb.push(Object(v.sc)(e,Object(f.Db)(e)))})},name:"form",className:"modal-content"},l.createElement(d.h,null,C("console-app~Clone")),l.createElement(d.e,null,l.createElement(n.a,{label:C("console-app~Name"),isRequired:!0,fieldId:"clone-pvc-modal__name",className:"co-clone-pvc-modal__form--space"},l.createElement(s.a,{type:"text",className:"co-clone-pvc-modal__name--margin","data-test":"pvc-name",value:q,onChange:(e,t)=>z(t),"aria-label":C("console-app~Clone PVC")})),l.createElement(h.a,{onChange:L,className:"co-clone-pvc-modal__form--space",pvcResource:N,provisioner:J,loaded:Z,loadError:ee,filterByVolumeMode:!0}),l.createElement(n.a,{label:C("console-app~Size"),isRequired:!0,fieldId:"clone-pvc-modal__size",className:"co-clone-pvc-modal__form--space"},Z?l.createElement(v.db,{name:"requestSize",testID:"input-request-size",onChange:({value:e,unit:t})=>{V(e),U(t);const a=Object(v.Ib)(e+t),l=Object(v.Ib)(Object(g.C)(N));G(a>=l)},defaultRequestSizeUnit:I,defaultRequestSizeValue:D,dropdownUnits:b.a,isInputDisabled:ee||Object(E.Od)(null==Q?void 0:Q.provisioner),required:!0}):l.createElement("div",{className:"skeleton-text"}),!A&&l.createElement(c.a,null,l.createElement(o.a,null,l.createElement(r.a,{variant:"error",icon:l.createElement(E.Mb,null)},C("console-app~Size should be equal or greater than the requested size of PVC."))))),l.createElement(n.a,{fieldId:"clone-pvc-modal__storage-class",className:"co-clone-pvc-modal__form--space"},Z?l.createElement(y.a,{onChange:e=>{H(Object(g.q)(e)||""),Y(null==e?void 0:e.provisioner)},filter:e=>Object(g.H)(e,ee,Q),id:"clone-storage-class","data-test":"storage-class-dropdown",required:!0,selectedKey:Object(g.q)(Q)}):l.createElement("div",{className:"skeleton-text"})),l.createElement("div",{className:"co-clone-pvc-modal__details"},l.createElement("p",{className:"text-muted"},C("console-app~PVC details")),l.createElement("div",{className:"co-clone-pvc-modal__details-section"},l.createElement("div",null,l.createElement("div",null,l.createElement("p",{className:"co-clone-pvc-modal__pvc-details"},C("console-app~Namespace")),l.createElement("p",null,l.createElement(v.fb,{kind:R.NamespaceModel.kind}),N.metadata.namespace)),l.createElement("div",null,l.createElement("p",{className:"co-clone-pvc-modal__pvc-details"},C("console-app~StorageClass")),l.createElement("p",null,l.createElement(v.fb,{kind:R.StorageClassModel.kind}),$||"-"))),l.createElement("div",null,l.createElement("div",null,l.createElement("p",{className:"co-clone-pvc-modal__pvc-details"},C("console-app~Requested capacity")),l.createElement("p",null,T)),l.createElement("div",null,l.createElement("p",{className:"co-clone-pvc-modal__pvc-details"},C("console-app~Used capacity")),l.createElement("div",null,!ne&&!le&&ce,ne&&l.createElement(v.T,null),!ne&&le&&"-"))),l.createElement("div",null,l.createElement("div",null,l.createElement("p",{className:"co-clone-pvc-modal__pvc-details"},C("console-app~Access mode")),l.createElement("p",null,X.join(", ")||"-")),l.createElement("div",null,l.createElement("p",{className:"co-clone-pvc-modal__pvc-details"},C("console-app~Volume mode")),l.createElement("p",null,N.spec.volumeMode)))))),l.createElement(d.g,{inProgress:_,submitDisabled:!A||!$,errorMessage:P,submitText:C("console-app~Clone"),cancel:S}))});t.default=Object(d.m)(W)},5684:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var l=a(0),n=a(8),s=function(e,t,a,l){return new(a||(a=Promise))((function(n,s){function c(e){try{r(l.next(e))}catch(e){s(e)}}function o(e){try{r(l.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(c,o)}r((l=l.apply(e,t||[])).next())}))};const c=(e,t,a,c)=>{const[o,r]=l.useState(),[i,d]=l.useState(!1),[m,u]=l.useState();return l.useEffect(()=>{s(void 0,void 0,void 0,(function*(){try{u(null),d(!1),r(null);const l=yield Object(n.kb)(e,t,a,c);r(l)}catch(e){u(e)}finally{d(!0)}}))},[e,t,a,c]),[o,i,m]}},5907:function(e,t,a){"use strict";a.d(t,"j",(function(){return o})),a.d(t,"i",(function(){return r})),a.d(t,"k",(function(){return i})),a.d(t,"g",(function(){return d})),a.d(t,"h",(function(){return m})),a.d(t,"c",(function(){return p})),a.d(t,"f",(function(){return b})),a.d(t,"a",(function(){return v})),a.d(t,"d",(function(){return O})),a.d(t,"b",(function(){return y})),a.d(t,"e",(function(){return R}));var l=a(29),n=a(499),s=a(117),c=a(22);const o="snapshot.storage.kubernetes.io/pvc-storage-class",r="snapshot.storage.kubernetes.io/pvc-access-modes",i="snapshot.storage.kubernetes.io/pvc-volume-mode",d=["ReadWriteOnce","ReadWriteMany","ReadOnlyMany","ReadWriteOncePod"],m=["Filesystem","Block"],u=Object.freeze({"kubernetes.io/no-provisioner":{Filesystem:["ReadWriteOnce"],Block:["ReadWriteOnce"]},"kubernetes.io/aws-ebs":{Filesystem:["ReadWriteOnce","ReadWriteOncePod"],Block:["ReadWriteOnce","ReadWriteOncePod"]},"kubernetes.io/gce-pd":{Filesystem:["ReadWriteOnce","ReadOnlyMany","ReadWriteOncePod"],Block:["ReadWriteOnce","ReadOnlyMany","ReadWriteOncePod"]},"kubernetes.io/glusterfs":{Filesystem:["ReadWriteOnce","ReadWriteMany","ReadOnlyMany","ReadWriteOncePod"],Block:["ReadWriteOnce","ReadWriteMany","ReadOnlyMany","ReadWriteOncePod"]},"kubernetes.io/cinder":{Filesystem:["ReadWriteOnce","ReadWriteOncePod","ReadWriteOncePod"],Block:["ReadWriteOnce","ReadWriteOncePod","ReadWriteOncePod"]},"kubernetes.io/azure-file":{Filesystem:["ReadWriteOnce","ReadWriteMany","ReadOnlyMany","ReadWriteOncePod"],Block:["ReadWriteOnce","ReadWriteMany","ReadOnlyMany","ReadWriteOncePod"]},"kubernetes.io/azure-disk":{Filesystem:["ReadWriteOnce"],Block:["ReadWriteOnce"]},"kubernetes.io/quobyte":{Filesystem:["ReadWriteOnce","ReadWriteMany","ReadOnlyMany"],Block:["ReadWriteOnce","ReadWriteMany","ReadOnlyMany"]},"kubernetes.io/rbd":{Filesystem:["ReadWriteOnce","ReadOnlyMany"],Block:["ReadWriteOnce","ReadOnlyMany"]},"kubernetes.io/vsphere-volume":{Filesystem:["ReadWriteOnce","ReadWriteMany"],Block:["ReadWriteOnce","ReadWriteMany"]},"kubernetes.io/portworx-volume":{Filesystem:["ReadWriteOnce","ReadWriteMany"],Block:["ReadWriteOnce","ReadWriteMany"]},"kubernetes.io/scaleio":{Filesystem:["ReadWriteOnce","ReadOnlyMany"],Block:["ReadWriteOnce","ReadOnlyMany"]},"kubernetes.io/storageos":{Filesystem:["ReadWriteOnce"],Block:["ReadWriteOnce"]},"manila.csi.openstack.org":{Filesystem:["ReadWriteOnce","ReadWriteMany","ReadOnlyMany"],Block:["ReadWriteOnce","ReadWriteMany","ReadOnlyMany"]},"ebs.csi.aws.com":{Filesystem:["ReadWriteOnce"],Block:["ReadWriteOnce"]},"block.csi.ibm.com":{Filesystem:["ReadWriteOnce","ReadWriteMany"],Block:["ReadWriteOnce","ReadWriteMany"]},"csi.ovirt.org":{Filesystem:["ReadWriteOnce"],Block:["ReadWriteOnce"]},"cinder.csi.openstack.org":{Filesystem:["ReadWriteOnce"],Block:["ReadWriteOnce"]},"pd.csi.storage.gke.io":{Filesystem:["ReadWriteOnce","ReadWriteOncePod"],Block:["ReadWriteOnce","ReadWriteOncePod"]},"cephfs.csi.ceph.com":{Filesystem:["ReadWriteOnce","ReadWriteMany","ReadOnlyMany","ReadWriteOncePod"],partialMatch:!0},"rbd.csi.ceph.com":{Filesystem:["ReadWriteOnce","ReadOnlyMany","ReadWriteOncePod"],Block:["ReadWriteOnce","ReadWriteMany","ReadOnlyMany","ReadWriteOncePod"],partialMatch:!0},"file.csi.azure.com":{Filesystem:["ReadWriteOnce","ReadWriteMany","ReadOnlyMany","ReadWriteOncePod"],Block:["ReadWriteOnce","ReadWriteMany","ReadOnlyMany","ReadWriteOncePod"]}}),p=()=>[{value:"ReadWriteOnce",title:l.a.t("public~Single user (RWO)")},{value:"ReadWriteMany",title:l.a.t("public~Shared access (RWX)")},{value:"ReadOnlyMany",title:l.a.t("public~Read only (ROX)")},{value:"ReadWriteOncePod",title:l.a.t("public~Read write once pod (RWOP)")}],b=()=>[{value:"Filesystem",title:l.a.t("public~Filesystem")},{value:"Block",title:l.a.t("public~Block")}],v={i:"B",Ki:"KiB",Mi:"MiB",Gi:"GiB",Ti:"TiB",Pi:"PiB",Ei:"EiB"},O=e=>n.a(s.a(u,(t,a)=>!(!(null==t?void 0:t.partialMatch)||!(null==e?void 0:e.includes(a)))||a===e)||{},"partialMatch"),y=(e,t,a)=>{let l;const n=O(e);return l=c.a(n)?d:a?n[a]:Object.keys(n).map(e=>n[e]).flat(),l=[...new Set(l)],t?l.filter(e=>"ReadOnlyMany"!==e):l},R=(e,t)=>{const a=O(e);return c.a(a)?m:t?Object.keys(a).filter(e=>a[e].includes(t)):Object.keys(a)}},6092:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return p}));var l=a(0),n=a(205),s=a(165),c=a(219),o=a(354),r=a(294),i=a(255),d=a(7),m=a(5907);const u=(e,t)=>{var a;return i.a(null===(a=null==e?void 0:e.spec)||void 0===a?void 0:a.accessModes,(e,a)=>{const l=Object(m.c)().find(e=>e.value===a);return l&&e.push(l[t]),e},[])},p=e=>{var t;const{className:a,pvcResource:i,filterByVolumeMode:p,onChange:b,loaded:v,provisioner:O,availableAccessModes:y=[],description:R,ignoreReadOnly:f}=e,{t:E}=Object(d.useTranslation)(),g=i?u(i,"value"):y,h=null===(t=null==i?void 0:i.spec)||void 0===t?void 0:t.volumeMode,[W,k]=l.useState(),[C,M]=l.useState(),S=l.useCallback(e=>{M(e),b(e)},[b]),[N,j]=l.useState(!1),[P,_]=l.useState(Object(m.c)().find(e=>e.value===g[0]).title),F=()=>{j(!N)},B=Object(m.c)().map(e=>{const t=!(null==W?void 0:W.includes(e.value));return l.createElement(n.a,{key:e.title,value:{val:e.value,label:e.title},isDisabled:t,isSelected:C===e.value},e.title)});return l.useEffect(()=>{v&&k(Object(m.b)(O,f,p?h:null))},[p,f,v,O,h]),l.useEffect(()=>{W&&(!C&&W.includes(g[0])?S(g[0]):W.includes(C)||S(W[0]))},[C,W,S,g]),l.createElement(c.a,{label:E("console-app~Access mode"),isRequired:!0,fieldId:"access-mode",className:a},v&&W&&l.createElement(o.a,{isOpen:N,selected:P,onSelect:(e,t)=>{j(!N),_(t.label),S(t.val)},onOpenChange:e=>j(e),toggle:e=>l.createElement(s.a,{ref:e,onClick:F,isExpanded:N,style:{width:"200px"}},P),shouldFocusToggleOnSelect:!0},l.createElement(r.a,null,B)),W&&W&&R&&l.createElement("p",{className:"help-block",id:"access-mode-help"},R),(!v||!W)&&l.createElement("div",{className:"skeleton-text"}))}},6093:function(e,t,a){"use strict";a.d(t,"a",(function(){return R}));var l=a(16),n=a(50),s=a(1992),c=a(107),o=a(57),r=a(279),i=a(839),d=a(0),m=a(230),u=a(7),p=a(5),b=a(4381),v=a(18);class O extends d.Component{constructor(){super(...arguments),this.state={items:{},name:this.props.name,selectedKey:this.props.selectedKey,title:d.createElement(p.T,null),defaultClass:this.props.defaultClass},this.autocompleteFilter=(e,t)=>m(e,t.props.name),this.getTitle=e=>e.kindLabel?d.createElement(p.jb,{kind:"StorageClass",name:e.name}):d.createElement("span",null,e.name),this.onChange=e=>{const t=l.a(this.state,["items",e],{});this.setState({selectedKey:e,title:this.getTitle(t)},()=>this.props.onChange(t.resource))}}UNSAFE_componentWillMount(){this.UNSAFE_componentWillReceiveProps(this.props)}UNSAFE_componentWillReceiveProps(e){const{loaded:t,loadError:a,resources:c,t:o}=e;if(a)return void this.setState({title:d.createElement("div",{className:"cos-error-title"},o("public~Error loading {{desc}}",{desc:e.desc}))});if(!t)return;const r={items:{},title:{},defaultClass:""};let i={};const m=o("public~No default StorageClass");n.a(c.StorageClass.data,e=>{i[e.metadata.name]={kindLabel:"StorageClass",name:e.metadata.name,description:l.a(e,"metadata.annotations.description",""),default:Object(b.isDefaultClass)(e),accessMode:l.a(e,["metadata","annotations","storage.alpha.openshift.io/access-mode"],""),provisioner:e.provisioner,parameters:e.parameters,type:l.a(e,"parameters.type",""),zone:l.a(e,"parameters.zone",""),resource:e}}),e.filter&&(i=Object.keys(i).filter(t=>e.filter(i[t])).reduce((e,t)=>(e[t]=i[t],e),{})),r.defaultClass=s.a(i,"default");const{selectedKey:u}=this.state;r.defaultClass||(i[""]={kindLabel:"",name:m}),this.props.loaded&&u&&i[u||r.defaultClass]||(r.title=d.createElement("span",{className:"text-muted"},o("public~Select StorageClass")));const p=i[u||r.defaultClass];p&&(r.title=this.getTitle(p)),Object.keys(i).sort().forEach(e=>{r.items[e]=i[e]}),this.setState(r)}componentDidMount(){const{defaultClass:e}=this.state;e&&this.onChange(e)}componentDidUpdate(){const{defaultClass:e,selectedKey:t}=this.state;t?this.onChange(t):e&&this.onChange(e)}shouldComponentUpdate(e,t){return!c.a(this.state,t)}render(){var e;const{id:t,loaded:a,describedBy:l,noSelection:n,t:s}=this.props,c={};o.a(this.state.items,(e,t)=>c[t]=t?d.createElement(f,Object.assign({},e)):d.createElement(E,Object.assign({},e)));const{selectedKey:i,defaultClass:m}=this.state,u=m||r.a(c)>1;return d.createElement(d.Fragment,null,a&&u&&d.createElement("div",null,d.createElement("label",{className:v("control-label",this.props.hideClassName,{"co-required":this.props.required}),htmlFor:t},s("public~StorageClass")),d.createElement(p.t,{className:"co-storage-class-dropdown",dropDownClassName:"dropdown--full-width",autocompleteFilter:this.autocompleteFilter,autocompletePlaceholder:s("public~Select StorageClass"),items:c,selectedKey:i,title:this.state.title,onChange:this.onChange,id:t,dataTest:null===(e=this.props)||void 0===e?void 0:e["data-test"],noSelection:n,menuClassName:"dropdown-menu--text-wrap"}),l&&d.createElement("p",{className:"help-block",id:l},s("public~StorageClass for the new claim"))))}}const y=Object(u.withTranslation)()(O),R=e=>d.createElement(p.C,{resources:[{kind:"StorageClass",prop:"StorageClass",isList:!0}]},d.createElement(y,Object.assign({},e))),f=e=>{const t=[e.default?" (default)":"",e.description,e.accessMode,e.provisioner,e.type,e.zone],a=i.a(t).join(" | ");return d.createElement("span",{className:"co-resource-item"},d.createElement(p.fb,{kind:e.kindLabel}),d.createElement("span",{className:"co-resource-item__resource-name"},e.name,d.createElement("div",{className:"text-muted small"}," ",a)))},E=e=>d.createElement("span",{className:"co-resource-item"},d.createElement("span",{className:"co-resource-item__resource-name"},e.name))}}]);
//# sourceMappingURL=clone-pvc-modal-chunk-4ac83d77729c85ebabe4.min.js.map
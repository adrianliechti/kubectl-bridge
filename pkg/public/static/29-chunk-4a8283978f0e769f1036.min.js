(window.webpackJsonp=window.webpackJsonp||[]).push([[29,71,366],{11718:function(e,t,a){"use strict";var n=a(0),r=a(7),l=a(264),o=a(19);t.a=({handleCodeReplace:e})=>{const{t:t}=Object(r.useTranslation)();return n.createElement(l.a,{variant:l.b.small,titleIconVariant:"warning",title:t("Replace current content?"),isOpen:!0,showClose:!1,actions:[n.createElement(o.a,{key:"yes",id:"confirm-replace","data-test":"confirm-replace",variant:"primary",onClick:e},t("Yes")),n.createElement(o.a,{key:"no",id:"cancel-replace","data-test":"cancel-replace",variant:"secondary",onClick:e},t("No")),n.createElement(o.a,{key:"both",id:"keep-both","data-test":"keep-both",variant:"tertiary",onClick:e},t("Keep both"))]},t("Existing content will be replaced. Do you want to continue?"))}},11719:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var n=a(0),r=a(137),l=a(7),o=a(1394),s=a(404),i=a(4341),c=a(19),u=a(15),d=a(1340),m=a(1370),p=a(2140),b=a(740),v=a(955),f=a(1373),g=a(1182),h=a(5),E=a(8);const y={translate:"no"},k=({errors:e,inFlight:t})=>{const{t:a}=Object(l.useTranslation)();let r;return r=t?n.createElement(n.Fragment,null,n.createElement(o.a,{size:"lg"}),n.createElement("h2",null,a("public~Creating resources..."))):t||e?n.createElement(n.Fragment,null,n.createElement(s.a,{size:"lg"},n.createElement(u.tc,null)),n.createElement("h2",null,a("public~One or more resources failed to be created"))):n.createElement(n.Fragment,null,n.createElement(s.a,{size:"lg"},n.createElement(u.X,null)),n.createElement("h2",{"data-test":"resources-successfully-created"},a("public~Resources successfully created"))),n.createElement("div",{className:"co-import-yaml-status pf-v5-u-text-align-center"},r)},O=({creating:e,error:t,message:a})=>{let r;return r=e?n.createElement(o.a,{size:"sm",className:"co-icon-space-r"}):t?n.createElement(s.a,{size:"sm"},n.createElement(u.Mb,{className:"co-icon-space-r"})):n.createElement(s.a,{size:"sm"},n.createElement(u.X,{className:"co-icon-space-r"})),n.createElement("span",null,r,a)},j=({createResources:e,displayResults:t,importResources:a,retryFailed:o})=>{const{t:s}=Object(l.useTranslation)(),[u,j]=n.useState(a.map(()=>({creating:!0,message:s("public~Creating")}))),[S,C]=n.useState(!0),w=u.some(e=>e.error);n.useEffect(()=>{e(a).then(e=>{j(e.map(e=>{var t;return"fulfilled"===e.status?{creating:!1,result:e.result,message:s("public~Created")}:"rejected"===e.status?{creating:!1,error:!0,message:s("public~Error: {{error}}",{error:null===(t=null==e?void 0:e.reason)||void 0===t?void 0:t.substring(11)})}:void 0})),C(!1)})},[]);return n.createElement("div",{className:"co-import-yaml-results-page"},n.createElement(r.a,null,n.createElement("title",null,s("public~Import YAML Results"))),n.createElement(i.a,null,n.createElement("div",{className:"co-import-yaml-results-page__main"},n.createElement(k,{inFlight:S,errors:w}),n.createElement(d.a,Object.assign({gridBreakPoint:m.a.none,variant:"compact","aria-label":s("public~Import YAML results")},y,{"data-codemods":"true"}),n.createElement(p.a,Object.assign({},y),n.createElement(b.a,Object.assign({},y),n.createElement(v.a,Object.assign({},y),s("public~Name")),n.createElement(v.a,Object.assign({},y),s("public~Namespace")),n.createElement(v.a,Object.assign({},y),s("public~Creation status")))),n.createElement(f.a,Object.assign({},y),a.map((e,t)=>{var a,r;const l=u[t],o=l.result||e,s=!o.metadata.name&&o.metadata.generateName?o.metadata.generateName+"...":o.metadata.name;return n.createElement(b.a,Object.assign({key:t},y),n.createElement(g.a,Object.assign({},y),n.createElement(h.hb,{kind:Object(E.Db)(o)||o.kind,name:s,namespace:null===(a=o.metadata)||void 0===a?void 0:a.namespace,linkTo:!S&&!u[t].error})),n.createElement(g.a,Object.assign({},y),(null===(r=o.metadata)||void 0===r?void 0:r.namespace)?n.createElement(h.hb,{kind:"Namespace",name:o.metadata.namespace}):"-"),n.createElement(g.a,Object.assign({},y),n.createElement(O,Object.assign({},l))))}))),!S&&n.createElement(n.Fragment,null,w&&n.createElement("div",{className:"co-import-yaml-results-page__footer"},n.createElement(c.a,{variant:"primary",type:"button",onClick:()=>{const e=u.reduce((e,t,n)=>t.error?[...e,a[n]]:e,[]);o(e)},"data-test":"retry-failed-resources"},s("public~Retry failed resources"))),n.createElement("div",{className:"co-import-yaml-results-page__footer"},n.createElement(c.a,{"data-test":"import-more-yaml",variant:"link",type:"button",onClick:()=>t(!1)},s("public~Import more YAML")))))))}},2261:function(e,t,a){"use strict";a.r(t),a.d(t,"EditYAML_",(function(){return G})),a.d(t,"EditYAML",(function(){return q}));var n=a(225),r=a(22),l=a(447),o=a(16),s=a(107),i=a(499),c=a(333),u=a(116),d=a(4387),m=a(0),p=a(18),b=a(31),v=a(42),f=a(6437),g=a(380),h=a(19),E=a(472),y=a(80),k=a(966),O=a(1228),j=a(873),S=a(7),C=a(14),w=a(15),N=a(4407),_=a(5421),L=(a(6227),a(6863)),M=a(5962),Y=a(13),A=a(876),T=a(243),x=a(131),V=a(11718),R=a(5),P=a(8),I=a(10),D=a(2258),F=a(1277),z=a(125),$=a(2277),H=a(11719),B=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function o(e){try{i(n.next(e))}catch(e){l(e)}}function s(e){try{i(n.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}i((n=n.apply(e,t||[])).next())}))},K=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const G=Object(b.connect)(e=>({activeNamespace:e.UI.get("activeNamespace"),impersonate:Object(Y.I)(e),models:e.k8s.getIn(["RESOURCES","models"])}))((U=Object(w.hf)(e=>{var t,a;const{allowMultiple:Y,connectDropTarget:A,isOver:T,canDrop:I,create:K,yamlSamplesList:G,customClass:U,onChange:q=(()=>null),models:J,showTooltips:W,download:X=!0,header:Z,genericYAML:Q=!1,children:ee,postFormSubmissionCallback:te,redirectURL:ae,clearFileUpload:ne,onSave:re,isCodeImportRedirect:le}=e,oe=Object(C.useNavigate)(),[se,ie]=m.useState(null),[ce,ue]=m.useState(null),[de,me]=m.useState(!1),[pe,be]=m.useState(!1),[ve,fe]=m.useState(e.sampleObj),[ge,he]=m.useState(!!K),[Ee,ye]=m.useState(null),[ke,Oe]=m.useState(),[je,Se]=m.useState(),[Ce,we]=m.useState(),[Ne,_e]=m.useState(""),[Le,Me]=m.useState(!1),[Ye,Ae]=m.useState(""),Te=Object(b.useSelector)(f.b),xe=()=>Object(v.action)(f.a.CloseOLS),Ve=Object(b.useDispatch)(),Re=m.useRef(),Pe=m.useRef(),Ie=m.useRef(),{t:De}=Object(S.useTranslation)(),Fe=m.useRef("0"),ze="onCancel"in e?e.onCancel:()=>oe(-1),$e=()=>{var e;return null===(e=Re.current)||void 0===e?void 0:e.editor},He=m.useCallback(e=>r.a(e)||!J?null:J.get(Object(P.Db)(e))||J.get(e.kind),[J]),Be=m.useCallback(t=>{if(e.readOnly)return;if(K)return;const a=He(t);if(!a)return;const{name:n,namespace:r}=t.metadata,l={group:a.apiGroup,resource:a.plural,verb:"update",name:n,namespace:r};Object(R.Fb)(l,e.impersonate).then(e=>{var t;const a=!e.status.allowed;Oe(a),Re.current&&(null===(t=Re.current.editor)||void 0===t||t.updateOptions({readOnly:a}))}).catch(e=>{console.warn("Error while check edit access",e)})},[e.readOnly,e.impersonate,K,He]),Ke=m.useCallback(e=>{var t;const a=null===(t=$e())||void 0===t?void 0:t.getValue();return r.a(a)?e:`${a}${a.trim().endsWith("---")?"\n":"\n---\n"}${e}`},[]),Ge=m.useCallback(e=>{let t="";if(e)if(l.a(e))t=Y?Ke(e):e;else try{t=Object(g.safeDump)(e,{lineWidth:-1}),Be(e)}catch(e){t=De("public~Error getting YAML: {{e}}",{e:e})}return t},[Ke,Y,Be,De]),Ue=m.useCallback((t=!1,a=e.obj)=>{var n;if(de&&!t)return;const r=Ge(a);Fe.current=o.a(a,"metadata.resourceVersion"),null===(n=$e())||void 0===n||n.setValue(r),me(!0),be(!1)},[Ge,de,e.obj]);m.useEffect(()=>{var e,t;if(!(e=>{if(r.a(e))return!1;try{return Object(g.safeLoad)(e),!0}catch(e){return!1}})(null==Te?void 0:Te.value)||!le)return;const a=null===(e=$e())||void 0===e?void 0:e.getValue();r.a(a)||a===Ye?null===(t=$e())||void 0===t||t.setValue(null==Te?void 0:Te.value):Me(!0),Ae(null==Te?void 0:Te.value)},[Te,de,le]);const qe=(e,t=null)=>{ue(t),ie(t=>{let a=t||[];return r.a(e)||(a=[...a,e]),a})},Je=m.useCallback(()=>{var t,a,n,r,l;const o=null===(a=null===(t=e.obj)||void 0===t?void 0:t.metadata)||void 0===a?void 0:a.namespace;!K&&o&&(null===(l=null===(r=null===(n=e.obj)||void 0===n?void 0:n.metadata)||void 0===r?void 0:r.ownerReferences)||void 0===l?void 0:l.length)&&Object(P.nb)(z.ClusterServiceVersionModel,{ns:o}).then(t=>{const a=Object(F.a)(e.obj,t);ye(a)}).catch(e=>{console.error("Could not fetch CSVs",e)})},[K,e.obj]);m.useEffect(()=>{e.error&&qe(e.error),Ue(),Je()},[Je,Ue,e.error]);const We=m.useRef(e);m.useEffect(()=>{if(T)return;const t=o.a(e.obj,"metadata.resourceVersion"),a=Fe.current!==t;be(a),qe(e.error,ce),e.sampleObj?Ue(!s.a(ve,e.sampleObj),e.sampleObj):e.fileUpload?Ue(!s.a(We.current.fileUpload,e.fileUpload),e.fileUpload):Ue()},[e,T,Ue,ve,ce]);const Xe=m.useCallback(t=>{const a=He(t);ue(null),ie(null),(K?Object(P.jb)(a,i.a(t,["metadata.resourceVersion"])):Object(P.rb)(a,t,t.metadata.namespace,t.metadata.name)).then(e=>te(e)).then(a=>{if(K){let t=ae;return t||(t=(c.a(e.resourceObjPath)?e.resourceObjPath:R.sc)(a,Object(P.Db)(a))),void oe(t)}const n=De("public~{{name}} has been updated to version {{version}}",{name:t.metadata.name,version:a.metadata.resourceVersion});ue(n),ie(null),Ue(!0,a)}).catch(e=>{qe(e.message)})},[K,Ue,De,te,ae,e.resourceObjPath,oe,He]),Ze=m.useCallback(e=>{ne(),Se(e)},[ne]),Qe=e=>{var t;if(Ze(!1),e){const a=e.map(e=>Ge(e));Se(!1),null===(t=$e())||void 0===t||t.setValue(a.join("---\n"))}},et=m.useCallback(t=>{if(!t)return De("public~No YAML content found.");if(!t.apiVersion)return De('public~No "apiVersion" field found in YAML.');if(!t.kind)return De('public~No "kind" field found in YAML.');const a=He(t);if(!a)return De('public~The server doesn\'t have a resource type "kind: {{kind}}, apiVersion: {{apiVersion}}".',{kind:t.kind,apiVersion:t.apiVersion});if(!t.metadata)return De('public~No "metadata" field found in YAML.');if(t.metadata.namespace&&!a.namespaced&&delete t.metadata.namespace,!t.metadata.namespace&&a.namespaced){if(e.activeNamespace===w.c)return De('public~No "metadata.namespace" field found in YAML.');t.metadata.namespace=e.activeNamespace}},[He,e.activeNamespace,De]),[tt,at]=m.useState(!1),nt=m.useCallback(()=>{let t;if(re)return void re($e().getValue());try{t=Object(g.safeLoad)($e().getValue())}catch(e){return void qe(De("public~Error parsing YAML: {{e}}",{e:e}))}const a=et(t);if(a)return void qe(a);const{namespace:n,name:r}=t.metadata;if(!K&&e.obj){const{namespace:a,name:l}=e.obj.metadata;if(l!==r)return void qe(De('public~Cannot change resource name (original: "{{name}}", updated: "{{newName}}").',{name:l,newName:r}));if(a!==n)return void qe(De('public~Cannot change resource namespace (original: "{{namespace}}", updated: "{{newNamespace}}").',{namespace:a,newNamespace:n}));if(e.obj.kind!==t.kind)return void qe(De('public~Cannot change resource kind (original: "{{original}}", updated: "{{updated}}").',{original:e.obj.kind,updated:t.kind}));const o=Object(P.cb)(e.obj.apiVersion).group,s=Object(P.cb)(t.apiVersion).group;if(o!==s)return void qe(De('public~Cannot change API group (original: "{{apiGroup}}", updated: "{{newAPIGroup}}").',{apiGroup:o,newAPIGroup:s}));if(Ee)return void Object(x.w)({kind:t.kind,resource:t,onSubmit:()=>Xe(t),owner:Ee})}Xe(t)},[K,Ee,De,Xe,et,re,e.obj]),rt=()=>{ie([]),_e("save"),at(e=>!e)},lt=m.useCallback(()=>{var e,t,a,n,r,l;let o,s=!1;try{o=Object(g.safeLoadAll)($e().getValue()).filter(e=>e)}catch(e){return void qe(De("public~Error parsing YAML: {{e}}",{e:e}))}if(1===o.length){if("v1"!==(null===(e=o[0])||void 0===e?void 0:e.apiVersion)||!(null===(a=null===(t=o[0])||void 0===t?void 0:t.kind)||void 0===a?void 0:a.includes("List"))||!(null===(n=o[0])||void 0===n?void 0:n.items))return void rt();if(!((null===(l=null===(r=o[0])||void 0===r?void 0:r.items)||void 0===l?void 0:l.length)>0))return void qe(De('public~"items" list is empty'));o=o[0].items}else if(0===o.length)return;if(o.forEach(e=>{const t=et(e);t&&(s=!0,((e,t)=>{var a;const n=null===(a=null==e?void 0:e.metadata)||void 0===a?void 0:a.name,r=null==e?void 0:e.kind;ie(e=>[...e||[],n?`${r} ${n}: ${t}`:t])})(e,t))}),!s){const e=u.a(o,e=>!e.metadata.generateName);if(d.a(e,e=>[e.metadata.name,e.metadata.namespace,e.kind,Object(P.cb)(e.apiVersion).group].join("~")).length!==e.length)return void qe(De("public~Resources in the same namespace and API group must have unique names"));ie(null),we(o),Ze(!0)}},[De,Ze,et]),ot=()=>{ie([]),_e("saveall"),at(e=>!e)};m.useEffect(()=>{"save"===Ne&&nt(),"saveall"===Ne&&lt()},[tt,Ne]);const st=(t="default",a="",r=Object(P.Hb)(e.model))=>{try{const l=((e,t,a,r,l="default")=>{const o=Object(g.safeLoad)(r||Object(D.b)(e).getIn([t,a]));return n.a(o.metadata,"namespace")&&(o.metadata.namespace=l),o})(e.templateExtensions,r,t,a,e.obj.metadata.namespace);return fe(l),l}catch(e){Object(x.s)({title:De("public~Failed to parse YAML sample"),error:m.createElement("div",{className:"co-pre-line"},e.message||e.name||De("public~An error occurred."))})}},it=()=>{he(e=>!e),window.dispatchEvent(new Event("sidebar_toggle"))};if(!K&&!e.obj)return m.createElement(R.R,null);const ct=p("co-file-dropzone-container",{"co-file-dropzone--drop-over":T});if(null===(a=null===(t=Re.current)||void 0===t?void 0:t.editor)||void 0===a||a.updateOptions({hover:W}),je)return m.createElement(H.a,{createResources:function(e){return B(this,void 0,void 0,(function*(){const t=[];for(const a of e)try{const e=yield Object(P.jb)(He(a),a);t.push({status:"fulfilled",result:e})}catch(e){t.push({status:"rejected",reason:e.toString()})}return Promise.resolve(t)}))},displayResults:Se,importResources:Ce,models:J,retryFailed:Qe});const ut=e.readOnly||ke,dt={readOnly:ut,scrollBeyondLastLine:!1},mt=He(e.obj),{samples:pt,snippets:bt}=mt?Object(w.Ed)(mt,G,De):{samples:[],snippets:[]},vt=mt?Object($.a)(mt):{properties:[]},ft=vt&&!r.a(vt.properties)||K&&!r.a(pt)||!r.a(bt),gt=!ge&&ft?m.createElement(h.a,{type:"button",variant:"link",isInline:!0,onClick:it},m.createElement(j.a,{className:"co-icon-space-r co-p-has-sidebar__sidebar-link-icon"}),De("public~View sidebar")):null,ht=m.createElement(E.a,{label:De("public~Show tooltips"),id:"showTooltips",isChecked:W,"data-checked-state":W,onChange:(t,a)=>{e.setShowTooltips(a)}}),Et=m.createElement("div",{className:"co-file-dropzone co-file-dropzone__flex"},I&&m.createElement("div",{className:ct},m.createElement("p",{className:"co-file-dropzone__drop-text"},De("public~Drop file here"))),K&&!e.hideHeader&&m.createElement(R.Z,{title:Z,badge:Object(w.Ec)(mt&&mt.badge),helpText:Y?m.createElement(S.Trans,{ns:"public"},"Drag and drop YAML or JSON files into the editor, or manually enter files and use"," ",m.createElement("kbd",{className:"co-kbd"},"---")," to separate each definition."):De("public~Create by manually entering YAML or JSON definitions, or by dragging and dropping a file into the editor."),detail:!0}),m.createElement("div",{className:"pf-v5-c-form co-m-page__body"},m.createElement("div",{className:"co-p-has-sidebar"},m.createElement("div",{className:"co-p-has-sidebar__body"},m.createElement("div",{className:p("yaml-editor",U),ref:Pe},Le&&m.createElement(V.a,{handleCodeReplace:e=>{var t,a;"confirm-replace"===e.target.id?null===(t=$e())||void 0===t||t.setValue(null==Te?void 0:Te.value):"keep-both"===e.target.id&&(null===(a=$e())||void 0===a||a.setValue(Ke(null==Te?void 0:Te.value))),Me(!1)}}),m.createElement(N.default,{ref:Re,options:dt,showShortcuts:!Q,minHeight:"100px",toolbarLinks:gt?[ht,gt]:[ht],onChange:q,onSave:()=>Y?ot():rt()}),m.createElement("div",{className:"yaml-editor__buttons",ref:Ie},ee,(null==se?void 0:se.length)>0&&m.createElement(y.a,{isInline:!0,className:"co-alert co-alert--scrollable",variant:"danger",title:De("public~An error occurred"),"data-test":"yaml-error"},m.createElement("div",{className:"co-pre-line"},se.join("\n"))),ce&&m.createElement(y.a,{isInline:!0,className:"co-alert",variant:"success",title:ce}),pe&&m.createElement(y.a,{isInline:!0,className:"co-alert",variant:"info",title:De("public~This object has been updated.")},De("public~Click reload to see the new version.")),m.createElement(k.a,{className:"pf-v5-c-form__group--no-top-margin"},K&&m.createElement(h.a,{type:"submit",variant:"primary",id:"save-changes","data-test":"save-changes",onClick:()=>{Y?ot():rt(),Ve(xe())}},De("public~Create")),!K&&!ut&&m.createElement(h.a,{type:"submit",variant:"primary",id:"save-changes","data-test":"save-changes",onClick:()=>rt()},De("public~Save")),!K&&!Q&&m.createElement(h.a,{type:"submit",variant:"secondary",id:"reload-object","data-test":"reload-object",onClick:()=>(()=>{Ue(!0);const e=$e();Object(L.b)(e,e.getModel(),!1),fe(null),ie(null),ue(null)})()},De("public~Reload")),m.createElement(h.a,{variant:"secondary",id:"cancel","data-test":"cancel",onClick:()=>{ze(),Ve(xe())}},De("public~Cancel")),X&&m.createElement(h.a,{type:"submit",variant:"secondary",className:"pf-v5-c-button--align-right hidden-sm hidden-xs",onClick:()=>(()=>{var e;const t=null===(e=$e())||void 0===e?void 0:e.getValue();Object(M.a)(t)})()},m.createElement(O.a,null)," ",De("public~Download")))))),ft&&ge&&m.createElement(_.default,{editorRef:Re,model:mt,samples:K?pt:[],snippets:bt,sanitizeYamlContent:(e,t,a)=>{const n=st(e,t,a),r=Ge(n);return Fe.current=o.a(n,"metadata.resourceVersion"),r},toggleSidebar:it}))));return c.a(A)?A(Et):Et}),function(e){var t;const a=null===(t=null==e?void 0:e.obj)||void 0===t?void 0:t.kind,[n,r]=Object(A.useResolvedExtensions)(m.useCallback(e=>Object(Y.fc)(e)&&e.properties.model.kind===a,[a])),[l,o]=Object(w.ff)(w.Rb,w.Qb,!0,!0);return r?m.createElement(U,Object.assign({templateExtensions:n,showTooltips:l,setShowTooltips:o},e)):m.createElement(R.S,null)}));var U;const q=Object(T.a)(w.O.CONSOLE_YAML_SAMPLE)(e=>{var{flags:t}=e,a=K(e,["flags"]);const n=t[w.O.CONSOLE_YAML_SAMPLE]?[{kind:Object(P.Hb)(I.ConsoleYAMLSampleModel),isList:!0,prop:"yamlSamplesList"}]:[];return m.createElement(R.C,{resources:n},m.createElement(G,Object.assign({},a)))})},4407:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(2246),l=a(6411),o=a(1205),s=a(6678),i=a(6863);a(6227),a(7543);const c=n.forwardRef((e,t)=>{const{value:a,options:c=i.a,showShortcuts:u,showMiniMap:d,toolbarLinks:m,minHeight:p,onChange:b,onSave:v,language:f}=e,g=n.useContext(o.a),[h]=n.useState(void 0!==a),E=n.useCallback((e,t)=>{var a,n;const r=null===(a=e.getModel())||void 0===a?void 0:a.getModeId();switch(e.layout(),e.focus(),r){case"yaml":Object(i.c)(e,t,h);break;case"json":e.getAction("editor.action.formatDocument").run()}null===(n=t.editor.getModels()[0])||void 0===n||n.updateOptions({tabSize:2}),v&&e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KEY_S,v)},[v,h]),y=n.useMemo(()=>Object.assign(Object.assign({},c),{minimap:{enabled:d}}),[c,d]);return n.createElement(n.Fragment,null,n.createElement(s.a,{showShortcuts:u,toolbarLinks:m}),n.createElement(r.a,{bounds:!0},({measureRef:e,contentRect:r})=>n.createElement("div",{ref:e,className:"ocs-yaml-editor__root",style:{minHeight:p}},n.createElement("div",{className:"ocs-yaml-editor__wrapper"},n.createElement(l.a,{ref:t,language:null!=f?f:"yaml",theme:"light"===g?"console-light":"console-dark",height:r.bounds.height,width:r.bounds.width,value:a,options:y,editorDidMount:E,onChange:b})))))});t.default=c},5421:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(6864),l=a(7544),o=a(5962);t.default=({editorRef:e,model:t,samples:a,schema:s,snippets:i,sidebarLabel:c,sanitizeYamlContent:u,toggleSidebar:d})=>{var m;const p=null===(m=e.current)||void 0===m?void 0:m.editor,b=n.useCallback((e="default",t="",a)=>{const n=u?u(e,t,a):t,l=p.getSelection(),o=new r.Range(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn),s=new Array(l.startColumn).join(" "),i=n.split("\n"),c=i.length,d=i.map((e,t)=>0===t?e:`${s}${e}`),m=d.join("\n"),b=new r.Selection(l.startLineNumber,l.startColumn,l.startLineNumber+c-1,l.startColumn+d[d.length-1].length),v={range:o,text:m,forceMoveMarkers:!0};p.executeEdits(e,[v],[b]),p.focus()},[p,u]),v=n.useCallback((e="default",t="",a)=>{const n=u?u(e,t,a):t;p.setValue(n)},[p,u]),f=n.useCallback((e="default",t="",a)=>{try{const n=u?u(e,t,a):t;Object(o.a)(n)}catch(e){Object(o.a)(t)}},[u]);return n.createElement(l.a,{kindObj:t,samples:a,snippets:i,schema:s,sidebarLabel:c,loadSampleYaml:v,insertSnippetYaml:b,downloadSampleYaml:f,toggleSidebar:d})}},5684:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),r=a(8),l=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function o(e){try{i(n.next(e))}catch(e){l(e)}}function s(e){try{i(n.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}i((n=n.apply(e,t||[])).next())}))};const o=(e,t,a,o)=>{const[s,i]=n.useState(),[c,u]=n.useState(!1),[d,m]=n.useState();return n.useEffect(()=>{l(void 0,void 0,void 0,(function*(){try{m(null),u(!1),i(null);const n=yield Object(r.kb)(e,t,a,o);i(n)}catch(e){m(e)}finally{u(!0)}}))},[e,t,a,o]),[s,c,d]}},5962:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(1416),r=a(380);const l=e=>{const t=new Blob([e],{type:"text/yaml;charset=utf-8"});let a="k8s-object.yaml";try{const t=Object(r.safeLoad)(e);t.kind&&(a=`${t.kind.toLowerCase()}-${t.metadata.name}.yaml`)}catch(e){console.error("Could not parse YAML file:",e)}Object(n.saveAs)(t,a)}},6227:function(e,t,a){"use strict";var n=a(6584),r=a(6582),l=a(6581),o=a(6579),s=a(6580),i=a(6583);window.monaco.editor.defineTheme("console-light",{base:"vs",inherit:!0,colors:{"editor.background":o.global_BackgroundColor_light_100.value,"editorGutter.background":"#f5f5f5","editorLineNumber.activeForeground":s.global_Color_dark_100.value,"editorLineNumber.foreground":l.global_BackgroundColor_dark_200.value},rules:[{token:"number",foreground:"486b00"},{token:"type",foreground:"795600"},{token:"string",foreground:"004080"},{token:"keyword",foreground:"40199a"}]}),window.monaco.editor.defineTheme("console-dark",{base:"vs-dark",inherit:!0,colors:{"editor.background":r.global_BackgroundColor_dark_100.value,"editorGutter.background":"#292e34","editorLineNumber.activeForeground":i.global_Color_light_100.value,"editorLineNumber.foreground":n.global_BackgroundColor_200.value},rules:[{token:"number",foreground:"ace12e"},{token:"type",foreground:"73bcf7"},{token:"string",foreground:"f0ab00"},{token:"keyword",foreground:"cbc1ff"}]})},6437:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r})),function(e){e.OpenOLS="openOLS",e.CloseOLS="closeOLS"}(n||(n={}));const r=({plugins:e})=>{var t;return null===(t=null==e?void 0:e.ols)||void 0===t?void 0:t.get("codeBlock")}},6678:function(e,t,a){"use strict";var n=a(0),r=a(19),l=a(155),o=a(11423),s=a(7),i=a(31),c=a(42),u=a(6437),d=a(6679),m=a(2259),p=a(6680);a(6681);t.a=({showShortcuts:e,toolbarLinks:t})=>{const{t:a}=Object(s.useTranslation)(),b=Object(d.a)(),v=Object(i.useDispatch)();return e||(null==t?void 0:t.length)?n.createElement("div",{className:"co-toolbar__group co-toolbar__group--right"},n.createElement("div",{className:"ocs-yaml-editor-toolbar pf-v5-u-pb-sm pf-v5-l-flex"},b&&n.createElement("div",{className:"ocs-yaml-editor-toolbar__link pf-v5-l-flex"},n.createElement(r.a,{variant:"secondary",size:"sm",onClick:()=>{v(Object(c.action)(u.a.OpenOLS))},icon:n.createElement(o.a,null)},a("console-shared~Ask OpenShift Lightspeed")),n.createElement(l.a,{orientation:{default:"vertical"}})),n.createElement("div",{className:"ocs-yaml-editor-toolbar__link"},n.createElement("div",null,n.createElement("span",{className:"ocs-yaml-editor-shortcut__command"},n.createElement(m.a,null,m.c?"⌥ Opt":"Alt"),n.createElement(m.a,null,"F1")),n.createElement("span",{className:"ocs-yaml-editor-shortcut__text"},a("console-shared~Accessibility help")))),e&&n.createElement("div",{className:"ocs-yaml-editor-toolbar__link pf-v5-l-flex"},n.createElement(l.a,{orientation:{default:"vertical"}}),n.createElement(p.a,null)),t&&t.map((t,a)=>n.createElement("div",{key:""+a,className:"ocs-yaml-editor-toolbar__link pf-v5-l-flex"},(e||a>0)&&t?n.createElement(l.a,{orientation:{default:"vertical"}}):null,n.createElement("div",{className:"ocs-yaml-editor-toolbar__link"},t))))):null}},6679:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(5684);const r={apiGroup:"ols.openshift.io",apiVersion:"v1alpha1",label:"OLSConfig",labelKey:"console-shared~OLSConfig",labelPluralKey:"console-shared~OLSConfigs",plural:"olsconfigs",abbr:"OLSC",namespaced:!1,kind:"OLSConfig",id:"olsconfig",labelPlural:"OLSConfigs",crd:!0},l=()=>{const[,e,t]=Object(n.a)(r,"cluster");return e&&!t}},6680:function(e,t,a){"use strict";var n=a(0),r=a(353),l=a(19),o=a(979),s=a(7),i=a(2281),c=a(2259);t.a=({onHideShortcuts:e})=>{const{t:t}=Object(s.useTranslation)();return n.createElement(r.a,{"aria-label":t("console-shared~Shortcuts"),bodyContent:n.createElement(i.b,null,n.createElement(i.a,{alt:!0,keyName:"F1"},t("console-shared~Accessibility help")),n.createElement(i.a,{keyName:"F1"},t("console-shared~View all editor shortcuts")),n.createElement(i.a,{ctrl:!0,keyName:"space"},t("console-shared~Activate auto complete")),n.createElement(i.a,{ctrl:!0,shift:c.c,keyName:"m"},t("console-shared~Toggle Tab action between insert Tab character and move focus out of editor")),n.createElement(i.a,{ctrlCmd:!0,shift:!0,keyName:"o"},t("console-shared~View document outline")),n.createElement(i.a,{hover:!0},t("console-shared~View property descriptions")),n.createElement(i.a,{ctrlCmd:!0,keyName:"s"},t("console-shared~Save"))),maxWidth:"25rem",distance:18,onHide:e},n.createElement(l.a,{type:"button",variant:"link",isInline:!0},n.createElement(o.a,{className:"co-icon-space-r co-p-has-sidebar__sidebar-link-icon"}),t("console-shared~View shortcuts")))}},6681:function(e,t,a){},6691:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(0),r=a(16),l=a(384),o=a(50),s=a(4440),i=a(225),c=a(22),u=a(868),d=a(435),m=a(19),p=a(563),b=a(7),v=a(13),f=a(8),g=a(5);const h=e=>{var t;const[a,h]=n.useState([]),{kindObj:E,schema:y}=e,{t:k}=Object(b.useTranslation)(),[O,j]=n.useState(null);if(n.useEffect(()=>{E?Object(f.s)().then(e=>{j(e)}).catch(e=>{console.error("Could not fetch swagger definitions",e)}):y&&j({"custom-schema":y})},[E,y]),!E&&!y)return null;if(!O)return null;const S=l.a(a),C=S?S.path:[E?Object(f.D)(E,O):"custom-schema"],w=r.a(O,C),N=(null==w?void 0:w.properties)||(null===(t=null==w?void 0:w.items)||void 0===t?void 0:t.properties)||(null==w?void 0:w.definitions),_=S?null==S?void 0:S.description:null==w?void 0:w.description,L=new Set((null==w?void 0:w.required)||[]),M=(null==E?void 0:E.labelKey)?k(E.labelKey):null==E?void 0:E.kind,Y=a.length?[E?M:k("public~Schema"),...o.a(a,"name")]:[];return n.createElement(n.Fragment,null,!c.a(Y)&&n.createElement(u.a,{className:"co-breadcrumb co-break-word"},Y.map((e,t)=>{const r=t===Y.length-1;return n.createElement(d.a,{key:t,isActive:r},r?e:n.createElement(m.a,{type:"button",onClick:e=>((e,t)=>{e.preventDefault(),h(s.a(a,t))})(e,t),isInline:!0,variant:"link"},e))})),n.createElement(p.a,null,_&&n.createElement("p",{className:"co-break-word co-pre-wrap"},n.createElement(g.N,null,_)),c.a(N)?n.createElement(g.u,{label:k("public~Properties")}):n.createElement("ul",{className:"co-resource-sidebar-list pf-v5-c-list"},o.a(N,(t,l)=>{const o=(e=>{const t=E?w.items?Object(f.Z)(O,[...C,"items"],e,!0):Object(f.Z)(O,C,e,!0):[...C,"properties",e],a=r.a(O,t);return i.a(a,"properties")||i.a(a,"items.properties")?t:null})(l),s=t.type||(e=>r.a(O,[e,"format"])||r.a(O,[e,"type"]))((e=>{const t=e.$ref||r.a(e,"items.$ref"),a=/^#\/definitions\//;return t&&a.test(t)?t.replace(a,""):null})(t)),c=Array.isArray(s)?s.join(" "):s;return n.createElement("li",{key:l,className:"co-resource-sidebar-item"},n.createElement("h5",{className:"co-resource-sidebar-item__header co-break-word"},n.createElement(v.e,{value:l})," ",n.createElement("small",null,n.createElement("span",{className:"co-break-word"},c),L.has(l)&&n.createElement(n.Fragment,null," – required"))),t.description&&n.createElement("p",{className:"co-break-word co-pre-wrap"},n.createElement(g.N,null,t.description)),o&&n.createElement(m.a,{type:"button",onClick:n=>((t,n,r,l)=>{t.preventDefault(),h([...a,{name:n,description:r,path:l}]),e.scrollTop&&e.scrollTop()})(n,l,t.description,o),isInline:!0,variant:"link"},k("public~View details")))}))))}},6863:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return v}));var n=a(6700),r=a(6864),l=a(8360),o=a(8363),s=a(8365),i=a(7542),c=a(2277);const u={readOnly:!1,scrollBeyondLastLine:!1},d=r.Uri.parse("inmemory://model.yaml"),m=e=>s.TextDocument.create("inmemory://model.yaml",null==e?void 0:e.getModeId(),null==e?void 0:e.getVersionId(),null==e?void 0:e.getValue()),p=(e,t,a)=>{const n=(e=>{const t=m(e),a=o.safeLoad(t.getText()),n=(null==a?void 0:a.mappings)||[];for(const e of n){const a=e.key,n=e.value;if("metadata"===a.value){const e=n.mappings||[];for(const a of e){if("managedFields"===a.key.value){return{start:t.positionAt(a.startPosition).line+1,end:t.positionAt(a.endPosition).line}}}}}return{start:-1,end:-1}})(t),{start:l}=n,{end:s}=n;if(l>=0&&s>=0){const t=e.getScrollTop();e.setSelection(new r.Range(l,0,s,0)),e.getAction("editor.fold").run().then(()=>{a&&e.setSelection(new r.Range(0,0,0,0)),e.setScrollTop(Math.abs(t))}).catch(()=>{})}},b=(e,t,a,n,r,l=!1)=>{var o;const s=new Map,i=()=>{var e;return null===(e=t.editor)||void 0===e?void 0:e.getModels()[0]},c=e=>{0!==e.getText().length?r.doValidation(e,!0).then(e=>{const n=a.asDiagnostics(e);t.editor.setModelMarkers(i(),"default",n)}).catch(()=>{}):t.editor.setModelMarkers(t.editor.getModel(n),"default",[])};let u=!1;const d=()=>{const t=m(i());u||""===t.getText()||(setTimeout(()=>p(e,i(),!0)),u=!0)};l&&d(),null===(o=i())||void 0===o||o.onDidChangeContent(()=>{d();const e=m(i());(e=>{const t=s.get(e.uri);void 0!==t&&(clearTimeout(t),s.delete(e.uri))})(e),s.set(e.uri,setTimeout(()=>{s.delete(e.uri),c(e)}))})},v=(e,t,a=!1)=>{const r=new l.MonacoToProtocolConverter,o=new l.ProtocolToMonacoConverter,u=(()=>{const e={resolveRelativePath:(e,t)=>n.resolve(t,e)},t=Object(s.getLanguageService)(e=>new Promise((t,a)=>{const n=new XMLHttpRequest;n.onload=()=>t(n.responseText),n.onerror=()=>a(n.statusText),n.open("GET",e,!0),n.send()}),e),a=Object(c.f)(),r=[{uri:"inmemory:yaml",fileMatch:["*"],schema:Object(i.a)(a)}];return t.configure({validate:!0,schemas:r,hover:!0,completion:!0}),t})();b(e,t,o,d,u,a),t.languages.getLanguages().filter(e=>"yaml"===e.id).length>1||((e=>{e.languages.register({id:"yaml",extensions:[".yml",".yaml"],aliases:["YAML","yaml"],mimetypes:["application/yaml"]})})(t),((e,t,a,n,r)=>{t.languages.registerCompletionItemProvider(e,{provideCompletionItems(e,t){const l=m(e);return r.doComplete(l,a.asPosition(t.lineNumber,t.column),!0).then(e=>n.asCompletionResult(e))}})})("yaml",t,r,o,u),((e,t,a,n)=>{t.languages.registerDocumentSymbolProvider(e,{provideDocumentSymbols(e){const t=m(e);return a.asSymbolInformations(n.findDocumentSymbols(t))}})})("yaml",t,o,u),((e,t,a,n,r)=>{t.languages.registerHoverProvider(e,{provideHover(e,t){const l=m(e);return r.doHover(l,a.asPosition(t.lineNumber,t.column),!0).then(e=>n.asHover(e)).then(e=>{for(const e of document.getElementsByClassName("monaco-editor-hover"))e.onclick=e=>e.preventDefault(),e.onauxclick=e=>{window.open(e.target.getAttribute("data-href"),"_blank").opener=null,e.preventDefault()};return e})}})})("yaml",t,r,o,u))}},7542:function(e,t,a){"use strict";function n(e){const t=[],a=[];for(const n of e)n.group&&n.version?t.push(`${n.group}/${n.version}`):n.version&&t.push(n.version),n.kind&&a.push(n.kind);return{versionEnum:t,kindEnum:a}}function r(e,t){e.apiVersion?e.apiVersion.enum?e.apiVersion.enum.push(...t):e.apiVersion.enum=t:e.apiVersion={enum:t}}function l(e,t){e.kind?e.kind.enum?e.kind.enum.push(...t):e.kind.enum=t:e.kind={enum:t}}function o(e){if(!e)return null;const t=function(e){for(const t in e)if(e.hasOwnProperty(t)){const a=e[t],o=a["x-kubernetes-group-version-kind"];if(o&&a.properties){const e=n(o);r(a.properties,e.versionEnum),l(a.properties,e.kindEnum)}}return e}(e),a=[],o={};for(const e in t)t.hasOwnProperty(e)&&(o[e]=t[e],a.push({$ref:"#/definitions/"+e}));return{definitions:Object.assign({},o),oneOf:a}}a.d(t,"a",(function(){return o}))},7543:function(e,t,a){},7544:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(22),r=a(0),l=a(7),o=a(997),s=a(8),i=a(7545),c=a(6691),u=a(5);const d=()=>{document.getElementsByClassName("co-p-has-sidebar__sidebar")[0].scrollTop=0},m=e=>{const{t:t}=Object(l.useTranslation)(),{label:a,children:n,toggleSidebar:s}=e;return r.createElement("div",{className:"co-p-has-sidebar__sidebar co-p-has-sidebar__sidebar--bordered hidden-sm hidden-xs","data-test":"resource-sidebar"},r.createElement("div",{className:"co-m-pane__body co-p-has-sidebar__sidebar-body"},r.createElement(o.a,{additionalClassName:"co-p-has-sidebar__close-button",ariaLabel:t("public~Close"),onClick:s}),r.createElement("h2",{className:"co-p-has-sidebar__sidebar-heading text-capitalize"},a),n))},p=({kindObj:e,schema:t})=>r.createElement(c.a,{kindObj:e,schema:t,scrollTop:d}),b=({samples:e,kindObj:t,downloadSampleYaml:a,loadSampleYaml:n})=>r.createElement(i.a,{samples:e,kindObj:t,downloadSampleYaml:a,loadSampleYaml:n}),v=({snippets:e,insertSnippetYaml:t})=>r.createElement(i.b,{snippets:e,insertSnippetYaml:t}),f=e=>{const{t:t}=Object(l.useTranslation)(),{downloadSampleYaml:a,kindObj:o,schema:i,sidebarLabel:c,loadSampleYaml:d,insertSnippetYaml:f,toggleSidebar:g,samples:h,snippets:E}=e;if(!o&&!i)return null;const y=(null==o?void 0:o.labelKey)?t(o.labelKey):null==o?void 0:o.label,k=c||y,O=!n.a(h),j=!n.a(E),S=o?Object(s.r)(o):{properties:[]},C=i||S&&!n.a(S.properties);let w=[];return O&&w.push({name:t("public~Samples"),component:b}),j&&w.push({name:t("public~Snippets"),component:v}),C&&(w=[{name:t("public~Schema"),component:p},...w]),r.createElement(m,{label:k,toggleSidebar:g},w.length>0?r.createElement(u.vb,{tabs:w,tabProps:{downloadSampleYaml:a,kindObj:o,schema:i,loadSampleYaml:d,insertSnippetYaml:f,samples:h,snippets:E},additionalClassNames:"co-m-horizontal-nav__menu--within-sidebar"}):r.createElement(p,{schema:i,kindObj:o}))}},7545:function(e,t,a){"use strict";a.d(t,"b",(function(){return k})),a.d(t,"a",(function(){return O}));var n=a(50),r=a(461),l=a(0),o=a(11353),s=a(11354),i=a(19),c=a(6411),u=a(1205),d=a(8375),m=a(8376),p=a(1228),b=a(2339),v=a(7),f=a(8),g=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function o(e){try{i(n.next(e))}catch(e){l(e)}}function s(e){try{i(n.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}i((n=n.apply(e,t||[])).next())}))};const h=({sample:e,loadSampleYaml:t,downloadSampleYaml:a})=>{const{highlightText:n,title:r,img:c,description:u,id:d,yaml:m,targetResource:g}=e,h=Object(f.Db)(g),{t:E}=Object(v.useTranslation)();return l.createElement("li",{className:"co-resource-sidebar-item"},l.createElement("h3",{className:"h4"},l.createElement("span",{className:"text-uppercase"},n)," ",r),c&&l.createElement("img",{src:c,className:"co-resource-sidebar-item__img img-responsive"}),l.createElement("p",null,u),l.createElement(o.a,null,l.createElement(s.a,null,l.createElement(i.a,{type:"button",variant:"link","data-test":"load-sample",isInline:!0,onClick:()=>t(d,m,h)},l.createElement(b.a,{className:"co-icon-space-r"}),E("public~Try it"))),l.createElement(s.a,null,l.createElement(i.a,{type:"button",variant:"link","data-test":"download-sample",isInline:!0,onClick:()=>a(d,m,h)},l.createElement(p.a,{className:"co-icon-space-r"}),E("public~Download YAML")))))},E=({maxPreviewLines:e=20,yaml:t})=>{const a=l.useContext(u.a);return l.createElement("div",{style:{paddingTop:10}},l.createElement(c.a,{height:18*Math.min(t.split("\n").length,e),language:"yaml",value:t,theme:"light"===a?"console-light":"console-dark",options:{lineHeight:18,readOnly:!0,folding:!1,minimap:{enabled:!1},scrollBeyondLastLine:!1}}))},y=({snippet:e,insertSnippetYaml:t})=>{const{highlightText:a,title:n,id:r,yaml:c,lazyYaml:u,targetResource:p,description:h}=e,[y,k]=l.useState(c),[O,j]=l.useState(!1),S=e=>g(void 0,void 0,void 0,(function*(){if(c)e(c);else if(u)try{e(yield u())}catch(e){console.warn(`Error while running lazy yaml snippet ${r} (${n})`,e)}})),{t:C}=Object(v.useTranslation)();return l.createElement("li",{className:"co-resource-sidebar-item"},l.createElement("h3",{className:"h4"},l.createElement("span",{className:"text-uppercase"},a)," ",n),l.createElement("p",null,h),l.createElement(o.a,null,l.createElement(s.a,null,l.createElement(i.a,{type:"button",variant:"link",isInline:!0,onClick:()=>{const e=Object(f.Db)(p);S(a=>t(r,a,e))}},l.createElement(b.a,{className:"co-icon-space-r"}),C("public~Insert snippet"))),l.createElement(s.a,null,l.createElement(i.a,{type:"button",variant:"link",isInline:!0,onClick:()=>{j(e=>!e),y||O||S(e=>k(e))}},O?l.createElement(l.Fragment,null,C("public~Hide YAML"),l.createElement(d.a,{className:"co-icon-space-l"})):l.createElement(l.Fragment,null,C("public~Show YAML"),l.createElement(m.a,{className:"co-icon-space-l"}))))),O&&y&&l.createElement(E,{yaml:y}))},k=({snippets:e,insertSnippetYaml:t})=>l.createElement("ul",{className:"co-resource-sidebar-list",style:{listStyle:"none",paddingLeft:0}},n.a(r.a(e,"title"),e=>l.createElement(y,{key:e.id,snippet:e,insertSnippetYaml:t}))),O=({samples:e,loadSampleYaml:t,downloadSampleYaml:a})=>l.createElement("ol",{className:"co-resource-sidebar-list","data-test":"resource-samples-list"},n.a(r.a(e,"title"),e=>l.createElement(h,{key:e.id,sample:e,loadSampleYaml:t,downloadSampleYaml:a})))}}]);
//# sourceMappingURL=29-chunk-4a8283978f0e769f1036.min.js.map
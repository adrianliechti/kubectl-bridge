(window.webpackJsonp=window.webpackJsonp||[]).push([[215,120],{11778:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=(e,t,a)=>{if(e===t)return!0;if(!e||!t)return!1;const n=!e.uid||!t.uid||(a||e.uid===t.uid),l=a||e.name===t.name;return e.apiVersion===t.apiVersion&&e.kind===t.kind&&l&&n}},11779:function(e,t,a){"use strict";var n=a(0),l=a(54),i=a(7),s=a(40),r=a(5),c=a(8),o=a(15),d=a(206),u=a(346),m=a(2260),b=a(177),p=a(1944),O=a(8384),h=a(11780),E=a(7558),g=a(8385),f=a(8391);const j={name:"",status:"pf-m-hidden pf-m-visible-on-sm",node:"pf-m-hidden pf-m-visible-on-md",role:"pf-m-hidden pf-m-visible-on-lg",address:"pf-m-hidden pf-m-visible-on-lg",serialNumber:"pf-m-hidden pf-m-visible-on-lg",kebab:r.F.columnClass},v=e=>()=>[{title:e("metal3-plugin~Name"),sortField:"host.metadata.name",transforms:[l.a],props:{className:j.name}},{title:e("metal3-plugin~Status"),sortField:"status.status",transforms:[l.a],props:{className:j.status}},{title:e("metal3-plugin~Node"),sortField:"node.metadata.name",transforms:[l.a],props:{className:j.node}},{title:e("metal3-plugin~Role"),sortField:'machine.metadata.labels["machine.openshift.io/cluster-api-machine-role"]',transforms:[l.a],props:{className:j.role}},{title:e("metal3-plugin~Management Address"),sortField:"host.spec.bmc.address",transforms:[l.a],props:{className:j.address}},{title:e("metal3-plugin~Serial Number"),sortField:"host.status.hardware.systemVendor.serialNumber",transforms:[l.a],props:{className:j.serialNumber}},{title:"",props:{className:j.kebab}}],_=({obj:{host:e,node:t,nodeMaintenance:a,machine:l,machineSet:v,status:_}})=>{const{t:M}=Object(i.useTranslation)(),[T]=Object(m.a)(),y=Object(d.a)(u.BMO_ENABLED_FLAG),N=Object(o.dd)(e),k=Object(o.ed)(e),R=Object(p.b)(e),w=Object(o.Jd)(e),S=Object(o.dd)(t),{serialNumber:A}=Object(p.s)(e);return n.createElement(n.Fragment,null,n.createElement(s.k,{className:j.name},n.createElement(r.hb,{kind:Object(c.Hb)(b.a),name:N,namespace:k})),n.createElement(s.k,{className:j.status},n.createElement(E.a,Object.assign({},_,{nodeMaintenance:a,host:e})),n.createElement(h.a,{host:e})),n.createElement(s.k,{className:j.node},n.createElement(f.a,{nodeName:S})),n.createElement(s.k,{className:j.role},n.createElement(O.a,{machine:l,node:t})),n.createElement(s.k,{className:j.address},R||o.E),n.createElement(s.k,{className:j.serialNumber},A||o.E),n.createElement(s.k,{className:j.kebab},n.createElement(r.F,{options:g.a.map(t=>t(b.a,e,{nodeMaintenance:a,nodeName:S,hasNodeMaintenanceCapability:!!T,machine:l,machineSet:v,status:_,bmoEnabled:y,maintenanceModel:T,t:M})),key:"kebab-for-"+w,id:"kebab-for-"+w})))};t.a=e=>{const{t:t}=Object(i.useTranslation)();return n.createElement(s.j,Object.assign({},e,{defaultSortField:"host.metadata.name","aria-label":t("metal3-plugin~Bare Metal Hosts"),Header:v(t),Row:_,virtualize:!0}))}},11780:function(e,t,a){"use strict";var n=a(0),l=a(7),i=a(15),s=a(696),r=a(1944);t.a=({host:e})=>{const{t:t}=Object(l.useTranslation)(),a=Object(r.n)(e),c=Object(r.o)(e),o=[];return Object(r.B)(e)?s.j.includes(c)||(Object(r.E)(e)&&o.push(t("metal3-plugin~Restart pending")),a!==s.e&&o.push(a)):o.push(t("metal3-plugin~No power management")),n.createElement(i.Wb,{status:o})}},11781:function(e,t,a){"use strict";var n=a(0),l=a(874),i=a(2955),s=a(13),r=a(1944),c=a(11782),o=a(11785);t.a=({title:e,nodeMaintenance:t,className:a,children:d})=>{const u=Object(r.x)(t);return n.createElement(s.q,{title:e,statusBody:n.createElement(s.A,{title:e,icon:"Succeeded"===u?n.createElement(i.a,null):n.createElement(l.a,null),className:a})},"Succeeded"===u?n.createElement(o.a,{nodeMaintenance:t}):n.createElement(c.a,{nodeMaintenance:t}),d)}},11782:function(e,t,a){"use strict";var n=a(0),l=a(80),i=a(4357),s=a(1921),r=a(19),c=a(7),o=a(5),d=a(1944),u=a(6609),m=a(11783);t.a=({nodeMaintenance:e})=>{const{t:t}=Object(c.useTranslation)(),a=Object(d.z)(e),b=Object(d.t)(e),p=Object(d.u)(e),O=Object(d.w)(e);return n.createElement(n.Fragment,null,n.createElement("p",null,t("metal3-plugin~Node is entering maintenance. The cluster will automatically rebuild node's data 30 minutes after entering maintenance.")),n.createElement("dl",null,n.createElement("dt",null,t("metal3-plugin~Maintenance reason:")),n.createElement("dd",null,a),n.createElement("dt",null,t("metal3-plugin~Requested:")),n.createElement("dd",null,n.createElement(o.xb,{timestamp:b}))),n.createElement("br",null),p&&n.createElement(n.Fragment,null,n.createElement(l.a,{variant:"warning",title:t("metal3-plugin~Workloads failing to move"),isInline:!0},p),n.createElement("br",null)),n.createElement(i.a,{value:Object(d.y)(e),title:t("metal3-plugin~Moving workloads"),size:i.b.sm}),n.createElement("br",null),n.createElement(s.a,{toggleText:t("metal3-plugin~Show remaining workloads ({{listLength}})",{listLength:O.length})},n.createElement(m.a,{pods:O})),n.createElement("br",null),n.createElement(r.a,{variant:"link",onClick:()=>Object(u.a)(e,t),isInline:!0},t("metal3-plugin~Stop")))}},11783:function(e,t,a){"use strict";var n=a(0),l=a(212),i=a(5),s=a(10),r=a(8);a(11784);const c=e=>({key:t,index:a,style:l})=>{const c=e[a];return n.createElement("div",{key:t,style:l,className:"maintenance-popover-pod-list__list-item"},n.createElement(i.hb,{kind:Object(r.Hb)(s.PodModel),name:c,title:c}))};t.a=({pods:e})=>n.createElement(l.a,{disableHeight:!0},({width:t})=>n.createElement(l.e,{width:t,height:e.length<6?30*e.length:150,rowCount:e.length,rowHeight:30,rowRenderer:c(e)}))},11784:function(e,t,a){},11785:function(e,t,a){"use strict";var n=a(0),l=a(19),i=a(7),s=a(5),r=a(1944),c=a(6609);t.a=({nodeMaintenance:e})=>{const{t:t}=Object(i.useTranslation)(),a=Object(r.z)(e),o=Object(r.t)(e);return n.createElement(n.Fragment,null,n.createElement("p",null,t("metal3-plugin~Node is under maintenance. The cluster will automatically rebuild node's data 30 minutes after entering maintenance.")),n.createElement("dl",null,n.createElement("dt",null,t("metal3-plugin~Maintenance reason:")),n.createElement("dd",null,a),n.createElement("dt",null,t("metal3-plugin~Requested:")),n.createElement("dd",null,n.createElement(s.xb,{timestamp:o}))),n.createElement("br",null),n.createElement(l.a,{variant:"link",onClick:()=>Object(c.a)(e,t),isInline:!0},t("metal3-plugin~Stop maintenance")))}},11786:function(e,t,a){},11787:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return r}));var n=a(10),l=a(177);const i=e=>e+"-bmc-secret",s=(e,t,a,l)=>({apiVersion:n.SecretModel.apiVersion,kind:n.SecretModel.kind,metadata:{namespace:t,name:i(e)},data:{username:btoa(a),password:btoa(l)},type:"Opaque"}),r=(e,t,a,n,s=!1,r=!0,c="",o,d)=>{const u={apiVersion:`${l.a.apiGroup}/${l.a.apiVersion}`,kind:l.a.kind,metadata:{name:e,namespace:t},spec:{bootMACAddress:n,description:c,online:r}};return d&&(u.spec.bootMode=d),o&&(u.spec.bmc={address:a,credentialsName:i(e),disableCertificateVerification:s}),u}},11788:function(e,t,a){"use strict";a.d(t,"c",(function(){return p})),a.d(t,"b",(function(){return O})),a.d(t,"a",(function(){return E}));var n=a(0),l=a(1921),i=a(967),s=a(406),r=a(80),c=a(367),o=a(7),d=a(5),u=a(10),m=a(15),b=a(696);const p=e=>((null==e?void 0:e.filter(e=>{var t;return!!((null===(t=e.metadata)||void 0===t?void 0:t.annotations)||{})["kubernetes.io/config.mirror"]}))||[]).map(e=>({name:Object(m.dd)(e),namespace:Object(m.ed)(e),kind:u.PodModel.kind})),O=e=>{if(!e)return[];const t={};e.forEach(e=>{var a,n;((null===(n=null===(a=e.metadata)||void 0===a?void 0:a.ownerReferences)||void 0===n?void 0:n.filter(e=>e.kind===u.DaemonSetModel.kind))||[]).forEach(a=>{t[Object(m.ed)(e)]=t[Object(m.ed)(e)]||[],t[Object(m.ed)(e)].push(a.name)})});return c.a(Object.getOwnPropertyNames(t).map(e=>t[e].map(t=>({name:t,namespace:e,kind:u.DaemonSetModel.kind}))))},h=({resources:e,onLinkClicked:t,subject:a})=>{const[i,s]=n.useState(!1),r=n.useCallback(()=>s(!i),[i,s]),c=n.useCallback(e=>{t&&(!e.key||"Enter"===e.key)&&t()},[t]);if(!e||0===e.length)return null;const o=`${i?"Hide":"Show"} ${a} (${e.length})`;return n.createElement(l.a,{onToggle:r,isExpanded:i,toggleText:o},e.sort((e,t)=>e.name.localeCompare(t.name)).map(e=>n.createElement("div",{onClick:c,onKeyPress:c,key:`${e.name}-${e.namespace}`,role:"link",tabIndex:0},n.createElement(d.hb,{kind:e.kind,name:e.name,namespace:e.namespace}))))},E=({status:e,nodePods:t,loadError:a,onLinkClicked:l})=>{const{t:c}=Object(o.useTranslation)(),d=[],[u,m]=n.useMemo(()=>[O(t),p(t)],[t]);return a&&d.push({title:c("metal3-plugin~Failed to load data."),description:c("metal3-plugin~Failed to load subresources."),level:"danger"}),[b.s,...b.n].includes(e)&&d.push({title:c("metal3-plugin~The bare metal host is not healthy."),description:c("metal3-plugin~The host cannot be powered off gracefully untils its health is restored."),level:"warning"}),e===b.v&&d.push({title:c("metal3-plugin~The node is starting maintenance."),description:c("metal3-plugin~The node cannot be powered off gracefully until it finishes entering maintenance."),level:"info"}),e===b.w&&d.push({title:c("metal3-plugin~The node is stopping maintenance."),description:c("metal3-plugin~The node cannot be powered off gracefully while it is exiting maintenance."),level:"info"}),u.length>0&&d.push({title:c("metal3-plugin~This node contains DaemonSet pods."),description:c("metal3-plugin~These DaemonSets will prevent some pods from being moved. This should not prevent the host from powering off gracefully."),level:"info",detail:n.createElement(h,{subject:"daemon sets",resources:u,onLinkClicked:l})}),m.length>0&&d.push({title:c("metal3-plugin~This host contains unmanaged static pods."),description:c("metal3-plugin~These pods must be moved manually to continue running after the host powers off."),level:"warning",detail:n.createElement(h,{subject:"unmanaged pods",resources:m,onLinkClicked:l})}),n.createElement(i.a,{hasGutter:!0},d.map(e=>n.createElement(s.a,{key:e.title},n.createElement(r.a,{variant:e.level,isInline:!0,title:e.title},e.description,e.detail))))}},11789:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(0),l=a(7),i=a(40),s=a(5),r=a(6878),c=a(8390),o=function(e,t,a,n){return new(a||(a=Promise))((function(l,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function r(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,r)}c((n=n.apply(e,t||[])).next())}))};const d=Object(i.m)(Object(s.Oc)(({host:e,inProgress:t,errorMessage:a,handlePromise:s,close:d,cancel:u})=>{const{t:m}=Object(l.useTranslation)(),b=n.useCallback(t=>o(void 0,void 0,void 0,(function*(){t.preventDefault();const a=Object(r.d)(e);return yield s(a),d()})),[e,d,s]);return n.createElement("form",{onSubmit:b,name:"form",className:"modal-content"},n.createElement(i.h,null,m("metal3-plugin~Restart Bare Metal Host")),n.createElement(i.e,null,n.createElement("p",null,m("metal3-plugin~The host will be powered off and on again.")),n.createElement(c.a,{restart:!0})),n.createElement(i.g,{cancel:u,errorMessage:a,inProgress:t,submitDisabled:!1,submitText:m("metal3-plugin~Restart")}))}))},11790:function(e,t,a){"use strict";var n=a(0),l=a(8394),i=a(116),s=a(16),r=a(7),c=a(13),o=a(5),d=a(10),u=a(8),m=a(15),b=a(2359),p=a(1944),O=a(6443),h=a(8393),E=a(7558),g=a(11793);t.a=({obj:e,machines:t,nodes:a,nodeMaintenances:f})=>{const{t:j}=Object(r.useTranslation)(),{creationTimestamp:v}=e.metadata,_=Object(m.ed)(e),M=Object(p.l)(e).map(e=>e.ip).join(", "),T=Object(p.k)(e),y=Object(p.j)(e,t),N=Object(m.Wc)(y),k=Object(m.Vc)(y,a),R=Object(m.Zc)(y),w=Object(p.p)(e),S=w?Object(o.Zb)(w*2**20).string:m.E,A=Object(p.r)(e),P=A?Object(o.Zb)(A).string:m.E,I=Object(p.f)(e),C=Object(p.n)(e),B=Object(p.o)(e),{count:F,model:L}=Object(p.e)(e),{manufacturer:D,productName:x,serialNumber:U}=Object(p.s)(e),Y=Object(p.c)(e),z=Object(p.a)(f,N),G=Object(O.b)({host:e,machine:y,node:k,nodeMaintenance:z});return n.createElement("div",{className:"co-m-pane__body"},n.createElement(o.ob,{text:j("metal3-plugin~Bare Metal Host Details")}),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-xs-12 col-sm-6",id:"name-description-column"},n.createElement("dl",null,n.createElement("dt",null,j("metal3-plugin~Name")),n.createElement("dd",null,Object(m.dd)(e)),I&&n.createElement(n.Fragment,null,n.createElement("dt",null,j("metal3-plugin~Description")),n.createElement("dd",null,I)),n.createElement("dt",null,j("metal3-plugin~Host Addresses")),n.createElement("dd",null,n.createElement(m.F,null,n.createElement(m.G,{title:"Management"},Object(p.b)(e)||m.E),n.createElement(m.G,{title:"NICs"},M),n.createElement(m.G,{title:"Boot Interface MAC"},Object(p.d)(e)))),T&&n.createElement(n.Fragment,null,n.createElement("dt",null,j("metal3-plugin~Machine")),n.createElement("dd",null,n.createElement(g.a,{host:e}))),N&&n.createElement(n.Fragment,null,n.createElement("dt",null,j("metal3-plugin~Node")),n.createElement("dd",null,n.createElement(o.hb,{kind:Object(u.Hb)(d.NodeModel),name:N,namespace:_,title:N}))),n.createElement("dt",null,j("metal3-plugin~Created at")),n.createElement("dd",null,n.createElement(o.xb,{timestamp:v})))),n.createElement("div",{className:"col-xs-12 col-sm-6"},n.createElement("dl",null,n.createElement("dt",null,j("metal3-plugin~Status")),n.createElement("dd",null,n.createElement(E.a,Object.assign({},G,{nodeMaintenance:z,host:e}))),!b.j.includes(B)&&n.createElement(n.Fragment,null,n.createElement("dt",null,j("metal3-plugin~Power Status")),n.createElement("dd",null,Object(p.B)(e)?n.createElement(n.Fragment,null,n.createElement(c.A,{title:C,icon:n.createElement(h.a,{powerStatus:C})}),Object(p.E)(e)&&n.createElement(c.A,{title:j("metal3-plugin~Restart pending"),icon:n.createElement(l.a,null)})):n.createElement(m.Wb,{status:j("metal3-plugin~No power management")}))),R&&n.createElement(n.Fragment,null,n.createElement("dt",null,j("metal3-plugin~Role")),n.createElement("dd",null,R)),(D||x)&&n.createElement(n.Fragment,null,n.createElement("dt",null,j("metal3-plugin~Model")),n.createElement("dd",null,i.a([D,x]).join(", "))),Y&&n.createElement(n.Fragment,null,n.createElement("dt",null,j("metal3-plugin~Bios")),n.createElement("dd",null,n.createElement(m.F,null,n.createElement(m.G,{title:"Version"},Y.version||m.E),n.createElement(m.G,{title:"Vendor"},Y.vendor||m.E),n.createElement(m.G,{title:"Date"},Y.date||m.E)))),U&&n.createElement(n.Fragment,null,n.createElement("dt",null,j("metal3-plugin~Serial Number")),n.createElement("dd",null,U)),s.a(e,"status.hardware")&&n.createElement(n.Fragment,null,n.createElement("dt",null,j("metal3-plugin~Hardware")),n.createElement("dd",null,n.createElement(m.F,null,n.createElement(m.G,{title:j("metal3-plugin~CPU")},F?`${F}x ${L}`:m.E),n.createElement(m.G,{title:j("metal3-plugin~RAM")},S),n.createElement(m.G,{title:j("metal3-plugin~Storage")},P))))))))}},11793:function(e,t,a){"use strict";var n=a(0),l=a(5),i=a(10),s=a(8),r=a(15),c=a(1944);t.a=({host:e})=>{const t=Object(c.k)(e),a=Object(r.ed)(e);return t?n.createElement(l.hb,{kind:Object(s.Hb)(i.MachineModel),name:t,namespace:a,title:t}):n.createElement(n.Fragment,null,r.E)}},11794:function(e,t,a){"use strict";var n=a(0),l=a(54),i=a(7),s=a(40),r=a(5),c=a(1944);const o=e=>()=>[{title:e("metal3-plugin~Name"),sortField:"name",transforms:[l.a]},{title:e("metal3-plugin~Size"),sortField:"sizeBytes",transforms:[l.a]},{title:e("metal3-plugin~Type"),sortField:"rotational",transforms:[l.a]},{title:e("metal3-plugin~Model"),sortField:"model",transforms:[l.a]},{title:e("metal3-plugin~Serial Number"),sortField:"serialNumber",transforms:[l.a]},{title:e("metal3-plugin~Vendor"),sortField:"vendor",transforms:[l.a]},{title:e("metal3-plugin~HCTL"),sortField:"hctl",transforms:[l.a]}],d=e=>({id:e.name}),u=({obj:e})=>{const{hctl:t,model:a,name:l,rotational:i,serialNumber:c,sizeBytes:o,vendor:d}=e,{string:u}=Object(r.Zb)(o);return n.createElement(n.Fragment,null,n.createElement(s.k,null,l),n.createElement(s.k,null,u),n.createElement(s.k,null,i?"Rotational":"SSD"),n.createElement(s.k,null,a),n.createElement(s.k,null,c),n.createElement(s.k,null,d),n.createElement(s.k,null,t))};t.a=({obj:e,loadError:t,loaded:a})=>{const{t:l}=Object(i.useTranslation)(),r=Object(c.q)(e);return n.createElement("div",{className:"co-m-list"},n.createElement("div",{className:"co-m-pane__body"},n.createElement(s.j,{data:r,"aria-label":"Bare Metal Host Disks",Header:o(l),Row:u,loaded:a,loadError:t||(a&&!e?{message:l("metal3-plugin~Bare metal host is not available")}:void 0),getRowProps:d})))}},11795:function(e,t,a){"use strict";var n=a(0),l=a(11796),i=a(11797),s=a(54),r=a(7),c=a(40),o=a(1944);const d=e=>()=>[{title:e("metal3-plugin~Name"),sortField:"name",transforms:[s.a]},{title:e("metal3-plugin~Model"),sortField:"model",transforms:[s.a]},{title:e("metal3-plugin~PXE"),sortField:"pxe",transforms:[s.a]},{title:e("metal3-plugin~IP"),sortField:"ip",transforms:[s.a]},{title:e("metal3-plugin~Speed"),sortField:"speedGbps",transforms:[s.a]},{title:e("metal3-plugin~MAC Address"),sortField:"mac",transforms:[s.a]},{title:e("metal3-plugin~VLAN ID"),sortField:"vlanId",transforms:[s.a]}],u=e=>({id:e.ip}),m=({obj:e})=>{const{ip:t,mac:a,model:s,name:r,pxe:o,speedGbps:d,vlanId:u}=e;return n.createElement(n.Fragment,null,n.createElement(c.k,null,r),n.createElement(c.k,null,s),n.createElement(c.k,null,o?n.createElement(l.a,null):n.createElement(i.a,null)),n.createElement(c.k,null,t),n.createElement(c.k,null,d," Gbps"),n.createElement(c.k,null,a),n.createElement(c.k,null,u))};t.a=({obj:e,loadError:t,loaded:a})=>{const{t:l}=Object(r.useTranslation)(),i=Object(o.l)(e);return n.createElement("div",{className:"co-m-list"},n.createElement("div",{className:"co-m-pane__body"},n.createElement(c.j,{data:i,"aria-label":l("metal3-plugin~Bare Metal Host NICs"),Header:d(l),Row:m,loaded:a,loadError:t||(a&&!e?{message:l("metal3-plugin~Bare metal host is not available")}:void 0),getRowProps:u})))}},11798:function(e,t,a){"use strict";var n=a(0),l=a(694),i=a(4374),s=a(1529),r=a(1944),c=a(6444),o=a(11799),d=a(11800),u=a(11801),m=a(11802),b=a(11804);t.a=({obj:e,machines:t,nodes:a,nodeMaintenances:p,loaded:O})=>{var h;const E=Object(r.j)(e,t),g=Object(s.d)(E,a),f={obj:e,machine:E,node:g,nodeMaintenance:Object(r.a)(p,null===(h=null==g?void 0:g.metadata)||void 0===h?void 0:h.name),loaded:O},j=[{Card:m.a},{Card:b.a}],v=[{Card:o.a},{Card:u.a}],_=[{Card:d.a}];return n.createElement(c.a.Provider,{value:f},n.createElement(l.default,null,n.createElement(i.default,{mainCards:j,leftCards:v,rightCards:_})))}},11799:function(e,t,a){"use strict";var n=a(0),l=a(2239),i=a(192),s=a(434),r=a(295),c=a(296),o=a(7),d=a(14),u=a(5),m=a(15),b=a(4379),p=a(177),O=a(8384),h=a(8391),E=a(6444);t.a=()=>{const{t:e}=Object(o.useTranslation)(),{obj:t,machine:a,node:g}=n.useContext(E.a),f=Object(m.dd)(t),j=n.createElement(h.a,{nodeName:Object(m.dd)(g)}),v=n.createElement(O.a,{machine:a,node:g});return n.createElement(i.a,{isClickable:!0,isSelectable:!0},n.createElement(s.a,{actions:{actions:n.createElement(n.Fragment,null,n.createElement(d.Link,{to:Object(u.uc)(p.a,Object(m.dd)(t),Object(m.ed)(t))+"/details"},e("metal3-plugin~View all"))),hasNoOffset:!1,className:"co-overview-card__actions"}},n.createElement(r.a,null,e("metal3-plugin~Details"))),n.createElement(c.a,null,n.createElement(b.default,null,n.createElement(l.b,{title:e("metal3-plugin~Host name"),isLoading:!1},f),n.createElement(l.b,{title:e("metal3-plugin~Role"),isLoading:!1},v),n.createElement(l.b,{title:e("metal3-plugin~Node"),isLoading:!1},j))))}},11800:function(e,t,a){"use strict";var n=a(0),l=a(192),i=a(434),s=a(295),r=a(7113),c=a(6771),o=a(7),d=a(14),u=a(5670),m=a(5),b=a(10),p=a(15),O=a(1950),h=a(4394),E=a(177),g=a(6443),f=a(6444);const j={isList:!0,kind:b.EventModel.kind,prop:"events"},v=(e,t,a,n)=>t&&r.a(n.involvedObject,{kind:e,name:t,namespace:a}),_=(e,t,a)=>v(E.a.kind,Object(p.dd)(e),Object(p.ed)(e),a)||v(b.MachineModel.kind,Object(p.dd)(t),Object(p.ed)(t),a)||v(b.NodeModel.kind,Object(p.Wc)(t),null,a);t.a=Object(u.a)(({watchK8sResource:e,stopWatchK8sResource:t,resources:a})=>{const{t:r}=Object(o.useTranslation)(),{obj:u,machine:b}=n.useContext(f.a);n.useEffect(()=>(e(j),()=>{t(j)}),[e,t]);const v=((e,t)=>c.a(_,e,t))(u,b),M=Object(g.c)(u),T=Object(g.a)(u);return n.createElement(l.a,{className:"co-overview-card--gradient",isClickable:!0,isSelectable:!0},n.createElement(i.a,{actions:{actions:n.createElement(n.Fragment,null,n.createElement(d.Link,{to:Object(m.uc)(E.a,Object(p.dd)(u),Object(p.ed)(u))+"/events"},r("metal3-plugin~View events"))),hasNoOffset:!1,className:"co-overview-card__actions"}},n.createElement(s.a,null,"Activity")),n.createElement(O.default,null,n.createElement("div",{className:"co-activity-card__ongoing-title"},"Ongoing"),n.createElement("div",{className:"co-activity-card__ongoing-body"},M?n.createElement(O.Activity,{timestamp:null},n.createElement(h.default,null,r(T.titleKey),n.createElement(m.hb,{kind:E.a.kind,name:Object(p.dd)(u),namespace:Object(p.ed)(u)}))):n.createElement(O.Activity,null,n.createElement("div",{className:"text-secondary"},r("metal3-plugin~There are no ongoing activities.")))),n.createElement(O.RecentEventsBody,{events:a.events,filter:v})))})},11801:function(e,t,a){"use strict";var n=a(0),l=a(192),i=a(434),s=a(295),r=a(296),c=a(967),o=a(406),d=a(7),u=a(14),m=a(108),b=a(99),p=a(10),O=a(4378),h=a(2231),E=a(416),g=a(177),f=a(1944),j=a(6444);const v=()=>{const{node:e,loaded:t}=n.useContext(j.a),a=Object(E.d)(e),l=n.useMemo(()=>t&&a?{isList:!0,kind:p.PodModel.kind,fieldSelector:"spec.nodeName="+a}:null,[a,t]),[i,s,r]=Object(m.a)(l);if(!a||!t)return n.createElement(O.default,{title:p.PodModel.label,count:0,isLoading:!t});const c=Object(b.resourcePathFromModel)(p.NodeModel,a)+"/pods";return n.createElement(O.ResourceInventoryItem,{resources:i,basePath:c,mapper:h.getPodStatusGroups,kind:p.PodModel,isLoading:!s,error:!!r})};t.a=()=>{const{t:e}=Object(d.useTranslation)(),{obj:t}=n.useContext(j.a),a=Object(E.e)(t),m=Object(E.d)(t),p=n.useCallback(({children:e})=>n.createElement(u.Link,{to:Object(b.resourcePathFromModel)(g.a,m,a)+"/nics"},e),[m,a]),h=n.useCallback(({children:e})=>n.createElement(u.Link,{to:Object(b.resourcePathFromModel)(g.a,m,a)+"/disks"},e),[m,a]);return n.createElement(l.a,null,n.createElement(i.a,null,n.createElement(s.a,null,e("metal3-plugin~Inventory"))),n.createElement(r.a,null,n.createElement(c.a,{hasGutter:!0},n.createElement(o.a,null,n.createElement(v,null)),n.createElement(o.a,null,n.createElement(O.default,{title:e("metal3-plugin~Disk"),isLoading:!t,count:Object(f.q)(t).length,TitleComponent:h})),n.createElement(o.a,null,n.createElement(O.default,{title:e("metal3-plugin~NIC"),isLoading:!t,count:Object(f.l)(t).length,TitleComponent:p})),n.createElement(o.a,null,n.createElement(O.default,{title:e("metal3-plugin~CPU"),isLoading:!t,count:Object(f.e)(t).count})))))}},11802:function(e,t,a){"use strict";var n=a(0),l=a(192),i=a(434),s=a(295),r=a(296),c=a(5387),o=a(5388),d=a(8394),u=a(16),m=a(22),b=a(7),p=a(14),O=a(13),h=a(5670),E=a(58),g=a(5),f=a(15),j=a(4376),v=a(4375),_=a(4364),M=a(4377),T=a(52),y=a(696),N=a(177),k=a(1944),R=a(6443),w=a(8393),S=a(7558),A=a(6444);a(11803);t.a=Object(h.a)(({watchAlerts:e,stopWatchAlerts:t,notificationAlerts:a})=>{const{t:h}=Object(b.useTranslation)(),{obj:P,machine:I,node:C,nodeMaintenance:B}=n.useContext(A.a);n.useEffect(()=>(e(),()=>t()),[e,t]);const F=Object(R.b)({host:P,machine:I,node:C,nodeMaintenance:B}),L=(e=>{const{status:t,titleKey:a}=Object(R.a)(e);return y.b.includes(t)?{state:T.a.ERROR,titleKey:a}:{titleKey:"",state:T.a.OK}})(P),{data:D,loaded:x,loadError:U}=a||{},Y=n.useMemo(()=>(e=>e.filter(e=>u.a(e,"labels.hwalert")))(D),[D]),z=Object(k.B)(P),G=Object(k.o)(P),K=Object(k.n)(P),H=Object(k.E)(P);return n.createElement(l.a,{className:"co-overview-card--gradient"},n.createElement(i.a,null,n.createElement(s.a,null,"Status")),n.createElement(r.a,null,n.createElement(_.default,null,n.createElement(c.a,{className:"co-overview-status__health",hasGutter:!0},n.createElement(o.a,{className:"bmh-health__status-item"},n.createElement(S.a,Object.assign({},F,{nodeMaintenance:B,host:P,className:"bmh-health__status"}))),n.createElement(o.a,null,n.createElement(M.default,{title:h("metal3-plugin~Hardware"),state:L.state,details:h(L.titleKey)})),!y.j.includes(G)&&n.createElement(o.a,null,z?n.createElement(O.A,{title:H?h("metal3-plugin~Restart pending"):K,icon:H?n.createElement(d.a,null):n.createElement(w.a,{powerStatus:K}),className:"bmh-health__status"}):n.createElement(M.default,{title:h("metal3-plugin~No power management"),state:T.a.NOT_AVAILABLE})))),n.createElement(v.default,{error:!m.a(U)},!z&&n.createElement(j.StatusItem,{Icon:f.o,message:h(y.m[y.t])},n.createElement(p.Link,{to:Object(g.uc)(N.a,P.metadata.name,P.metadata.namespace)+"/edit?powerMgmt"},"Add credentials")),x&&0!==Y.length?Y.map(e=>n.createElement(j.default,{key:Object(E.h)(e,e.rule.id),alert:e})):null)))})},11803:function(e,t,a){},11804:function(e,t,a){"use strict";var n=a(0),l=a(192),i=a(434),s=a(295),r=a(7),c=a(5806),o=a(5),d=a(10),u=a(15),m=a(5735),b=a(4365),p=a(4366),O=a(762),h=a(6444),E=a(11805);t.a=()=>{const{t:e}=Object(r.useTranslation)(),{machine:t}=n.useContext(h.a),a=Object(u.Wc)(t),g=n.useMemo(()=>Object(E.d)(a),[a]),f=n.useMemo(()=>Object(E.b)(a),[a]),j=n.useCallback(e=>({string:""+e,value:e,unit:""}),[]),v=n.useCallback(({current:t})=>{const l=Object(E.c)(a);return n.createElement(m.b,{title:e("metal3-plugin~CPU"),current:t,humanize:o.Yb,consumers:[{query:l[E.a.PROJECTS_BY_CPU],model:d.ProjectModel,metric:"namespace"},{query:l[E.a.PODS_BY_CPU],model:d.PodModel,metric:"pod"}]})},[a,e]),_=n.useCallback(({current:t})=>{const l=Object(E.c)(a);return n.createElement(m.b,{title:e("metal3-plugin~Memory"),current:t,humanize:o.Wb,consumers:[{query:l[E.a.PROJECTS_BY_MEMORY],model:d.ProjectModel,metric:"namespace"},{query:l[E.a.PODS_BY_MEMORY],model:d.PodModel,metric:"pod"}]})},[a,e]),M=n.useCallback(({current:t})=>{const l=Object(E.c)(a);return n.createElement(m.b,{title:e("metal3-plugin~Disk Usage"),current:t,humanize:o.Wb,consumers:[{query:l[E.a.PROJECTS_BY_STORAGE],model:d.ProjectModel,metric:"namespace"},{query:l[E.a.PODS_BY_STORAGE],model:d.PodModel,metric:"pod"}]})},[a,e]);return n.createElement(l.a,{isClickable:!0,isSelectable:!0},n.createElement(i.a,{actions:{actions:n.createElement(n.Fragment,null,n.createElement(p.UtilizationDurationDropdown,null)),hasNoOffset:!1,className:void 0}},n.createElement(s.a,null,e("metal3-plugin~Utilization"))),n.createElement(b.default,null,n.createElement(c.b,{title:e("metal3-plugin~CPU"),utilizationQuery:g[E.a.CPU_UTILIZATION].utilization,humanizeValue:o.Yb,TopConsumerPopover:v}),n.createElement(c.b,{title:e("metal3-plugin~Memory"),utilizationQuery:g[E.a.MEMORY_UTILIZATION].utilization,totalQuery:g[E.a.MEMORY_UTILIZATION].total,humanizeValue:o.Wb,byteDataType:O.a.BinaryBytes,TopConsumerPopover:_}),n.createElement(c.b,{title:e("metal3-plugin~Filesystem"),utilizationQuery:g[E.a.STORAGE_UTILIZATION].utilization,totalQuery:g[E.a.STORAGE_UTILIZATION].total,humanizeValue:o.Wb,byteDataType:O.a.BinaryBytes,TopConsumerPopover:M}),n.createElement(c.a,{title:e("metal3-plugin~Network Transfer"),queries:f[E.a.NETWORK_UTILIZATION],humanizeValue:o.ac}),n.createElement(c.b,{title:e("metal3-plugin~Pod count"),utilizationQuery:g[E.a.NUMBER_OF_PODS].utilization,humanizeValue:j})))}},11805:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return o}));var n,l=a(550);a(16);!function(e){e.CPU_UTILIZATION="CPU_UTILIZATION",e.MEMORY_UTILIZATION="MEMORY_UTILIZATION",e.MEMORY_TOTAL="MEMORY_TOTAL",e.STORAGE_UTILIZATION="STORAGE_UTILIZATION",e.STORAGE_TOTAL="STORAGE_TOTAL",e.NETWORK_IN_UTILIZATION="NETWORK_IN_UTILIZATION",e.NETWORK_OUT_UTILIZATION="NETWORK_OUT_UTILIZATION",e.NETWORK_UTILIZATION="NETWORK_UTILIZATION",e.NUMBER_OF_PODS="NUMBER_OF_PODS",e.NUMBER_OF_FANS="NUMBER_OF_FANS",e.NUMBER_OF_PSUS="NUMBER_OF_PSUS",e.PODS_BY_CPU="PODS_BY_CPU",e.PODS_BY_MEMORY="PODS_BY_MEMORY",e.PODS_BY_STORAGE="PODS_BY_STORAGE",e.PROJECTS_BY_CPU="PROJECTS_BY_CPU",e.PROJECTS_BY_MEMORY="PROJECTS_BY_MEMORY",e.PROJECTS_BY_STORAGE="PROJECTS_BY_STORAGE"}(n||(n={}));const i={[n.CPU_UTILIZATION]:l.a("instance:node_cpu:rate:sum{instance=~'<%= node %>'}"),[n.MEMORY_UTILIZATION]:l.a("node_memory_Active_bytes{instance=~'<%= node %>'}"),[n.MEMORY_TOTAL]:l.a("node_memory_MemTotal_bytes{instance=~'<%= node %>'}"),[n.STORAGE_UTILIZATION]:l.a("sum(max by (device) (node_filesystem_size_bytes{instance='<%= node %>', device=~\"/.*\"})) - sum(max by (device) (node_filesystem_avail_bytes{instance='<%= node %>', device=~\"/.*\"}))"),[n.STORAGE_TOTAL]:l.a("sum(max by (device) (node_filesystem_size_bytes{instance='<%= node %>', device=~\"/.*\"}))"),[n.NETWORK_IN_UTILIZATION]:l.a("instance:node_network_receive_bytes:rate:sum{instance=~'<%= node %>'}"),[n.NETWORK_OUT_UTILIZATION]:l.a("instance:node_network_transmit_bytes:rate:sum{instance=~'<%= node %>'}"),[n.NUMBER_OF_PODS]:l.a("kubelet_running_pods{node='<%= node %>'}"),[n.PODS_BY_CPU]:l.a('topk(25, sort_desc(sum(rate(container_cpu_usage_seconds_total{node="<%= node %>",container_name="",pod!=""}[5m])) BY (pod, namespace)))'),[n.PROJECTS_BY_CPU]:l.a('topk(25, sort_desc(sum(rate(container_cpu_usage_seconds_total{node="<%= node %>",container_name="",pod!=""}[5m])) BY (namespace)))'),[n.PODS_BY_MEMORY]:l.a('topk(25, sort_desc(sum(container_memory_working_set_bytes{node="<%= node %>",container="",pod!=""}) BY (pod, namespace)))'),[n.PROJECTS_BY_MEMORY]:l.a('topk(25, sort_desc(sum(container_memory_working_set_bytes{node="<%= node %>",container="",pod!=""}) BY (namespace)))'),[n.PODS_BY_STORAGE]:l.a('topk(25, sort_desc(avg by (pod, namespace)(irate(container_fs_io_time_seconds_total{node="<%= node %>",container="POD", pod!=""}[1m]))))'),[n.PROJECTS_BY_STORAGE]:l.a('topk(25, sort_desc(avg by (namespace)(irate(container_fs_io_time_seconds_total{node="<%= node %>",container="POD", pod!=""}[1m]))))')},s=(e,t)=>t({node:e}),r=e=>({[n.CPU_UTILIZATION]:{utilization:s(e,i[n.CPU_UTILIZATION])},[n.MEMORY_UTILIZATION]:{utilization:s(e,i[n.MEMORY_UTILIZATION]),total:s(e,i[n.MEMORY_TOTAL])},[n.STORAGE_UTILIZATION]:{utilization:s(e,i[n.STORAGE_UTILIZATION]),total:s(e,i[n.STORAGE_TOTAL])},[n.NUMBER_OF_PODS]:{utilization:s(e,i[n.NUMBER_OF_PODS])}}),c=e=>({[n.NETWORK_UTILIZATION]:[{query:s(e,i[n.NETWORK_IN_UTILIZATION]),desc:"in"},{query:s(e,i[n.NETWORK_OUT_UTILIZATION]),desc:"out"}]}),o=e=>({[n.PODS_BY_CPU]:s(e,i[n.PODS_BY_CPU]),[n.PROJECTS_BY_CPU]:s(e,i[n.PROJECTS_BY_CPU]),[n.PODS_BY_MEMORY]:s(e,i[n.PODS_BY_MEMORY]),[n.PROJECTS_BY_MEMORY]:s(e,i[n.PROJECTS_BY_MEMORY]),[n.PODS_BY_STORAGE]:s(e,i[n.PODS_BY_STORAGE]),[n.PROJECTS_BY_STORAGE]:s(e,i[n.PROJECTS_BY_STORAGE])})},11806:function(e,t,a){"use strict";var n=a(0),l=a(55),i=a(22),s=a(107),r=a(7),c=a(689),o=a(5),d=a(108),u=a(10),m=a(8),b=a(15),p=a(1264),O=a(6878),h=a(177),E=a(1944),g=a(11807),f=a(8395),j=a(11808),v=a(11809);const _=(e,t,a,n)=>{var l,i,s,r,c;return{name:Object(b.dd)(e)||"",BMCAddress:Object(E.b)(e)||"",username:Object(g.b)(t)||"",password:Object(g.a)(t)||"",disableCertificateVerification:Object(E.g)(e)||!1,bootMACAddress:Object(E.d)(e)||"",online:Object(E.C)(e)||!0,description:Object(E.f)(e)||"",enablePowerManagement:!a||(!!(null===(i=null===(l=null==e?void 0:e.spec)||void 0===l?void 0:l.bmc)||void 0===i?void 0:i.address)||!!(null===(r=null===(s=null==e?void 0:e.spec)||void 0===s?void 0:s.bmc)||void 0===r?void 0:r.credentialsName)||n),bootMode:(null===(c=null==e?void 0:e.spec)||void 0===c?void 0:c.bootMode)||"UEFI"}};t.a=({namespace:e,name:t,enablePowerMgmt:a})=>{var E,g;const{t:M}=Object(r.useTranslation)(),T=n.useMemo(()=>t?{kind:Object(m.Hb)(h.a),namespace:e,name:t}:void 0,[t,e]),y=n.useMemo(()=>t?void 0:{kind:Object(m.Hb)(h.a),namespace:e,isList:!0},[t,e]),[N,k,R]=Object(d.a)(T),[w,S,A]=Object(d.a)(y),P=null===(g=null===(E=null==N?void 0:N.spec)||void 0===E?void 0:E.bmc)||void 0===g?void 0:g.credentialsName,I=n.useMemo(()=>P?{kind:u.SecretModel.kind,namespace:e,name:P}:void 0,[P,e]),[C,B,F]=Object(d.a)(I),[L,D]=n.useState(!1);n.useEffect(()=>{L&&D(!1)},[L,D]);const x=Object(p.a)(N,[k,L]),U=Object(p.a)(C,[B,L]);if(t?!k||I&&!B:!S)return n.createElement(o.S,null);if(R||F||A)return n.createElement(o.Q,{label:M("metal3-plugin~resources")});const Y=t?[]:w.map(b.dd),z=_(N,C,!!t,a),G=_(x,U,!!t,a),K=!(P&&i.a(U)||i.a(x)||s.a(G,z)),H=c.lazy(({enablePowerManagement:e})=>c.object().shape({name:c.mixed().test("unique-name",M('metal3-plugin~Name "${value}" is already taken.'),e=>!Y.includes(e)).concat(Object(j.a)(M)),BMCAddress:e?c.string().matches(f.a,M("metal3-plugin~Value provided is not a valid BMC address")).required(M("metal3-plugin~Required.")):void 0,username:e?c.string().required(M("metal3-plugin~Required.")):void 0,password:e?c.string().required(M("metal3-plugin~Required.")):void 0,bootMACAddress:c.string().matches(f.b,M("metal3-plugin~Value provided is not a valid MAC Address.")).required(M("metal3-plugin~Required."))})),V=!!t;return n.createElement(l.b,{initialValues:z,enableReinitialize:!!t&&L,onSubmit:(a,n)=>{const l=Object.assign(Object.assign({},a),{namespace:e});return(t?Object(O.e)(i.a(x)?N:x,i.a(U)?C:U,l):Object(O.a)(l)).then(()=>{o.Vb.push(Object(o.uc)(h.a,a.name,e))}).catch(e=>{n.setStatus({submitError:e.message})})},onReset:()=>D(!0),validationSchema:H,validateOnMount:V,initialTouched:V?Object.keys(z).reduce((e,t)=>(e[t]=!0,e),{}):void 0},e=>n.createElement(v.a,Object.assign({},e,{isEditing:V,showUpdated:K})))}},11807:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return l}));const n=e=>e&&e.data&&atob(e.data.username),l=e=>e&&e.data&&atob(e.data.password)},11808:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(689),l=a(8395);const i=(e,t=263)=>n.string().matches(l.c,{message:e("metal3-plugin~Name must consist of lower case alphanumeric characters, hyphens or dots, and must start and end with an alphanumeric character."),excludeEmptyString:!0}).max(t,e("metal3-plugin~Cannot be longer than {{characterCount}} characters.",{characterCount:t})).required(e("metal3-plugin~Required"))},11809:function(e,t,a){"use strict";var n=a(0),l=a(1922),i=a(281),s=a(22),r=a(7),c=a(5),o=a(15);t.a=({errors:e,handleSubmit:t,handleReset:a,status:d,isSubmitting:u,dirty:m,isEditing:b,showUpdated:p,values:O})=>{const{t:h}=Object(r.useTranslation)();return n.createElement(l.a,{onSubmit:t},n.createElement(o.ab,{type:i.b.text,"data-test-id":"add-baremetal-host-form-name-input",name:"name",label:h("metal3-plugin~Name"),placeholder:"openshift-worker",helpText:h("metal3-plugin~Provide a unique name for the new Bare Metal Host."),required:!0,isDisabled:b}),n.createElement(o.kc,{"data-test-id":"add-baremetal-host-form-description-input",name:"description",label:h("metal3-plugin~Description")}),n.createElement(o.T,{"data-test-id":"add-baremetal-host-form-bootmode-input",name:"bootMode",label:h("metal3-plugin~Boot mode"),options:[{value:"UEFI",label:"UEFI"},{value:"UEFISecureBoot",label:"UEFISecureBoot"},{value:"legacy",label:"Legacy"}]}),n.createElement(o.ab,{type:i.b.text,"data-test-id":"add-baremetal-host-form-boot-mac-address-input",name:"bootMACAddress",label:h("metal3-plugin~Boot MAC Address"),helpText:h("metal3-plugin~The MAC address of the NIC connected to the network that will be used to provision the host."),required:!0}),n.createElement(o.A,{"data-test-id":"add-baremetal-host-form-enable-power-mgmt-input",name:"enablePowerManagement",label:h("metal3-plugin~Enable power management"),helpText:h("metal3-plugin~Provide credentials for the hosts baseboard management controller (BMC) device to enable OpenShift to control its power state. This is required for automatic machine health check remediation.")}),O.enablePowerManagement&&n.createElement(n.Fragment,null,n.createElement(o.ab,{type:i.b.text,"data-test-id":"add-baremetal-host-form-bmc-address-input",name:"BMCAddress",label:h("metal3-plugin~Baseboard Management Console (BMC) Address"),helpText:h("metal3-plugin~The URL for communicating with the hosts baseboard management controller device."),required:!0}),n.createElement(o.A,{"data-test-id":"add-baremetal-host-form-disable-certificate-verification-input",name:"disableCertificateVerification",label:h("metal3-plugin~Disable Certificate Verification"),helpText:h("metal3-plugin~Disable verification of server certificates when using HTTPS to connect to the BMC. This is required when the server certificate is self-signed, but is insecure because it allows a man-in-the-middle to intercept the connection.")}),n.createElement(o.ab,{type:i.b.text,"data-test-id":"add-baremetal-host-form-username-input",name:"username",label:h("metal3-plugin~BMC Username"),required:!0}),n.createElement(o.ab,{type:i.b.password,"data-test-id":"add-baremetal-host-form-password-input",name:"password",label:h("metal3-plugin~BMC Password"),required:!0}),!b&&n.createElement(o.ec,{name:"online","data-test-id":"add-baremetal-host-form-online-switch",label:h("metal3-plugin~Power host on after creation")})),n.createElement(o.R,{isSubmitting:u,handleReset:p&&a,handleCancel:c.Vb.goBack,submitLabel:h(b?"metal3-plugin~Save":"metal3-plugin~Create"),errorMessage:d&&d.submitError,disableSubmit:u||!m||!s.a(e),infoTitle:h("metal3-plugin~Bare Metal Host has been updated"),infoMessage:h("metal3-plugin~Click reload to see the recent changes"),showAlert:p}))}},2231:function(e,t,a){"use strict";a.r(t),a.d(t,"getStatusGroups",(function(){return m})),a.d(t,"getPodStatusGroups",(function(){return b})),a.d(t,"getNodeStatusGroups",(function(){return p})),a.d(t,"getPVCStatusGroups",(function(){return O})),a.d(t,"getPVStatusGroups",(function(){return h})),a.d(t,"getVSStatusGroups",(function(){return E}));var n=a(2233),l=a(2238),i=a(8),s=a(475);const r={[s.a.NOT_MAPPED]:["Running","Succeeded"],[s.a.ERROR]:["CrashLoopBackOff","Failed"],[s.a.PROGRESS]:["Terminating","Pending"],[s.a.WARN]:["Unknown"]},c={[s.a.NOT_MAPPED]:["Bound"],[s.a.ERROR]:["Lost"],[s.a.PROGRESS]:["Pending"]},o={[s.a.NOT_MAPPED]:["Available","Bound"],[s.a.PROGRESS]:["Released"],[s.a.ERROR]:["Failed"]},d={[s.a.NOT_MAPPED]:["Ready"],[s.a.PROGRESS]:["Not Ready"]},u={[s.a.NOT_MAPPED]:["Ready"],[s.a.PROGRESS]:["Pending"],[s.a.ERROR]:["Error"]},m=(e,t,a,n)=>{const l={[s.a.UNKNOWN]:{statusIDs:[],count:0}};return Object.keys(t).forEach(e=>{l[e]={statusIDs:[...t[e]],count:0,filterType:n}}),e.forEach(e=>{const n=a(e),i=Object.keys(t).find(e=>t[e].includes(n))||s.a.UNKNOWN;l[i].count++}),l},b=e=>m(e,r,i.Ab,"pod-status"),p=e=>m(e,d,n.a,"node-status"),O=e=>m(e,c,e=>e.status.phase,"pvc-status"),h=e=>m(e,o,e=>e.status.phase,"pv-status"),E=e=>m(e,u,l.b,"snapshot-status")},4486:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a(137),i=a(7),s=a(14),r=a(11806);t.default=()=>{const{t:e}=Object(i.useTranslation)(),t=Object(s.useLocation)(),{name:a,ns:c}=Object(s.useParams)(),o=new URLSearchParams(t.search).has("powerMgmt"),d=!!a,u=e(d?"metal3-plugin~Edit Bare Metal Host":"metal3-plugin~Add Bare Metal Host");return n.createElement(n.Fragment,null,n.createElement(l.a,null,n.createElement("title",null,u)),n.createElement("div",{className:"co-m-pane__body co-m-pane__form"},n.createElement("h1",{className:"co-m-pane__heading co-m-pane__heading--baseline"},n.createElement("div",{className:"co-m-pane__name"},u)),!d&&n.createElement("p",{className:"co-m-pane__explanation"},e("metal3-plugin~Expand the hardware inventory by registering a new Bare Metal Host.")),n.createElement(r.a,{namespace:c,name:a,enablePowerMgmt:o})))}},5410:function(e,t,a){"use strict";a.r(t),a.d(t,"confirmModal",(function(){return o}));var n=a(0),l=a(7),i=a(21),s=a(118),r=a(5);class c extends r.bb{constructor(e){super(e),this._submit=this._submit.bind(this),this._cancel=this.props.cancel.bind(this)}_submit(e){e.preventDefault(),this.handlePromise(this.props.executeFn(null,{supressNotifications:!0})).then(this.props.close)}render(){const{title:e,titleKey:t,message:a,messageKey:i,btnText:r,btnTextKey:c,cancelText:o,cancelTextKey:d,submitDanger:u}=this.props;return n.createElement(l.Translation,null,l=>n.createElement("form",{onSubmit:this._submit,name:"form",className:"modal-content"},n.createElement(s.d,null,t?l(t):e),n.createElement(s.a,null,i?l(i):a),n.createElement(s.c,{errorMessage:this.state.errorMessage,inProgress:this.state.inProgress,submitText:c?l(c):r||l("Confirm"),cancel:this._cancel,cancelText:d?l(d):o||l("Cancel"),submitDanger:u})))}}c.propTypes={btnText:i.node,btnTextKey:i.string,cancel:i.func.isRequired,cancelText:i.node,cancelTextKey:i.string,close:i.func.isRequired,executeFn:i.func.isRequired,message:i.node,messageKey:i.string,title:i.node,titleKey:i.string,submitDanger:i.bool};const o=Object(s.f)(c)},5517:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a(400),i=a(22),s=a(7),r=a(40),c=a(10),o=a(8),d=a(15),u=a(2260),m=a(177),b=a(1944),p=a(8383),O=a(6443),h=a(11779),E=a(8392);const g=e=>{if(l.a(e,e=>e.optional?e.loaded||!i.a(e.loadError):e.loaded)){const{hosts:t,machines:a,machineSets:n,nodes:l,nodeMaintenances:i}=e,s=(null==t?void 0:t.data)||[],r=(null==a?void 0:a.data)||[],c=Object(d.xc)(i,b.v),o=Object(d.xc)(l,d.id),u=Object(d.xc)(n);return s.map(e=>{const t=Object(b.j)(e,r),a=o[Object(d.dd)(t)],n=c[Object(d.dd)(a)],l=Object(p.a)(t),i=l&&u[l.uid],s=Object(O.b)({host:e,machine:t,node:a,nodeMaintenance:n});return{metadata:{name:Object(d.dd)(e)},host:e,machine:t,node:a,nodeMaintenance:n,machineSet:i,status:s}})}return[]},f=({namespace:e,t:t})=>({items:{dialog:t("metal3-plugin~New with Dialog"),yaml:t("metal3-plugin~New from YAML")},createLink:t=>{const a=`/k8s/ns/${e||"default"}/${Object(o.Hb)(m.a)}`;switch(t){case"dialog":return a+"/~new/form";case"yaml":default:return a+"/~new"}}});t.default=e=>{const{t:t}=Object(s.useTranslation)(),[a]=Object(u.a)(),{namespace:l}=e,i=[{kind:Object(o.Hb)(m.a),namespaced:!0,prop:"hosts"},{kind:Object(o.Hb)(c.MachineModel),namespaced:!0,prop:"machines"},{kind:Object(o.Hb)(c.MachineSetModel),namespaced:!0,isList:!0,prop:"machineSets"},{kind:c.NodeModel.kind,namespaced:!1,prop:"nodes"}];return a&&i.push({kind:Object(o.Hb)(a),namespaced:!1,isList:!0,prop:"nodeMaintenances",optional:!0}),n.createElement(r.i,Object.assign({},e,{canCreate:!0,rowFilters:[Object(E.b)(t)],createProps:f({namespace:l,t:t}),createButtonText:t("metal3-plugin~Add Host"),namespace:l,resources:i,flatten:g,ListComponent:h.a,title:t("metal3-plugin~Bare Metal Hosts")}))}},5518:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a(7),i=a(409),s=a(40),r=a(5),c=a(10),o=a(8),d=a(206),u=a(346),m=a(2260),b=a(177),p=a(11790),O=a(11794),h=a(11795),E=a(11798),g=a(8385);t.default=e=>{const{t:t}=Object(l.useTranslation)(),[a]=Object(m.a)(),f=Object(d.a)(u.BMO_ENABLED_FLAG),j=[{kind:Object(o.Hb)(c.MachineModel),namespaced:!0,isList:!0,prop:"machines"},{kind:Object(o.Hb)(c.MachineSetModel),namespaced:!0,isList:!0,prop:"machineSets"},{kind:c.NodeModel.kind,namespaced:!1,isList:!0,prop:"nodes"}];a&&j.push({kind:Object(o.Hb)(a),namespaced:!1,isList:!0,prop:"nodeMaintenances",optional:!0});const v={href:"nics",nameKey:"metal3-plugin~Network Interfaces",component:h.a},_={href:"disks",nameKey:"metal3-plugin~Disks",component:O.a},M={href:"",nameKey:"metal3-plugin~Overview",component:E.a},T={href:"details",nameKey:"metal3-plugin~Details",component:p.a};return n.createElement(s.a,Object.assign({},e,{pagesFor:()=>[M,T,r.mc.editYaml(),v,_,r.mc.events(i.ResourceEventStream)],kind:Object(o.Hb)(b.a),resources:j,menuActions:g.b,customData:{hasNodeMaintenanceCapability:!!a,maintenanceModel:a,bmoEnabled:f,t:t}}))}},5520:function(e,t,a){"use strict";a.r(t),a.d(t,"getBMHStatusGroups",(function(){return m}));var n=a(475),l=a(416),i=a(877),s=a(1415),r=a(696),c=a(1944),o=a(6443),d=a(8392);const u={[n.a.NOT_MAPPED]:r.u,[n.a.PROGRESS]:r.h,[n.a.ERROR]:r.a,"node-maintenance":["maintenance"]},m=(e,{machines:t,nodes:a,maintenances:r,kvAlphaMaintenances:m,kvBetaMaintenances:b})=>{const p={[n.a.NOT_MAPPED]:{statusIDs:["ready","provisioned"],count:0,filterType:"host-status"},[n.a.ERROR]:{statusIDs:["error"],count:0,filterType:"host-status"},[n.a.PROGRESS]:{statusIDs:["registering","provisioning"],count:0,filterType:"host-status"},[n.a.UNKNOWN]:{statusIDs:["other"],count:0,filterType:"host-status"},"node-maintenance":{statusIDs:["maintenance"],count:0,filterType:"host-status"}},O=Object(s.b)(r,c.v),h=Object(s.b)(b,c.v),E=Object(s.b)(m,c.v),g=Object(s.b)(a,i.e);return e.forEach(e=>{const a=Object(c.j)(e,t),i=g[Object(l.d)(a)],s=O[Object(l.d)(i)]||h[Object(l.d)(i)]||E[Object(l.d)(i)],r=Object(o.b)({host:e,nodeMaintenance:s}),m=Object(d.a)({machine:a,node:i,host:e,nodeMaintenance:s,status:r}),b=Object.keys(u).find(e=>u[e].includes(m))||n.a.NOT_MAPPED;p[b].count++}),p}},6443:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return c}));var n=a(696),l=a(1944),i=a(7557);const s=e=>{const t=Object(l.m)(e),a=Object(l.o)(e),i=Object(l.i)(e);let s;return s=t===n.n?i||n.n:a||n.s,{status:s,titleKey:n.r[s]||s,descriptionKey:n.m[s]}},r=({host:e,nodeMaintenance:t})=>{const a=s(e);return a.status===n.l?a:Object(i.a)(t)||a},c=e=>n.h.includes(s(e).status)},6444:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0);const l=n.createContext({})},6609:function(e,t,a){"use strict";var n=a(0),l=a(7),i=a(5410),s=a(8),r=a(177),c=a(1944);t.a=(e,t)=>{const a=Object(c.z)(e),o=a?`(${a})`:"",d=Object(c.v)(e);return Object(i.confirmModal)({title:t("metal3-plugin~Stop maintenance"),message:n.createElement(l.Trans,{t:t,ns:"metal3-plugin"},"Are you sure you want to stop maintenance ",n.createElement("strong",null,o)," on node"," ",n.createElement("strong",null,d),"?"),btnText:t("metal3-plugin~Stop maintenance"),executeFn:()=>Object(s.lb)((e=>e.apiVersion===`${r.e.apiGroup}/${r.e.apiVersion}`?r.e:e.apiVersion===`${r.d.apiGroup}/${r.d.apiVersion}`?r.d:r.c)(e),e)})}},6847:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(0),l=a(967),i=a(406),s=a(219),r=a(281),c=a(80),o=a(7),d=a(40),u=a(5),m=a(108),b=a(8),p=a(2260),O=a(7469),h=a(177);const E={kind:Object(b.Hb)(h.b),namespaced:!1,isList:!0},g=Object(u.Oc)(e=>{var t,a;const{t:u}=Object(o.useTranslation)(),{nodeName:b,inProgress:h,errorMessage:g,handlePromise:f,close:j,cancel:v}=e,[_]=Object(p.a)(),[M,T]=n.useState(""),[y,N]=Object(m.a)(E),k=null==y?void 0:y[0],R="HEALTH_OK"===(null===(a=null===(t=null==k?void 0:k.status)||void 0===t?void 0:t.ceph)||void 0===a?void 0:a.health),w=u("metal3-plugin~Start Maintenance");return n.createElement("form",{onSubmit:e=>{e.preventDefault();const t=Object(O.a)(b,M,_);return f(t,j)},name:"form",className:"modal-content"},n.createElement(d.h,null,w),n.createElement(d.e,null,n.createElement(l.a,{hasGutter:!0},n.createElement(i.a,null,u("metal3-plugin~All managed workloads will be moved off of this node. New workloads and data will not be added to this node until maintenance is stopped.")),n.createElement(i.a,null,n.createElement(o.Trans,{ns:"metal3-plugin"},"If the node does not exit maintenance within ",n.createElement("strong",null,"30 minutes"),", the cluster will automatically rebuild the node","'","s data using replicated copies")),n.createElement(i.a,null,n.createElement(s.a,{label:"Reason",fieldId:"node-maintenance-reason"},n.createElement(r.a,{type:"text",id:"node-maintenance-reason",value:M,onChange:(e,t)=>T(t)}))),!!k&&!R&&n.createElement(i.a,null,n.createElement(c.a,{variant:"warning",title:u("metal3-plugin~The Ceph storage cluster is not in a healthy state."),isInline:!0},u("metal3-plugin~Maintenance should not be started until the health of the storage cluster is restored."))))),n.createElement(d.g,{submitDisabled:!N,errorMessage:g,inProgress:h,submitText:w,cancel:v}))}),f=Object(d.m)(g)},6878:function(e,t,a){"use strict";a.d(t,"c",(function(){return m})),a.d(t,"d",(function(){return b})),a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return O})),a.d(t,"e",(function(){return h}));var n=a(10),l=a(8),i=a(15),s=a(8386),r=a(8388),c=a(177),o=a(8389),d=a(11787),u=function(e,t,a,n){return new(a||(a=Promise))((function(l,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function r(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,r)}c((n=n.apply(e,t||[])).next())}))};const m=e=>Object(l.pb)(c.a,e,[{op:"replace",path:"/spec/online",value:!1}]),b=e=>Object(l.pb)(c.a,e,[{op:"replace",path:"/metadata/annotations",value:Object.assign(Object.assign({},e.metadata.annotations),{"reboot.metal3.io":""})}]),p=(e,t)=>u(void 0,void 0,void 0,(function*(){if(yield Object(l.pb)(n.MachineModel,e,[new s.a("/metadata/annotations").setObjectUpdate(r.a,"true",Object(i.Dc)(e)).build()]),t){const a=Object(o.b)(t);if(a>0)try{yield Object(l.pb)(n.MachineSetModel,t,[new s.a("/spec/replicas").replace(a-1).build()])}catch(t){yield Object(l.pb)(n.MachineModel,e,[new s.a("/metadata/annotations").setObjectUpdate(r.a,"false",Object(i.Dc)(e)).build()])}}else yield Object(l.lb)(n.MachineModel,e)})),O=({name:e,BMCAddress:t,bootMACAddress:a,disableCertificateVerification:i,description:s,namespace:r,password:o,username:m,online:b,enablePowerManagement:p,bootMode:O})=>u(void 0,void 0,void 0,(function*(){const u=p&&Object(d.b)(e,r,m,o),h=Object(d.a)(e,r,t,a,i,b,s,p,O);p&&(yield Object(l.jb)(n.SecretModel,u)),yield Object(l.jb)(c.a,h)})),h=(e,t,{name:a,BMCAddress:i,bootMACAddress:r,disableCertificateVerification:o,description:m,namespace:b,password:p,username:O,enablePowerManagement:h,bootMode:E})=>u(void 0,void 0,void 0,(function*(){const u=[...new s.a("/spec").buildAddObjectKeysPatches({description:m,bootMACAddress:r,bootMode:E},e.spec)];if(h){if(t){const e=new s.a("/data").buildAddObjectKeysPatches({username:btoa(O),password:btoa(p)},t.data);e.length>0&&(yield Object(l.pb)(n.SecretModel,t,e))}else yield Object(l.jb)(n.SecretModel,Object(d.b)(a,b,O,p));u.push(...new s.a("/spec/bmc").buildAddObjectKeysPatches({address:i,credentialsName:Object(d.c)(a),disableCertificateVerification:o},e.spec.bmc))}else t&&(yield Object(l.lb)(n.SecretModel,t),u.push(new s.a("/spec/bmc").remove().build()));u.length>0&&(yield Object(l.pb)(c.a,e,u))}))},7469:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(8),l=a(7470);const i=(e,t,a)=>Object(n.jb)(a,Object(l.a)({nodeName:e,reason:t,model:a}))},7470:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(8);const l=({generateName:e,nodeName:t,reason:a,model:l})=>({apiVersion:Object(n.n)(l),kind:l.kind,metadata:{generateName:(e||t)+"-"},spec:{nodeName:t,reason:a}})},7557:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(1216),l=a(696),i=a(1944);const s=e=>e?Object(n.b)(e)?{status:l.w,titleKey:l.x[l.w]}:"Succeeded"===Object(i.x)(e)?{status:l.y,titleKey:l.x[l.y]}:{status:l.v,titleKey:l.x[l.v]}:null},7558:function(e,t,a){"use strict";var n=a(0),l=a(7),i=a(14),s=a(13),r=a(5),c=a(15),o=a(696),d=a(177),u=a(1944),m=a(11781);a(11786);t.a=({status:e,titleKey:t,descriptionKey:a,host:b,nodeMaintenance:p,className:O})=>{var h,E;const{t:g}=Object(l.useTranslation)(),f=g(t)||e,j=null===(E=(h=(e=>({[o.t]:t=>n.createElement("div",{className:"bmh-status-action"},n.createElement(i.Link,{to:Object(r.uc)(d.a,t.metadata.name,t.metadata.namespace)+"/edit?powerMgmt"},e("metal3-plugin~Add credentials")))}))(g))[e])||void 0===E?void 0:E.call(h,b);switch(!0){case[o.v,o.y].includes(e):return n.createElement(m.a,{title:f,nodeMaintenance:p,className:O});case[o.w,...o.h].includes(e):return n.createElement(c.Db,{title:f,className:O},a&&g(a),j);case o.a.includes(e):return n.createElement(c.N,{title:f,className:O},n.createElement("p",null,g(a)),n.createElement("p",null,Object(u.h)(b)),j);case o.u.includes(e):return n.createElement(c.dc,{title:f,className:O},a&&g(a),j);case o.c.includes(e):return n.createElement(c.Z,{title:f,className:O},a&&g(a),j);default:{const t=n.createElement(c.cc,{status:e,title:f,className:O});return a||j?n.createElement(s.q,{title:f,statusBody:t},a&&g(a),j):t}}}},8383:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(10),l=a(8),i=a(15),s=a(11778);const r=e=>{const t={apiVersion:Object(l.n)(n.MachineSetModel),kind:n.MachineSetModel.kind};return(Object(i.rd)(e)||[]).find(e=>Object(s.a)(t,e,!0))}},8384:function(e,t,a){"use strict";var n=a(0),l=a(15);t.a=({machine:e,node:t})=>n.createElement(n.Fragment,null,Object(l.md)(t).sort().join(", ")||Object(l.Zc)(e)||l.E)},8385:function(e,t,a){"use strict";a.d(t,"a",(function(){return v})),a.d(t,"b",(function(){return _}));var n=a(131),l=a(5),i=a(10),s=a(8),r=a(15),c=a(8386),o=a(696),d=a(8388),u=a(6878),m=a(177),b=a(1944),p=a(8383),O=a(8389),h=a(6443),E=a(8390),g=a(11789),f=a(6847),j=a(6609);const v=[(e,t,{hasNodeMaintenanceCapability:a,nodeMaintenance:n,nodeName:l,t:i})=>({hidden:!l||!a||!!n,label:i("metal3-plugin~Start Maintenance"),callback:()=>Object(f.a)({nodeName:l})}),(e,t,{hasNodeMaintenanceCapability:a,nodeMaintenance:n,nodeName:i,maintenanceModel:s,t:r})=>({hidden:!i||!a||!n,label:r("metal3-plugin~Stop Maintenance"),callback:()=>Object(j.a)(n,r),accessReview:n&&Object(l.Eb)(s,n,"delete")}),(e,t,{bmoEnabled:a,t:n})=>{const i=n("metal3-plugin~Power On");return{hidden:[o.e,o.g].includes(Object(b.n)(t))||!Object(b.B)(t)||!a,label:i,callback:()=>{const e=[{op:"replace",path:"/spec/online",value:!0}],a=Object(b.A)(t);a&&e.push({op:"remove",path:"/metadata/annotations/"+Object(c.b)(a)}),Object(s.pb)(m.a,t,e)},accessReview:t&&Object(l.Eb)(m.a,t,"update")}},(e,t,{machine:a,machineSet:s,bmoEnabled:c,t:m})=>({hidden:[o.d,o.f].includes(Object(b.n)(t))||Object(b.E)(t)||!a||!!Object(r.Dc)(a,{})[d.a]||Object(p.a)(a)&&!s||!c,label:m("metal3-plugin~Deprovision"),callback:()=>Object(n.n)({title:m("metal3-plugin~Deprovision {{name}}",{name:Object(r.dd)(t)}),message:m(s?"metal3-plugin~Are you sure you want to delete {{name}} machine and scale down its machine set?":"metal3-plugin~Are you sure you want to delete {{name}} machine?",{name:Object(r.dd)(a)}),btnText:m("metal3-plugin~Deprovision"),executeFn:()=>Object(u.b)(a,s)}),accessReview:s?Object(l.Eb)(i.MachineSetModel,s,"update"):Object(l.Eb)(i.MachineModel,a,"delete")}),(e,t,{nodeName:a,status:n,bmoEnabled:i,t:s})=>({hidden:[o.d,o.f].includes(Object(b.n)(t))||!Object(b.B)(t)||!i,label:s("metal3-plugin~Power Off"),callback:()=>Object(E.b)({host:t,nodeName:a,status:n}),accessReview:t&&Object(l.Eb)(m.a,t,"update")}),(e,t,{bmoEnabled:a,t:n})=>({hidden:[o.d,o.f].includes(Object(b.n)(t))||Object(b.E)(t)||!Object(b.B)(t)||!a,label:n("metal3-plugin~Restart"),callback:()=>Object(g.a)({host:t}),accessReview:t&&Object(l.Eb)(m.a,t,"update")}),l.F.factory.ModifyLabels,l.F.factory.ModifyAnnotations,(e,t,{t:a})=>({label:a("metal3-plugin~Edit Bare Metal Host"),href:`/k8s/ns/${Object(r.ed)(t)}/${Object(s.Hb)(e)}/${Object(r.dd)(t)}/edit`}),(e,t,{status:a,t:i})=>{const s=i("metal3-plugin~Delete Bare Metal Host");return{hidden:![o.s,o.q,o.k,o.t,...o.a].includes(a.status),label:s,callback:()=>Object(n.q)({kind:e,resource:t}),accessReview:Object(l.Eb)(m.a,t,"delete")}}],_=(e,t,{machines:a,machineSets:n,nodes:l,nodeMaintenances:i},{hasNodeMaintenanceCapability:s,maintenanceModel:c,bmoEnabled:o,t:d})=>{const u=Object(b.j)(t,a),m=Object(r.Vc)(u,l),E=Object(r.Wc)(u),g=Object(b.a)(i,E),f=Object(h.b)({host:t,machine:u,node:m,nodeMaintenance:g}),j=Object(p.a)(u),_=Object(O.a)(n,j&&j.uid);return v.map(a=>a(e,t,{hasNodeMaintenanceCapability:s,nodeMaintenance:g,nodeName:E,machine:u,machineSet:_,status:f,bmoEnabled:o,maintenanceModel:c,t:d}))}},8386:function(e,t,a){"use strict";var n=a(8387);a.d(t,"a",(function(){return n.a})),a.d(t,"b",(function(){return n.b}))},8387:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return o}));var n=a(107),l=a(225),i=a(839),s=a(197);const r=e=>e.replace("~","~0").replace("/","~1");var c;!function(e){e.ADD="add",e.REMOVE="remove",e.REPLACE="replace"}(c||(c={}));class o{constructor(e){this.valueIndex=-1,this.valueKey="",this.valid=!0,this.setValue=e=>(this.value=e,this),this.setOperation=e=>(this.operation=e,this),this.setListIndex=e=>(this.valueIndex=e,this),this.add=e=>(this.value=e,this.setOperation(c.ADD)),this.replace=e=>(this.value=e,this.setOperation(c.REPLACE)),this.remove=()=>this.setOperation(c.REMOVE),this.setListRemove=(e,t)=>{if(this.value=void 0,this.operation=c.REMOVE,e){const a=e.findIndex(t);a<0?this.valid=!1:this.valueIndex=1===e.length?-1:a}else this.valueIndex=-1;return this},this.setListUpdate=(e,t,a=((e,t)=>e===t))=>{if(t){const l=t.findIndex(t=>a(t,e));l<0?(this.value=e,this.valueIndex=t.length,this.operation=c.ADD):n.a(t[l],e)?this.valid=!1:(this.value=e,this.valueIndex=l,this.operation=c.REPLACE)}else this.value=[e],this.valueIndex=-1,this.operation=c.ADD;return this},this.setObjectRemove=(e,t)=>(l.a(t,[e])?(this.value=void 0,this.valueKey=e,this.operation=c.REMOVE):this.valid=!1,this),this.setObjectUpdate=(e,t,a)=>(null==a?this.value={[e]:t}:a[e]===t?this.valid=!1:(this.value=t,this.valueKey=e),this.operation=l.a(a,[e])?c.REPLACE:c.ADD,this),this.isPatchValid=()=>this.valid&&!(!this.path||!this.operation),this.build=()=>{if(!this.isPatchValid())return null;let e;e=this.valueIndex<0?this.valueKey?Object(s.e)(this.path,"/"+r(this.valueKey)):this.path:`${Object(s.e)(this.path,"/")}${this.valueIndex}`;const t={op:this.operation,path:e};return this.operation!==c.REMOVE&&(t.value=this.value),t},this.buildAddObjectKeysPatches=(e,t)=>{if(!e)return[];let a;return a=t?Object.keys(e).map(a=>new o(this.path).setObjectUpdate(a,e[a],t)):[new o(this.path).add(e)],i.a(a.map(e=>e.build()))},this.path=e}}},8388:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n="machine.openshift.io/cluster-api-delete-machine"},8389:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));var n=a(225),l=a(15);const i=(e,t)=>t&&e?e.find(e=>Object(l.Jd)(e)===t):null,s=(e,t=0)=>n.a(e,"spec")?e.spec.replicas:t},8390:function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return M}));var n=a(0),l=a(80),i=a(19),s=a(967),r=a(406),c=a(472),o=a(7),d=a(40),u=a(5),m=a(108),b=a(10),p=a(696),O=a(2260),h=a(6878),E=a(11788),g=a(6847);const f=({restart:e})=>{const{t:t}=Object(o.useTranslation)();return n.createElement(l.a,{variant:"warning",title:t("metal3-plugin~Applications may be temporarily disrupted."),isInline:!0},t(e?"metal3-plugin~Workloads currently running on this host will not be moved before restarting. This may cause service disruptions.":"metal3-plugin~Workloads currently running on this host will not be moved before powering off. This may cause service disruptions."))},j=(e,t)=>{const a=Object(E.c)(t),n=Object(E.b)(t);return a.length||n.length?a.length&&!n.length?e("metal3-plugin~all workloads have already been moved, but {{length}} static pods have been skipped.",{length:a.length}):!a.length&&n.length?e("metal3-plugin~all workloads have already been moved, but {{length}} daemon sets have been skipped.",{length:n.length}):e("metal3-plugin~all workloads have already been moved, but {{podListlength}} static pods and {{daemonListlength}} daemon sets have been skipped.",{podListlength:a.length,daemonListlength:n.length}):e("metal3-plugin~all workloads have already been moved.")},v=({canStartMaintenance:e,forceOff:t,nodeName:a,setForceOff:l,status:d,pods:u,loadError:m,cancel:b})=>{const{t:O}=Object(o.useTranslation)(),h=[p.v,p.y,p.w].includes(d.status);let j;a?h||(j=n.createElement("p",null,n.createElement(o.Trans,{ns:"metal3-plugin"},"To power off gracefully,"," ",n.createElement(i.a,{variant:"link",onClick:()=>Object(g.a)({nodeName:a}),isDisabled:!e,isInline:!0},"start maintenance")," ","on this host to move all managed workloads to other nodes in the cluster."))):j=n.createElement("p",null,O("metal3-plugin~The host will be powered off gracefully."));const v=O(a?"metal3-plugin~Workloads will not be moved before the host powers off.":"metal3-plugin~The host will power off immediately as if it were unplugged.");return n.createElement(s.a,{hasGutter:!0},n.createElement(r.a,null,j,n.createElement(E.a,{status:d.status,nodePods:u,loadError:m,onLinkClicked:b})),n.createElement(r.a,null,n.createElement(c.a,{id:"host-force-off",label:O("metal3-plugin~Power off immediately"),onChange:(e,t)=>l(t),isChecked:t,"data-checked-state":t}),n.createElement("div",{className:"text-secondary"},v)),n.createElement(r.a,null,t&&n.createElement(f,null)))},_=Object(u.Oc)(({host:e,nodeName:t,status:a,inProgress:l,errorMessage:i,handlePromise:s,close:r,cancel:c})=>{const[E,g,f]=Object(m.a)({kind:b.PodModel.kind,namespaced:!1,isList:!0,fieldSelector:"spec.nodeName="+t}),{t:_}=Object(o.useTranslation)(),[M]=Object(O.a)(),[T,y]=n.useState(!1),N=!f&&(e=>[p.y,p.q,p.k].includes(e))(a.status),k=a.status===p.y;return n.createElement("form",{onSubmit:t=>{t.preventDefault();const a=Object(h.c)(e);return s(a,r)},name:"form",className:"modal-content"},n.createElement(d.h,null,_("metal3-plugin~Power Off Host")),n.createElement(d.e,null,g?N?k?_("metal3-plugin~Host is ready to be gracefully powered off. The host is currently under maintenance and {{message}}",{message:j(_,E)}):_("metal3-plugin~Host is ready to be gracefully powered off."):n.createElement(v,{forceOff:T,setForceOff:y,canStartMaintenance:!k&&t&&!!M,nodeName:t,status:a,pods:E,loadError:f,cancel:c}):n.createElement(u.S,null)),n.createElement(d.g,{cancel:c,errorMessage:i,inProgress:l,submitDisabled:!N&&!T,submitText:_("metal3-plugin~Power Off")}))}),M=Object(d.m)(_)},8391:function(e,t,a){"use strict";var n=a(0),l=a(5),i=a(10),s=a(8),r=a(15);t.a=({nodeName:e})=>e?n.createElement(l.hb,{kind:Object(s.Hb)(i.NodeModel),name:e}):n.createElement(n.Fragment,null,r.E)},8392:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return d}));var n=a(1992),l=a(50),i=a(240),s=a(22),r=a(696);const c=Object.freeze({registering:{title:"Registering",states:r.j},ready:{title:"Available",states:[r.q,r.k]},provisioning:{title:"Provisioning",states:r.i},provisioned:{title:"Provisioned",states:[r.p,r.o]},error:{title:"Error",states:r.a},maintenance:{title:"Maintenance",states:Object.keys(r.x)},unmanaged:{title:"Unmanaged",states:[r.t]},other:{title:"Other",states:Object.keys(r.r)}}),o=e=>n.a(c,({states:t})=>t.includes(e.status.status)),d=e=>({filterGroupName:e("metal3-plugin~Status"),type:"host-status",reducer:o,items:l.a(c,({title:t},a)=>({id:a,title:e(t)})),filter:(e,t)=>{var a;const n=o(t);return(null===(a=e.selected)||void 0===a?void 0:a.includes(n))||!i.a(e.all,n)||s.a(e.selected)}})},8393:function(e,t,a){"use strict";var n=a(0),l=a(874),i=a(11792),s=a(11791),r=a(696),c=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(a[n[l]]=e[n[l]])}return a};t.a=e=>{var{powerStatus:t}=e,a=c(e,["powerStatus"]);return t===r.e?n.createElement(s.a,Object.assign({},a)):t===r.d?n.createElement(i.a,Object.assign({},a)):n.createElement(l.a,Object.assign({},a))}},8395:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return i}));const n=/^[0-9a-fA-F]{2}(:[0-9a-fA-F]{2}){5}$/,l=(new RegExp(/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/),new RegExp(/^([a-z][a-z0-9+\-.]*:(\/\/([a-z0-9\-._~%!$&'()*+,;=]+@)?([a-z0-9\-._~%]+|\[[a-f0-9:.]+\]|\[v[a-f0-9][a-z0-9\-._~%!$&'()*+,;=:]+\])(:[0-9]+)?(\/[a-z0-9\-._~%!$&'()*+,;=:@]+)*\/?|(\/?[a-z0-9\-._~%!$&'()*+,;=:@]+(\/[a-z0-9\-._~%!$&'()*+,;=:@]+)*\/?)?)|([a-z0-9\-._~%!$&'()*+,;=@]+(\/[a-z0-9\-._~%!$&'()*+,;=:@]+)*\/?|(\/[a-z0-9\-._~%!$&'()*+,;=:@]+)+\/?))(\?[a-z0-9\-._~%!$&'()*+,;=:@/?]*)?(#[a-z0-9\-._~%!$&'()*+,;=:@/?]*)?$/i),new RegExp(/^((ipmi|idrac|idrac\+http|idrac-virtualmedia|irmc|redfish|redfish\+http|redfish-virtualmedia|ilo5-virtualmedia|https?|ftp):(\/\/([a-z0-9\-._~%!$&'()*+,;=]+@)?([a-z0-9\-._~%]+|\[[a-f0-9:.]+\]|\[v[a-f0-9][a-z0-9\-._~%!$&'()*+,;=:]+\])(:[0-9]+)?(\/[a-z0-9\-._~%!$&'()*+,;=:@]+)*\/?|(\/?[a-z0-9\-._~%!$&'()*+,;=:@]+(\/[a-z0-9\-._~%!$&'()*+,;=:@]+)*\/?)?)|([a-z0-9\-._~%!$&'()*+,;=@]+(\/[a-z0-9\-._~%!$&'()*+,;=:@]+)*\/?|(\/[a-z0-9\-._~%!$&'()*+,;=:@]+)+\/?))(\?[a-z0-9\-._~%!$&'()*+,;=:@/?]*)?(#[a-z0-9\-._~%!$&'()*+,;=:@/?]*)?$/i)),i=/^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$/}}]);
//# sourceMappingURL=metal3-baremetalhost-chunk-c9d4e6d6056faddd9a3d.min.js.map
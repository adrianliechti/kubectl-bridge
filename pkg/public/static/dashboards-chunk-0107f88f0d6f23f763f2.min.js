(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{11827:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var a=r(0),n=r(694),o=r(4374),s=r(15),c=r(206),i=r(5793),l=r(11828),u=r(11829),p=r(5806),d=r(11830),m=r(5684),b=r(10),O=r(5784),f=r(11831);const E=[{Card:i.b},{Card:p.c}],h=[{Card:l.a},{Card:u.a}],v=[{Card:d.a}],j=()=>{const[e,t,r]=Object(m.a)(b.InfrastructureModel,"cluster"),i=Object(c.a)(s.O.CONSOLE_CAPABILITY_GETTINGSTARTEDBANNER_IS_ENABLED),l={infrastructure:e,infrastructureLoaded:t,infrastructureError:r};return a.createElement(O.a.Provider,{value:l},a.createElement(n.default,null,i&&a.createElement(f.a,null),a.createElement(o.default,{mainCards:E,leftCards:h,rightCards:v})))}},11828:function(e,t,r){"use strict";r.d(t,"a",(function(){return L}));var a=r(0),n=r(7),o=r(192),s=r(434),c=r(295),i=r(296),l=r(874),u=r(15),p=r(198),d=r(13),m=r(4379),b=r(2239),O=r(5670),f=r(10),E=r(1241),h=r(8),v=r(207),j=r(5),g=r(14),y=r(108),k=r(5784),C=function(e,t,r,a){return new(r||(r=Promise))((function(n,o){function s(e){try{i(a.next(e))}catch(e){o(e)}}function c(e){try{i(a.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,c)}i((a=a.apply(e,t||[])).next())}))},R=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r};const S=({cv:e})=>{const{t:t}=Object(n.useTranslation)(),r=Object(h.E)(e),o=Object(h.I)(e),s=Object(u.we)();switch(Object(h.y)(e)){case h.a.Updating:return a.createElement(a.Fragment,null,a.createElement("span",{className:"co-select-to-copy"},r),a.createElement("div",null,a.createElement(g.Link,{to:"/settings/cluster/"},a.createElement(l.a,{className:"co-icon-and-text__icon"}),t("public~Updating"))));case h.a.UpdatesAvailable:return a.createElement(a.Fragment,null,a.createElement("span",{className:"co-select-to-copy"},r),s&&a.createElement("div",null,a.createElement(g.Link,{to:"/settings/cluster?showVersions",className:"co-icon-space-l"},a.createElement(u.n,{className:"co-icon-space-r"}),t("public~Update cluster"))));default:return o?a.createElement("span",{className:"co-select-to-copy"},o):a.createElement("span",{className:"text-secondary"},t("public~Not available"))}},w={kind:Object(h.Hb)(f.ClusterVersionModel),namespaced:!1,name:"version",isList:!1},L=Object(O.a)(({watchK8sResource:e,stopWatchK8sResource:t})=>{const{t:r}=Object(n.useTranslation)(),l=Object(u.Fe)(u.O.OPENSHIFT),{infrastructure:O,infrastructureLoaded:f,infrastructureError:L}=a.useContext(k.a),[N,T]=a.useState(),[I,A]=a.useState(),[M,_,P]=Object(y.a)(w),[x]=Object(d.kc)(d.Bb),[F]=Object(d.kc)(d.cb);a.useEffect(()=>{if(Object(v.c)(l))return;C(void 0,void 0,void 0,(function*(){try{const e=yield fetch("version");T(e)}catch(e){A(e)}}))},[l,e,t]);const K=Object(E.e)(),V=Object(h.v)(M),W=Object(h.Q)(M),G=Object(h.z)(M),H=Object(u.Oc)(O),U=Object(u.Nc)(O),z=Object(h.H)(N);return a.createElement(o.a,{"data-test-id":"details-card",isClickable:!0,isSelectable:!0},a.createElement(s.a,{actions:{actions:a.createElement(a.Fragment,null,a.createElement(g.Link,{to:"/settings/cluster/","data-test":"details-card-view-settings"},r("public~View settings"))),hasNoOffset:!1,className:"co-overview-card__actions"}},a.createElement(c.a,null,r("public~Details"))),a.createElement(i.a,null,Object(v.c)(l)?a.createElement(j.T,null):a.createElement(m.default,null,l?a.createElement(a.Fragment,null,a.createElement(b.b,{title:r("public~Cluster API address"),isLoading:!f,error:L||O&&!U?r("public~Not available"):void 0,valueClassName:"co-select-to-copy"},U),a.createElement(b.b,{title:r("public~Cluster ID"),error:P||_&&!V?r("public~Not available"):void 0,isLoading:!_},a.createElement("div",{className:"co-select-to-copy"},V),"okd"!==window.SERVER_FLAGS.branding&&"azure"!==window.SERVER_FLAGS.branding&&a.createElement(j.z,{text:r("public~OpenShift Cluster Manager"),href:Object(h.P)(V)})),a.createElement(b.b,{title:r("public~Infrastructure provider"),error:L||O&&!H?r("public~Not available"):void 0,isLoading:!f,valueClassName:"co-select-to-copy"},H),a.createElement(b.b,{title:r("public~OpenShift version"),error:P||_&&!W?r("public~Not available"):void 0,isLoading:!_},a.createElement(S,{cv:M})),a.createElement(E.a,{clusterID:V,loading:a.createElement(b.b,{title:K},a.createElement(E.b,null))},a.createElement(b.b,{title:K},a.createElement(E.d,{clusterID:V}))),a.createElement(b.b,{title:r("public~Update channel"),isLoading:!_&&!P,error:P||_&&!G?r("public~Not available"):void 0,valueClassName:"co-select-to-copy"},G),Object(u.Vd)(O)&&a.createElement(b.b,{title:r("public~Control plane high availability"),isLoading:!1,valueClassName:"co-select-to-copy"},r("public~No (single control plane node)")),x.map(e=>{const t=e.properties.component;return a.createElement(p.c,{key:e.uid,wrapper:({children:e})=>a.createElement(b.b,{title:""},e)},a.createElement(t,null))}),F.map(e=>{const t=e.properties,{component:r,error:n,isLoading:o}=t,s=R(t,["component","error","isLoading"]);return a.createElement(p.c,{key:e.uid,wrapper:({children:e})=>a.createElement(b.b,{title:""},e)},a.createElement(b.b,Object.assign({},s,{error:null==n?void 0:n(),isLoading:null==o?void 0:o()}),a.createElement(r,null)))})):a.createElement(b.b,{key:"kubernetes",title:r("public~Kubernetes version"),error:I||N&&!z?r("public~Not available"):void 0,isLoading:!N,valueClassName:"co-select-to-copy"},z))))})},11829:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var a=r(0),n=r(192),o=r(434),s=r(295),c=r(296),i=r(967),l=r(406),u=r(7),p=r(4378),d=r(198),m=r(5670),b=r(8),O=r(5),f=r(69),E=r(13),h=r(108);const v=Object(m.a)(a.memo(({model:e,resolvedMapper:t,mapperLoader:r,additionalResources:n,expandedComponent:o})=>{const s=a.useMemo(()=>(e=>({isList:!0,kind:e.crd?Object(b.Hb)(e):e.kind,prop:"resource"}))(e),[e]),c=a.useMemo(()=>n||{},[n]),[i,l]=a.useState(),[u,d,m]=Object(h.a)(s),f=Object(h.b)(c);a.useEffect(()=>{r&&r().then(e=>l(()=>e)).catch(()=>{console.error("Mapper does not exist in module")})},[r]);const[E,v,j]=a.useMemo(()=>{const e={};let t=!0,r=!1;return n&&(t=Object.keys(n).filter(e=>!n[e].optional).every(e=>f[e].loaded),Object.keys(n).forEach(t=>{e[t]=f[t].data}),r=Object.keys(n).filter(e=>!n[e].optional).some(e=>!!f[e].loadError)),[e,t,r]},[n,f]),g=a.useCallback(()=>a.createElement(O.c,{loader:o,resource:u,additionalResources:E}),[u,E,o]);return a.createElement(p.ResourceInventoryItem,{isLoading:!d||!v,error:!!m||j,kind:e,resources:u,mapper:i||t,additionalResources:E,ExpandedComponent:o?g:null,dataTest:"resource-inventory-item"})})),j=()=>{const e=Object(f.z)(f.h),[t]=Object(E.kc)(E.ib),r=Object(f.z)(f.i),[p]=Object(E.kc)(E.jb),[m]=Object(E.kc)(E.W),b=a.useMemo(()=>{return t=r,e.map(e=>t.find(t=>t.properties.model===e.properties.model)||e);var t},[e,r]),O=a.useMemo(()=>{return e=p,t.map(t=>e.find(e=>e.properties.model===t.properties.model)||t);var e},[t,p]),{t:h}=Object(u.useTranslation)();return a.createElement(n.a,{"data-test-id":"inventory-card"},a.createElement(o.a,null,a.createElement(s.a,null,h("public~Cluster inventory"))),a.createElement(c.a,null,a.createElement(i.a,{hasGutter:!0},b.map(e=>a.createElement(l.a,{key:e.properties.model.kind},a.createElement(v,{model:e.properties.model,mapperLoader:e.properties.mapper,additionalResources:e.properties.additionalResources,expandedComponent:e.properties.expandedComponent}))),O.map(e=>a.createElement(l.a,{key:e.properties.model.kind},a.createElement(v,{model:e.properties.model,resolvedMapper:e.properties.mapper,additionalResources:e.properties.additionalResources}))),m.map(({uid:e,properties:{component:t}})=>a.createElement(d.a,{key:e},a.createElement(l.a,null,a.createElement(t,null)))))))}},11830:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var a=r(0),n=r(367),o=r(16),s=r(31),c=r(7),i=r(192),l=r(434),u=r(295),p=r(5670),d=r(10),m=r(1950),b=r(69),O=r(13),f=r(5734),E=r(14);const h={isList:!0,kind:d.EventModel.kind,prop:"events"},v=Object(p.a)(({watchK8sResource:e,stopWatchK8sResource:t,resources:r})=>(a.useEffect(()=>(e(h),()=>{t(h)}),[e,t]),a.createElement(m.RecentEventsBody,{events:r.events,moreLink:"/k8s/all-namespaces/events"}))),j=Object(s.connect)(({k8s:e})=>({models:e.getIn(["RESOURCES","models"])}))(Object(p.a)(({watchK8sResource:e,stopWatchK8sResource:t,resources:r,watchPrometheus:s,stopWatchPrometheusQuery:c,prometheusResults:i,models:l})=>{const u=Object(b.z)(b.k),[p]=Object(O.kc)(O.lb),d=a.useMemo(()=>[...u,...p].filter(e=>!!l.get(e.properties.k8sResource.kind)),[p,l,u]),E=Object(b.z)(b.j),[h]=Object(O.kc)(O.kb);a.useEffect(()=>(d.forEach((t,r)=>{e(Object(f.a)(t.properties.k8sResource,r))}),[...E,...h].forEach(e=>e.properties.queries.forEach(e=>s(e))),()=>{d.forEach((e,r)=>{t(Object(f.a)(e.properties.k8sResource,r))}),[...E,...h].forEach(e=>e.properties.queries.forEach(c))}),[e,t,s,c,d,E,h]);const v=a.useMemo(()=>n.a(d.map((e,t)=>o.a(r,[Object(f.a)(e.properties.k8sResource,t).prop,"data"],[]).filter(t=>!e.properties.isActivity||e.properties.isActivity(t)).map(t=>{var r,a,n,o;return{resource:t,timestamp:e.properties.getTimestamp?e.properties.getTimestamp(t):null,loader:null===(a=null===(r=e)||void 0===r?void 0:r.properties)||void 0===a?void 0:a.loader,component:null===(o=null===(n=e)||void 0===n?void 0:n.properties)||void 0===o?void 0:o.component}}))),[d,r]),j=a.useMemo(()=>[...E,...h].filter(e=>{const t=e.properties.queries.map(e=>i.getIn([e,"data"]));return e.properties.isActivity(t)}).map(e=>{var t,r;const a=e.properties.queries.map(e=>i.getIn([e,"data"]));return{loader:null===(t=e)||void 0===t?void 0:t.properties.loader,component:null===(r=e)||void 0===r?void 0:r.properties.component,results:a}}),[h,E,i]),g=a.useMemo(()=>d.every((e,t)=>{var a,n;const o=Object(f.a)(e.properties.k8sResource,t).prop;return(null===(a=r[o])||void 0===a?void 0:a.loaded)||(null===(n=r[o])||void 0===n?void 0:n.loadError)}),[d,r]),y=a.useMemo(()=>E.every(e=>e.properties.queries.every(e=>i.getIn([e,"data"])||i.getIn([e,"loadError"]))),[E,i]);return a.createElement(m.OngoingActivityBody,{loaded:g&&y,resourceActivities:v,prometheusActivities:j})})),g=a.memo(()=>{const{t:e}=Object(c.useTranslation)();return a.createElement(i.a,{"data-test-id":"activity-card",className:"co-overview-card--gradient",isClickable:!0,isSelectable:!0},a.createElement(l.a,{actions:{actions:a.createElement(a.Fragment,null,a.createElement(E.Link,{to:"/k8s/all-namespaces/events","data-test":"view-events-link"},e("public~View events"))),hasNoOffset:!1,className:"co-overview-card__actions"}},a.createElement(u.a,null,e("public~Activity"))),a.createElement(m.default,{className:"co-overview-dashboard__activity-body"},a.createElement(j,null),a.createElement(v,null)))})},11831:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var a=r(0),n=r(15),o=r(206),s=r(1420),c=r(11832),i=r(11836),l=r(11837);r(11838);const u=()=>{const e=Object(o.a)(n.O.OPENSHIFT),[t,r,u]=Object(s.e)(l.a),[p,d]=Object(n.ef)(n.V,!0);return e&&u&&t===s.c.SHOW?a.createElement("div",{className:"co-dashboard-getting-started-section"},a.createElement(s.b,{isOpen:p,setIsOpen:d,setShowState:r},a.createElement(c.a,null),a.createElement(s.d,{featured:["user-impersonation","monitor-sampleapp","rhdh-installation-via-operator","explore-pipelines","install-serverless"]}),a.createElement(i.a,null))):null}},11832:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var a=r(0),n=r(7),o=r(11835),s=r(15),c=r(1420),i=r(11833),l=r(11834),u=r(5);const p=()=>{const{t:e}=Object(n.useTranslation)(),t=Object(s.we)(),r=Object(i.a)(),p=[t&&r,Object(l.a)()].filter(Boolean);if(0===p.length)return null;const d=Object(u.Qb)(u.Lb.postInstallationMachineConfigurationTasks),m={id:"machine-configuration",title:e("public~View all steps in documentation"),href:d,external:!0};return a.createElement(c.a,{id:"cluster-setup",icon:a.createElement(o.a,{color:"var(--co-global--palette--blue-400)","aria-hidden":"true"}),title:e("public~Set up your cluster"),titleColor:"var(--co-global--palette--blue-400)",description:e("public~Finish setting up your cluster with recommended configurations."),links:p,moreLink:!Object(u.hc)()&&m})}},11833:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var a=r(7),n=r(10),o=r(5),s=r(7559);const c=()=>{var e,t;const{t:r}=Object(a.useTranslation)(),c=Object(s.a)(),[i,l,u]=Object(s.b)(c);if(!c||!i||!l||u)return null;return(null===(t=null===(e=i.spec)||void 0===e?void 0:e.identityProviders)||void 0===t?void 0:t.length)>0?null:{id:"identity-providers",title:r("public~Add identity providers"),href:Object(o.uc)(n.OAuthModel,"cluster")}}},11834:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var a=r(0),n=r(7),o=r(10),s=r(175),c=r(108),i=r(899),l=r(2348);const u=()=>{const{t:e}=Object(n.useTranslation)(),t=Object(s.d)({group:o.SecretModel.apiGroup,resource:o.SecretModel.plural,namespace:"openshift-monitoring",name:"alertmanager-main",verb:"patch"}),[r]=(u=t,Object(c.a)(u?{kind:o.SecretModel.kind,isList:!1,namespaced:!0,namespace:"openshift-monitoring",name:"alertmanager-main"}:null));var u;const p=Object(a.useMemo)(()=>{const{config:e}=Object(i.a)(r);return!!e&&Object(l.c)(e)>0},[r]);return t&&p?{id:"alert-receivers",title:e("public~Configure alert receivers"),href:"/monitoring/alertmanagerconfig"}:null}},11836:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var a=r(0),n=r(283),o=r(7),s=r(6785),c=r(15),i=r(206),l=r(1420),u=r(3292),p=r(5);const d=()=>{const{t:e}=Object(o.useTranslation)(),t=Object(i.a)(c.O.CAN_LIST_PACKAGE_MANIFEST),r=Object(i.a)(c.O.CAN_LIST_OPERATOR_GROUP),d=Object(i.a)(c.O.LIGHTSPEED_IS_AVAILABLE_TO_INSTALL),m=t&&r&&d,b=n.parse(Object(c.Ne)()),O=b?`${b.major}.${b.minor}`:"",f=a.useMemo(()=>[{id:"openshift-ai",title:e("public~OpenShift AI"),description:e("public~Build, deploy, and manage AI-enabled applications."),href:"/operatorhub/all-namespaces?keyword=openshift+ai&details-item=rhods-operator-redhat-operators-openshift-marketplace"},...m?[{id:"lightspeed",title:e("public~OpenShift Lightspeed"),description:e("public~Your personal AI helper."),href:u.b}]:[{id:"new-translations",title:e("public~French and Spanish now available"),description:e("public~Console language options now include French and Spanish."),href:"/user-preferences/language"}]],[m,e]),E={id:"whats-new",title:e("public~See what's new in OpenShift {{version}}",{version:O}),href:p.m,external:!0};return a.createElement(l.a,{id:"admin-features",icon:a.createElement(s.a,{color:"var(--co-global--palette--orange-400)","aria-hidden":"true"}),title:e("public~Explore new features and capabilities"),titleColor:"var(--co-global--palette--orange-400)",links:f,moreLink:E})}},11837:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));const a="console.clusterDashboard.gettingStarted"},11838:function(e,t,r){},5526:function(e,t,r){"use strict";r.r(t),r.d(t,"getCardsOnPosition",(function(){return b})),r.d(t,"getPluginTabPages",(function(){return O})),r.d(t,"mapStateToProps",(function(){return f})),r.d(t,"DashboardsPage",(function(){return E}));var a=r(0),n=r(14),o=r(31),s=r(7),c=r(11827),i=r(5),l=r(694),u=r(4374),p=r(784),d=r(69),m=r(13);const b=(e,t,r)=>[...e.filter(e=>e.properties.position===r).map(e=>({Card:()=>a.createElement(i.c,{loader:e.properties.loader}),span:e.properties.span})),...t.filter(e=>e.properties.position===r).map(e=>({Card:()=>a.createElement(i.c,{loader:e.properties.component}),span:e.properties.span}))],O=(e,t,r,n,o)=>(e=e.filter(e=>e.properties.navSection===n)).map(e=>{const n=t.filter(t=>t.properties.tab===e.properties.id);return{href:e.properties.id===o?"":e.properties.id,name:e.properties.title,component:()=>a.createElement(l.default,null,a.createElement(u.default,{mainCards:b(n,r,m.j.MAIN),leftCards:b(n,r,m.j.LEFT),rightCards:b(n,r,m.j.RIGHT)}))}}),f=e=>({kindsInFlight:e.k8s.getIn(["RESOURCES","inFlight"]),k8sModels:e.k8s.getIn(["RESOURCES","models"])}),E=Object(o.connect)(f)(({kindsInFlight:e,k8sModels:t})=>{const{t:r}=Object(s.useTranslation)(),o=r("public~Overview"),l=Object(d.z)(d.l),u=Object(d.z)(d.a),b=Object(d.z)(m.nb),f=Object(d.z)(m.db),E=Object(n.useLocation)(),h=a.useMemo(()=>O([...l,...b],u,f,"home",""),[l,b,u,f]),v=a.useMemo(()=>[{href:"",nameKey:"public~Cluster",component:c.a},...h],[h]),j=a.useMemo(()=>{var e;return null===(e=v.find(e=>"/dashboards"+e.href===E.pathname))||void 0===e?void 0:e.badge},[v,E.pathname]),g={telemetryPrefix:"Overview",titlePrefix:o};return e&&0===t.size?a.createElement(i.S,null):a.createElement(a.Fragment,null,a.createElement(p.a.Provider,{value:g},a.createElement(i.Z,{title:o,detail:!0,badge:j}),a.createElement(i.E,{pages:v,noStatusBox:!0})))})},5684:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r(0),n=r(8),o=function(e,t,r,a){return new(r||(r=Promise))((function(n,o){function s(e){try{i(a.next(e))}catch(e){o(e)}}function c(e){try{i(a.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,c)}i((a=a.apply(e,t||[])).next())}))};const s=(e,t,r,s)=>{const[c,i]=a.useState(),[l,u]=a.useState(!1),[p,d]=a.useState();return a.useEffect(()=>{o(void 0,void 0,void 0,(function*(){try{d(null),u(!1),i(null);const a=yield Object(n.kb)(e,t,r,s);i(a)}catch(e){d(e)}finally{u(!0)}}))},[e,t,r,s]),[c,l,p]}},5734:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));const a=(e,t)=>Object.assign(Object.assign({},e),{prop:`${t}-${e.prop}`})},5738:function(e,t,r){"use strict";r.d(t,"a",(function(){return v})),r.d(t,"d",(function(){return j})),r.d(t,"b",(function(){return g})),r.d(t,"c",(function(){return y}));var a=r(0),n=r(7),o=r(406),s=r(967),c=r(4377),i=r(5791),l=r(1409),u=r(52),p=r(5),d=r(108),m=r(5670),b=r(5734),O=r(517),f=r(5784);const E=({operatorStatus:e,isResolved:t,key:r,Component:n,LoadingComponent:o})=>{const s=n;return t?a.createElement(s,{key:r,operatorStatus:e}):a.createElement(p.c,{key:e.operators[0].metadata.uid,operatorStatus:e,loader:n,LoadingComponent:o})},h=({resources:e,operatorExtensions:t,dynamicOperatorSubsystems:r})=>{const{t:c}=Object(n.useTranslation)(),l=[...t.map((t,r)=>{const n=t.resources.reduce((t,a)=>(t[a.prop]=e[Object(b.a)(a,r).prop],t),{});return a.createElement(o.a,{key:t.title},a.createElement(i.a,{resources:n,getOperatorsWithStatuses:t.getOperatorsWithStatuses,title:t.title,linkTo:t.viewAllLink||Object(p.tc)(t.resources[0].kind),Row:E,Component:t.operatorRowLoader,isResolved:!1}))}),...r.map((t,r)=>{const n=t.resources.reduce((t,a)=>(t[a.prop]=e[Object(b.a)(a,r).prop],t),{});return a.createElement(o.a,{key:t.title},a.createElement(i.a,{resources:n,getOperatorsWithStatuses:t.getOperatorsWithStatuses,title:t.title,linkTo:t.viewAllLink||Object(p.tc)(t.resources[0].kind),Row:E,Component:t.operatorRowLoader,isResolved:!0}))})].reverse();return a.createElement(s.a,{hasGutter:!0},a.createElement(o.a,null,c("public~Operators create, configure, and manage applications by extending the Kubernetes API.")),l)},v=Object(m.a)(({resources:e,watchK8sResource:t,stopWatchK8sResource:r,operatorExtensions:o,dynamicOperatorSubsystems:s})=>{const{t:i}=Object(n.useTranslation)();a.useEffect(()=>(o.forEach((e,r)=>e.resources.forEach(e=>t(Object(b.a)(e,r)))),()=>{o.forEach((e,t)=>e.resources.forEach(e=>r(Object(b.a)(e,t))))}),[t,r,o]);const p=o.map((t,r)=>{const a=t.resources.reduce((t,a)=>(t[a.prop]=e[Object(b.a)(a,r).prop]||{},t),{});if(Object.keys(a).some(e=>a[e].loadError))return{health:u.a.NOT_AVAILABLE};if(Object.keys(a).some(e=>!a[e].loaded))return{health:u.a.LOADING};const n=t.getOperatorsWithStatuses(a);if(!n.length)return{health:u.a.OK};const o=Object(l.a)(n);return{health:o[0].status.health,count:o.length}}),d=Object(l.b)(p,i);return a.createElement(c.default,{title:i("public~Operators"),state:d.health,details:d.detailMessage,popupTitle:i("public~Operator status")},a.createElement(h,{resources:e,operatorExtensions:o,dynamicOperatorSubsystems:s}))}),j=Object(m.a)(({watchURL:e,stopWatchURL:t,urlResults:r,resources:n,watchK8sResource:o,stopWatchK8sResource:s,subsystem:i,models:l})=>{const u=i.additionalResource&&!!l.get(i.additionalResource.kind);a.useEffect(()=>(e(i.url,i.fetch?i.fetch:void 0),u&&o(i.additionalResource),()=>{t(i.url),u&&s(i.additionalResource)}),[e,t,o,s,i,u]);const d=r.getIn([i.url,"data"]),m=r.getIn([i.url,"loadError"]),b=i.additionalResource?n[i.additionalResource.prop]:null,O=i.healthHandler(d,m,b);return a.createElement(c.default,{title:i.title,state:O.state,details:O.message,popupTitle:i.popupTitle,popupBodyContent:i.popupComponent?e=>a.createElement(p.c,{loader:i.popupComponent,healthResult:d,healthResultError:m,k8sResult:b,hide:e}):void 0})}),g=Object(m.a)(({watchK8sResource:e,stopWatchK8sResource:t,resources:r,watchPrometheus:o,stopWatchPrometheusQuery:s,prometheusResults:i,subsystem:l,models:u})=>{const{t:d}=Object(n.useTranslation)(),{infrastructure:m}=a.useContext(f.a),b=l.additionalResource&&!!u.get(l.additionalResource.kind);a.useEffect(()=>(l.queries.forEach(e=>o(e)),b&&e(l.additionalResource),()=>{l.queries.forEach(e=>s(e)),b&&t(l.additionalResource)}),[e,t,o,s,l,b]);const E=a.useMemo(()=>l.queries.map(e=>{const[t,r]=Object(O.b)(i,e);return{response:t,error:r}}),[i,l.queries]),h=l.additionalResource?r[l.additionalResource.prop]:null,v=l.healthHandler(E,d,h,m);return a.createElement(c.default,{title:l.title,state:v.state,details:v.message,popupTitle:l.popupTitle,popupClassname:l.popupClassname,popupKeepOnOutsideClick:l.popupKeepOnOutsideClick,popupBodyContent:l.popupComponent?e=>a.createElement(p.c,{loader:l.popupComponent,responses:E,k8sResult:h,hide:e}):void 0})}),y=({subsystem:e,namespace:t})=>{const{t:r}=Object(n.useTranslation)(),{title:o,resources:s,healthHandler:i,popupComponent:l,popupTitle:u}=e,m=a.useMemo(()=>Object.assign(Object.assign({},s),s.imageManifestVuln&&{imageManifestVuln:Object.assign(Object.assign({},s.imageManifestVuln),{namespace:t})}),[s,t]),b=Object(d.b)(m),O=i(b,r);return a.createElement(c.default,{title:o,state:O.state,details:O.message,popupTitle:u},l&&b&&a.createElement(p.c,Object.assign({loader:l},b,{namespace:t})))}},5784:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(0);const n=a.createContext({infrastructureLoaded:!0,infrastructureError:null})},5791:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var a=r(0),n=r(363),o=r(7),s=r(14),c=r(1409),i=r(52),l=r(2229);r(5792);const u=({resources:e,getOperatorsWithStatuses:t,title:r,linkTo:u,Row:p,Component:d,isResolved:m})=>{const{t:b}=Object(o.useTranslation)(),O=n.a(e).some(e=>e.loadError),f=t(e),E=Object(c.a)(f).sort((e,t)=>e.operators[0].metadata.name.localeCompare(t.operators[0].metadata.name)),h=E.every(e=>e.status.health===i.a.OK),v=a.useCallback(()=>a.createElement("div",{className:"co-status__operator-skeleton"}),[]);return f.length?a.createElement(l.StatusPopupSection,{firstColumn:a.createElement(a.Fragment,null,a.createElement("span",null,r),a.createElement("span",{className:"text-secondary co-status__operator-detail"}," ",b("console-shared~({{operatorStatusLength}} installed)",{operatorStatusLength:f.length}))),secondColumn:b("console-shared~Status")},O?a.createElement("div",{className:"text-secondary"},b("console-shared~Not available")):!h&&E.map(e=>a.createElement(p,{key:e.operators[0].metadata.uid,Component:d,operatorStatus:e,LoadingComponent:v,isResolved:m})),a.createElement(l.default,{value:b("console-shared~All {{status}}",{status:f[0].status.title.toLowerCase()}),icon:f[0].status.icon},a.createElement(s.Link,{to:u},b("console-shared~View all")))):null}},5792:function(e,t,r){},5793:function(e,t,r){"use strict";r.d(t,"a",(function(){return w})),r.d(t,"b",(function(){return L}));var a=r(0),n=r(22),o=r(31),s=r(14),c=r(7),i=r(69),l=r(13),u=r(192),p=r(434),d=r(295),m=r(5387),b=r(5388),O=r(15),f=r(4375),E=r(4364),h=r(4376),v=r(58),j=r(8),g=r(10),y=r(5738),k=r(108),C=r(206),R=r(1417);const S={kind:Object(j.Hb)(g.ClusterVersionModel),namespaced:!1,name:"version",isList:!1},w=({labelSelector:e})=>{const{t:t}=Object(c.useTranslation)(),r=Object(C.a)(O.O.CLUSTER_VERSION),[o,,i]=Object(R.a)(e),[l,u]=Object(k.a)(r?S:{}),p=Object(O.we)()&&r&&u&&Object(j.db)(l)&&!e;return a.createElement(f.default,{error:!n.a(i)},p&&a.createElement(h.StatusItem,{key:"clusterUpdate",Icon:O.n,message:t("public~A cluster version update is available")},a.createElement(s.Link,{to:"/settings/cluster?showVersions"},t("public~Update cluster"))),o.map(e=>a.createElement(h.default,{key:Object(v.h)(e,e.rule.id),alert:e})))},L=Object(o.connect)(e=>({k8sModels:e.k8s.getIn(["RESOURCES","models"])}))(({k8sModels:e})=>{const t=Object(i.z)(i.f),[r]=Object(l.kc)(l.gb),n=a.useMemo(()=>((e,t)=>e.filter(e=>{if(Object(i.g)(e)||Object(i.d)(e)||Object(l.hb)(e)||Object(l.fb)(e)){const r=e;return!(r.properties.additionalResource&&!r.properties.additionalResource.optional)||!!t.get(r.properties.additionalResource.kind)}return!0}))([...t,...r],e).map(e=>{if(Object(l.Kb)(e)||Object(l.Ib)(e)||Object(l.Jb)(e)){const t=e.properties.popupComponent?{popupComponent:()=>Promise.resolve(e.properties.popupComponent)}:{};return Object.assign(Object.assign({},e),{properties:Object.assign(Object.assign({},e.properties),t)})}return e}),[t,r,e]),o=a.useMemo(()=>n.findIndex(e=>Object(i.c)(e)||Object(l.Hb)(e)),[n]),{t:O}=Object(c.useTranslation)(),f=[];if(n.forEach(t=>{if(Object(i.g)(t)||Object(l.Kb)(t))f.push({title:t.properties.title,Component:a.createElement(y.d,{subsystem:t.properties,models:e})});else if(Object(i.d)(t)||Object(l.Ib)(t)){const{disallowedControlPlaneTopology:r}=t.properties;if((null==r?void 0:r.length)&&r.includes(window.SERVER_FLAGS.controlPlaneTopology))return;f.push({title:t.properties.title,Component:a.createElement(y.b,{subsystem:t.properties,models:e})})}else(Object(i.e)(t)||Object(l.Jb)(t))&&f.push({title:t.properties.title,Component:a.createElement(y.c,{subsystem:t.properties})})}),-1!==o){const e=[],t=[];n.forEach(r=>{Object(l.Hb)(r)?t.push(r.properties):Object(i.c)(r)&&e.push(r.properties)}),f.splice(o,0,{title:"Operators",Component:a.createElement(y.a,{operatorExtensions:e,dynamicOperatorSubsystems:t})})}return a.createElement(u.a,{"data-test-id":"status-card",className:"co-overview-card--gradient",isClickable:!0,isSelectable:!0},a.createElement(p.a,{actions:{actions:a.createElement(a.Fragment,null,a.createElement(s.Link,{to:"/monitoring/alerts","data-test":"status-card-view-alerts"},O("public~View alerts"))),hasNoOffset:!1,className:"co-overview-card__actions"}},a.createElement(d.a,null,O("public~Status"))),a.createElement(E.default,null,a.createElement(m.a,{className:"co-overview-status__health",hasGutter:!0},f.map(e=>a.createElement(b.a,{key:e.title,"data-test":e.title},e.Component)))),a.createElement(w,null))})},7559:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return i}));var a=r(108),n=r(175),o=r(10),s=r(8);const c=()=>Object(n.d)({group:o.OAuthModel.apiGroup,resource:o.OAuthModel.plural,name:"cluster",verb:"patch"}),i=e=>Object(a.a)(e?{kind:Object(s.Hb)(o.OAuthModel),isList:!1,namespaced:!1,name:"cluster"}:null)}}]);
//# sourceMappingURL=dashboards-chunk-0107f88f0d6f23f763f2.min.js.map
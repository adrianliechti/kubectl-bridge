(window.webpackJsonp=window.webpackJsonp||[]).push([[169],{4472:function(e,n,t){"use strict";t.r(n);var l=t(8166);t.d(n,"helmChartProvider",(function(){return l.a}));var a=t(8167);t.d(n,"getHelmCatalogTypeDescription",(function(){return a.a}))},5914:function(e,n,t){"use strict";t.d(n,"a",(function(){return h})),t.d(n,"u",(function(){return g})),t.d(n,"r",(function(){return y})),t.d(n,"g",(function(){return R})),t.d(n,"f",(function(){return E})),t.d(n,"e",(function(){return O})),t.d(n,"c",(function(){return j})),t.d(n,"m",(function(){return $})),t.d(n,"l",(function(){return U})),t.d(n,"j",(function(){return k})),t.d(n,"i",(function(){return C})),t.d(n,"b",(function(){return w})),t.d(n,"o",(function(){return P})),t.d(n,"p",(function(){return T})),t.d(n,"h",(function(){return H})),t.d(n,"n",(function(){return I})),t.d(n,"t",(function(){return L})),t.d(n,"k",(function(){return x})),t.d(n,"q",(function(){return D})),t.d(n,"d",(function(){return N})),t.d(n,"s",(function(){return M}));var l=t(230),a=t(380),r=t(255),i=t(22),o=t(7122),c=t(16),u=t(109),s=t(8),d=t(15),m=t(6165),p=t(5966);const h={[p.c.Deployed]:"Deployed",[p.c.Failed]:"Failed",[p.c.PendingInstall]:"PendingInstall",[p.c.PendingUpgrade]:"PendingUpgrade",[p.c.PendingRollback]:"PendingRollback",[p.c.Other]:"Other"},v=[p.c.Deployed,p.c.Failed,p.c.PendingInstall,p.c.PendingUpgrade,p.c.PendingRollback,p.c.Other],f=["unknown","uninstalled","superseded","uninstalling"],g=e=>e?e.split("-").map(e=>Object(d.te)(e)).join(""):"Unknown",b=e=>f.includes(e.info.status)?p.c.Other:e.info.status,y=e=>[{filterGroupName:e("helm-plugin~Status"),type:"helm-release-status",reducer:b,items:v.map(e=>({id:e,title:h[e]}))}],R=(e,n)=>e.filter(e=>f.includes(e.info.status)?n.includes(p.c.Other):n.includes(e.info.status)),E=(e,n)=>e.filter(e=>l(n,e.name)),O=(e,n)=>{const t=`/api/helm/releases?ns=${e}&limitInfo=${n||!1}`;return Object(u.c)(t)},j=(e,n)=>{const t=`/api/helm/release?ns=${e}&name=${n}`;return Object(u.c)(t)},$=(e,n,t)=>{const l=e.find(e=>e.version===n&&e.repoName===t);return null==l?void 0:l.urls[0]},U=(e,n)=>{var t;const l=null==e?void 0:e.find(e=>e.metadata.name===n);return(null===(t=null==l?void 0:l.spec)||void 0===t?void 0:t.name)?l.spec.name:n?Object(d.te)(n):null},k=(e,n,t)=>{const l=t.toLowerCase().split(" ").join("-");return Object.keys(e).find(e=>e.includes(`${n}--${l}`))},C=(e,n,t,l,a,i)=>{var o,c;if(n&&t){const a=U(l,t),r=k(e,n,t);return null!==(c=null===(o=null==e?void 0:e[r])||void 0===o?void 0:o.map(e=>Object.assign(Object.assign({},e),{repoName:a})))&&void 0!==c?c:[]}return r.a(e,(e,t,r)=>{const o=r.split("--").pop(),c=U(l,o);return t.forEach(t=>{var l,r;(t.name===n||a&&i&&(null===(l=null==t?void 0:t.annotations)||void 0===l?void 0:l[m.a])===a&&(null===(r=null==t?void 0:t.annotations)||void 0===r?void 0:r[m.b])===i)&&e.push(Object.assign(Object.assign({},t),{repoName:c}))}),e},[])},w=(e,n,t,l)=>{let a=e.split("--")[0];return n&&(a+=t("helm-plugin~ / App Version {{appVersion}}",{appVersion:n})),l&&(a+=t("helm-plugin~ (Provided by {{chartRepoName}})",{chartRepoName:Object(d.te)(l)})),a},P=(e,n)=>r.a(e,(e,t)=>(e[`${t.version}--${t.repoName}`]=w(t.version,t.appVersion,n,t.repoName),e),{}),A=(e,n,t)=>{switch(e){case p.a.topology:return"/topology/ns/"+n;case p.a.list:return"/helm-releases/ns/"+n;case p.a.details:return`/helm-releases/ns/${n}/release/${t}`;default:return"/helm-releases/ns/"+n}},T=(e,n,t,l,a,r,i)=>{switch(e){case p.b.Create:return{type:p.b.Create,title:l("helm-plugin~Create Helm Release"),subTitle:{form:l("helm-plugin~The Helm Release can be created by completing the form. Default values may be provided by the Helm chart authors."),yaml:l("helm-plugin~The Helm Release can be created by manually entering YAML or JSON definitions.")},helmReleaseApi:`/api/helm/chart?url=${encodeURIComponent(r)}&namespace=${t}&indexEntry=${encodeURIComponent(i)}`,fetch:u.c.post,redirectURL:A(p.a.topology,t,n)};case p.b.Upgrade:return{type:p.b.Upgrade,title:l("helm-plugin~Upgrade Helm Release"),subTitle:{form:l("helm-plugin~Upgrade by selecting a new chart version or manually changing the form values."),yaml:l("helm-plugin~Upgrade by selecting a new chart version or manually changing YAML.")},helmReleaseApi:`/api/helm/release?ns=${t}&name=${n}`,fetch:u.c.put,redirectURL:A(a,t,n)};case p.b.Rollback:return{type:p.b.Rollback,title:l("helm-plugin~Rollback Helm Release"),subTitle:"",helmReleaseApi:`/api/helm/release/history?ns=${t}&name=${n}`,fetch:u.c.patch,redirectURL:A(a,t,n)};default:return}},H=e=>Object.keys(e).reduce((n,t)=>(i.a(e[t].data)||n.push(e[t].data),n),[]),I=e=>{var n;const t=null===(n=null==e?void 0:e.files)||void 0===n?void 0:n.find(e=>"ordered-values.yaml"===e.name),l=t?atob(t.data):"";return l||(i.a(null==e?void 0:e.values)?"":Object(a.safeDump)(null==e?void 0:e.values))},L=e=>{if(!e||!e.manifest)return[];return Object(a.loadAll)(e.manifest,null,{schema:a.DEFAULT_SAFE_SCHEMA,json:!0}).filter(Boolean)},x=e=>{var n,t;const l=null===(n=null==e?void 0:e.files)||void 0===n?void 0:n.find(e=>"README.md"===e.name);return null!==(t=(null==l?void 0:l.data)&&atob(null==l?void 0:l.data))&&void 0!==t?t:""},D=e=>({Create:e("helm-plugin~Create"),Upgrade:e("helm-plugin~Upgrade"),Rollback:e("helm-plugin~Rollback")}),N=(e,n)=>{const t=`/api/helm/release/history?ns=${n}&name=${e}`;return Object(u.c)(t)},M=e=>!!e.find(e=>d.qc.includes(o.a(c.a(Object(s.vb)(Object(s.Db)(e)),"labelPlural"))))},5966:function(e,n,t){"use strict";var l,a,r;t.d(n,"c",(function(){return l})),t.d(n,"b",(function(){return a})),t.d(n,"a",(function(){return r})),function(e){e.Deployed="deployed",e.Failed="failed",e.PendingInstall="pending-install",e.PendingUpgrade="pending-upgrade",e.PendingRollback="pending-rollback",e.Other="other"}(l||(l={})),function(e){e.Create="Create",e.Upgrade="Upgrade",e.Rollback="Rollback"}(a||(a={})),function(e){e.details="details",e.list="list",e.topology="topology"}(r||(r={}))},6165:function(e,n,t){"use strict";t.d(n,"a",(function(){return l})),t.d(n,"d",(function(){return a})),t.d(n,"b",(function(){return r})),t.d(n,"f",(function(){return i})),t.d(n,"c",(function(){return o})),t.d(n,"e",(function(){return c}));const l="charts.openshift.io/name",a="charts.openshift.io/providerType",r="charts.openshift.io/provider",i="charts.openshift.io/supportURL";var o;!function(e){e.redhat="redhat",e.partner="partner",e.community="community"}(o||(o={}));const c={community:"helm-plugin~Community",partner:"helm-plugin~Partner",redhat:"helm-plugin~Red Hat"}},8166:function(e,n,t){"use strict";var l=t(0),a=t(380),r=t(7),i=t(109),o=t(108),c=t(8),u=t(15),s=t(1951),d=t(9366),m=function(e,n,t,l){return new(t||(t=Promise))((function(a,r){function i(e){try{c(l.next(e))}catch(e){r(e)}}function o(e){try{c(l.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,o)}c((l=l.apply(e,n||[])).next())}))};n.a=({namespace:e})=>{const{t:n}=Object(r.useTranslation)(),[t]=Object(u.ue)(),[p,h]=l.useState(),[v,f]=l.useState(),g=l.useMemo(()=>({hcrs:{isList:!0,kind:Object(c.Hb)(s.a)},phcrs:{isList:!0,kind:Object(c.Hb)(s.b),namespace:e}}),[e]),b=Object(o.b)(g),y=Object.keys(b).length>0&&Object.values(b).some(e=>e.loaded||!!e.loadError);l.useEffect(()=>{let e=!0;return Object(i.b)("/api/helm/charts/index.yaml?namespace="+t).then(n=>m(void 0,void 0,void 0,(function*(){if(e){const e=yield n.text(),t=Object(a.safeLoad)(e);h(t.entries)}}))).catch(n=>{e&&(h({}),f(n))}),()=>e=!1},[t]);return[l.useMemo(()=>{var t,l;return Object(d.a)(p,[...null===(t=null==b?void 0:b.hcrs)||void 0===t?void 0:t.data,...null===(l=null==b?void 0:b.phcrs)||void 0===l?void 0:l.data],e,n)},[b,p,e,n]),!!p&&y,v]}},8167:function(e,n,t){"use strict";var l=t(0),a=t(7),r=t(14),i=t(13),o=t(324),c=t(1951);const u=()=>{const[e]=Object(o.useActiveNamespace)(),[n]=Object(i.hc)({group:c.b.apiGroup,resource:c.b.plural,verb:"create",namespace:e}),t=l.createElement(l.Fragment,null," ",l.createElement(a.Trans,{ns:"helm-plugin"},"Alternatively, developers can"," ",l.createElement(r.Link,{to:`/ns/${e}/helmchartrepositories/~new/form?actionOrigin=catalog`},"try to configure their own custom Helm Chart repository"),"."));return n?t:null};n.a=()=>l.createElement(l.Fragment,null,l.createElement(a.Trans,{ns:"helm-plugin"},"Browse for charts that help manage complex installations and upgrades. Cluster administrators can customize the content made available in the catalog.",l.createElement(u,null)))},9366:function(e,n,t){"use strict";t.d(n,"a",(function(){return v}));var l=t(0),a=t(88),r=t(255),i=t(4397),o=t(1401),c=t(5),u=t(15),s=t(9367),d=t.n(s),m=t(5914),p=t(9368),h=t(6165);const v=(e,n,t="",s)=>r.a(e,(e,r,v)=>{const f=v.split("--").pop(),g=Object(m.l)(n,f);return r.forEach(n=>{var r,m,b,y,R,E,O,j,$;const{name:U,created:k,version:C,appVersion:w,description:P,keywords:A,annotations:T}=n,H=null!==(r=null==T?void 0:T[h.a])&&void 0!==r?r:"",I=null!==(m=null==T?void 0:T[h.d])&&void 0!==m?m:"",L=null!==(b=null==T?void 0:T[h.b])&&void 0!==b?b:"",x=null!==(y=null==T?void 0:T[h.f])&&void 0!==y?y:"",D=H||""+Object(u.te)(U),N=n.icon||Object(o.d)("icon-helm"),M=n.urls[0],F=encodeURIComponent(M),S=encodeURIComponent(f),V=encodeURIComponent(U),B=encodeURIComponent(v),J=`/catalog/helm-install?chartName=${V}&chartRepoName=${S}&chartURL=${F}&preselected-ns=${t}&indexEntry=${B}`,q=h.e[I]?s(h.e[I]):i.a(I),z=I===h.c.partner?l.createElement(l.Fragment,null,l.createElement("span",{style:{verticalAlign:"middle"}},D)," ",l.createElement(a.a,{content:s("helm-plugin~This Helm Chart is provided by a trusted partner and has been verified for ease of integration.")},l.createElement("img",{src:d.a,alt:s("helm-plugin~Certified")}))):null,G=(null===(R=n.maintainers)||void 0===R?void 0:R.length)>0&&l.createElement(l.Fragment,null,null===(E=n.maintainers)||void 0===E?void 0:E.map((e,n)=>l.createElement(l.Fragment,{key:n},e.name,l.createElement("br",null),l.createElement("a",{href:"mailto:"+e.email},e.email),l.createElement("br",null)))),Y=n.home&&l.createElement(c.z,{href:n.home,additionalClassName:"co-break-all",text:n.home}),_=[{label:s("helm-plugin~Latest Chart version"),value:C},{label:s("helm-plugin~Product version"),value:w},{label:s("helm-plugin~Source"),value:q},{label:s("helm-plugin~Provider"),value:L},{label:s("helm-plugin~Home page"),value:Y},{label:s("helm-plugin~Repository"),value:g},{label:s("helm-plugin~Maintainers"),value:G},{label:s("helm-plugin~Documentation"),value:"",isHidden:!0}],K=[{label:s("helm-plugin~Description"),value:l.createElement("p",null,P)},{value:l.createElement(p.a,{chartURL:M,namespace:t,chartIndexEntry:v})}],Q={uid:`${f}--${M}`,type:"HelmChart",name:D,title:z,description:P,provider:L,tags:A,creationTimestamp:k,attributes:{name:U,chartRepositoryTitle:g,version:C,providerType:q},icon:{class:null,url:N},cta:{label:s("helm-plugin~Create"),href:J},details:{properties:_,descriptions:K},supportUrl:x},W=e.findIndex(e=>{var n,t;return(null===(n=e.attributes)||void 0===n?void 0:n.name)===U&&(null===(t=e.attributes)||void 0===t?void 0:t.chartRepositoryTitle)===g||e.name===H&&e.provider===L});if(W>-1){const n=e[W];1===(null===(j=null===(O=Q.attributes)||void 0===O?void 0:O.version)||void 0===j?void 0:j.localeCompare(null===($=null==n?void 0:n.attributes)||void 0===$?void 0:$.version,void 0,{numeric:!0,sensitivity:"base"}))&&(e[W]=Q)}else e.push(Q)}),e},[])},9367:function(e,n,t){e.exports=t.p+"assets/packages/helm-plugin/icons/certified.svg"},9368:function(e,n,t){"use strict";var l=t(0),a=t(320),r=t(7),i=t(109),o=t(2237),c=function(e,n,t,l){return new(t||(t=Promise))((function(a,r){function i(e){try{c(l.next(e))}catch(e){r(e)}}function o(e){try{c(l.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,o)}c((l=l.apply(e,n||[])).next())}))};n.a=({chartURL:e,namespace:n,chartIndexEntry:t})=>{const{t:u}=Object(r.useTranslation)(),[s,d]=l.useState(),[m,p]=l.useState(!1);return l.useEffect(()=>{let l=!1;return c(void 0,void 0,void 0,(function*(){var r;let o;try{o=yield Object(i.c)(`/api/helm/chart?url=${encodeURIComponent(e)}&namespace=${n}&indexEntry=${encodeURIComponent(t)}`)}catch(e){console.warn("Error fetching helm chart details for readme",e)}const c=null===(r=null==o?void 0:o.files)||void 0===r?void 0:r.find(e=>"README.md"===e.name),s=(null==c?void 0:c.data)&&a.Base64.decode(null==c?void 0:c.data);l||(p(!0),s&&d(`## ${u("helm-plugin~README")}\n${s}`))})),()=>{l=!0}},[t,e,n,u]),m?l.createElement(o.SyncMarkdownView,{content:s,emptyMsg:u("helm-plugin~README not available")}):l.createElement("div",{className:"loading-skeleton--table"})}}}]);
//# sourceMappingURL=helmCatalog-chunk-8d549b31d283ac7b1d88.min.js.map
{"version":3,"sources":["webpack:///./packages/knative-plugin/src/components/sink-uri/SinkUri.tsx","webpack:///./packages/knative-plugin/src/components/sink-uri/SinkUriModal.tsx","webpack:///./packages/knative-plugin/src/components/sink-uri/SinkUriController.tsx","webpack:///./packages/dev-console/src/components/import/section/FormSection.tsx"],"names":["source","eventSourceList","cancel","close","t","initialValues","uri","spec","sinkUri","onSubmit","values","action","requests","evSrc","updatePayload","sink","push","Promise","race","then","setStatus","error","catch","err","errMessage","message","onReset","initialStatus","formikProps","handleSubmit","isSubmitting","status","fieldId","dirty","className","fullWidth","isRequired","type","text","name","placeholder","required","inProgress","submitText","submitDisabled","cancelText","errorMessage","SinkUriController","props","sinkModalLauncher","flexStyle","display","flex","flexDirection","margin","title","subTitle","children","flexLayout","extraMargin","dataTest","style"],"mappings":"8FAAA,oDAmDe,IArCyB,EAAGA,SAAQC,kBAAiBC,SAAQC,Y,QAC1E,MAAM,EAAEC,GAAM,2BACRC,EAAgB,CACpBC,IAAyB,QAApB,EAAW,QAAX,EAAAN,EAAOO,YAAI,eAAEC,eAAO,QAAI,IAsB/B,OACE,gBAAC,IAAM,CACLH,cAAeA,EACfI,SAvBiB,CAACC,EAAsBC,KAC1C,MAAMC,EAAuC,GAQ7C,OAPA,IAAUX,EAAkBY,IAC1B,MAAMC,EAAgB,OAAH,wBACdD,GAAK,CACRN,KAAM,OAAF,wBAAOM,EAAMN,MAAI,CAAEQ,KAAM,OAAF,UAAOL,OAEpCE,EAASI,KAAK,aAAU,aAAS,aAAaH,IAASC,MAElDG,QAAQC,KAAKN,GACjBO,KAAK,KACJR,EAAOS,UAAU,CAAEC,MAAO,KAC1BlB,MAEDmB,MAAOC,IACN,MAAMC,EAAaD,EAAIE,SAAWrB,EAAE,sDACpCO,EAAOS,UAAU,CAAEC,MAAOG,OAQ5BE,QAASxB,EACTyB,cAAe,CAAEN,MAAO,KAEtBO,GAAgB,gBAAC,IAAY,iBAAKA,EAAW,CAAE1B,OAAQA,Q,mCC9C/D,oGA0Ee,IAjDuB,EACpC2B,eACA3B,SACA4B,eACAC,SACArB,SACAL,oBAEA,MAAM,EAAED,GAAM,2BACR4B,EAAU,aAAW,YAAa,OAClCC,GAAQvB,aAAM,EAANA,EAAQJ,OAAQD,EAAcC,IAC5C,OACE,gBAAC,IAAI,CAACG,SAAUoB,GACd,uBAAKK,UAAU,iBACb,gBAAC,IAAU,KAAE9B,EAAE,4BACf,gBAAC,IAAS,KACR,gBAAC,IAAW,CAAC+B,WAAS,GACpB,gBAAC,IAAS,CAACH,QAASA,EAASI,YAAU,GACrC,gBAAC,KAAU,CACTC,KAAM,IAAeC,KACrBC,KAAK,MACLC,YAAapC,EAAE,4BAA2B,eAC7B,gBACbqC,UAAQ,IAGV,gBAAC,IAAc,KACb,gBAAC,IAAU,KACT,gBAAC,IAAc,KACZrC,EAAE,mFAOf,gBAAC,IAAiB,CAChBsC,WAAYZ,EACZa,WAAYvC,EAAE,uBACdwC,gBAAiBX,EACjBY,WAAYzC,EAAE,yBACdF,OAAQA,EACR4C,aAAcf,EAAOV,Y,qcCzD/B,MAAM0B,EAAuD,I,IAAA,OAC3D/C,EAAM,gBACNC,GAAe,EACZ+C,EAAK,IAHmD,8BAIvD,uBAAC,IAAO,iBAAKA,EAAK,CAAEhD,OAAQA,EAAQC,gBAAiBA,MAI9CgD,EAAoB,YAA2BF,GAE7C,a,kCCpBf,6CAgBA,MAAMG,EAAiC,CACrCC,QAAS,OACTC,KAAM,EACNC,cAAe,SACfC,OAAQ,qCA2BK,IAxBiC,EAC9CC,QACAC,WACArB,YACAsB,WACAC,aACAC,cACAC,WACAC,WAEA,uBACE3B,UAAW,IAAG,eAAgB,CAC5B,mBAAoBC,EACpB,iCAAkCwB,IAEpCE,MAAK,+BAAQH,EAAaR,EAAY,IAASW,GAAS,IAAG,YAChDD,GAEVL,GAAS,sBAAIrB,UAAU,6BAA6BqB,GACpDC,GAAY,gBAAC,IAAc,KAAEA,GAC7BC,I","file":"sink-uri-chunk-9798ac5572ffc221785c.min.js","sourcesContent":["import * as React from 'react';\nimport { Formik, FormikValues, FormikHelpers } from 'formik';\nimport * as _ from 'lodash';\nimport { useTranslation } from 'react-i18next';\nimport { K8sResourceKind, k8sUpdate, referenceFor, modelFor } from '@console/internal/module/k8s';\nimport SinkUriModal from './SinkUriModal';\n\nexport interface SinkUriProps {\n  source: K8sResourceKind;\n  eventSourceList: K8sResourceKind[];\n  cancel?: () => void;\n  close?: () => void;\n}\n\nconst SinkUri: React.FC<SinkUriProps> = ({ source, eventSourceList, cancel, close }) => {\n  const { t } = useTranslation();\n  const initialValues = {\n    uri: source.spec?.sinkUri ?? '',\n  };\n  const handleSubmit = (values: FormikValues, action: FormikHelpers<FormikValues>) => {\n    const requests: Promise<K8sResourceKind>[] = [];\n    _.forEach(eventSourceList, (evSrc) => {\n      const updatePayload = {\n        ...evSrc,\n        spec: { ...evSrc.spec, sink: { ...values } },\n      };\n      requests.push(k8sUpdate(modelFor(referenceFor(evSrc)), updatePayload));\n    });\n    return Promise.race(requests)\n      .then(() => {\n        action.setStatus({ error: '' });\n        close();\n      })\n      .catch((err) => {\n        const errMessage = err.message || t('knative-plugin~An error occurred. Please try again');\n        action.setStatus({ error: errMessage });\n      });\n  };\n\n  return (\n    <Formik\n      initialValues={initialValues}\n      onSubmit={handleSubmit}\n      onReset={cancel}\n      initialStatus={{ error: '' }}\n    >\n      {(formikProps) => <SinkUriModal {...formikProps} cancel={cancel} />}\n    </Formik>\n  );\n};\n\nexport default SinkUri;\n","import * as React from 'react';\nimport {\n  Form,\n  FormGroup,\n  FormHelperText,\n  HelperText,\n  HelperTextItem,\n  TextInputTypes,\n} from '@patternfly/react-core';\nimport { FormikProps, FormikValues } from 'formik';\nimport { useTranslation } from 'react-i18next';\nimport FormSection from '@console/dev-console/src/components/import/section/FormSection';\nimport {\n  ModalTitle,\n  ModalBody,\n  ModalSubmitFooter,\n} from '@console/internal/components/factory/modal';\nimport { InputField, getFieldId } from '@console/shared';\n\nexport interface SinkUriModalProps {\n  cancel?: () => void;\n}\n\ntype Props = FormikProps<FormikValues> & SinkUriModalProps;\n\nconst SinkUriModal: React.FC<Props> = ({\n  handleSubmit,\n  cancel,\n  isSubmitting,\n  status,\n  values,\n  initialValues,\n}) => {\n  const { t } = useTranslation();\n  const fieldId = getFieldId('sink-name', 'uri');\n  const dirty = values?.uri !== initialValues.uri;\n  return (\n    <Form onSubmit={handleSubmit}>\n      <div className=\"modal-content\">\n        <ModalTitle>{t('knative-plugin~Edit URI')}</ModalTitle>\n        <ModalBody>\n          <FormSection fullWidth>\n            <FormGroup fieldId={fieldId} isRequired>\n              <InputField\n                type={TextInputTypes.text}\n                name=\"uri\"\n                placeholder={t('knative-plugin~Enter URI')}\n                data-test-id=\"edit-sink-uri\"\n                required\n              />\n\n              <FormHelperText>\n                <HelperText>\n                  <HelperTextItem>\n                    {t('knative-plugin~Editing this URI will affect all associated Event Sources.')}\n                  </HelperTextItem>\n                </HelperText>\n              </FormHelperText>\n            </FormGroup>\n          </FormSection>\n        </ModalBody>\n        <ModalSubmitFooter\n          inProgress={isSubmitting}\n          submitText={t('knative-plugin~Save')}\n          submitDisabled={!dirty}\n          cancelText={t('knative-plugin~Cancel')}\n          cancel={cancel}\n          errorMessage={status.error}\n        />\n      </div>\n    </Form>\n  );\n};\n\nexport default SinkUriModal;\n","import * as React from 'react';\nimport { createModalLauncher, ModalComponentProps } from '@console/internal/components/factory';\nimport { K8sResourceKind } from '@console/internal/module/k8s';\nimport SinkUri from './SinkUri';\n\ntype SinkUriControllerProps = {\n  source: K8sResourceKind;\n  eventSourceList: K8sResourceKind[];\n};\n\nconst SinkUriController: React.FC<SinkUriControllerProps> = ({\n  source,\n  eventSourceList,\n  ...props\n}) => <SinkUri {...props} source={source} eventSourceList={eventSourceList} />;\n\ntype Props = SinkUriControllerProps & ModalComponentProps;\n\nexport const sinkModalLauncher = createModalLauncher<Props>(SinkUriController);\n\nexport default SinkUriController;\n","import * as React from 'react';\nimport { FormHelperText } from '@patternfly/react-core';\nimport cx from 'classnames';\nimport './FormSection.scss';\n\nexport interface FormSectionProps {\n  title?: React.ReactNode;\n  subTitle?: React.ReactNode;\n  fullWidth?: boolean;\n  children: React.ReactNode;\n  flexLayout?: boolean;\n  extraMargin?: boolean;\n  dataTest?: string;\n  style?: React.CSSProperties;\n}\n\nconst flexStyle: React.CSSProperties = {\n  display: 'flex',\n  flex: 1,\n  flexDirection: 'column',\n  margin: 'var(--pf-v5-global--spacer--md) 0',\n};\n\nconst FormSection: React.FC<FormSectionProps> = ({\n  title,\n  subTitle,\n  fullWidth,\n  children,\n  flexLayout,\n  extraMargin,\n  dataTest,\n  style,\n}) => (\n  <div\n    className={cx('pf-v5-c-form', {\n      'co-m-pane__form': !fullWidth,\n      'odc-form-section--extra-margin': extraMargin,\n    })}\n    style={{ ...(flexLayout ? flexStyle : {}), ...(style || {}) }}\n    data-test={dataTest}\n  >\n    {title && <h2 className=\"odc-form-section__heading\">{title}</h2>}\n    {subTitle && <FormHelperText>{subTitle}</FormHelperText>}\n    {children}\n  </div>\n);\n\nexport default FormSection;\n"],"sourceRoot":""}
{"version":3,"sources":["webpack:///./packages/operator-lifecycle-manager/src/actions/index.ts","webpack:///./packages/operator-lifecycle-manager/src/components/operand/operand-link.tsx","webpack:///./packages/operator-lifecycle-manager/src/actions/csv-actions-provider.ts","webpack:///./packages/operator-lifecycle-manager/src/actions/csv-actions.ts"],"names":["csvNameFromWindow","window","location","pathname","split","find","part","i","allParts","plural","OperandLink","props","namespace","name","obj","metadata","csvName","reference","to","classes","inline","className","kind","onClick","displayName","useDefaultCSVActions","resource","k8sModel","inFlight","actions","Edit","Delete","undefined","CSVDefaultActions","kindObj","id","label","t","item","cta","href","namespaced","accessReview","group","apiGroup","verb","redirectTo"],"mappings":"6FAAA,6E,kCCAA,sHAOO,MAAMA,EAAoB,IAC/BC,OAAOC,SAASC,SACbC,MAAM,KACNC,KACC,CAACC,EAAMC,EAAGC,IACRA,EAASD,EAAI,KAAO,aAAkB,+BACtCC,EAASD,EAAI,KAAO,6BAA2BE,QAG1CC,EAA2CC,IACtD,MAAM,UAAEC,EAAS,KAAEC,GAASF,EAAMG,IAAIC,SAChCC,EAAUL,EAAMK,SAAWhB,IAE3BiB,EAAY,aAAaN,EAAMG,KAC/BI,EAAKN,EACP,WAAWA,KAAa,6BAA2BH,UAAUO,KAAWC,KAAaJ,IACrF,gBAAgBI,KAAaJ,IAC3BM,EAAU,EAAW,mBAAoB,CAC7C,2BAA4BR,EAAMS,SAGpC,OACE,wBAAMC,UAAWF,GACf,gBAAC,KAAY,CAACG,KAAM,aAAaX,EAAMG,OACvC,gBAAC,OAAI,CACHI,GAAIA,EACJG,UAAU,kCACVE,QAASZ,EAAMY,QAAO,yBACEV,EAAI,YACjBA,GAEVA,KAaTH,EAAYc,YAAc,e,kCCnD1B,uEAKO,MAAMC,EAAuB,EAAGT,UAASU,eAC9C,MAAOC,EAAUC,GAAY,YAAY,aAAaF,IAEhDG,EAAU,kBACd,IAAM,CACJ,IAAkBC,KAAKH,EAAUD,EAAUV,GAC3C,IAAkBe,OAAOJ,EAAUD,EAAUV,IAE/C,CAACA,EAASU,EAAUC,IAGtB,OAAO,kBAAQ,IAAM,CAACE,GAAUD,OAAUI,GAAY,CAACH,EAASD,M,kCChBlE,iFAOO,MAAMK,EAAoB,CAC/BH,KAAM,CAACI,EAAmBR,EAA2BV,KACnD,MAAMC,EAAY,aAAaS,GAC/B,MAAO,CACLS,GAAI,WACJC,MAAO,IAAQC,EAAE,oBAAqB,CAAEC,KAAMJ,EAAQE,QACtDG,IAAK,CACHC,KAAMN,EAAQO,WACV,WAAWf,EAASX,SAASH,aAAa,6BAA2BH,UACnEO,GAAW,iBACTC,KAAaS,EAASX,SAASF,YACnC,gBAAgBI,KAAaS,EAASX,SAASF,aAErD6B,aAAc,CACZC,MAAOT,EAAQU,SACflB,SAAUQ,EAAQzB,OAClBI,KAAMa,EAASX,SAASF,KACxBD,UAAWc,EAASX,SAASH,UAC7BiC,KAAM,YAIZd,OAAQ,CAACG,EAAmBR,EAA2BV,KAC9C,CACLmB,GAAI,aACJC,MAAO,IAAQC,EAAE,sBAAuB,CAAEC,KAAMJ,EAAQE,QACxDG,IAAK,KACH,YAAY,CACVjB,KAAMY,EACNR,WACAoB,WAAY,WAAWpB,EAASX,SAASH,aACvC,6BAA2BH,UACzBO,GAAW,iBAAuB,aAAaU,QAGvDgB,aAAc,CACZC,MAAOT,EAAQU,SACflB,SAAUQ,EAAQzB,OAClBI,KAAMa,EAASX,SAASF,KACxBD,UAAWc,EAASX,SAASH,UAC7BiC,KAAM","file":"operator-lifecycle-manager/code-refs/actions-chunk-eb9d84b516775da1efc0.min.js","sourcesContent":["export * from './csv-actions-provider';\n","import * as React from 'react';\nimport * as classNames from 'classnames';\nimport { Link } from 'react-router-dom-v5-compat';\nimport { ResourceIcon } from '@console/internal/components/utils';\nimport { referenceForModel, K8sResourceKind, referenceFor } from '@console/internal/module/k8s';\nimport { ClusterServiceVersionModel } from '../../models';\n\nexport const csvNameFromWindow = () =>\n  window.location.pathname\n    .split('/')\n    .find(\n      (part, i, allParts) =>\n        allParts[i - 1] === referenceForModel(ClusterServiceVersionModel) ||\n        allParts[i - 1] === ClusterServiceVersionModel.plural,\n    );\n\nexport const OperandLink: React.FC<OperandLinkProps> = (props) => {\n  const { namespace, name } = props.obj.metadata;\n  const csvName = props.csvName || csvNameFromWindow();\n\n  const reference = referenceFor(props.obj);\n  const to = namespace\n    ? `/k8s/ns/${namespace}/${ClusterServiceVersionModel.plural}/${csvName}/${reference}/${name}`\n    : `/k8s/cluster/${reference}/${name}`;\n  const classes = classNames('co-resource-item', {\n    'co-resource-item--inline': props.inline,\n  });\n\n  return (\n    <span className={classes}>\n      <ResourceIcon kind={referenceFor(props.obj)} />\n      <Link\n        to={to}\n        className=\"co-resource-item__resource-name\"\n        onClick={props.onClick}\n        data-test-operand-link={name}\n        data-test={name}\n      >\n        {name}\n      </Link>\n    </span>\n  );\n};\n\nexport type OperandLinkProps = {\n  obj: K8sResourceKind;\n  csvName?: string;\n  onClick?: () => void;\n  inline?: boolean;\n};\n\nOperandLink.displayName = 'OperandLink';\n","import { useMemo } from 'react';\nimport { referenceFor } from '@console/internal/module/k8s';\nimport { useK8sModel } from '@console/shared/src/hooks/useK8sModel';\nimport { CSVDefaultActions } from './csv-actions';\n\nexport const useDefaultCSVActions = ({ csvName, resource }) => {\n  const [k8sModel, inFlight] = useK8sModel(referenceFor(resource));\n\n  const actions = useMemo(\n    () => [\n      CSVDefaultActions.Edit(k8sModel, resource, csvName),\n      CSVDefaultActions.Delete(k8sModel, resource, csvName),\n    ],\n    [csvName, resource, k8sModel],\n  );\n\n  return useMemo(() => [actions, !inFlight, undefined], [actions, inFlight]);\n};\n","import i18next from 'i18next';\nimport { Action, K8sModel } from '@console/dynamic-plugin-sdk/src';\nimport { deleteModal } from '@console/internal/components/modals';\nimport { K8sResourceKind, referenceFor } from '@console/internal/module/k8s';\nimport { csvNameFromWindow } from '../components/operand/operand-link';\nimport { ClusterServiceVersionModel } from '../models';\n\nexport const CSVDefaultActions = {\n  Edit: (kindObj: K8sModel, resource: K8sResourceKind, csvName: string): Action => {\n    const reference = referenceFor(resource);\n    return {\n      id: 'edit-csv',\n      label: i18next.t('olm~Edit {{item}}', { item: kindObj.label }),\n      cta: {\n        href: kindObj.namespaced\n          ? `/k8s/ns/${resource.metadata.namespace}/${ClusterServiceVersionModel.plural}/${\n              csvName || csvNameFromWindow()\n            }/${reference}/${resource.metadata.name}/yaml`\n          : `/k8s/cluster/${reference}/${resource.metadata.name}/yaml`,\n      },\n      accessReview: {\n        group: kindObj.apiGroup,\n        resource: kindObj.plural,\n        name: resource.metadata.name,\n        namespace: resource.metadata.namespace,\n        verb: 'update',\n      },\n    };\n  },\n  Delete: (kindObj: K8sModel, resource: K8sResourceKind, csvName: string): Action => {\n    return {\n      id: 'delete-csv',\n      label: i18next.t('olm~Delete {{item}}', { item: kindObj.label }),\n      cta: () => {\n        deleteModal({\n          kind: kindObj,\n          resource,\n          redirectTo: `/k8s/ns/${resource.metadata.namespace}/${\n            ClusterServiceVersionModel.plural\n          }/${csvName || csvNameFromWindow()}/${referenceFor(resource)}`,\n        });\n      },\n      accessReview: {\n        group: kindObj.apiGroup,\n        resource: kindObj.plural,\n        name: resource.metadata.name,\n        namespace: resource.metadata.namespace,\n        verb: 'delete',\n      },\n    };\n  },\n};\n"],"sourceRoot":""}
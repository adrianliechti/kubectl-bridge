(window.webpackJsonp=window.webpackJsonp||[]).push([[218],{5419:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t(5),r=t(10),l=t(15),i=t(7232);a.default=({item:e})=>{const{monitoringAlerts:a}=e,{kind:t,metadata:{uid:s,name:c,namespace:d}}=e.obj,{podData:m,loadError:u,loaded:v}=Object(l.Se)(e.obj,e.obj.kind,d),p=n.useMemo(()=>{const e=[{isList:!0,kind:"Event",namespace:d,prop:"resourceEvents",fieldSelector:`involvedObject.uid=${s},involvedObject.name=${c},involvedObject.kind=${t}`}];return v&&!u&&(null==m?void 0:m.pods)&&m.pods.forEach(a=>{const t=`involvedObject.uid=${a.metadata.uid},involvedObject.name=${a.metadata.name},involvedObject.kind=${r.PodModel.kind}`;e.push({isList:!0,kind:"Event",namespace:a.metadata.namespace,prop:a.metadata.uid,fieldSelector:t})}),e},[t,s,c,d,v,u,m]);return n.createElement(o.C,{resources:p},n.createElement(i.a,{resource:e.obj,pods:(null==m?void 0:m.pods)||[],monitoringAlerts:a}))}},7232:function(e,a,t){"use strict";var n=t(0),o=t(1934),r=t(1935),l=t(1936),i=t(516),s=t(164),c=t(682),d=t(1937),m=t(156),u=t(405),v=t(564),p=t(355),b=t(873),g=t(7),E=t(14),y=t(409),k=t(5),w=t(10),_=t(15),f=t(7233),h=t(7237),j=t(7240);t(7242);a.a=e=>{var a,t,O;const{t:T}=Object(g.useTranslation)(),{resource:N,pods:L,resourceEvents:$,monitoringAlerts:C}=e,D=Object(_.Lc)(C),[S,q]=n.useState(["metrics",...D.length>0?["monitoring-alerts"]:[]]);if(!$||!$.loaded||L&&L.find(a=>!e[a.metadata.uid]||!e[a.metadata.uid].loaded))return n.createElement(k.S,null);let x=[...$.data];L&&L.forEach(a=>{const t=e[a.metadata.uid];t&&x.push(...t.data)}),x=Object(y.sortEvents)(x);const A=e=>{const a=S.indexOf(e),t=a>=0?[...S.slice(0,a),...S.slice(a+1,S.length)]:[...S,e];q(t)};return n.createElement("div",{className:"odc-monitoring-overview"},n.createElement(o.a,{asDefinitionList:!1,className:"odc-monitoring-overview__metric-accordion",headingLevel:"h5"},D.length>0&&n.createElement(r.a,null,n.createElement(l.a,{onClick:()=>{A("monitoring-alerts")},isExpanded:S.includes("monitoring-alerts"),id:"monitoring-alerts",className:"odc-monitoring-overview__alerts-toggle"},n.createElement(i.a,null,n.createElement(s.a,null,T("devconsole~Alerts")),n.createElement(s.a,{isFilled:!0}),n.createElement(s.a,null,n.createElement(c.a,null,C.length)))),n.createElement(d.a,{className:"odc-monitoring-overview__alerts-body",id:"monitoring-alerts-content",isHidden:!S.includes("monitoring-alerts")},n.createElement(h.a,{alerts:D}))),n.createElement(r.a,null,n.createElement(l.a,{onClick:()=>{A("metrics")},isExpanded:S.includes("metrics"),id:"metrics"},T("devconsole~Metrics")),n.createElement(d.a,{id:"metrics-content",isHidden:!S.includes("metrics")},N.kind===w.DeploymentConfigModel.kind?n.createElement(m.a,null,n.createElement(u.a,{titleText:n.createElement(n.Fragment,null,T("devconsole~No metrics found")),icon:n.createElement(v.a,{className:"odc-monitoring-overview__empty-state-icon",icon:b.a}),headingLevel:"h2"}),n.createElement(p.a,null,T("devconsole~Deployment Configuration metrics are not yet supported."))):n.createElement(n.Fragment,null,n.createElement("div",{className:"odc-monitoring-overview__view-monitoring-dashboards"},n.createElement(E.Link,{to:`/dev-monitoring/ns/${null===(a=null==N?void 0:N.metadata)||void 0===a?void 0:a.namespace}?dashboard=grafana-dashboard-k8s-resources-workload&workload=${null===(t=null==N?void 0:N.metadata)||void 0===t?void 0:t.name}&type=${null===(O=null==N?void 0:N.kind)||void 0===O?void 0:O.toLowerCase()}`,"data-test":"observe-dashboards-link"},T("devconsole~View dashboards"))),n.createElement(f.a,{resource:N})))),n.createElement(r.a,null,n.createElement(l.a,{onClick:()=>{A("all-events")},isExpanded:S.includes("all-events"),id:"all-events"},T("devconsole~All events")),n.createElement(d.a,{id:"all-events-content",isHidden:!S.includes("all-events")},n.createElement(j.a,{events:x})))))}},7233:function(e,a,t){"use strict";var n=t(0),o=t(50),r=t(7),l=t(2304),i=t(7234),s=t(7236);a.a=({resource:e})=>{var a,t,c;const{t:d}=Object(r.useTranslation)();if(!Object(l.a)())return null;const m=null===(a=null==e?void 0:e.metadata)||void 0===a?void 0:a.namespace,u=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.name,v=null===(c=null==e?void 0:e.kind)||void 0===c?void 0:c.toLowerCase();return n.createElement(n.Fragment,null,o.a(Object(s.a)(d),e=>n.createElement(i.a,{key:e.title,title:e.title,namespace:m,graphType:e.chartType,query:e.query({namespace:m,workloadName:u,workloadType:v}),humanize:e.humanize,byteDataType:e.byteDataType})))}},7234:function(e,a,t){"use strict";var n,o=t(0),r=t(192),l=t(434),i=t(295),s=t(296),c=t(839),d=t(1596),m=t(7),u=t(31),v=t(14),p=t(98),b=t(1215);t(7235);!function(e){e.area="Area",e.line="Line"}(n||(n={}));const g=({query:e,namespace:a,ariaChartLinkLabel:t})=>{const{t:n}=Object(m.useTranslation)(),r=c.a(d.a(e));if(!r.length)return null;const l=new URLSearchParams;return r.forEach((e,a)=>l.set("query"+a,e)),o.createElement(v.Link,{"aria-label":t,to:`/dev-monitoring/ns/${a}/metrics?${l.toString()}`},n("devconsole~Inspect"))};a.a=({query:e,namespace:a,title:t,graphType:c=n.area,timespan:d,pollInterval:v,endTime:E})=>{const{t:y}=Object(m.useTranslation)(),k=Object(u.useDispatch)(),w=o.useCallback((e,a)=>{k(Object(p.f)(a,"dev")),k(Object(p.g)(a-e,"dev"))},[k]);return o.createElement(r.a,{className:"monitoring-dashboards__card odc-monitoring-dashboard-graph","data-test":t.toLowerCase().replace(/\s+/g,"-"),isClickable:!0,isSelectable:!0},o.createElement(l.a,{actions:{actions:o.createElement(g,{namespace:a,query:e,ariaChartLinkLabel:y("devconsole~View metrics for {{title}}",{title:t})}),hasNoOffset:!1,className:"co-overview-card__actions"}},o.createElement(i.a,null,t)),o.createElement(s.a,null,o.createElement(b.QueryBrowser,{hideControls:!0,defaultTimespan:18e5,defaultSamples:30,namespace:a,queries:[e],isStack:c===n.area,timespan:d,pollInterval:v,fixedEndTime:E,formatSeriesTitle:e=>e.pod,onZoom:w,showLegend:!0})))}},7235:function(e,a,t){},7236:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var n,o=t(550),r=(t(117),t(5)),l=t(762);!function(e){e.area="Area",e.line="Line"}(n||(n={}));const i=e=>[{title:e("devconsole~CPU usage"),chartType:n.area,humanize:r.Yb,byteDataType:l.a.BinaryBytes,query:o.a("sum(node_namespace_pod_container:container_cpu_usage_seconds_total:sum_irate{namespace='<%= namespace %>'}\n          * on(namespace,pod) group_left(workload, workload_type) namespace_workload_pod:kube_pod_owner:relabel{\n          namespace='<%= namespace %>', workload='<%= workloadName %>', workload_type='<%= workloadType %>'}) by (pod)")},{title:e("devconsole~Memory usage"),chartType:n.area,humanize:r.Wb,byteDataType:l.a.BinaryBytes,query:o.a("sum(container_memory_working_set_bytes{namespace='<%= namespace %>', container!=\"\"}\n          * on(namespace,pod) group_left(workload, workload_type) namespace_workload_pod:kube_pod_owner:relabel{\n          namespace='<%= namespace %>', workload='<%= workloadName %>', workload_type='<%= workloadType %>'}) by (pod)")},{title:e("devconsole~Receive bandwidth"),chartType:n.area,humanize:r.ac,byteDataType:l.a.DecimalBytes,query:o.a("sum(irate(container_network_receive_bytes_total{namespace='<%= namespace %>'}[4h])\n          * on (namespace,pod) group_left(workload,workload_type) namespace_workload_pod:kube_pod_owner:relabel{\n          namespace='<%= namespace %>', workload=~'<%= workloadName %>', workload_type='<%= workloadType %>'}) by (pod)")}]},7237:function(e,a,t){"use strict";var n=t(0),o=t(80),r=t(50),l=t(14),i=t(13),s=t(58),c=t(158),d=t(15),m=t(7238);t(7239);const u=({alerts:e})=>{const[a]=Object(i.jc)(),t=Object(d.qe)(e);return n.createElement("div",{className:"odc-monitoring-overview-alerts"},r.a(t,e=>{const{activeAt:t,annotations:{message:r},labels:{severity:i,alertname:d,namespace:u},rule:{name:v,id:p}}=e,b="admin"===a?`/monitoring/alerts/${p}?${Object(s.l)(e.labels)}`:`/dev-monitoring/ns/${u}/alerts/${p}?${Object(s.l)(e.labels)}`;return n.createElement(o.a,{variant:Object(m.a)(i),isInline:!0,title:n.createElement(l.Link,{to:b},v),key:`${d}-${p}`},r,n.createElement("div",{className:"odc-monitoring-overview-alerts__timestamp"},n.createElement("small",{className:"text-secondary"},Object(c.e)(t))))}))};a.a=u},7238:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var n=t(13);const o=e=>{switch(e){case n.a.Critical:return"danger";case n.a.Info:case n.a.None:return"info";case n.a.Warning:default:return"warning"}}},7239:function(e,a,t){},7240:function(e,a,t){"use strict";var n=t(0),o=t(241),r=t(130),l=t(22),i=t(50),s=t(7),c=t(409),d=t(5),m=t(158),u=t(8),v=t(15);t(7241);a.a=({events:e})=>{const{t:a}=Object(s.useTranslation)();return n.createElement("div",{className:"odc-monitoring-events"},l.a(e)?n.createElement("div",{className:"text-secondary"},a("devconsole~There are no recent events.")):i.a(e,e=>n.createElement("div",{className:"odc-monitoring-events__event-item",key:e.metadata.uid},n.createElement(o.a,{alignSelf:{default:"alignSelfBaseline"}},n.createElement(r.a,{title:e.lastTimestamp,className:"text-secondary"},m.i.format(new Date(Object(c.getLastTime)(e)))),"Warning"===e.type&&n.createElement(r.a,null,n.createElement(v.tc,{className:"odc-monitoring-events__warning-icon"})),n.createElement(r.a,null,n.createElement(d.hb,{kind:Object(u.Db)(e.involvedObject),namespace:e.involvedObject.namespace,name:e.involvedObject.name,title:e.involvedObject.uid}))),n.createElement("div",{className:"odc-monitoring-events__event-message"},e.message))))}},7241:function(e,a,t){},7242:function(e,a,t){}}]);
//# sourceMappingURL=monitoring-overview-chunk-1053de09601d4c4b7ebf.min.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[360],{11531:function(e,n,t){"use strict";t.d(n,"a",(function(){return i})),t.d(n,"b",(function(){return o}));const a=(e,n,t)=>{var a,i,l;if((!e||0===(null==e?void 0:e.length))&&n)return[{name:"web-terminal-exec",container:{env:[{name:"WEB_TERMINAL_IDLE_TIMEOUT",value:n}],image:""}}];const o=null===(i=null===(a=null==t?void 0:t.container)||void 0===a?void 0:a.env)||void 0===i?void 0:i.find(e=>"WEB_TERMINAL_IDLE_TIMEOUT"===e.name);if(t&&!(null==o?void 0:o.value)&&n){let a;return a=(null===(l=null==t?void 0:t.container)||void 0===l?void 0:l.env)?[...t.container.env,{name:"WEB_TERMINAL_IDLE_TIMEOUT",value:n}]:[{name:"WEB_TERMINAL_IDLE_TIMEOUT",value:n}],t.container=Object.assign(Object.assign({},t.container),{env:a}),e}return t?(n&&(null==o?void 0:o.value)?o.value=n:o&&!n&&(t.container.env=t.container.env.filter(e=>"WEB_TERMINAL_IDLE_TIMEOUT"!==e.name)),e):n?[...e,{name:"web-terminal-exec",container:{env:[{name:"WEB_TERMINAL_IDLE_TIMEOUT",value:n}],image:""}}]:e},i=(e,n,t,i)=>{var l,o;return Object.assign(Object.assign({},e),{metadata:Object.assign(Object.assign({},null==e?void 0:e.metadata),{annotations:Object.assign(Object.assign({},null===(l=null==e?void 0:e.metadata)||void 0===l?void 0:l.annotations),{"web-terminal.redhat.com/unmanaged-state":n?"true":"false"})}),spec:Object.assign(Object.assign({},null==e?void 0:e.spec),{components:a(null===(o=null==e?void 0:e.spec)||void 0===o?void 0:o.components,i,t)})})},l=(e,n,t)=>e&&0!==(null==e?void 0:e.length)?t?(t.container.image=n,e):[...e,{name:"web-terminal-tooling",container:{image:n}}]:[{name:"web-terminal-tooling",container:{image:n}}],o=(e,n,t,a)=>{var i,o;return Object.assign(Object.assign({},e),{metadata:Object.assign(Object.assign({},null==e?void 0:e.metadata),{annotations:Object.assign(Object.assign({},null===(i=null==e?void 0:e.metadata)||void 0===i?void 0:i.annotations),{"web-terminal.redhat.com/unmanaged-state":n?"true":"false"})}),spec:Object.assign(Object.assign({},null==e?void 0:e.spec),{components:l(null===(o=null==e?void 0:e.spec)||void 0===o?void 0:o.components,a,t)})})}},5466:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t(1940),l=t(297),o=t(319),r=t(157),s=t(219),u=t(472),c=t(281),m=t(19),d=t(7),v=t(976),b=t(77),g=t(980),f=t(1532),p=t(8),E=t(15),h=t(5918),O=t(848),w=t(705),j=t(11531),T=t(544),I=t(2967),M=function(e,n,t,a){return new(t||(t=Promise))((function(i,l){function o(e){try{s(a.next(e))}catch(e){l(e)}}function r(e){try{s(a.throw(e))}catch(e){l(e)}}function s(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,r)}s((a=a.apply(e,n||[])).next())}))};n.default=({readonly:e})=>{var n,t,_,k;const{t:L}=Object(d.useTranslation)(),C=Object(E.cf)(),[x]=Object(I.a)(),[S,y]=a.useState("m"),[N,U]=a.useState(0),[W,D]=a.useState(""),[A,B]=a.useState(!1),[z,R]=a.useState(!1),[H,J]=a.useState(),q=a.useMemo(()=>({kind:Object(p.Hb)(O.a),namespaced:!0,isList:!1,name:"web-terminal-exec",namespace:x||w.a}),[x]),F=a.useMemo(()=>({kind:Object(p.Hb)(O.a),namespaced:!0,isList:!1,name:"web-terminal-tooling",namespace:x||w.a}),[x]),[K,V,P]=Object(v.xb)(q),[G,Q,X]=Object(v.xb)(F),Y=K&&V&&!P&&(null===(t=null===(n=null==K?void 0:K.spec)||void 0===n?void 0:n.components)||void 0===t?void 0:t.find(e=>"web-terminal-exec"===e.name)),Z=G&&Q&&!X&&(null===(k=null===(_=null==G?void 0:G.spec)||void 0===_?void 0:_.components)||void 0===k?void 0:k.find(e=>"web-terminal-tooling"===e.name));a.useEffect(()=>{var e,n,t;if(V&&!P&&Y){const a=null===(n=null===(e=null==Y?void 0:Y.container)||void 0===e?void 0:e.env)||void 0===n?void 0:n.find(e=>"WEB_TERMINAL_IDLE_TIMEOUT"===e.name);if(null==a?void 0:a.value){const e=a.value.match(/[a-z]+/gi).join(""),n=a.value.match(/\d+/g).join("");y(e),U(parseInt(n,10))}(null===(t=null==K?void 0:K.metadata)||void 0===t?void 0:t.annotations)&&B("true"===K.metadata.annotations["web-terminal.redhat.com/unmanaged-state"])}},[K,V,P,Y]),a.useEffect(()=>{var e,n;Q&&!X&&Z&&((null===(e=null==Z?void 0:Z.container)||void 0===e?void 0:e.image)&&D(Z.container.image),(null===(n=null==G?void 0:G.metadata)||void 0===n?void 0:n.annotations)&&R("true"===G.metadata.annotations["web-terminal.redhat.com/unmanaged-state"]))},[G,Q,X,Z]);const $={s:L("webterminal-plugin~Seconds"),m:L("webterminal-plugin~Minutes"),h:L("webterminal-plugin~Hours"),ms:L("webterminal-plugin~Milliseconds")};return a.createElement(i.a,{title:L("webterminal-plugin~Web Terminal Configuration"),"data-test":"web-terminal form-section"},a.createElement(l.a,null,a.createElement(o.a,null,a.createElement(r.a,null,L("webterminal-plugin~As admin you can change the default timeout and image of Web Terminal.")))),a.createElement(s.a,{label:L("webterminal-plugin~Timeout"),fieldId:"timeout-value"},a.createElement("div",{className:"pf-v5-c-input-group"},a.createElement(f.a,{onChange:e=>{J({status:null}),U(parseInt(e.currentTarget.value,10))},changeValueBy:e=>{const n=Number.isFinite(N)?N+e:0+e;U(n),J({status:null})},name:"timeout-value",id:"timeout-value","data-test":"timeout-value",value:N,min:0,disabled:e}),a.createElement(g.b,{title:$[S],selectedKey:S,name:"timeout-unit",className:"request-size-input__unit",items:$,onChange:e=>{J({status:null}),y(e)},ariaLabel:L("webterminal-plugin~Number of {{sizeUnit}}",{sizeUnit:$[S]}),disabled:e})),a.createElement(l.a,null,a.createElement(o.a,null,a.createElement(r.a,null,L("webterminal-plugin~Set timeout for the terminal."))))),a.createElement(s.a,null,a.createElement(u.a,{id:"timeout-value-checkbox","data-test":"timeout-value-checkbox",isChecked:A,key:"timeout-value-checkbox",onChange:()=>B(!A),label:L('webterminal-plugin~Mark the configuration resource as "Unmanaged" to keep the default timeout even after operator restart or update.'),isDisabled:e})),a.createElement(s.a,{label:L("webterminal-plugin~Image"),fieldId:"web-terminal-image"},a.createElement(c.a,{value:W,onChange:(e,n)=>{J({status:null}),D(n)},name:"web-terminal-image",id:"web-terminal-image",type:"text","aria-label":"web-terminal-image",className:"pf-v5-c-form-control","data-test":"web-terminal-image",isDisabled:e}),a.createElement(l.a,null,a.createElement(o.a,null,a.createElement(r.a,null,L("webterminal-plugin~Set custom image for the terminal."))))),a.createElement(s.a,null,a.createElement(u.a,{id:"image-value-checkbox","data-test":"image-value-checkbox",isChecked:z,key:"image-value-checkbox",onChange:()=>R(!z),label:L('webterminal-plugin~Mark the configuration resource as "Unmanaged" to keep the default image even after operator restart or update.'),isDisabled:e})),a.createElement(s.a,null,a.createElement(m.a,{variant:"primary",onClick:()=>M(void 0,void 0,void 0,(function*(){J({status:"pending"});const e=Object(T.c)(N,S)||"",n=Object(j.a)(K,A,Y,e),t=Object(j.b)(G,z,Z,W);try{Object(b.r)({model:O.a,data:n,name:"web-terminal-exec",ns:x||w.a}),Object(b.r)({model:O.a,data:t,name:"web-terminal-tooling",ns:x||w.a}),C("Console cluster configuration changed",{customize:"Web Terminal configuration items",timeout:e,image:W}),J({status:"successful"})}catch(e){J({status:"error",error:e})}})),"data-test":"save-button",isDisabled:e||P||X},L("webterminal-plugin~Save"))),a.createElement(h.b,{error:P||X}),a.createElement(h.c,Object.assign({},H)))}},5798:function(e,n,t){"use strict";var a=t(83),i=t(768),l=t(10),o=t(2236);n.a=()=>Object(i.a)({groupVersionKind:Object(a.getGroupVersionKindForModel)(l.ConsoleOperatorConfigModel),isList:!1,name:o.a})},5799:function(e,n,t){"use strict";var a=t(875),i=t(10),l=t(8),o=t(2236);n.a=e=>{const n=Object(l.Jb)(i.ConsoleOperatorConfigModel,{name:o.a});return Object(a.b)(n,"PATCH",{headers:{Accept:"application/json","Content-Type":"application/merge-patch+json;charset=UTF-8"},body:JSON.stringify(e)})}},5800:function(e,n,t){"use strict";var a=t(0),i=t(4),l=t(1953),o=t.n(l);n.a=({children:e,isHorizontal:n=!1,isWidthLimited:t=!0})=>a.createElement("div",{className:Object(i.css)(o.a.form,n&&o.a.modifiers.horizontal,t&&o.a.modifiers.limitWidth)},e)},5801:function(e,n,t){"use strict";var a=t(0),i=t(80),l=t(7);n.a=({error:e})=>{var n,t,o;const{t:r}=Object(l.useTranslation)();return e?a.createElement(i.a,{variant:"warning",isInline:!0,title:r("console-shared~Could not load configuration.")},(null===(t=null===(n=e.message)||void 0===n?void 0:n.toString)||void 0===t?void 0:t.call(n))||(null===(o=e.toString)||void 0===o?void 0:o.call(e))):null}},5802:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var a=t(0),i=t(80),l=t(7);const o=({status:e,error:n})=>{var t,o,r;const{t:s}=Object(l.useTranslation)();return"successful"===e?a.createElement(i.a,{variant:"success","data-test":"success-alert",isInline:!0,title:s("console-shared~Saved.")},s("console-shared~This config update requires a console rollout, this can take up to a minute and require a browser refresh.")):"error"===e?a.createElement(i.a,{variant:"danger",isInline:!0,title:s("console-shared~Could not save configuration.")},(null===(o=null===(t=null==n?void 0:n.message)||void 0===t?void 0:t.toString)||void 0===o?void 0:o.call(t))||(null===(r=null==n?void 0:n.toString)||void 0===r?void 0:r.call(n))):null}},5803:function(e,n,t){"use strict"},5918:function(e,n,t){"use strict";var a=t(766);t.d(n,"f",(function(){return a.a}));var i=t(5798);t.d(n,"e",(function(){return i.a}));var l=t(5799);t.d(n,"d",(function(){return l.a}));var o=t(5800);t.d(n,"a",(function(){return o.a}));var r=t(5801);t.d(n,"b",(function(){return r.a}));var s=t(5802);t.d(n,"c",(function(){return s.a}));t(5803)}}]);
//# sourceMappingURL=webTerminalConfiguration-chunk-59a6f3cfce63d61db755.min.js.map
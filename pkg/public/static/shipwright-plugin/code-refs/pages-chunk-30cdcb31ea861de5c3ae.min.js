(window.webpackJsonp=window.webpackJsonp||[]).push([[276],{11480:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(0),i=n(54),r=n(469),l=n(29),s=n(7),o=n(83),u=n(768),c=n(40),d=n(5),m=n(8),p=n(1960),g=n(5731),v=n(5729),b=n(5895),f=n(7521),h=n(6012),E=n(8326);const y=["","","","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-lg",d.F.columnClass],k=()=>{const e=l.a.t.bind(l.a);return[{title:l.a.t("shipwright-plugin~Name"),sortField:"metadata.name",transforms:[i.a],props:{className:y[0]}},{id:"namespace",title:e("shipwright-plugin~Namespace"),sortField:"metadata.namespace",transforms:[i.a],props:{className:y[1]}},{title:e("shipwright-plugin~Output"),props:{className:y[2]}},{title:e("shipwright-plugin~Last run"),transforms:[i.a],sortField:"latestBuild.metadata.name",props:{className:y[3]}},{title:e("shipwright-plugin~Last run status"),transforms:[i.a],sortFunc:"latestBuildStatus",props:{className:y[4]}},{title:e("shipwright-plugin~Last run time"),transforms:[i.a],sortField:"latestBuild.status.completionTime",props:{className:y[5]}},{title:e("shipwright-plugin~Last run duration"),transforms:[i.a],sortFunc:"latestRunDuration",props:{className:y[6]}},{title:"",props:{className:y[7]}}]},S=({obj:e})=>{var t,n,i;const r=Object(m.Db)(e),l={[r]:e},s=Object(b.e)(e)?Object(m.Hb)(v.d):Object(m.Hb)(v.c);return a.createElement(a.Fragment,null,a.createElement(c.k,{className:y[0]},a.createElement(d.hb,{kind:r,name:e.metadata.name,namespace:e.metadata.namespace})),a.createElement(c.k,{className:y[1],columnID:"namespace"},a.createElement(d.hb,{kind:"Namespace",name:e.metadata.namespace})),a.createElement(c.k,{className:y[2]},a.createElement(E.a,{buildSpec:e.spec})),a.createElement(c.k,{className:y[3]},e.latestBuild?a.createElement(d.hb,{kind:s,name:null===(t=e.latestBuild.metadata)||void 0===t?void 0:t.name,namespace:null===(n=e.latestBuild.metadata)||void 0===n?void 0:n.namespace}):"-"),a.createElement(c.k,{className:y[4]},e.latestBuild?a.createElement(h.a,{buildRun:e.latestBuild}):"-"),a.createElement(c.k,{className:y[5]},e.latestBuild?a.createElement(d.xb,{timestamp:null===(i=null==e?void 0:e.latestBuild.metadata)||void 0===i?void 0:i.creationTimestamp}):"-"),a.createElement(c.k,{className:y[6]},(null==e?void 0:e.latestBuild)?a.createElement(f.a,{buildRun:e.latestBuild}):"-"),a.createElement(c.k,{className:y[7]},a.createElement(p.default,{context:l})))},O=e=>{var t;const{t:n}=Object(s.useTranslation)(),i=Object(o.useFlag)("SHIPWRIGHT_BUILDRUN")?Object(m.Hb)(v.c):Object(m.Hb)(v.d),[l,d,p]=Object(u.a)({kind:i,namespace:e.namespace,isList:!0}),E=a.useMemo(()=>({buildRuns:{latestByBuildName:l.reduce((e,t)=>{var n;const a=null===(n=t.metadata.labels)||void 0===n?void 0:n[g.c];return e[`${a}-${t.metadata.namespace}`]&&!Object(b.d)(t,e[`${a}-${t.metadata.namespace}`])||(e[`${a}-${t.metadata.namespace}`]=t),e},{}),loaded:d,error:p}}),[l,d,p]),y=null===(t=e.data)||void 0===t?void 0:t.map(e=>(e.latestBuild=E.buildRuns.latestByBuildName[`${e.metadata.name}-${e.metadata.namespace}`],e));return a.createElement(c.j,Object.assign({},e,{data:y,"aria-label":n("shipwright-plugin~Builds"),Header:k,Row:S,defaultSortField:"metadata.name",defaultSortOrder:r.a.asc,customSorts:{latestBuildStatus:e=>Object(h.b)(e.latestBuild),latestRunDuration:e=>Object(f.b)(e.latestBuild)},virtualize:!0}))}},11481:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(0),i=n(54),r=n(469),l=n(29),s=n(7),o=n(40),u=n(5),c=n(8),d=n(1960),m=n(7521),p=n(6012);const g=["","","pf-m-hidden pf-m-visible-on-md","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-xl",u.F.columnClass],v=()=>{const e=l.a.t.bind(l.a);return[{title:e("shipwright-plugin~Name"),sortField:"metadata.name",transforms:[i.a],props:{className:g[0]}},{id:"namespace",title:e("shipwright-plugin~Namespace"),sortField:"metadata.namespace",transforms:[i.a],props:{className:g[1]}},{title:e("shipwright-plugin~Status"),sortFunc:"status",transforms:[i.a],props:{className:g[2]}},{title:e("shipwright-plugin~Started"),sortField:"metadata.creationTimestamp",transforms:[i.a],props:{className:g[3]}},{title:e("shipwright-plugin~Duration"),sortFunc:"duration",transforms:[i.a],props:{className:g[4]}},{title:"",props:{className:g[5]}}]},b=({obj:e})=>{var t;const n=Object(c.Db)(e),i={[n]:e};return a.createElement(a.Fragment,null,a.createElement(o.k,{className:g[0]},a.createElement(u.hb,{kind:n,name:e.metadata.name,namespace:e.metadata.namespace})),a.createElement(o.k,{className:g[1],columnID:"namespace"},a.createElement(u.hb,{kind:"Namespace",name:e.metadata.namespace})),a.createElement(o.k,{className:g[2]},a.createElement(p.a,{buildRun:e})),a.createElement(o.k,{className:g[3]},a.createElement(u.xb,{timestamp:null===(t=e.metadata)||void 0===t?void 0:t.creationTimestamp})),a.createElement(o.k,{className:g[4]},a.createElement(m.a,{buildRun:e})),a.createElement(o.k,{className:g[5]},a.createElement(d.default,{context:i})))},f=e=>{const{t:t}=Object(s.useTranslation)();return a.createElement(o.j,Object.assign({},e,{"aria-label":t("shipwright-plugin~BuildRuns"),Header:v,Row:b,customSorts:{status:p.b,duration:m.c},defaultSortField:"metadata.creationTimestamp",defaultSortOrder:r.a.desc,virtualize:!0}))}},11482:function(e,t,n){"use strict";var a=n(0),i=n(7),r=n(5),l=n(8328),s=n(11483);t.a=({obj:e})=>{const{t:t}=Object(i.useTranslation)();return a.createElement(a.Fragment,null,a.createElement("div",{className:"co-m-pane__body"},a.createElement(r.ob,{text:t("shipwright-plugin~Build details")}),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-6"},a.createElement(r.lb,{resource:e})),a.createElement("div",{className:"col-sm-6"},a.createElement(l.a,{obj:e,buildSpec:e.spec,path:"spec"})))),e.status?a.createElement("div",{className:"co-m-pane__body"},a.createElement(r.ob,{text:t("shipwright-plugin~Status")}),a.createElement(s.a,{obj:e,buildStatus:e.status})):null)}},11483:function(e,t,n){"use strict";var a=n(0),i=n(7),r=n(5);t.a=({obj:e,buildStatus:t})=>{const{t:n}=Object(i.useTranslation)();return t?a.createElement("dl",null,t.registered?a.createElement(r.r,{label:n("shipwright-plugin~Registered"),obj:e,path:"status.registered"},t.registered):null,t.reason?a.createElement(r.r,{label:n("shipwright-plugin~Reason"),obj:e,path:"status.reason"},t.reason):null,t.message?a.createElement(r.r,{label:n("shipwright-plugin~Message"),obj:e,path:"status.message"},t.message):null):null}},11484:function(e,t,n){"use strict";var a=n(0),i=n(14),r=n(409);const l=e=>{var t;const n=null===(t=e.metadata)||void 0===t?void 0:t.name;if(!n)return[];const a=n+"-";return[e=>"Build"===e.kind&&e.name===n,e=>"BuildRun"===e.kind&&e.name.startsWith(a),e=>"TaskRun"===e.kind&&e.name.startsWith(a),e=>"Pod"===e.kind&&e.name.startsWith(a)&&e.name.endsWith("-pod")]};t.a=({obj:e})=>{const{ns:t}=Object(i.useParams)();return a.createElement(r.ResourcesEventStream,{filters:l(e),namespace:t})}},11485:function(e,t,n){"use strict";var a=n(0),i=n(5731),r=n(6861);t.a=({obj:e})=>{var t;return a.createElement(r.a,{showTitle:!1,canCreate:!1,namespace:e.metadata.namespace,selector:{matchLabels:{[i.c]:null===(t=e.metadata)||void 0===t?void 0:t.name}}})}},11486:function(e,t,n){"use strict";var a=n(0),i=n(241),r=n(130),l=n(72),s=n(7),o=n(972),u=n(5),c=n(5895),d=n(8328),m=n(11487);t.a=({obj:e})=>{var t,n,p,g,v,b,f;const{t:h}=Object(s.useTranslation)();return a.createElement(a.Fragment,null,a.createElement("div",{className:"co-m-pane__body"},a.createElement(u.ob,{text:h("shipwright-plugin~BuildRun details")}),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-6"},a.createElement(u.lb,{resource:e})),a.createElement("div",{className:"col-sm-6"},a.createElement(i.a,{direction:{default:"column"}},a.createElement(r.a,null,a.createElement(m.a,{buildRun:e})),a.createElement(r.a,null,a.createElement(l.a,{component:l.b.h3},h("shipwright-plugin~BuildSpec details")),a.createElement(d.a,{obj:e,buildSpec:(null===(t=e.status)||void 0===t?void 0:t.buildSpec)||(Object(c.e)(e)?null===(n=e.spec)||void 0===n?void 0:n.buildSpec:null===(g=null===(p=e.spec)||void 0===p?void 0:p.build)||void 0===g?void 0:g.spec),path:(null===(v=e.status)||void 0===v?void 0:v.buildSpec)?"status.buildSpec":Object(c.e)(e)?"spec.buildSpec":"spec.build.spec"})))))),(null===(f=null===(b=e.status)||void 0===b?void 0:b.conditions)||void 0===f?void 0:f.length)?a.createElement("div",{className:"co-m-pane__body"},a.createElement(u.ob,{text:h("shipwright-plugin~Conditions")}),a.createElement(o.b,{conditions:e.status.conditions})):null)}},11487:function(e,t,n){"use strict";var a=n(0),i=n(7),r=n(91),l=n(5),s=n(5729),o=n(5895),u=n(7521),c=n(6012);t.a=({buildRun:e})=>{var t,n,d;const{t:m}=Object(i.useTranslation)(),p=Object(o.e)(e)?s.b:s.a;return a.createElement("dl",null,a.createElement("dt",null,m("shipwright-plugin~Status")),a.createElement("dd",null,a.createElement(c.a,{buildRun:e})),a.createElement(l.r,{label:m("shipwright-plugin~Build"),obj:e,path:Object(o.e)(e)?"spec.buildRef":"spec.build"},Object(o.b)(e)?a.createElement(l.hb,{groupVersionKind:Object(r.b)(p),namespace:e.metadata.namespace,name:Object(o.b)(e)}):"-"),a.createElement(l.r,{label:m("shipwright-plugin~Start time"),obj:e,path:"status.startTime"},a.createElement(l.xb,{timestamp:null===(t=e.status)||void 0===t?void 0:t.startTime})),a.createElement(l.r,{label:m("shipwright-plugin~Completion time"),obj:e,path:"status.completionTime"},a.createElement(l.xb,{timestamp:null===(n=e.status)||void 0===n?void 0:n.completionTime})),a.createElement(a.Fragment,null,a.createElement("dt",null,m("shipwright-plugin~Duration")),a.createElement("dd",null,(null===(d=e.status)||void 0===d?void 0:d.startTime)?a.createElement(u.a,{buildRun:e}):"-")))}},11488:function(e,t,n){"use strict";var a=n(0),i=n(14),r=n(409);const l=e=>{var t;const n=null===(t=e.metadata)||void 0===t?void 0:t.name;if(!n)return[];const a=n+"-";return[e=>"BuildRun"===e.kind&&e.name===n,e=>"TaskRun"===e.kind&&e.name.startsWith(a),e=>"Pod"===e.kind&&e.name.startsWith(a)&&e.name.endsWith("-pod")]};t.a=({obj:e})=>{const{ns:t}=Object(i.useParams)();return a.createElement(r.ResourcesEventStream,{filters:l(e),namespace:t})}},11489:function(e,t,n){"use strict";var a=n(0),i=n(7),r=n(14),l=n(768),s=n(91),o=n(5),u=n(139),c=n(7514),d=n(5622),m=n(5895);t.a=({obj:e})=>{var t,n;const{t:p}=Object(i.useTranslation)(),{ns:g}=Object(r.useParams)(),v=Object(m.e)(e)?null===(t=e.status)||void 0===t?void 0:t.latestTaskRunRef:null===(n=e.status)||void 0===n?void 0:n.taskRunName,[b,f,h]=Object(l.a)(v?{groupVersionKind:Object(s.b)(d.n),namespace:g,name:v,isList:!1}:null);return v?!b&&h?a.createElement(u.h,{label:p("shipwright-plugin~Logs"),loadError:h}):b||f?a.createElement(c.a,{obj:b}):a.createElement(o.S,null):a.createElement(u.h,{label:p("shipwright-plugin~Logs"),loadError:new Error(p("shipwright-plugin~BuildRun status doesn't contain a TaskRun reference yet."))})}},11490:function(e,t,n){"use strict";var a=n(0),i=n(55),r=n(7),l=n(5),s=n(8),o=n(614),u=n(1941),c=n(5729),d=n(11491),m=n(8334),p=n(11504),g=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function l(e){try{o(a.next(e))}catch(e){r(e)}}function s(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,s)}o((a=a.apply(e,t||[])).next())}))};t.a=({heading:e,build:t,namespace:n,name:v})=>{const{t:b}=Object(r.useTranslation)(),[f]=a.useState(()=>{var e;const n=Object(m.b)(t);return n.yamlData=Object(u.b)(t,"",{skipInvalid:!0}),n.resourceVersion=null===(e=null==t?void 0:t.metadata)||void 0===e?void 0:e.resourceVersion,n.formReloadCount=0,n}),h=()=>l.Vb.goBack();return a.createElement(i.b,{initialValues:f,validationSchema:Object(p.a)(),onSubmit:(e,t)=>g(void 0,void 0,void 0,(function*(){var a;let i;try{i=Object(u.c)(e.yamlData),(null===(a=null==i?void 0:i.metadata)||void 0===a?void 0:a.namespace)||(i.metadata.namespace=n)}catch(e){return void t.setStatus({submitSuccess:"",submitError:b("shipwright-plugin~Invalid YAML - {{err}}",{err:e})})}const r=e.editorType===o.b.Form?Object(m.c)(i,e):i;try{const e=!v?yield Object(s.jb)(c.a,r):yield Object(s.rb)(c.a,r,n,v);l.Vb.push(Object(l.uc)(c.a,e.metadata.name,e.metadata.namespace))}catch(e){t.setStatus({submitSuccess:"",submitError:e.message})}})),enableReinitialize:!0},n=>a.createElement(d.a,Object.assign({},n,{heading:e,build:t,handleCancel:h})))}},11491:function(e,t,n){"use strict";var a=n(0),i=n(22),r=n(7),l=n(14),s=n(15),o=n(5962),u=n(614),c=n(1941),d=n(5729),m=n(11492),p=n(8334);t.a=({handleSubmit:e,heading:t,build:n,values:g,handleCancel:v,setFieldValue:b,setStatus:f,setErrors:h,status:E,dirty:y,isSubmitting:k,errors:S})=>{var O,j,T;const{t:w}=Object(r.useTranslation)(),{ns:R}=Object(l.useParams)(),N=!(null===(O=null==n?void 0:n.metadata)||void 0===O?void 0:O.name),C=!N&&(null===(j=null==n?void 0:n.metadata)||void 0===j?void 0:j.resourceVersion)!==g.resourceVersion,P=(null===(T=null==n?void 0:n.metadata)||void 0===T?void 0:T.namespace)||R,I=a.createElement(m.a,{namespace:P}),_=a.createElement(s.C,{name:"yamlData",model:d.a,showSamples:N,onSave:e}),D=a.useCallback(()=>{var e;f({submitSuccess:"",submitError:""}),h({}),g.editorType===u.b.Form&&b("formData",Object(p.b)(n,g).formData,!1),b("yamlData",Object(c.b)(n,"",{skipInvalid:!0}),!1),b("resourceVersion",null===(e=null==n?void 0:n.metadata)||void 0===e?void 0:e.resourceVersion,!0),b("formReloadCount",g.formReloadCount+1)},[b,f,h,n,g]);return a.createElement(s.P,{onSubmit:e},a.createElement(s.Q,{flexLayout:!0},a.createElement(s.S,{title:t}),a.createElement(s.fc,{name:"editorType",formContext:{name:"formData",editor:I,sanitizeTo:e=>Object(p.b)(e,g).formData},yamlContext:{name:"yamlData",editor:_,sanitizeTo:()=>Object(p.a)(g)},lastViewUserSettingKey:"shipwright.buildForm.editor.lastView",noMargin:!0})),a.createElement(s.R,{handleReset:N?null:D,errorMessage:null==E?void 0:E.submitError,successMessage:null==E?void 0:E.submitSuccess,showAlert:C,infoTitle:w("shipwright-plugin~This object has been updated."),infoMessage:w("shipwright-plugin~Click reload to see the new version."),isSubmitting:k,submitLabel:w(N?"shipwright-plugin~Create":"shipwright-plugin~Save"),disableSubmit:(g.editorType===u.b.YAML?!y:!y||!i.a(S))||k,handleCancel:v,handleDownload:g.editorType===u.b.YAML&&(()=>Object(o.a)(g.yamlData)),sticky:!0}))}},11492:function(e,t,n){"use strict";var a=n(0),i=n(7316),r=n(6552),l=n(6107),s=n(6324),o=n(11493),u=n(11494),c=n(11497),d=n(11498);t.a=({namespace:e})=>{const[t,n]=a.useState(!0);return a.createElement(a.Fragment,null,t&&a.createElement(s.a,{onClose:()=>n(!1)}),a.createElement(r.a,null),a.createElement(l.a,{title:"Source",formContextField:"formData.source.git",autoFocus:!1}),a.createElement(o.a,{namespace:e}),a.createElement(c.a,null),a.createElement(d.a,{namespace:e}),a.createElement(u.a,{namespace:e}),a.createElement(i.a,{namespace:e}))}},11493:function(e,t,n){"use strict";var a=n(0),i=n(80),r=n(55),l=n(4424),s=n(7),o=n(5618),u=n(83),c=n(108),d=n(15),m=n(5729);t.a=({namespace:e,formType:t})=>{const{t:n}=Object(s.useTranslation)(),{setFieldValue:p}=Object(r.f)(),[g,v]=a.useState(""),b={bs:{isList:!0,groupVersionKind:Object(u.getGroupVersionKindForModel)(m.e),namespace:e,optional:!0},cbs:{isList:!0,groupVersionKind:Object(u.getGroupVersionKindForModel)(m.g),optional:!0}},f=Object(c.b)(b),h=a.useMemo(()=>[...f.bs.data,...f.cbs.data],[f.bs.data,f.cbs.data]);a.useEffect(()=>{var e,t,n,a;const i=Object.keys(f).find(e=>f[e].loadError);0===h.length&&!(null===(e=f[i])||void 0===e?void 0:e.loaded)&&(null===(t=f[i])||void 0===t?void 0:t.loadError)?v(""+(null===(a=null===(n=f[i])||void 0===n?void 0:n.loadError)||void 0===a?void 0:a.message)):v("")},[h,f]);const E=a.useMemo(()=>h.reduce((e,t)=>(e.push({label:t.metadata.name,value:t.metadata.name,description:`${t.apiVersion}~${t.kind}`}),e),[]),[h]);return a.createElement(o.a,null,a.createElement(d.Zb,{"data-test-id":"build-strategy-field",name:"formData.build.strategy",label:n("shipwright-plugin~Build Strategy"),onChange:e=>{var t,n,a;p("formData.build.strategy",e);const i=null==h?void 0:h.find(t=>t.metadata.name===e);p("formData.build.selectedBuildStrategy",i),p("formData.build.kind",i.kind);const r=((null===(n=null===(t=null==i?void 0:i.spec)||void 0===t?void 0:t.volumes)||void 0===n?void 0:n.filter(e=>!0===e.overridable))||[]).map(e=>{const t=Object.keys(e),n=l.a(t,"name","overridable","description");return{name:e.name,resourceType:n[0],resource:"emptyDir"===n[0]?e[n[0]]:e[n[0]].name,overridable:e.overridable,description:e.description}});if(p("formData.volumes",r||[]),null==i?void 0:i.spec){const e=((null===(a=null==i?void 0:i.spec)||void 0===a?void 0:a.parameters)||[]).map(e=>Object.assign(Object.assign(Object.assign({},e),e.type?{type:e.type}:{type:e.defaults?"array":"string"}),{value:e.default||e.defaults}));p("formData.parameters",e)}},isDisabled:"edit"===t,ariaLabel:n("shipwright-plugin~Cluster Build Strategy"),placeholderText:n("shipwright-plugin~Select Build Strategy"),helpText:n("shipwright-plugin~Cluster Build Strategies define a shared group of steps, needed to fullfil the application build process."),options:E,toggleOnSelection:!0,required:!0}),g&&0===h.length&&a.createElement(i.a,{variant:"danger",truncateTitle:3,title:g}))}},11494:function(e,t,n){"use strict";var a=n(0),i=n(281),r=n(7),l=n(5618),s=n(15),o=n(11495);t.a=({namespace:e})=>{const{t:t}=Object(r.useTranslation)();return a.createElement(l.a,{title:t("shipwright-plugin~Image")},a.createElement(s.ab,{name:"formData.outputImage.image",type:i.b.text,label:t("shipwright-plugin~Output image"),required:!0,autoComplete:"off",helpText:t("shipwright-plugin~Example for OpenShift internal registry: image-registry.openshift-image-registry.svc:5000/<image-namespace>/<image-name>:latest")}),a.createElement(o.a,{formContextField:"formData.outputImage.secret",namespace:e}))}},11495:function(e,t,n){"use strict";var a=n(0),i=n(219),r=n(297),l=n(319),s=n(157),o=n(55),u=n(16),c=n(7),d=n(5961),m=n(4359),p=n(15),g=n(11496);t.a=({formContextField:e,namespace:t})=>{const n=e?""+e:"",{t:v}=Object(c.useTranslation)(),{values:b,setFieldValue:f}=Object(o.f)(),h=u.a(b,""+n),E=e=>{f(""+n,e)};return a.createElement(a.Fragment,null,a.createElement(i.a,{fieldId:Object(p.Kc)("source-secret","dropdown"),label:v("shipwright-plugin~Push Secret")},a.createElement(g.a,{name:""+n,dropDownClassName:"dropdown--full-width",menuClassName:"dropdown-menu--text-wrap",namespace:t,actionItems:[{actionTitle:v("shipwright-plugin~Create new Secret"),actionKey:"create-pull-secret"},{actionTitle:v("shipwright-plugin~No Secret"),actionKey:"clear-pull-secret"}],selectedKey:h,title:h,onChange:e=>{"create-pull-secret"===e?(f(""+n,h),Object(d.a)({namespace:t,save:E,secretType:m.SecretTypeAbstraction.image})):f(""+n,"clear-pull-secret"===e?"":e)}}),a.createElement(r.a,null,a.createElement(l.a,null,a.createElement(s.a,null,v("shipwright-plugin~Secret with credentials for pushing build"))))))}},11496:function(e,t,n){"use strict";var a=n(0),i=n(230),r=n(7),l=n(5),s=n(10),o=n(15);t.a=e=>{const{t:t}=Object(r.useTranslation)(),n=[{isList:!0,kind:s.SecretModel.kind,namespace:e.namespace,prop:s.SecretModel.id,optional:!0}];return a.createElement(l.C,{resources:n},a.createElement(o.Nb,Object.assign({},e,{dataSelector:["metadata","name"],placeholder:t("shipwright-plugin~Select a Secret"),autocompleteFilter:(e,t)=>{var n;return i(e,null===(n=null==t?void 0:t.props)||void 0===n?void 0:n.name)},resourceFilter:e=>"kubernetes.io/dockercfg"===e.type||"kubernetes.io/dockerconfigjson"===e.type,showBadge:!0})))}},11497:function(e,t,n){"use strict";var a=n(0),i=n(281),r=n(55),l=n(7),s=n(5618),o=n(15),u=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n};t.a=()=>{const{t:e}=Object(l.useTranslation)(),{values:{formData:t}}=Object(r.f)();return a.createElement(s.a,null,a.createElement(r.a,{name:"parameters",key:"parameters-row",render:()=>(null==t?void 0:t.parameters.length)>0&&a.createElement(s.a,{title:e("shipwright-plugin~Parameters"),fullWidth:!0},null==t?void 0:t.parameters.map((e,t)=>{const n=`formData.parameters.${t}.value`,r="array"===(l=e).type?!l.defaults:!l.default;var l;return"array"===e.type?a.createElement(o.lc,{name:n,label:e.name,helpText:e.description,addLabel:"Add "+e.name,"data-test":e.name+"-text-column-field",key:e.name,required:r},e=>{var{name:t}=e,n=u(e,["name"]);return a.createElement(o.ab,Object.assign({name:t},n,{autoComplete:"off",required:r}))}):a.createElement(a.Fragment,{key:e.name},a.createElement(o.ab,{ref:s,name:n,type:i.b.text,label:e.name,helpText:e.description,autoComplete:"off",required:r}));var s}))}))}},11498:function(e,t,n){"use strict";var a=n(0),i=n(379),r=n(184),l=n(281),s=n(4341),o=n(19),u=n(408),c=n(55),d=n(16),m=n(7),p=n(5618),g=n(15),v=n(11499),b=n(11500),f=n(11501),h=n(11502);const E=({namePrefix:e,onDelete:t,namespace:n})=>{const{t:p}=Object(m.useTranslation)(),{values:E,setFieldValue:y}=Object(c.f)(),k=d.a(E,e+".resourceType"),S={[h.a.EmptyDirectory]:p("shipwright-plugin~EmptyDir"),[h.a.ConfigMap]:p("shipwright-plugin~Config Map"),[h.a.Secret]:p("shipwright-plugin~Secret"),[h.a.PVC]:p("shipwright-plugin~PersistentVolumeClaim")};return a.createElement(i.a,{hasGutter:!0},a.createElement(r.a,{span:5},a.createElement(g.ab,{"data-test":"build-volumeName",label:"Name",name:e+".name",type:l.b.text,placeholder:p("shipwright-plugin~Enter volume name"),"aria-label":"name",isDisabled:!0})),a.createElement(r.a,{span:6},a.createElement("div",{className:"form-group"},a.createElement(g.I,{name:e+".resourceType",label:"Volume",items:S,onChange:t=>{y(e+".resourceType",t)},fullWidth:!0}),((e,t,n)=>{const{values:i,setFieldValue:r}=Object(c.f)(),l=d.a(i,t+".resource"),s=a.useCallback(e=>{r(t+".resource",e)},[t,r]);switch(e){case h.a.Secret:return a.createElement(f.a,{name:t+".resource",namespace:n});case h.a.ConfigMap:return a.createElement(v.a,{name:t+".resource",namespace:n,dropDownClassName:"dropdown--full-width",onChange:s,selectedKey:l});case h.a.EmptyDirectory:return null;case h.a.PVC:return a.createElement(b.a,{name:t+".resource",namespace:n});default:return null}})(k,e,n))),a.createElement(r.a,{span:1},a.createElement(s.a,null,a.createElement(o.a,{variant:o.d.plain,type:o.c.button,onClick:t},a.createElement(u.a,null)))))};t.a=({namespace:e})=>{const{t:t}=Object(m.useTranslation)(),{values:n}=Object(c.f)(),{volumes:i}=n.formData,r=null==i?void 0:i.filter(e=>e.overridable);return(null==r?void 0:r.length)>0&&a.createElement(g.mb,{"data-test":"build-volumes",name:"formData.volumes",headers:[],emptyValues:{name:"",resourceType:"",resourceName:""},hideAddRow:!0,rowRenderer:({onDelete:i,fieldName:r})=>d.a(n,r+".overridable")&&a.createElement(p.a,{title:t("shipwright-plugin~Volumes")},a.createElement(E,{namePrefix:r,onDelete:i,namespace:e}))})}},11499:function(e,t,n){"use strict";var a=n(0),i=n(230),r=n(7),l=n(83),s=n(108),o=n(10),u=n(15);t.a=e=>{const{t:t}=Object(r.useTranslation)(),n={configmap:{isList:!0,namespace:e.namespace,groupVersionKind:Object(l.getGroupVersionKindForModel)(o.ConfigMapModel)}},c=Object(s.b)(n);return a.createElement(u.Nb,Object.assign({},e,{dataSelector:["metadata","name"],placeholder:t("shipwright-plugin~Select a ConfigMap"),autocompleteFilter:(e,t)=>{var n;return i(e,null===(n=null==t?void 0:t.props)||void 0===n?void 0:n.name)},showBadge:!0,resources:[{data:c.configmap.data,loaded:c.configmap.loaded,loadError:c.configmap.loadError,kind:o.ConfigMapModel.kind}],loadError:c.configmap.loadError,loaded:c.configmap.loaded}))}},11500:function(e,t,n){"use strict";var a=n(0),i=n(230),r=n(7),l=n(10),s=n(15);t.a=({name:e,namespace:t})=>{const{t:n}=Object(r.useTranslation)(),o=[{isList:!0,kind:l.PersistentVolumeClaimModel.kind,namespace:t,prop:l.PersistentVolumeClaimModel.id,optional:!0}];return a.createElement(s.Ob,{name:e,resources:o,dataSelector:["metadata","name"],placeholder:n("shipwright-plugin~Select a PVC"),autocompleteFilter:(e,t)=>{var n;return i(e,null===(n=null==t?void 0:t.props)||void 0===n?void 0:n.name)},fullWidth:!0,showBadge:!0})}},11501:function(e,t,n){"use strict";var a=n(0),i=n(230),r=n(7),l=n(10),s=n(15);t.a=({name:e,namespace:t})=>{const{t:n}=Object(r.useTranslation)(),o=[{isList:!0,kind:l.SecretModel.kind,namespace:t,prop:l.SecretModel.id,optional:!0}];return a.createElement(s.Ob,{name:e,resources:o,dataSelector:["metadata","name"],placeholder:n("shipwright-plugin~Select a Secret"),autocompleteFilter:(e,t)=>{var n;return i(e,null===(n=null==t?void 0:t.props)||void 0===n?void 0:n.name)},fullWidth:!0,showBadge:!0})}},11502:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.EmptyDirectory="emptyDir",e.ConfigMap="configMap",e.Secret="secret",e.PVC="pvc"}(a||(a={}))},11503:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(6333),i=n(5591),r=n(614);const l=e=>({editorType:r.b.Form,git:{url:"",type:i.b.INVALID,ref:"",dir:"/",showGitType:!1,secret:"",isUrlValidating:!1},formData:{name:"",source:{type:"Git",git:{formType:"edit",name:"",git:{url:"",type:i.b.INVALID,ref:"",dir:"/",showGitType:!1,secret:"",isUrlValidating:!1},image:{selectedKey:"",selected:"",recommended:"",tagObj:"",couldNotRecommend:!1},application:{selected:"",selectedKey:"",name:"",isInContext:null},build:{strategy:a.c.Source},project:{name:e}}},build:{strategy:"",selectedBuildStrategy:void 0,kind:""},parameters:[],volumes:[],outputImage:{image:"",secret:""},environmentVariables:[]},yamlData:"",resourceVersion:void 0})},11504:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(689),i=n(359),r=n(614);const l=()=>a.mixed().test({test:e=>a.object({editorType:a.string().oneOf(Object.values(r.b)).required(i.a.t("shipwright-plugin~Required")),formData:a.mixed().when("editorType",{is:r.b.Form,then:a.object({name:a.string().required(i.a.t("shipwright-plugin~Required")),outputImage:a.object({image:a.string().required(i.a.t("shipwright-plugin~Required")),secret:a.string()}),source:a.object({type:a.string(),git:a.object({git:a.object({url:a.string().required(i.a.t("shipwright-plugin~Required")),ref:a.string(),dir:a.string()})})}).required(i.a.t("shipwright-plugin~Required")),build:a.object({strategy:a.string().required(i.a.t("shipwright-plugin~Required"))}),environmentVariables:a.array()})}),yamlData:a.mixed().when("editorType",{is:r.b.YAML,then:a.string().required(i.a.t("shipwright-plugin~Required"))})}).validate(e,{abortEarly:!1})})},4362:function(e,t,n){"use strict";n.r(t),n.d(t,"getAnnotationTags",(function(){return L})),n.d(t,"getBuilderTags",(function(){return U})),n.d(t,"getBuilderTagsSortedByVersion",(function(){return M})),n.d(t,"getMostRecentBuilderTag",(function(){return V})),n.d(t,"isBuilder",(function(){return A})),n.d(t,"ExampleDockerCommandPopover",(function(){return H})),n.d(t,"ImageStreamsDetails",(function(){return W})),n.d(t,"ImageStreamsDetailsPage",(function(){return z})),n.d(t,"ImageStreamsList",(function(){return X})),n.d(t,"buildPhase",(function(){return Z})),n.d(t,"ImageStreamsPage",(function(){return ee}));var a=n(0),i=n(7),r=n(16),l=n(240),s=n(2050),o=n(116),u=n(1533),c=n(22),d=n(225),m=n(7187),p=n(117),g=n(50),v=n(283),b=n(18),f=n(54),h=n(353),E=n(19),y=n(80),k=n(979),S=n(10),O=n(40),j=n(5),T=n(1198),w=n(1414),R=n(173),N=n(981),C=n(284),P=n(1413),I=n(1948),_=n(99),D=n(1411),B=n(693),x=n(5781),F=n(15);const L=e=>r.a(e,"annotations.tags","").split(/\s*,\s*/),U=e=>{const t=(e=>{const t=r.a(e,"status.tags");return s.a(t,"tag")})(e);return o.a(e.spec.tags,e=>(e=>{const t=L(e);return l.a(t,"builder")&&!l.a(t,"hidden")})(e)&&t[e.name])},M=e=>U(e).sort(({name:e},{name:t})=>{const n=v.coerce(e),a=v.coerce(t);return n||a?n?a?v.rcompare(n,a):-1:1:e.localeCompare(t)}),V=e=>{const t=M(e);return u.a(t)},A=e=>!c.a(U(e)),{common:G}=N.a.factory,K=[...N.a.getExtensionsActionsForKind(S.ImageStreamModel),...G],$=({imageStream:e,specTag:t,statusTag:n})=>{const l=r.a(e,"status"),s=r.a(n,["items",0]),o=r.a(t,"from"),u="ImageStreamTag"===r.a(t,"from.kind"),c=r.a(s,"image"),m=r.a(s,"created"),p=d.a(e,["metadata","annotations","openshift.io/image.dockerRepositoryCheck"]),{t:g}=Object(i.useTranslation)();return a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-2 col-sm-4 col-xs-4 co-break-word"},a.createElement(_.ResourceLink,{kind:"ImageStreamTag",name:Object(x.b)(e.metadata.name,n.tag),namespace:e.metadata.namespace,title:n.tag,linkTo:!!c})),a.createElement("span",{className:"col-md-3 col-sm-4 col-xs-8 co-break-all"},o&&u&&a.createElement(_.ResourceLink,{kind:"ImageStreamTag",name:o.name,namespace:e.metadata.namespace,title:o.name}),o&&!u&&a.createElement(a.Fragment,null,o.name),!o&&a.createElement("span",{className:"text-muted"},g("public~pushed image"))),a.createElement("span",{className:"col-md-4 col-sm-4 hidden-xs co-break-all"},!l&&p&&a.createElement(a.Fragment,null,a.createElement(F.tc,null)," ",g("public~Unable to resolve")),!l&&!p&&!o&&a.createElement(a.Fragment,null,g("public~Not synced yet")),!l&&!p&&o&&a.createElement(a.Fragment,null,g("public~Unresolved")),l&&c&&a.createElement(a.Fragment,null,c),l&&!c&&a.createElement(a.Fragment,null,a.createElement(F.tc,null)," ",g("public~There is no image associated with this tag"))),a.createElement("div",{className:"col-md-3 hidden-sm hidden-xs"},m&&a.createElement(B.Timestamp,{timestamp:m}),!m&&"-"))},H=({imageStream:e,tag:t})=>{const n=r.a(e,"status.publicDockerImageRepository"),{t:l}=Object(i.useTranslation)();if(!n)return null;const s=`docker push ${n}:${t||"<tag>"}`,o=`docker pull ${n}:${t||"<tag>"}`;return a.createElement(h.a,{headerContent:a.createElement(a.Fragment,null,l("public~Image registry commands")),className:"co-example-docker-command__popover",minWidth:"600px",bodyContent:a.createElement("div",null,a.createElement("p",null,l("public~Create a new ImageStreamTag by pushing an image to this ImageStream with the desired tag.")),a.createElement("br",null),a.createElement("p",null,l("public~Authenticate to the internal registry")),a.createElement(T.a,{value:"oc registry login"}),a.createElement("br",null),a.createElement("p",null,l("public~Push an image to this ImageStream")),a.createElement(T.a,{value:s}),a.createElement("br",null),a.createElement("p",null,l("public~Pull an image from this ImageStream")),a.createElement(T.a,{value:o}),a.createElement("br",null),a.createElement("p",null,a.createElement(i.Trans,{t:l,ns:"public"},"Red Hat Enterprise Linux users may use the equivalent ",a.createElement("strong",null,"podman")," ","commands."," "),a.createElement(R.a,{href:j.p,text:l("public~Learn more.")})))},a.createElement(E.a,{className:"hidden-sm hidden-xs",type:"button",variant:"link"},a.createElement(k.a,{className:"co-icon-space-r"}),l("public~Do you need to work with this ImageStream outside of the web console?")))},W=({obj:e})=>{const{t:t}=Object(i.useTranslation)(),n=r.a(e,"status.dockerImageRepository"),l=r.a(e,"status.publicDockerImageRepository"),o=r.a(e,"status.tags.length"),u=s.a(e.spec.tags,"name"),d=m.a(e.status.tags,(n,a)=>{const i=p.a(a.conditions,e=>"ImportSuccess"===e.type&&"False"===e.status);i&&n.push(t("public~Unable to sync image for tag {{tag}}. {{message}}",{tag:`${e.metadata.name}:${a.tag}`,message:i.message}))});return a.createElement("div",null,a.createElement("div",{className:"co-m-pane__body"},!c.a(d)&&a.createElement(w.a,{variant:y.b.warning,alerts:g.a(d,(e,t)=>a.createElement(a.Fragment,{key:t},e))}),a.createElement(C.c,{text:t("public~ImageStream details")}),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6"},a.createElement(D.b,{resource:e},n&&a.createElement("dt",null,t("public~Image repository")),n&&a.createElement("dd",null,n),l&&a.createElement("dt",null,t("public~Public image repository")),l&&a.createElement("dd",null,l),a.createElement("dt",null,t("public~Image count")),a.createElement("dd",null,o||0)),a.createElement(H,{imageStream:e})))),a.createElement("div",{className:"co-m-pane__body"},a.createElement(C.c,{text:t("public~Tags")}),c.a(e.status.tags)?a.createElement("span",{className:"text-muted"},t("public~No tags")):a.createElement("div",{className:"row"},a.createElement("div",{className:"co-m-table-grid co-m-table-grid--bordered"},a.createElement("div",{className:"row co-m-table-grid__head"},a.createElement("div",{className:"col-md-2 col-sm-4 col-xs-4"},t("public~Name")),a.createElement("div",{className:"col-md-3 col-sm-4 col-xs-8"},t("public~From")),a.createElement("div",{className:"col-md-4 col-sm-4 hidden-xs"},t("public~Identifier")),a.createElement("div",{className:"col-md-3 hidden-sm hidden-xs"},t("public~Last updated"))),a.createElement("div",{className:"co-m-table-grid__body"},g.a(e.status.tags,t=>a.createElement($,{key:t.tag,imageStream:e,specTag:u[t.tag],statusTag:t})))))))},q=({obj:e})=>{const t=r.a(e,"status.tags");return a.createElement(x.a,{imageStreamTags:t,imageStreamName:e.metadata.name,imageStreamNamespace:e.metadata.namespace})};q.displayName="ImageStreamHistory";const Y=[I.navFactory.details(W),I.navFactory.editYaml(),I.navFactory.history(q)],z=e=>a.createElement(O.a,Object.assign({},e,{kind:"ImageStream",menuActions:K,pages:Y}));z.displayName="ImageStreamsDetailsPage";const J=["","","pf-m-hidden pf-m-visible-on-md","pf-m-hidden pf-m-visible-on-lg",N.a.columnClass],Q=({obj:e})=>a.createElement(a.Fragment,null,a.createElement(O.k,{className:J[0]},a.createElement(_.ResourceLink,{kind:"ImageStream",name:e.metadata.name,namespace:e.metadata.namespace})),a.createElement(O.k,{className:b(J[1],"co-break-word"),columnID:"namespace"},a.createElement(_.ResourceLink,{kind:"Namespace",name:e.metadata.namespace})),a.createElement(O.k,{className:J[2]},a.createElement(P.a,{kind:"ImageStream",labels:e.metadata.labels})),a.createElement(O.k,{className:J[3]},a.createElement(B.Timestamp,{timestamp:e.metadata.creationTimestamp})),a.createElement(O.k,{className:J[4]},a.createElement(N.d,{actions:K,kind:"ImageStream",resource:e}))),X=e=>{const{t:t}=Object(i.useTranslation)(),n=()=>[{title:t("public~Name"),sortField:"metadata.name",transforms:[f.a],props:{className:J[0]}},{title:t("public~Namespace"),sortField:"metadata.namespace",transforms:[f.a],props:{className:J[1]},id:"namespace"},{title:t("public~Labels"),sortField:"metadata.labels",transforms:[f.a],props:{className:J[2]}},{title:t("public~Created"),sortField:"metadata.creationTimestamp",transforms:[f.a],props:{className:J[3]}},{title:"",props:{className:J[4]}}];return n.displayName="ImageStreamsTableHeader",a.createElement(O.j,Object.assign({},e,{"aria-label":t("public~ImageStreams"),Header:n,Row:Q,virtualize:!0}))};X.displayName="ImageStreamsList";const Z=e=>e.status.phase,ee=e=>{const{t:t}=Object(i.useTranslation)();return a.createElement(O.c,Object.assign({},e,{title:t("public~ImageStreams"),kind:"ImageStream",ListComponent:X,canCreate:!0}))};ee.displayName="ImageStreamsListPage"},478:function(e,t,n){"use strict";n.r(t);var a=n(7520);n.d(t,"BuildListPage",(function(){return a.a}));var i=n(6861);n.d(t,"BuildRunListPage",(function(){return i.a}));var r=n(8327);n.d(t,"BuildDetailsPage",(function(){return r.a}));var l=n(8329);n.d(t,"BuildRunDetailsPage",(function(){return l.a}));var s=n(8330);n.d(t,"BuildStrategyDetailsPage",(function(){return s.a}));var o=n(8331);n.d(t,"ClusterBuildStrategyDetailsPage",(function(){return o.a}));var u=n(8332);n.d(t,"ShipwrightTabListPage",(function(){return u.a}));var c=n(8333);n.d(t,"BuildFormPage",(function(){return c.a}))},5595:function(e,t,n){"use strict";var a=n(5626);n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return a.b})),n.d(t,"d",(function(){return a.c}));n(5627);var i=n(5628);n.d(t,"e",(function(){return i.a}));n(5629),n(5630);var r=n(5631);n.d(t,"f",(function(){return r.a}));var l=n(5632);n.d(t,"a",(function(){return l.a}))},5617:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"h",(function(){return d})),n.d(t,"f",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"g",(function(){return g})),n.d(t,"e",(function(){return v})),n.d(t,"i",(function(){return b})),n.d(t,"j",(function(){return f}));var a,i=n(29),r=n(16),l=n(240),s=n(5595);!function(e){e.PipelineRunCancelled="StoppedRunFinally",e.PipelineRunStopped="CancelledRunFinally",e.TaskRunCancelled="TaskRunCancelled",e.Cancelled="Cancelled",e.PipelineRunStopping="PipelineRunStopping",e.PipelineRunPending="PipelineRunPending",e.TaskRunStopping="TaskRunStopping",e.CreateContainerConfigError="CreateContainerConfigError",e.ExceededNodeResources="ExceededNodeResources",e.ExceededResourceQuota="ExceededResourceQuota",e.ConditionCheckFailed="ConditionCheckFailed"}(a||(a={}));const o=e=>{var t;const n=r.a(e,["status","conditions"],[]);if(0===n.length)return null;const i=n.find(e=>"Succeeded"===e.type),l=n.find(e=>"Cancelled"===e.reason);if([a.PipelineRunStopped,a.PipelineRunCancelled].includes(null===(t=e.spec)||void 0===t?void 0:t.status)&&!l)return s.a.Cancelling;if(!i||!i.status)return null;const o="True"===i.status?s.a.Succeeded:"False"===i.status?s.a.Failed:s.a.Running;if(i.reason&&i.reason!==o)switch(i.reason){case a.PipelineRunCancelled:case a.TaskRunCancelled:case a.Cancelled:case a.PipelineRunStopped:return s.a.Cancelled;case a.PipelineRunStopping:case a.TaskRunStopping:return s.a.Failed;case a.CreateContainerConfigError:case a.ExceededNodeResources:case a.ExceededResourceQuota:case a.PipelineRunPending:return s.a.Pending;case a.ConditionCheckFailed:return s.a.Skipped;default:return o}return o},u=e=>{const t=o(e);if(!t)return"-";switch(t){case s.a.Cancelled:return i.a.t("pipelines-plugin~Cancelled");case s.a.Failed:return i.a.t("pipelines-plugin~Failed");case s.a.Succeeded:return i.a.t("pipelines-plugin~Succeeded");case s.a.Pending:return i.a.t("pipelines-plugin~Pending");case s.a.Running:return i.a.t("pipelines-plugin~Running");case s.a.Skipped:return i.a.t("pipelines-plugin~Skipped");case s.a.Cancelling:return i.a.t("pipelines-plugin~Cancelling");default:return t}},c=e=>e.latestRun&&o(e.latestRun)||s.a.Other,d=e=>e.latestRun&&u(e.latestRun)||"-",m=e=>u(e)||"-",p=e=>o(e)||s.a.Other,g=(e,t)=>{var n;if(!e||!e.selected||!e.selected.length)return!0;const a=c(t);return(null===(n=e.selected)||void 0===n?void 0:n.includes(a))||!l.a(e.all,a)},v=(e,t)=>{var n;if(!e||!e.selected||!e.selected.length)return!0;const a=p(t);return(null===(n=e.selected)||void 0===n?void 0:n.includes(a))||!l.a(e.all,a)},b=e=>o(e)||s.a.Other,f=e=>u(e)||"-"},5618:function(e,t,n){"use strict";var a=n(0),i=n(297),r=n(18),l=n.n(r);n(5732);const s={display:"flex",flex:1,flexDirection:"column",margin:"var(--pf-v5-global--spacer--md) 0"};t.a=({title:e,subTitle:t,fullWidth:n,children:r,flexLayout:o,extraMargin:u,dataTest:c,style:d})=>a.createElement("div",{className:l()("pf-v5-c-form",{"co-m-pane__form":!n,"odc-form-section--extra-margin":u}),style:Object.assign(Object.assign({},o?s:{}),d||{}),"data-test":c},e&&a.createElement("h2",{className:"odc-form-section__heading"},e),t&&a.createElement(i.a,null,t),r)},5623:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return T})),n.d(t,"p",(function(){return w})),n.d(t,"h",(function(){return R})),n.d(t,"f",(function(){return N})),n.d(t,"j",(function(){return C})),n.d(t,"m",(function(){return P})),n.d(t,"o",(function(){return I})),n.d(t,"e",(function(){return _})),n.d(t,"v",(function(){return D})),n.d(t,"B",(function(){return B})),n.d(t,"d",(function(){return x})),n.d(t,"s",(function(){return L})),n.d(t,"w",(function(){return U})),n.d(t,"k",(function(){return M})),n.d(t,"l",(function(){return V})),n.d(t,"t",(function(){return A})),n.d(t,"g",(function(){return G})),n.d(t,"x",(function(){return K})),n.d(t,"y",(function(){return $})),n.d(t,"z",(function(){return H})),n.d(t,"r",(function(){return z})),n.d(t,"u",(function(){return J})),n.d(t,"q",(function(){return Q})),n.d(t,"i",(function(){return X})),n.d(t,"A",(function(){return Z})),n.d(t,"n",(function(){return ee}));var a=n(321),i=n(29),r=n(1557),l=n(117),s=n(16),o=n(22),u=n(640),c=n(1942),d=n(5),m=n(10),p=n(8),g=n(5588),v=n(5650),b=n(5586),f=n(5595),h=n(5635),E=n(5617);const y=e=>e.resources&&e.resources.inputs&&e.resources.inputs.length>0&&!!e.resources.inputs[0].from,k=e=>e.runAfter&&e.runAfter.length>0;var S;!function(e){e.Running="Running",e.Failed="Failed",e.Succeeded="Succeeded",e.Cancelled="Cancelled",e.Other="-"}(S||(S={}));const O={[S.Running]:i.a.t("pipelines-plugin~Running"),[S.Failed]:i.a.t("pipelines-plugin~Failed"),[S.Succeeded]:i.a.t("pipelines-plugin~Succeeded"),[S.Cancelled]:i.a.t("pipelines-plugin~Cancelled"),[S.Other]:i.a.t("pipelines-plugin~Other")};var j;!function(e){e.Git="git",e.PullRequest="pullRequest",e.Image="image",e.Cluster="cluster",e.Storage="storage",e.CloudEvent="cloudEvent"}(j||(j={}));j.Git,j.PullRequest,j.Image,j.Cluster,j.Storage,j.CloudEvent;const T=(e,t,n,i=!1)=>((i?e.spec.finally:e.spec.tasks)||[]).map(e=>{var i;if(!t.status)return e;if(!n||0===n.length)return t.spec.status===E.a.PipelineRunCancelled?r.a(e,{status:{reason:f.a.Cancelled}}):t.spec.status===E.a.PipelineRunPending?r.a(e,{status:{reason:f.a.Idle}}):r.a(e,{status:{reason:f.a.Failed}});const o=l.a(n,t=>t.metadata.labels[g.u.pipelineTask]===e.name),u=null==o?void 0:o.status,c=r.a(e,{status:(null===(i=null==t?void 0:t.status)||void 0===i?void 0:i.taskRuns)?s.a(l.a(t.status.taskRuns,{pipelineTaskName:e.name}),"status"):u});if(c.status&&c.status.completionTime&&c.status.startTime){const e=new Date(c.status.completionTime).getTime()-new Date(c.status.startTime).getTime();c.status.duration=Object(a.a)(e)}return c.status?c.status&&c.status.conditions?c.status.reason=Object(E.d)(c)||f.a.Pending:c.status&&!c.status.reason&&(c.status.reason=f.a.Pending):c.status={reason:f.a.Pending},c}),w=(e,t={apiVersion:"",metadata:{},kind:"PipelineRun",spec:{}},n)=>{var a;const i=[];if(!(null===(a=e.spec)||void 0===a?void 0:a.tasks)||o.a(e.spec.tasks))return i;const r=T(e,t,n);return r.forEach(e=>{y(e)||k(e)||(0===i.length&&i.push([]),i[0].push(e))}),r.forEach(e=>{var t;if(!k(e)&&y(e)){let n=i.length-1;for(let a=0;a<i.length;a++)for(const r of i[a])(null===(t=r.taskRef)||void 0===t?void 0:t.name)!==e.resources.inputs[0].from[0]&&r.name!==e.resources.inputs[0].from[0]||(n=a);const a=i[n+1]?i[n+1]:null;a&&a[0]&&a[0].resources&&a[0].resources.inputs&&a[0].resources.inputs[0]&&a[0].resources.inputs[0].from&&a[0].resources.inputs[0].from[0]&&a[0].resources.inputs[0].from[0]===e.resources.inputs[0].from[0]?a.push(e):i.splice(n+1,0,[e])}}),r.forEach(e=>{var t;if(k(e)){let n=i.length-1;for(let a=0;a<i.length;a++)for(const r of i[a])(null===(t=r.taskRef)||void 0===t?void 0:t.name)!==e.runAfter[0]&&r.name!==e.runAfter[0]||(n=a);const a=i[n+1]?i[n+1]:null;a&&a[0].runAfter&&a[0].runAfter[0]&&a[0].runAfter[0]===e.runAfter[0]?a.push(e):i.splice(n+1,0,[e])}}),i},R=(e,t,n)=>T(e,t,n,!0),N=e=>{if(!e)return d.K;const{state:t,lastState:n}=e;return t.waiting&&!o.a(n)?d.H:t.waiting?d.K:t.terminated?d.J:d.I},C=e=>{if(!e||0===e.length)return{latestPipelineRun:null,status:f.a.PipelineNotStarted};const t=Object(h.b)(e,"creationTimestamp");if(!t)return{latestPipelineRun:null,status:f.a.PipelineNotStarted};let n=Object(E.c)(t);return"-"===n&&(n=f.a.Pending),{latestPipelineRun:t,status:n}},P=e=>e&&e.map(e=>({name:e.name,value:e.default})),I=e=>e&&e.map(e=>Object.assign({name:e.name},e.data)),_=(e,t,n)=>{const a=new Date(e).getTime(),i=((t?new Date(t).getTime():(new Date).getTime())-a)/1e3;return Object(v.g)(i,n)},D=e=>{var t,n,a,i;const r=null!==(n=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.startTime)&&void 0!==n?n:null,l=null!==(i=null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.completionTime)&&void 0!==i?i:null;return!r||!l&&"Running"!==Object(E.d)(e)?"-":_(r,l,!0)},B=(e,t,n)=>{const a=u.a(t);return a.secrets=[...a.secrets,{name:e}],n&&(a.imagePullSecrets=[...a.imagePullSecrets,{name:e}]),Object(p.rb)(m.ServiceAccountModel,a)},x=(e,t,n)=>{Object(p.kb)(m.ServiceAccountModel,g.l,t).then(t=>{void 0===l.a(t.secrets,t=>t.name===e.metadata.name)&&B(e.metadata.name,t,n)}).catch(e=>{Object(c.errorModal)({error:e.message})})},F=(e,t)=>e===g.p.Git?`tekton.dev/${g.p.Git}-${t}`:e===g.p.Image?`tekton.dev/${g.p.Image}-${t}`:null,L=(e,t={})=>{let n=0,a=F(null==e?void 0:e.key,n);if(!a)return t;for(;t[a]&&t[a]!==(null==e?void 0:e.value);)a=F(null==e?void 0:e.key,++n);return Object.assign(Object.assign({},t),{[a]:null==e?void 0:e.value})},U=e=>{switch(e.kind){case b.PipelineModel.kind:case b.TaskModel.kind:case b.EventListenerModel.kind:return"";case b.PipelineRunModel.kind:return"pipeline-runs";case b.PipelineResourceModel.kind:return"pipeline-resources";case b.ConditionModel.kind:return"conditions";case b.TaskRunModel.kind:return"task-runs";case b.ClusterTaskModel.kind:return"cluster-tasks";case b.TriggerTemplateModel.kind:return"trigger-templates";case b.TriggerBindingModel.kind:return"trigger-bindings";case b.ClusterTriggerBindingModel.kind:return"cluster-trigger-bindings";case b.RepositoryModel.kind:return"repositories";default:return null}},M=(e,t,n)=>e.filter(e=>{const{ownerReferences:a=[]}=e.metadata;return a.some(e=>e.name===t&&e.kind===n)}),V=(e,t)=>t.find(t=>t.metadata.name===e.metadata.name),A=(e,t)=>t.filter(t=>!!t.spec.resourcetemplates.find(t=>{var n;return(null===(n=t.spec.pipelineRef)||void 0===n?void 0:n.name)===e.metadata.name})),G=(e,t)=>t.reduce((t,n)=>(n.spec.triggers.filter(t=>e.find(e=>{var n;return(null==e?void 0:e.metadata.name)===(null===(n=null==t?void 0:t.template)||void 0===n?void 0:n.ref)})).length>0&&t.push(n),t),[]),K=e=>"tekton.dev/v1beta1"===e.apiVersion?b.PipelineModelV1Beta1:b.PipelineModel,$=e=>"tekton.dev/v1beta1"===e.apiVersion?b.PipelineRunModelV1Beta1:b.PipelineRunModel,H=e=>"tekton.dev/v1beta1"===e.apiVersion?b.TaskModelV1Beta1:b.TaskModel;var W,q,Y;!function(e){e.KEY="task.results.key",e.TYPE="task.results.type"}(W||(W={})),function(e){e.EXTERNAL_LINK="external-link"}(q||(q={})),function(e){e.IMAGE_REPOSITORY="IMAGE_URL",e.SBOM="LINK_TO_SBOM",e.SCAN_OUTPUT="SCAN_OUTPUT",e.TEST_OUTPUT="TEST_OUTPUT"}(Y||(Y={}));const z=e=>null==e?void 0:e.find(e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.annotations)||void 0===n?void 0:n[W.KEY])===Y.SBOM}),J=e=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.annotations)||void 0===n?void 0:n[W.TYPE])===q.EXTERNAL_LINK},Q=e=>{var t,n,a,i;return null===(i=null===(a=(null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.results)||(null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.taskResults))||void 0===a?void 0:a.find(e=>e.name===Y.SBOM))||void 0===i?void 0:i.value},X=e=>{var t,n,a,i;return null===(i=null===(a=(null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.results)||(null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.pipelineResults))||void 0===a?void 0:a.find(e=>e.name===Y.IMAGE_REPOSITORY))||void 0===i?void 0:i.value},Z=e=>{var t,n;if(!(null===(n=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.conditions)||void 0===n?void 0:n.length))return f.a.Pending;return Object(E.d)(e)},ee=e=>{var t,n,a;const i=null===(a=null===(n=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.conditions)||void 0===n?void 0:n.find(e=>"Succeeded"===(null==e?void 0:e.type)))||void 0===a?void 0:a.message,r=null==i?void 0:i.match(/(\w+)(?::\s*|\s+)(\d+)/g),l={};null==r||r.forEach(e=>{const[t,n]=e.split(/(?::\s*|\s+)/);l[t.trim()]=Number(n.trim())});const s=((null==l?void 0:l.Completed)||0)-((null==l?void 0:l.Failed)||0)-((null==l?void 0:l.Cancelled)||0);return{Running:(null==l?void 0:l.Incomplete)||0,Succeeded:s||0,Cancelled:(null==l?void 0:l.Cancelled)||0,Failed:(null==l?void 0:l.Failed)||0,Skipped:(null==l?void 0:l.Skipped)||0,Completed:(null==l?void 0:l.Completed)||0,Cancelling:(null==l?void 0:l.Cancelled)||0,PipelineNotStarted:0,Pending:0}}},5626:function(e,t,n){"use strict";var a,i,r;n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r})),function(e){e.METRICS_PIPELINERUN_DURATION_TYPE="metrics.pipelinerun.duration-type",e.METRICS_PIPELINERUN_LEVEL="metrics.pipelinerun.level",e.METRICS_TASKRUN_DURATION_TYPE="metrics.taskrun.duration-type",e.METRICS_TASKRUN_LEVEL="metrics.taskrun.level"}(a||(a={})),function(e){e.PIPELINE="pipeline",e.PIPELINERUN="pipelinerun",e.TASK="task",e.TASKRUN="taskrun"}(i||(i={})),function(e){e.HISTOGRAM="histogram",e.LASTVALUE="lastvalue",e.NAMESPACE="namespace"}(r||(r={}))},5627:function(e,t,n){},5628:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={group:"tekton.dev",version:"v1",kind:"PipelineRun"}},5629:function(e,t,n){},5630:function(e,t,n){},5631:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={group:"tekton.dev",version:"v1",kind:"TaskRun"}},5632:function(e,t,n){"use strict";var a,i;n.d(t,"a",(function(){return a})),function(e){e.Cancelling="Cancelling",e.Succeeded="Succeeded",e.Failed="Failed",e.Running="Running",e["In Progress"]="In Progress",e.FailedToStart="FailedToStart",e.PipelineNotStarted="PipelineNotStarted",e.Skipped="Skipped",e.Cancelled="Cancelled",e.Pending="Pending",e.Idle="Idle",e.Other="-"}(a||(a={})),function(e){e.RunCancelled="RunCancelled"}(i||(i={}))},5635:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return b})),n.d(t,"f",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"i",(function(){return E})),n.d(t,"h",(function(){return k})),n.d(t,"e",(function(){return S})),n.d(t,"g",(function(){return O})),n.d(t,"c",(function(){return j})),n.d(t,"l",(function(){return w})),n.d(t,"m",(function(){return R})),n.d(t,"j",(function(){return N})),n.d(t,"k",(function(){return C}));var a=n(5699),i=n(1403),r=n(5692),l=n(5691),s=n(5654),o=n(2225),u=n(29),c=n(8),d=n(5588),m=n(5586),p=n(5595),g=n(5617);const v=(e,t)=>{if(!(e&&e.length>0&&t))return null;let n=e[0];if("creationTimestamp"===t)for(let a=1;a<e.length;a++)n=e[a]&&e[a].metadata&&e[a].metadata[t]&&new Date(e[a].metadata[t])>new Date(n.metadata[t])?e[a]:n;else if("startTime"===t||"completionTime"===t)for(let a=1;a<e.length;a++)n=e[a]&&e[a].status&&e[a].status[t]&&new Date(e[a].status[t])>new Date(n.status[t])?e[a]:n;else n=e[e.length-1];return n.status||(n=Object.assign(Object.assign({},n),{status:{pipelineSpec:{tasks:[]}}})),n.status.succeededCondition||(n.status=Object.assign(Object.assign({},n.status),{succeededCondition:""})),n.status.succeededCondition=Object(g.c)(n),n},b=(e,t)=>e.map(e=>{const n=t.filter(t=>{var n;return(null===(n=t.metadata.labels)||void 0===n?void 0:n["tekton.dev/pipeline"])===e.metadata.name});return e.latestRun=v(n,"creationTimestamp"),e}),f=e=>{switch(e){case p.a.Succeeded:return{message:u.a.t("pipelines-plugin~Succeeded"),pftoken:s.chart_color_green_400};case p.a.Failed:return{message:u.a.t("pipelines-plugin~Failed"),pftoken:o.global_danger_color_100};case p.a.FailedToStart:return{message:u.a.t("pipelines-plugin~PipelineRun failed to start"),pftoken:o.global_danger_color_100};case p.a.Running:case p.a["In Progress"]:return{message:u.a.t("pipelines-plugin~Running"),pftoken:l.chart_color_blue_300};case p.a.Skipped:return{message:u.a.t("pipelines-plugin~Skipped"),pftoken:a.chart_color_black_400};case p.a.Cancelled:return{message:u.a.t("pipelines-plugin~Cancelled"),pftoken:i.chart_color_black_500};case p.a.Cancelling:return{message:u.a.t("pipelines-plugin~Cancelling"),pftoken:i.chart_color_black_500};case p.a.Idle:case p.a.Pending:return{message:u.a.t("pipelines-plugin~Pending"),pftoken:r.chart_color_blue_100};default:return{message:u.a.t("pipelines-plugin~PipelineRun not started yet"),pftoken:r.chart_color_blue_100}}},h=e=>{var t,n,a,i,r;const l=(null===(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.labels)||void 0===n?void 0:n[d.u.pipeline])||(null===(a=null==e?void 0:e.metadata)||void 0===a?void 0:a.name),s=(null===(i=null==e?void 0:e.status)||void 0===i?void 0:i.pipelineSpec)||(null===(r=null==e?void 0:e.spec)||void 0===r?void 0:r.pipelineSpec);return l&&s?{apiVersion:Object(c.n)(m.PipelineModel),kind:m.PipelineModel.kind,metadata:{name:l,namespace:e.metadata.namespace},spec:s}:null},E=(e,t,n)=>{var a,i,r,l,s;const o=(e=>{var t,n,a,i;if(!e)return 0;return(null!==(n=((null===(t=e.spec)||void 0===t?void 0:t.tasks)||[]).length)&&void 0!==n?n:0)+(null!==(i=((null===(a=e.spec)||void 0===a?void 0:a.finally)||[]).length)&&void 0!==i?i:0)})(t)-(e=>{var t,n,a,i;if(!e)return 0;return(null!==(n=((null===(t=e.spec)||void 0===t?void 0:t.tasks)||[]).filter(e=>{var t,n;return"Task"!==(null===(t=e.taskRef)||void 0===t?void 0:t.kind)&&"ClusterTask"!==(null===(n=e.taskRef)||void 0===n?void 0:n.kind)}).length)&&void 0!==n?n:0)+(null!==(i=((null===(a=e.spec)||void 0===a?void 0:a.finally)||[]).filter(e=>{var t,n;return"Task"!==(null===(t=e.taskRef)||void 0===t?void 0:t.kind)&&"ClusterTask"!==(null===(n=e.taskRef)||void 0===n?void 0:n.kind)}).length)&&void 0!==i?i:0)})(t),u=()=>{var t;return(null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.taskRuns)?Object.keys(e.status.taskRuns):n?null==n?void 0:n.map(e=>e.metadata.name):[]},c=u().length,d=((null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.skippedTasks)||[]).length,m={PipelineNotStarted:0,Pending:0,Running:0,Succeeded:0,Failed:0,Cancelled:0,Skipped:d};if((null===(i=null==e?void 0:e.status)||void 0===i?void 0:i.taskRuns)||n){u().forEach(t=>{const a=Object(g.c)((null==n?void 0:n.find(e=>e.metadata.name===t))||e.status.taskRuns[t]);"Succeeded"===a?m[p.a.Succeeded]++:"Running"===a?m[p.a.Running]++:"Failed"===a?m[p.a.Failed]++:"Cancelled"===a?m[p.a.Cancelled]++:m[p.a.Pending]++});const t=m[p.a.Failed]>0,a=Object(g.c)(e)===p.a.Cancelled,i=o>=c?o-c-d:o;t||a?m[p.a.Cancelled]+=i:m[p.a.Pending]+=i}else"False"===(null===(s=null===(l=null===(r=null==e?void 0:e.status)||void 0===r?void 0:r.conditions)||void 0===l?void 0:l[0])||void 0===s?void 0:s.status)||(null==e?void 0:e.spec.status)===g.a.PipelineRunCancelled?m[p.a.Cancelled]=o:(null==e?void 0:e.spec.status)===g.a.PipelineRunPending?m[p.a.Pending]+=o:m[p.a.PipelineNotStarted]++;return m},y=e=>e===m.ClusterTaskModel.kind?m.ClusterTaskModel:e===m.TaskModel.kind||void 0===e?m.TaskModel:null,k=e=>(y(e)||m.TaskModel).kind,S=e=>e===m.ClusterTriggerBindingModel.kind?m.ClusterTriggerBindingModel:e===m.TriggerBindingModel.kind||void 0===e?m.TriggerBindingModel:null,O=e=>(S(e)||m.TriggerBindingModel).kind,j=e=>{const t=y(e);return Object(c.Hb)(t)},T=(e,t)=>{const n=t&&E(e,void 0,t);return null==n?void 0:n.Running},w=(e,t)=>!(e&&(T(e,t)>0||Object(g.c)(e)===p.a.Running)),R=(e,t)=>!(e&&((null==t?void 0:t.Running)>0||Object(g.c)(e)===p.a.Running)),N=(e,t)=>!(e&&T(e,t)>0&&Object(g.c)(e)!==p.a.Cancelled),C=(e,t)=>!(e&&(null==t?void 0:t.Running)>0&&Object(g.c)(e)!==p.a.Cancelled)},5650:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"k",(function(){return b})),n.d(t,"f",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return E})),n.d(t,"h",(function(){return y})),n.d(t,"j",(function(){return k})),n.d(t,"g",(function(){return S})),n.d(t,"b",(function(){return O})),n.d(t,"i",(function(){return j}));var a,i,r=n(321),l=n(29),s=n(550),o=n(50),u=n(16),c=n(384),d=n(4427),m=n(461),p=n(5),g=n(158),v=n(5588);!function(e){e.NUMBER_OF_PIPELINE_RUNS="NUMBER_OF_PIPELINE_RUNS",e.PIPELINE_RUN_DURATION="PIPELINE_RUN_DURATION",e.PIPELINE_RUN_TASK_RUN_DURATION="PIPELINE_RUN_TASK_RUN_DURATION",e.PIPELINE_SUCCESS_RATIO="PIPELINE_SUCCESS_RATIO"}(a||(a={})),function(e){e.TEKTON="tekton",e.TEKTON_PIPELINES_CONTROLLER="tekton_pipelines_controller"}(i||(i={}));const b=(e=i.TEKTON_PIPELINES_CONTROLLER)=>({[v.n.PIPELINE_TASK_LEVEL]:{[a.PIPELINE_SUCCESS_RATIO]:s.a(e+'_pipelinerun_duration_seconds_count{pipeline="<%= name %>",namespace="<%= namespace %>"}'),[a.NUMBER_OF_PIPELINE_RUNS]:s.a(`sum(${e}_pipelinerun_duration_seconds_count{pipeline="<%= name %>",namespace="<%= namespace %>"})`)},[v.n.PIPELINERUN_TASKRUN_LEVEL]:{[a.NUMBER_OF_PIPELINE_RUNS]:s.a(`sum(count by (pipelinerun) (${e}_pipelinerun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"}))`),[a.PIPELINE_RUN_TASK_RUN_DURATION]:s.a(`sum(${e}_pipelinerun_taskrun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"})  by (pipelinerun, task)`),[a.PIPELINE_RUN_DURATION]:s.a(`sum(${e}_pipelinerun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"})  by (pipelinerun)`),[a.PIPELINE_SUCCESS_RATIO]:s.a(`count(sort_desc(${e}_pipelinerun_duration_seconds{pipeline="<%= name %>",namespace="<%= namespace %>"})) by(status)`)},[v.n.UNSIMPLIFIED_METRICS_LEVEL]:{[a.NUMBER_OF_PIPELINE_RUNS]:s.a(`sum(count by (pipelinerun) (${e}_pipelinerun_duration_seconds_count{pipeline="<%= name %>",exported_namespace="<%= namespace %>"}))`),[a.PIPELINE_RUN_TASK_RUN_DURATION]:s.a(`sum(${e}_pipelinerun_taskrun_duration_seconds_sum{pipeline="<%= name %>",exported_namespace="<%= namespace %>"})  by (pipelinerun, task)`),[a.PIPELINE_RUN_DURATION]:s.a(`sum(${e}_pipelinerun_duration_seconds_sum{pipeline="<%= name %>",exported_namespace="<%= namespace %>"})  by (pipelinerun)`),[a.PIPELINE_SUCCESS_RATIO]:s.a(`count(sort_desc(${e}_pipelinerun_duration_seconds_count{pipeline="<%= name %>",exported_namespace="<%= namespace %>"})) by(status)`)}}),f=e=>(e<0?"-":"")+(e=>0===e||e>=.001&&e<1e23?Object(p.cc)(e).string:e.toExponential(1))(Math.abs(e)),h=e=>g.b.format(e),E=(e,t,n)=>{const{metric:a,values:i}=e,r=o.a(i,e=>{const t=Number(e[1]);return{x:new Date(new Date(1e3*e[0]).setHours(0,0,0,0)),y:Number.isNaN(t)?null:t,metric:a}}),l=Number(u.a(r,"[0].x")),s=Number(u.a(c.a(r),"x")),m=n/t;return d.a(l,s,m).forEach((e,t)=>{const n=new Date(e);u.a(r,[t,"x"])>n&&r.splice(t,0,{x:n,y:null,metric:a})}),r},y=(e,t,n)=>{var a;const i=(null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.result)||[];return null==i?void 0:i.map(e=>{var a;return null===(a=null==e?void 0:e.values)||void 0===a?void 0:a.map(([a,i])=>{var r,l;return{x:null!==(r=null==t?void 0:t(e))&&void 0!==r?r:new Date(1e3*a),y:null!==(l=null==n?void 0:n(i))&&void 0!==l?l:parseFloat(i),metric:null==e?void 0:e.metric,time:a}})})},k=e=>{const t=[];if(!e)return t;const n=Object(r.b)("1d"),a=Math.round(e/n),i=new Date(Date.now());for(i.setHours(0,0,0,0);t.length-1<a;)t.push(i.getTime()),i.setDate(i.getDate()-1);return t.slice(0,a)},S=(e,t)=>{if(0===e)return l.a.t("pipelines-plugin~less than a sec");let n=Math.round(e),a=0,i=0,r="";return n>=60&&(a=Math.floor(n/60),n%=60),a>=60&&(i=Math.floor(a/60),a%=60),i>0&&(r+=t?l.a.t("pipelines-plugin~{{count}} hour",{count:i}):l.a.t("pipelines-plugin~{{hr}}h",{hr:i}),r+=" "),a>0&&(r+=t?l.a.t("pipelines-plugin~{{count}} minute",{count:a}):l.a.t("pipelines-plugin~{{min}}m",{min:a}),r+=" "),n>0&&(r+=t?l.a.t("pipelines-plugin~{{count}} second",{count:n}):l.a.t("pipelines-plugin~{{sec}}s",{sec:n})),r.trim()},O=()=>({"1d":l.a.t("pipelines-plugin~1 day"),"3d":l.a.t("pipelines-plugin~3 days"),"1w":l.a.t("pipelines-plugin~1 week"),"2w":l.a.t("pipelines-plugin~2 weeks"),"3w":l.a.t("pipelines-plugin~3 weeks"),"4w":l.a.t("pipelines-plugin~4 weeks")}),j=e=>{let t=0;return m.a(e,"x").map(e=>{const n=e.y-t;return t+=e.y,Object.assign(Object.assign({},e),{y:n})})}},5669:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return l})),n.d(t,"h",(function(){return s})),n.d(t,"i",(function(){return o})),n.d(t,"j",(function(){return u})),n.d(t,"k",(function(){return c})),n.d(t,"g",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"l",(function(){return g}));const a="OPENSHIFT_PIPELINE",i="OPENSHIFT_PIPELINE_AS_CODE",r="OPENSHIFT_PIPELINE_CONDITION",l="openshift",s="pipeline.openshift.io/runtime",o="pipeline.openshift.io/runtime-version",u="pipeline.openshift.io/strategy",c="pipeline.preferredPipelinePageTab",d="function.knative.dev/runtime",m="https://artifacthub.io/api/v1",p="resource.deleted.in.k8s",g="resource.loaded.from.tektonResults"},5673:function(e,t,n){"use strict";n.d(t,"m",(function(){return g})),n.d(t,"i",(function(){return v})),n.d(t,"h",(function(){return b})),n.d(t,"g",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"n",(function(){return E})),n.d(t,"p",(function(){return y})),n.d(t,"o",(function(){return k})),n.d(t,"k",(function(){return S})),n.d(t,"j",(function(){return O})),n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return T})),n.d(t,"l",(function(){return w})),n.d(t,"d",(function(){return R})),n.d(t,"f",(function(){return N})),n.d(t,"c",(function(){return C}));var a=n(255),i=n(745),r=n(117),l=n(384),s=n(1533),o=n(70),u=n(22),c=n(283),d=n(1401),m=n(4362),p=n(10);const g=["app.kubernetes.io/name","app.openshift.io/runtime"],v=e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.annotations)||void 0===t?void 0:t.sampleRepo)&&void 0!==n?n:""},b=e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.annotations)||void 0===t?void 0:t.sampleRef)&&void 0!==n?n:""},f=e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.annotations)||void 0===t?void 0:t.sampleContextDir)&&void 0!==n?n:""},h=e=>{var t,n,r,l,s,o;return(e=>a.a(e,(e,t,n)=>{const a=n.split("/");1===a.length&&a.push("tcp");const r=parseInt(a[0],10);return i.a(r)?e.push({containerPort:r,protocol:a[1].toUpperCase()}):console.warn("Unrecognized image port format",n),e},[]))((null===(r=null===(n=null===(t=null==e?void 0:e.image)||void 0===t?void 0:t.dockerImageMetadata)||void 0===n?void 0:n.Config)||void 0===r?void 0:r.ExposedPorts)||(null===(o=null===(s=null===(l=null==e?void 0:e.image)||void 0===l?void 0:l.dockerImageMetadata)||void 0===s?void 0:s.ContainerConfig)||void 0===o?void 0:o.ExposedPorts))},E=e=>`${e.containerPort}-${e.protocol}`.toLowerCase(),y=e=>e.replace(/(-|^)([^-]?)/g,(e,t,n)=>(t&&" ")+n.toUpperCase()),k=e=>(Array.isArray(e)?e:[e]).filter(e=>Object(m.isBuilder)(e)).reduce((e,t)=>{var n,a,i;const r=Object(m.getBuilderTagsSortedByVersion)(t),l=Object(m.getMostRecentBuilderTag)(t),{name:s}=t.metadata,o=null===(a=null===(n=null==t?void 0:t.metadata)||void 0===n?void 0:n.annotations)||void 0===a?void 0:a["openshift.io/display-name"],u=null===(i=null==l?void 0:l.annotations)||void 0===i?void 0:i.description,c=t.metadata.namespace,p=o&&o.length<14?o:y(s),g=Object(d.e)(l),v=Object(d.d)(g);return e[s]={obj:t,name:s,displayName:o,description:u,title:p,iconUrl:v,tags:r,recentTag:l,imageStreamNamespace:c},e},{}),S=(e,t,n)=>{var a,i;const l=r.a(e,{name:t});return[l,null!==(i=null===(a=null==l?void 0:l.annotations)||void 0===a?void 0:a["openshift.io/display-name"])&&void 0!==i?i:n]},O=e=>{if(!e)return;const t=l.a(e.split("/"));return s.a(t.split(/[^a-z0-9-]/))};var j,T;!function(e){e.External="external",e.Internal="internal"}(j||(j={})),function(e){e.Openshift="openshift"}(T||(T={}));const w=e=>({External:{value:j.External,label:e("devconsole~Image name from external registry")},Internal:{value:j.Internal,label:e("devconsole~Image stream tag from internal registry")}}),R=e=>(e&&!u.a(e)?(e=>o.a(e.status.tags)&&e.status.tags.length?e.status.tags.sort(({tag:e},{tag:t})=>{const n=c.coerce(e),a=c.coerce(t);return n||a?n?a?c.rcompare(n,a):-1:1:e.localeCompare(t)}):[])(e):[]).reduce((e,{tag:t})=>(e[t]=t,e),{}),N=()=>[{isList:!0,kind:p.ProjectModel.kind,prop:p.ProjectModel.id}],C=e=>{const t=[];return e&&t.push({isList:!0,kind:p.ImageStreamModel.kind,prop:p.ImageStreamModel.id,namespace:e}),t}},5729:function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return d}));var a=n(5731);const i={id:"clusterbuildstrategy",plural:"clusterbuildstrategies",apiGroup:a.a,apiVersion:"v1alpha1",kind:"ClusterBuildStrategy",namespaced:!1,crd:!0,label:"ClusterBuildStrategy",labelKey:"shipwright-plugin~ClusterBuildStrategy",labelPlural:"ClusterBuildStrategies",labelPluralKey:"shipwright-plugin~ClusterBuildStrategies",abbr:"CBS"},r={id:"buildstrategy",plural:"buildstrategies",apiGroup:a.a,apiVersion:"v1alpha1",kind:"BuildStrategy",namespaced:!0,crd:!0,label:"BuildStrategy",labelKey:"shipwright-plugin~BuildStrategy",labelPlural:"BuildStrategies",labelPluralKey:"shipwright-plugin~BuildStrategies",abbr:"BS"},l={id:"build",plural:"builds",apiGroup:a.a,apiVersion:"v1alpha1",kind:"Build",namespaced:!0,crd:!0,label:"Build",labelKey:"shipwright-plugin~Build",labelPlural:"Builds",labelPluralKey:"shipwright-plugin~Builds",abbr:"B"},s={id:"buildrun",plural:"buildruns",apiGroup:a.a,apiVersion:"v1alpha1",kind:"BuildRun",namespaced:!0,crd:!0,label:"BuildRun",labelKey:"shipwright-plugin~BuildRun",labelPlural:"BuildRuns",labelPluralKey:"shipwright-plugin~BuildRuns",abbr:"BR"},o={id:"clusterbuildstrategy",plural:"clusterbuildstrategies",apiGroup:a.a,apiVersion:a.b,kind:"ClusterBuildStrategy",namespaced:!1,crd:!0,label:"ClusterBuildStrategy",labelKey:"shipwright-plugin~ClusterBuildStrategy",labelPlural:"ClusterBuildStrategies",labelPluralKey:"shipwright-plugin~ClusterBuildStrategies",abbr:"CBS"},u={id:"buildstrategy",plural:"buildstrategies",apiGroup:a.a,apiVersion:a.b,kind:"BuildStrategy",namespaced:!0,crd:!0,label:"BuildStrategy",labelKey:"shipwright-plugin~BuildStrategy",labelPlural:"BuildStrategies",labelPluralKey:"shipwright-plugin~BuildStrategies",abbr:"BS"},c={id:"build",plural:"builds",apiGroup:a.a,apiVersion:a.b,kind:"Build",namespaced:!0,crd:!0,label:"Build",labelKey:"shipwright-plugin~Build",labelPlural:"Builds",labelPluralKey:"shipwright-plugin~Builds",abbr:"B"},d={id:"buildrun",plural:"buildruns",apiGroup:a.a,apiVersion:a.b,kind:"BuildRun",namespaced:!0,crd:!0,label:"BuildRun",labelKey:"shipwright-plugin~BuildRun",labelPlural:"BuildRuns",labelPluralKey:"shipwright-plugin~BuildRuns",abbr:"BR"}},5731:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return o}));const a="shipwright.io",i="v1beta1",r="build.shipwright.io/name",l="app.kubernetes.io/instance",s="image-registry.openshift-image-registry.svc:5000",o="quay.io"},5732:function(e,t,n){},5778:function(e,t,n){"use strict";var a=n(0);t.a=({style:e,topology:t})=>a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:t?"0 20 650 587":"0 20 650 450",fill:"currentColor","aria-hidden":"true",role:"img",width:"1em",height:"1em",style:e},a.createElement("path",{d:"m395.9 484.2-126.9-61c-12.5-6-17.9-21.2-11.8-33.8l61-126.9c6-12.5 21.2-17.9 33.8-11.8 17.2 8.3 27.1 13 27.1 13l-.1-109.2 16.7-.1.1 117.1s57.4 24.2 83.1 40.1c3.7 2.3 10.2 6.8 12.9 14.4 2.1 6.1 2 13.1-1 19.3l-61 126.9c-6.2 12.7-21.4 18.1-33.9 12z",style:{fill:"#fff"}}),a.createElement("path",{d:"M622.7 149.8c-4.1-4.1-9.6-4-9.6-4s-117.2 6.6-177.9 8c-13.3.3-26.5.6-39.6.7v117.2c-5.5-2.6-11.1-5.3-16.6-7.9 0-36.4-.1-109.2-.1-109.2-29 .4-89.2-2.2-89.2-2.2s-141.4-7.1-156.8-8.5c-9.8-.6-22.5-2.1-39 1.5-8.7 1.8-33.5 7.4-53.8 26.9C-4.9 212.4 6.6 276.2 8 285.8c1.7 11.7 6.9 44.2 31.7 72.5 45.8 56.1 144.4 54.8 144.4 54.8s12.1 28.9 30.6 55.5c25 33.1 50.7 58.9 75.7 62 63 0 188.9-.1 188.9-.1s12 .1 28.3-10.3c14-8.5 26.5-23.4 26.5-23.4S547 483 565 451.5c5.5-9.7 10.1-19.1 14.1-28 0 0 55.2-117.1 55.2-231.1-1.1-34.5-9.6-40.6-11.6-42.6zM125.6 353.9c-25.9-8.5-36.9-18.7-36.9-18.7S69.6 321.8 60 295.4c-16.5-44.2-1.4-71.2-1.4-71.2s8.4-22.5 38.5-30c13.8-3.7 31-3.1 31-3.1s7.1 59.4 15.7 94.2c7.2 29.2 24.8 77.7 24.8 77.7s-26.1-3.1-43-9.1zm300.3 107.6s-6.1 14.5-19.6 15.4c-5.8.4-10.3-1.2-10.3-1.2s-.3-.1-5.3-2.1l-112.9-55s-10.9-5.7-12.8-15.6c-2.2-8.1 2.7-18.1 2.7-18.1L322 273s4.8-9.7 12.2-13c.6-.3 2.3-1 4.5-1.5 8.1-2.1 18 2.8 18 2.8L467.4 315s12.6 5.7 15.3 16.2c1.9 7.4-.5 14-1.8 17.2-6.3 15.4-55 113.1-55 113.1z",style:{fill:"currentColor"}}),a.createElement("path",{d:"M326.8 380.1c-8.2.1-15.4 5.8-17.3 13.8-1.9 8 2 16.3 9.1 20 7.7 4 17.5 1.8 22.7-5.4 5.1-7.1 4.3-16.9-1.8-23.1l24-49.1c1.5.1 3.7.2 6.2-.5 4.1-.9 7.1-3.6 7.1-3.6 4.2 1.8 8.6 3.8 13.2 6.1 4.8 2.4 9.3 4.9 13.4 7.3.9.5 1.8 1.1 2.8 1.9 1.6 1.3 3.4 3.1 4.7 5.5 1.9 5.5-1.9 14.9-1.9 14.9-2.3 7.6-18.4 40.6-18.4 40.6-8.1-.2-15.3 5-17.7 12.5-2.6 8.1 1.1 17.3 8.9 21.3 7.8 4 17.4 1.7 22.5-5.3 5-6.8 4.6-16.3-1.1-22.6 1.9-3.7 3.7-7.4 5.6-11.3 5-10.4 13.5-30.4 13.5-30.4.9-1.7 5.7-10.3 2.7-21.3-2.5-11.4-12.6-16.7-12.6-16.7-12.2-7.9-29.2-15.2-29.2-15.2s0-4.1-1.1-7.1c-1.1-3.1-2.8-5.1-3.9-6.3 4.7-9.7 9.4-19.3 14.1-29-4.1-2-8.1-4-12.2-6.1-4.8 9.8-9.7 19.7-14.5 29.5-6.7-.1-12.9 3.5-16.1 9.4-3.4 6.3-2.7 14.1 1.9 19.8l-24.6 50.4z",style:{fill:"currentColor"}}))},5781:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return E}));var a=n(0),i=n(4436),r=n(655),l=n(313),s=n(367),o=n(50),u=n(599),c=n(5797),d=n(5804),m=n(7),p=n(99),g=n(693),v=n(139);const b=(e,t)=>`${e}:${t}`,f=({tag:e,imageStreamName:t,imageStreamNamespace:n,linkToTag:r})=>{const l=i.a(e.dockerImageReference,"@");return a.createElement(a.Fragment,null,a.createElement("li",null,a.createElement("div",{className:"co-images-stream-tag-timeline__item-row"},a.createElement("span",{className:"co-images-stream-tag-timeline__circle-icon"},a.createElement(c.a,null)),a.createElement("div",{className:"co-images-stream-tag-timeline__timestamp"},a.createElement(g.Timestamp,{timestamp:e.created,simple:!0}))),a.createElement("div",{className:"co-images-stream-tag-timeline__item-row"},a.createElement("span",{className:"co-images-stream-tag-timeline__line"}),a.createElement("div",{className:"co-images-stream-tag-timeline__info"},a.createElement(p.ResourceLink,{kind:"ImageStreamTag",name:b(t,e.tag),namespace:n,title:e.tag,linkTo:r}),a.createElement("div",{className:"co-break-all"},"from ",l[0]),a.createElement("div",{className:"co-break-all"},l[1])))))},h=(e,t,n)=>t===r.a(n,t=>t.tag===e),E=({imageStreamTags:e,imageStreamName:t,imageStreamNamespace:n})=>{const{t:i}=Object(m.useTranslation)();if(!l.a(e,"items"))return a.createElement(v.c,{label:i("public~Images")});const r=s.a(o.a(e,({tag:e,items:t})=>o.a(t,({created:t,dockerImageReference:n})=>({tag:e,created:t,dockerImageReference:n})))),c=u.a(r,["created"],["desc"]),p=o.a(c,(e,i)=>a.createElement(f,{key:e.dockerImageReference,tag:e,imageStreamName:t,imageStreamNamespace:n,linkToTag:h(e.tag,i,c)}));return a.createElement(a.Fragment,null,a.createElement("ul",{className:"co-images-stream-tag-timeline"},p,a.createElement("div",null,a.createElement("span",{className:"co-images-stream-tag-timeline__square-icon"},a.createElement(d.a,null)))))}},5786:function(e,t,n){"use strict";var a,i;n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return r})),function(e){e.PENDING="Pending",e.RUNNING="Running",e.SUCCEEDED="Succeeded",e.FAILED="Failed",e.UNKNOWN="Unknown"}(a||(a={})),function(e){e.BUILDAH="buildah",e.S2I="source-to-image",e.UNKNOWN="unknown"}(i||(i={}));const r={[i.BUILDAH]:"shipwright-plugin~Buildah",[i.S2I]:"shipwright-plugin~Source-to-Image",[i.UNKNOWN]:"shipwright-plugin~Unknown"}},5895:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return E})),n.d(t,"i",(function(){return y})),n.d(t,"j",(function(){return S}));var a=n(14),i=n(13),r=n(83),l=n(15),s=n(6012),o=n(5731),u=n(5729),c=n(5786);const d=(e,t)=>{const n=e.filter(e=>{var n,a,i,r;return(null===(a=null===(n=e.metadata)||void 0===n?void 0:n.labels)||void 0===a?void 0:a[o.d])===(null===(r=null===(i=t.metadata)||void 0===i?void 0:i.labels)||void 0===r?void 0:r[o.d])});if(!n||0===n.length)return{latestBuildRun:null,status:c.b.UNKNOWN};const a=((e,t)=>{var n,a,i,r;if(!(e&&e.data&&e.data.length>0&&t))return null;let l=e.data[0];if("creationTimestamp"===t)for(let i=1;i<e.data.length;i++)l=(null===(a=null===(n=e.data[i])||void 0===n?void 0:n.metadata)||void 0===a?void 0:a[t])&&new Date(e.data[i].metadata[t])>new Date(l.metadata[t])?e.data[i]:l;else if("startTime"===t||"completionTime"===t)for(let n=1;n<e.data.length;n++)l=(null===(r=null===(i=e.data[n])||void 0===i?void 0:i.status)||void 0===r?void 0:r[t])&&new Date(e.data[n].status[t])>new Date(l.status[t])?e.data[n]:l;else l=e.data[e.data.length-1];return l})({data:n},"creationTimestamp");if(!a)return{latestBuildRun:null,status:c.b.UNKNOWN};return{latestBuildRun:a,status:Object(s.b)(a)}},m=(e,t)=>{var n,a;const i=new Date(null===(n=null==t?void 0:t.metadata)||void 0===n?void 0:n.creationTimestamp);return new Date(null===(a=null==e?void 0:e.metadata)||void 0===a?void 0:a.creationTimestamp).getTime()-i.getTime()>0},p=(e,t)=>{var n,a;const i=new Date((null===(n=null==e?void 0:e.metadata)||void 0===n?void 0:n.creationTimestamp)||Date.now());return new Date((null===(a=null==t?void 0:t.metadata)||void 0===a?void 0:a.creationTimestamp)||Date.now()).getTime()-i.getTime()},g=e=>"shipwright.io/v1alpha1"===e.apiVersion,v=e=>{var t,n,a,i;return g(e)?null===(n=null===(t=e.spec)||void 0===t?void 0:t.buildRef)||void 0===n?void 0:n.name:null===(i=null===(a=e.spec)||void 0===a?void 0:a.build)||void 0===i?void 0:i.name},b=(e,t,n,a)=>{const i=Object(r.useFlag)(a),l=Object(r.useFlag)(n);return i||l?l?e:t:null},f=()=>b(u.a,u.b,"SHIPWRIGHT_BUILD","SHIPWRIGHT_BUILD_V1ALPHA1"),h=()=>b(u.c,u.d,"SHIPWRIGHT_BUILDRUN","SHIPWRIGHT_BUILDRUN_V1ALPHA1"),E=()=>b(u.e,u.f,"SHIPWRIGHT_BUILDSTRATEGY","SHIPWRIGHT_BUILDSTRATEGY_V1ALPHA1"),y=()=>b(u.g,u.h,"SHIPWRIGHT_CLUSTERBUILDSTRATEGY","SHIPWRIGHT_CLUSTERBUILDSTRATEGY_V1ALPHA1"),k={[u.a.kind]:"builds",[u.b.kind]:"builds",[u.c.kind]:"buildruns",[u.d.kind]:"buildruns",[u.e.kind]:"buildstrategies",[u.f.kind]:"buildstrategies",[u.g.kind]:"clusterbuildstrategies",[u.h.kind]:"clusterbuildstrategies"},S=e=>{const t="admin"===Object(i.jc)()[0],n=Object(a.useParams)(),r=Object(a.useLocation)();return Object(l.bf)((e=>{if("shipwright.io/v1alpha1"===(null==e?void 0:e.apiVersion))switch(null==e?void 0:e.kind){case"Build":return u.b;case"BuildRun":return u.d;case"BuildStrategy":return u.f;case"ClusterBuildStrategy":return u.h;default:return null}switch(null==e?void 0:e.kind){case"Build":return u.a;case"BuildRun":return u.c;case"BuildStrategy":return u.e;case"ClusterBuildStrategy":return u.g;default:return null}})(e),r,n,"k8s","shipwright.io/"+k[e.kind],void 0,t)}},5900:function(e,t,n){"use strict";function a(e){var t,n;return"GitImport"===(null==e?void 0:e.type)&&!!(null===(n=null===(t=e.gitImport)||void 0===t?void 0:t.repository)||void 0===n?void 0:n.url)}function i(e){var t;return"ContainerImport"===(null==e?void 0:e.type)&&!!(null===(t=e.containerImport)||void 0===t?void 0:t.image)}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}))},5911:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"g",(function(){return d})),n.d(t,"f",(function(){return m})),n.d(t,"b",(function(){return p})),n.d(t,"h",(function(){return g})),n.d(t,"e",(function(){return v}));var a=n(83),i=n(77),r=n(108),l=n(6027),s=n(5900);const o=(e,t)=>{if(Object(s.b)(e.spec.source)){const{gitImport:n}=e.spec.source,a=new URLSearchParams;return a.set("formType","sample"),a.set("sample",e.metadata.name),a.set("git.repository",n.repository.url),n.repository.revision&&a.set("git.revision",n.repository.revision),n.repository.contextDir&&a.set("git.contextDir",n.repository.contextDir),`/import/ns/${t}?${a}`}if(Object(s.a)(e.spec.source)){const{containerImport:n}=e.spec.source,a=new URLSearchParams;return a.set("sample",e.metadata.name),a.set("image",n.image),`/deploy-image/ns/${t}?${a}`}return null},u=()=>{const e=new URLSearchParams(window.location.search);return{sampleName:e.get("sample"),repository:{url:e.get("git.repository"),revision:e.get("git.revision"),contextDir:e.get("git.contextDir")}}},c=()=>{const e=new URLSearchParams(window.location.search);return{sampleName:e.get("sample"),image:e.get("image")}},d=()=>!!new URLSearchParams(window.location.search).get("sample"),m=e=>e.reduce((e,t)=>{var n;const a=(null===(n=t.metadata.labels)||void 0===n?void 0:n["console.openshift.io/name"])||t.metadata.name;return e[a]||(e[a]=[]),e[a].push(t),e},{}),p=(e,t)=>{var n,a,i,r;if(!e||!e.length)return null;const l=(t||"en").split("-")[0].toLowerCase(),s=((t||"").split("-")[1]||"").toUpperCase();let o=null,u=null,c=null,d=null,m=null;for(const t of e){const e=((null===(a=null===(n=t.metadata)||void 0===n?void 0:n.labels)||void 0===a?void 0:a["console.openshift.io/lang"])||"en").toLowerCase(),p=((null===(r=null===(i=t.metadata)||void 0===i?void 0:i.labels)||void 0===r?void 0:r["console.openshift.io/country"])||"").toUpperCase();if(e===l&&p===s)return t;e===l&&(p||o?p&&!u&&(u=t):o=t),"en"===e&&(p!==s||c?p||d?m||(m=t):d=t:c=t)}return o||u||c||d||m},g=()=>Object(r.a)({isList:!0,groupVersionKind:Object(a.getGroupVersionKindForModel)(l.a)}),v=e=>Object(i.j)({model:l.a,name:e})},5961:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(0),i=n(118),r=n(4359);const l=({close:e,namespace:t,save:n,secretType:i})=>a.createElement(r.SecretFormWrapper,{onCancel:e,onSave:t=>{e(),n(t)},fixed:{metadata:{namespace:t}},secretTypeAbstraction:i,isCreate:!0,modal:!0}),s=Object(i.f)(l)},5962:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(1416),i=n(380);const r=e=>{const t=new Blob([e],{type:"text/yaml;charset=utf-8"});let n="k8s-object.yaml";try{const t=Object(i.safeLoad)(e);t.kind&&(n=`${t.kind.toLowerCase()}-${t.metadata.name}.yaml`)}catch(e){console.error("Could not parse YAML file:",e)}Object(a.saveAs)(t,n)}},6012:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var a=n(0),i=n(29),r=n(1422),l=n(5786);const s=e=>{var t,n;return null===(n=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.conditions)||void 0===n?void 0:n.find(e=>"Succeeded"===e.type)},o=e=>{const t=s(e);if(t){if("Unknown"===t.status&&"Pending"===t.reason)return l.b.PENDING;if("Unknown"===t.status&&"Running"===t.reason)return l.b.RUNNING;if("True"===t.status)return l.b.SUCCEEDED;if("False"===t.status)return l.b.FAILED}return l.b.UNKNOWN};t.a=({buildRun:e})=>{const t=o(e),n=s(e);return a.createElement(r.a,Object.assign({},(e=>{const t=s(e);if(t){if("Unknown"===t.status&&"Pending"===t.reason)return{status:l.b.PENDING,title:i.a.t("shipwright-plugin~Pending")};if("Unknown"===t.status&&"Running"===t.reason)return{status:l.b.RUNNING,title:i.a.t("shipwright-plugin~Running")};if("True"===t.status)return{status:l.b.SUCCEEDED,title:i.a.t("shipwright-plugin~Succeeded")};if("False"===t.status)return{status:l.b.FAILED,title:i.a.t("shipwright-plugin~Failed")}}return{status:l.b.UNKNOWN,title:i.a.t("shipwright-plugin~Unknown")}})(e)),t===l.b.FAILED?a.createElement(a.Fragment,null,a.createElement("pre",{"data-test":"failure-popup"},n.reason),n.message):null)}},6027:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={kind:"ConsoleSample",label:"ConsoleSample",labelPlural:"ConsoleSamples",apiGroup:"console.openshift.io",apiVersion:"v1",abbr:"CS",namespaced:!1,crd:!0,plural:"consolesamples",propagationPolicy:"Background"}},6107:function(e,t,n){"use strict";var a=n(0),i=n(87),r=n(281),l=n(80),s=n(55),o=n(22),u=n(16),c=n(7),d=n(13),m=n(5591),p=n(5633),g=n(53),v=n(974),b=n(1402),f=n(15),h=n(2221),E=n(5900),y=n(5673),k=n(5911),S=n(5649),O=n(5618),j=n(6148),T=n(6151),w=n(6153),R=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function l(e){try{o(a.next(e))}catch(e){r(e)}}function s(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,s)}o((a=a.apply(e,t||[])).next())}))};t.a=({title:e,formContextField:t,builderImages:n,defaultSample:N,showSample:C=!!N,formType:P,importType:I,imageStreamName:_,autoFocus:D=!0})=>{const{t:B}=Object(c.useTranslation)(),x=a.useRef(),{dirty:F,isSubmitting:L,values:U,touched:M,errors:V,status:A,setFieldValue:G,setFieldTouched:K}=Object(s.f)(),$=Object(f.Fe)(b.c),[H,W]=Object(d.hc)({group:b.l.apiGroup,resource:b.l.plural,namespace:Object(g.c)(),verb:"create"}),q=t?t+".":"",Y=a.useCallback((e,t,n)=>{G(`${q}${e}`,t,n)},[q,G]),z=a.useCallback((e,t,n)=>{K(`${q}${e}`,t,n)},[q,K]),J=t?u.a(U,t):U,Q=t?u.a(M,t,{}):M,X=t?u.a(V,t,{}):V,Z=u.a(U,"formReloadCount"),{url:ee,dir:te,ref:ne}=N||{},ae=a.useMemo(()=>ee?{annotations:{sampleRepo:ee,sampleContextDir:null!=te?te:"./",sampleRef:null!=ne?ne:""}}:null,[ee,te,ne]),ie=Object(o.a)(J.image.tagObj)?ae:J.image.tagObj,re=C&&Object(y.i)(ie),{name:le,application:{name:se}={},image:{selected:oe}={},git:{dir:ue,type:ce}={}}=Q,{git:{url:de}={}}=X,[me,pe]=a.useState(i.d.default),[ge,ve]=a.useState(),be=a.useCallback(e=>R(void 0,void 0,void 0,(function*(){if(Y("image.isRecommending",!1),de)return Y("image.recommended",""),void Y("image.couldNotRecommend",!0);const t=n&&(null==e?void 0:e.find(({type:e})=>e&&n.hasOwnProperty(e)));t&&t.type?(Y("image.couldNotRecommend",!1),Y("image.recommended",t.type)):(Y("image.couldNotRecommend",!0),Y("image.recommended",""))})),[n,de,Y]),fe=a.useCallback((e,t)=>R(void 0,void 0,void 0,(function*(){var n;if(de)return Y("devfile.devfileContent",null),void Y("devfile.devfileHasError",!0);if("devfile"!==I&&!(null===(n=J.devfile)||void 0===n?void 0:n.devfileSourceUrl)){Y("devfile.devfilePath",e),Y("docker.dockerfilePath","Dockerfile");const n=Object(m.e)(J.git.url,t,J.git.ref,J.git.dir,J.git.secretResource,e),a=n&&(yield n.getDevfileContent());a?(Y("devfile.devfileContent",a),Y("devfile.devfileHasError",!1)):(Y("devfile.devfileContent",null),Y("devfile.devfileHasError",!0))}})),[de,I,Y,J.devfile,J.git.dir,J.git.ref,J.git.secretResource,J.git.url]),he=a.useCallback((e,t,a)=>R(void 0,void 0,void 0,(function*(){var r,l,s,o;if($&&W)return;if(L||(null==A?void 0:A.submitError))return;if(pe(i.d.default),Y("git.validated",i.d.default),Y("git.isUrlValidating",!0),de)return Y("git.showGitType",!1),z("git.type",!1),void Y("git.isUrlValidating",!1);const u=Object(S.c)(e),c=u===m.b.UNSURE,d="sample"!==P&&Object(S.b)(e);u!==J.git.detectedType&&Y("git.detectedType",u),c&&!J.git.showGitType&&Y("git.showGitType",!0),!c&&J.git.showGitType&&Y("git.showGitType",!1);const g=c&&J.git.showGitType?J.git.type:u;g!==J.git.type&&(z("git.type",!1,!1),Y("git.type",g));const f=Object(m.e)(e,g,t,a,J.git.secretResource,null===(r=J.devfile)||void 0===r?void 0:r.devfilePath,null===(l=J.docker)||void 0===l?void 0:l.dockerfilePath),E=yield Object(p.a)(e,f,$&&H),{loaded:y,loadError:k,repositoryStatus:O,strategies:j}=E;if(ve(O),O!==m.d.Reachable)return pe(i.d.warning),Y("git.validated",i.d.warning),Y("git.isUrlValidating",!1),Y("import",{loaded:!1,loadError:null,strategies:[],selectedStrategy:{name:"Builder Image",type:m.c.S2I,priority:0,detectedFiles:[]},recommendedStrategy:null,showEditImportStrategy:!0}),void Y("build.strategy",v.BuildStrategyType.Source);if(d&&!le&&!J.name&&Y("name",d),d&&"edit"!==J.formType&&!J.application.name&&J.application.selectedKey!==h.z&&Y("application.name",d+"-app"),"devfile"===I||_||"edit"===J.formType)return pe(i.d.success),Y("git.validated",i.d.success),Y("git.isUrlValidating",!1),"devfile"===I&&Y("build.strategy",v.BuildStrategyType.Devfile),"devfile"===I&&!(null===(s=J.devfile)||void 0===s?void 0:s.devfileContent)&&Y("import.recommendedStrategy",j[0]),void("edit"===J.formType&&J.build.strategy===v.BuildStrategyType.Source&&be(null===(o=null==j?void 0:j.find(e=>e.type===m.c.S2I))||void 0===o?void 0:o.detectedCustomData));if(Y("import.loaded",y),Y("import.loadError",k),Y("import.strategies",j),j.length>0?(Y("import.showEditImportStrategy",!1),Y("import.selectedStrategy",j[0]),Y("import.recommendedStrategy",j[0])):(Y("import.selectedStrategy",{name:"Devfile",type:m.c.DEVFILE,priority:2,detectedFiles:[]}),Y("import.recommendedStrategy",null),Y("import.showEditImportStrategy",!0)),Y("import.strategyChanged",!1),j.length>0)switch(j[0].type){case m.c.S2I:Y("build.strategy",v.BuildStrategyType.Source),n&&(Y("image.isRecommending",!0),be(j[0].detectedCustomData));break;case m.c.DEVFILE:Y("build.strategy",v.BuildStrategyType.Devfile),fe(j[0].detectedFiles[0],g);break;case m.c.DOCKERFILE:Y("build.strategy",v.BuildStrategyType.Docker),Y("docker.dockerfilePath",j[0].detectedFiles[0]),Y("docker.dockerfileHasError",!1);break;case m.c.SERVERLESS_FUNCTION:Y("build.strategy",b.k.ServerlessFunction)}pe(i.d.success),Y("git.validated",i.d.success),Y("git.isUrlValidating",!1)})),[L,A,Y,de,P,J.git.detectedType,J.git.showGitType,J.git.type,J.git.secretResource,J.devfile,J.docker,J.name,J.formType,J.application.name,J.application.selectedKey,J.build.strategy,$,H,W,le,I,_,z,be,n,fe]),Ee=Object(f.Ce)(he),ye=a.useCallback(()=>{if($&&W)return;const e=re,t=Object(y.h)(ie),n=Object(y.g)(ie);Y("git.url",re,!1),Y("git.ref",t,!1),Y("git.dir",n,!1),z("git.url",!0,!0),Ee(e,t,n)},[Ee,re,z,Y,ie,$,W]);a.useEffect(()=>{(!F||ue||ce||Z||J.git.secretResource)&&J.git.url&&Ee(J.git.url,J.git.ref,J.git.dir)},[F,L,ue,Z,Ee,J.git.url,J.git.ref,J.git.dir,J.git.type,J.git.secretResource,ce]);const ke=a.useMemo(()=>{if(J.git.isUrlValidating)return B("devconsole~Validating")+"...";if(me===i.d.success)return B("devconsole~Validated");if(me===i.d.warning)switch(ge){case m.d.RateLimitExceeded:return B("devconsole~Rate limit exceeded");case m.d.GitTypeNotDetected:return B("devconsole~URL is valid but a git type could not be identified. Please select a git type from the options below");case m.d.PrivateRepo:return B("devconsole~If this is a private repository, enter a source Secret in advanced Git options");case m.d.ResourceNotFound:return B("devconsole~Requested repository does not exist");case m.d.InvalidGitTypeSelected:return B("devconsole~The selected git type might not be valid or the repository is private. Please try selecting another git type or enter a source Secret in advanced Git options");case m.d.GiteaRepoUnreachable:return B("devconsole~The Gitea repository is unreachable. The repository might be private or does not exist");default:return B("devconsole~URL is valid but cannot be reached")}return B("devconsole~Repository URL to build and deploy your code from")},[B,J.git.isUrlValidating,me,ge]),Se=a.useCallback(()=>{oe||(Y("image.selected",""),Y("image.tag","")),J.image.recommended&&Y("image.recommended",""),J.image.couldNotRecommend&&Y("image.couldNotRecommend",!1),"edit"!==J.formType?(!le&&Y("name",""),!J.application.isInContext&&J.application.selectedKey!==h.z&&!se&&Y("application.name","")):J.application.selectedKey!==h.z&&J.application.selectedKey===h.b&&!se&&Y("application.name","")},[Y,J.formType,J.image.recommended,J.image.couldNotRecommend,J.application.selectedKey,J.application.isInContext,se,oe,le]);return Object(f.Ge)(J.git.url),a.useEffect(()=>{var e;if(W)return;D&&(null===(e=x.current)||void 0===e||e.focus());const{sampleName:t,repository:n}=Object(k.d)();if(null==n?void 0:n.url){const e=Object(S.b)(n.url);Y("name",e,!1),Y("application.name",e+"-app",!1),Y("git.url",n.url,!1),n.revision&&Y("git.ref",n.revision,!1),n.contextDir&&Y("git.dir",n.contextDir,!1),z("git.url",!0,!0),Ee(n.url,n.revision,n.contextDir)}t?Object(k.e)(t).then(e=>{var a,i,r,l;if(Object(E.b)(e.spec.source)){const{gitImport:t}=e.spec.source;if(!(null==n?void 0:n.url)){const e=Object(S.b)(n.url);Y("name",e,!1),Y("application.name",e+"-app",!1),Y("git.url",t.repository.url,!1),n.revision&&Y("git.ref",n.revision,!1),n.contextDir&&Y("git.dir",n.contextDir,!1),z("git.url",!0,!0),Ee(t.repository.url,t.repository.revision,t.repository.contextDir)}(null===(a=null==t?void 0:t.service)||void 0===a?void 0:a.targetPort)&&8080!==(null===(i=null==t?void 0:t.service)||void 0===i?void 0:i.targetPort)&&Y("route.unknownTargetPort",t.service.targetPort.toString(),!1)}else console.error(`Unsupported ConsoleSample "${t}" source type ${null===(l=null===(r=e.spec)||void 0===r?void 0:r.source)||void 0===l?void 0:l.type}`)}).catch(e=>{console.error(`Error while loading ConsoleSample "${t}":`,e)}):"sample"===P&&re&&ye()},[W]),a.createElement(O.a,{title:null!=e?e:B("devconsole~Git")},a.createElement(f.ab,{ref:x,type:r.b.text,name:q+"git.url",label:B("devconsole~Git Repo URL"),helpText:ke,helpTextInvalid:ke,validated:me,onBlur:e=>{const t=e.target.value.trim();e.target.value!==t&&(Y("git.url",t),Ee(t,J.git.ref,J.git.dir))},onChange:e=>{Se(),Ee(e.target.value.trim(),J.git.ref,J.git.dir)},"data-test-id":"git-form-input-url",required:!0,isDisabled:"sample"===P&&re}),"sample"!==P&&re&&a.createElement(w.a,{onClick:ye}),J.git.showGitType&&a.createElement(a.Fragment,null,a.createElement(T.a,{fieldPrefix:q}),J.git.type===m.b.UNSURE&&a.createElement(l.a,{isInline:!0,variant:"info",title:B("devconsole~Defaulting Git type to other")},B("devconsole~We failed to detect the Git type."))),"sample"!==P&&a.createElement(j.a,{formContextField:t}))}},6123:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return S})),n.d(t,"d",(function(){return O})),n.d(t,"c",(function(){return T}));var a=n(225),i=n(8),r=n(30),l=n(5597),s=n(5669),o=n(5586),u=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function l(e){try{o(a.next(e))}catch(e){r(e)}}function s(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,s)}o((a=a.apply(e,t||[])).next())}))};const c=e=>{var t,n;const i=e?JSON.parse((e=>atob(e))(e)):null;let r;a.a(null==i?void 0:i.metadata,"deletionTimestamp")&&(null===(t=null==i?void 0:i.metadata)||void 0===t||delete t.deletionTimestamp,r={[s.c]:"true"});return i?Object.assign(Object.assign({},i),{metadata:Object.assign(Object.assign({},null==i?void 0:i.metadata),{annotations:Object.assign(Object.assign(Object.assign({},null===(n=null==i?void 0:i.metadata)||void 0===n?void 0:n.annotations),{[s.l]:"true"}),r)})}):null},d=(...e)=>e.filter(e=>e).join(" && "),m=(e,t,n)=>`${e} ${n} ${t}`,p=(e,t)=>m(e,`"${t}"`,"=="),g=(e,t)=>m(e,`"${t}"`,"!=");var v;!function(e){e.PipelineRunV1Beta1="tekton.dev/v1beta1.PipelineRun",e.TaskRunV1Beta1="tekton.dev/v1beta1.TaskRun",e.PipelineRunV1="tekton.dev/v1.PipelineRun",e.TaskRunV1="tekton.dev/v1.TaskRun"}(v||(v={}));const b=e=>e?d(...Object.keys(e).map(t=>p(`data.metadata.labels["${t}"]`,e[t]))):"",f=e=>{let t="";if(e){const{matchLabels:a,matchExpressions:i,filterByName:r}=e;r&&(t=d(t,(n=r)?d(`data.metadata.name.startsWith("${n.trim().toLowerCase()}")`):"")),a||i?(a&&(t=d(t,b(a))),i&&(t=d(t,d(...i.map(e=>{var t,n,a,i,r,l,s,o,u,c;switch(e.operator){case"Exists":return`data.metadata.labels.contains("${e.key}")`;case"DoesNotExist":return`!data.metadata.labels.contains("${e.key}")`;case"NotIn":return(null===(t=e.values)||void 0===t?void 0:t.length)>0?d(...e.values.map(t=>g(`data.metadata.labels["${e.key}"]`,t))):"";case"In":return(null===(n=e.values)||void 0===n?void 0:n.length)>0?`data.metadata.labels["${e.key}"] in [${e.values.map(e=>`"${e}"`)}]`:"";case"Equals":return(null===(a=e.values)||void 0===a?void 0:a[0])?p(`data.metadata.labels["${e.key}"]`,null===(i=e.values)||void 0===i?void 0:i[0]):"";case"NotEquals":case"NotEqual":return(null===(r=e.values)||void 0===r?void 0:r[0])?g(`data.metadata.labels["${e.key}"]`,null===(l=e.values)||void 0===l?void 0:l[0]):"";case"GreaterThan":return(null===(s=e.values)||void 0===s?void 0:s[0])?m(`data.metadata.labels["${e.key}"]`,null===(o=e.values)||void 0===o?void 0:o[0],">"):"";case"LessThan":return(null===(u=e.values)||void 0===u?void 0:u[0])?m(`data.metadata.labels["${e.key}"]`,null===(c=e.values)||void 0===c?void 0:c[0],"<"):"";default:throw new Error(`Tekton results operator '${e.operator}' conversion not implemented.`)}}).filter(e=>e))))):t=b(e)}var n;return t};let h={};const E={},y=()=>u(void 0,void 0,void 0,(function*(){var e,t,n,a;const r=yield Object(i.kb)(o.TektonResultModel,"result"),l=null===(e=null==r?void 0:r.spec)||void 0===e?void 0:e.targetNamespace,s=null!==(n=null===(t=null==r?void 0:r.spec)||void 0===t?void 0:t.server_port)&&void 0!==n?n:"8080",u=null===(a=null==r?void 0:r.spec)||void 0===a?void 0:a.tls_hostname_override;let c;return c=u?`${u}:${s}`:l&&s?`tekton-results-api-service.${l}.svc.cluster.local:${s}`:"tekton-results-api-service.openshift-pipelines.svc.cluster.local:"+s,c})),k=(e,t,n,a,i,s)=>u(void 0,void 0,void 0,(function*(){if(s){const e=h[s];if(e)return e;if(E[s])return[[],{nextPageToken:null,records:[]},!0]}E[s]=!0;const o=yield u(void 0,void 0,void 0,(function*(){try{const s=yield((e,t,n,a,i)=>u(void 0,void 0,void 0,(function*(){var l;return`https://${yield y()}/apis/results.tekton.dev/v1alpha2/parents/${e&&e!==r.c?e:"-"}/results/-/records?${new URLSearchParams(Object.assign(Object.assign({page_size:""+Math.max(5,Math.min(1e4,(null==a?void 0:a.limit)>=0?a.limit:null!==(l=null==a?void 0:a.pageSize)&&void 0!==l?l:50))},i?{page_token:i}:{}),{filter:d(p("data_type",t.toString()),n,f(null==a?void 0:a.selector),null==a?void 0:a.filter)})).toString()}`})))(e,t,n,a,i);let o=yield Object(l.c)({url:s,method:"GET",allowInsecure:!0});return(null==a?void 0:a.limit)>=0&&(o={nextPageToken:null,records:o.records.slice(0,a.limit)}),[o.records.map(e=>c(e.data.value)),o]}catch(e){if(404===(null==e?void 0:e.code))return[[],{nextPageToken:null,records:[]}];throw e}}));return s&&(E[s]=!1,h[s]=o),o})),S=(e,t,n,a,i)=>((e,t,n,a,i,r)=>k(e,r?v.PipelineRunV1:v.PipelineRunV1Beta1,t,n,a,i))(e,"",t,n,a,i),O=(e,t,n,a,i)=>((e,t,n,a,i,r)=>k(e,r?v.TaskRunV1:v.TaskRunV1Beta1,t,n,a,i))(e,"",t,n,a,i),j=e=>Object(l.b)(e).then(e=>(e=>{try{JSON.parse(e)}catch(e){return!1}return!0})(e.body)?JSON.parse(e.body):e.body),T=e=>u(void 0,void 0,void 0,(function*(){e||(()=>{throw{code:404}})();const t=`https://${yield y()}/apis/results.tekton.dev/v1alpha2/parents/${e.replace("/records/","/logs/")}`;return j({url:t,method:"GET",allowInsecure:!0})}))},6148:function(e,t,n){"use strict";var a=n(0),i=n(281),r=n(55),l=n(7),s=n(5),o=n(15),u=n(5618),c=n(6149);t.a=({formContextField:e})=>{const t=e?e+".":"",{t:n}=Object(l.useTranslation)(),{setFieldValue:d,setFieldTouched:m}=Object(r.f)(),p=Object(o.Ce)(e=>d(t+"git.ref",e.target.value)),g=Object(o.Ce)(e=>{d(t+"git.dir",e.target.value),m(t+"git.dir")});return a.createElement(s.x,{textExpanded:n("devconsole~Hide advanced Git options"),textCollapsed:n("devconsole~Show advanced Git options"),dataTest:"advanced-git-options"},a.createElement(u.a,null,a.createElement(o.ab,{type:i.b.text,name:t+"git.ref",label:n("devconsole~Git reference"),helpText:n("devconsole~Optional branch, tag, or commit."),onChange:p}),a.createElement(o.ab,{type:i.b.text,name:t+"git.dir",label:n("devconsole~Context dir"),helpText:n("devconsole~Optional subdirectory for the source code, used as a context directory for build."),onChange:g}),a.createElement(c.a,{formContextField:e})))}},6149:function(e,t,n){"use strict";var a=n(0),i=n(219),r=n(297),l=n(319),s=n(157),o=n(55),u=n(16),c=n(7),d=n(4359),m=n(108),p=n(10),g=n(15),v=n(6150),b=n(5961);t.a=({formContextField:e})=>{const t=e?e+".":"",{t:n}=Object(c.useTranslation)(),{values:f,setFieldValue:h}=Object(o.f)(),E=u.a(f,t+"project.name"),y=u.a(f,t+"git.secret"),[k,S,O]=Object(m.a)(E&&y?{kind:p.SecretModel.kind,namespace:E,name:y,optional:!0,isList:!1}:null),j=e=>{h(t+"git.secret",e)};return a.useEffect(()=>{S&&!O&&y&&k&&h(t+"git.secretResource",k)},[S,O,y,k,h,t]),a.createElement(a.Fragment,null,a.createElement(i.a,{fieldId:Object(g.Kc)("source-secret","dropdown"),label:n("devconsole~Source Secret")},a.createElement(v.a,{dropDownClassName:"dropdown--full-width",menuClassName:"dropdown-menu--text-wrap",namespace:E,actionItems:[{actionTitle:n("devconsole~Create new Secret"),actionKey:"create-source-secret"},{actionTitle:n("devconsole~No Secret"),actionKey:"clear-source-secret"}],selectedKey:y,title:y,onChange:e=>{"create-source-secret"===e?(h(t+"git.secret",y),Object(b.a)({namespace:E,save:j,secretType:d.SecretTypeAbstraction.source})):"clear-source-secret"===e?(h(t+"git.secret",""),h(t+"git.secretResource",{})):h(t+"git.secret",e)}}),a.createElement(r.a,null,a.createElement(l.a,null,a.createElement(s.a,null,n("devconsole~Secret with credentials for pulling your source code."))))))}},6150:function(e,t,n){"use strict";var a=n(0),i=n(7),r=n(1423),l=n(10),s=n(15);t.a=e=>{const{t:t}=Object(i.useTranslation)(),n=[{isList:!0,namespace:e.namespace,kind:l.SecretModel.kind,prop:"secrets"}];return a.createElement(r.a,{resources:n},a.createElement(s.Nb,Object.assign({},e,{placeholder:t("devconsole~Select Secret name"),resourceFilter:e=>"kubernetes.io/basic-auth"===e.type||"kubernetes.io/ssh-auth"===e.type,dataSelector:["metadata","name"]})))}},6151:function(e,t,n){"use strict";var a=n(0),i=n(219),r=n(241),l=n(130),s=n(7304),o=n(5931),u=n(5933),c=n(5932),d=n(4373),m=n(55),p=n(16),g=n(7),v=n(5591),b=n(5778),f=n(5599);n(6152);t.a=({fieldPrefix:e})=>{const{values:t,setFieldValue:n,setFieldTouched:h}=Object(m.f)(),{t:E}=Object(g.useTranslation)(),y=t=>{n(e+"git.type",t,!1),h(e+"git.type",!0,!1)},k=p.a(t,e+"git.type");return a.createElement(a.Fragment,null,a.createElement(i.a,{label:E("devconsole~Git type"),isRequired:!0,id:"git-type"},a.createElement(r.a,{spaceItems:{default:"spaceItemsSm"}},a.createElement(l.a,null,a.createElement(s.a,{className:"odc-git-type-selector",title:f.c[v.b.GITHUB],icon:a.createElement(o.a,null),onClick:()=>y(v.b.GITHUB),isSelected:k===v.b.GITHUB,id:"git-type-github"})),a.createElement(l.a,null,a.createElement(s.a,{className:"odc-git-type-selector",title:f.c[v.b.GITLAB],icon:a.createElement(u.a,null),onClick:()=>y(v.b.GITLAB),isSelected:k===v.b.GITLAB,id:"git-type-gitlab"})),a.createElement(l.a,null,a.createElement(s.a,{className:"odc-git-type-selector",title:f.c[v.b.BITBUCKET],icon:a.createElement(c.a,null),onClick:()=>y(v.b.BITBUCKET),isSelected:k===v.b.BITBUCKET,id:"git-type-bitbucket"})),a.createElement(l.a,null,a.createElement(s.a,{className:"odc-git-type-selector",title:f.c[v.b.GITEA],icon:a.createElement(b.a,null),onClick:()=>y(v.b.GITEA),isSelected:k===v.b.GITEA,id:"git-type-gitea"})),a.createElement(l.a,null,a.createElement(s.a,{className:"odc-git-type-selector",title:f.c[v.b.UNSURE],icon:a.createElement(d.a,null),onClick:()=>y(v.b.UNSURE),isSelected:k===v.b.UNSURE,id:"git-type-other"})))))}},6152:function(e,t,n){},6153:function(e,t,n){"use strict";var a=n(0),i=n(297),r=n(19),l=n(6215),s=n(7);t.a=e=>{const{t:t}=Object(s.useTranslation)();return a.createElement(i.a,null,a.createElement(r.a,Object.assign({},e,{type:"button",variant:r.d.link,isInline:!0}),t("devconsole~Try sample")," ",a.createElement(l.a,null)))}},6182:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return f}));var a=n(0),i=n(4387),r=n(695),l=n(8),s=n(206),o=n(5586),u=n(5588),c=n(5648),d=n(6123),m=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function l(e){try{o(a.next(e))}catch(e){r(e)}}function s(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,s)}o((a=a.apply(e,t||[])).next())}))};const p=(e,t,n,i)=>{const r=Object(s.a)(u.d),[l,o]=a.useState(null),[c,d]=a.useState(i);i!==c&&d(i);const[p,g]=a.useState([[],!1,void 0,void 0]);return a.useEffect(()=>{o(null)},[t,n,i]),a.useEffect(()=>{let a=!1;return m(void 0,void 0,void 0,(function*(){try{const i=yield e(t,n,l,c,r);if(!a){const e=i[1].nextPageToken,t=!!(null==i?void 0:i[2]),n=!t;t||g(t=>[l?[...t[0],...i[0]]:i[0],n,void 0,e?(()=>{let t=!1;return()=>!a&&!t&&(t=!0,o(e),!0)})():void 0])}}catch(e){a||g(l?t=>[t[0],t[1],e,void 0]:[[],!1,e,void 0])}})),()=>{a=!0}},[t,n,l,c,e,r]),p},g=(e,t,n)=>p(d.b,e,t,n),v=(e,t,n)=>p(d.d,e,t,n),b=(e,t)=>{let n;"Pipeline"===(null==t?void 0:t.kind)&&(n={matchLabels:{"tekton.dev/pipeline":null==t?void 0:t.name}}),"Repository"===(null==t?void 0:t.kind)&&(n={matchLabels:{[c.f[c.e.REPOSITORY]]:null==t?void 0:t.name}});const[a,s,u,d]=g(e,t&&{selector:n}),[m,p,v]=Object(r.c)(Object.assign({isList:!0,kind:Object(l.Hb)(o.PipelineRunModel),namespace:e},t?{selector:n}:{}));return[!s&&!p||v?[]:Object(i.a)([...m,...a],e=>e.metadata.uid),s||p,u||v,d]},f=(e,t,n)=>{const[i,r]=a.useState([null,!1,void 0]);return a.useEffect(()=>{let a=!1;return e&&t&&m(void 0,void 0,void 0,(function*(){try{const e=yield Object(d.c)(n);a||r([e,!0,void 0])}catch(e){a||r([null,!1,e])}})),()=>{a=!0}},[e,t,n]),i}},6255:function(e,t,n){},6256:function(e,t,n){},6324:function(e,t,n){"use strict";var a=n(0),i=n(80),r=n(1939),l=n(7);t.a=({onClose:e})=>{const{t:t}=Object(l.useTranslation)();return a.createElement(i.a,{actionClose:e&&a.createElement(r.a,{onClose:e}),isInline:!0,title:t('console-shared~Note: Some fields may not be represented in this form view. Please select "YAML view" for full control.'),variant:"info","data-test":"info-alert"})}},6333:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var a=n(10);n.d(t,"a",(function(){return a.BuildConfigModel}));var i,r=n(974);n.d(t,"c",(function(){return r.BuildStrategyType})),function(e){e.Parallel="Parallel",e.Serial="Serial",e.SerialLatestOnly="SerialLatestOnly"}(i||(i={}))},6436:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return v}));var a=n(1416),i=n(29),r=n(109),l=n(131),s=n(5),o=n(10),u=n(8),c=n(5623),d=n(6123),m=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function l(e){try{o(a.next(e))}catch(e){r(e)}}function s(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,s)}o((a=a.apply(e,t||[])).next())}))};const p=(e,t)=>{const n=e.map(e=>e.name),a=[];return t.forEach(e=>{const t=n.indexOf(e.name);a[t]=e}),a},g=e=>{var t,n,a,i;const r=null!==(n=null===(t=null==e?void 0:e.spec)||void 0===t?void 0:t.containers)&&void 0!==n?n:[],l=null!==(i=null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.containerStatuses)&&void 0!==i?i:[],o=p(r,l).findIndex(e=>Object(c.f)(e)!==s.J);return{containers:r.slice(0,-1===o?r.length:o+1),stillFetching:-1!==o}},v=(e,t,n,g)=>{const v=()=>m(void 0,void 0,void 0,(function*(){const a=yield Promise.all(e.map(e=>{var a;const{status:r}=null!==(a=t.find(t=>t.metadata.name===e))&&void 0!==a?a:{};return s=null==r?void 0:r.podName,c=n,Object(u.kb)(o.PodModel,s,c).then(e=>{var t,n,a;return p(null!==(t=e.spec.containers)&&void 0!==t?t:[],null!==(a=null===(n=e.status)||void 0===n?void 0:n.containerStatuses)&&void 0!==a?a:[])}).catch(e=>(Object(l.s)({error:e.message||i.a.t("pipelines-plugin~Error downloading logs.")}),[]));var s,c}));return e.reduce((e,i,r)=>{var l,d,m,p;const g=t.find(e=>e.metadata.name===i),v=null!==(d=null===(l=null==g?void 0:g.spec.taskRef)||void 0===l?void 0:l.name)&&void 0!==d?d:null==g?void 0:g.metadata.name,{status:b}=g,f=null==b?void 0:b.podName,h=a[r].reduce((e,t)=>{const{name:a}=t,i=Object(c.f)(t);if(i===s.K)return e;const r={ns:n,name:f,path:"log",queryParams:{container:a,follow:"true"}};return Object.assign(Object.assign({},e),{[a]:{status:i,url:Object(u.Jb)(o.PodModel,r)}})},{});return e[i]={name:v,steps:Object.assign({},h),taskRunPath:null===(p=null===(m=g.metadata)||void 0===m?void 0:m.annotations)||void 0===p?void 0:p["results.tekton.dev/record"]},e},{})}));return()=>{return t=v(),m(void 0,void 0,void 0,(function*(){const n=yield t;let i="";for(const t of e){const e=n[t],a=Object.keys(e.steps);if(i+=e.name+"\n\n",a.length>0)for(const t of a){const{url:n,status:a}=e.steps[t],l=Object(r.d)(n).then(e=>`${t.toUpperCase()}\n\n${e}\n\n`);i+=a===s.J?yield l:yield Promise.race([l,new Promise(e=>{setTimeout(()=>e(""),1e3)})])}else i+=(yield Object(d.c)(e.taskRunPath).then(e=>`${n[t].name.toUpperCase()}\n\n${e}\n\n`))}const l=new s.M(null);l.ingest(i);const o=l.getBlob({type:"text/plain;charset=utf-8"});return Object(a.saveAs)(o,g+".log"),null}));var t}}},6552:function(e,t,n){"use strict";var a=n(0),i=n(281),r=n(55),l=n(7),s=n(15),o=n(5618);t.a=()=>{const{t:e}=Object(l.useTranslation)(),[,t]=Object(r.e)("formData.name"),n=!t.initialValue;return a.createElement(o.a,{dataTest:"section name"},a.createElement(s.ab,{label:e("devconsole~Name"),name:"formData.name",type:i.b.text,isDisabled:!n,required:!0}))}},6671:function(e,t,n){"use strict";var a=n(0),i=n(241),r=n(130),l=n(19),s=n(6435),o=n(18),u=n.n(o),c=n(1416),d=n(7),m=n(5),p=n(108),g=n(15),v=n(6672),b=n(6674),f=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n};t.a=e=>{var{resource:t,taskRun:n,taskName:o,onDownloadAll:h,downloadAllLabel:E="Download all"}=e,y=f(e,["resource","taskRun","taskName","onDownloadAll","downloadAllLabel"]);const{t:k}=Object(d.useTranslation)(),S=a.useRef(null),[O,j,T]=Object(p.a)(t),[w,R,N]=Object(g.He)(),[C,P]=a.useState(!1),I=a.useRef();j&&!T&&t.name===O.metadata.name?S.current=O:T&&(S.current=null);const _=a.useCallback(e=>I.current=e,[]);return a.createElement("div",{ref:R,className:"odc-multi-stream-logs"},a.createElement(i.a,{className:u()({"odc-multi-stream-logs--fullscreen":w})},a.createElement(r.a,{className:"odc-multi-stream-logs__button",align:{default:"alignRight"}},a.createElement(l.a,{variant:"link",onClick:()=>{if(!I.current)return;const e=I.current(),t=new Blob([e],{type:"text/plain;charset=utf-8"});Object(c.saveAs)(t,o+".log")},isInline:!0},a.createElement(s.DownloadIcon,{className:"odc-multi-stream-logs__icon"}),k("pipelines-plugin~Download"))),a.createElement(r.a,{className:"odc-multi-stream-logs__divider"},"|"),h&&a.createElement(a.Fragment,null,a.createElement(r.a,{className:"odc-multi-stream-logs__button"},a.createElement(l.a,{variant:"link",onClick:()=>{P(!0),h().then(()=>{P(!1)}).catch(e=>{P(!1),console.warn(e.message||"Error downloading logs.")})},isDisabled:C,isInline:!0},a.createElement(s.DownloadIcon,{className:"odc-multi-stream-logs__icon"}),E||k("pipelines-plugin~Download all"),C&&a.createElement(m.T,null))),a.createElement(r.a,{className:"odc-multi-stream-logs__divider"},"|")),N&&a.createElement(r.a,{className:"odc-multi-stream-logs__button"},a.createElement(l.a,{variant:"link",onClick:N,isInline:!0},w?a.createElement(a.Fragment,null,a.createElement(s.CompressIcon,{className:"odc-multi-stream-logs__icon"}),k("pipelines-plugin~Collapse")):a.createElement(a.Fragment,null,a.createElement(s.ExpandIcon,{className:"odc-multi-stream-logs__icon"}),k("pipelines-plugin~Expand"))))),T?a.createElement(b.a,{taskRun:n,setCurrentLogsGetter:_}):a.createElement(v.a,Object.assign({},y,{taskName:o,resource:S.current,setCurrentLogsGetter:_})))}},6672:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(0),i=n(5),r=n(15),l=n(5623),s=n(6673),o=n(6436);n(6256);const u=({resource:e,taskName:t,setCurrentLogsGetter:n})=>{var u,c;const d=a.useRef(),m=a.useRef([]),[p,g]=a.useState(0),[v,b]=Object(r.Ze)(),{containers:f,stillFetching:h}=Object(o.b)(e),E=a.useRef(null);E.current=f,a.useEffect(()=>{n(()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.innerText})},[n]);const y=a.useCallback(e=>{const t=E.current.findIndex(({name:t})=>t===e);m.current[t]=!0;const n=E.current.findIndex((e,t)=>!0!==m.current[t]);g(-1===n?E.current.length:n)},[]),k=null==v||v!==r.Vb.scrolledToBottom,S=null!==(c=null===(u=null==e?void 0:e.status)||void 0===u?void 0:u.containerStatuses)&&void 0!==c?c:[];return a.createElement(a.Fragment,null,a.createElement("div",{className:"odc-multi-stream-logs__taskName","data-test-id":"logs-taskName"},t,h&&a.createElement("span",{className:"odc-multi-stream-logs__taskName__loading-indicator"},a.createElement(i.T,null))),a.createElement("div",{className:"odc-multi-stream-logs__container",onScroll:b,"data-test-id":"logs-task-container"},a.createElement("div",{className:"odc-multi-stream-logs__container__logs",ref:d},f.map((n,r)=>{const o=S.findIndex(e=>e.name===n.name),u=Object(l.f)(S[o]);return u!==i.K&&a.createElement(s.a,{key:`${t}-${n.name}`,resource:e,container:n,resourceStatus:u,onComplete:y,render:p>=r,autoScroll:k})}))))}},6673:function(e,t,n){"use strict";var a=n(0),i=n(80),r=n(320),l=n(2360),s=n(7),o=n(109),u=n(5),c=n(8),d=n(1e3);n(6255);t.a=({resource:e,resourceStatus:t,container:n,onComplete:m,render:p,autoScroll:g=!0})=>{const{t:v}=Object(s.useTranslation)(),{name:b}=n,{kind:f,metadata:h={}}=e,{name:E,namespace:y}=h,k=a.useRef(null),S=a.useRef(null),[O,j]=a.useState(!1),T=a.useRef(t),w=a.useRef(),R=a.useRef("");w.current=m;const N=a.useCallback(Object(l.a)(()=>{S.current&&(S.current.innerText+=R.current),k.current&&k.current.scrollIntoView({behavior:"smooth",block:"end"}),R.current=""},1e3),[]),C=a.useRef();return C.current=a.useCallback(e=>{R.current+=e,k.current&&e&&p&&g&&N()},[g,p,N]),T.current!==t&&(T.current=t),a.useEffect(()=>{let e,t=!1;const n={ns:y,name:E,path:"log",queryParams:{container:b,follow:"true"}},a=Object(c.Jb)(Object(c.vb)(f),n);if(T.current===u.J)Object(o.d)(a).then(e=>{t||(C.current(e),w.current(b))}).catch(()=>{t||(j(!0),w.current(b))});else{const n={host:"auto",path:a,subprotocols:["base64.binary.k8s.io"]};e=new d.a(a,n),e.onmessage(e=>{if(t)return;const n=r.Base64.decode(e);C.current(n)}).onclose(()=>{w.current(b)}).onerror(()=>{t||(j(!0),w.current(b))})}return()=>{t=!0,e&&e.destroy()}},[f,b,E,y]),a.useEffect(()=>{k.current&&p&&g&&N()},[g,p,N]),a.createElement("div",{className:"odc-logs",style:{display:p?"":"none"}},a.createElement("p",{className:"odc-logs__name"},b),O&&a.createElement(i.a,{variant:"danger",isInline:!0,title:v("pipelines-plugin~An error occurred while retrieving the requested logs.")}),a.createElement("div",null,a.createElement("div",{className:"odc-logs__content",ref:S}),a.createElement("div",{ref:k})))}},6674:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(0),i=n(5),r=n(5588),l=n(6182);n(6255),n(6256);const s=({taskRun:e,setCurrentLogsGetter:t})=>{var n,s,o,u,c;const d=a.useRef(),m=(null===(s=null===(n=null==e?void 0:e.metadata)||void 0===n?void 0:n.labels)||void 0===s?void 0:s[r.u.pipelineTask])||"-",[p,g,v]=Object(l.c)(e.metadata.namespace,e.metadata.name,null===(u=null===(o=e.metadata)||void 0===o?void 0:o.annotations)||void 0===u?void 0:u["results.tekton.dev/record"]);a.useEffect(()=>{t(()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.innerText})},[t]),a.useEffect(()=>{!v&&g&&d.current&&p&&(d.current.scrollTop=d.current.scrollHeight)},[v,g,p]);const b=404===(null===(c=v)||void 0===c?void 0:c.code)?`Logs are no longer accessible for ${m} task`:null;return a.createElement(a.Fragment,null,a.createElement("div",{className:"odc-multi-stream-logs__taskName","data-test-id":"logs-taskName"},m,!g&&a.createElement("span",{className:"odc-multi-stream-logs__taskName__loading-indicator","data-test-id":"loading-indicator"},a.createElement(i.T,null))),a.createElement("div",{className:"odc-multi-stream-logs__container","data-test-id":"tr-logs-task-container",ref:d},a.createElement("div",{className:"odc-multi-stream-logs__container__logs","data-testid":"tr-logs-container"},b&&a.createElement("div",{className:"odc-pipeline-run-logs__logtext","data-testid":"tr-logs-error-message"},b),!b&&g?a.createElement("div",{className:"odc-logs","data-testid":"tr-logs-container"},a.createElement("p",{className:"odc-logs__name"},m),a.createElement("div",null,a.createElement("div",{className:"odc-logs__content","data-testid":"tr-logs-content"},p))):null)))}},6861:function(e,t,n){"use strict";var a=n(0),i=n(7),r=n(40),l=n(8),s=n(5786),o=n(5895),u=n(6012),c=n(11481);t.a=e=>{const{t:t}=Object(i.useTranslation)(),n=[{type:"status",filterGroupName:t("shipwright-plugin~Status"),items:[{id:s.b.PENDING,title:t("shipwright-plugin~Pending")},{id:s.b.RUNNING,title:t("shipwright-plugin~Running")},{id:s.b.SUCCEEDED,title:t("shipwright-plugin~Succeeded")},{id:s.b.FAILED,title:t("shipwright-plugin~Failed")},{id:s.b.UNKNOWN,title:t("shipwright-plugin~Unknown")}],reducer:u.b,filter:(e,t)=>{var n;const a=Object(u.b)(t);return!(null===(n=e.selected)||void 0===n?void 0:n.length)||a&&e.selected.includes(a)}}],d=Object(o.g)();return a.createElement(r.c,Object.assign({title:t("shipwright-plugin~BuildRuns"),kind:Object(l.Hb)(d),ListComponent:c.a,rowFilters:n,canCreate:!0},e))}},7316:function(e,t,n){"use strict";var a=n(0),i=n(55),r=n(7),l=n(15),s=n(5618);t.a=({namespace:e})=>{const{t:t}=Object(r.useTranslation)(),{values:{formData:{environmentVariables:n}}}=Object(i.f)();return a.createElement(s.a,{title:t("devconsole~Environment Variables"),dataTest:"section environment-variables"},a.createElement(l.M,{name:"formData.environmentVariables",envs:n,obj:{metadata:{namespace:e}}}))}},7514:function(e,t,n){"use strict";var a=n(0),i=n(7),r=n(139),l=n(10),s=n(6671);n(7515);t.a=({obj:e})=>{var t;const{t:n}=Object(i.useTranslation)();if(null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.podName){const t={kind:l.PodModel.kind,isList:!1,prop:"obj",namespace:e.metadata.namespace,name:e.status.podName};return a.createElement("div",{className:"odc-task-run-log"},a.createElement(s.a,{taskRun:e,resource:t,downloadAllLabel:n("pipelines-plugin~Download all TaskRun logs")}))}return a.createElement(r.h,{label:n("pipelines-plugin~TaskRun log"),loadError:new Error(n("pipelines-plugin~Pod not found"))})}},7515:function(e,t,n){},7520:function(e,t,n){"use strict";var a=n(0),i=n(7),r=n(40),l=n(8),s=n(5895),o=n(6012),u=n(11480);const c=e=>e.latestBuild?Object(o.b)(e.latestBuild):"Unknown";t.a=e=>{const{t:t}=Object(i.useTranslation)(),n=[{type:"status",filterGroupName:t("shipwright-plugin~BuildRun status"),items:[{id:"Pending",title:t("shipwright-plugin~Pending")},{id:"Running",title:t("shipwright-plugin~Running")},{id:"Succeeded",title:t("shipwright-plugin~Succeeded")},{id:"Failed",title:t("shipwright-plugin~Failed")},{id:"Unknown",title:t("shipwright-plugin~Unknown")}],reducer:c,filter:(e,t)=>{var n;const a=Object(o.b)(t.latestBuild);return!(null===(n=e.selected)||void 0===n?void 0:n.length)||a&&e.selected.includes(a)}}],d=Object(s.f)();return a.createElement(r.c,Object.assign({title:t("shipwright-plugin~Builds"),kind:Object(l.Hb)(d),ListComponent:u.a,rowFilters:n,canCreate:!0,createProps:{to:e.namespace?`/k8s/ns/${e.namespace}/${Object(l.Hb)(d)}/~new/form`:`/k8s/cluster/${Object(l.Hb)(d)}/~new`}},e))}},7521:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return l}));var a=n(0),i=n(29);const r=e=>{var t,n;const a=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.startTime,i=null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.completionTime;if(!a)return null;const r=new Date(a).getTime();return((i?new Date(i).getTime():(new Date).getTime())-r)/1e3},l=e=>{const t=r(e);return t?((e,t)=>{if(0===e)return i.a.t("shipwright-plugin~less than a sec");let n=Math.round(e),a=0,r=0,l="";return n>=60&&(a=Math.floor(n/60),n%=60),a>=60&&(r=Math.floor(a/60),a%=60),r>0&&(l+=t?i.a.t("shipwright-plugin~{{count}} hour",{count:r}):i.a.t("shipwright-plugin~{{hr}}h",{hr:r}),l+=" "),a>0&&(l+=t?i.a.t("shipwright-plugin~{{count}} minute",{count:a}):i.a.t("shipwright-plugin~{{min}}m",{min:a}),l+=" "),n>0&&(l+=t?i.a.t("shipwright-plugin~{{count}} second",{count:n}):i.a.t("shipwright-plugin~{{sec}}s",{sec:n})),l.trim()})(t,!0):"-"};t.a=({buildRun:e})=>a.createElement(a.Fragment,null,l(e))},8326:function(e,t,n){"use strict";var a=n(0),i=n(83),r=n(5),l=n(10),s=n(5731);t.a=({buildSpec:e})=>{var t,n,o,u;const c=null===(t=null==e?void 0:e.output)||void 0===t?void 0:t.image;if(null==c?void 0:c.startsWith(s.e)){let e=null===(n=null==c?void 0:c.split("/"))||void 0===n?void 0:n.pop();(null==e?void 0:e.includes(":"))&&(e=null==e?void 0:e.split(":")[0]);const t=null==c?void 0:c.split("/")[1];return a.createElement(r.hb,{name:e,namespace:t,groupVersionKind:Object(i.getGroupVersionKindForModel)(l.ImageStreamModel)})}if(null==c?void 0:c.startsWith(s.f)){const e=null===(u=null===(o=null==c?void 0:c.split("/"))||void 0===o?void 0:o.slice(1))||void 0===u?void 0:u.join("/");return a.createElement(r.A,{link:"https://"+c,text:e})}return a.createElement(a.Fragment,null,c)}},8327:function(e,t,n){"use strict";var a=n(0),i=n(40),r=n(5),l=n(8),s=n(2270),o=n(5895),u=n(11482),c=n(11484),d=n(11485);t.a=e=>{const t=[r.mc.details(u.a),r.mc.editYaml(),{href:"buildruns",nameKey:"shipwright-plugin~BuildRuns",component:d.a},r.mc.events(c.a)];return a.createElement(i.a,Object.assign({},e,{customActionMenu:(e,t)=>{const n={[Object(l.Db)(t)]:t};return a.createElement(s.c,{context:n},({actions:e,options:t,loaded:n})=>n&&a.createElement(s.a,{actions:e,options:t,variant:s.b.DROPDOWN}))},pages:t,breadcrumbsFor:o.j}))}},8328:function(e,t,n){"use strict";var a=n(0),i=n(6139),r=n(7),l=n(91),s=n(5),o=n(10),u=n(5729),c=n(5895),d=n(8326);t.a=({obj:e,buildSpec:t,path:n})=>{var m,p,g,v,b,f,h,E,y,k,S,O,j,T,w,R,N,C,P,I;const{t:_}=Object(r.useTranslation)();if(!t)return null;const D=null===(m=null==e?void 0:e.metadata)||void 0===m?void 0:m.namespace,B=Object(c.e)(e)?null===(p=t.source)||void 0===p?void 0:p.url:null===(v=null===(g=t.source)||void 0===g?void 0:g.git)||void 0===v?void 0:v.url,x=null===(b=t.source)||void 0===b?void 0:b.contextDir,F=Object(c.e)(e)?null===(h=null===(f=t.source)||void 0===f?void 0:f.credentials)||void 0===h?void 0:h.name:null===(y=null===(E=t.source)||void 0===E?void 0:E.git)||void 0===y?void 0:y.cloneSecret,L=Object(c.e)(e)?null===(S=null===(k=t.output)||void 0===k?void 0:k.credentials)||void 0===S?void 0:S.name:null===(O=t.output)||void 0===O?void 0:O.pushSecret,U=Object(c.e)(e)?null==t?void 0:t.dockerfile:null===(T=null===(j=null==t?void 0:t.paramValues)||void 0===j?void 0:j.find(e=>"dockerfile"===(null==e?void 0:e.name)))||void 0===T?void 0:T.value,M=Object(c.e)(e)?null===(w=null==t?void 0:t.builder)||void 0===w?void 0:w.image:null===(N=null===(R=null==t?void 0:t.paramValues)||void 0===R?void 0:R.find(e=>"builder-image"===(null==e?void 0:e.name)))||void 0===N?void 0:N.value;return a.createElement("dl",null,t.strategy?a.createElement(s.r,{label:_("shipwright-plugin~Strategy"),obj:e,path:n+".strategy"},"ClusterBuildStrategy"===t.strategy.kind?a.createElement(s.hb,{groupVersionKind:Object(l.b)(Object(c.e)(e)?u.h:u.g),name:t.strategy.name}):a.createElement(s.hb,{groupVersionKind:Object(l.b)(Object(c.e)(e)?u.f:u.e),namespace:D,name:t.strategy.name})):null,B?a.createElement(s.r,{label:_("shipwright-plugin~Source URL"),obj:e,path:Object(c.e)(e)?n+".source.url":n+".source.git.url"},a.createElement(i.a,{variant:i.b.inlineCompact},a.createElement(s.z,{href:B,text:B}))):null,x?a.createElement(s.r,{label:_("shipwright-plugin~Context dir"),obj:e,path:n+".source.contextDir"},a.createElement(i.a,{variant:i.b.inlineCompact},x)):null,F?a.createElement(s.r,{label:_("shipwright-plugin~Source credentials"),obj:e,path:Object(c.e)(e)?n+".source.credentials.name":n+".source.git.cloneSecret"},a.createElement(s.hb,{groupVersionKind:Object(l.b)(o.SecretModel),namespace:e.metadata.namespace,name:F})):null,Object(c.e)(e)&&(null===(C=null==t?void 0:t.sources)||void 0===C?void 0:C.length)?a.createElement(s.r,{label:_("shipwright-plugin~Sources"),obj:e,path:n+".sources"},null===(P=t.sources)||void 0===P?void 0:P.map(e=>a.createElement(a.Fragment,{key:e.name},e.name,":",a.createElement("br",null),a.createElement(i.a,{variant:i.b.inlineCompact},a.createElement(s.z,{href:e.url,text:e.url})),a.createElement("br",null)))):null,U?a.createElement(s.r,{label:_("shipwright-plugin~Dockerfile"),obj:e,path:Object(c.e)(e)?n+".dockerfile":n+".paramValues['dockerfile'].value"},a.createElement(i.a,{variant:i.b.inlineCompact},U)):null,M?a.createElement(s.r,{label:_("shipwright-plugin~Builder image"),obj:e,path:Object(c.e)(e)?n+".builder.image":n+".paramValues['builder-image'].value"},a.createElement(i.a,{variant:i.b.inlineCompact},M)):null,(null===(I=t.output)||void 0===I?void 0:I.image)?a.createElement(s.r,{label:_("shipwright-plugin~Output image"),obj:e,path:n+".output.image"},a.createElement(d.a,{buildSpec:t})):null,L?a.createElement(s.r,{label:_("shipwright-plugin~Output credentials"),obj:e,path:Object(c.e)(e)?n+".output.credentials.name":n+".output.pushSecret"},a.createElement(s.hb,{groupVersionKind:Object(l.b)(o.SecretModel),namespace:e.metadata.namespace,name:L})):null)}},8329:function(e,t,n){"use strict";var a=n(0),i=n(40),r=n(5),l=n(8),s=n(2270),o=n(5895),u=n(6012),c=n(11486),d=n(11488),m=n(11489);t.a=e=>{const t=[r.mc.details(c.a),r.mc.editYaml(),r.mc.logs(m.a),r.mc.events(d.a)];return a.createElement(i.a,Object.assign({},e,{getResourceStatus:u.b,customActionMenu:(e,t)=>{const n={[Object(l.Db)(t)]:t};return a.createElement(s.c,{context:n},({actions:e,options:t,loaded:n})=>n&&a.createElement(s.a,{actions:e,options:t,variant:s.b.DROPDOWN}))},pages:t,breadcrumbsFor:o.j}))}},8330:function(e,t,n){"use strict";var a=n(0),i=n(872),r=n(40),l=n(5),s=n(5895);t.a=e=>{const t=[l.mc.details(i.d),l.mc.editYaml()];return a.createElement(r.a,Object.assign({},e,{pages:t,breadcrumbsFor:s.j}))}},8331:function(e,t,n){"use strict";var a=n(0),i=n(872),r=n(40),l=n(5),s=n(5895);t.a=e=>{const t=[l.mc.details(i.d),l.mc.editYaml()];return a.createElement(r.a,Object.assign({},e,{pages:t,breadcrumbsFor:s.j}))}},8332:function(e,t,n){"use strict";var a=n(0),i=n(7),r=n(14),l=n(872),s=n(8),o=n(15),u=n(5895),c=n(7520),d=n(6861);const m={showTitle:!1,canCreate:!1,hideBadge:!0};t.a=()=>{const{t:e}=Object(i.useTranslation)(),{"*":t}=Object(r.useParams)(),n=Object(r.useNavigate)(),p=Object(u.f)(),g=Object(u.g)(),v=Object(u.h)(),b=Object(u.i)(),f=[],h={};var E;return p&&(f.push((E=p,{href:"builds",component:c.a,nameKey:"shipwright-plugin~Builds",pageData:Object.assign(Object.assign({},m),{kind:Object(s.Hb)(E)})})),h.build={model:p,label:e("shipwright-plugin~Build"),onSelection:(e,t,n)=>n+"/form"}),g&&(f.push((e=>({href:"buildruns",component:d.a,nameKey:"shipwright-plugin~BuildRuns",pageData:Object.assign(Object.assign({},m),{kind:Object(s.Hb)(e)})}))(g)),h.buildRun={model:g,label:e("shipwright-plugin~BuildRun")}),v&&(f.push((e=>({href:"buildstrategies",component:l.c,nameKey:"shipwright-plugin~BuildStrategies",pageData:Object.assign(Object.assign({},m),{kind:Object(s.Hb)(e)})}))(v)),h.buildStrategy={model:v,label:e("shipwright-plugin~BuildStrategy")}),b&&(f.push((e=>({href:"clusterbuildstrategies",component:l.c,nameKey:"shipwright-plugin~ClusterBuildStrategies",pageData:Object.assign(Object.assign({},m),{kind:Object(s.Hb)(e)})}))(b)),h.clusterBuildStrategy={model:b,label:e("shipwright-plugin~ClusterBuildStrategy")}),a.useEffect(()=>{""===t&&(p?n("builds"):g?n("buildruns"):v?n("buildstrategies"):b&&n("clusterbuildstrategies"))},[t,n,p,g,v,b]),a.createElement(o.ob,{title:e("shipwright-plugin~Shipwright"),pages:f,menuActions:h,telemetryPrefix:"Shipwright"})}},8333:function(e,t,n){"use strict";var a=n(0),i=n(137),r=n(7),l=n(14),s=n(5),o=n(108),u=n(5729),c=n(11490);t.a=()=>{const{t:e}=Object(r.useTranslation)(),{ns:t,name:n}=Object(l.useParams)(),d=!n,[m,p,g]=Object(o.a)(d?null:{groupVersionKind:{group:u.a.apiGroup,kind:u.a.kind,version:u.a.apiVersion},name:n,namespace:t}),v=d?{apiVersion:"shipwright.io/v1beta1",kind:"Build",metadata:{namespace:t},spec:{output:{image:""},source:{git:{url:"",revision:""},contextDir:""},strategy:{name:""}}}:m,b=e(d?"shipwright-plugin~Create Shipwright Build":"shipwright-plugin~Edit Shipwright Build");return a.createElement(a.Fragment,null,a.createElement(i.b,null,a.createElement("title",null,b)),a.createElement(s.wb,{loaded:p,loadError:g,label:b,data:v},a.createElement(c.a,{heading:b,namespace:t,name:n,build:v})))}},8334:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return u}));var a=n(4424),i=n(640),r=n(1941),l=n(11503);const s=(e,t=Object(l.a)())=>{const n=i.a(t),r={apiVersion:"shipwright.io/v1beta1",kind:"Build",metadata:(null==e?void 0:e.metadata)&&"object"==typeof e.metadata?e.metadata:{},spec:(null==e?void 0:e.spec)&&"object"==typeof e.spec?e.spec:{output:{image:""},source:{},strategy:{name:"",kind:""}}};return((e,t)=>{t.formData.name=e.metadata.name||""})(r,n),((e,t)=>{var n,a,i,r,l,s,o;t.formData.source.git.project.name=e.metadata.namespace,t.formData.source.type="Git",t.formData.source.git.git.url=(null===(a=null===(n=e.spec.source)||void 0===n?void 0:n.git)||void 0===a?void 0:a.url)||"",t.formData.source.git.git.ref=(null===(r=null===(i=e.spec.source)||void 0===i?void 0:i.git)||void 0===r?void 0:r.revision)||"",t.formData.source.git.git.dir=(null===(l=e.spec.source)||void 0===l?void 0:l.contextDir)||"",t.formData.source.git.git.secret=(null===(o=null===(s=e.spec.source)||void 0===s?void 0:s.git)||void 0===o?void 0:o.cloneSecret)||""})(r,n),((e,t)=>{t.formData.build.strategy=e.spec.strategy.name,t.formData.build.kind=e.spec.strategy.kind})(r,n),((e,t)=>{var n,a;const i=null===(a=null===(n=e.spec)||void 0===n?void 0:n.paramValues)||void 0===a?void 0:a.map(e=>{var t;return Object.assign(Object.assign(Object.assign({name:e.name},e.value?{value:e.value}:{value:null===(t=null==e?void 0:e.values)||void 0===t?void 0:t.map(e=>e.value)}),e.value?{default:e.value}:{}),{type:e.values?"array":"string"})});t.formData.parameters=i||[]})(r,n),((e,t)=>{t.formData.outputImage.image=e.spec.output.image,e.spec.output.pushSecret?t.formData.outputImage.secret=e.spec.output.pushSecret:t.formData.outputImage.secret=""})(r,n),((e,t)=>{var n;const i=((null===(n=e.spec)||void 0===n?void 0:n.volumes)||[]).map(e=>{const t=Object.keys(e),n=a.a(t,"name","overridable","description");return{name:e.name,resourceType:n[0],resource:"emptyDir"===n[0]?e[n[0]]:e[n[0]].name,overridable:!0,description:e.description}});t.formData.volumes=i})(r,n),((e,t)=>{t.formData.environmentVariables=e.spec.env||[]})(r,n),n},o=(e,t)=>{let n=i.a(e);return n&&"object"==typeof n||(n={apiVersion:"shipwright.io/v1beta1",kind:"Build",metadata:{},spec:{output:{image:""},source:{},strategy:{name:"",kind:""}}}),n.apiVersion||(n.apiVersion="shipwright.io/v1beta1"),n.kind||(n.kind="Build"),n.metadata&&"object"==typeof n.metadata||(n.metadata={}),n.spec&&"object"==typeof n.spec||(n.spec={output:{image:""},source:{},strategy:{name:"",kind:""}}),((e,t)=>{t.metadata.name=e.formData.name})(t,n),((e,t)=>{const{git:n}=e.formData.source.git;t.spec.source=Object.assign(Object.assign({},t.spec.source),{type:"Git",contextDir:n.dir,git:Object.assign(Object.assign({url:n.url},n.ref?{revision:n.ref}:{}),n.secret?{cloneSecret:n.secret}:{})})})(t,n),((e,t)=>{const n=e.formData.build;t.spec.strategy=Object.assign(Object.assign({},t.spec.strategy),{name:n.strategy,kind:null==n?void 0:n.kind})})(t,n),((e,t)=>{const{outputImage:n}=e.formData;t.spec.output=Object.assign(Object.assign(Object.assign({},t.spec.output),{image:n.image}),n.secret?{pushSecret:n.secret}:{})})(t,n),((e,t)=>{const{volumes:n}=e.formData,a=n.map(e=>e.overridable&&Object.assign({name:e.name},"emptyDir"===e.resourceType?{[e.resourceType]:{}}:{[e.resourceType]:{name:e.resource}}));t.spec.volumes=a})(t,n),((e,t)=>{const{parameters:n}=e.formData,a=null==n?void 0:n.map(e=>{var t;return Object.assign({name:e.name},"string"===e.type?{value:e.value}:{values:e.value.length>0?null===(t=e.value)||void 0===t?void 0:t.map(e=>({value:e})):[]})});t.spec.paramValues=a||[]})(t,n),((e,t)=>{const{environmentVariables:n}=e.formData;t.spec.env=n})(t,n),n},u=e=>{const t=Object(r.c)(e.yamlData),n=o(t,e);return Object(r.b)(n,"",{skipInvalid:!0})}}}]);
//# sourceMappingURL=pages-chunk-30cdcb31ea861de5c3ae.min.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[275],{1982:function(e,t,a){"use strict";a.r(t);var i=a(8335);a.d(t,"useBuildActions",(function(){return i.a}));var n=a(8336);a.d(t,"useBuildRunActions",(function(){return n.a}))},5722:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return d}));var i=a(29),n=a(131),l=a(5),u=a(8);const r={Delete:(e,t,a,u)=>({id:"delete-resource",label:i.a.t("console-app~Delete {{kind}}",{kind:e.kind}),cta:()=>Object(n.q)({kind:e,resource:t,message:u}),accessReview:Object(l.Eb)(e,t,"delete")}),Edit:(e,t)=>({id:"edit-resource",label:i.a.t("console-app~Edit {{kind}}",{kind:e.kind}),cta:{href:Object(l.sc)(t,e.crd?Object(u.Hb)(e):e.kind)+"/yaml"},accessReview:Object(l.Eb)(e,t,"update")}),ModifyLabels:(e,t)=>({id:"edit-labels",label:i.a.t("console-app~Edit labels"),cta:()=>Object(n.v)({kind:e,resource:t,blocking:!0}),accessReview:Object(l.Eb)(e,t,"patch")}),ModifyAnnotations:(e,t)=>({id:"edit-annotations",label:i.a.t("console-app~Edit annotations"),cta:()=>Object(n.b)({kind:e,resource:t,blocking:!0}),accessReview:Object(l.Eb)(e,t,"patch")}),ModifyCount:(e,t)=>({id:"edit-pod-count",label:i.a.t("console-app~Edit Pod count"),cta:()=>Object(n.l)({resourceKind:e,resource:t}),accessReview:Object(l.Eb)(e,t,"patch","scale")}),ModifyPodSelector:(e,t)=>({id:"edit-pod-selector",label:i.a.t("console-app~Edit Pod selector"),cta:()=>Object(n.x)({kind:e,resource:t,blocking:!0}),accessReview:Object(l.Eb)(e,t,"patch")}),ModifyTolerations:(e,t)=>({id:"edit-toleration",label:i.a.t("console-app~Edit tolerations"),cta:()=>Object(n.D)({resourceKind:e,resource:t,modalClassName:"modal-lg"}),accessReview:Object(l.Eb)(e,t,"patch")}),AddStorage:(e,t)=>({id:"add-storage",label:i.a.t("console-app~Add storage"),cta:{href:Object(l.sc)(t,e.crd?Object(u.Hb)(e):e.kind)+"/attach-storage"},accessReview:Object(l.Eb)(e,t,"patch")})},d=(e,t,a)=>[r.ModifyLabels(e,t),r.ModifyAnnotations(e,t),r.Edit(e,t),r.Delete(e,t,void 0,a)]},5729:function(e,t,a){"use strict";a.d(t,"h",(function(){return n})),a.d(t,"f",(function(){return l})),a.d(t,"b",(function(){return u})),a.d(t,"d",(function(){return r})),a.d(t,"g",(function(){return d})),a.d(t,"e",(function(){return s})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return o}));var i=a(5731);const n={id:"clusterbuildstrategy",plural:"clusterbuildstrategies",apiGroup:i.a,apiVersion:"v1alpha1",kind:"ClusterBuildStrategy",namespaced:!1,crd:!0,label:"ClusterBuildStrategy",labelKey:"shipwright-plugin~ClusterBuildStrategy",labelPlural:"ClusterBuildStrategies",labelPluralKey:"shipwright-plugin~ClusterBuildStrategies",abbr:"CBS"},l={id:"buildstrategy",plural:"buildstrategies",apiGroup:i.a,apiVersion:"v1alpha1",kind:"BuildStrategy",namespaced:!0,crd:!0,label:"BuildStrategy",labelKey:"shipwright-plugin~BuildStrategy",labelPlural:"BuildStrategies",labelPluralKey:"shipwright-plugin~BuildStrategies",abbr:"BS"},u={id:"build",plural:"builds",apiGroup:i.a,apiVersion:"v1alpha1",kind:"Build",namespaced:!0,crd:!0,label:"Build",labelKey:"shipwright-plugin~Build",labelPlural:"Builds",labelPluralKey:"shipwright-plugin~Builds",abbr:"B"},r={id:"buildrun",plural:"buildruns",apiGroup:i.a,apiVersion:"v1alpha1",kind:"BuildRun",namespaced:!0,crd:!0,label:"BuildRun",labelKey:"shipwright-plugin~BuildRun",labelPlural:"BuildRuns",labelPluralKey:"shipwright-plugin~BuildRuns",abbr:"BR"},d={id:"clusterbuildstrategy",plural:"clusterbuildstrategies",apiGroup:i.a,apiVersion:i.b,kind:"ClusterBuildStrategy",namespaced:!1,crd:!0,label:"ClusterBuildStrategy",labelKey:"shipwright-plugin~ClusterBuildStrategy",labelPlural:"ClusterBuildStrategies",labelPluralKey:"shipwright-plugin~ClusterBuildStrategies",abbr:"CBS"},s={id:"buildstrategy",plural:"buildstrategies",apiGroup:i.a,apiVersion:i.b,kind:"BuildStrategy",namespaced:!0,crd:!0,label:"BuildStrategy",labelKey:"shipwright-plugin~BuildStrategy",labelPlural:"BuildStrategies",labelPluralKey:"shipwright-plugin~BuildStrategies",abbr:"BS"},c={id:"build",plural:"builds",apiGroup:i.a,apiVersion:i.b,kind:"Build",namespaced:!0,crd:!0,label:"Build",labelKey:"shipwright-plugin~Build",labelPlural:"Builds",labelPluralKey:"shipwright-plugin~Builds",abbr:"B"},o={id:"buildrun",plural:"buildruns",apiGroup:i.a,apiVersion:i.b,kind:"BuildRun",namespaced:!0,crd:!0,label:"BuildRun",labelKey:"shipwright-plugin~BuildRun",labelPlural:"BuildRuns",labelPluralKey:"shipwright-plugin~BuildRuns",abbr:"BR"}},5731:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return u})),a.d(t,"e",(function(){return r})),a.d(t,"f",(function(){return d}));const i="shipwright.io",n="v1beta1",l="build.shipwright.io/name",u="app.kubernetes.io/instance",r="image-registry.openshift-image-registry.svc:5000",d="quay.io"},5786:function(e,t,a){"use strict";var i,n;a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return l})),function(e){e.PENDING="Pending",e.RUNNING="Running",e.SUCCEEDED="Succeeded",e.FAILED="Failed",e.UNKNOWN="Unknown"}(i||(i={})),function(e){e.BUILDAH="buildah",e.S2I="source-to-image",e.UNKNOWN="unknown"}(n||(n={}));const l={[n.BUILDAH]:"shipwright-plugin~Buildah",[n.S2I]:"shipwright-plugin~Source-to-Image",[n.UNKNOWN]:"shipwright-plugin~Unknown"}},5895:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return b})),a.d(t,"a",(function(){return p})),a.d(t,"e",(function(){return g})),a.d(t,"b",(function(){return v})),a.d(t,"f",(function(){return m})),a.d(t,"g",(function(){return f})),a.d(t,"h",(function(){return w})),a.d(t,"i",(function(){return B})),a.d(t,"j",(function(){return j}));var i=a(14),n=a(13),l=a(83),u=a(15),r=a(6012),d=a(5731),s=a(5729),c=a(5786);const o=(e,t)=>{const a=e.filter(e=>{var a,i,n,l;return(null===(i=null===(a=e.metadata)||void 0===a?void 0:a.labels)||void 0===i?void 0:i[d.d])===(null===(l=null===(n=t.metadata)||void 0===n?void 0:n.labels)||void 0===l?void 0:l[d.d])});if(!a||0===a.length)return{latestBuildRun:null,status:c.b.UNKNOWN};const i=((e,t)=>{var a,i,n,l;if(!(e&&e.data&&e.data.length>0&&t))return null;let u=e.data[0];if("creationTimestamp"===t)for(let n=1;n<e.data.length;n++)u=(null===(i=null===(a=e.data[n])||void 0===a?void 0:a.metadata)||void 0===i?void 0:i[t])&&new Date(e.data[n].metadata[t])>new Date(u.metadata[t])?e.data[n]:u;else if("startTime"===t||"completionTime"===t)for(let a=1;a<e.data.length;a++)u=(null===(l=null===(n=e.data[a])||void 0===n?void 0:n.status)||void 0===l?void 0:l[t])&&new Date(e.data[a].status[t])>new Date(u.status[t])?e.data[a]:u;else u=e.data[e.data.length-1];return u})({data:a},"creationTimestamp");if(!i)return{latestBuildRun:null,status:c.b.UNKNOWN};return{latestBuildRun:i,status:Object(r.b)(i)}},b=(e,t)=>{var a,i;const n=new Date(null===(a=null==t?void 0:t.metadata)||void 0===a?void 0:a.creationTimestamp);return new Date(null===(i=null==e?void 0:e.metadata)||void 0===i?void 0:i.creationTimestamp).getTime()-n.getTime()>0},p=(e,t)=>{var a,i;const n=new Date((null===(a=null==e?void 0:e.metadata)||void 0===a?void 0:a.creationTimestamp)||Date.now());return new Date((null===(i=null==t?void 0:t.metadata)||void 0===i?void 0:i.creationTimestamp)||Date.now()).getTime()-n.getTime()},g=e=>"shipwright.io/v1alpha1"===e.apiVersion,v=e=>{var t,a,i,n;return g(e)?null===(a=null===(t=e.spec)||void 0===t?void 0:t.buildRef)||void 0===a?void 0:a.name:null===(n=null===(i=e.spec)||void 0===i?void 0:i.build)||void 0===n?void 0:n.name},h=(e,t,a,i)=>{const n=Object(l.useFlag)(i),u=Object(l.useFlag)(a);return n||u?u?e:t:null},m=()=>h(s.a,s.b,"SHIPWRIGHT_BUILD","SHIPWRIGHT_BUILD_V1ALPHA1"),f=()=>h(s.c,s.d,"SHIPWRIGHT_BUILDRUN","SHIPWRIGHT_BUILDRUN_V1ALPHA1"),w=()=>h(s.e,s.f,"SHIPWRIGHT_BUILDSTRATEGY","SHIPWRIGHT_BUILDSTRATEGY_V1ALPHA1"),B=()=>h(s.g,s.h,"SHIPWRIGHT_CLUSTERBUILDSTRATEGY","SHIPWRIGHT_CLUSTERBUILDSTRATEGY_V1ALPHA1"),O={[s.a.kind]:"builds",[s.b.kind]:"builds",[s.c.kind]:"buildruns",[s.d.kind]:"buildruns",[s.e.kind]:"buildstrategies",[s.f.kind]:"buildstrategies",[s.g.kind]:"clusterbuildstrategies",[s.h.kind]:"clusterbuildstrategies"},j=e=>{const t="admin"===Object(n.jc)()[0],a=Object(i.useParams)(),l=Object(i.useLocation)();return Object(u.bf)((e=>{if("shipwright.io/v1alpha1"===(null==e?void 0:e.apiVersion))switch(null==e?void 0:e.kind){case"Build":return s.b;case"BuildRun":return s.d;case"BuildStrategy":return s.f;case"ClusterBuildStrategy":return s.h;default:return null}switch(null==e?void 0:e.kind){case"Build":return s.a;case"BuildRun":return s.c;case"BuildStrategy":return s.e;case"ClusterBuildStrategy":return s.g;default:return null}})(e),l,a,"k8s","shipwright.io/"+O[e.kind],void 0,t)}},6012:function(e,t,a){"use strict";a.d(t,"b",(function(){return d}));var i=a(0),n=a(29),l=a(1422),u=a(5786);const r=e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.conditions)||void 0===a?void 0:a.find(e=>"Succeeded"===e.type)},d=e=>{const t=r(e);if(t){if("Unknown"===t.status&&"Pending"===t.reason)return u.b.PENDING;if("Unknown"===t.status&&"Running"===t.reason)return u.b.RUNNING;if("True"===t.status)return u.b.SUCCEEDED;if("False"===t.status)return u.b.FAILED}return u.b.UNKNOWN};t.a=({buildRun:e})=>{const t=d(e),a=r(e);return i.createElement(l.a,Object.assign({},(e=>{const t=r(e);if(t){if("Unknown"===t.status&&"Pending"===t.reason)return{status:u.b.PENDING,title:n.a.t("shipwright-plugin~Pending")};if("Unknown"===t.status&&"Running"===t.reason)return{status:u.b.RUNNING,title:n.a.t("shipwright-plugin~Running")};if("True"===t.status)return{status:u.b.SUCCEEDED,title:n.a.t("shipwright-plugin~Succeeded")};if("False"===t.status)return{status:u.b.FAILED,title:n.a.t("shipwright-plugin~Failed")}}return{status:u.b.UNKNOWN,title:n.a.t("shipwright-plugin~Unknown")}})(e)),t===u.b.FAILED?i.createElement(i.Fragment,null,i.createElement("pre",{"data-test":"failure-popup"},a.reason),a.message):null)}},6325:function(e,t,a){"use strict";a.d(t,"c",(function(){return d})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return c}));var i=a(77),n=a(5731),l=a(5729),u=a(5895),r=function(e,t,a,i){return new(a||(a=Promise))((function(n,l){function u(e){try{d(i.next(e))}catch(e){l(e)}}function r(e){try{d(i.throw(e))}catch(e){l(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(u,r)}d((i=i.apply(e,t||[])).next())}))};const d=e=>r(void 0,void 0,void 0,(function*(){var t,a;const r=(null===(a=null===(t=e.metadata)||void 0===t?void 0:t.labels)||void 0===a?void 0:a[n.d])||null;let d;return d=Object(u.e)(e)?{apiVersion:"shipwright.io/v1alpha1",kind:"BuildRun",metadata:{namespace:e.metadata.namespace,generateName:e.metadata.name+"-",labels:Object.assign({[n.c]:e.metadata.name},r?{[n.d]:r}:{})},spec:{buildRef:{name:e.metadata.name}}}:{apiVersion:"shipwright.io/v1beta1",kind:"BuildRun",metadata:{namespace:e.metadata.namespace,generateName:e.metadata.name+"-",labels:Object.assign({[n.c]:e.metadata.name},r?{[n.d]:r}:{})},spec:{build:{name:e.metadata.name}}},Object(i.g)({model:Object(u.e)(d)?l.d:l.c,data:d})})),s=e=>{var t,a,i,n,l,r,d;const s=Object(u.e)(e)?!!(null===(a=null===(t=e.spec)||void 0===t?void 0:t.buildRef)||void 0===a?void 0:a.name):!!(null===(n=null===(i=e.spec)||void 0===i?void 0:i.build)||void 0===n?void 0:n.name),c=Object(u.e)(e)?!!(null===(l=e.spec)||void 0===l?void 0:l.buildSpec):!!(null===(d=null===(r=e.spec)||void 0===r?void 0:r.build)||void 0===d?void 0:d.spec);return s||c},c=e=>r(void 0,void 0,void 0,(function*(){var t,a,r,d,s,c,o,b,p;const g=Object(u.e)(e)?null===(a=null===(t=e.spec)||void 0===t?void 0:t.buildRef)||void 0===a?void 0:a.name:null===(d=null===(r=e.spec)||void 0===r?void 0:r.build)||void 0===d?void 0:d.name,v=Object(u.e)(e)?null===(s=e.spec)||void 0===s?void 0:s.buildSpec:null===(o=null===(c=e.spec)||void 0===c?void 0:c.build)||void 0===o?void 0:o.spec,h=(null===(p=null===(b=e.metadata)||void 0===b?void 0:b.labels)||void 0===p?void 0:p[n.d])||null;if(g){const t=e.metadata.generateName||g+"-";let a;return a=Object(u.e)(e)?{apiVersion:"shipwright.io/v1alpha1",kind:"BuildRun",metadata:{namespace:e.metadata.namespace,generateName:t,labels:Object.assign({[n.c]:g},h?{[n.d]:h}:{})},spec:{buildRef:{name:g}}}:{apiVersion:"shipwright.io/v1beta1",kind:"BuildRun",metadata:{namespace:e.metadata.namespace,generateName:t,labels:Object.assign({[n.c]:g},h?{[n.d]:h}:{})},spec:{build:{name:g}}},Object(i.g)({model:Object(u.e)(a)?l.d:l.c,data:a})}if(v){const t=e.metadata.generateName||e.metadata.name+"-";let a;return a=Object(u.e)(e)?{apiVersion:"shipwright.io/v1alpha1",kind:"BuildRun",metadata:Object.assign({namespace:e.metadata.namespace,generateName:t},h?{labels:{[n.d]:h}}:{}),spec:{buildSpec:v}}:{apiVersion:"shipwright.io/v1beta1",kind:"BuildRun",metadata:Object.assign({namespace:e.metadata.namespace,generateName:t},h?{labels:{[n.d]:h}}:{}),spec:{build:{spec:v}}},Object(i.g)({model:Object(u.e)(a)?l.d:l.c,data:a})}throw Object(u.e)(e)?new Error("Could not rerun BuildRun without buildRef.name or inline buildSpec."):new Error("Could not rerun BuildRun without build.name or inline buildSpec.")}))},8335:function(e,t,a){"use strict";var i=a(0),n=a(7),l=a(14),u=a(5722),r=a(131),d=a(5),s=a(8),c=a(473),o=a(6325),b=a(5729);t.a=e=>{const{t:t}=Object(n.useTranslation)(),a=Object(l.useNavigate)(),[p,g]=Object(c.a)(Object(s.Db)(e));return[i.useMemo(()=>{var i,n,l;const c=[];return c.push({id:"shipwright-build-start",label:t("shipwright-plugin~Start"),cta:()=>{Object(o.c)(e).then(e=>{a(Object(d.sc)(e,Object(s.Db)(e)))}).catch(e=>{Object(r.s)({error:e.message})})},accessReview:{verb:"create",group:b.c.apiGroup,resource:b.c.plural,namespace:null===(i=e.metadata)||void 0===i?void 0:i.namespace}}),e.latestBuild&&c.push({id:"shipwright-build-start-last-run",label:t("shipwright-plugin~Start last run"),disabled:!e.latestBuild,cta:()=>{Object(o.b)(e.latestBuild).then(e=>{a(Object(d.sc)(e,Object(s.Db)(e)))}).catch(e=>{const t=e.message;Object(r.s)({error:t})})},accessReview:{verb:"create",group:b.c.apiGroup,resource:b.c.plural,namespace:null===(n=e.metadata)||void 0===n?void 0:n.namespace}}),c.push(u.a.ModifyLabels(p,e),u.a.ModifyAnnotations(p,e)),c.push({id:"shipwright-build-edit",label:t("shipwright-plugin~Edit Build"),cta:{href:Object(d.sc)(e,Object(s.Db)(e))+"/form"},accessReview:{verb:"update",group:b.c.apiGroup,resource:b.c.plural,namespace:null===(l=e.metadata)||void 0===l?void 0:l.namespace}}),c.push(u.a.Delete(p,e)),c},[t,e,p,a]),!g,void 0]}},8336:function(e,t,a){"use strict";var i=a(0),n=a(7),l=a(14),u=a(5722),r=a(131),d=a(5),s=a(8),c=a(473),o=a(6325),b=a(5729);t.a=e=>{const{t:t}=Object(n.useTranslation)(),a=Object(l.useNavigate)(),[p,g]=Object(c.a)(Object(s.Db)(e));return[i.useMemo(()=>{var i;const n={id:"shipwright-buildrun-rerun",label:t("shipwright-plugin~Rerun"),cta:()=>{Object(o.b)(e).then(e=>{a(Object(d.sc)(e,Object(s.Db)(e)))}).catch(e=>{const t=e.message;Object(r.s)({error:t})})},accessReview:{verb:"create",group:b.c.apiGroup,resource:b.c.plural,namespace:null===(i=e.metadata)||void 0===i?void 0:i.namespace}};return[...Object(o.a)(e)?[n]:[],...Object(u.b)(p,e)]},[t,e,p,a]),!g,void 0]}}}]);
//# sourceMappingURL=actions-chunk-51a15cc470f5ea3a4b0e.min.js.map
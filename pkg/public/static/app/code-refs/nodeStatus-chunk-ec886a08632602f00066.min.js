(window.webpackJsonp=window.webpackJsonp||[]).push([[93,92],{1976:function(e,t,n){"use strict";n.r(t);var a=n(7968);n.d(t,"isUnschedulableActive",(function(){return a.b})),n.d(t,"MarkAsSchedulablePopover",(function(){return a.a}));var o=n(6782);n.d(t,"isCSRActive",(function(){return o.d})),n.d(t,"CSRPopoverContent",(function(){return o.a})),n.d(t,"ServerCSRPopoverContent",(function(){return o.b}))},5416:function(e,t,n){"use strict";n.r(t),n.d(t,"approveCSR",(function(){return f})),n.d(t,"denyCSR",(function(){return h})),n.d(t,"useNodeActions",(function(){return m}));var a=n(0),o=n(7),c=n(83),r=n(77),l=n(5),s=n(10),i=n(8),d=n(15),u=n(5722),p=n(6271),b=n(6518);const v=(e,t)=>{var n;const a=Object.assign(Object.assign({},e),{status:Object.assign(Object.assign({},e.status||{}),{conditions:[{lastUpdateTime:(new Date).toISOString(),message:`This CSR was ${t.toLowerCase()} via OpenShift Console`,reason:"OpenShiftConsoleCSRApprove",status:"True",type:t},...(null===(n=e.status)||void 0===n?void 0:n.conditions)||[]]})});return Object(r.r)({data:a,model:s.CertificateSigningRequestModel,path:"approval"})},f=e=>v(e,"Approved"),h=e=>v(e,"Denied"),m=e=>{const[t,n]=Object(c.useK8sModel)(Object(i.Db)(e)),{t:r}=Object(o.useTranslation)();return[a.useMemo(()=>{const n=[];Object(d.Td)(e)?n.push({id:"mark-as-schedulable",label:r("console-app~Mark as schedulable"),cta:()=>Object(p.a)(e),accessReview:Object(l.Eb)(t,e,"patch")}):n.push({id:"mark-as-unschedulable",label:r("console-app~Mark as unschedulable"),cta:()=>Object(b.a)({resource:e}),accessReview:Object(l.Eb)(t,e,"patch")});const o=a.createElement("p",null,r("console-app~This action cannot be undone. Deleting a node will instruct Kubernetes that the node is down or unrecoverable and delete all pods scheduled to that node. If the node is still running but unresponsive and the node is deleted, stateful workloads and persistent volumes may suffer corruption or data loss. Only delete a node that you have confirmed is completely stopped and cannot be restored."));return n.push(...Object(u.b)(t,e,o)),n},[t,e,r]),!n,void 0]}},5722:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s}));var a=n(29),o=n(131),c=n(5),r=n(8);const l={Delete:(e,t,n,r)=>({id:"delete-resource",label:a.a.t("console-app~Delete {{kind}}",{kind:e.kind}),cta:()=>Object(o.q)({kind:e,resource:t,message:r}),accessReview:Object(c.Eb)(e,t,"delete")}),Edit:(e,t)=>({id:"edit-resource",label:a.a.t("console-app~Edit {{kind}}",{kind:e.kind}),cta:{href:Object(c.sc)(t,e.crd?Object(r.Hb)(e):e.kind)+"/yaml"},accessReview:Object(c.Eb)(e,t,"update")}),ModifyLabels:(e,t)=>({id:"edit-labels",label:a.a.t("console-app~Edit labels"),cta:()=>Object(o.v)({kind:e,resource:t,blocking:!0}),accessReview:Object(c.Eb)(e,t,"patch")}),ModifyAnnotations:(e,t)=>({id:"edit-annotations",label:a.a.t("console-app~Edit annotations"),cta:()=>Object(o.b)({kind:e,resource:t,blocking:!0}),accessReview:Object(c.Eb)(e,t,"patch")}),ModifyCount:(e,t)=>({id:"edit-pod-count",label:a.a.t("console-app~Edit Pod count"),cta:()=>Object(o.l)({resourceKind:e,resource:t}),accessReview:Object(c.Eb)(e,t,"patch","scale")}),ModifyPodSelector:(e,t)=>({id:"edit-pod-selector",label:a.a.t("console-app~Edit Pod selector"),cta:()=>Object(o.x)({kind:e,resource:t,blocking:!0}),accessReview:Object(c.Eb)(e,t,"patch")}),ModifyTolerations:(e,t)=>({id:"edit-toleration",label:a.a.t("console-app~Edit tolerations"),cta:()=>Object(o.D)({resourceKind:e,resource:t,modalClassName:"modal-lg"}),accessReview:Object(c.Eb)(e,t,"patch")}),AddStorage:(e,t)=>({id:"add-storage",label:a.a.t("console-app~Add storage"),cta:{href:Object(c.sc)(t,e.crd?Object(r.Hb)(e):e.kind)+"/attach-storage"},accessReview:Object(c.Eb)(e,t,"patch")})},s=(e,t,n)=>[l.ModifyLabels(e,t),l.ModifyAnnotations(e,t),l.Edit(e,t),l.Delete(e,t,void 0,n)]},6271:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return l}));var a=n(225),o=n(10),c=n(8);const r=e=>{const t=a.a(e,"spec.unschedulable")?"replace":"add";return Object(c.pb)(o.NodeModel,e,[{op:t,path:"/spec/unschedulable",value:!0}])},l=e=>{const t=a.a(e,"spec.unschedulable")?"replace":"add";return Object(c.pb)(o.NodeModel,e,[{op:t,path:"/spec/unschedulable",value:!1}])}},6518:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a=e=>n.e(118).then(n.bind(null,7569)).then(t=>t.default(e))},6782:function(e,t,n){"use strict";n.d(t,"d",(function(){return j})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return k}));var a=n(0),o=n(967),c=n(406),r=n(516),l=n(164),s=n(19),i=n(80),d=n(1921),u=n(6023),p=n(7),b=n(13),v=n(5),f=n(10),h=n(15),m=n(2310),E=n(5416),O=function(e,t,n,a){return new(n||(n=Promise))((function(o,c){function r(e){try{s(a.next(e))}catch(e){c(e)}}function l(e){try{s(a.throw(e))}catch(e){c(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}s((a=a.apply(e,t||[])).next())}))},g=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n};const j=(e,t)=>{var n,a;return!(!(null===(n=t.csrs)||void 0===n?void 0:n.loaded)||(null===(a=t.csrs)||void 0===a?void 0:a.loadError))&&!!Object(m.b)(t.csrs.data,e)},y=({csr:e,serverCSR:t,onPatch:n})=>{const{t:d}=Object(p.useTranslation)(),[u,b]=a.useState(!1),[h,m]=a.useState(),g=t=>O(void 0,void 0,void 0,(function*(){m(null),b(!0);try{yield t?Object(E.approveCSR)(e):Object(E.denyCSR)(e),null==n||n()}catch(n){m(`${e.metadata.name} ${t?"approval":"denial"} failed - ${n}`)}finally{b(!1)}})),j=d("console-app~This node has requested to join the cluster. After approving its certificate signing request the node will begin running workloads."),y=d("console-app~This node has a pending server certificate signing request. Approve the request to enable all networking functionality on this node.");return a.createElement(o.a,{hasGutter:!0},a.createElement(c.a,null,t?y:j),a.createElement(c.a,null,a.createElement("div",null,a.createElement("b",null,d("console-app~Request"))),a.createElement("div",null,a.createElement(v.hb,{name:e.metadata.name,groupVersionKind:{kind:f.CertificateSigningRequestModel.kind,version:f.CertificateSigningRequestModel.apiVersion,group:f.CertificateSigningRequestModel.apiGroup}}))),a.createElement(c.a,null,a.createElement("div",null,a.createElement("b",null,d("console-app~Created"))),a.createElement("div",null,a.createElement(v.xb,{timestamp:e.metadata.creationTimestamp}))),a.createElement(c.a,null,a.createElement(r.a,{hasGutter:!0},a.createElement(l.a,null,a.createElement(s.a,{variant:"link",onMouseUp:()=>g(!0),isDisabled:u,isInline:!0},d("console-app~Approve"))),a.createElement(l.a,null,a.createElement(s.a,{variant:"link",onMouseUp:()=>g(!1),isDisabled:u,isInline:!0},d("console-app~Deny"))))),h&&a.createElement(c.a,null,a.createElement(i.a,{variant:"danger",isInline:!0,title:h})))},w=({title:e})=>{const{t:t}=Object(p.useTranslation)();return a.createElement(b.A,{title:e||t("console-app~Approval required"),icon:a.createElement(u.a,null)})},k=({node:e,resources:t})=>{const[n,o]=a.useState(!0),c=Object(m.b)(t.csrs.data,e);return a.createElement(d.a,{isExpanded:n,onToggle:(e,t)=>o(t),toggleContent:a.createElement(w,null)},a.createElement(y,{csr:c,serverCSR:!0}))};t.c=e=>{var{title:t}=e,n=g(e,["title"]);const{t:o}=Object(p.useTranslation)(),[c,r]=a.useState(!1);return a.createElement(a.Fragment,null,a.createElement(b.q,{title:o("console-app~Certificate approval required"),statusBody:a.createElement(w,{title:t}),isVisible:c,shouldClose:()=>r(!1),shouldOpen:()=>r(!0)},a.createElement(y,Object.assign({},n,{onPatch:()=>r(!1)}))),a.createElement(h.Wb,{status:o("console-app~Approval required")}))}},7968:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return v}));var a=n(0),o=n(1921),c=n(967),r=n(406),l=n(19),s=n(7),i=n(13),d=n(131),u=n(6271),p=function(e,t,n,a){return new(n||(n=Promise))((function(o,c){function r(e){try{s(a.next(e))}catch(e){c(e)}}function l(e){try{s(a.throw(e))}catch(e){c(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}s((a=a.apply(e,t||[])).next())}))};const b=e=>!!e.spec.unschedulable,v=({node:e})=>{const{t:t}=Object(s.useTranslation)(),[n,b]=a.useState(!0);return a.createElement(o.a,{isExpanded:n,onToggle:(e,t)=>b(t),toggleContent:a.createElement(i.A,{title:t("console-app~Scheduling disabled"),icon:a.createElement(i.D,null)})},a.createElement(c.a,{hasGutter:!0},a.createElement(r.a,null,t("console-app~No new Pods or workloads will be placed on this Node until it's marked as schedulable.")),a.createElement(r.a,null,a.createElement(l.a,{isInline:!0,variant:"link",onClick:()=>p(void 0,void 0,void 0,(function*(){try{yield Object(u.a)(e)}catch(e){Object(d.s)({error:e.message||t("console-app~An error occurred. Please try again")})}}))},t("console-app~Mark as schedulable")))))}}}]);
//# sourceMappingURL=nodeStatus-chunk-ec886a08632602f00066.min.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{5412:function(e,n,o){"use strict";o.r(n),o.d(n,"developmentMode",(function(){return y})),o.d(n,"useConsoleOperatorConfigData",(function(){return I})),o.d(n,"ConsolePluginStatus",(function(){return T})),o.d(n,"ConsolePluginEnabledStatus",(function(){return _})),o.d(n,"ConsolePluginCSPStatus",(function(){return x})),o.d(n,"ConsoleOperatorConfigDetailsPage",(function(){return H}));var a=o(0),t=o(19),l=o(80),i=o(615),s=o(469),r=o(1340),c=o(2140),d=o(740),u=o(955),m=o(1373),p=o(1182),v=o(7),b=o(764),g=o(14),C=o(13),f=o(77),E=o(988),O=o(872),j=o(40),M=o(5),h=o(108),P=o(10),S=o(8),k=o(69),w=o(991),L=o(15),N=o(6272);const y="off-cluster"===window.SERVER_FLAGS.k8sMode,F=Object(f.b)(P.ConsolePluginModel),V=Object(f.e)(P.ConsolePluginModel),D=Object(S.Hb)(P.ConsoleOperatorConfigModel),I=()=>{const e={kind:Object(S.Hb)(P.ConsoleOperatorConfigModel),isList:!1,name:L.v},[n,o]=Object(h.a)(e),t=Object(C.hc)({group:P.ConsoleOperatorConfigModel.apiGroup,resource:P.ConsoleOperatorConfigModel.plural,verb:"patch",name:L.v});return a.useMemo(()=>({consoleOperatorConfig:n,consoleOperatorConfigLoaded:o,canPatchConsoleOperatorConfig:t}),[n,o,t])},T=({status:e,errorMessage:n})=>a.createElement(L.cc,{status:e,title:"Failed"===e?n:void 0}),_=({pluginName:e,enabled:n})=>{const{t:o}=Object(v.useTranslation)(),{consoleOperatorConfig:l,consoleOperatorConfigLoaded:s,canPatchConsoleOperatorConfig:r}=I(),c=o(n?"console-app~Enabled":"console-app~Disabled");return a.createElement(a.Fragment,null,s&&r&&!y?a.createElement(t.a,{"data-test":"edit-console-plugin",type:"button",isInline:!0,onClick:()=>Object(L.wc)({consoleOperatorConfig:l,pluginName:e,trusted:!1}),variant:"link"},c,a.createElement(i.a,{className:"co-icon-space-l pf-v5-c-button-icon--plain"})):a.createElement(a.Fragment,null,c))},x=({hasViolations:e})=>{const{t:n}=Object(v.useTranslation)();return e?a.createElement(a.Fragment,null,a.createElement(L.tc,{className:"co-icon-space-r",title:n("console-app~This plugin might have violated the Console Content Security Policy. Refer to the browser's console logs for details.")})," ",n("console-app~Yes")):a.createElement(a.Fragment,null,a.createElement(L.X,{className:"co-icon-space-r"})," ",n("console-app~No"))},K=({obj:e,rows:n,loaded:o})=>{var i;const{t:g}=Object(v.useTranslation)(),[C,f]=a.useState(()=>({index:0,direction:s.a.asc})),E=a.useCallback((e,n,o)=>{f({index:n,direction:o})},[]),O=a.useMemo(()=>[{id:"name",name:g("console-app~Name"),sortable:!0},{id:"version",name:g("console-app~Version")},{id:"description",name:g("console-app~Description")},{id:"status",name:g("console-app~Status"),sortable:!0},{id:"enabled",name:g("console-app~Enabled"),sortable:!0},{id:"csp-violations",name:g("console-app~CSP violations")}],[g]),j=a.useCallback((e,n)=>{const{index:o,direction:a}=C,{id:t}=O[o],l=a===s.a.desc,i=(l?n:e)[t],r=(l?e:n)[t];switch(t){case"enabled":return Object(N.a)(i,r);default:return Object(N.b)(i,r)}},[O,C]),h=a.useMemo(()=>n.sort(j),[n,j]);return o?a.createElement("div",{className:"co-m-pane__body"},"Unmanaged"===(null===(i=e.spec)||void 0===i?void 0:i.managementState)&&a.createElement(l.a,{className:"co-alert",variant:"info",isInline:!0,title:g("console-app~Console operator spec.managementState is unmanaged. Changes to plugins will have no effect.")}),a.createElement(M.eb,{model:P.ConsolePluginModel},a.createElement("div",{className:"co-m-pane__createLink--no-title"},a.createElement(b.Link,{className:"co-m-primary-action",to:`/k8s/cluster/${V}/~new`},a.createElement(t.a,{variant:"primary",id:"yaml-create","data-test":"item-create"},g("public~Create {{label}}",{label:g(P.ConsolePluginModel.label)}))))),n.length?a.createElement(r.a,{"aria-label":"console plugins table",ouiaId:"ConsolePluginsTable"},a.createElement(c.a,null,a.createElement(d.a,null,O.map(({id:e,name:n,sortable:o},t)=>a.createElement(u.a,{key:e,sort:o?{sortBy:C,onSort:E,columnIndex:t}:null},n)))),a.createElement(m.a,null,h.map(({name:e,version:n,description:o,status:t,enabled:l,errorMessage:i,hasCSPViolations:s})=>a.createElement(d.a,{key:e},a.createElement(p.a,{dataLabel:O[0].id},y?e:a.createElement(M.hb,{groupVersionKind:F,name:e,hideIcon:!0})),a.createElement(p.a,{dataLabel:O[1].id},n||L.E),a.createElement(p.a,{dataLabel:O[2].id},o||L.E),a.createElement(p.a,{dataLabel:O[3].id},a.createElement(T,{status:t,errorMessage:i})),a.createElement(p.a,{dataLabel:O[4].id},a.createElement(_,{pluginName:e,enabled:l})),a.createElement(p.a,{dataLabel:O[5].id},a.createElement(x,{hasViolations:null!=s&&s})))))):a.createElement(M.u,{label:g("console-app~Console plugins")})):a.createElement(M.S,null)},R=y?e=>{const[n,o]=Object(w.a)(),t=a.useMemo(()=>o?n.filter(k.o).map(e=>{var n,o,a;return{name:e.metadata.name,version:e.metadata.version,description:null===(a=null===(o=null===(n=e.metadata)||void 0===n?void 0:n.customProperties)||void 0===o?void 0:o.console)||void 0===a?void 0:a.description,enabled:e.enabled,status:e.status,hasCSPViolations:e.hasCSPViolations}}):[],[n,o]);return a.createElement(K,Object.assign({},e,{rows:t,loaded:o}))}:e=>{var n,o;const[t,l]=Object(w.a)(),[i,s]=Object(h.a)({isList:!0,kind:Object(S.Hb)(P.ConsolePluginModel)}),r=a.useMemo(()=>{var n,o,a;return null!==(a=null===(o=null===(n=null==e?void 0:e.obj)||void 0===n?void 0:n.spec)||void 0===o?void 0:o.plugins)&&void 0!==a?a:[]},[null===(o=null===(n=null==e?void 0:e.obj)||void 0===n?void 0:n.spec)||void 0===o?void 0:o.plugins]),c=a.useMemo(()=>l&&s?i.map(e=>{var n,o,a,l,i,s,c,d;const u=null===(n=null==e?void 0:e.metadata)||void 0===n?void 0:n.name,m=r.includes(u),p=t.filter(k.o).find(e=>{var n;return(null===(n=null==e?void 0:e.metadata)||void 0===n?void 0:n.name)===u}),v=t.filter(k.q).find(e=>(null==e?void 0:e.pluginName)===u);return p?{name:null===(o=null==e?void 0:e.metadata)||void 0===o?void 0:o.name,version:null===(a=null==p?void 0:p.metadata)||void 0===a?void 0:a.version,description:null===(s=null===(i=null===(l=null==p?void 0:p.metadata)||void 0===l?void 0:l.customProperties)||void 0===i?void 0:i.console)||void 0===s?void 0:s.description,enabled:m,status:null==p?void 0:p.status,hasCSPViolations:null==p?void 0:p.hasCSPViolations}:{name:null===(c=null==e?void 0:e.metadata)||void 0===c?void 0:c.name,enabled:m,status:null==v?void 0:v.status,errorMessage:"Failed"===(null==v?void 0:v.status)?null==v?void 0:v.errorMessage:void 0,errorCause:"Failed"===(null==v?void 0:v.status)?null===(d=null==v?void 0:v.errorCause)||void 0===d?void 0:d.toString():void 0}}):[],[l,s,i,t,r]);return a.createElement(K,Object.assign({},e,{rows:c,loaded:l&&s}))},H=e=>{const n=Object(g.useLocation)(),o=[M.mc.details(O.d),M.mc.editYaml(),{href:"console-plugins",nameKey:"console-app~Console plugins",component:R}],t=[()=>({labelKey:"console-app~Customize",labelKind:{kind:P.ConsoleOperatorConfigModel.kind},dataTest:"Customize",href:"/cluster-configuration",accessReview:Object(M.Eb)(P.ConsoleOperatorConfigModel,{spec:{name:"cluster"}},"patch")})];return a.createElement(j.a,Object.assign({},e,{kind:D,pages:o,menuActions:t,breadcrumbsFor:()=>Object(E.b)(P.ConsoleOperatorConfigModel.label,n.pathname)}))}},5432:function(e,n,o){"use strict";o.r(n);var a=o(0),t=o(1447),l=o(69),i=o(2256),s=o(5412);n.default=({obj:e})=>{var n,o,r,c;const d=Object(i.a)(),{consoleOperatorConfig:u,consoleOperatorConfigLoaded:m}=Object(s.useConsoleOperatorConfigData)(),p=a.useMemo(()=>{var n;return null===(n=null==e?void 0:e.metadata)||void 0===n?void 0:n.name},[null===(n=null==e?void 0:e.metadata)||void 0===n?void 0:n.name]),v=a.useMemo(()=>d.findDynamicPluginInfo(p),[d,p]),b=a.useMemo(()=>{var e,n;return null!==(n=null===(e=null==u?void 0:u.spec)||void 0===e?void 0:e.plugins)&&void 0!==n?n:[]},[null===(o=null==u?void 0:u.spec)||void 0===o?void 0:o.plugins]);return m?a.createElement(s.ConsolePluginEnabledStatus,{pluginName:p,enabled:s.developmentMode?null!==(r=Object(l.o)(v)&&v.enabled)&&void 0!==r&&r:null!==(c=b.includes(p))&&void 0!==c&&c}):a.createElement(a.Fragment,null,t.a)}},6272:function(e,n,o){"use strict";o.d(n,"b",(function(){return a})),o.d(n,"a",(function(){return t}));o(283);const a=(e,n)=>(e||"").localeCompare(n||""),t=(e,n)=>(e?0:1)-(n?0:1)}}]);
//# sourceMappingURL=consolePluginEnabledStatusDetail-chunk-0331bb90c407a950b59a.min.js.map
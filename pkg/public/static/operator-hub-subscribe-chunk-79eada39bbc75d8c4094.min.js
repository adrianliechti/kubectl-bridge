(window.webpackJsonp=window.webpackJsonp||[]).push([[226,40,62,110,181,224,231,314,317],{4384:function(e,a,t){"use strict";t.r(a),t.d(a,"InstallPlanTableRow",(function(){return _})),t.d(a,"InstallPlansList",(function(){return w})),t.d(a,"InstallPlansPage",(function(){return T})),t.d(a,"NeedInstallPlanPermissions",(function(){return A})),t.d(a,"InstallPlanDetails",(function(){return D})),t.d(a,"InstallPlanPreview",(function(){return F})),t.d(a,"InstallPlanDetailsPage",(function(){return x}));var l=t(0),n=t(80),r=t(19),o=t(54),s=t(18),c=t(61),i=t(255),m=t(16),d=t(7),u=t(31),p=t(14),v=t(13),b=t(972),E=t(40),g=t(131),h=t(5),f=t(773),O=t(8),N=t(15),j=t(125),k=t(146),S=t(6086),C=t(2235),y=t(1405);const P=["pf-v5-c-table__td","pf-v5-c-table__td",s("pf-m-hidden","pf-m-visible-on-sm","pf-v5-u-w-16-on-lg","pf-v5-c-table__td"),s("pf-m-hidden","pf-m-visible-on-lg","pf-v5-c-table__td"),s("pf-m-hidden","pf-m-visible-on-xl","pf-v5-c-table__td"),h.F.columnClass],M=["pf-v5-c-table__td","pf-v5-c-table__td",s("pf-m-hidden","pf-m-visible-on-sm","pf-v5-u-w-16-on-lg","pf-v5-c-table__td"),s("pf-m-hidden","pf-m-visible-on-lg","pf-v5-c-table__td")],_=({obj:e})=>{var a,t;const{t:n}=Object(d.useTranslation)();return l.createElement(l.Fragment,null,l.createElement(E.k,{className:P[0]},l.createElement(h.hb,{kind:Object(O.Hb)(j.InstallPlanModel),namespace:e.metadata.namespace,name:e.metadata.name})),l.createElement(E.k,{className:P[1]},l.createElement(h.hb,{kind:"Namespace",name:e.metadata.namespace})),l.createElement(E.k,{className:P[2]},(r=null!==(t=null===(a=e.status)||void 0===a?void 0:a.phase)&&void 0!==t?t:"Unknown",l.createElement(N.cc,{status:r}))),l.createElement(E.k,{className:P[3]},l.createElement("ul",{className:"pf-v5-c-list pf-m-plain"},e.spec.clusterServiceVersionNames.map(a=>{var t;return l.createElement("li",{key:a},"Complete"===(null===(t=e.status)||void 0===t?void 0:t.phase)?l.createElement(h.hb,{kind:Object(O.Hb)(j.ClusterServiceVersionModel),name:a,namespace:e.metadata.namespace,title:a}):l.createElement(l.Fragment,null,l.createElement(h.fb,{kind:Object(O.Hb)(j.ClusterServiceVersionModel)}),a))}))),l.createElement(E.k,{className:P[4]},(e.metadata.ownerReferences||[]).filter(e=>Object(O.Ib)(e)===Object(O.Hb)(j.SubscriptionModel)).map(a=>l.createElement("ul",{key:a.uid,className:"pf-v5-c-list pf-m-plain"},l.createElement("li",null,l.createElement(h.hb,{kind:Object(O.Hb)(j.SubscriptionModel),name:a.name,namespace:e.metadata.namespace,title:a.uid}))))||l.createElement("span",{className:"text-muted"},n("olm~None"))),l.createElement(E.k,{className:P[5]},l.createElement(h.gb,{actions:h.F.factory.common,kind:Object(O.Hb)(j.InstallPlanModel),resource:e})));var r},I=()=>{const{t:e}=Object(d.useTranslation)();return l.createElement(h.h,{title:e("olm~No InstallPlans found")},e("olm~InstallPlans are created automatically by subscriptions or manually using the CLI."))},w=Object(C.f)(e=>{const{t:a}=Object(d.useTranslation)();return l.createElement(E.j,Object.assign({},e,{"aria-label":a("olm~InstallPlans"),Header:()=>[{title:a("olm~Name"),sortField:"metadata.name",transforms:[o.a],props:{className:P[0]}},{title:a("olm~Namespace"),sortField:"metadata.namespace",transforms:[o.a],props:{className:P[1]}},{title:a("olm~Status"),sortField:"status.phase",transforms:[o.a],props:{className:P[2]}},{title:a("olm~Components"),props:{className:P[3]}},{title:a("olm~Subscriptions"),props:{className:P[4]}},{title:"",props:{className:P[5]}}],Row:_,EmptyMsg:I}))}),T=e=>{const{t:a}=Object(d.useTranslation)(),t=Object(p.useParams)(),n=e.namespace||(null==t?void 0:t.ns);return l.createElement(E.i,Object.assign({},e,{namespace:n,resources:[{kind:Object(O.Hb)(j.InstallPlanModel),namespace:n,namespaced:!0,prop:"installPlan"},{kind:Object(O.Hb)(j.OperatorGroupModel),namespace:n,namespaced:!0,prop:"operatorGroup"}],flatten:e=>m.a(e.installPlan,"data",[]),title:a("olm~InstallPlans"),showTitle:!1,ListComponent:w}))},V=(e,a)=>e?null==a?void 0:a.username:f.b.name(),A=({installPlan:e})=>{const a=Object(N.Fe)(N.O.OPENSHIFT),t=Object(u.useSelector)(v.J),[r,o]=l.useState(V(a,t));l.useEffect(()=>{o(V(a,t))},[a,t]);const{t:s}=Object(d.useTranslation)(),c=Object(O.l)(Object(O.Db)(e));return l.createElement(n.a,{variant:"info",isInline:!0,title:s("olm~Missing sufficient privileges for manual InstallPlan approval")},r?s('olm~User "{{user}}" does not have permissions to patch resource InstallPlans in API group "{{apiGroup}}" in the namespace "{{namespace}}."',{user:r,apiGroup:c,namespace:e.metadata.namespace}):s('olm~User does not have permissions to patch resource InstallPlans in API group "{{apiGroup}}" in the namespace "{{namespace}}."',{apiGroup:c,namespace:e.metadata.namespace}))},D=({obj:e})=>{var a,t,n;const{t:o}=Object(d.useTranslation)(),s=e.spec.approval===k.e.Manual&&!1===e.spec.approved,m=Object(h.Dc)({group:j.InstallPlanModel.apiGroup,resource:j.InstallPlanModel.plural,namespace:e.metadata.namespace,verb:"patch"});return l.createElement(l.Fragment,null,s&&m&&l.createElement("div",{className:"co-m-pane__body"},l.createElement(h.D,{title:o("olm~Review manual InstallPlan")},l.createElement("p",null,o("olm~Inspect the requirements for the components specified in this InstallPlan before approving.")),l.createElement(p.Link,{to:`/k8s/ns/${e.metadata.namespace}/${Object(O.Hb)(j.InstallPlanModel)}/${e.metadata.name}/components`},l.createElement(r.a,{variant:"primary"},o("olm~Preview InstallPlan"))))),s&&!m&&l.createElement("div",{className:"co-m-pane__body"},l.createElement(A,{installPlan:e})),l.createElement("div",{className:"co-m-pane__body"},l.createElement(h.ob,{text:o("olm~InstallPlan details")}),l.createElement("div",{className:"co-m-pane__body-group"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-6"},l.createElement(h.lb,{resource:e,showAnnotations:!1})),l.createElement("div",{className:"col-sm-6"},l.createElement("dl",{className:"co-m-pane__details"},l.createElement("dt",null,o("olm~Status")),l.createElement("dd",null,l.createElement(N.cc,{status:null!==(t=null===(a=e.status)||void 0===a?void 0:a.phase)&&void 0!==t?t:o("olm~Unknown")})),l.createElement("dt",null,o("olm~Components")),(e.spec.clusterServiceVersionNames||[]).map(a=>l.createElement("dd",{key:a},"Complete"===e.status.phase?l.createElement(h.hb,{kind:Object(O.Hb)(j.ClusterServiceVersionModel),name:a,namespace:e.metadata.namespace,title:a}):l.createElement(l.Fragment,null,l.createElement(h.fb,{kind:Object(O.Hb)(j.ClusterServiceVersionModel)}),a))),l.createElement("dt",null,o("olm~CatalogSources")),(e=>{var a;return i.a((null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.plan)||[],(e,{resource:{sourceName:a,sourceNamespace:t}})=>e.add(Object(c.fromJS)({sourceName:a,sourceNamespace:t})),Object(c.Set)()).toJS()})(e).map(({sourceName:e,sourceNamespace:a})=>l.createElement("dd",{key:`${a}-${e}`},l.createElement(h.hb,{kind:Object(O.Hb)(j.CatalogSourceModel),name:e,namespace:a,title:e})))))))),l.createElement("div",{className:"co-m-pane__body"},l.createElement(h.ob,{text:o("olm~Conditions")}),l.createElement(b.b,{conditions:null===(n=e.status)||void 0===n?void 0:n.conditions})))},F=({obj:e,hideApprovalBlock:a})=>{var t,n;const{t:o}=Object(d.useTranslation)(),[s,i]=l.useState(e.spec.approval===k.e.Manual&&!1===e.spec.approved),m=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.ownerReferences.find(e=>Object(O.Ib)(e)===Object(O.Hb)(j.SubscriptionModel)),u=(null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.plan)||[],p=u.reduce((e,a)=>e.update(a.resolving,[],e=>e.concat([a])),Object(c.Map)()).toArray(),v=Object(h.Dc)({group:j.InstallPlanModel.apiGroup,resource:j.InstallPlanModel.plural,namespace:e.metadata.namespace,verb:"patch"});return u.length>0?l.createElement(l.Fragment,null,s&&!a&&!v&&l.createElement("div",{className:"co-m-pane__body"},l.createElement(A,{installPlan:e})),s&&!a&&v&&l.createElement("div",{className:"co-m-pane__body"},l.createElement(h.D,{title:o("olm~Review manual InstallPlan")},l.createElement(y.a,{installPlan:e}),l.createElement("div",{className:"pf-v5-c-form"},l.createElement("div",{className:"pf-v5-c-form__actions"},l.createElement(r.a,{variant:"primary",isDisabled:!s,onClick:()=>Object(O.pb)(j.InstallPlanModel,e,[{op:"replace",path:"/spec/approved",value:!0}]).then(()=>i(!1)).catch(e=>Object(g.s)({error:e.toString()}))},o(s?"olm~Approve":"olm~Approved")),l.createElement(r.a,{variant:"secondary",isDisabled:!1,onClick:()=>h.Vb.push(`/k8s/ns/${e.metadata.namespace}/${Object(O.Hb)(j.SubscriptionModel)}/${m.name}?showDelete=true`)},o("olm~Deny")))))),p.map(a=>l.createElement("div",{key:a[0].resolving,className:"co-m-pane__body"},l.createElement(h.ob,{text:a[0].resolving}),l.createElement("div",{className:"co-table-container"},l.createElement("table",{className:"pf-v5-c-table pf-m-compact pf-m-border-rows"},l.createElement("thead",{className:"pf-v5-c-table__thead"},l.createElement("tr",{className:"pf-v5-c-table__tr"},l.createElement("th",{className:M[0]},o("olm~Name")),l.createElement("th",{className:M[1]},o("olm~Kind")),l.createElement("th",{className:M[2]},o("olm~Status")),l.createElement("th",{className:M[3]},o("olm~API version")))),l.createElement("tbody",{className:"pf-v5-c-table__tbody"},a.map(a=>{return l.createElement("tr",{key:`${Object(y.m)(a.resource)}-${a.resource.name}`,className:"pf-v5-c-table__tr"},l.createElement("td",{className:M[0]},["Present","Created"].includes(a.status)?l.createElement(h.hb,{kind:Object(y.m)(a.resource),namespace:e.metadata.namespace,name:a.resource.name,title:a.resource.name}):l.createElement(l.Fragment,null,l.createElement(h.fb,{kind:Object(y.m)(a.resource)}),l.createElement(r.a,{type:"button",onClick:()=>Object(S.a)({stepResource:a.resource}),variant:"link"},a.resource.name))),l.createElement("td",{className:M[1]},a.resource.kind),l.createElement("td",{className:M[2]},(t=a.status,l.createElement(l.Fragment,null,"Present"===t&&l.createElement(N.X,{className:"co-icon-space-r"}),"Created"===t&&l.createElement(N.X,{className:"co-icon-space-r"}),t))),l.createElement("td",{className:M[3]},Object(O.o)(Object(y.m)(a.resource))));var t}))))))):l.createElement("div",{className:"co-m-pane__body"},l.createElement(h.h,{title:o("olm~No components resolved")},o("olm~This InstallPlan has not been fully resolved yet.")))},x=e=>{const a=Object(p.useParams)();return l.createElement(E.a,Object.assign({},e,{namespace:a.ns,kind:Object(O.Hb)(j.InstallPlanModel),name:a.name,pages:[h.mc.details(D),h.mc.editYaml(),{href:"components",nameKey:"olm~Components",component:F}],menuActions:[...h.F.getExtensionsActionsForKind(j.InstallPlanModel),...h.F.factory.common]}))};T.displayName="InstallPlansPage"},4385:function(e,a,t){"use strict";t.r(a),t.d(a,"ClusterServiceVersionTableRow",(function(){return Oe})),t.d(a,"SubscriptionTableRow",(function(){return Ne})),t.d(a,"ClusterServiceVersionList",(function(){return Ce})),t.d(a,"ClusterServiceVersionsPage",(function(){return ye})),t.d(a,"MarkdownView",(function(){return Pe})),t.d(a,"CRDCard",(function(){return Me})),t.d(a,"CRDCardRow",(function(){return _e})),t.d(a,"ClusterServiceVersionDetails",(function(){return we})),t.d(a,"CSVSubscription",(function(){return Te})),t.d(a,"ClusterServiceVersionDetailsPage",(function(){return Ve}));var l=t(0),n=t(353),r=t(19),o=t(192),s=t(295),c=t(296),i=t(4345),m=t(80),d=t(6023),u=t(615),p=t(54),v=t(8241),b=t(18),E=t(373),g=t(22),h=t(4440),f=t(16),O=t(2328),N=t(4387),j=t(137),k=t(7),S=t(14),C=t(13),y=t(83),P=t(972),M=t(409),_=t(40),I=t(5),w=t(987),T=t(108),V=t(10),A=t(8),D=t(15),F=t(198),x=t(2269),L=t(330),R=t(30),H=t(6352),G=t(473),U=t(197),z=t(474),$=t(125),q=t(1439),K=t(146),B=t(2241),W=t(6084),J=t(6085),X=t(6353),Y=t(5893),Z=t(5737),Q=t(6037),ee=t(4388),ae=t(2235),te=t(1947),le=t(5411),ne=t(4386),re=t(1405),oe=function(e,a){var t={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&a.indexOf(l)<0&&(t[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)a.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(t[l[n]]=e[l[n]])}return t};const se=e=>Object(A.Db)(e)===Object(A.Hb)($.ClusterServiceVersionModel),ce=b("pf-m-hidden","pf-m-visible-on-sm"),ie=b("pf-m-hidden","pf-m-visible-on-lg"),me=b("pf-m-hidden","pf-m-visible-on-2xl"),de=b("pf-m-hidden","pf-m-visible-on-xl"),ue=e=>E.a(e)?null:{labelKey:"olm~Edit Subscription",href:Object(I.uc)($.SubscriptionModel,e.metadata.name,e.metadata.namespace)+"/yaml"},pe=(e,a)=>E.a(e)?null:{labelKey:"olm~Uninstall Operator",callback:()=>Object(Q.a)({k8sKill:A.lb,k8sGet:A.kb,k8sPatch:A.pb,subscription:e,csv:a,blocking:!0}),accessReview:{group:$.SubscriptionModel.apiGroup,resource:$.SubscriptionModel.plural,name:e.metadata.name,namespace:e.metadata.namespace,verb:"delete"}},ve=(e,a)=>g.a(a)?[I.F.factory.Delete]:[()=>ue(a),()=>pe(a,e)],be=({muted:e=!1,subscription:a})=>{const{t:t}=Object(k.useTranslation)();if(!a)return null;if(Object(B.b)(a))return l.createElement(ne.UpgradeApprovalLink,{subscription:a});const n=Object(q.b)(a);return l.createElement("span",{className:e?"text-muted":"co-icon-and-text"},e?n.title:l.createElement(D.cc,{status:n.status||t("olm~Unknown")}))},Ee=({obj:e,subscription:a})=>{var t;const n=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.phase;return e.metadata.deletionTimestamp?l.createElement("span",{className:"co-icon-and-text"},l.createElement(D.cc,{status:K.b.CSVPhaseDeleting})):n?l.createElement(l.Fragment,null,l.createElement("span",{className:"co-icon-and-text"},l.createElement(D.cc,{status:n})),l.createElement(be,{muted:!0,subscription:a})):null},ge=({obj:e})=>{var a;const{t:t}=Object(k.useTranslation)(),o=(null===(a=Object(ae.i)(e))||void 0===a?void 0:a.split(","))||[];if(Object(W.a)(e))return l.createElement(l.Fragment,null,l.createElement(I.hb,{kind:"Namespace",title:e.metadata.namespace,name:e.metadata.namespace}),l.createElement("span",{className:"text-muted"},e.status.message));switch(o.length){case 0:return t("olm~All Namespaces");case 1:return o[0]?l.createElement(I.hb,{kind:"Namespace",title:o[0],name:o[0]}):t("olm~All Namespaces");default:return l.createElement(n.a,{headerContent:t("olm~Managed Namespaces"),bodyContent:o.map(e=>l.createElement(I.hb,{kind:"Namespace",title:e,name:e}))},l.createElement(r.a,{variant:"link",isInline:!0},t("olm~{{count}} Namespaces",{count:o.length})))}},he=({csvPlugins:e,trusted:a})=>{const t={kind:Object(A.Hb)(V.ConsoleOperatorConfigModel),isList:!1,name:R.p},[n]=Object(T.a)(t),{t:o}=Object(k.useTranslation)(),[s]=Object(C.hc)({group:V.ConsoleOperatorConfigModel.apiGroup,resource:V.ConsoleOperatorConfigModel.plural,verb:"patch",name:R.p}),c=e.length;return l.createElement(l.Fragment,null,n&&s&&l.createElement("dl",{className:"co-clusterserviceversion-details__field"},l.createElement("dt",null,o("olm~Console plugin",{count:c})),e.map(e=>l.createElement("dd",{key:e,className:"co-clusterserviceversion-details__field-description"},c>1&&l.createElement("strong",{className:"text-muted"},o("olm~{{plugin}}:",{pluginName:e})," "),l.createElement(r.a,{"data-test":"edit-console-plugin",type:"button",isInline:!0,onClick:()=>Object(x.a)({consoleOperatorConfig:n,csvPluginsCount:c,pluginName:e,trusted:a}),variant:"link"},l.createElement(l.Fragment,null,Object(U.X)(n,e)?o("olm~Enabled"):o("olm~Disabled")," ",l.createElement(u.a,{className:"co-icon-space-l pf-v5-c-button-icon--plain"})))))))},fe=({csv:e,csvPlugins:a})=>{var t,o;const s={kind:Object(A.Hb)(V.ConsoleOperatorConfigModel),isList:!1,name:R.p},[c]=Object(T.a)(s),{t:i}=Object(k.useTranslation)(),[m]=Object(C.hc)({group:V.ConsoleOperatorConfigModel.apiGroup,resource:V.ConsoleOperatorConfigModel.plural,verb:"patch",name:R.p}),d=!(null===(o=null===(t=null==c?void 0:c.spec)||void 0===t?void 0:t.plugins)||void 0===o?void 0:o.length)||a.some(e=>!Object(U.X)(c,e));return c&&m&&d&&l.createElement(n.a,{headerContent:l.createElement("div",null,i("olm~Console plugin available")),bodyContent:l.createElement("div",null,l.createElement("p",null,i("olm~To let this operator provide a custom interface and run its own code in your console, enable its console plugin in the operator details.")),l.createElement(S.Link,{to:Object(I.sc)(e,Object(A.Db)(e))},i("olm~View operator details")))},l.createElement(r.a,{variant:"link",isInline:!0},i("olm~Plugin available")))},Oe=Object(F.e)(({activeNamespace:e,obj:a,subscription:t,catalogSourceMissing:n})=>{var r,o,s,c;const{displayName:i,provider:m,version:d}=null!==(r=a.spec)&&void 0!==r?r:{},{t:u}=Object(k.useTranslation)(),p=null!==(o=Object(ae.d)(a))&&void 0!==o?o:"",[v]=null!==(s=a.spec.icon)&&void 0!==s?s:[],b=Object(X.a)(a),E=Object(re.j)(a),f=Object(te.b)(null===(c=null==a?void 0:a.metadata)||void 0===c?void 0:c.annotations),{deprecatedPackage:O}=Object(Z.d)(t);return l.createElement(l.Fragment,null,l.createElement(_.k,{className:""},l.createElement(S.Link,{to:b,className:"co-clusterserviceversion-link","data-test-operator-row":i},l.createElement(Y.a,{icon:v,displayName:i,version:d,provider:m}))),e===D.c?l.createElement(_.k,{className:""},l.createElement(I.hb,{kind:"Namespace",title:p,name:p})):null,l.createElement(_.k,{className:ce},l.createElement(ge,{obj:a})),l.createElement(_.k,{className:ie},l.createElement("div",{className:"co-clusterserviceversion-row__status"},n?l.createElement(ne.SourceMissingStatus,null):l.createElement(Ee,{obj:a,subscription:t})),f.length>0&&l.createElement(fe,{csv:a,csvPlugins:f}),O.deprecation&&l.createElement(Z.b,{className:"pf-v5-u-mt-xs",deprecation:O.deprecation})),l.createElement(_.k,{className:me},null==a.status?"-":l.createElement(I.xb,{timestamp:a.status.lastUpdateTime})),l.createElement(_.k,{className:de},g.a(E)?"-":h.a(E,4).map(e=>l.createElement("div",{key:Object(re.l)(e)},l.createElement(S.Link,{to:`${b}/${Object(re.l)(e)}`,title:e.name},e.displayName||e.kind))),E.length>4&&l.createElement(S.Link,{to:b,title:u("olm~View {{numAPIs}} more...",{numAPIs:E.length-4})},u("olm~View {{numAPIs}} more...",{numAPIs:E.length-4}))),l.createElement(_.k,{className:I.F.columnClass},l.createElement(I.gb,{resource:a,kind:Object(A.Db)(a),actions:ve(a,t)})))}),Ne=({activeNamespace:e,catalogSourceMissing:a,obj:t})=>{var n;const{t:r}=Object(k.useTranslation)(),o=null===(n=null==t?void 0:t.spec)||void 0===n?void 0:n.name,s=[I.F.factory.Edit,()=>pe(t)],c=Object(D.ed)(t),i=Object(I.sc)(t,Object(A.Hb)($.SubscriptionModel));return l.createElement(l.Fragment,null,l.createElement(_.k,{className:""},l.createElement(S.Link,{to:i},l.createElement(Y.a,{icon:null,displayName:o,version:null,provider:null}))),e===D.c?l.createElement(_.k,{className:""},l.createElement(I.hb,{kind:"Namespace",title:c,name:c})):null,l.createElement(_.k,{className:ce},l.createElement("span",{className:"text-muted"},r("olm~None"))),l.createElement(_.k,{className:ie},a?l.createElement(ne.SourceMissingStatus,null):l.createElement(be,{subscription:t})),l.createElement(_.k,{className:me},null==t.status?"-":l.createElement(I.xb,{timestamp:t.status.lastUpdated})),l.createElement(_.k,{className:de},l.createElement("span",{className:"text-muted"},r("olm~None"))),l.createElement(_.k,{className:I.F.columnClass},l.createElement(I.gb,{resource:t,kind:Object(A.Db)(t),actions:s})))},je=({obj:e,customData:a})=>{const{catalogSources:t,subscriptions:n,activeNamespace:r}=a,o=se(e)?Object(q.c)(n,e):e,s=!g.a(t)&&!Object(ne.catalogSourceForSubscription)(t,o)&&!(e=>"packageserver"===e.metadata.name&&"openshift-operator-lifecycle-manager"===e.metadata.namespace)(e);return se(e)?l.createElement(Oe,{activeNamespace:r,catalogSourceMissing:s,obj:e,subscription:o}):l.createElement(Ne,{activeNamespace:r,catalogSourceMissing:s,obj:o})},ke=()=>{const{t:e}=Object(k.useTranslation)();return l.createElement(I.h,{title:e("olm~No Operators found")})},Se=()=>{const{t:e}=Object(k.useTranslation)(),a=Object(H.a)(),t=e("olm~No Operators are available for project {{project}}.",{project:a}),n=e("olm~No Operators are available."),r=l.createElement(l.Fragment,null,l.createElement("div",null,a===D.c?n:t),l.createElement("div",null,l.createElement(k.Trans,{ns:"olm"},"Discover and install Operators from the ",l.createElement("a",{href:"/operatorhub"},"OperatorHub"),".")));return l.createElement(I.h,{title:e("olm~No Operators found")},r)},Ce=e=>{var{subscriptions:a,catalogSources:t,data:n}=e,r=oe(e,["subscriptions","catalogSources","data"]);const{t:o}=Object(k.useTranslation)(),s=Object(H.a)(),c={title:o("olm~Name"),sortField:"metadata.name",transforms:[p.a],props:{className:""}},i={title:o("olm~Namespace"),sortFunc:"getOperatorNamespace",transforms:[p.a],props:{className:""}},m={title:o("olm~Managed Namespaces"),sortFunc:"formatTargetNamespaces",transforms:[p.a,v.a],props:{className:ce}},d={title:o("olm~Status"),props:{className:ie}},u={title:o("olm~Last updated"),props:{className:me}},b={title:o("olm~Provided APIs"),props:{className:de}},E={title:"",props:{className:I.F.columnClass}},g=s===D.c,h=l.useMemo(()=>{var e,l;return{catalogoperators:null!==(e=null==t?void 0:t.data)&&void 0!==e?e:[],subscriptions:null!==(l=null==a?void 0:a.data)&&void 0!==l?l:[],activeNamespace:s}},[s,t,a]);return l.createElement("div",{className:"co-installed-operators"},l.createElement(_.j,Object.assign({data:((e,a)=>e.filter(e=>{return t=e,Object(A.Db)(t)===Object(A.Hb)($.SubscriptionModel)||(a?!Object(W.a)(e)&&Object(W.b)(e):window.SERVER_FLAGS.copiedCSVsDisabled&&e.metadata.namespace===z.e&&s!==z.e?Object(W.a)(e)&&Object(W.b)(e):Object(W.b)(e));var t}))(n,g)},r,{"aria-label":o("olm~Installed Operators"),Header:g?()=>[c,i,m,d,u,b,E]:()=>[c,m,d,u,b,E],Row:je,EmptyMsg:ke,NoDataEmptyMsg:Se,virtualize:!0,customData:h,customSorts:{formatTargetNamespaces:e=>{var a,t;if("Subscription"===e.kind)return o("olm~None");if(Object(W.a)(e))return e.metadata.namespace;const l=null!==(t=null===(a=Object(ae.i)(e))||void 0===a?void 0:a.split(","))&&void 0!==t?t:[];switch(l.length){case 0:return o("olm~All Namespaces");case 1:return l[0];default:return o("olm~{{count}} Namespaces",{count:l.length})}},getOperatorNamespace:e=>{const a=Object(ae.d)(e);return null!=a?a:Object(D.ed)(e)}}})))},ye=e=>{const{t:a}=Object(k.useTranslation)(),[t]=Object(C.hc)({group:$.SubscriptionModel.apiGroup,resource:$.SubscriptionModel.plural,verb:"list"}),n=a("olm~Installed Operators"),r=Object(I.Qb)(I.Lb.operators),o=l.createElement(l.Fragment,null,a("olm~Installed Operators are represented by ClusterServiceVersions within this Namespace."),!Object(I.hc)()&&l.createElement(k.Trans,{ns:"olm"}," ","For more information, see the"," ",l.createElement(I.z,{href:r},"Understanding Operators documentation"),". Or create an Operator and ClusterServiceVersion using the"," ",l.createElement(I.z,{href:I.n},"Operator SDK"),"."));return l.createElement(l.Fragment,null,l.createElement(j.a,null,l.createElement("title",null,n)),l.createElement(_.i,Object.assign({},e,{resources:[...!z.f.includes(e.namespace)&&window.SERVER_FLAGS.copiedCSVsDisabled?[{kind:Object(A.Hb)($.ClusterServiceVersionModel),namespace:z.e,prop:"globalClusterServiceVersions"}]:[],{kind:Object(A.Hb)($.ClusterServiceVersionModel),namespace:e.namespace,prop:"clusterServiceVersions"},{kind:Object(A.Hb)($.SubscriptionModel),prop:"subscriptions",namespace:t?void 0:e.namespace,optional:!0},{kind:Object(A.Hb)($.CatalogSourceModel),prop:"catalogSources",optional:!0}],title:n,flatten:({globalClusterServiceVersions:a,clusterServiceVersions:t,subscriptions:l})=>{var n,r,o;return[...null!==(n=null==a?void 0:a.data)&&void 0!==n?n:[],...null!==(r=null==t?void 0:t.data)&&void 0!==r?r:[],...(null!==(o=null==l?void 0:l.data)&&void 0!==o?o:[]).filter(a=>["",a.metadata.namespace].includes(e.namespace||"")&&E.a(f.a(a,"status.installedCSV")))].filter((e,a,t)=>se(e)||O.a(t.find(({metadata:a})=>{var t,l;return[null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.currentCSV,null===(l=null==e?void 0:e.spec)||void 0===l?void 0:l.startingCSV].includes(null==a?void 0:a.name)})))},namespace:e.namespace,ListComponent:Ce,helpText:o,textFilter:"cluster-service-version"})))},Pe=e=>l.createElement(I.c,Object.assign({loader:()=>Promise.resolve().then(t.bind(null,2237)).then(e=>e.SyncMarkdownView)},e)),Me=e=>{var a,t,n,{csv:r,crd:m,required:u}=e,p=oe(e,["csv","crd","required"]);const{t:v}=Object(k.useTranslation)(),b=Object(re.l)(m),[E]=Object(G.a)(b),g=null!==(a=p.canCreate)&&void 0!==a?a:null===(n=null===(t=null==E?void 0:E.verbs)||void 0===t?void 0:t.includes)||void 0===n?void 0:n.call(t,"create"),h=l.useMemo(()=>r?`/k8s/ns/${r.metadata.namespace}/${$.ClusterServiceVersionModel.plural}/${r.metadata.name}/${b}/~new`:null,[r,b]);return l.createElement(o.a,null,l.createElement(s.a,null,l.createElement("span",{className:"co-resource-item"},l.createElement(I.hb,{kind:Object(re.l)(m),title:m.name,linkTo:!1,displayName:m.displayName||m.kind}),u&&l.createElement(C.v,{badgeAlt:!0},l.createElement(C.A,{icon:l.createElement(L.f,null),title:v("olm~Required")})))),l.createElement(c.a,null,l.createElement(Pe,{content:m.description,truncateContent:!0})),g&&h&&l.createElement(I.eb,{model:E,namespace:r.metadata.namespace},l.createElement(i.a,null,l.createElement(S.Link,{to:h},l.createElement(d.a,{className:"co-icon-space-r"}),v("olm~Create instance")))))},_e=({csv:e,providedAPIs:a})=>{const{t:t}=Object(k.useTranslation)();return l.createElement("div",{className:"co-crd-card-row"},a.length?a.map(a=>l.createElement(Me,{key:Object(re.l)(a),crd:a,csv:e})):l.createElement("span",{className:"text-muted"},t("olm~No Kubernetes APIs are being provided by this Operator.")))},Ie=e=>{const{t:a}=Object(k.useTranslation)(),{initializationResource:t,csv:n}=e,r=null==t?void 0:t.kind,o=Object(A.Db)(t),[s]=Object(G.a)(o),[c,i]=Object(T.a)({kind:o,namespaced:!0,isList:!0}),d=Object(C.ic)({group:null==s?void 0:s.apiGroup,resource:null==s?void 0:s.plural,namespace:(null==s?void 0:s.namespaced)?(null==t?void 0:t.metadata.namespace)||n.metadata.namespace:null,verb:"create"});return i&&0===c.length&&d?l.createElement(m.a,{isInline:!0,className:"co-alert",variant:"warning",title:a("olm~{{initializationResourceKind}} required",{initializationResourceKind:r})},l.createElement("p",null,a("olm~Create a {{initializationResourceKind}} instance to use this Operator.",{initializationResourceKind:r})),l.createElement(le.CreateInitializationResourceButton,{obj:e.csv,initializationResource:t})):null},we=e=>{var a,t,o,s,c;const{t:i}=Object(k.useTranslation)(),{spec:d,metadata:u,status:p}=e.obj,{subscription:v}=e.customData,b=Object(re.j)(e.obj),{"marketplace.openshift.io/support-workflow":E,"operatorframework.io/initialization-resource":h}=u.annotations||{},f=l.useMemo(()=>{if(h)try{return JSON.parse(h)}catch(e){console.error("Error while parseing CSV initialization resource JSON",e.message)}return null},[h]),O=l.useMemo(()=>{if(E)try{const e=new URL(E);return e.searchParams.set("utm_source","openshift_console"),e.toString()}catch(e){console.error("Error while setting utm_source to support workflow URL",e.message)}return null},[E]),j=Object(te.b)(null==u?void 0:u.annotations),S=N.a(null===(t=null===(a=null==d?void 0:d.install)||void 0===a?void 0:a.spec)||void 0===t?void 0:t.permissions,"serviceAccountName"),{deprecatedPackage:C,deprecatedChannel:y,deprecatedVersion:M}=Object(Z.d)(v);return l.createElement(l.Fragment,null,l.createElement(I.nb,null),l.createElement("div",{className:"co-m-pane__body"},l.createElement("div",{className:"co-m-pane__body-group"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-9"},p&&p.phase===K.b.CSVPhaseFailed&&l.createElement(m.a,{isInline:!0,className:"co-alert",variant:"danger",title:i("olm~Operator failed")},p.reason===K.a.CSVReasonCopied?l.createElement(l.Fragment,null,l.createElement(k.Trans,{t:i,ns:"olm"},"This Operator was copied from another namespace. For the reason it failed, see"," ",l.createElement(I.hb,{name:u.name,kind:Object(A.Hb)($.ClusterServiceVersionModel),namespace:Object(ae.d)(e.obj),hideIcon:!0,inline:!0}))):p.message),f&&l.createElement(Ie,{initializationResource:f,csv:e.obj}),(C.deprecation||y.deprecation||M.deprecation)&&l.createElement(Z.a,{deprecatedPackage:C,deprecatedChannel:y,deprecatedVersion:M,dismissible:!0}),l.createElement(I.ob,{text:i("olm~Provided APIs")}),l.createElement(_e,{csv:e.obj,providedAPIs:b}),l.createElement(I.ob,{text:i("olm~Description")}),l.createElement(Pe,{content:d.description||i("olm~Not available")})),l.createElement("div",{className:"col-sm-3"},l.createElement("dl",{className:"co-clusterserviceversion-details__field"},l.createElement("dt",null,i("olm~Provider")),l.createElement("dd",null,d.provider&&d.provider.name?d.provider.name:i("olm~Not available")),O&&l.createElement(l.Fragment,null,l.createElement("dt",null,i("olm~Support")),l.createElement("dd",null,l.createElement(I.z,{href:O,text:i("olm~Get support")}))),l.createElement("dt",null,i("olm~Created at")),l.createElement("dd",null,l.createElement(I.xb,{timestamp:u.creationTimestamp}))),j.length>0&&v&&l.createElement(he,{csvPlugins:j,trusted:Object(B.a)(null===(o=null==v?void 0:v.spec)||void 0===o?void 0:o.source)}),l.createElement("dl",{className:"co-clusterserviceversion-details__field"},l.createElement("dt",null,i("olm~Links")),d.links&&d.links.length>0?d.links.map(e=>l.createElement("dd",{key:e.url,style:{display:"flex",flexDirection:"column"}},e.name," ",l.createElement(I.z,{href:e.url,text:e.url||"-",additionalClassName:"co-break-all"}))):l.createElement("dd",null,i("olm~Not available"))),l.createElement("dl",{className:"co-clusterserviceversion-details__field"},l.createElement("dt",null,i("olm~Maintainers")),d.maintainers&&d.maintainers.length>0?d.maintainers.map(e=>l.createElement("dd",{key:e.email,style:{display:"flex",flexDirection:"column"}},e.name," ",l.createElement("a",{href:"mailto:"+e.email,className:"co-break-all"},e.email||"-"))):l.createElement("dd",null,i("olm~Not available"))))))),l.createElement("div",{className:"co-m-pane__body"},l.createElement(I.ob,{text:i("olm~ClusterServiceVersion details")}),l.createElement("div",{className:"co-m-pane__body-group"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-6"},l.createElement(I.lb,{resource:e.obj},l.createElement("dt",null,l.createElement(n.a,{headerContent:l.createElement("div",null,i("olm~Managed Namespaces")),bodyContent:l.createElement("div",null,i("olm~Operands in this Namespace are managed by the Operator.")),maxWidth:"30rem"},l.createElement(r.a,{variant:"plain",className:"details-item__popover-button"},i("olm~Managed Namespaces")))),l.createElement("dd",null,l.createElement(ge,{obj:e.obj})))),l.createElement("div",{className:"col-sm-6"},l.createElement("dt",null,i("olm~Status")),l.createElement("dd",null,l.createElement(D.cc,{status:p?p.phase:i("olm~Unknown")})),l.createElement("dt",null,i("olm~Status reason")),l.createElement("dd",null,p?p.message:i("olm~Unknown")),!g.a(null===(s=d.install.spec)||void 0===s?void 0:s.deployments)&&l.createElement(l.Fragment,null,l.createElement("dt",null,i("olm~Operator Deployments")),d.install.spec.deployments.map(({name:a})=>l.createElement("dd",{key:a},l.createElement(I.hb,{name:a,kind:"Deployment",namespace:Object(ae.d)(e.obj)})))),!g.a(S)&&l.createElement(l.Fragment,null,l.createElement("dt",null,i("olm~Operator ServiceAccounts")),S.map(({serviceAccountName:a})=>l.createElement("dd",{key:a,"data-service-account-name":a},l.createElement(I.hb,{name:a,kind:"ServiceAccount",namespace:Object(ae.d)(e.obj)})))),l.createElement("dt",null,i("olm~OperatorGroup")),l.createElement("dd",null,Object(ae.c)(e.obj)?l.createElement(I.hb,{name:Object(ae.c)(e.obj),namespace:Object(ae.d)(e.obj),kind:Object(A.Hb)($.OperatorGroupModel)}):"-"))))),l.createElement("div",{className:"co-m-pane__body"},l.createElement(I.ob,{text:i("olm~Conditions")}),l.createElement(P.b,{conditions:(null!==(c=null==p?void 0:p.conditions)&&void 0!==c?c:[]).map(e=>Object.assign(Object.assign({},e),{type:e.phase,status:"True"})),type:P.a.ClusterServiceVersion})))},Te=e=>{var{obj:a,customData:t}=e,n=oe(e,["obj","customData"]);const{t:r}=Object(k.useTranslation)(),{subscription:o,subscriptions:s,subscriptionsLoaded:c,subscriptionsLoadError:i}=null!=t?t:{};return l.createElement(I.wb,{EmptyMsg:()=>l.createElement(I.h,{title:r("olm~No Operator Subscription")},r("olm~This Operator will not receive updates.")),loaded:c,loadError:i,data:o},l.createElement(ne.SubscriptionDetails,Object.assign({},n,{obj:o,clusterServiceVersions:[a],subscriptions:s})))},Ve=e=>{const{t:a}=Object(k.useTranslation)(),t=Object(S.useParams)(),n=Object(S.useLocation)(),[r,o,s]=Object(J.a)(t.name,t.ns),c=Object(ae.d)(r),[i,m,d]=Object(T.a)(c?{isList:!0,groupVersionKind:Object(y.getGroupVersionKindForModel)($.SubscriptionModel),namespace:c,optional:!0}:null),[u]=Object(C.hc)({group:null===$.InstallPlanModel||void 0===$.InstallPlanModel?void 0:$.InstallPlanModel.apiGroup,resource:null===$.InstallPlanModel||void 0===$.InstallPlanModel?void 0:$.InstallPlanModel.plural,verb:"list"}),p=l.useMemo(()=>(null!=i?i:[]).find(e=>{var a;return e.status.installedCSV===(null===(a=null==r?void 0:r.metadata)||void 0===a?void 0:a.name)}),[r,i]),v=l.useCallback(p?()=>[ue(p),pe(p,r)]:()=>[I.F.factory.Delete($.ClusterServiceVersionModel,r)],[p]),{deprecatedPackage:b}=Object(Z.d)(p),E=l.useCallback(e=>{const a=Object(re.j)(e);return[I.mc.details(we),I.mc.editYaml(),{href:"subscription",nameKey:"olm~Subscription",component:Te},I.mc.events(M.ResourceEventStream),...a.length>1?[{href:"instances",nameKey:"olm~All instances",component:ee.ProvidedAPIsPage}]:[],...a.map(a=>({href:Object(re.l)(a),name:["Details","YAML","Subscription","Events"].includes(a.displayName)?a.displayName+" Operand":a.displayName||a.kind,component:ee.ProvidedAPIPage,pageData:{csv:e,kind:Object(re.l)(a)}}))]},[]);return l.createElement(_.a,Object.assign({},e,{obj:{data:r,loaded:o,loadError:s},customData:{subscriptions:i,subscription:p,subscriptionsLoaded:m,subscriptionsLoadError:d},breadcrumbsFor:()=>[{name:a("olm~Installed Operators"),path:Object(w.b)(t)},{name:a("olm~Operator details"),path:n.pathname}],resources:[{kind:Object(A.Hb)($.PackageManifestModel),isList:!0,prop:"packageManifests"},Object.assign({kind:Object(A.Hb)($.InstallPlanModel),isList:!0,prop:"installPlans"},u?{}:{namespace:c})],icon:({obj:e})=>{var a,t,n,r,o;return l.createElement(Y.a,{displayName:null===(a=null==e?void 0:e.spec)||void 0===a?void 0:a.displayName,icon:null===(n=null===(t=null==e?void 0:e.spec)||void 0===t?void 0:t.icon)||void 0===n?void 0:n[0],provider:null===(r=null==e?void 0:e.spec)||void 0===r?void 0:r.provider,version:null===(o=null==e?void 0:e.spec)||void 0===o?void 0:o.version,deprecation:b.deprecation})},namespace:t.ns,kind:Object(A.Hb)($.ClusterServiceVersionModel),name:t.name,pagesFor:E,menuActions:v,createRedirect:!0}))};Ce.displayName="ClusterServiceVersionList",ye.displayName="ClusterServiceVersionsPage",Oe.displayName="ClusterServiceVersionTableRow",Me.displayName="CRDCard",Ve.displayName="ClusterServiceVersionsDetailsPage",we.displayName="ClusterServiceVersionDetails",Te.displayName="CSVSubscription"},4386:function(e,a,t){"use strict";t.r(a),t.d(a,"catalogSourceForSubscription",(function(){return V})),t.d(a,"installedCSVForSubscription",(function(){return A})),t.d(a,"packageForSubscription",(function(){return D})),t.d(a,"installPlanForSubscription",(function(){return F})),t.d(a,"SourceMissingStatus",(function(){return x})),t.d(a,"SourceUnhealthyStatus",(function(){return L})),t.d(a,"UpgradeApprovalLink",(function(){return H})),t.d(a,"SubscriptionStatus",(function(){return G})),t.d(a,"SubscriptionTableRow",(function(){return z})),t.d(a,"SubscriptionsList",(function(){return $})),t.d(a,"SubscriptionsPage",(function(){return q})),t.d(a,"SubscriptionDetails",(function(){return J})),t.d(a,"SubscriptionUpdates",(function(){return Y})),t.d(a,"SubscriptionDetailsPage",(function(){return Z}));var l=t(0),n=t(80),r=t(19),o=t(353),s=t(874),c=t(615),i=t(54),m=t(18),d=t(22),u=t(16),p=t(489),v=t(7),b=t(14),E=t(13),g=t(83),h=t(972),f=t(40),O=t(5),N=t(983),j=t(8),k=t(15),S=t(125),C=t(146),y=t(2241),P=t(5737),M=t(6177),_=t(6178),I=t(6037),w=t(2235),T=t(1405);const V=(e=[],a)=>e.find(e=>{var t,l,n,r;return(null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.name)===(null===(l=null==a?void 0:a.spec)||void 0===l?void 0:l.source)&&(null===(n=null==e?void 0:e.metadata)||void 0===n?void 0:n.namespace)===(null===(r=null==a?void 0:a.spec)||void 0===r?void 0:r.sourceNamespace)}),A=(e=[],a)=>e.find(e=>{var t,l;return(null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.name)===(null===(l=null==a?void 0:a.status)||void 0===l?void 0:l.installedCSV)}),D=(e=[],a)=>e.find(e=>{var t,l,n,r,o,s,c,i;return(null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.name)===(null===(l=null==a?void 0:a.spec)||void 0===l?void 0:l.name)&&(null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.packageName)===(null===(r=null==a?void 0:a.spec)||void 0===r?void 0:r.name)&&(null===(o=null==e?void 0:e.status)||void 0===o?void 0:o.catalogSource)===(null===(s=null==a?void 0:a.spec)||void 0===s?void 0:s.source)&&(null===(c=null==e?void 0:e.status)||void 0===c?void 0:c.catalogSourceNamespace)===(null===(i=null==a?void 0:a.spec)||void 0===i?void 0:i.sourceNamespace)}),F=(e=[],a)=>e.find(e=>{var t,l,n;return(null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.name)===(null===(n=null===(l=null==a?void 0:a.status)||void 0===l?void 0:l.installPlanRef)||void 0===n?void 0:n.name)}),x=()=>{const{t:e}=Object(v.useTranslation)();return l.createElement(l.Fragment,null,l.createElement(k.rc,{title:e("olm~Cannot update")}),l.createElement("span",{className:"text-muted"},e("olm~CatalogSource not found")))},L=()=>{const{t:e}=Object(v.useTranslation)();return l.createElement(l.Fragment,null,l.createElement(k.rc,{title:e("olm~Cannot update")}),l.createElement("span",{className:"text-muted"},e("olm~CatalogSource unhealthy")))},R=["","","pf-m-hidden pf-m-visible-on-md","pf-m-hidden pf-m-visible-on-lg","pf-m-hidden pf-m-visible-on-xl",O.F.columnClass],H=({subscription:e})=>{const{t:a}=Object(v.useTranslation)(),t=Object(O.uc)(S.InstallPlanModel,e.status.installPlanRef.name,e.metadata.namespace);return l.createElement("span",{className:"co-icon-and-text"},l.createElement(b.Link,{to:t},l.createElement(k.n,null)," ",a("olm~Upgrade available")))},G=({subscription:e})=>{var a;const{t:t}=Object(v.useTranslation)();switch(null===(a=e.status)||void 0===a?void 0:a.state){case C.g.SubscriptionStateUpgradeAvailable:return l.createElement("span",null,l.createElement(k.tc,null)," ",t("olm~Upgrade available"));case C.g.SubscriptionStateUpgradePending:return Object(y.b)(e)&&e.status.installPlanRef?l.createElement(H,{subscription:e}):l.createElement("span",null,l.createElement(s.a,{className:"text-primary"})," ",t("olm~Upgrading"));case C.g.SubscriptionStateAtLatest:return l.createElement("span",null,l.createElement(k.X,null)," ",t("olm~Up to date"));default:return l.createElement("span",{className:d.a(e.status.state)?"text-muted":""},e.status.state||t("olm~Unknown failure"))}},U=[O.F.factory.Edit,(e,a)=>({labelKey:"olm~Remove Subscription",callback:()=>Object(I.a)({k8sKill:j.lb,k8sGet:j.kb,k8sPatch:j.pb,subscription:a}),accessReview:{group:e.apiGroup,resource:e.plural,name:a.metadata.name,namespace:a.metadata.namespace,verb:"delete"}}),(e,a)=>{const t=u.a(a,"status.installedCSV");return{labelKey:"olm~View ClusterServiceVersion...",href:`/k8s/ns/${a.metadata.namespace}/${S.ClusterServiceVersionModel.plural}/${t}`,hidden:!t}}],z=({obj:e})=>{const{t:a}=Object(v.useTranslation)();return l.createElement(l.Fragment,null,l.createElement(f.k,{className:R[0]},l.createElement(O.hb,{kind:Object(j.Hb)(S.SubscriptionModel),name:e.metadata.name,namespace:e.metadata.namespace})),l.createElement(f.k,{className:R[1]},l.createElement(O.hb,{kind:"Namespace",name:e.metadata.namespace})),l.createElement(f.k,{className:R[2]},l.createElement(G,{subscription:e})),l.createElement(f.k,{className:m(R[3],"co-truncate","co-select-to-copy")},e.spec.channel||"default"),l.createElement(f.k,{className:R[4]},e.spec.installPlanApproval||a("olm~Automatic")),l.createElement(f.k,{className:R[5]},l.createElement(O.gb,{actions:U,kind:Object(j.Hb)(S.SubscriptionModel),resource:e})))},$=Object(w.f)(e=>{const{t:a}=Object(v.useTranslation)();return l.createElement(f.j,Object.assign({},e,{"aria-label":a("olm~Operator Subscriptions"),Header:()=>[{title:a("olm~Name"),sortField:"metadata.name",transforms:[i.a],props:{className:R[0]}},{title:a("olm~Namespace"),sortField:"metadata.namespace",transforms:[i.a],props:{className:R[1]}},{title:a("olm~Status"),props:{className:R[2]}},{title:a("olm~Update channel"),props:{className:R[3]}},{title:a("olm~Update approval"),props:{className:R[4]}},{title:"",props:{className:R[5]}}],Row:z,EmptyMsg:()=>l.createElement(O.h,{title:a("olm~No Subscriptions found")},a("olm~Each Namespace can subscribe to a single channel of a package for automatic updates.")),virtualize:!0}))}),q=e=>{const{t:a}=Object(v.useTranslation)();return l.createElement(f.i,Object.assign({},e,{resources:[{kind:Object(j.Hb)(S.SubscriptionModel),namespace:e.namespace,namespaced:!0,prop:"subscription"},{kind:Object(j.Hb)(S.OperatorGroupModel),namespace:e.namespace,namespaced:!0,prop:"operatorGroup"}],flatten:e=>u.a(e.subscription,"data",[]),title:a("olm~Subscriptions"),canCreate:!0,createProps:{to:"/operatorhub"},createButtonText:a("olm~Create Subscription"),ListComponent:$,filterLabel:a("olm~Subscriptions by package")}))},K=({health:e,source:a,sourceNamespace:t})=>{const{t:r}=Object(v.useTranslation)();return e?e.healthy?null:l.createElement(n.a,{isInline:!0,className:"co-alert",variant:"warning",title:r("olm~CatalogSource unhealthy")},r('olm~This operator cannot be updated. CatalogSource "{{source}}" is unhealthy.',{source:a}),l.createElement(O.hb,{displayName:r("olm~View CatalogSource"),groupVersionKind:Object(g.getGroupVersionKindForModel)(S.CatalogSourceModel),name:a,namespace:t,title:a})):l.createElement(n.a,{isInline:!0,className:"co-alert",variant:"warning",title:r("olm~CatalogSource health unknown")},r('olm~This operator cannot be updated. The health of CatalogSource "{{source}}" is unknown. It may have been disabled or removed from the cluster.',{source:a}),a&&t&&l.createElement(O.hb,{displayName:r("olm~View CatalogSource"),groupVersionKind:Object(g.getGroupVersionKindForModel)(S.CatalogSourceModel),name:a,namespace:t,title:a}))},B=({installPlan:e})=>{var a,t,r;const{t:o}=Object(v.useTranslation)(),s=null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.phase,c=null===(r=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.conditions)||void 0===r?void 0:r.find(({type:e,status:a})=>"Installed"===e&&"False"===a),i=(null==c?void 0:c.message)||(null==c?void 0:c.reason)||o("olm~InstallPlan failed");return s===C.f.InstallPlanPhaseFailed?l.createElement(n.a,{isInline:!0,className:"co-alert co-alert--scrollable",variant:"danger",title:s},i):null},W=({healthy:e})=>{const{t:a}=Object(v.useTranslation)();switch(e){case!0:return l.createElement(E.A,{icon:l.createElement(k.X,null),title:a("olm~Healthy")});case!1:return l.createElement(E.A,{icon:l.createElement(k.Mb,null),title:a("olm~Unhealthy")});default:return l.createElement(E.A,{icon:l.createElement(k.tc,null),title:a("olm~Health unknown")})}},J=({clusterServiceVersions:e=[],installPlans:a=[],obj:t,packageManifests:n=[],subscriptions:r=[]})=>{var o,s,c,i;const{t:m}=Object(v.useTranslation)(),{source:d,sourceNamespace:u}=null!==(o=null==t?void 0:t.spec)&&void 0!==o?o:{},b=null===(c=null===(s=null==t?void 0:t.status)||void 0===s?void 0:s.catalogHealth)||void 0===c?void 0:c.find(e=>e.catalogSourceRef.name===d),g=A(e,t),f=F(a,t),C=D(n,t);new URLSearchParams(window.location.search).has("showDelete")&&Object(I.a)({k8sKill:j.lb,k8sGet:j.kb,k8sPatch:j.pb,subscription:t}).result.then(()=>Object(N.c)("showDelete")).catch(p.a);const{deprecatedPackage:y,deprecatedChannel:M,deprecatedVersion:_}=Object(P.d)(t);return l.createElement(l.Fragment,null,l.createElement("div",{className:"co-m-pane__body"},l.createElement(K,{health:b,source:d,sourceNamespace:u}),l.createElement(B,{installPlan:f}),(y.deprecation||M.deprecation||_.deprecation)&&l.createElement(P.a,{deprecatedPackage:y,deprecatedChannel:M,deprecatedVersion:_,dismissible:!0}),l.createElement(O.ob,{text:m("olm~Subscription details")}),l.createElement("div",{className:"co-m-pane__body-group"},l.createElement(Y,{catalogHealth:b,pkg:C,obj:t,installedCSV:g,installPlan:f,subscriptions:r})),l.createElement("div",{className:"co-m-pane__body-group"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-6"},l.createElement(O.lb,{resource:t,showAnnotations:!1})),l.createElement("div",{className:"col-sm-6"},l.createElement("dl",{className:"co-m-pane__details"},l.createElement("dt",null,m("olm~Installed version")),l.createElement("dd",null,g?l.createElement(O.hb,{kind:Object(j.Hb)(S.ClusterServiceVersionModel),name:Object(k.dd)(g),namespace:Object(k.ed)(g),title:Object(k.dd)(g)}):m("olm~None")),l.createElement("dt",null,m("olm~Starting version")),l.createElement("dd",null,t.spec.startingCSV||m("olm~None")),l.createElement("dt",null,m("olm~CatalogSource")),l.createElement("dd",null,d&&u?l.createElement(O.hb,{kind:Object(j.Hb)(S.CatalogSourceModel),name:d,namespace:u,title:d},l.createElement(E.v,{badgeAlt:!0},l.createElement(W,{healthy:null==b?void 0:b.healthy}))):m("olm~None")),l.createElement("dt",null,m("olm~InstallPlan")),l.createElement("dd",null,f?l.createElement(O.hb,{kind:Object(j.Hb)(S.InstallPlanModel),name:Object(k.dd)(f),namespace:Object(k.ed)(f),title:Object(k.dd)(f)}):m("olm~None"))))))),l.createElement("div",{className:"co-m-pane__body"},l.createElement(O.ob,{text:m("olm~Conditions")}),l.createElement(h.b,{conditions:null===(i=null==t?void 0:t.status)||void 0===i?void 0:i.conditions})))},X=({catalogHealth:e,subscription:a})=>e?e.healthy?l.createElement(G,{subscription:a}):l.createElement(L,null):l.createElement(x,null),Y=({catalogHealth:e,installedCSV:a,installPlan:t,obj:n,pkg:s,subscriptions:i})=>{var m,d,u,p,E;const{t:g}=Object(v.useTranslation)(),h=l.useRef(null===(m=null==n?void 0:n.spec)||void 0===m?void 0:m.installPlanApproval),f=l.useRef(null===(d=null==n?void 0:n.spec)||void 0===d?void 0:d.channel),[N,y]=l.useState(!1);l.useEffect(()=>{var e,a,t,l;N&&(null===(e=null==n?void 0:n.spec)||void 0===e?void 0:e.channel)===f.current&&(null===(a=null==n?void 0:n.spec)||void 0===a?void 0:a.installPlanApproval)===h.current||(y(!1),f.current=null===(t=null==n?void 0:n.spec)||void 0===t?void 0:t.channel,h.current=null===(l=null==n?void 0:n.spec)||void 0===l?void 0:l.installPlanApproval)},[n,N]);const I=(e,a)=>Object(j.rb)(e,a).then(()=>y(!0)),w=l.useMemo(()=>{var e;if(t)switch(null===(e=t.status)||void 0===e?void 0:e.phase){case C.f.InstallPlanPhaseRequiresApproval:return l.createElement("span",{"data-test":"operator-subscription-requires-approval"},g("olm~1 requires approval"));case C.f.InstallPlanPhaseFailed:return g("olm~1 failed");default:return g("olm~1 installing")}return null},[t,g]),V=Object(T.f)(i,n.metadata.namespace),{deprecatedChannel:A}=Object(P.d)(n);return l.createElement("div",{className:"co-detail-table"},l.createElement("div",{className:"co-detail-table__row row"},l.createElement("div",{className:"co-detail-table__section col-sm-3"},l.createElement("dl",{className:"co-m-pane__details"},l.createElement("dt",{className:"co-detail-table__section-header"},g("olm~Update channel"),l.createElement(O.B,null,g("olm~The channel to track and receive the updates from."))),l.createElement("dd",null,N?l.createElement(O.T,null):l.createElement(l.Fragment,null,l.createElement(r.a,{type:"button",isInline:!0,onClick:()=>Object(_.a)({subscription:n,pkg:s,k8sUpdate:I}),variant:"link",isDisabled:!s,"data-test":"subscription-channel-update-button"},n.spec.channel||"default",s&&l.createElement(c.a,{className:"co-icon-space-l pf-v5-c-button-icon--plain"})),A.deprecation&&l.createElement(P.c,{dataTest:"deprecated-operator-warning-subscription-update-icon",deprecation:A.deprecation}))))),l.createElement("div",{className:"co-detail-table__section col-sm-3"},l.createElement("dl",{className:"co-m-pane__details"},l.createElement("dt",{className:"co-detail-table__section-header"},g("olm~Update approval"),l.createElement(O.B,null,g("olm~The strategy to determine either manual or automatic updates."))),l.createElement("dd",null,N?l.createElement(O.T,null):l.createElement(l.Fragment,null,l.createElement("div",null,l.createElement(r.a,{type:"button",isInline:!0,onClick:()=>Object(M.a)({obj:n,k8sUpdate:I}),variant:"link"},n.spec.installPlanApproval||"Automatic",l.createElement(c.a,{className:"co-icon-space-l pf-v5-c-button-icon--plain"}))),n.spec.installPlanApproval===C.e.Automatic&&(null==V?void 0:V.length)>0&&l.createElement("div",null,l.createElement(o.a,{headerContent:l.createElement(l.Fragment,null,g("olm~Functioning as manual approval strategy")),bodyContent:l.createElement(T.b,{subscriptions:V,namespace:n.metadata.namespace})},l.createElement(r.a,{type:"button",isInline:!0,variant:"link"},l.createElement(k.o,{className:"co-icon-space-r"}),g("olm~Functioning as manual")))))))),l.createElement("div",{className:"co-detail-table__section co-detail-table__section--last col-sm-6"},l.createElement("dl",{className:"co-m-pane__details"},l.createElement("dt",{className:"co-detail-table__section-header"},g("olm~Upgrade status")),l.createElement("dd",null,l.createElement(X,{catalogHealth:e,subscription:n}))),e&&e.healthy&&l.createElement(l.Fragment,null,l.createElement("div",{className:"co-detail-table__bracket"}),l.createElement("div",{className:"co-detail-table__breakdown"},(null===(u=null==n?void 0:n.status)||void 0===u?void 0:u.installedCSV)&&a?l.createElement(b.Link,{to:`/k8s/ns/${n.metadata.namespace}/${Object(j.Hb)(S.ClusterServiceVersionModel)}/${n.status.installedCSV}`},g("olm~1 installed")):l.createElement("span",null,g("olm~0 installed")),(null===(p=null==n?void 0:n.status)||void 0===p?void 0:p.state)===C.g.SubscriptionStateUpgradePending&&(null===(E=null==n?void 0:n.status)||void 0===E?void 0:E.installPlanRef)&&t?l.createElement(b.Link,{to:`/k8s/ns/${n.metadata.namespace}/${Object(j.Hb)(S.InstallPlanModel)}/${n.status.installPlanRef.name}`},l.createElement("span",null,w)):l.createElement("span",null,g("olm~0 installing")))))))},Z=e=>{const a=Object(b.useParams)();return l.createElement(f.a,Object.assign({},e,{namespace:a.ns,kind:Object(j.Hb)(S.SubscriptionModel),name:a.name,pages:[O.mc.details(J),O.mc.editYaml()],resources:[{kind:Object(j.Hb)(S.PackageManifestModel),isList:!0,namespace:e.namespace,prop:"packageManifests"},{kind:Object(j.Hb)(S.InstallPlanModel),isList:!0,namespace:e.namespace,prop:"installPlans"},{kind:Object(j.Hb)(S.ClusterServiceVersionModel),namespace:e.namespace,isList:!0,prop:"clusterServiceVersions"},{kind:Object(j.Hb)(S.SubscriptionModel),namespace:e.namespace,isList:!0,prop:"subscriptions"}],menuActions:U}))};q.displayName="SubscriptionsPage",J.displayName="SubscriptionDetails",Z.displayName="SubscriptionDetailsPage"},5411:function(e,a,t){"use strict";t.r(a),t.d(a,"CreateInitializationResourceButton",(function(){return w})),t.d(a,"OperatorInstallStatusPage",(function(){return x}));var l=t(0),n=t(966),r=t(19),o=t(1394),s=t(404),c=t(4341),i=t(80),m=t(192),d=t(296),u=t(137),p=t(7),v=t(14),b=t(13),E=t(976),g=t(2237),h=t(131),f=t(5),O=t(8),N=t(330),j=t(125),k=t(5893),S=t(4384),C=t(59),y=t(1947),P=t(1405);const M=({namespace:e})=>{const{t:a}=Object(p.useTranslation)(),t=a("olm~View installed Operators in Namespace {{namespace}}",{namespace:e}),n=a("olm~View installed Operators in all Namespaces");return l.createElement("div",{className:"co-operator-install-page__link"},l.createElement(v.Link,{"data-test":"view-installed-operators-btn",to:Object(f.uc)(j.ClusterServiceVersionModel,null,e)},e?t:n))},_=({namespace:e,csvName:a,obj:t})=>{var o,s;const{t:c}=Object(p.useTranslation)(),i=null===(s=null===(o=null==t?void 0:t.metadata)||void 0===o?void 0:o.annotations)||void 0===s?void 0:s[C.d.InitializationResource];return l.createElement(l.Fragment,null,l.createElement("h2",{className:"co-clusterserviceversion-install__heading"},c("olm~Operator installation failed")),l.createElement("p",null,c("olm~The operator did not install successfully."),i&&l.createElement(l.Fragment,null," ",c("olm~The required custom resource can be created in the Operator's details view."))),l.createElement(n.a,{className:"pf-v5-c-form pf-v5-c-form__group--no-top-margin"},l.createElement(v.Link,{to:Object(f.uc)(j.ClusterServiceVersionModel,a,e)},l.createElement(r.a,{variant:"primary"},c("olm~View error"))),l.createElement(M,{namespace:e})))},I=({namespace:e,subscriptionObj:a,installObj:t,approve:o})=>{var s;const{t:c}=Object(p.useTranslation)(),i=Object(f.Dc)({group:j.InstallPlanModel.apiGroup,resource:j.InstallPlanModel.plural,namespace:e,verb:"patch"}),m="InstallPlan"===t.kind;return l.createElement(l.Fragment,null,l.createElement("h2",{className:"co-clusterserviceversion-install__heading"},c("olm~Manual approval required")),l.createElement(n.a,{className:"pf-v5-c-form pf-v5-c-form__group--no-top-margin"},l.createElement(P.a,{installPlan:t}),(m&&i||!m)&&l.createElement(l.Fragment,null,l.createElement(r.a,{variant:"primary",onClick:o},c("olm~Approve")),l.createElement(v.Link,{to:Object(f.uc)(j.SubscriptionModel,null===(s=null==a?void 0:a.metadata)||void 0===s?void 0:s.name,e)+"?showDelete=true"},l.createElement(r.a,{className:"co-clusterserviceversion__button",variant:"secondary"},c("olm~Deny")))),!i&&m&&l.createElement(S.NeedInstallPlanPermissions,{installPlan:t}),l.createElement(M,{namespace:e})))},w=({disabled:e,initializationResource:a,obj:t})=>{const{t:n}=Object(p.useTranslation)(),o=Object(O.Db)(a),s=null==a?void 0:a.kind,c=l.createElement(r.a,{"aria-disabled":e,isDisabled:e,variant:"primary"},n("olm~Create {{item}}",{item:s}));return e?c:l.createElement(v.Link,{to:`${Object(f.uc)(j.ClusterServiceVersionModel,t.metadata.name,t.metadata.namespace)}/${o}/~new?useInitializationResource`},c)},T=({initializationResource:e,obj:a})=>{var t,n,r;const{t:o}=Object(p.useTranslation)(),s=null==e?void 0:e.kind,c=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.namespace,i=null===(r=null===(n=null==a?void 0:a.metadata)||void 0===n?void 0:n.annotations)||void 0===r?void 0:r.description;return l.createElement("div",{className:"co-clusterserviceversion__box"},l.createElement("span",{className:"co-resource-item"},l.createElement(f.hb,{kind:s,name:s,namespace:c}),l.createElement(b.v,{badgeAlt:!0},l.createElement(b.A,{icon:l.createElement(N.f,null),title:o("olm~Required")}))),l.createElement(g.SyncMarkdownView,{content:i}))},V=({namespace:e,csvName:a,obj:t})=>{var o;const{t:s}=Object(p.useTranslation)(),c=Object(y.d)(null===(o=null==t?void 0:t.metadata)||void 0===o?void 0:o.annotations,{onError:e=>Object(h.s)({error:e})});return l.createElement(l.Fragment,null,l.createElement("h2",{className:"co-clusterserviceversion-install__heading"},s("olm~Installed operator"),":  ",s(c?"olm~custom resource required":"olm~ready for use")),c&&l.createElement(l.Fragment,null,l.createElement("span",null,s("olm~The Operator has installed successfully. Create the required custom resource to be able to use this Operator.")),l.createElement(T,{initializationResource:c,obj:t})),l.createElement(n.a,{className:"pf-v5-c-form pf-v5-c-form__group--no-top-margin"},c?l.createElement(w,{initializationResource:c,obj:t}):l.createElement(v.Link,{to:Object(f.uc)(j.ClusterServiceVersionModel,a,e)},l.createElement(r.a,{variant:"primary"},s("olm~View Operator"))),l.createElement(M,{namespace:e})))},A=({namespace:e,obj:a})=>{var t,r,o,s,c;const{t:i}=Object(p.useTranslation)(),m=(null===(r=null===(t=a)||void 0===t?void 0:t.status)||void 0===r?void 0:r.reason)||"",d=(null===(s=null===(o=a)||void 0===o?void 0:o.status)||void 0===s?void 0:s.message)||"",u=Object(y.d)(null===(c=null==a?void 0:a.metadata)||void 0===c?void 0:c.annotations,{onError:e=>Object(h.s)({error:e})});return l.createElement(l.Fragment,null,l.createElement("h2",{className:"co-clusterserviceversion-install__heading"},i("olm~Installing Operator")),m&&l.createElement("p",{className:"text-muted"},m,": ",d),l.createElement("p",null,i("olm~The Operator is being installed. This may take a few minutes."),u&&l.createElement(l.Fragment,null," ",i("olm~Once the Operator is installed the required custom resource will be available for creation."))),u&&l.createElement(T,{initializationResource:u,obj:a}),l.createElement(n.a,{className:"pf-v5-c-form pf-v5-c-form__group--no-top-margin"},u&&l.createElement(w,{disabled:!0,initializationResource:u,obj:a}),l.createElement(M,{namespace:e})))},D=({subscription:e})=>{var a,t,n,r,o;const{t:s}=Object(p.useTranslation)(),c=s("olm~Not found"),{currentCSV:i,catalogNamespace:m,pkg:d}=Object(v.useParams)(),[u,b,g]=Object(E.xb)({groupVersionKind:{group:j.PackageManifestModel.apiGroup,version:j.PackageManifestModel.apiVersion,kind:j.PackageManifestModel.kind},selector:{matchLabels:{"catalog-namespace":m}},fieldSelector:"metadata.name="+d,isList:!0}),h=null==u?void 0:u[0];if(!b)return l.createElement(f.T,null);if(g||!h)return l.createElement(k.a,{icon:null,displayName:g?s("olm~Error: {{loadError}}",{loadError:g}):c});const O=(null===(a=null==h?void 0:h.status)||void 0===a?void 0:a.channels)||[],N=O.find(e=>e.currentCSV===i)||O[0],S=(null===(t=null==N?void 0:N.currentCSVDesc)||void 0===t?void 0:t.displayName)||c,C=(null===(r=null===(n=null==h?void 0:h.status)||void 0===n?void 0:n.provider)||void 0===r?void 0:r.name)||"",y=null===(o=null==e?void 0:e.spec)||void 0===o?void 0:o.startingCSV;return l.createElement(k.a,{displayName:S,icon:Object(P.g)(h),provider:C,version:y})},F=({resources:e})=>{var a,t,n,r,b,E,g,f,k,C,y,P;const{t:M}=Object(p.useTranslation)(),{currentCSV:w,targetNamespace:T}=Object(v.useParams)();let F=!0,x="",L=null===(a=null==e?void 0:e.clusterServiceVersion)||void 0===a?void 0:a.data;const R=null===(t=null==e?void 0:e.subscription)||void 0===t?void 0:t.data;if(x=null===(n=null==L?void 0:L.status)||void 0===n?void 0:n.phase,L&&x)F=!1;else if(R){F=!1,x=(null===(r=null==R?void 0:R.status)||void 0===r?void 0:r.state)||null;const a=(null===(E=null===(b=null==R?void 0:R.status)||void 0===b?void 0:b.installPlanRef)||void 0===E?void 0:E.name)||"",t=null===(f=null===(g=null==e?void 0:e.installPlans)||void 0===g?void 0:g.data)||void 0===f?void 0:f.find(e=>e.metadata.name===a);t&&(L=t)}const H="Succeeded"===x,G="Failed"===x,U="Manual"===(null===(k=null==L?void 0:L.spec)||void 0===k?void 0:k.approval)&&!1===(null===(C=null==L?void 0:L.spec)||void 0===C?void 0:C.approved),z=()=>{Object(O.pb)(j.InstallPlanModel,L,[{op:"replace",path:"/spec/approved",value:!0}]).catch(e=>{Object(h.s)({error:e.toString()})})};let $=l.createElement(o.a,{size:"lg"});G&&($=l.createElement(s.a,{size:"lg"},l.createElement(N.f,null))),U&&($=l.createElement(s.a,{size:"lg"},l.createElement(N.h,null))),H&&($=l.createElement(s.a,{size:"lg"},l.createElement(N.e,null)));let q=l.createElement(A,{namespace:T,obj:L});return G?q=l.createElement(_,{namespace:T,obj:L,csvName:w}):U?q=l.createElement(I,{namespace:T,subscriptionObj:R,installObj:L,approve:z}):H&&(q=l.createElement(V,{namespace:T,csvName:w,obj:L})),l.createElement(l.Fragment,null,l.createElement("div",{className:"co-operator-install-page__main"},l.createElement(u.a,null,l.createElement("title",null,M("olm~Installing Operator"))),l.createElement(c.a,null,l.createElement("div",{id:"operator-install-page"},F&&l.createElement("div",{className:"co-operator-install-page__indicator"},M("olm~Installing...")," ",l.createElement(o.a,{size:"lg"})),!F&&G&&l.createElement(i.a,{variant:"danger",isInline:!0,title:"Installation Failed"},x,": ",(null===(P=null===(y=L)||void 0===y?void 0:y.status)||void 0===P?void 0:P.message)||""),!F&&l.createElement(m.a,null,l.createElement(d.a,null,l.createElement("div",{className:"co-operator-install-page__pkg-indicator"},l.createElement("div",null,l.createElement(D,{subscription:e.subscription.data})),l.createElement("div",null,$)))),!F&&l.createElement(m.a,null,l.createElement(d.a,null,q))))),!F&&U&&l.createElement(S.InstallPlanPreview,{obj:L,hideApprovalBlock:!0}))},x=()=>{const{pkg:e,currentCSV:a,targetNamespace:t}=Object(v.useParams)(),n=[{kind:Object(O.Hb)(j.ClusterServiceVersionModel),namespaced:!0,isList:!1,name:a,namespace:t,prop:"clusterServiceVersion"},{kind:Object(O.Hb)(j.SubscriptionModel),namespaced:!0,isList:!1,name:e,namespace:t,optional:!0,prop:"subscription"},{kind:Object(O.Hb)(j.InstallPlanModel),prop:"installPlans",namespaced:!0,namespace:t,isList:!0,optional:!0}];return l.createElement(f.C,{resources:n},l.createElement(F,null))}},5417:function(e,a,t){"use strict";t.r(a),t.d(a,"CloudServiceTokenWarningAlert",(function(){return U})),t.d(a,"OperatorHubSubscribeForm",(function(){return $})),t.d(a,"OperatorHubSubscribePage",(function(){return K}));var l=t(0),n=t(80),r=t(1939),o=t(281),s=t(472),c=t(966),i=t(19),m=t(501),d=t(22),u=t(460),p=t(1120),v=t(838),b=t(107),E=t(373),g=t(2015),h=t(137),f=t(7),O=t(14),N=t(692),j=t(5),k=t(108),S=t(175),C=t(10),y=t(8),P=t(994),M=t(30),_=t(125),I=t(146),w=t(2241),T=t(6624),V=t(5893),A=t(4385),D=t(5737),F=t(6120),x=t(1405),L=t(2235),R=t(6355),H=t(1947),G=function(e,a,t,l){return new(t||(t=Promise))((function(n,r){function o(e){try{c(l.next(e))}catch(e){r(e)}}function s(e){try{c(l.throw(e))}catch(e){r(e)}}function c(e){var a;e.done?n(e.value):(a=e.value,a instanceof t?a:new t((function(e){e(a)}))).then(o,s)}c((l=l.apply(e,a||[])).next())}))};const U=({title:e,message:a,onClose:t})=>l.createElement(n.a,{isInline:!0,variant:"warning",title:e,actionClose:l.createElement(r.a,{onClose:()=>t(!1)}),className:"pf-u-mb-lg"},l.createElement("p",null,a)),z=({label:e,helpText:a,placeholder:t,ariaLabel:n,value:r,setValue:s})=>l.createElement("div",{className:"form-group"},l.createElement("fieldset",null,l.createElement("label",{className:"co-required"},e),l.createElement(j.B,null,a),l.createElement("div",{className:"co-toolbar__item"},l.createElement(o.a,{autoFocus:!0,placeholder:t,"aria-label":n,type:"text",value:r,onChange:(e,a)=>{s(a)}})))),$=e=>{var a,t,r,o,$,q,K,B,W,J,X,Y,Z,Q,ee,ae,te,le,ne,re,oe,se,ce;const ie=null===(t=null===(a=e.packageManifest)||void 0===a?void 0:a.data)||void 0===t?void 0:t[0],{name:me}=null!==(r=null==ie?void 0:ie.metadata)&&void 0!==r?r:{},{provider:de,channels:ue=[],packageName:pe,catalogSource:ve,catalogSourceNamespace:be}=null!==(o=null==ie?void 0:ie.status)&&void 0!==o?o:{},{pathname:Ee}=Object(O.useLocation)(),[ge,he]=l.useState(""),[fe,Oe]=l.useState(""),[Ne,je]=l.useState(""),[ke,Se]=l.useState(""),[Ce,ye]=l.useState(""),[Pe,Me]=l.useState(""),[_e,Ie]=l.useState(""),[we,Te]=l.useState(""),[Ve,Ae]=l.useState(null),[De,Fe]=l.useState(null),{catalogNamespace:xe,channel:Le,pkg:Re,tokenizedAuth:He,version:Ge}=Object(j.Ub)(),Ue=Object(x.d)(ie),[ze,$e]=l.useState(Le||Ue),{currentCSVDesc:qe}=null!==($=ue.find(e=>e.name===ze))&&void 0!==$?$:{},{installModes:Ke=[],version:Be}=null!=qe?qe:{},[We,Je]=l.useState(Ge||Be),[Xe,Ye]=l.useState(!0),[Ze,Qe]=l.useState(We!==Be?I.e.Manual:I.e.Automatic),[ea,aa]=l.useState(!1),[ta,la]=l.useState(!1),[na,ra]=l.useState(!0),[oa,sa]=l.useState(!0),ca=(null===(B=null===(K=null===(q=null==ie?void 0:ie.metadata)||void 0===q?void 0:q.labels)||void 0===K?void 0:K.provider)||void 0===B?void 0:B.includes("Red Hat"))&&"true"===(null===(W=qe.annotations)||void 0===W?void 0:W["console.openshift.io/operator-monitoring-default"]),[ia,ma]=l.useState(ca),[da,ua]=l.useState(""),[pa]=Object(k.a)({kind:Object(y.Hb)(C.ConsoleOperatorConfigModel),isList:!1,name:M.p}),[va,ba]=l.useState([]),{t:Ea}=Object(f.useTranslation)(),{deprecatedPackage:ga,deprecatedChannel:ha,deprecatedVersion:fa,setDeprecatedPackage:Oa}=Object(F.a)(),Na=(null==ga?void 0:ga.deprecation)||(null==ha?void 0:ha.deprecation)||(null==fa?void 0:fa.deprecation);l.useEffect(()=>{Oa(m.a(null==ie?void 0:ie.status,"deprecation"))},[null==ie?void 0:ie.status,Oa]);const ja=new URLSearchParams({"details-item":`${new URLSearchParams(window.location.search).get("pkg")}-${new URLSearchParams(window.location.search).get("catalogNamespace")}`}),ka=De||Object(x.n)(e.packageManifest.data[0])(ze).reduce((e,a)=>a.type===I.d.InstallModeTypeAllNamespaces?I.d.InstallModeTypeAllNamespaces:e,I.d.InstallModeTypeOwnNamespace),Sa=null===(J=qe.annotations)||void 0===J?void 0:J["operatorframework.io/suggested-namespace"],Ca=null!==(X=Object(H.g)(qe.annotations,{onError:()=>console.error("Could not parse JSON annotation.")}))&&void 0!==X?X:{},ya=null===(Y=null==Ca?void 0:Ca.metadata)||void 0===Y?void 0:Y.name,Pa="true"===(null===(Z=qe.annotations)||void 0===Z?void 0:Z["operatorframework.io/cluster-monitoring"]),Ma=Object(H.d)(qe.annotations,{onError:()=>console.error("Operator Hub Subscribe: Could not get initialization resource.")}),_a=Object(S.d)({group:C.ConsoleOperatorConfigModel.apiGroup,resource:C.ConsoleOperatorConfigModel.plural,verb:"patch",name:M.p}),Ia=Object(H.b)(null==qe?void 0:qe.annotations),wa=l.useMemo(()=>Ma?Object(y.Db)(Ma):null,[Ma]),Ta=(null===(ae=null===(ee=((null===(Q=e.operatorGroup)||void 0===Q?void 0:Q.data)||[]).find(e=>"global-operators"===e.metadata.name))||void 0===ee?void 0:ee.metadata)||void 0===ae?void 0:ae.namespace)||"openshift-operators";let Va=Ve||e.targetNamespace;const Aa=ya||Sa;ka===I.d.InstallModeTypeAllNamespaces&&(Va=Aa?Ve||Aa:Ve||Ta),ka===I.d.InstallModeTypeOwnNamespace&&e.targetNamespace===Ta&&(Va=Ve||"");const Da=Aa&&Aa===Va,Fa=!na&&Da;l.useEffect(()=>{Aa?(Ae(Aa),Object(y.kb)(C.NamespaceModel,Aa).then(()=>{la(!0),ra(!1)}).catch(()=>{la(!1),ra(!1)})):ra(!1)},[Aa]),l.useEffect(()=>{Object(y.ob)(_.PackageManifestModel,{ns:Va,fieldSelector:"metadata.name="+me,labelSelector:Object(P.a)([{key:"catalog",operator:"Equals",values:[ve]},{key:"catalog-namespace",operator:"Equals",values:[be]}])}).then(e=>aa(d.a(e))).catch(()=>aa(!0))},[ve,be,me,e.packageManifest.data,Va]),l.useEffect(()=>{ba(Object(w.a)(ve)?Ia:[])},[ve,null===(te=null==qe?void 0:qe.annotations)||void 0===te?void 0:te["console.openshift.io/plugins"]]);const xa=Object(x.f)(e.subscription.data,Va);l.useEffect(()=>{Ge!==Be||(null==xa?void 0:xa.length)>0||"AWS"===He||"Azure"===He||"GCP"===He?Qe(I.e.Manual):Qe(I.e.Automatic)},[Ge,Be,null==xa?void 0:xa.length,He]);const La=Ke.find(e=>e.type===I.d.InstallModeTypeOwnNamespace),Ra=La&&La.supported,Ha=Ke.find(e=>e.type===I.d.InstallModeTypeAllNamespaces),Ga=Ha&&Ha.supported,Ua=l.useCallback(e=>{j.Vb.push(`/operatorhub/install/${xe}/${Re}/${e}/to/${Va}`)},[xe,Re,Va]);if(!Ra&&!Ga)return l.createElement(j.h,{title:Ea("olm~{{item}} can't be installed",{item:null===(ne=null===(le=null==ue?void 0:ue[0])||void 0===le?void 0:le.currentCSVDesc)||void 0===ne?void 0:ne.displayName})},Ea("olm~The Operator does not support to be made available in a single namespace (OwnNamespace installMode) or global installation (AllNamespaces installMode).  Use the CLI to install this Operator instead."));const za=e=>e===I.d.InstallModeTypeAllNamespaces&&Ga?Ea("olm~Operator will be available in all Namespaces."):e===I.d.InstallModeTypeOwnNamespace&&Ra?Ea("olm~Operator will be available in a single Namespace only."):Ea("olm~This mode is not supported by this Operator"),$a=a=>Object(L.a)(e.subscription.data)(e.operatorGroup.data)(e.packageManifest.data[0])(a),qa=a=>t=>{const l=e.operatorGroup.data.find(e=>e.metadata.namespace===a);return!l||!a||Object(L.h)([{type:t,supported:!0}])(l)},Ka=a=>{const t=e.operatorGroup.data.filter(e=>{var t,l;return(null===(l=null===(t=e.status)||void 0===t?void 0:t.namespaces)||void 0===l?void 0:l.includes(a))||Object(L.b)(e)});if(d.a(t))return[];const l=u.a(t,L.e),n=Object(x.k)(e.packageManifest.data[0])(ze).map(e=>Object(x.l)(e));return p.a(l,n)},Ba=Pa&&g.a(Va,"openshift-"),Wa=Object(j.Qb)(j.Lb.configuringMonitoring),Ja=Fa&&l.createElement(l.Fragment,null,l.createElement(n.a,{isInline:!0,className:"co-alert co-alert--scrollable",variant:ta?"warning":"info",title:Ea(ta?"olm~Namespace already exists":"olm~Namespace creation")},ta?l.createElement(f.Trans,{ns:"olm"},"Namespace ",l.createElement("b",null,{operatorSuggestedNamespace:Aa})," already exists and will be used. Other users can already have access to this namespace."):l.createElement(f.Trans,{ns:"olm"},"Namespace ",l.createElement("b",null,{operatorSuggestedNamespace:Aa})," does not exist and will be created.")),Ba&&!ta&&l.createElement("div",{className:"co-form-subsection"},l.createElement(s.a,{id:"enable-monitoring-checkbox","data-test":"enable-monitoring",label:Ea("olm~Enable Operator recommended cluster monitoring on this Namespace"),onChange:(e,a)=>ma(a),isChecked:ia,"data-checked-state":ia}),!(null===(re=e.packageManifest.data[0].metadata.labels.provider)||void 0===re?void 0:re.includes("Red Hat"))&&l.createElement(n.a,{isInline:!0,className:"co-alert pf-v5-c-alert--top-margin",variant:"warning",title:Ea("olm~Namespace monitoring")},l.createElement(l.Fragment,null,Ea("olm~Please note that installing non-Red Hat operators into OpenShift namespaces and enabling monitoring voids user support. Enabling cluster monitoring for non-Red Hat operators can lead to malicious metrics data overriding existing cluster metrics."),!Object(j.hc)()&&l.createElement(f.Trans,{ns:"olm"}," ","For more information, see the"," ",l.createElement(j.z,{href:Wa},"cluster monitoring documentation"),"."))))),Xa=l.createElement("div",{className:"form-group"},l.createElement(N.b,{onChange:()=>{sa(!0),Ae(Aa)},value:Aa,checked:oa,title:Ea("olm~Operator recommended Namespace:")}," ",l.createElement(j.fb,{kind:"Project"}),l.createElement("b",null,Aa)),l.createElement(N.b,{onChange:()=>{sa(!1),Ae(null)},value:Aa,checked:!oa,title:Ea("olm~Select a Namespace")}),!oa&&l.createElement(l.Fragment,null,l.createElement(j.W,{id:"dropdown-selectbox",selectedKey:Va,onChange:e=>Ae(e),dataTest:"dropdown-selectbox"}),l.createElement(n.a,{isInline:!0,className:"co-alert pf-v5-c-alert--top-margin",variant:"warning",title:Ea("olm~Not installing the Operator into the recommended namespace can cause unexpected behavior.")}))),Ya=l.createElement("div",{className:"form-group"},l.createElement(j.W,{id:"dropdown-selectbox",selectedKey:Va,onChange:e=>Ae(e),dataTest:"dropdown-selectbox"})),Za=l.createElement(l.Fragment,null,Aa?l.createElement(l.Fragment,null,Xa):l.createElement(l.Fragment,null,Ya),oa&&Ja),Qa=Sa?l.createElement(l.Fragment,null,Xa,oa&&Ja):l.createElement(l.Fragment,null,Ya),et=Object(x.k)(e.packageManifest.data[0])(ze),at=Ge!==Be||(null==xa?void 0:xa.length)>0;return l.createElement(l.Fragment,null,l.createElement(h.a,null,l.createElement("title",null,"Operator Installation")),l.createElement(j.Z,{title:Ea("olm~Install Operator"),breadcrumbs:[{name:Ea("olm~OperatorHub"),path:"/operatorhub?"+ja.toString()},{name:Ea("olm~Operator Installation"),path:Ee}],helpText:Ea("olm~Install your Operator by subscribing to one of the update channels to keep the Operator up to date. The strategy determines either manual or automatic updates.")}),l.createElement("div",{className:"co-m-pane__body"},"AWS"===He&&Xe&&l.createElement(U,{title:Ea("olm~Cluster in STS Mode"),message:Ea("olm~This cluster is using AWS Security Token Service to reach the cloud API. In order for this operator to take the actions it requires directly with the cloud API, you will need to provide a role ARN (with an attached policy) during installation. Manual subscriptions are highly recommended as steps should be taken prior to upgrade to ensure that the permissions required by the next version are properly accounted for in the role. Please see the operator description for more details."),onClose:()=>Ye(!1)}),"Azure"===He&&Xe&&l.createElement(U,{title:Ea("olm~Cluster in Azure Workload Identity / Federated Identity Mode"),message:Ea("olm~This cluster is using Azure Workload Identity / Federated Identity to reach the cloud API. In order for this operator to take the actions it requires directly with the cloud API, provide the Client ID, Tenant ID, and Subscription ID during installation. Manual subscriptions are highly recommended as steps should be taken before upgrade to ensure that the permissions required by the next version are properly accounted for in the role. See the operator description for more details."),onClose:()=>Ye(!1)})," ","GCP"===He&&Xe&&l.createElement(U,{title:Ea("olm~Cluster in GCP Workload Identity / Federated Identity Mode"),message:Ea("olm~This cluster is using GCP Workload Identity / Federated Identity to reach the cloud API. In order for this operator to take the actions it requires directly with the cloud API, provide the Pool ID, Provider ID, and Service Account Email during installation. Manual subscriptions are highly recommended as steps should be taken before upgrade to ensure that the permissions required by the next version are properly accounted for in the role. See the operator description for more details."),onClose:()=>Ye(!1)}),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-xs-6"},l.createElement(l.Fragment,null,"AWS"===He&&l.createElement("div",{className:"form-group"},l.createElement(z,{label:Ea("olm~role ARN"),helpText:Ea("olm~The role ARN required for the operator to access the cloud API."),placeholder:Ea("olm~role ARN"),ariaLabel:Ea("olm~role ARN"),value:ge,setValue:he})),"Azure"===He&&l.createElement("div",{className:"form-group"},l.createElement(z,{label:Ea("olm~Azure Client ID"),helpText:Ea("olm~The Azure Client ID required for the operator to access the cloud API."),placeholder:Ea("olm~Azure Client ID"),ariaLabel:Ea("olm~Azure Client ID"),value:Ne,setValue:je}),l.createElement(z,{label:Ea("olm~Azure Tenant ID"),helpText:Ea("olm~The Azure Tenant ID required for the operator to access the cloud API."),placeholder:Ea("olm~Azure Tenant ID"),ariaLabel:Ea("olm~Azure Tenant ID"),value:fe,setValue:Oe}),l.createElement(z,{label:Ea("olm~Azure Subscription ID"),helpText:Ea("olm~The Azure Subscription ID required for the operator to access the cloud API."),placeholder:Ea("olm~Azure Subscription ID"),ariaLabel:Ea("olm~Azure Subscription ID"),value:ke,setValue:Se})),"GCP"===He&&l.createElement("div",{className:"form-group"},l.createElement(z,{label:Ea("olm~GCP Project Number"),helpText:Ea("olm~The GCP Project Number required for the operator to access the cloud API."),placeholder:Ea("olm~GCP Project Number"),ariaLabel:Ea("olm~GCP Project Number"),value:Ce,setValue:ye}),l.createElement(z,{label:Ea("olm~GCP Pool ID"),helpText:Ea("olm~The GCP Pool ID required for the operator to access the cloud API."),placeholder:Ea("olm~GCP Pool ID"),ariaLabel:Ea("olm~GCP Pool ID"),value:Pe,setValue:Me}),l.createElement(z,{label:Ea("olm~GCP Provider ID"),helpText:Ea("olm~The GCP Provider ID required for the operator to access the cloud API."),placeholder:Ea("olm~GCP Provider ID"),ariaLabel:Ea("olm~GCP Provider ID"),value:_e,setValue:Ie}),l.createElement(z,{label:Ea("olm~Service Account Email"),helpText:Ea("olm~The GCP Service Account Email required for the operator to access the cloud API."),placeholder:Ea("olm~GCP Service Account Email"),ariaLabel:Ea("olm~GCP Service Account Email"),value:we,setValue:Te})),l.createElement("div",{className:"form-group"},l.createElement("fieldset",null,l.createElement("label",{className:"co-required"},Ea("olm~Update channel")),l.createElement(j.B,null,Ea("olm~The channel to track and receive the updates from.")),l.createElement(R.a,{packageManifest:e.packageManifest.data[0],selectedUpdateChannel:ze,setUpdateChannel:$e,setUpdateVersion:Je}))),l.createElement("div",{className:"form-group form-group--doubled-bottom-margin"},l.createElement("fieldset",null,l.createElement("label",{className:"co-required"},Ea("olm~Version")),l.createElement(R.b,{packageManifest:e.packageManifest.data[0],selectedUpdateChannel:ze,updateVersion:We,setUpdateVersion:Je,showVersionAlert:!0}))),l.createElement("div",{className:"form-group"},l.createElement("fieldset",null,l.createElement("label",{className:"co-required"},Ea("olm~Installation mode")),l.createElement(N.b,{onChange:e=>{Fe(e.target.value),Ae(null),aa(!1)},value:I.d.InstallModeTypeAllNamespaces,checked:ka===I.d.InstallModeTypeAllNamespaces,disabled:!Ga,title:Ea("olm~All namespaces on the cluster"),subTitle:Ea("olm~(default)")},l.createElement("div",{className:"co-m-radio-desc"},l.createElement("p",{className:"text-muted"},za(I.d.InstallModeTypeAllNamespaces)))),l.createElement(N.b,{onChange:e=>{Fe(e.target.value),Ae(oa?Aa:null),aa(!1)},value:I.d.InstallModeTypeOwnNamespace,checked:ka===I.d.InstallModeTypeOwnNamespace,disabled:!Ra,title:Ea("olm~A specific namespace on the cluster")},l.createElement("div",{className:"co-m-radio-desc"},l.createElement("p",{className:"text-muted"},za(I.d.InstallModeTypeOwnNamespace)))))),l.createElement("div",{className:"form-group form-group--doubled-bottom-margin"},l.createElement("label",{className:"co-required",htmlFor:"dropdown-selectbox"},Ea("olm~Installed Namespace")),ka===I.d.InstallModeTypeAllNamespaces&&Za,ka===I.d.InstallModeTypeOwnNamespace&&Qa),l.createElement("div",{className:"form-group"},l.createElement("fieldset",null,l.createElement("label",{className:"co-required"},Ea("olm~Update approval")),l.createElement(j.B,null,Ea("olm~The strategy to determine either manual or automatic updates.")),l.createElement(N.a,{currentValue:Ze,items:[{value:I.e.Automatic,title:Ea("olm~Automatic"),disabled:at},{value:I.e.Manual,title:Ea("olm~Manual")}],onChange:e=>{const{value:a}=e.currentTarget;Qe(a),a===I.e.Automatic&&Je(Be)}}),Ze===I.e.Automatic&&(null==xa?void 0:xa.length)>0&&l.createElement(n.a,{isInline:!0,className:"co-alert co-alert--margin-top",variant:"info",title:Ea("olm~Will function as manual approval strategy")},l.createElement(x.b,{subscriptions:xa,namespace:Va})),Ze===I.e.Manual&&l.createElement(n.a,{isInline:!0,className:"co-alert co-alert--margin-top",variant:"info",title:Ea("olm~Manual approval applies to all operators in a namespace")},l.createElement(f.Trans,{ns:"olm"},"Installing an operator with manual approval causes all operators installed in namespace ",l.createElement("strong",null,{selectedTargetNamespace:Va})," to function as manual approval strategy and will be updated altogether. Install operators into separate namespaces for handling their updates independently. To allow automatic approval, all operators installed in the namespace must use automatic approval strategy.")))),Ia.length>0&&pa&&_a&&l.createElement(T.a,{catalogSource:ve,csvPlugins:Ia,enabledPlugins:va,setPluginEnabled:(e,a)=>{ba(a?[...va,e]:va.filter(a=>a!==e))}})),Na&&l.createElement(D.a,{deprecatedPackage:ga,deprecatedChannel:ha,deprecatedVersion:fa}),l.createElement("div",{className:"co-form-section__separator"}),da&&l.createElement(n.a,{isInline:!0,className:"co-alert co-alert--scrollable",variant:"danger",title:Ea("olm~An error occurred")},l.createElement("div",{className:"co-pre-line"},da))||!qa(Va)(ka)&&l.createElement(n.a,{isInline:!0,className:"co-alert",variant:"danger",title:Ea("olm~Namespace does not support installation mode")},ka===I.d.InstallModeTypeOwnNamespace&&Va===Ta?l.createElement(l.Fragment,null,Ea("olm~The {{namespace}} Namespace is reserved for global Operators that watch all Namespaces. To install an Operator in a single Namespace, select a different Namespace where the operand should run.",{namespace:Va})):l.createElement(l.Fragment,null,Ea("olm~The OperatorGroup in the {{namespace}} Namespace does not support the {{mode}} installation mode. Select a different installation Namespace that supports this mode.",{namespace:Va,mode:ka===I.d.InstallModeTypeAllNamespaces?" global ":" single-Namespace "})))||$a(Va)&&l.createElement(n.a,{isInline:!0,className:"co-alert",variant:"danger",title:Ea('olm~A Subscription for this Operator already exists in Namespace "{{namespace}}"',{namespace:Va})},l.createElement("p",null,l.createElement(f.Trans,{t:Ea,ns:"olm"},"Remove the"," ",l.createElement(O.Link,{to:Object(j.uc)(_.SubscriptionModel,pe,Va)},"existing Subscription")," ","in order to install this Operator in Namespace ",'"',{selectedTargetNamespace:Va},'"')))||!d.a(Ka(Va))&&l.createElement(n.a,{isInline:!0,className:"co-alert",variant:"danger",title:Ea("olm~Operator conflicts exist")},Ea("olm~Installing this Operator in the selected Namespace would cause conflicts with another Operator providing these APIs:"),l.createElement("ul",null,Ka(Va).map(e=>l.createElement("li",{key:e},l.createElement("strong",null,Object(y.tb)(e))," ",l.createElement("i",null,"(",Object(y.o)(e),")")))))||Va&&ea&&l.createElement(n.a,{isInline:!0,className:"co-alert",variant:"danger",title:Ea("olm~Operator not available for selected Namespaces")}),l.createElement(c.a,{className:"pf-v5-c-form"},l.createElement(i.a,{"data-test":"install-operator",onClick:()=>G(void 0,void 0,void 0,(function*(){var a,t,l,n,r;ua("");const o={metadata:{name:Va,labels:Pa&&ia?{"openshift.io/cluster-monitoring":"true"}:{}}},s=v.a({},o,Ca),c=Va+"-prometheus",i=null===(t=null===(a=null==ie?void 0:ie.status)||void 0===a?void 0:a.channels)||void 0===t?void 0:t.find(e=>e.name===ze),m=null===(n=null===(l=null==i?void 0:i.entries)||void 0===l?void 0:l.find(e=>e.version===We))||void 0===n?void 0:n.name,d={kind:C.RoleModel.kind,apiVersion:`${C.RoleModel.apiGroup}/${C.RoleModel.apiVersion}`,metadata:{name:c,namespace:Va},rules:[{apiGroups:[""],resources:["services","endpoints","pods"],verbs:["get","list","watch"]}]},u={kind:C.RoleBindingModel.kind,apiVersion:`${C.RoleBindingModel.apiGroup}/${C.RoleBindingModel.apiVersion}`,metadata:{name:c,namespace:Va},roleRef:{kind:"Role",name:c,apiGroup:C.RoleBindingModel.apiGroup},subjects:[{kind:"ServiceAccount",name:"prometheus-k8s",namespace:"openshift-monitoring"}]},p=Object.assign({apiVersion:Object(y.n)(_.OperatorGroupModel),kind:"OperatorGroup",metadata:{generateName:Va+"-",namespace:Va}},ka===I.d.InstallModeTypeAllNamespaces?{}:{spec:{targetNamespaces:[Va]}}),E={apiVersion:Object(y.n)(_.SubscriptionModel),kind:"Subscription",metadata:{name:pe,namespace:Va},spec:{source:ve,sourceNamespace:be,name:pe,startingCSV:m,channel:ze,installPlanApproval:Ze}};switch(He){case"AWS":E.spec.config={env:[{name:"ROLEARN",value:ge}]};break;case"Azure":E.spec.config={env:[{name:"CLIENTID",value:Ne},{name:"TENANTID",value:fe},{name:"SUBSCRIPTIONID",value:ke}]};break;case"GCP":E.spec.config={env:[{name:"PROJECT_NUMBER",value:Ce},{name:"POOL_ID",value:Pe},{name:"PROVIDER_ID",value:_e},{name:"SERVICE_ACCOUNT_EMAIL",value:we}]}}try{Da&&!ta&&(yield Object(y.jb)(C.NamespaceModel,s),Pa&&ia&&(yield Object(y.jb)(C.RoleModel,d),yield Object(y.jb)(C.RoleBindingModel,u))),e.operatorGroup.data.some(e=>e.metadata.namespace===Va)||(yield Object(y.jb)(_.OperatorGroupModel,p)),yield Object(y.jb)(_.SubscriptionModel,E);const a=(null===(r=null==pa?void 0:pa.spec)||void 0===r?void 0:r.plugins)||[],t=[...a.filter(e=>!Ia.includes(e)),...va];!b.a(a.sort(),t.sort())&&_a&&(yield Object(y.pb)(C.ConsoleOperatorConfigModel,pa,[{path:"/spec/plugins",value:t,op:"add"}])),Ua(m)}catch(e){ua(e.message||Ea("olm~Could not create Operator Subscription."))}})),isDisabled:[ze,ka,Va,Ze].some(e=>E.a(e)||d.a(e))||$a(Va)||!qa(Va)(ka)||Va&&ea||!d.a(Ka(Va))||"AWS"===He&&d.a(ge)||"Azure"===He&&[Ne,fe,ke].some(e=>d.a(e))||"GCP"===He&&[Ce,Pe,_e,we].some(e=>d.a(e)),variant:"primary"},Ea("olm~Install")),l.createElement(i.a,{variant:"secondary",onClick:()=>j.Vb.push("/operatorhub")},Ea("public~Cancel")))),l.createElement("div",{className:"col-xs-6"},l.createElement(V.a,{displayName:(null==qe?void 0:qe.displayName)||(null===(se=null===(oe=null==ue?void 0:ue[0])||void 0===oe?void 0:oe.currentCSVDesc)||void 0===se?void 0:se.displayName),icon:Object(x.g)(e.packageManifest.data[0]),provider:de,deprecation:null===(ce=null==ie?void 0:ie.status)||void 0===ce?void 0:ce.deprecation}),l.createElement("h4",null,Ea("olm~Provided APIs")),l.createElement("div",{className:"co-crd-card-row"},et.length?et.map(e=>l.createElement(A.CRDCard,{key:Object(x.l)(e),canCreate:!1,crd:e,csv:null,required:Object(x.l)(e)===wa})):l.createElement("span",{className:"text-muted"},Ea("olm~No Kubernetes APIs are provided by this Operator.")))))))},q=e=>l.createElement(j.wb,{data:e.packageManifest.data[0],loaded:e.loaded,loadError:e.loadError},l.createElement($,Object.assign({},e))),K=e=>l.createElement(j.C,{resources:[{isList:!0,kind:Object(y.Hb)(_.OperatorGroupModel),prop:"operatorGroup"},{isList:!0,kind:Object(y.Hb)(_.PackageManifestModel),namespace:new URLSearchParams(window.location.search).get("catalogNamespace"),fieldSelector:"metadata.name="+new URLSearchParams(window.location.search).get("pkg"),selector:{matchLabels:{catalog:new URLSearchParams(window.location.search).get("catalog")}},prop:"packageManifest"},{isList:!0,kind:Object(y.Hb)(_.SubscriptionModel),prop:"subscription"}]},l.createElement(q,Object.assign({},e,{targetNamespace:new URLSearchParams(window.location.search).get("targetNamespace")||null})));q.displayName="OperatorHubSubscribe",$.displayName="OperatorHubSubscribeForm",K.displayName="OperatorHubSubscribePage"},5691:function(e,a,t){"use strict";a.__esModule=!0,a.chart_color_blue_300={name:"--pf-v5-chart-color-blue-300",value:"#06c",var:"var(--pf-v5-chart-color-blue-300, #06c)"},a.default=a.chart_color_blue_300},5692:function(e,a,t){"use strict";a.__esModule=!0,a.chart_color_blue_100={name:"--pf-v5-chart-color-blue-100",value:"#8bc1f7",var:"var(--pf-v5-chart-color-blue-100, #8bc1f7)"},a.default=a.chart_color_blue_100},5737:function(e,a,t){"use strict";t.d(a,"d",(function(){return p})),t.d(a,"b",(function(){return v})),t.d(a,"c",(function(){return b})),t.d(a,"a",(function(){return E}));var l,n=t(0),r=t(88),o=t(351),s=t(6351),c=t(80),i=t(1939),m=t(7),d=t(976);!function(e){e.PackageDeprecated="PackageDeprecated",e.ChannelDeprecated="ChannelDeprecated",e.VersionDeprecated="BundleDeprecated"}(l||(l={}));const u=(e,a)=>{var t,l;return{deprecation:null===(l=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.conditions)||void 0===l?void 0:l.find(e=>e.type===a)}},p=e=>({deprecatedPackage:u(e,l.PackageDeprecated),deprecatedChannel:u(e,l.ChannelDeprecated),deprecatedVersion:u(e,l.VersionDeprecated)}),v=({deprecation:e,className:a})=>{const{t:t}=Object(m.useTranslation)();return n.createElement(r.a,{content:t("olm~Deprecated: {{message}}",{message:null==e?void 0:e.message})},n.createElement(o.a,{"data-test":"deprecated-operator-warning-badge",color:"orange",className:a,icon:n.createElement(d.Y,null)},t("olm~Deprecated")))},b=({deprecation:e,dataTest:a})=>{const{t:t}=Object(m.useTranslation)();return n.createElement(r.a,{content:t("olm~Deprecated: {{message}}",{message:null==e?void 0:e.message})},n.createElement(d.Y,{dataTest:a,className:"pf-v5-u-ml-xs"}))},E=({deprecatedPackage:e,deprecatedChannel:a,deprecatedVersion:t,dismissible:l})=>{var r,o,d;const{t:u}=Object(m.useTranslation)(),[p,v]=n.useState(!0);return p&&n.createElement(s.a,{className:"pf-v5-u-my-md"},n.createElement(c.a,{variant:"warning",title:u("olm~Deprecated warnings"),"aria-live":"polite",isInline:!0,actionClose:l&&n.createElement(i.a,{onClose:()=>v(!1)})},n.createElement("div",{"data-test":"deprecated-operator-warning-package"},null===(r=null==e?void 0:e.deprecation)||void 0===r?void 0:r.message),n.createElement("div",{"data-test":"deprecated-operator-warning-channel"},null===(o=null==a?void 0:a.deprecation)||void 0===o?void 0:o.message),n.createElement("div",{"data-test":"deprecated-operator-warning-version"},null===(d=null==t?void 0:t.deprecation)||void 0===d?void 0:d.message)))}},5893:function(e,a,t){"use strict";t.d(a,"a",(function(){return d}));var l=t(0),n=t(447),r=t(22),o=t(16),s=t(7),c=t(6003),i=t.n(c),m=t(5737);const d=e=>{const{icon:a,displayName:t,provider:c,version:d,deprecation:u}=e,{t:p}=Object(s.useTranslation)(),v=n.a(a)?a:r.a(a)?i.a:`data:${a.mediatype};base64,${a.base64data}`;return l.createElement("div",{className:"co-clusterserviceversion-logo"},l.createElement("div",{className:"co-clusterserviceversion-logo__icon"},l.createElement("span",{className:"co-catalog-item-icon__bg"},l.createElement("img",{className:"co-catalog-item-icon__img co-catalog-item-icon__img--large",src:v,alt:t,"aria-hidden":!0}))),l.createElement("div",{className:"co-clusterserviceversion-logo__name"},l.createElement("h1",{className:"co-clusterserviceversion-logo__name__clusterserviceversion"},t," ",u&&l.createElement(m.b,{className:"pf-v5-u-ml-sm",deprecation:u})),c&&l.createElement("span",{className:"co-clusterserviceversion-logo__name__provider text-muted"},p("olm~{{version}} provided by {{provider}}",{version:d||"",provider:o.a(c,"name",c)}))))}},6003:function(e,a,t){e.exports=t.p+"assets/packages/operator-lifecycle-manager/src/operator.svg"},6017:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var l=t(0);const n=({name:e,label:a,checked:t,onChange:n})=>l.createElement("div",{className:"form-group"},l.createElement("div",{className:"checkbox"},l.createElement("label",{className:"control-label"},l.createElement("input",{"data-test":a+"__checkbox",className:"form-checkbox",name:e,onChange:n,checked:t,"data-checked-state":t,type:"checkbox"}),a)))},6023:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var l=t(34);const n=Object(l.a)({name:"AddCircleOIcon",height:1024,width:1024,svgPath:"M576,303 C576,294.715729 569.284271,288 561,288 L463,288 C454.715729,288 448,294.715729 448,303 L448,448 L303,448 C294.715729,448 288,454.715729 288,463 L288,561 C288,569.284271 294.715729,576 303,576 L448,576 L448,720.9 C447.983373,729.207373 454.6927,735.961429 463,736 L561,736 C569.3073,735.961429 576.016627,729.207373 576,720.9 L576,576 L721,576 C724.969024,576.026638 728.784638,574.468589 731.600595,571.671405 C734.416553,568.87422 736.000031,565.069113 736.000031,561.1 L736.000031,463.1 C736.016627,454.792627 729.3073,448.038571 721,448 L576,448 L576,303 Z M512,896 C300.2,896 128,723.9 128,512 C128,300.3 300.2,128 512,128 C723.8,128 896,300.2 896,512 C896,723.8 723.7,896 512,896 Z M512.1,0 C229.7,0 0,229.8 0,512 C0,794.2 229.8,1024 512.1,1024 C794.4,1024 1024,794.3 1024,512 C1024,229.7 794.4,0 512.1,0 Z",yOffset:0,xOffset:0});a.b=n},6037:function(e,a,t){"use strict";t.d(a,"a",(function(){return G}));var l=t(0),n=t(4357),r=t(80),o=t(50),s=t(7),c=t(77),i=t(697),m=t(53),d=t(109),u=t(6017),p=t(118),v=t(5),b=t(108),E=t(175),g=t(10),h=t(8),f=t(15),O=t(30),N=t(2234),j=t(6176),k=t(197),S=t(474),C=t(125),y=t(5942),P=t(59),M=t(1947),_=function(e,a,t,l){return new(t||(t=Promise))((function(n,r){function o(e){try{c(l.next(e))}catch(e){r(e)}}function s(e){try{c(l.throw(e))}catch(e){r(e)}}function c(e){var a;e.done?n(e.value):(a=e.value,a instanceof t?a:new t((function(e){e(a)}))).then(o,s)}c((l=l.apply(e,a||[])).next())}))};const I={kind:"DeleteOptions",apiVersion:"v1",propagationPolicy:"Foreground"},w=({cancel:e,close:a,csv:t,k8sKill:n,subscription:r})=>{var o,y,w,A,D,H,G,U,z,$;const{t:q}=Object(s.useTranslation)(),[K,B,W]=Object(N.a)(),[J,X]=l.useState(!0),[Y,Z]=l.useState(!1),[Q,ee]=l.useState(!1),[ae,te]=l.useState(!1),[le,ne]=l.useState(0),[re,oe]=l.useState(!1),[se,ce]=l.useState([]),[ie,me]=l.useState(!1),[de,ue]=l.useState(""),pe=Object(E.d)({group:g.ConsoleOperatorConfigModel.apiGroup,resource:g.ConsoleOperatorConfigModel.plural,verb:"patch",name:O.p}),ve=Object(M.b)(null===(o=null==t?void 0:t.metadata)||void 0===o?void 0:o.annotations),[be]=Object(b.a)(pe&&ve.length>0?{kind:Object(h.Hb)(g.ConsoleOperatorConfigModel),isList:!1,name:O.p}:null),Ee=ve.filter(e=>Object(k.X)(be,e)),ge=!!be&&pe&&Ee.length>0,he=null===(y=null==r?void 0:r.spec)||void 0===y?void 0:y.name,fe=null===(w=null==r?void 0:r.metadata)||void 0===w?void 0:w.namespace,Oe=B||ae,Ne=!Oe&&(!Q||re)&&Y,je=se.length>0||""!==W,ke="true"===(null===(D=null===(A=null==t?void 0:t.metadata)||void 0===A?void 0:A.annotations)||void 0===D?void 0:D["console.openshift.io/disable-operand-delete"]),[Se,Ce,ye]=Object(j.a)(he,fe),Pe=l.useCallback(()=>_(void 0,void 0,void 0,(function*(){var e;const a=ge?Object(k.x)(be,Ee):null,t=[n(C.SubscriptionModel,r,{},I),...(null===(e=null==r?void 0:r.status)||void 0===e?void 0:e.installedCSV)&&(yield _(void 0,void 0,void 0,(function*(){try{return yield Object(c.j)({model:C.ClusterServiceVersionModel,name:r.status.installedCSV,ns:r.metadata.namespace}),!0}catch(e){return 404!==e.response.status&&ue(e.message),!1}})))?[n(C.ClusterServiceVersionModel,{metadata:{name:r.status.installedCSV,namespace:r.metadata.namespace}},{},I)]:[],...ge?[Object(h.pb)(g.ConsoleOperatorConfigModel,be,[a])]:[]];K(Promise.all(t)).then(()=>{Z(!0)}).catch(()=>{Z(!0)})})),[be,Ee,K,n,ge,r]),Me=l.useCallback(e=>{te(!1),oe(!0),e?Pe():(me(!0),Z(!0))},[Pe]),_e=l.useCallback(()=>{const e=`${window.SERVER_FLAGS.basePath}api/list-operands/?name=${he}&namespace=${fe}`,a=setInterval(()=>{Object(d.c)(e).then(e=>{ne(e.items.length),0===e.items.length&&(clearInterval(a),setTimeout(()=>Me(!0),1e3))}).catch(()=>{Me(!1)})},2e3);return a},[Me,he,fe]),Ie=l.useCallback(()=>{var e;a(),(window.location.pathname.split("/").includes(r.metadata.name)||window.location.pathname.split("/").includes(null===(e=null==r?void 0:r.status)||void 0===e?void 0:e.installedCSV))&&v.Vb.push(Object(v.rc)(C.ClusterServiceVersionModel,Object(m.c)()))},[a,r]);l.useEffect(()=>{Ne&&!je&&Ie()},[Ie,je,Ne]),l.useEffect(()=>{let e;return ae&&(e=_e()),()=>{e&&clearInterval(e)}},[ae,_e]);const we=(null===(H=null==t?void 0:t.spec)||void 0===H?void 0:H.displayName)||(null===(G=null==r?void 0:r.spec)||void 0===G?void 0:G.name),Te=null===(U=null==t?void 0:t.metadata)||void 0===U?void 0:U.name,Ve=r.metadata.namespace===S.a?"all-namespaces":r.metadata.namespace,Ae=null===($=null===(z=null==t?void 0:t.metadata)||void 0===z?void 0:z.annotations)||void 0===$?void 0:$[P.d.UninstallMessage],De=!Ce||Se.length>0,Fe=l.createElement(l.Fragment,null,l.createElement("p",null,De&&l.createElement(l.Fragment,null," ",q("olm~Select the checkbox below to also remove all Operands associated with this Operator."))," ",q("olm~If your Operator configured off-cluster resources, these will continue to run and require manual cleanup.")),ge&&l.createElement("p",null,q("olm~The console plugin provided by this operator will be disabled and removed.",{count:Ee.length}))),xe=ye?l.createElement(V,{operandsLoadedErrorMessage:ye}):De&&l.createElement(l.Fragment,null,l.createElement("span",{className:"co-operator-uninstall__operands-section"},l.createElement("h2",null,q("olm~Operand instances")),l.createElement(R,{operands:Se,loaded:Ce,csvName:Te,cancel:e})),l.createElement(u.a,{onChange:({currentTarget:e})=>ee(e.checked),name:"delete-all-operands",label:q("olm~Delete all operand instances for this operator"),checked:Q})),Le=se.length?l.createElement(F,{operandDeletionErrors:se,csvName:Te,cancel:e}):ie?l.createElement(V,{operandsLoadedErrorMessage:q("olm~Error listing operand to verify deletion")}):l.createElement(x,{name:we,namespace:Ve}),Re=l.createElement(l.Fragment,null,l.createElement(L,{errorMessage:de||W||(se.length?q("olm~Operator could not be uninstalled due to error deleting its Operands"):""),name:we,namespace:Ve}),Q&&Le);return l.createElement("form",{onSubmit:e=>{if(e.preventDefault(),Ne)Ie();else if(X(!1),Q){te(!0),ne(Se.length);const e=Se.map(e=>{const a=Object(h.vb)(Object(h.Db)(e));return n(a,e,{},I)});Object(i.a)(e).then(([,,e])=>{const a=e.reduce((e,a,t)=>"rejected"===a.status?e.concat({operand:Se[t],errorMessage:a.reason}):e,[]);a.length&&(ce(a),te(!1),oe(!0),Z(!0))})}else oe(!0),Pe()},name:"form",className:"modal-content co-catalog-install-modal"},l.createElement(p.d,{className:"modal-header"},l.createElement(f.tc,{className:"co-icon-space-r"})," ",q("olm~Uninstall Operator?")),l.createElement(p.a,null,J&&l.createElement(l.Fragment,null,l.createElement("p",null,l.createElement(s.Trans,{t:q,ns:"olm"},"Operator ",l.createElement("strong",null,{name:we})," will be removed from"," ",l.createElement("strong",null,{namespace:Ve}),".")),!ke&&l.createElement(l.Fragment,null,Fe),Ae&&l.createElement(l.Fragment,null,l.createElement("h2",null,q("olm~Message from Operator developer")),l.createElement("p",null,Ae)),!ke&&l.createElement(l.Fragment,null,xe)),ae&&l.createElement(T,{total:Se.length,remaining:le}),B&&l.createElement("div",null,l.createElement("p",null,q("olm~Uninstalling the Operator..."))),Ne&&Re),l.createElement(p.c,{inProgress:Oe,cancel:e,submitDanger:!Ne,submitText:q(Ne?"olm~OK":"olm~Uninstall"),submitDisabled:Oe}))},T=({total:e,remaining:a})=>{const{t:t}=Object(s.useTranslation)(),r=t("olm~Remaining Operands: {{remaining}} of {{total}} ",{remaining:a,total:e});return l.createElement("div",null,l.createElement(n.a,{value:e-a,max:e,valueText:r,label:r,title:t("olm~Cleaning up operand instances..."),size:n.b.lg}),l.createElement("div",{className:"co-alert--margin-top"},l.createElement("p",null,t("olm~The operands have been marked for deletion and are being removed. Canceling this operation will leave the Operator installed though its operand instances will continue to be deleted."))))},V=({operandsLoadedErrorMessage:e})=>{const{t:a}=Object(s.useTranslation)();return l.createElement(r.a,{variant:"warning",className:"co-alert",title:a("olm~Cannot load Operands"),isInline:!0},l.createElement("p",null,a("olm~There was an error loading operands for this operator. Operands will need to be deleted manually.")),l.createElement("p",null,e))},A=({name:e,namespace:a})=>{const{t:t}=Object(s.useTranslation)();return l.createElement(r.a,{variant:"success",className:"co-alert",title:t("olm~Successfully uninstalled Operator"),isInline:!0},l.createElement("p",null,l.createElement(s.Trans,{t:t,ns:"olm"},"Operator ",l.createElement("strong",null,{name:e})," successfully uninstalled from"," ",l.createElement("strong",null,{namespace:a}),".")))},D=({errorMessage:e})=>{const{t:a}=Object(s.useTranslation)();return l.createElement(r.a,{variant:"danger",className:"co-alert",title:a("olm~Error uninstalling Operator"),isInline:!0},l.createElement("p",null,a("olm~There was an error uninstalling the operator."),l.createElement("br",null),e))},F=({operandDeletionErrors:e,csvName:a,cancel:t})=>{const{t:n}=Object(s.useTranslation)();return l.createElement(r.a,{variant:"danger",className:"co-alert",title:n("olm~Error deleting Operands"),isInline:!0},l.createElement("p",null,n("olm~There were errors deleting the following Operands, they will need to be deleted manually:")),l.createElement(H,{operandErrors:e,csvName:a,cancel:t}))},x=({name:e,namespace:a})=>{const{t:t}=Object(s.useTranslation)();return l.createElement(r.a,{variant:"success",className:"co-alert",title:t("olm~Successfully deleted all Operand Instances"),isInline:!0},l.createElement("p",null,l.createElement(s.Trans,{t:t,ns:"olm"},"All Operand instances for Operator ",l.createElement("strong",null,{name:e})," in"," ",l.createElement("strong",null,{namespace:a})," have been deleted.")))},L=({errorMessage:e,name:a,namespace:t})=>e?l.createElement(D,{errorMessage:e}):l.createElement(A,{name:a,namespace:t}),R=({operands:e,loaded:a,csvName:t,cancel:n})=>{const{t:r}=Object(s.useTranslation)();return l.createElement(v.wb,{skeleton:l.createElement("div",{className:"loading-skeleton--table"}),data:e,loaded:a},l.createElement("table",{className:"pf-v5-c-table pf-m-compact pf-m-border-rows"},l.createElement("thead",{className:"pf-v5-c-table__thead"},l.createElement("tr",{className:"pf-v5-c-table__tr",key:"operand-table-header-row"},l.createElement("th",{className:"pf-m-width-35 pf-v5-c-table__th"},r("olm~Name")),l.createElement("th",{className:"pf-v5-c-table__th"},r("olm~Kind")),l.createElement("th",{className:"pf-v5-c-table__th"},r("olm~Namespace")))),l.createElement("tbody",null,e.sort((e,a)=>e.metadata.name.localeCompare(a.metadata.name)).map(e=>l.createElement("tr",{className:"pf-v5-c-table__tr",key:e.metadata.uid},l.createElement("td",{className:"pf-v5-c-table__td"},l.createElement(y.a,{obj:e,csvName:t,onClick:n})),l.createElement("td",{className:"pf-v5-c-table__td pf-m-break-word","data-test-operand-kind":e.kind},e.kind),l.createElement("td",{className:"pf-v5-c-table__td"},e.metadata.namespace?l.createElement(v.hb,{kind:"Namespace",name:e.metadata.namespace,onClick:n}):"-"))))))},H=({operandErrors:e,csvName:a,cancel:t})=>{const{t:n}=Object(s.useTranslation)();return l.createElement("ul",{className:"co-operator-uninstall-alert__list"},o.a(e,e=>l.createElement("li",{key:e.operand.metadata.uid,className:"pf-v5-c-list pf-m-plain co-operator-uninstall-alert__list-item"},l.createElement(y.a,{obj:e.operand,csvName:a,onClick:t})," ",e.operand.kind,"  ",n("olm~Error: {{error}}",{error:e.errorMessage}))))},G=Object(p.f)(w);w.displayName="UninstallOperatorModal"},6086:function(e,a,t){"use strict";t.d(a,"a",(function(){return u}));var l=t(0),n=t(966),r=t(19),o=t(380),s=t(7),c=t(118),i=t(5),m=t(1405);const d=({cancel:e,stepResource:a})=>{const{t:t}=Object(s.useTranslation)();return l.createElement("div",{className:"modal-content"},l.createElement(c.d,null,t("olm~InstallPlan Preview")," ",l.createElement(i.hb,{linkTo:!1,name:a.name,kind:Object(m.m)(a)})),l.createElement(c.a,null,l.createElement(i.l,{value:Object(o.safeDump)(JSON.parse(a.manifest))})),l.createElement(c.b,{inProgress:!1},l.createElement(n.a,{className:"pf-v5-c-form pf-v5-c-form__actions--right pf-v5-c-form__group--no-top-margin"},l.createElement(r.a,{type:"button",variant:"secondary",onClick:()=>e()},t("public~OK")))))},u=Object(c.f)(d);d.displayName="InstallPlanPreview"},6120:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var l=t(0),n=t(31),r=t(53);const o=()=>{const e=Object(n.useDispatch)(),a=Object(n.useSelector)(e=>e.UI.getIn(["deprecatedOperator","package"])),t=Object(n.useSelector)(e=>e.UI.getIn(["deprecatedOperator","channel"])),o=Object(n.useSelector)(e=>e.UI.getIn(["deprecatedOperator","version"]));return{deprecatedPackage:a,setDeprecatedPackage:Object(l.useCallback)(a=>e(r.o(a)),[e]),deprecatedChannel:t,setDeprecatedChannel:Object(l.useCallback)(a=>e(r.n(a)),[e]),deprecatedVersion:o,setDeprecatedVersion:Object(l.useCallback)(a=>e(r.p(a)),[e])}}},6176:function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));var l=t(0),n=t(182);const r=(e,a)=>{const[t,r]=l.useState([]),[o,s]=l.useState(!1),[c,i]=l.useState("");return l.useEffect(()=>{const t=`${window.SERVER_FLAGS.basePath}api/list-operands/?name=${e}&namespace=${a}`;Object(n.b)(t).then(e=>{var a;r(null!==(a=null==e?void 0:e.items)&&void 0!==a?a:[]),s(!0),i("")}).catch(t=>{r([]),s(!0),i(`Error loading Operands for ${e} in ${a}: ${t}`)})},[e,a]),[t,o,c]}},6177:function(e,a,t){"use strict";t.d(a,"a",(function(){return v}));var l=t(0),n=t(640),r=t(489),o=t(7),s=t(118),c=t(692),i=t(8),m=t(2234),d=t(125),u=t(146);const p=e=>{var a,t,l,n,r,o;return null!==(o=null!==(l=null===(t=null===(a=e)||void 0===a?void 0:a.spec)||void 0===t?void 0:t.installPlanApproval)&&void 0!==l?l:null===(r=null===(n=e)||void 0===n?void 0:n.spec)||void 0===r?void 0:r.approval)&&void 0!==o?o:u.e.Automatic},v=Object(s.f)(({cancel:e,close:a,k8sUpdate:t,obj:v})=>{const{t:b}=Object(o.useTranslation)(),[E,g,h]=Object(m.a)(),[f,O]=l.useState(p(v)),N=l.useCallback(e=>{e.preventDefault();const l=n.a(v);Object(i.Db)(l)===Object(i.Hb)(d.SubscriptionModel)?l.spec.installPlanApproval=f:Object(i.Db)(l)===Object(i.Hb)(d.InstallPlanModel)&&(l.spec.approval=f),E(t(Object(i.vb)(Object(i.Db)(v)),l)).then(()=>null==a?void 0:a()).catch(r.a)},[a,E,t,v,f]);return l.createElement("form",{onSubmit:N,name:"form",className:"modal-content"},l.createElement(s.d,{className:"modal-header"},b("olm~Change update approval strategy")),l.createElement(s.a,null,l.createElement("div",{className:"co-m-form-row"},l.createElement("p",null,b("olm~What strategy is used for approving updates?"))),l.createElement("div",{className:"co-m-form-row row"},l.createElement("div",{className:"col-sm-12"},l.createElement(c.b,{onChange:e=>O(e.target.value),value:u.e.Automatic,checked:f===u.e.Automatic,title:b("olm~Automatic"),subTitle:`(${b("public~default")})`},l.createElement("div",{className:"co-m-radio-desc"},l.createElement("p",{className:"text-muted"},b("olm~New updates will be installed as soon as they become available."))))),l.createElement("div",{className:"col-sm-12"},l.createElement(c.b,{onChange:e=>O(e.target.value),value:u.e.Manual,checked:f===u.e.Manual,title:b("olm~Manual")},l.createElement("div",{className:"co-m-radio-desc"},l.createElement("p",{className:"text-muted"},b("olm~New updates need to be manually approved before installation begins."))))))),l.createElement(s.c,{inProgress:g,errorMessage:h,cancel:e,submitText:b("public~Save"),submitDisabled:p(v)===f}))})},6178:function(e,a,t){"use strict";t.d(a,"a",(function(){return u}));var l=t(0),n=t(7),r=t(118),o=t(692),s=t(5),c=t(8),i=t(2234),m=t(125),d=t(5737);const u=Object(r.f)(({cancel:e,close:a,k8sUpdate:t,pkg:u,subscription:p})=>{var v,b,E,g,h,f,O,N;const{t:j}=Object(n.useTranslation)(),k=null!==(b=null===(v=null==p?void 0:p.spec)||void 0===v?void 0:v.channel)&&void 0!==b?b:null===(h=null===(g=null===(E=null==u?void 0:u.status)||void 0===E?void 0:E.channels)||void 0===g?void 0:g[0])||void 0===h?void 0:h.name,[S,C,y]=Object(i.a)(),[P,M]=l.useState(k),_=l.useCallback(e=>{e.preventDefault(),S(t(m.SubscriptionModel,Object.assign(Object.assign({},p),{spec:Object.assign(Object.assign({},p.spec),{channel:P})}))).then(()=>null==a?void 0:a()).catch(()=>{})},[a,S,t,P,p]);return l.createElement("form",{onSubmit:_,name:"form",className:"modal-content"},l.createElement(r.d,{className:"modal-header"},j("olm~Change Subscription update channel")),l.createElement(r.a,null,l.createElement("div",{className:"co-m-form-row"},l.createElement("p",null,j("olm~Which channel is used to receive updates?"))),l.createElement("div",{className:"co-m-form-row row"},null===(N=null===(O=null===(f=null==u?void 0:u.status)||void 0===f?void 0:f.channels)||void 0===O?void 0:O.map)||void 0===N?void 0:N.call(O,e=>l.createElement("div",{key:e.name,className:"col-sm-12"},l.createElement(o.b,{onChange:e=>M(e.target.value),value:e.name,checked:P===e.name,title:e.name,subTitle:l.createElement(s.hb,{linkTo:!1,name:e.currentCSV,title:e.currentCSV,kind:Object(c.Hb)(m.ClusterServiceVersionModel)},(null==e?void 0:e.deprecation)?l.createElement(d.c,{deprecation:null==e?void 0:e.deprecation}):null)}))))),l.createElement(r.c,{inProgress:C,errorMessage:y,cancel:e,submitText:j("public~Save"),submitDisabled:P===k}))})},6351:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var l=t(12),n=t(0),r=t(4),o=t(189);const s=e=>{var{children:a=null,className:t=""}=e,s=Object(l.__rest)(e,["children","className"]);return n.createElement("div",Object.assign({},s,{className:Object(r.css)(o.a.form+"__alert",t)}),a)};s.displayName="FormAlert"},6352:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var l=t(31);const n=()=>Object(l.useSelector)(({UI:e})=>e.get("activeNamespace"))},6353:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var l=t(77),n=t(5),r=t(15),o=t(125);const s=e=>{const[a]=Object(r.ue)(),t=Object(l.e)(o.ClusterServiceVersionModel);return window.SERVER_FLAGS.copiedCSVsDisabled&&"openshift"===e.metadata.namespace&&a!==r.c?Object(n.tc)(t,e.metadata.name,a):Object(n.sc)(e,t)}},6355:function(e,a,t){"use strict";t.d(a,"a",(function(){return b})),t.d(a,"b",(function(){return E}));var l=t(0),n=t(205),r=t(354),o=t(165),s=t(294),c=t(80),i=t(501),m=t(7),d=t(5),u=t(15),p=t(5737),v=t(6120);const b=({packageManifest:e,selectedUpdateChannel:a,setUpdateChannel:t,setUpdateVersion:c})=>{const{t:b}=Object(m.useTranslation)(),E=l.useMemo(()=>{var a;return null!==(a=null==e?void 0:e.status.channels)&&void 0!==a?a:[]},[e]),[g,h]=l.useState(!1),{setDeprecatedChannel:f}=Object(v.a)();E.sort((e,a)=>-Object(u.uc)(e.name,a.name));const O=e=>l.createElement(l.Fragment,null,e.name," ",(null==e?void 0:e.deprecation)&&l.createElement(p.c,{deprecation:null==e?void 0:e.deprecation,dataTest:"deprecated-operator-warning-channel-icon"})),N=E.map(e=>l.createElement(n.a,{key:e.name,id:e.name,value:e.name,"data-test":"channel-option-"+e.name},O(e)));return l.useEffect(()=>{Object(d.wc)("channel",a),f(i.a(E.find(e=>e.deprecation&&e.name===a),"deprecation"))},[a,E,f]),l.createElement(l.Fragment,null,l.createElement(r.a,{toggle:t=>l.createElement(o.a,{ref:t,onClick:e=>h(e),isExpanded:g,isDisabled:!e,isFullWidth:!0,"aria-label":b("olm~Select a channel"),className:"co-operator-channel__select","data-test":"operator-channel-select-toggle"},O(E.find(e=>e.name===a))),onSelect:(e,a)=>{t(a),h(!1),c("")},selected:a||"-",onOpenChange:e=>h(e),isOpen:g},l.createElement(s.a,null,N)))},E=({packageManifest:e,selectedUpdateChannel:a,updateVersion:t,setUpdateVersion:u,showVersionAlert:b=!1})=>{var E;const{t:g}=Object(m.useTranslation)(),{setDeprecatedVersion:h}=Object(v.a)(),[f,O]=l.useState(!1),[N,j]=l.useState(""),{channels:k=[]}=null!==(E=null==e?void 0:e.status)&&void 0!==E?E:{};l.useEffect(()=>{var e,t,l;j(null!==(l=null===(t=null===(e=k.find(e=>e.name===a))||void 0===e?void 0:e.currentCSVDesc)||void 0===t?void 0:t.version)&&void 0!==l?l:"-")},[k,a]);const S=t||N,C=l.useMemo(()=>{var e,t;return null!==(t=null===(e=k.find(e=>e.name===a))||void 0===e?void 0:e.entries)&&void 0!==t?t:[]},[k,a]),y=e=>l.createElement(l.Fragment,null,null==e?void 0:e.version," ",(null==e?void 0:e.deprecation)&&l.createElement(p.c,{deprecation:null==e?void 0:e.deprecation,dataTest:"deprecated-operator-warning-version-icon"})),P=C.map(e=>l.createElement(n.a,{key:e.version,id:e.version,value:e.version,"data-test":"version-option-"+e.name},y(e)));return l.useEffect(()=>{Object(d.wc)("version",S),h(i.a(C.find(e=>e.deprecation&&e.version===S),"deprecation"))},[S,C,h]),l.createElement(l.Fragment,null,l.createElement(r.a,{toggle:a=>l.createElement(o.a,{ref:a,onClick:e=>O(e),isExpanded:f,isDisabled:!e,isFullWidth:!0,"aria-label":g("olm~Select a version"),className:"co-operator-version__select","data-test":"operator-version-select-toggle"},y(C.find(e=>e.version===S))),onSelect:(e,a)=>{u(a),O(!1)},selected:S,onOpenChange:e=>O(e),isOpen:f},l.createElement(s.a,null,P)),b&&S!==N&&l.createElement(c.a,{variant:"info",isInline:!0,className:"co-alert co-alert--margin-top co-alert__update-approval",title:g("olm~Manual update approval is required when not installing the latest version for the selected channel.")}))}},6431:function(e,a,t){"use strict";a.__esModule=!0,a.chart_color_blue_200={name:"--pf-v5-chart-color-blue-200",value:"#519de9",var:"var(--pf-v5-chart-color-blue-200, #519de9)"},a.default=a.chart_color_blue_200},6624:function(e,a,t){"use strict";t.d(a,"a",(function(){return c}));var l=t(0),n=t(7),r=t(5),o=t(2268),s=t(2241);const c=({catalogSource:e,csvPlugins:a,enabledPlugins:t,setPluginEnabled:c})=>{const{t:i}=Object(n.useTranslation)(),m=a.length;return l.createElement("div",{className:"form-group"},l.createElement("fieldset",null,l.createElement("label",{className:"co-required"},i("olm~Console plugin",{count:m})),l.createElement(r.B,null,i("olm~This operator includes a console plugin which provides a custom interface that can be included in the console. The console plugin will prompt for the console to be refreshed once it has been enabled. Make sure you trust this console plugin before enabling.")),a.map(e=>l.createElement("fieldset",{key:e},l.createElement("div",null,m>1&&l.createElement("legend",{className:"co-legend co-legend--nested text-muted"},e),l.createElement(o.a,{name:e,enabled:t.includes(e),onChange:a=>c(e,a)})))),l.createElement(o.b,{previouslyEnabled:!1,enabled:(null==t?void 0:t.length)>0,trusted:Object(s.a)(e)})))}},8241:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var l=t(44);const n=()=>({className:l.a.modifiers.wrap})}}]);
//# sourceMappingURL=operator-hub-subscribe-chunk-79eada39bbc75d8c4094.min.js.map
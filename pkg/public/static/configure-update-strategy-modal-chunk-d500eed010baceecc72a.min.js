(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{5409:function(e,a,t){"use strict";t.r(a),t.d(a,"getNumberOrPercent",(function(){return d})),t.d(a,"ConfigureUpdateStrategy",(function(){return g})),t.d(a,"ConfigureUpdateStrategyModal",(function(){return b})),t.d(a,"configureUpdateStrategyModal",(function(){return v}));var l=t(141),n=t(16),r=t(0),c=t(88),o=t(7),s=t(8),p=t(10),i=t(118),m=t(5),u=t(692);const d=e=>void 0===e?null:"string"==typeof e&&e.indexOf("%")>-1?e:l.a(e),g=e=>{const{showDescription:a=!0}=e,{t:t}=Object(o.useTranslation)();return r.createElement(r.Fragment,null,a&&r.createElement("div",{className:"co-m-form-row"},r.createElement("p",null,t("public~How should the pods be replaced when a new revision is created?"))),r.createElement("div",{className:"row co-m-form-row"},r.createElement("div",{className:"col-sm-12"},r.createElement(u.b,{name:(e.uid||"update-strategy")+"-type",onChange:a=>{e.onChangeStrategyType(a.target.value)},value:"RollingUpdate",checked:"RollingUpdate"===e.strategyType,title:t("public~RollingUpdate"),subTitle:t("public~(default)"),autoFocus:"RollingUpdate"===e.strategyType},r.createElement("div",{className:"co-m-radio-desc"},r.createElement("p",{className:"text-muted modal-paragraph"},t("public~Execute a smooth roll out of the new revision, based on the settings below")),r.createElement("div",{className:"row co-m-form-row"},r.createElement("div",{className:"col-sm-3"},r.createElement("label",{htmlFor:"input-max-unavailable",className:"control-label co-break-word"},t("public~Max unavailable"))),r.createElement("div",{className:"co-m-form-col col-sm-9"},r.createElement("div",{className:"form-inline"},r.createElement("div",{className:"pf-v5-c-input-group"},r.createElement("input",{disabled:"RollingUpdate"!==e.strategyType,placeholder:"25%",size:5,type:"text",className:"pf-v5-c-form-control",id:"input-max-unavailable",value:e.maxUnavailable,onChange:a=>e.onChangeMaxUnavailable(a.target.value),"aria-describedby":"input-max-unavailable-help"}),e.replicas&&r.createElement("span",{className:"pf-v5-c-input-group__text"},r.createElement(c.a,{content:t("public~Current desired pod count")},r.createElement("span",null,t("public~of pod",{count:e.replicas})))))),r.createElement("p",{className:"help-block text-muted",id:"input-max-unavailable-help"},t("public~Percentage of total number of pods or the maximum number of pods that can be unavailable during the update(optional)")))),r.createElement("div",{className:"row co-m-form-row"},r.createElement("div",{className:"col-sm-3"},r.createElement("label",{htmlFor:"input-max-surge",className:"control-label co-break-word"},t("public~Max surge"))),r.createElement("div",{className:"co-m-form-col col-sm-9"},r.createElement("div",{className:"form-inline"},r.createElement("div",{className:"pf-v5-c-input-group"},r.createElement("input",{disabled:"RollingUpdate"!==e.strategyType,placeholder:"25%",size:5,type:"text",className:"pf-v5-c-form-control",id:"input-max-surge",value:e.maxSurge,onChange:a=>e.onChangeMaxSurge(a.target.value),"aria-describedby":"input-max-surge-help"}),r.createElement("span",{className:"pf-v5-c-input-group__text"},r.createElement(c.a,{content:t("public~Current desired pod count")},r.createElement("span",null,t("public~greater than pod",{count:e.replicas})))))),r.createElement("p",{className:"help-block text-muted",id:"input-max-surge-help"},t("public~Percentage of total number of pods or the maximum number of pods that can be scheduled above the original number of pods(optional)"))))))),r.createElement("div",{className:"col-sm-12"},r.createElement(u.b,{name:(e.uid||"update-strategy")+"-type",onChange:a=>{e.onChangeStrategyType(a.target.value)},value:"Recreate",checked:"Recreate"===e.strategyType,title:t("public~Recreate"),desc:t("public~Shut down all existing pods before creating new ones"),autoFocus:"Recreate"===e.strategyType}))))},b=Object(m.Oc)(e=>{const[a,t]=r.useState(n.a(e.deployment.spec,"strategy.type")),[l,c]=r.useState(n.a(e.deployment.spec,"strategy.rollingUpdate.maxUnavailable","25%")),[m,u]=r.useState(n.a(e.deployment.spec,"strategy.rollingUpdate.maxSurge","25%")),{t:b}=Object(o.useTranslation)();return r.createElement("form",{onSubmit:t=>{t.preventDefault();const n={path:"/spec/strategy/rollingUpdate",op:"remove"};"RollingUpdate"===a&&(n.value={maxUnavailable:d(l||"25%"),maxSurge:d(m||"25%")},n.op="add");const r=Object(s.pb)(p.DeploymentModel,e.deployment,[n,{path:"/spec/strategy/type",value:a,op:"replace"}]);e.handlePromise(r,e.close)},name:"form",className:"modal-content"},r.createElement(i.d,null,b("public~Edit update strategy")),r.createElement(i.a,null,r.createElement(g,{strategyType:a,maxUnavailable:l,maxSurge:m,onChangeStrategyType:t,onChangeMaxUnavailable:c,onChangeMaxSurge:u,replicas:e.deployment.spec.replicas})),r.createElement(i.c,{errorMessage:e.errorMessage,inProgress:e.inProgress,submitText:b("public~Save"),cancel:e.cancel}))}),v=Object(i.f)(b);g.displayName="ConfigureUpdateStrategy"}}]);
//# sourceMappingURL=configure-update-strategy-modal-chunk-d500eed010baceecc72a.min.js.map
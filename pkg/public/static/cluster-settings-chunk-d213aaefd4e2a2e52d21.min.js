(window.webpackJsonp=window.webpackJsonp||[]).push([[31,107],{4406:function(e,t,a){"use strict";a.r(t),a.d(t,"clusterOperatorReference",(function(){return C})),a.d(t,"ClusterOperatorList",(function(){return M})),a.d(t,"ClusterOperatorPage",(function(){return w})),a.d(t,"ClusterOperatorDetailsPage",(function(){return F}));var n=a(0),l=a(22),c=a(50),r=a(16),s=a(18),o=a(14),i=a(54),u=a(80),m=a(1196),d=a(1199),p=a(7),b=a(10),v=a(40),E=a(972),h=a(8),g=a(5),f=a(15),O=a(7524),j=a(6683);const C=Object(h.Hb)(b.ClusterOperatorModel),N=({status:e})=>{const t=(e=>({[h.j.Available]:n.createElement(f.X,null),[h.j.Progressing]:n.createElement(m.a,null),[h.j.Degraded]:n.createElement(f.tc,null),[h.j.CannotUpdate]:n.createElement(f.tc,null),[h.j.Unavailable]:n.createElement(f.Mb,null),[h.j.Unknown]:n.createElement(d.a,null)}[e]))(e);return n.createElement(n.Fragment,null,t," ",e)},_=["","pf-v5-u-w-16-on-xl","pf-m-hidden pf-m-visible-on-md pf-v5-u-w-33-on-2xl","pf-m-hidden pf-m-visible-on-md pf-v5-u-w-33-on-2xl",g.F.columnClass],k=({obj:e})=>{const{status:t,message:a}=Object(h.Y)(e),l=Object(h.x)(e);return n.createElement(n.Fragment,null,n.createElement(v.k,{className:_[0]},n.createElement(g.hb,{kind:C,name:e.metadata.name,namespace:e.metadata.namespace})),n.createElement(v.k,{className:_[1]},n.createElement(N,{status:t})),n.createElement(v.k,{className:_[2]},l||"-"),n.createElement(v.k,{className:s(_[3],"co-break-word","co-line-clamp","co-pre-line")},n.createElement(g.N,null,a||"-")))},M=e=>{const{t:t}=Object(p.useTranslation)();return n.createElement(v.j,Object.assign({},e,{"aria-label":b.ClusterOperatorModel.labelPlural,Header:()=>[{title:t("public~Name"),sortField:"metadata.name",transforms:[i.a],props:{className:_[0]}},{title:t("public~Status"),sortFunc:"getClusterOperatorStatus",transforms:[i.a],props:{className:_[1]}},{title:t("public~Version"),sortFunc:"getClusterOperatorVersion",transforms:[i.a],props:{className:_[2]}},{title:t("public~Message"),props:{className:_[3]}}],Row:k,virtualize:!0}))},y=({cv:e})=>{const t=Object(h.A)(e,h.b.Progressing,h.d.True);return n.createElement(n.Fragment,null,t&&n.createElement("div",{className:"co-m-pane__body co-m-pane__body--section-heading"},n.createElement(u.a,{isInline:!0,className:"co-alert",variant:"info",title:n.createElement(j.d,{cv:e})},n.createElement(j.a,{cv:e}))))},w=e=>{const{t:t}=Object(p.useTranslation)(),a=[{filterGroupName:t("public~Status"),type:"cluster-operator-status",reducer:h.w,items:[{id:"Available",title:t("public~Available")},{id:"Progressing",title:t("public~Progressing")},{id:"Degraded",title:t("public~Degraded")},{id:"Cannot update",title:t("public~Cannot update")},{id:"Unavailable",title:t("public~Unavailable")},{id:"Unknown",title:t("public~Unknown")}]}];return n.createElement(n.Fragment,null,n.createElement(y,{cv:e.cv}),n.createElement(v.c,Object.assign({},e,{title:b.ClusterOperatorModel.labelPlural,kind:C,ListComponent:M,canCreate:!1,rowFilters:a})))},P=({versions:e})=>{const{t:t}=Object(p.useTranslation)();return l.a(e)?n.createElement(g.u,{label:t("public~versions")}):n.createElement("div",{className:"co-table-container"},n.createElement("table",{className:"pf-v5-c-table pf-m-compact pf-m-border-rows"},n.createElement("thead",{className:"pf-v5-c-table__thead"},n.createElement("tr",{className:"pf-v5-c-table__tr"},n.createElement("th",{className:"pf-v5-c-table__th"},t("public~Name")),n.createElement("th",{className:"pf-v5-c-table__th"},t("public~Version")))),n.createElement("tbody",{className:"pf-v5-c-table__tbody"},c.a(e,({name:e,version:t},a)=>n.createElement("tr",{className:"pf-v5-c-table__tr",key:a},n.createElement("td",{className:"pf-v5-c-table__td"},e),n.createElement("td",{className:"pf-v5-c-table__td"},t))))))},T=({obj:e})=>{const{status:t,message:a}=Object(h.Y)(e),l=r.a(e,"status.versions",[]),c=r.a(e,"status.conditions",[]),s=1===l.length&&"operator"===l[0].name?l[0].version:null,{t:o}=Object(p.useTranslation)();return n.createElement(n.Fragment,null,n.createElement("div",{className:"co-m-pane__body"},n.createElement(g.ob,{text:o("public~ClusterOperator details")}),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-sm-6"},n.createElement(g.lb,{resource:e})),n.createElement("div",{className:"col-sm-6"},n.createElement("dl",null,s&&n.createElement(n.Fragment,null,n.createElement("dt",null,o("public~Version")),n.createElement("dd",null,s)),n.createElement("dt",null,o("public~Status")),n.createElement("dd",null,n.createElement(N,{status:t})),n.createElement("dt",null,o("public~Message")),n.createElement("dd",{className:"co-pre-line"},n.createElement(g.N,null,a||"-")))))),n.createElement("div",{className:"co-m-pane__body"},n.createElement(g.ob,{text:o("public~Conditions")}),n.createElement(E.b,{conditions:c})),n.createElement("div",{className:"co-m-pane__body"},n.createElement(g.ob,{text:o("public~Operand versions")}),n.createElement(P,{versions:l})))},F=e=>{const{t:t}=Object(p.useTranslation)(),a=Object(o.useLocation)();return n.createElement(v.a,Object.assign({},e,{kind:C,pages:[g.mc.details(T),g.mc.editYaml(),{href:"related-objects",nameKey:"public~Related objects",component:O.a}],breadcrumbsFor:()=>[{name:t(b.ClusterOperatorModel.labelPluralKey),path:"/settings/cluster/clusteroperators"},{name:t("public~ClusterOperator details"),path:a.pathname}]}))}},5418:function(e,t,a){"use strict";a.r(t),a.d(t,"clusterAutoscalerReference",(function(){return K})),a.d(t,"CurrentChannel",(function(){return q})),a.d(t,"CurrentVersion",(function(){return W})),a.d(t,"UpdateLink",(function(){return Y})),a.d(t,"CurrentVersionHeader",(function(){return J})),a.d(t,"ChannelDocLink",(function(){return X})),a.d(t,"ChannelName",(function(){return te})),a.d(t,"ChannelVersion",(function(){return ne})),a.d(t,"UpdateBlockedLabel",(function(){return le})),a.d(t,"UpdatesGroup",(function(){return se})),a.d(t,"UpdatesProgress",(function(){return oe})),a.d(t,"NodesUpdatesGroup",(function(){return ue})),a.d(t,"UpdatesGraph",(function(){return de})),a.d(t,"ClusterOperatorsLink",(function(){return ve})),a.d(t,"UpdateInProgress",(function(){return Ee})),a.d(t,"ClusterNotUpgradeableAlert",(function(){return ge})),a.d(t,"MachineConfigPoolsArePausedAlert",(function(){return fe})),a.d(t,"ClusterSettingsAlerts",(function(){return Oe})),a.d(t,"ClusterVersionDetailsTable",(function(){return je})),a.d(t,"ClusterOperatorTabPage",(function(){return Ce})),a.d(t,"ClusterSettingsPage",(function(){return Ne}));var n=a(0),l=a(4413),c=a(16),r=a(489),s=a(22),o=a(50),i=a(18),u=a(283),m=a(19),d=a(563),p=a(72),b=a(351),v=a(353),E=a(4357),h=a(2189),g=a(80),f=a(241),O=a(130),j=a(1923),C=a(14),N=a(7),_=a(6023),k=a(8357),M=a(615),y=a(983),w=a(2237),P=a(519),T=a(4406),F=a(131),U=a(988),S=a(10),V=a(8),L=a(5),A=a(108),R=a(15),x=a(784),I=a(206),D=a(30),H=a(1241),B=a(389),G=a(6683);const K=Object(V.Hb)(S.ClusterAutoscalerModel),z=(e,t)=>null==e?void 0:e.find(e=>e.metadata.name===t),$=(e,t)=>Math.round(e/t*100),q=({cv:e,canUpgrade:t})=>{const{t:a}=Object(N.useTranslation)(),l=e.spec.channel||a("public~Not configured");return t?n.createElement(m.a,{type:"button",isInline:!0,"data-test-id":"current-channel-update-link",onClick:()=>Object(F.d)({cv:e}),variant:"link"},l,n.createElement(M.a,{className:"co-icon-space-l pf-v5-c-button-icon--plain"})):n.createElement(n.Fragment,null,l)},W=({cv:e})=>{const t=Object(V.E)(e),a=Object(V.I)(e),l=Object(V.y)(e),{t:c}=Object(N.useTranslation)();return Object(V.p)(l)?t?n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement("span",{className:"co-select-to-copy","data-test-id":"cluster-version"},t)),n.createElement(L.cb,{version:Object(V.C)(e)})):n.createElement(n.Fragment,null,n.createElement(R.tc,null),"Â ",c("public~Unknown")):a?n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement("span",{className:"co-select-to-copy","data-test-id":"cluster-version"},a)),n.createElement(L.cb,{version:Object(V.I)(e)})):n.createElement(n.Fragment,null,c("public~None"))},Y=({cv:e,canUpgrade:t})=>{const a=Object(L.Dc)({group:S.MachineConfigPoolModel.apiGroup,resource:S.MachineConfigPoolModel.plural,verb:"patch",name:V.h.worker}),l=Object(V.y)(e),{t:c}=Object(N.useTranslation)(),r=Object(B.C)(e);return t&&(Object(B.B)(e)||r)&&(l===V.a.ErrorRetrieving||l===V.a.Failing||l===V.a.UpdatesAvailable||l===V.a.Updating||l===V.a.UpToDate&&r)&&a?n.createElement("div",{className:"co-cluster-settings__details"},n.createElement(m.a,{variant:"primary",type:"button",onClick:()=>Object(F.f)({cv:e}),"data-test-id":"cv-update-button"},c("public~Select a version"))):null},J=({cv:e})=>{const t=Object(V.y)(e),{t:a}=Object(N.useTranslation)();return n.createElement(n.Fragment,null,Object(V.p)(t)?a("public~Current version"):a("public~Last completed version"))},X=()=>{const e=Object(L.Qb)(L.Lb.understandingUpgradeChannels),{t:t}=Object(N.useTranslation)();return n.createElement(L.z,{href:e,text:t("public~Learn more about OpenShift update channels")})},Q=()=>{const{t:e}=Object(N.useTranslation)();return n.createElement(n.Fragment,null,e("public~Channel"),n.createElement(L.B,null,n.createElement(d.a,null,n.createElement(p.a,{component:p.b.p},e("public~Channels help to control the pace of updates and recommend the appropriate release versions. Update channels are tied to a minor version of OpenShift Container Platform, for example 4.5.")),!Object(L.hc)()&&n.createElement(p.a,{component:p.b.p},n.createElement(X,null)))))},Z=({children:e,endOfLife:t})=>n.createElement("div",{className:i("co-channel",{"co-channel--end-of-life":t}),"data-test":"cv-channel"},e),ee=({children:e,start:t})=>n.createElement("li",{className:i("co-channel-line",{"co-channel-start":t})},e),te=({children:e,current:t})=>n.createElement("span",{className:i("co-channel-name",{"co-channel-name--current":t}),"data-test":"cv-channel-name"},e),ae=({children:e,current:t})=>n.createElement("ul",{className:i("co-channel-path",{"co-channel-path--current":t})},e),ne=({children:e,current:t,updateBlocked:a})=>{const l="cv-channel-version";return n.createElement("span",{className:i("co-channel-version",{"co-channel-version--current":t,"co-channel-version--update-blocked":a}),"data-test":a?l+"-blocked":l},a&&n.createElement(R.tc,{className:"co-channel-version__warning-icon co-icon-space-r"}),e)},le=()=>{const{t:e}=Object(N.useTranslation)();return n.createElement(b.a,{color:"orange",icon:n.createElement(R.tc,null),className:"pf-v5-u-ml-sm","data-test":"cv-update-blocked"},e("public~Update blocked"))},ce=({current:e,updateBlocked:t,version:a})=>{const l=Object(V.T)(a),{t:c}=Object(N.useTranslation)(),r="cv-channel-version-dot";return l||t?n.createElement(v.a,{headerContent:n.createElement(n.Fragment,null,c("public~Version")," ",a,t&&n.createElement(le,null)),bodyContent:n.createElement(n.Fragment,null,t&&n.createElement("p",{"data-test":"cv-channel-version-dot-blocked-info"},c("public~See the alert above the visualization for instructions on how to unblock this version.")),l&&n.createElement(L.cb,{version:a}))},n.createElement(m.a,{variant:"secondary",className:i("co-channel-version-dot",{"co-channel-version-dot--current":e,"co-channel-version-dot--update-blocked":t}),"data-test":t?r+"-blocked":r})):n.createElement("div",{className:i("co-channel-version-dot",{"co-channel-version-dot--current":e,"co-channel-version-dot--update-blocked":t}),"data-test":r})},re=({children:e})=>n.createElement("div",{className:"co-cluster-settings__updates-bar"},e),se=({children:e,divided:t})=>n.createElement("div",{className:i("co-cluster-settings__updates-group",{"co-cluster-settings__updates-group--divided":t}),"data-test":"cv-updates-group"},e),oe=({children:e})=>n.createElement("div",{className:"co-cluster-settings__updates-progress","data-test":"cv-updates-progress"},e),ie=({children:e})=>n.createElement("div",{className:"co-cluster-settings__updates-type"},e),ue=({divided:e,desiredVersion:t,hideIfComplete:a,machineConfigPool:c,name:r,updateStartedTime:s})=>{var o,i,u,d,p,b,v;const[g,f]=Object(A.a)({kind:Object(V.Hb)(S.ClusterOperatorModel),name:"machine-config"}),[O,j]=Object(A.a)({kind:Object(V.Hb)(S.MachineConfigModel),name:null===(i=null===(o=null==c?void 0:c.spec)||void 0===o?void 0:o.configuration)||void 0===i?void 0:i.name}),_=null===(u=null==c?void 0:c.metadata)||void 0===u?void 0:u.name,k=Object(L.Dc)({group:S.MachineConfigPoolModel.apiGroup,resource:S.MachineConfigPoolModel.plural,verb:"patch",name:_}),M=Object(V.fb)(c),y=Object(V.gb)(c),w=(e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.annotations)||void 0===a?void 0:a["machineconfiguration.openshift.io/release-image-version"]})(O)===t,P=Object(V.x)(g)===t,T=null===(p=null===(d=null==c?void 0:c.status)||void 0===d?void 0:d.conditions)||void 0===p?void 0:p.some(e=>"Updated"===e.type&&e.status===V.d.True),U=P&&T,R=(e=>{var t;const a=null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.conditions.find(e=>e.type===V.f.Updating);return null==a?void 0:a.lastTransitionTime})(c),x=(null===(b=null==c?void 0:c.status)||void 0===b?void 0:b.machineCount)||0,I=U||R>s&&w?null===(v=null==c?void 0:c.status)||void 0===v?void 0:v.updatedMachineCount:0,D=$(I,x),H=100===D,B=M?"control-plane":_,{t:G}=Object(N.useTranslation)();return 0===x||a&&H?null:f&&j&&n.createElement(se,{divided:e},n.createElement(ie,null,n.createElement(C.Link,{to:"/k8s/cluster/nodes?rowFilter-node-role="+B},`${r} ${S.NodeModel.labelPlural}`),!M&&n.createElement(L.B,null,G("public~{{name}} {{resource}} may continue to update after the update of {{master}} {{resource}} and {{resource2}} are complete.",{name:r,resource:S.NodeModel.labelPlural,master:V.g.Master,resource2:S.ClusterOperatorModel.labelPlural}))),n.createElement(re,null,n.createElement(E.a,{title:G("public~{{updatedMCPNodes}} of {{totalMCPNodes}}",{updatedMCPNodes:I,totalMCPNodes:x}),value:l.a(D)?null:D,size:E.b.sm,variant:100===D?h.c.success:null})),!M&&!H&&k&&n.createElement(m.a,{variant:"secondary",className:"pf-v5-u-mt-md",onClick:()=>Object(L.Ac)(S.MachineConfigPoolModel,c).catch(e=>Object(F.s)({error:e.message})),"data-test":"mcp-paused-button"},G(y?"public~Resume update":"public~Pause update")))},me=({desiredVersion:e,hideIfComplete:t,machineConfigPools:a,updateStartedTime:l})=>{const c=a.filter(e=>!Object(V.fb)(e)&&!Object(V.hb)(e)).sort(V.Lb);return n.createElement(n.Fragment,null,c.map(a=>n.createElement(ue,{desiredVersion:e,divided:!0,hideIfComplete:t,key:a.metadata.uid,name:a.metadata.name,machineConfigPool:a,updateStartedTime:l})))},de=({cv:e})=>{var t,a,l;const c=Object(V.W)(e),r=Object(V.I)(e),s=null===(t=c[0])||void 0===t?void 0:t.version,o=!!s&&Object(V.ib)(r,s),i=null===(a=c[1])||void 0===a?void 0:a.version,u=e.spec.channel,d=null===(l=Object(V.Mb)(u))||void 0===l?void 0:l.prefix,p=Object(V.V)(e,d),b=Object(V.L)(p,u),v=!!Object(V.B)(e)&&o&&!Object(R.Pd)(),{t:E}=Object(N.useTranslation)();return n.createElement("div",{className:"co-cluster-settings__updates-graph","data-test":"cv-updates-graph"},n.createElement(Z,null,n.createElement(ae,{current:!0},n.createElement(ee,null,n.createElement(ne,{current:!0},r),n.createElement(ce,{current:!0,channel:u,version:r})),n.createElement(ee,null,2===c.length&&n.createElement(n.Fragment,null,n.createElement(ne,null,i),n.createElement(ce,{channel:u,version:i})),c.length>2&&n.createElement(m.a,{variant:"secondary",className:"co-channel-more-versions",onClick:()=>Object(F.e)({cv:e}),"data-test":"cv-more-updates-button"},E("public~+ More"))),n.createElement(ee,null,s&&n.createElement(n.Fragment,null,n.createElement(ne,{updateBlocked:v},s),n.createElement(ce,{channel:u,updateBlocked:v,version:s})))),n.createElement(te,{current:!0},E("public~{{currentChannel}} channel",{currentChannel:u}))),b&&n.createElement(Z,null,n.createElement(ae,null,n.createElement(ee,{start:!0},n.createElement("div",{className:"co-channel-switch"})),n.createElement(ee,null),n.createElement(ee,null)),n.createElement(te,null,E("public~{{newerChannel}} channel",{newerChannel:b}))))},pe={isList:!0,kind:Object(V.Hb)(S.ClusterOperatorModel)},be={isList:!0,kind:Object(V.Hb)(S.MachineConfigPoolModel)},ve=({onCancel:e,children:t,queryString:a})=>n.createElement(C.Link,{onClick:e,to:a?"/settings/cluster/clusteroperators"+a:"/settings/cluster/clusteroperators"},t),Ee=({desiredVersion:e,machineConfigPools:t,workerMachineConfigPool:a,updateStartedTime:c})=>{const[r]=Object(A.a)(pe),s=(null==r?void 0:r.length)||0,o=((e,t)=>{var a,n;return null!==(n=null===(a=null==e?void 0:e.filter(e=>Object(V.x)(e)===t))||void 0===a?void 0:a.length)&&void 0!==n?n:0})(r,e),i=$(o,s),u=z(t,V.h.master),{t:m}=Object(N.useTranslation)();return n.createElement(oe,null,n.createElement(se,null,n.createElement(ie,null,n.createElement(ve,null,m(S.ClusterOperatorModel.labelPluralKey))),n.createElement(re,null,n.createElement(E.a,{title:m("public~{{updatedOperatorsCount}} of {{totalOperatorsCount}}",{updatedOperatorsCount:o,totalOperatorsCount:s}),value:l.a(i)?null:i,size:E.b.sm,variant:100===i?h.c.success:null}))),u&&n.createElement(ue,{desiredVersion:e,machineConfigPool:u,name:V.g.Master,updateStartedTime:c}),a&&n.createElement(ue,{desiredVersion:e,divided:!0,machineConfigPool:a,name:V.g.Worker,updateStartedTime:c}),t.length>2&&n.createElement(me,{desiredVersion:e,machineConfigPools:t,updateStartedTime:c}))},he={isList:!0,kind:Object(V.Hb)(P.a)},ge=({cv:e,onCancel:t})=>{const[a]=Object(A.a)(pe),[l]=Object(A.a)(he),{t:c}=Object(N.useTranslation)(),r=Object(V.O)(a).length>0,s=Object(V.O)(l).length>0,o=Object(V.B)(e),i=Object(V.I)(e),m=u.parse(i),d=`${null==m?void 0:m.major}.${null==m?void 0:m.minor}`,p=Object(V.W)(e),b=Object(V.M)(i,p),v=u.parse(null==b?void 0:b.version),E=`${null==v?void 0:v.major}.${null==v?void 0:v.minor}`;return n.createElement(g.a,{variant:"warning",isInline:!0,title:m&&v?c("public~This cluster should not be updated to {{nextMajorMinorVersion}}. You can continue to update to patch releases in {{currentMajorMinorVersion}}.",{nextMajorMinorVersion:E,currentMajorMinorVersion:d}):c("public~This cluster should not be updated to the next minor version."),className:"co-alert",actionLinks:(r||s)&&n.createElement(f.a,null,r&&n.createElement(O.a,null,n.createElement(ve,{onCancel:t,queryString:"?rowFilter-cluster-operator-status=Cannot+update"},c("public~View ClusterOperators"))),s&&n.createElement(O.a,null,n.createElement(C.Link,{onClick:t,to:"/k8s/ns/all-namespaces/"+P.a.plural},c("public~View installed Operators")))),"data-test":"cluster-settings-alerts-not-upgradeable"},n.createElement(w.SyncMarkdownView,{content:o.message,inline:!0,options:{simplifiedAutoLink:!0}}))},fe=({machineConfigPools:e})=>{const{t:t}=Object(N.useTranslation)(),[a]=Object(A.a)({kind:V.q,name:"version"}),l=Object(L.Dc)({group:S.MachineConfigPoolModel.apiGroup,resource:S.MachineConfigPoolModel.plural,verb:"patch",name:V.h.worker}),c=e.filter(e=>!Object(V.fb)(e)).filter(e=>Object(V.gb)(e));return Object(V.p)(Object(V.y)(a))&&c.length>0?n.createElement(g.a,{isInline:!0,title:t("public~{{resource}} updates are paused.",{resource:S.NodeModel.label}),customIcon:n.createElement(k.a,null),actionLinks:l&&n.createElement(j.a,{onClick:()=>Promise.all(Object(V.K)(c,!1)),"data-test":"cluster-settings-alerts-paused-nodes-resume-link"},t("public~Resume all updates")),className:"co-alert","data-test":"cluster-settings-alerts-paused-nodes"}):null},Oe=({cv:e,machineConfigPools:t})=>{const{t:a}=Object(N.useTranslation)();return Object(R.Pd)()?n.createElement(g.a,{variant:"info",isInline:!0,title:a("public~Control plane is hosted."),className:"co-alert","data-test":"cluster-settings-alerts-hosted"}):n.createElement(n.Fragment,null,!!Object(V.B)(e)&&n.createElement(ge,{cv:e}),n.createElement(fe,{machineConfigPools:t}))},je=({obj:e,autoscalers:t})=>{const{history:a=[]}=e.status,l=Object(V.v)(e),i=c.a(e,"status.desired.image")||"",u=i.split("@"),m=Object(V.Kb)(),b=Object(V.y)(e),{t:v}=Object(N.useTranslation)(),E=Object(R.we)(),[h]=Object(A.a)(be),f=Object(H.e)(),O=Object(V.E)(e),j=((e,t)=>{var a,n;const l=null===(n=null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.history)||void 0===n?void 0:n.find(e=>e.version===t);return null==l?void 0:l.startedTime})(e,O),k=z(h,V.h.worker);return new URLSearchParams(window.location.search).has("showVersions")?Object(F.f)({cv:e}).then(()=>Object(y.c)("showVersions")).catch(r.a):new URLSearchParams(window.location.search).has("showChannels")&&Object(F.d)({cv:e}).then(()=>Object(y.c)("showChannels")).catch(r.a),n.createElement(n.Fragment,null,n.createElement("div",{className:"co-m-pane__body"},n.createElement("div",{className:"co-m-pane__body-group"},n.createElement(Oe,{cv:e,machineConfigPools:h}),n.createElement("div",{className:"co-cluster-settings"},n.createElement("div",{className:"co-cluster-settings__row"},n.createElement("div",{className:"co-cluster-settings__section co-cluster-settings__section--current"},n.createElement("dl",{className:"co-m-pane__details co-cluster-settings__details"},n.createElement("dt",{"data-test":"cv-current-version-header"},n.createElement(J,{cv:e})),n.createElement("dd",{"data-test":"cv-current-version"},n.createElement(W,{cv:e})))),n.createElement("div",{className:"co-cluster-settings__section"},n.createElement("div",{className:"co-cluster-settings__row"},n.createElement("dl",{className:"co-m-pane__details co-cluster-settings__details co-cluster-settings__details--status"},n.createElement("dt",null,v("public~Update status")),n.createElement("dd",null,n.createElement(G.c,{cv:e}))),n.createElement("div",{className:"co-cluster-settings__row"},n.createElement("dl",{className:"co-m-pane__details co-cluster-settings__details"},n.createElement("dt",null,n.createElement(Q,null)),n.createElement("dd",null,n.createElement(q,{cv:e,canUpgrade:E}))),n.createElement(Y,{cv:e,canUpgrade:E}))),Object(V.p)(b)&&n.createElement(n.Fragment,null,!Object(B.B)(e)&&Object(B.C)(e)&&n.createElement(g.a,{className:"pf-v5-u-my-sm",isInline:!0,isPlain:!0,title:v('public~Click "Select a version" to view versions with known issues.'),variant:"info","data-test":"cv-not-recommended-alert"}),n.createElement(de,{cv:e}),k&&n.createElement(oe,null,n.createElement(ue,{desiredVersion:O,divided:!0,hideIfComplete:!0,machineConfigPool:k,name:V.g.Worker,updateStartedTime:j}),h.length>2&&n.createElement(me,{desiredVersion:O,hideIfComplete:!0,machineConfigPools:h,updateStartedTime:j}))),(b===V.a.UpdatingAndFailing||b===V.a.Updating)&&n.createElement(Ee,{desiredVersion:O,machineConfigPools:h,updateStartedTime:j,workerMachineConfigPool:k}))))),n.createElement("div",{className:"co-m-pane__body-group"},n.createElement("dl",{className:"co-m-pane__details"},"okd"!==window.SERVER_FLAGS.branding&&"azure"!==window.SERVER_FLAGS.branding&&n.createElement(n.Fragment,null,n.createElement("dt",null,v("public~Subscription")),n.createElement("dd",null,n.createElement(L.z,{text:v("public~OpenShift Cluster Manager"),href:Object(V.P)(l)}),".")),n.createElement(H.a,{clusterID:l,loading:n.createElement(n.Fragment,null,n.createElement("dt",null,f),n.createElement("dd",null,n.createElement(H.b,null)))},n.createElement(n.Fragment,null,n.createElement("dt",null,f),n.createElement("dd",null,n.createElement(H.d,{clusterID:l})))),n.createElement("dt",null,v("public~Cluster ID")),n.createElement("dd",{className:"co-break-all co-select-to-copy","data-test-id":"cv-details-table-cid"},l),n.createElement("dt",null,v("public~Desired release image")),n.createElement("dd",{className:"co-break-all co-select-to-copy","data-test-id":"cv-details-table-image"},2===u.length?n.createElement(n.Fragment,null,n.createElement("span",{className:"text-muted"},u[0],"@"),u[1]):i||"-"),n.createElement("dt",null,v("public~Cluster version configuration")),n.createElement("dd",null,n.createElement(L.hb,{kind:Object(V.Hb)(S.ClusterVersionModel),name:e.metadata.name})),n.createElement(L.zb,{resource:e}),t&&E&&n.createElement(n.Fragment,null,n.createElement("dt",{"data-test":"cv-autoscaler"},v("public~Cluster autoscaler")),n.createElement("dd",null,s.a(t)?n.createElement(C.Link,{to:Object(L.uc)(S.ClusterAutoscalerModel)+"/~new"},n.createElement(_.a,{className:"co-icon-space-r"}),v("public~Create autoscaler")):t.map(e=>n.createElement("div",{key:e.metadata.uid},n.createElement(L.hb,{kind:K,name:e.metadata.name})))))))),n.createElement("div",{className:"co-m-pane__body"},n.createElement(L.ob,{text:v("public~Update history")}),s.a(a)?n.createElement(L.u,{label:v("public~History")}):n.createElement(n.Fragment,null,n.createElement(d.a,null,n.createElement(p.a,{component:p.b.p,className:"help-block pf-v5-u-mb-lg"},v("public~There is a threshold for rendering update data which may cause gaps in the information below."))),n.createElement("div",{className:"co-table-container"},n.createElement("table",{className:"pf-v5-c-table pf-m-compact pf-m-border-rows"},n.createElement("thead",{className:"pf-v5-c-table__thead"},n.createElement("tr",{className:"pf-v5-c-table__tr"},n.createElement("th",{className:"pf-v5-c-table__th"},v("public~Version")),n.createElement("th",{className:"pf-v5-c-table__th"},v("public~State")),n.createElement("th",{className:"pf-v5-c-table__th"},v("public~Started")),n.createElement("th",{className:"pf-v5-c-table__th"},v("public~Completed")),m&&n.createElement("th",{className:"pf-v5-c-table__th pf-m-hidden pf-m-visible-on-md"},v("public~Release notes")))),n.createElement("tbody",{className:"pf-v5-c-table__tbody"},o.a(a,(e,t)=>n.createElement("tr",{className:"pf-v5-c-table__tr",key:t},n.createElement("td",{className:"pf-v5-c-table__td pf-m-break-word co-select-to-copy","data-test-id":"cv-details-table-version"},e.version||"-"),n.createElement("td",{className:"pf-v5-c-table__td","data-test-id":"cv-details-table-state"},e.state||"-"),n.createElement("td",{className:"pf-v5-c-table__td"},n.createElement(L.xb,{timestamp:e.startedTime})),n.createElement("td",{className:"pf-v5-c-table__td"},e.completionTime?n.createElement(L.xb,{timestamp:e.completionTime}):"-"),m&&n.createElement("td",{className:"pf-v5-c-table__td pf-m-hidden pf-m-visible-on-md"},Object(V.T)(e.version)?n.createElement(L.cb,{version:e.version}):"-")))))))))},Ce=({obj:e})=>n.createElement(T.ClusterOperatorPage,{cv:e,autoFocus:!1,showTitle:!1}),Ne=()=>{const{t:e}=Object(N.useTranslation)(),t=Object(I.a)(D.A.CLUSTER_AUTOSCALER),a=e("public~Cluster Settings"),l=[{kind:V.q,name:"version",isList:!1,prop:"obj"}];t&&l.push({kind:K,isList:!0,prop:"autoscalers",optional:!0});const c=o.a(l,"prop"),r=[{href:"",nameKey:"public~Details",component:je},{href:"clusteroperators",nameKey:S.ClusterOperatorModel.labelPluralKey,component:Ce},{href:"globalconfig",nameKey:"public~Configuration",component:U.a}],s={telemetryPrefix:"Cluster Settings",titlePrefix:a};return n.createElement(x.a.Provider,{value:s},n.createElement(L.Z,{title:n.createElement("div",{"data-test-id":"cluster-settings-page-heading"},a)}),n.createElement(L.C,{resources:l},n.createElement(L.E,{pages:r,resourceKeys:c})))}},6683:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"d",(function(){return O})),a.d(t,"b",(function(){return _})),a.d(t,"c",(function(){return k}));var n=a(353),l=a(19),c=a(0),r=a(7),s=a(8356),o=a(1196),i=a(15),u=a(10),m=a(8),d=a(131),p=a(5);const b=({cv:e})=>{const{t:t}=Object(r.useTranslation)();return c.createElement(s.HashLink,{smooth:!0,to:Object(p.uc)(u.ClusterVersionModel,e.metadata.name)+"#conditions"},t("public~View conditions"))},v=({bodyContent:e,children:t})=>c.createElement(n.a,{bodyContent:Object(p.Bc)(e,{length:256})},c.createElement(l.a,{variant:"link",isInline:!0},c.createElement("span",null,t))),E=({cv:e})=>{const{t:t}=Object(r.useTranslation)();return c.createElement("div",{"data-test":"cv-update-status-invalid"},c.createElement("div",null,c.createElement(i.Mb,null)," ",t("public~Invalid cluster version")),c.createElement(l.a,{onClick:()=>(e=>{Object(m.pb)(u.ClusterVersionModel,e,[{path:"/spec/desiredUpdate",op:"remove"}]).catch(e=>{const t=e.message;Object(d.s)({error:t})})})(e),variant:"primary",className:"pf-v5-u-mt-xs"},t("public~Cancel update")))},h=({cv:e})=>{const t=Object(m.A)(e,m.b.ReleaseAccepted,m.d.False),{t:a}=Object(r.useTranslation)();return c.createElement(c.Fragment,null,c.createElement("div",{"data-test":"cv-update-status-release-accepted-false"},c.createElement(v,{bodyContent:t.message},c.createElement(i.Mb,null)," ",a("public~Release not accepted"))),c.createElement(b,{cv:e}))},g=()=>{const{t:e}=Object(r.useTranslation)();return c.createElement("div",{className:"co-update-status","data-test":"cv-update-status-available-updates"},c.createElement(i.n,null)," ",e("public~Available updates"))},f=({cv:e})=>{const t=Object(m.A)(e,m.b.Failing,m.d.True),{t:a}=Object(r.useTranslation)();return c.createElement("div",{"data-test":"cv-update-status-failing"},c.createElement(v,{bodyContent:t.message},c.createElement(i.Mb,null)," ",a("public~Failing")))},O=({cv:e})=>{const t=Object(m.E)(e),{t:a}=Object(r.useTranslation)();return c.createElement(c.Fragment,null,a("public~Update to {{version}} in progress",{version:t}))},j=({cv:e,isFailing:t})=>c.createElement(c.Fragment,null,c.createElement("div",{"data-test":"cv-update-status-updating"},c.createElement(o.a,{className:"fa-spin co-icon-space-r"}),c.createElement(O,{cv:e})),t&&c.createElement(f,{cv:e}),c.createElement(b,{cv:e})),C=({cv:e})=>{const t=Object(m.A)(e,m.b.RetrievedUpdates,m.d.False),{t:a}=Object(r.useTranslation)();return"NoChannel"===t.reason?c.createElement("div",{"data-test":"cv-update-status-no-channel"},c.createElement(i.o,null)," ",t.message):c.createElement(c.Fragment,null,c.createElement("div",{"data-test":"cv-update-status-no-updates"},c.createElement(v,{bodyContent:t.message},c.createElement(i.Mb,null)," ",a("public~Not retrieving updates"))),c.createElement(b,{cv:e}))},N=({cv:e})=>c.createElement(c.Fragment,null,c.createElement(f,{cv:e}),c.createElement(b,{cv:e})),_=()=>{const{t:e}=Object(r.useTranslation)();return c.createElement("span",{"data-test":"cv-update-status-up-to-date"},c.createElement(i.X,null)," ",e("public~Up to date"))},k=({cv:e})=>{switch(Object(m.y)(e)){case m.a.Invalid:return c.createElement(E,{cv:e});case m.a.ReleaseNotAccepted:return c.createElement(h,{cv:e});case m.a.UpdatesAvailable:return c.createElement(g,{cv:e});case m.a.Updating:return c.createElement(j,{cv:e});case m.a.UpdatingAndFailing:return c.createElement(j,{cv:e,isFailing:!0});case m.a.ErrorRetrieving:return c.createElement(C,{cv:e});case m.a.Failing:return c.createElement(N,{cv:e});default:return c.createElement(_,null)}}},7524:function(e,t,a){"use strict";var n=a(0),l=a(18),c=a(54),r=a(7),s=a(40),o=a(8),i=a(5);const u=["",l("pf-m-hidden","pf-m-visible-on-sm"),l("pf-m-hidden","pf-m-visible-on-md"),""],m=({gsv:e,name:t,namespace:a})=>t?e?n.createElement(i.hb,{kind:e,name:t,namespace:a}):n.createElement(n.Fragment,null,t):n.createElement(n.Fragment,null,"-"),d=({obj:e,customData:{findModel:t}})=>{const{name:a,resource:l,namespace:c,group:r}=e,d=t(r,l),p=d?Object(o.Hb)(d):null;return n.createElement(n.Fragment,null,n.createElement(s.k,{className:u[0]},n.createElement(m,{gsv:p,name:a,namespace:c})),n.createElement(s.k,{className:u[1]},l,r&&n.createElement("div",{className:"pf-v5-u-display-none-on-md text-muted"},r)),n.createElement(s.k,{className:u[2]},r||"-"),n.createElement(s.k,{className:u[3]},c?n.createElement(i.hb,{kind:"Namespace",name:c}):"-"))},p=()=>{const{t:e}=Object(r.useTranslation)();return n.createElement(i.u,{label:e("public~Related objects")})},b=e=>{const{findModel:t}=Object(o.Nb)(),{t:a}=Object(r.useTranslation)(),l=n.useMemo(()=>({findModel:t}),[t]);return n.createElement("div",{className:"co-m-pane__body"},n.createElement(s.j,Object.assign({},e,{Header:()=>[{title:a("public~Name"),sortField:"name",transforms:[c.a],props:{className:u[0]}},{title:a("public~Resource"),sortField:"resource",transforms:[c.a],props:{className:u[1]}},{title:a("public~Group"),sortField:"group",transforms:[c.a],props:{className:u[2]}},{title:a("public~Namespace"),sortField:"namespace",transforms:[c.a],props:{className:u[3]}}],Row:d,customData:l,"aria-label":a("public~Related objects"),NoDataEmptyMsg:p})))};t.a=e=>{var t,a;const l=null===(a=null===(t=e.obj)||void 0===t?void 0:t.status)||void 0===a?void 0:a.relatedObjects,c=null==l?void 0:l.filter(({resource:e})=>e);return n.createElement(b,Object.assign({},e,{data:c}))}}}]);
//# sourceMappingURL=cluster-settings-chunk-d213aaefd4e2a2e52d21.min.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[255],{11864:function(e,a,t){"use strict";t.d(a,"a",(function(){return b}));var l=t(547),r=t(1033),c=t(50),s=t(0),i=t(7),n=t(408),o=t(407),m=t(88),u=t(19),d=t(5);const p=e=>e.length!==l.a(e).length,b=({formValues:e,dispatchFormChange:a,isDefaultReceiver:t})=>{const l=(t,l)=>{const c=r.a(e.routeLabels);c.splice(t,1,l),a({type:"setFormValues",payload:{routeLabels:c,routeLabelDuplicateNamesError:p(c)}})},{t:b}=Object(i.useTranslation)();return s.createElement("div",{"data-test-id":"receiver-routing-labels-editor",className:"form-group"},s.createElement(d.ob,{text:b("public~Routing labels"),required:!t}),s.createElement("p",{className:"co-help-text pf-u-mb-md"},s.createElement(i.Trans,{ns:"public"},"Firing alerts with labels that match all of these"," ",s.createElement(d.z,{href:"https://prometheus.io/docs/alerting/latest/configuration/#matcher",text:b("public~matchers")})," ","will be sent to this receiver.")),t&&s.createElement("div",{className:"row form-group",key:"default"},s.createElement("div",{className:"col-xs-10"},s.createElement("div",{className:"form-group"},s.createElement("input",{type:"text",className:"pf-c-form-control","data-test-id":"label-default",value:"All (default receiver)",disabled:!0,required:!0})))),c.a(e.routeLabels,(c,i)=>{return s.createElement("div",{className:"row form-group",key:i},s.createElement("div",{className:"col-xs-10"},s.createElement("div",{className:"form-group"},s.createElement("input",{type:"text",className:"pf-c-form-control","data-test-id":"label-"+i,onChange:(o=i,e=>l(o,e.target.value)),placeholder:b("public~Matcher"),value:c,required:!0}))),s.createElement("div",{className:"col-xs-2"},s.createElement(m.a,{content:b("public~Remove")},s.createElement(u.a,{type:"button",onClick:()=>(t=>{const l=r.a(e.routeLabels);l.splice(t,1),a({type:"setFormValues",payload:{routeLabels:l,routeLabelDuplicateNamesError:p(l)}})})(i),"aria-label":b("public~Remove"),isDisabled:!t&&e.routeLabels.length<=1,variant:"plain","data-test-id":"remove-routing-label"},s.createElement(n.a,null)))));var o}),e.routeLabelDuplicateNamesError&&s.createElement("div",{className:"form-group co-routing-label-editor__error-message"},s.createElement("span",{className:"help-block"},s.createElement("span",{"data-test-id":"duplicate-label-error",className:"co-error"},b("public~Routing label names must be unique.")))),!t&&s.createElement(u.a,{className:"pf-m-link--align-left",onClick:()=>{l(e.routeLabels.length,"")},type:"button",variant:"link","data-test-id":"add-routing-label"},s.createElement(o.a,{className:"co-icon-space-r"}),b("public~Add label")))}},11865:function(e,a,t){"use strict";t.r(a),t.d(a,"Form",(function(){return b})),t.d(a,"getInitialValues",(function(){return h})),t.d(a,"isFormInvalid",(function(){return v})),t.d(a,"updateGlobals",(function(){return g})),t.d(a,"createReceiverConfig",(function(){return y}));var l=t(225),r=t(16),c=t(667),s=t(7194),i=t(0),n=t(7),o=t(692),m=t(6879),u=t(7566),d=t(5);const p=["pagerduty_url","pagerduty_send_resolved","pagerduty_client","pagerduty_client_url","pagerduty_description","pagerduty_severity"],b=({globals:e,formValues:a,dispatchFormChange:t})=>{const{t:l}=Object(n.useTranslation)();return i.createElement("div",{"data-test-id":"pagerduty-receiver-form"},i.createElement("div",{className:"form-group"},i.createElement("label",{className:"control-label",htmlFor:"integration-type-events"},l("public~Integration type")),i.createElement("div",null,i.createElement(o.b,{title:l("public~Events API v2"),id:"integration-type-events",value:"events",onChange:e=>t({type:"setFormValues",payload:{pagerdutyIntegrationKeyType:e.target.value}}),checked:"events"===a.pagerdutyIntegrationKeyType,"aria-checked":"events"===a.pagerdutyIntegrationKeyType,inline:!0}),i.createElement(o.b,{title:l("public~Prometheus"),name:"pagerdutyIntegrationKeyType","data-test-id":"integration-type-prometheus",value:"prometheus",onChange:e=>t({type:"setFormValues",payload:{pagerdutyIntegrationKeyType:e.target.value}}),checked:"prometheus"===a.pagerdutyIntegrationKeyType,"aria-checked":"prometheus"===a.pagerdutyIntegrationKeyType,inline:!0}))),i.createElement("div",{className:"form-group"},i.createElement("label",{"data-test-id":"pagerduty-key-label",className:"control-label co-required",htmlFor:"integration-key"},"events"===a.pagerdutyIntegrationKeyType?l("public~Routing key"):l("public~Service key")),i.createElement("input",{className:"pf-v5-c-form-control",type:"text","aria-describedby":"integration-key-help",id:"integration-key","data-test-id":"integration-key",value:a.pagerdutyIntegrationKey,onChange:e=>t({type:"setFormValues",payload:{pagerdutyIntegrationKey:e.target.value}})}),i.createElement("div",{className:"help-block",id:"integration-key-help"},l("public~PagerDuty integration key."))),i.createElement("div",{className:"form-group"},i.createElement("label",{"data-test-id":"pagerduty-url-label",className:"control-label co-required",htmlFor:"pagerduty-url"},l("public~PagerDuty URL")),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-sm-7"},i.createElement("input",{className:"pf-v5-c-form-control",type:"text",id:"pagerduty-url","aria-describedby":"pagerduty-url-help","data-test-id":"pagerduty-url",value:a.pagerduty_url,onChange:e=>t({type:"setFormValues",payload:{pagerduty_url:e.target.value}})})),i.createElement("div",{className:"col-sm-5"},i.createElement(u.a,{formField:"pagerdutySaveAsDefault",disabled:a.pagerduty_url===(null==e?void 0:e.pagerduty_url),label:l("public~Save as default PagerDuty URL"),formValues:a,dispatchFormChange:t,tooltip:l("public~Checking this box will write the URL to the global section of the configuration file where it will become the default URL for future PagerDuty receivers.")}))),i.createElement("div",{className:"help-block",id:"pagerduty-url-help"},l("public~The URL of your PagerDuty installation."))),i.createElement("div",{className:"form-group"},i.createElement(d.x,{textCollapsed:l("public~Show advanced configuration"),textExpanded:l("public~Hide advanced configuration"),dataTest:"advanced-configuration"},i.createElement("div",{className:"co-form-subsection"},i.createElement(m.a,{formField:"pagerduty_send_resolved",formValues:a,dispatchFormChange:t}),i.createElement("h3",null,l("public~Client details")),i.createElement("div",{className:"form-group"},i.createElement("label",{className:"control-label",htmlFor:"pagerduty-client"},l("public~Client")),i.createElement("input",{className:"pf-v5-c-form-control",type:"text","aria-describedby":"client-help",id:"pagerduty-client","data-test-id":"pagerduty-client",value:a.pagerduty_client,onChange:e=>t({type:"setFormValues",payload:{pagerduty_client:e.target.value}})}),i.createElement("div",{className:"help-block",id:"client-help"},l("public~The client identification of the Alertmanager."))),i.createElement("div",{className:"form-group"},i.createElement("label",{className:"control-label",htmlFor:"pagerduty-client-url"},l("public~Client URL")),i.createElement("input",{className:"pf-v5-c-form-control",type:"text","aria-describedby":"client-url-help",id:"pagerduty-client-url","data-test-id":"pagerduty-client-url",value:a.pagerduty_client_url,onChange:e=>t({type:"setFormValues",payload:{pagerduty_client_url:e.target.value}})}),i.createElement("div",{className:"help-block",id:"client-url-help"},l("public~A backlink to the sender of the notification."))),i.createElement("h3",null,l("public~Incident details")),i.createElement("div",{className:"form-group"},i.createElement("label",{className:"control-label",htmlFor:"pagerduty-description"},l("public~Description")),i.createElement("input",{className:"pf-v5-c-form-control",type:"text","aria-describedby":"description-help",id:"pagerduty-description","data-test-id":"pagerduty-description",value:a.pagerduty_description,onChange:e=>t({type:"setFormValues",payload:{pagerduty_description:e.target.value}})}),i.createElement("div",{className:"help-block",id:"description-help"},l("public~Description of the incident."))),i.createElement("div",{className:"form-group"},i.createElement("label",{className:"control-label",htmlFor:"pagerduty-severity"},l("public~Severity")),i.createElement("input",{className:"pf-v5-c-form-control",type:"text","aria-describedby":"severity-help",id:"pagerduty-severity","data-test-id":"pagerduty-severity",value:a.pagerduty_severity,onChange:e=>t({type:"setFormValues",payload:{pagerduty_severity:e.target.value}})}),i.createElement("div",{className:"help-block",id:"severity-help"},l("public~Severity of the incident.")))))))},h=(e,a)=>{const t={pagerdutySaveAsDefault:!1};return t.pagerdutyIntegrationKeyType=l.a(a,"service_key")?"prometheus":"events",t.pagerdutyIntegrationKey=(null==a?void 0:a.service_key)||(null==a?void 0:a.routing_key),p.forEach(l=>{const c=l.substring(l.indexOf("_")+1);t[l]=r.a(a,c,e[l])}),t},v=e=>!e.pagerdutyIntegrationKey,g=(e,a)=>{const t={};return a.pagerdutySaveAsDefault&&a.pagerduty_url&&c.a(t,"pagerduty_url",a.pagerduty_url),t},y=(e,a,t)=>{s.a(t,"routing_key"),s.a(t,"service_key");const l=("events"===a.pagerdutyIntegrationKeyType?"routing":"service")+"_key";return c.a(t,l,a.pagerdutyIntegrationKey),p.forEach(l=>{const r=a[l],i=l.substring(l.indexOf("_")+1);r!==e[l]?"pagerduty_url"===l&&a.pagerdutySaveAsDefault?s.a(t,"url"):c.a(t,i,r):s.a(t,i)}),t}},11866:function(e,a,t){"use strict";t.r(a),t.d(a,"Form",(function(){return m})),t.d(a,"getInitialValues",(function(){return u})),t.d(a,"isFormInvalid",(function(){return d})),t.d(a,"updateGlobals",(function(){return p})),t.d(a,"createReceiverConfig",(function(){return b}));var l=t(16),r=t(667),c=t(7194),s=t(0),i=t(7),n=t(5),o=t(6879);const m=({formValues:e,dispatchFormChange:a})=>{const{t:t}=Object(i.useTranslation)();return s.createElement("div",{"data-test-id":"webhook-receiver-form",className:"form-group"},s.createElement("label",{className:"control-label co-required",htmlFor:"webhook-url"},t("public~URL")),s.createElement("input",{className:"pf-v5-c-form-control",type:"text","aria-describedby":"webhook-url-help",id:"webhook-url","data-test-id":"webhook-url",value:e.webhookUrl,onChange:e=>a({type:"setFormValues",payload:{webhookUrl:e.target.value}})}),s.createElement("div",{className:"help-block",id:"webhook-url-help"},t("public~The endpoint to send HTTP POST requests to.")),s.createElement("div",{className:"form-group"},s.createElement(n.x,{textCollapsed:t("public~Show advanced configuration"),textExpanded:t("public~Hide advanced configuration"),dataTest:"advanced-configuration"},s.createElement("div",{className:"co-form-subsection"},s.createElement("div",{className:"form-group"},s.createElement(o.a,{formField:"webhookSendResolved",formValues:e,dispatchFormChange:a}))))))},u=(e,a)=>({webhookUrl:(null==a?void 0:a.url)||"",webhookSendResolved:l.a(a,"send_resolved",null==e?void 0:e.webhook_send_resolved)}),d=e=>!e.webhookUrl,p=()=>({}),b=(e,a,t)=>(r.a(t,"url",a.webhookUrl),a.webhookSendResolved!==e.webhook_send_resolved?r.a(t,"send_resolved",null==a?void 0:a.webhookSendResolved):c.a(t,"send_resolved"),t)},11867:function(e,a,t){"use strict";t.r(a),t.d(a,"Form",(function(){return p})),t.d(a,"getInitialValues",(function(){return h})),t.d(a,"isFormInvalid",(function(){return v})),t.d(a,"updateGlobals",(function(){return g})),t.d(a,"createReceiverConfig",(function(){return y}));var l=t(16),r=t(667),c=t(7194),s=t(0),i=t(7),n=t(5),o=t(6879),m=t(7566);const u=["smtp_from","smtp_smarthost","smtp_hello","smtp_auth_username","smtp_auth_password","smtp_auth_identity","smtp_auth_secret","smtp_require_tls"],d=[...u,"email_send_resolved","email_html"],p=({globals:e,formValues:a,dispatchFormChange:t})=>{const l=u.every(t=>a[t]===e[t]),{t:r}=Object(i.useTranslation)();return s.createElement("div",{"data-test-id":"email-receiver-form"},s.createElement("div",{className:"form-group"},s.createElement("label",{className:"control-label co-required",htmlFor:"email-to"},r("public~To address")),s.createElement("input",{className:"pf-v5-c-form-control",type:"text","aria-describedby":"email-to-help",id:"email-to","data-test-id":"email-to",value:a.emailTo,onChange:e=>t({type:"setFormValues",payload:{emailTo:e.target.value}})}),s.createElement("div",{className:"help-block",id:"email-to-help"},r("public~The email address to send notifications to."))),s.createElement("div",{className:"form-group"},s.createElement("div",{className:"co-m-pane__body--section-heading"},s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-6"},s.createElement(n.ob,{text:r("public~SMTP configuration")})),s.createElement("div",{className:"col-sm-6"},s.createElement(m.a,{formField:"emailSaveAsDefault",disabled:l,label:r("public~Save as default SMTP configuration"),formValues:a,dispatchFormChange:t,tooltip:r("public~Checking this box will write these values to the global section of the configuration file where they will become defaults for future email receivers.")}))),s.createElement("div",{className:"form-group"},s.createElement("label",{className:"control-label co-required",htmlFor:"email-from"},r("public~From address")),s.createElement("input",{className:"pf-v5-c-form-control",type:"text","aria-describedby":"email-from-help",id:"email-from","data-test-id":"email-from",value:a.smtp_from,onChange:e=>t({type:"setFormValues",payload:{smtp_from:e.target.value}})}),s.createElement("div",{className:"help-block",id:"email-from-help"},r("public~The email address to send notifications from."))),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-6"},s.createElement("div",{className:"form-group"},s.createElement("label",{className:"control-label co-required",htmlFor:"email-smarthost"},r("public~SMTP smarthost")),s.createElement("input",{className:"pf-v5-c-form-control",type:"text","aria-describedby":"email-smarthost-help",id:"email-smarthost","data-test-id":"email-smarthost",value:a.smtp_smarthost,onChange:e=>t({type:"setFormValues",payload:{smtp_smarthost:e.target.value}})}),s.createElement("div",{className:"help-block",id:"email-smarthost-help"},r("public~Smarthost used for sending emails, including port number.")))),s.createElement("div",{className:"col-sm-6"},s.createElement("div",{className:"form-group"},s.createElement("label",{className:"control-label co-required",htmlFor:"email-hello"},r("public~SMTP hello")),s.createElement("input",{className:"pf-v5-c-form-control",type:"text","aria-describedby":"email-hello-help",id:"email-hello","data-test-id":"email-hello",value:a.smtp_hello,onChange:e=>t({type:"setFormValues",payload:{smtp_hello:e.target.value}})}),s.createElement("div",{className:"help-block",id:"email-hello-help"},r("public~The hostname to identify to the SMTP server."))))),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-6"},s.createElement("div",{className:"form-group"},s.createElement("label",{className:"control-label",htmlFor:"email-auth-username"},r("public~Auth username")),s.createElement("input",{className:"pf-v5-c-form-control",type:"text",id:"email-auth-username","data-test-id":"email-auth-username",value:a.smtp_auth_username,onChange:e=>t({type:"setFormValues",payload:{smtp_auth_username:e.target.value}})}))),s.createElement("div",{className:"col-sm-6"},s.createElement("div",{className:"form-group"},s.createElement("label",{className:"control-label",htmlFor:"email-auth-password"},r("public~Auth password (using LOGIN and PLAIN)")),s.createElement("input",{className:"pf-v5-c-form-control",type:"password",id:"email-auth-password","data-test-id":"email-auth-password",value:a.smtp_auth_password,onChange:e=>t({type:"setFormValues",payload:{smtp_auth_password:e.target.value}})})))),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-6"},s.createElement("div",{className:"form-group"},s.createElement("label",{className:"control-label",htmlFor:"email-auth-identity"},r("public~Auth identity (using PLAIN)")),s.createElement("input",{className:"pf-v5-c-form-control",type:"text",id:"email-auth-identity","data-test-id":"email-auth-identity",value:a.smtp_auth_identity,onChange:e=>t({type:"setFormValues",payload:{smtp_auth_identity:e.target.value}})}))),s.createElement("div",{className:"col-sm-6"},s.createElement("div",{className:"form-group"},s.createElement("label",{className:"control-label",htmlFor:"email-auth-secret"},r("public~Auth secret (CRAM-MDS)")),s.createElement("input",{className:"pf-v5-c-form-control",type:"password",id:"email-auth-secret","data-test-id":"email-auth-secret",value:a.smtp_auth_secret,onChange:e=>t({type:"setFormValues",payload:{smtp_auth_secret:e.target.value}})})))),s.createElement("div",{className:"checkbox"},s.createElement("label",{className:"control-label",htmlFor:"email-require-tls"},s.createElement("input",{type:"checkbox",id:"email-require-tls","data-test-id":"email-require-tls",onChange:e=>t({type:"setFormValues",payload:{smtp_require_tls:e.target.checked}}),checked:a.smtp_require_tls,"aria-checked":a.smtp_require_tls}),r("public~Require TLS"))))),s.createElement("div",{className:"form-group"},s.createElement(n.x,{textCollapsed:r("public~Show advanced configuration"),textExpanded:r("public~Hide advanced configuration"),dataTest:"advanced-configuration"},s.createElement("div",{className:"co-form-subsection"},s.createElement("div",{className:"form-group"},s.createElement(o.a,{formField:"email_send_resolved",formValues:a,dispatchFormChange:t})),s.createElement("div",{className:"form-group"},s.createElement("label",{className:"control-label co-required",htmlFor:"email-html"},r("public~Body of email notifications (HTML)")),s.createElement("input",{className:"pf-v5-c-form-control",type:"text","aria-describedby":"html-help",id:"email-html","data-test-id":"email-html",value:a.email_html,onChange:e=>t({type:"setFormValues",payload:{email_html:e.target.value}})}))))))},b=e=>e.substring(e.indexOf("_")+1),h=(e,a)=>{const t={emailSaveAsDefault:!1,emailTo:null==a?void 0:a.to};return d.forEach(r=>{t[r]=l.a(a,b(r),e[r])}),t},v=e=>!(e.emailTo&&e.smtp_from&&e.smtp_smarthost&&e.smtp_hello),g=(e,a)=>{const t={};return a.emailSaveAsDefault&&u.forEach(e=>{const l=a[e];void 0!==l&&r.a(t,e,l)}),t},y=(e,a,t)=>(r.a(t,"to",a.emailTo),d.forEach(l=>{const s=a[l],i=b(l);s!==e[l]?u.includes(l)&&a.emailSaveAsDefault?c.a(t,i):r.a(t,i,s):c.a(t,i)}),t)},11868:function(e,a,t){"use strict";t.r(a),t.d(a,"Form",(function(){return h})),t.d(a,"getInitialValues",(function(){return v})),t.d(a,"isFormInvalid",(function(){return g})),t.d(a,"updateGlobals",(function(){return y})),t.d(a,"createReceiverConfig",(function(){return f}));var l=t(16),r=t(225),c=t(667),s=t(7194),i=t(0),n=t(7),o=t(1938),m=t(692),u=t(5),d=t(6879),p=t(7566);const b=["slack_api_url","slack_send_resolved","slack_username","slack_icon_emoji","slack_icon_url","slack_link_names","slack_title","slack_text"],h=({globals:e,formValues:a,dispatchFormChange:t})=>{const{t:l}=Object(n.useTranslation)();return i.createElement("div",{"data-test-id":"slack-receiver-form"},i.createElement("div",{className:"form-group"},i.createElement("label",{"data-test-id":"api-url-label",className:"control-label co-required",htmlFor:"slack-api-url"},l("public~Slack API URL")),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-sm-7"},i.createElement("input",{className:"pf-v5-c-form-control",type:"text",id:"slack-api-url","aria-describedby":"slack-api-url-help","data-test-id":"slack-api-url",value:a.slack_api_url,onChange:e=>t({type:"setFormValues",payload:{slack_api_url:e.target.value}})})),i.createElement("div",{className:"col-sm-5"},i.createElement(p.a,{formField:"slackSaveAsDefault",disabled:a.slack_api_url===(null==e?void 0:e.slack_api_url),label:l("public~Save as default Slack API URL"),formValues:a,dispatchFormChange:t,tooltip:l("public~Checking this box will write the API URL to the global section of the configuration file where it will become the default API URL for future Slack receivers.")}))),i.createElement("div",{className:"help-block",id:"slack-api-url-help"},l("public~The URL of the Slack webhook."))),i.createElement("div",{className:"form-group"},i.createElement("label",{className:"control-label co-required",htmlFor:"slack-channel"},l("public~Channel")),i.createElement("input",{className:"pf-v5-c-form-control",type:"text",id:"slack-channel","aria-describedby":"slack-channel-help","data-test-id":"slack-channel",value:a.slackChannel,onChange:e=>t({type:"setFormValues",payload:{slackChannel:e.target.value}})}),i.createElement("div",{className:"help-block",id:"slack-channel-help"},l("public~The Slack channel or user to send notifications to."))),i.createElement("div",{className:"form-group"},i.createElement(u.x,{textCollapsed:l("public~Show advanced configuration"),textExpanded:l("public~Hide advanced configuration"),dataTest:"advanced-configuration"},i.createElement("div",{className:"co-form-subsection"},i.createElement("div",{className:"form-group"},i.createElement(d.a,{formField:"slack_send_resolved",formValues:a,dispatchFormChange:t})),i.createElement("div",{className:"form-group"},i.createElement("label",{className:"control-label",htmlFor:"slack-icon-type"},l("public~Icon"),"  ",i.createElement(m.b,{title:l("public~URL"),name:"slackIconType",id:"slack-icon-type",value:"url",onChange:e=>t({type:"setFormValues",payload:{slackIconType:e.target.value}}),checked:"url"===a.slackIconType,inline:!0}),i.createElement(m.b,{title:l("public~Emoji"),name:"slackIconType",value:"emoji","data-test-id":"slack-icon-type-emoji",onChange:e=>t({type:"setFormValues",payload:{slackIconType:e.target.value}}),checked:"emoji"===a.slackIconType,inline:!0})),"url"===a.slackIconType&&i.createElement(i.Fragment,null,i.createElement("input",{className:"pf-v5-c-form-control",type:"text","aria-describedby":"slack-icon-url-help","aria-label":l("public~The URL of the icon."),"data-test-id":"slack-icon-url",value:a.slack_icon_url,onChange:e=>t({type:"setFormValues",payload:{slack_icon_url:e.target.value}})}),i.createElement("div",{className:"help-block",id:"slack-icon-url-help"},l("public~The URL of the icon."))),"emoji"===a.slackIconType&&i.createElement(i.Fragment,null,i.createElement("input",{className:"pf-v5-c-form-control",type:"text","aria-describedby":"slack-icon-emoji-help","aria-label":l("public~An emoji code to use in place of the default icon."),name:"slackIconEmoji","data-test-id":"slack-icon-emoji",value:a.slack_icon_emoji,onChange:e=>t({type:"setFormValues",payload:{slack_icon_emoji:e.target.value}})}),i.createElement("div",{className:"help-block",id:"slack-icon-emoji-help"},i.createElement(n.Trans,{ns:"public"},"An"," ",i.createElement(u.z,{href:"https://www.webfx.com/tools/emoji-cheat-sheet/",text:l("public~emoji code")})," ","to use in place of the default icon.")))),i.createElement("div",{className:"form-group"},i.createElement("label",{className:"control-label",htmlFor:"slack-username"},l("public~Username")),i.createElement("input",{className:"pf-v5-c-form-control",type:"text","aria-describedby":"slack-username-help",id:"slack-username","data-test-id":"slack-username",value:a.slack_username,onChange:e=>t({type:"setFormValues",payload:{slack_username:e.target.value}})}),i.createElement("div",{className:"help-block",id:"slack-username-help"},l("public~The displayed username."))),i.createElement("div",{className:"form-group"},i.createElement("div",{className:"checkbox"},i.createElement("label",{className:"control-label",htmlFor:"slack-link-names"},i.createElement("input",{type:"checkbox",id:"slack-link-names","data-test-id":"slack-link-names","aria-describedby":"slack-link-names-help",onChange:e=>t({type:"setFormValues",payload:{slack_link_names:e.target.checked}}),checked:a.slack_link_names}),l("public~Link names"))),i.createElement("div",{className:"help-block",id:"slack-link-names-help"},l("public~Find and link channel names and usernames."))),i.createElement("div",{className:"form-group"},i.createElement("label",{className:"control-label",htmlFor:"slack-title"},l("public~Title")),i.createElement(o.b,{id:"slack-title","aria-describedby":"slack-title-help",onChange:(e,a)=>t({type:"setFormValues",payload:{slack_title:a}}),value:a.slack_title}),i.createElement("div",{className:"help-block",id:"slack-title-help"},l("public~The title of the Slack message."))),i.createElement("div",{className:"form-group"},i.createElement("label",{className:"control-label",htmlFor:"slack-text"},l("public~Text")),i.createElement(o.b,{id:"slack-text","aria-describedby":"slack-text-help",onChange:(e,a)=>t({type:"setFormValues",payload:{slack_text:a}}),value:a.slack_text}),i.createElement("div",{className:"help-block",id:"slack-text-help"},l("public~The text of the Slack message.")))))))},v=(e,a)=>{const t={slackSaveAsDefault:!1,slackChannel:l.a(a,"channel")};return t.slackIconType=r.a(a,"icon_emoji")?"emoji":"url",b.forEach(r=>{const c=r.substring(r.indexOf("_")+1);t[r]=l.a(a,c,e[r])}),t},g=e=>!e.slack_api_url||!e.slackChannel,y=(e,a)=>{const t={};return a.slackSaveAsDefault&&a.slack_api_url&&c.a(t,"slack_api_url",a.slack_api_url),t},f=(e,a,t)=>(c.a(t,"channel",a.slackChannel),b.forEach(l=>{const r=a[l],i=l.substring(l.indexOf("_")+1);r!==e[l]?"slack_api_url"===l&&a.slackSaveAsDefault?s.a(t,"api_url"):c.a(t,i,r):s.a(t,i)}),s.a(t,"url"===a.slackIconType?"icon_emoji":"icon_url"),t)},4494:function(e,a,t){"use strict";t.r(a),t.d(a,"CreateReceiver",(function(){return B})),t.d(a,"EditReceiver",(function(){return H}));var l=t(0),r=t(50),c=t(117),s=t(22),i=t(16),n=t(160),o=t(4432),m=t(1256),u=t(113),d=t(640),p=t(2061),b=t(655),h=t(667),v=t(137),g=t(7),y=t(14),f=t(80),E=t(966),k=t(19),_=t(380),N=t(18),F=t(1042),T=t(980),C=t(1423),w=t(139),x=t(899),V=t(2348),j=t(11864),S=t(11865),I=t(11866),L=t(11867),R=t(11868),O=t(109),A=function(e,a){var t={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&a.indexOf(l)<0&&(t[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(l=Object.getOwnPropertySymbols(e);r<l.length;r++)a.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(t[l[r]]=e[l[r]])}return t};const D=e=>{switch(e){case"pagerduty_configs":return S;case"webhook_configs":return I;case"email_configs":return L;case"slack_configs":return R;default:return null}},q=(e,a)=>"setFormValues"===a.type?Object.assign(Object.assign({},e),a.payload):(console.error("Unrecognized Alertmanager form reducer action",a),e),P=(e,a,t)=>{var l;const i=c.a(t,e=>e.receiver===(null==a?void 0:a.name)),n=(e=>[...r.a((null==e?void 0:e.match)||{},(e,a)=>`${a} = ${e}`),...r.a((null==e?void 0:e.match_re)||{},(e,a)=>`${a} =~ ${e}`)])(i),o=[...null!=n?n:[],...null!==(l=null==i?void 0:i.matchers)&&void 0!==l?l:[]];return!e&&s.a(o)?[""]:o},U=({type:e})=>{const{t:a}=Object(g.useTranslation)();switch(e){case V.b.Default:return a("public~Your default receiver will automatically receive all alerts from this cluster that are not caught by other receivers first.");case V.b.Critical:return a('public~The routing labels for this receiver are configured to capture critical alerts. Finish setting up this receiver by selecting a "Receiver Type" to choose a destination for these alerts. If this receiver is deleted, critical alerts will go to the default receiver instead.');case V.b.Watchdog:return a("public~The Watchdog alert fires constantly to confirm that your alerting stack is functioning correctly. This receiver is configured to prevent it from creating unnecessary notifications. You can edit this receiver if you plan to use the information that Watchdog provides, otherwise this receiver should remain in its current state with no set receiver type.");default:return a("public~unknown receiver type")}},K=({type:e})=>{const{t:a}=Object(g.useTranslation)();return l.createElement(f.a,{isInline:!0,className:"co-alert co-alert--scrollable",variant:"info",title:`${e} ${a("public~Receiver")}`},l.createElement("div",{className:"co-pre-line"},l.createElement(U,{type:e})))},M=({obj:e,titleVerb:a,saveButtonText:t,editReceiverNamed:r,alertmanagerGlobals:f})=>{var _,C,w;const O=Object(y.useNavigate)(),[A,U]=l.useState(),[M,G]=l.useState(!1),{config:$,errorMessage:B}=Object(x.a)(e),{route:H,global:W}=$||{},z={pagerduty_send_resolved:!0,pagerduty_client:'{{ template "pagerduty.default.client" . }}',pagerduty_client_url:'{{ template "pagerduty.default.clientURL" . }}',pagerduty_description:'{{ template "pagerduty.default.description" .}}',pagerduty_severity:"error",email_send_resolved:!1,email_html:'{{ template "email.default.html" . }}',slack_send_resolved:!1,slack_username:'{{ template "slack.default.username" . }}',slack_icon_emoji:'{{ template "slack.default.iconemoji" .}}',slack_icon_url:'{{ template "slack.default.iconurl" .}}',slack_link_names:!1,slack_title:'{{ template "slack.default.title" .}}',slack_text:'{{ template "slack.default.text" .}}',webhook_send_resolved:!0},Y=Object.assign(Object.assign(Object.assign({},f),W),z),J=Object.assign(Object.assign(Object.assign(Object.assign({receiverName:"",receiverType:"",routeLabels:[]},S.getInitialValues(Y,null)),I.getInitialValues(Y,null)),L.getInitialValues(Y,null)),R.getInitialValues(Y,null));let Q;if(r&&(Q=c.a(i.a($,"receivers"),{name:r}),J.receiverName=Q?Q.name:"",J.receiverType=c.a(n.a(Q),e=>o.a(e,"_configs")),!s.a(J.receiverType))){const e=null===(_=null==Q?void 0:Q[J.receiverType])||void 0===_?void 0:_[0];m.a(J,D(J.receiverType).getInitialValues(Y,e))}const{receiver:X}=H||{},Z=!X||(s.a(null===(C=null==$?void 0:$.receivers)||void 0===C?void 0:C.filter(e=>e.name===X))||X===r);J.routeLabels=P(Z,Q,null!==(w=null==H?void 0:H.routes)&&void 0!==w?w:[]);const[ee,ae]=l.useReducer(q,J),te=D(ee.receiverType),le=(e=>{if(!(null==$?void 0:$.receivers))return!1;return $.receivers.filter(e=>e.name!==r).map(e=>e.name).includes(e)})(ee.receiverName),re=!ee.receiverName||le||!ee.receiverType||te.isFormInvalid(ee)||!s.a(ee.routeLabelFieldErrors)||ee.routeLabelDuplicateNamesError||!Z&&1===ee.routeLabels.length&&(""===ee.routeLabels[0].name||""===ee.routeLabels[0].value),{t:ce}=Object(g.useTranslation)(),se=ee.receiverType?ce("public~{{receiverTypeLabel}}",{receiverTypeLabel:x.d[ee.receiverType]}):null,ie=Z?ce("public~Default"):null;return l.createElement("div",{className:"co-m-pane__body co-m-pane__form"},l.createElement(v.a,null,l.createElement("title",null,ce("public~{{titleVerb}} Receiver",{titleVerb:a}))),l.createElement("form",{className:"co-m-pane__body-group",onSubmit:a=>{a.preventDefault();const t=u.a($)?d.a($):{global:{},route:{},receivers:[]};m.a(t.global,te.updateGlobals(Y,ee));const l=((e,a,t,l)=>{const r=t(e,a,l&&l[a.receiverType]?l[a.receiverType][0]:{});return{name:a.receiverName,[a.receiverType]:[Object.assign({},r)]}})(Y,ee,te.createReceiverConfig,Q);p.a(t,"receivers",(e=[])=>{if(r){const a=b.a(e,{name:r});e.splice(a,1,l)}else e.push(l);return e}),Z&&h.a(t,"route.receiver",l.name);const c=s.a(ee.routeLabels)?void 0:(i=l,n=ee.routeLabels,{receiver:i.name,matchers:n});var i,n;p.a(t,"route.routes",(e=[])=>{if(r){const a=b.a(e,{receiver:r});-1!==a?c?e.splice(a,1,c):e.splice(a,1):c&&e.push(c)}else c&&e.push(c);return e}),G(!0),Object(x.c)(e,t).then(()=>{U(""),G(!1),O("/monitoring/alertmanagerconfig")},e=>{U(e.message),G(!1)})}},l.createElement("h1",{className:"co-m-pane__heading"},ce("public~{{titleVerb}} {{receiverTypeLabel}} {{defaultString}} Receiver",{titleVerb:a,receiverTypeLabel:se,defaultString:ie})),Z&&l.createElement(K,{type:V.b.Default}),"Critical"===ee.receiverName&&!ee.receiverType&&l.createElement(K,{type:V.b.Critical}),"Watchdog"===ee.receiverName&&!ee.receiverType&&l.createElement(K,{type:V.b.Watchdog}),l.createElement("div",{className:N("form-group",{"has-error":le})},l.createElement("label",{className:"control-label co-required"},ce("public~Receiver name")),l.createElement("input",{className:"pf-v5-c-form-control",type:"text",value:ee.receiverName,onChange:e=>ae({type:"setFormValues",payload:{receiverName:e.target.value}}),"aria-describedby":"receiver-name-help",name:"receiverName","data-test-id":"receiver-name",required:!0}),le&&l.createElement("span",{className:"help-block"},l.createElement("span",{"data-test-id":"receiver-name-already-exists-error"},ce("public~A receiver with that name already exists.")))),l.createElement("div",{className:"form-group co-m-pane__dropdown"},l.createElement("label",{className:"control-label co-required"},ce("public~Receiver type")),l.createElement(T.b,{title:"Select receiver type...",name:"receiverType",items:x.d,dropDownClassName:"dropdown--full-width","data-test-id":"receiver-type",selectedKey:ee.receiverType,onChange:e=>ae({type:"setFormValues",payload:{receiverType:e}})})),ee.receiverType&&l.createElement(l.Fragment,null,l.createElement(te.Form,{globals:Y,formValues:ee,dispatchFormChange:ae}),l.createElement(j.a,{formValues:ee,dispatchFormChange:ae,isDefaultReceiver:Z})),l.createElement(F.a,{errorMessage:A||B,inProgress:M},l.createElement(E.a,{className:"pf-v5-c-form"},l.createElement(k.a,{type:"submit",variant:"primary","data-test-id":"save-changes",isDisabled:re},t),l.createElement(k.a,{type:"button",variant:"secondary","data-test-id":"cancel",onClick:()=>O(-1)},ce("public~Cancel"))))))},G=l.memo(e=>{var{obj:a}=e,t=A(e,["obj"]);const{alertManagerBaseURL:r}=window.SERVER_FLAGS,[c,i]=l.useState(),[n,o]=l.useState(!1),[m,u]=l.useState();l.useEffect(()=>{r?Object(O.c)(r+"/api/v2/status/").then(e=>{var a;const t=null===(a=null==e?void 0:e.config)||void 0===a?void 0:a.original;if(s.a(t))u({message:"alertmanager.v2.status.config.original not found."});else try{const{global:e}=Object(_.safeLoad)(t);i(e),o(!0)}catch(e){u({message:"Error parsing Alertmanager config.original: "+(e.message||"invalid YAML")})}}).catch(e=>u({message:`Error loading ${r}/api/v2/status/: ${e.message}`})):u({message:"Error alertManagerBaseURL not set"})},[r]);const{t:d}=Object(g.useTranslation)();return l.createElement(w.h,Object.assign({},a,{label:d("public~Alertmanager globals"),loaded:n,loadError:m}),l.createElement(M,Object.assign({},t,{obj:a.data,alertmanagerGlobals:c})))}),$=[{kind:"Secret",name:"alertmanager-main",namespace:"openshift-monitoring",isList:!1,prop:"obj"}],B=()=>{const{t:e}=Object(g.useTranslation)();return l.createElement(C.a,{resources:$},l.createElement(G,{titleVerb:e("public~Create"),saveButtonText:e("public~Create")}))},H=()=>{const{t:e}=Object(g.useTranslation)(),a=Object(y.useParams)();return l.createElement(C.a,{resources:$},l.createElement(G,{titleVerb:e("public~Edit"),saveButtonText:e("public~Save"),editReceiverNamed:a.name}))}},6879:function(e,a,t){"use strict";t.d(a,"a",(function(){return c}));var l=t(0),r=t(7);const c=({formField:e,formValues:a,dispatchFormChange:t})=>{const{t:c}=Object(r.useTranslation)();return l.createElement("div",{className:"checkbox"},l.createElement("label",{className:"control-label",htmlFor:e},l.createElement("input",{type:"checkbox",id:e,"data-test-id":"send-resolved-alerts",onChange:a=>t({type:"setFormValues",payload:{[e]:a.target.checked}}),checked:a[e],"aria-checked":a[e]}),c("public~Send resolved alerts to this receiver?")))}},7566:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var l=t(18),r=t(0),c=t(88),s=t(15);const i=({formField:e,disabled:a,label:t,formValues:i,dispatchFormChange:n,tooltip:o})=>{const m=l("checkbox",{"co-no-bold":a});return r.createElement("label",{className:m,htmlFor:e},r.createElement("input",{type:"checkbox",id:e,"data-test-id":"save-as-default",onChange:a=>n({type:"setFormValues",payload:{[e]:a.target.checked}}),checked:i[e],"aria-checked":i[e],disabled:a,"aria-disabled":a}),r.createElement("span",{className:"co-alert-manager-config__save-as-default-label"},t),r.createElement(c.a,{content:r.createElement("p",null,o)},r.createElement(s.o,null)))}}}]);
//# sourceMappingURL=receiver-forms-chunk-97b9fbb7ff8ccc03cb98.min.js.map
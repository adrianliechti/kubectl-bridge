(window.webpackJsonp=window.webpackJsonp||[]).push([[288],{5438:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n(165),l=n(354),a=n(294),r=n(205),s=n(1940),c=n(297),u=n(7),d=n(15),v=n(5918);const p=({disabled:e,value:t,onChange:n})=>{var s;const{t:c}=Object(u.useTranslation)(),v=[{value:d.p.OPTIN,title:c("console-telemetry-plugin~Opt-in"),description:c("console-telemetry-plugin~Opt-in to send telemetry events."),isSelected:t===d.p.OPTIN},{value:d.p.OPTOUT,title:c("console-telemetry-plugin~Opt-out"),description:c("console-telemetry-plugin~Opt-out to send telemetry events."),isSelected:t===d.p.OPTOUT},{value:d.p.ENFORCE,title:c("console-telemetry-plugin~Enforce"),description:c("console-telemetry-plugin~Always send telemetry events."),isSelected:t===d.p.ENFORCE},{value:d.p.DISABLED,title:c("console-telemetry-plugin~Disabled"),description:c("console-telemetry-plugin~Disable the telemetry in the cluster."),isSelected:t===d.p.DISABLED}],[p,m]=o.useState(!1),f=null===(s=v.find(e=>e.isSelected))||void 0===s?void 0:s.value;return o.createElement("div",{"data-test":"telemetry-dropdown"},o.createElement(l.a,{toggle:t=>{var n;return o.createElement(i.a,{ref:t,onClick:()=>m(!p),isExpanded:p,isDisabled:e,isFullWidth:!0},(null===(n=v.find(e=>e.value===f))||void 0===n?void 0:n.title)||c("console-telemetry-plugin~Select option"))},isOpen:p,onSelect:(t,o)=>{o&&!e&&n(o),m(!1)},onOpenChange:e=>m(e)},o.createElement(a.a,null,v.map(e=>o.createElement(r.a,{key:e.value,value:e,description:e.description,"data-test":"telemetry-dropdown-option-"+e.title,isSelected:e.isSelected},e.title)))))};t.default=({readonly:e})=>{const{t:t}=Object(u.useTranslation)(),n=Object(d.cf)(),[i,l,a]=Object(v.e)(),[r,m]=o.useState();o.useEffect(()=>{var e,t;i&&l&&!r&&m(null===(t=null===(e=null==i?void 0:i.metadata)||void 0===e?void 0:e.annotations)||void 0===t?void 0:t["telemetry.console.openshift.io/STATE"])},[r,i,l]);const[f,g]=o.useState(),y=Object(v.f)(()=>{g({status:"in-progress"});const e={metadata:{annotations:{"telemetry.console.openshift.io/STATE":r}}};Object(v.d)(e).then(()=>g({status:"successful"})).catch(e=>g({status:"error",error:e}))},2e3),O=e||!l||!!a;return o.createElement(v.a,{isHorizontal:!0},o.createElement(s.a,{title:t("console-telemetry-plugin~Analytics"),"data-test":"telemetry form-section"},o.createElement(c.a,null,t("console-telemetry-plugin~As admin you can decide sending telemetry events to a pre-configured Red Hat proxy that can be forwarded to third-party services for analysis.")),o.createElement(p,{disabled:O,value:r,onChange:e=>{n("Console cluster configuration changed",{customize:"Telemetry",analytics:e.value}),m(e.value),y()}}),o.createElement(v.b,{error:a}),o.createElement(v.c,Object.assign({},f))))}},5798:function(e,t,n){"use strict";var o=n(83),i=n(768),l=n(10),a=n(2236);t.a=()=>Object(i.a)({groupVersionKind:Object(o.getGroupVersionKindForModel)(l.ConsoleOperatorConfigModel),isList:!1,name:a.a})},5799:function(e,t,n){"use strict";var o=n(875),i=n(10),l=n(8),a=n(2236);t.a=e=>{const t=Object(l.Jb)(i.ConsoleOperatorConfigModel,{name:a.a});return Object(o.b)(t,"PATCH",{headers:{Accept:"application/json","Content-Type":"application/merge-patch+json;charset=UTF-8"},body:JSON.stringify(e)})}},5800:function(e,t,n){"use strict";var o=n(0),i=n(4),l=n(1953),a=n.n(l);t.a=({children:e,isHorizontal:t=!1,isWidthLimited:n=!0})=>o.createElement("div",{className:Object(i.css)(a.a.form,t&&a.a.modifiers.horizontal,n&&a.a.modifiers.limitWidth)},e)},5801:function(e,t,n){"use strict";var o=n(0),i=n(80),l=n(7);t.a=({error:e})=>{var t,n,a;const{t:r}=Object(l.useTranslation)();return e?o.createElement(i.a,{variant:"warning",isInline:!0,title:r("console-shared~Could not load configuration.")},(null===(n=null===(t=e.message)||void 0===t?void 0:t.toString)||void 0===n?void 0:n.call(t))||(null===(a=e.toString)||void 0===a?void 0:a.call(e))):null}},5802:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n(0),i=n(80),l=n(7);const a=({status:e,error:t})=>{var n,a,r;const{t:s}=Object(l.useTranslation)();return"successful"===e?o.createElement(i.a,{variant:"success","data-test":"success-alert",isInline:!0,title:s("console-shared~Saved.")},s("console-shared~This config update requires a console rollout, this can take up to a minute and require a browser refresh.")):"error"===e?o.createElement(i.a,{variant:"danger",isInline:!0,title:s("console-shared~Could not save configuration.")},(null===(a=null===(n=null==t?void 0:t.message)||void 0===n?void 0:n.toString)||void 0===a?void 0:a.call(n))||(null===(r=null==t?void 0:t.toString)||void 0===r?void 0:r.call(t))):null}},5803:function(e,t,n){"use strict"},5918:function(e,t,n){"use strict";var o=n(766);n.d(t,"f",(function(){return o.a}));var i=n(5798);n.d(t,"e",(function(){return i.a}));var l=n(5799);n.d(t,"d",(function(){return l.a}));var a=n(5800);n.d(t,"a",(function(){return a.a}));var r=n(5801);n.d(t,"b",(function(){return r.a}));var s=n(5802);n.d(t,"c",(function(){return s.a}));n(5803)}}]);
//# sourceMappingURL=telemetryConfiguration-chunk-d1873e4436af765fd465.min.js.map